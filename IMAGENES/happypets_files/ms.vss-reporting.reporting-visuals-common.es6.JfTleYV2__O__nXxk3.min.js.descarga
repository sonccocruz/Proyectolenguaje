"use strict";define("Reporting/Visuals",["require","exports","react","Reporting/DataQuality/DataQualityWarningsComponent","VSS/Platform/Layout","VSSUI/TooltipEx","VSSUI/Util","VSS/Platform/Location","VSSUI/Image","VSSUI/Button","VSS/Features/PlatformUI/FPSLink","VSSUI/Icon","VSS/Core/Util/String","VSSUI/Link"],function(e,s,t,a,i,r,n,o,l,c,u,p,g,d){var m,h,V,M,C,f;m=s.Resources={},s.Resources.NoData_Message="Last time you checked, there were no results.",s.Resources.SetIterationDates_Message="Set iteration dates to use this widget.",s.Resources.AxFaultIn_Message="Preparing your data. Try refreshing the page to see if we are done.",s.Resources.Unconfigured_Message="Configure widget",s.Resources.UnconfiguredImage_AltText="Gears with interlocking cogs indicating an unconfigured widget",s.Resources.ErrorMessage_AltText="A doctor with a stethoscope checking on a red disc with a white cross inside it, indicating an error with the widget",s.Resources.AxFaultIn_AltText="A man in a suit feeding binary digits from a cloud into a machine, which outputs a bar chart on a conveyor belt",s.Resources.NoData_AltText="No data available to display on the widget",s.Resources.Stakeholder_DialogTitle="Stakeholder license access",s.Resources.Stakeholder_LinkText="What are the license types for Azure DevOps Services?",s.Resources.Stakeholder_DialogMessageText="As a stakeholder, you can add and edit work items and bugs. You can also view dashboards, backlogs, and Kanban boards. Other features like source code and builds require a different license type.",s.Resources.Stakeholder_DialogSubHeading="You have been assigned a stakeholder license by your administrator.",s.Resources.CompactChartErrorWarning="Chart not loaded warning.",s.Resources.CompactChartErrorWarningTooltip="Chart could not be loaded. Click for more details.",function(e){h=s.VisualSubtitle={};s.VisualSubtitle.VisualSubtitle=class extends t.PureComponent{render(){return t.createElement("div",{className:"visual-subtitle text-ellipsis"},!this.props.hideSubTitle&&this.props.text)}}}(),function(e){V=s.VisualTitle={};s.VisualTitle.VisualTitle=class extends t.PureComponent{render(){return t.createElement(r.Tooltip,{text:this.props.text,overflowOnly:!0},t.createElement("h2",{className:(0,i.css)("visual-title","text-ellipsis",!this.props.suppressDefaultPadding&&"self-padded")},!this.props.hideTitle&&this.props.text,this.props.dataQualityWarning&&t.createElement(a.DataQualityWarningsComponent,{warning:this.props.dataQualityWarning}),this.props.children))}}}(),function(e){s.VisualHeader={};s.VisualHeader.VisualHeader=class extends t.PureComponent{render(){return t.createElement("div",{className:(0,n.css)("visual-header",this.props.subtitle&&"with-subtitle")},t.createElement("div",{className:"visual-title-and-subtitle-container text-ellipsis"},t.createElement(V.VisualTitle,{text:this.props.title,suppressDefaultPadding:!0,hideTitle:this.props.hideTitle,dataQualityWarning:this.props.dataQualityWarning}),this.props.subtitle&&t.createElement(h.VisualSubtitle,{text:this.props.subtitle})))}}}(),function(e){M=s.VisualMessagesWrappedVisualImage={};s.VisualMessagesWrappedVisualImage.WrappedVisualImage=class extends i.VssComponent{render(){return t.createElement(i.WrappedComponent,{wrappedType:a.componentType,dependencies:this.props.includeDependencies||[],wrappedProps:this.props})}};class a extends i.VssComponent{render(){return t.createElement(l.Image,Object.assign({},this.getImageProps()))}getImageProps(){return{src:(0,o.getAssetLocation)(this.context.pageContext,this.props.imagePath),width:this.props.width,height:this.props.height,containImage:this.props.containImage,alt:this.props.altText}}}a.componentType="imageComponent",i.VssComponent.register(a.componentType,a)}(),function(e){C=s.VisualMessagesAccessRestrictedImage={};s.VisualMessagesAccessRestrictedImage.AccessRestrictedImage=class extends i.VssComponent{render(){return t.createElement(M.WrappedVisualImage,{includeDependencies:["ms.vss-reporting.visual-messages-shared-data"],imagePath:"ms.vss-reporting/reporting-visuals-common/images/access-restricted.png"})}}}(),function(e){s.VisualMessagesActionRequiredContent={};s.VisualMessagesActionRequiredContent.ActionRequiredContent=class extends i.VssComponent{render(){return t.createElement(c.Button,{className:"action-required-content",subtle:!0,onClick:this.props.onClick},t.createElement(V.VisualTitle,{text:this.props.visualTitle}),t.createElement("div",{className:"action-required-grid-container"},t.createElement("div",{className:"action-required-grid"})))}}}(),function(e){f=s.VisualMessagesVisualMessageBase={};class a extends i.VssComponent{static useSmallImage(e){return e.height<=160&&e.width<=160}static sizeSupportsImage(e){return a.useSmallImage(e)||e.height>160&&e.width>160}constructor(e){super(e)}render(){return t.createElement("div",{className:"visual-message-card-container",style:this.props.size},t.createElement("div",{className:"visual-message-base"},t.createElement(V.VisualTitle,{text:this.props.visualTitle,suppressDefaultPadding:!0,hideTitle:this.props.hideTitle}),t.createElement("div",{className:"message-body"},this.renderContent(),this.renderImage(),this.renderLink(this.props.action))))}renderContent(){return this.props.size.height>160||this.props.size.width>160||!this.hasAction(this.props.action)?t.createElement("div",{className:"message-content"},this.props.messageContent):null}hasAction(e){return null!=e&&(null!=e.text||null!=e.onClick||null!=e.href)}renderLink(e){if(null!=e&&this.hasAction(e)){const s={href:e.href,className:"link",ariaLabel:e.ariaLabel};return e.onClick&&(s.onClick=e.onClick),t.createElement("div",{className:"message-action"},t.createElement(u.FPSLink,Object.assign({},s),e.text))}return null}renderImage(){if(this.props.imagePath&&(this.props.renderSmallImage||a.sizeSupportsImage(this.props.size))){const e={imagePath:this.props.imagePath,includeDependencies:["ms.vss-reporting.visual-messages-shared-data"],altText:this.props.altText};return(a.useSmallImage(this.props.size)||this.props.renderSmallImage)&&(e.height=40,e.width=40),t.createElement("div",{className:"message-icon"},t.createElement(M.WrappedVisualImage,Object.assign({},e)))}return null}}s.VisualMessagesVisualMessageBase.VisualMessageBase=a}(),function(e){s.VisualMessagesAxFaultInMessage={};s.VisualMessagesAxFaultInMessage.AxFaultInMessage=class extends i.VssComponent{render(){return t.createElement(f.VisualMessageBase,{visualTitle:this.props.visualTitle,messageContent:m.AxFaultIn_Message,size:this.props.size,imagePath:this.getResource(),altText:m.AxFaultIn_AltText})}getResource(e){return"ms.vss-reporting/reporting-visuals-common/images/service-setup.png"}}}(),function(e){s.VisualMessagesCompactChartErrorWarningComponent={};s.VisualMessagesCompactChartErrorWarningComponent.CompactChartErrorWarningComponent=class extends i.VssComponent{render(){return t.createElement(p.Icon,{ariaLabel:m.CompactChartErrorWarning,className:"compact-chart-error-warning-icon",iconName:"Error",tooltipProps:{text:m.CompactChartErrorWarningTooltip}})}}}(),function(e){s.VisualMessagesErrorMessage={};s.VisualMessagesErrorMessage.ErrorMessage=class extends i.VssComponent{render(){const e=`ms.vss-reporting/reporting-visuals-common/images/${this.isAnyDimensionSmall()?"errorWidget-small":"errorWidget-large"}.png`;return t.createElement(f.VisualMessageBase,{visualTitle:this.props.visualTitle,messageContent:this.props.messageBodyText,size:this.props.size,renderSmallImage:this.isAnyDimensionSmall(),imagePath:e,altText:m.ErrorMessage_AltText,action:this.props.action,hideTitle:this.props.hideTitle})}isAnyDimensionSmall(){return this.props.size.width<=160||this.props.size.height<=160}}}(),function(e){s.VisualMessagesNoDataMessage={};class a extends i.VssComponent{render(){return t.createElement(f.VisualMessageBase,{visualTitle:this.props.visualTitle,messageContent:(0,g.format)(m.NoData_Message,""),size:this.props.size,imagePath:this.getEmptyChartResourcePath(this.props.cardId),altText:m.NoData_AltText,hideTitle:this.props.hideTitle})}getEmptyChartResourcePath(e){return`ms.vss-reporting/reporting-visuals-common/images/chart-noresult-${e=e?Math.abs(e)%a.numberOfZeroResultImages:Math.floor(Math.random()*a.numberOfZeroResultImages)}.png`}}s.VisualMessagesNoDataMessage.NoDataMessage=a,a.numberOfZeroResultImages=7}(),function(e){s.VisualMessagesStakeholderAccessRestrictedMessage={};s.VisualMessagesStakeholderAccessRestrictedMessage.StakeholderAccessRestrictedMessage=class extends i.VssComponent{render(){return t.createElement("div",{className:"access-not-supported-dialog-content inline-flex-row"},t.createElement("span",{className:"flex-self-center"},t.createElement(C.AccessRestrictedImage,null)),t.createElement("div",{className:"flex-self-center separate-child-elements"},t.createElement("div",{className:"fontWeightSemiBold"},m.Stakeholder_DialogSubHeading),t.createElement("div",null,m.Stakeholder_DialogMessageText),t.createElement(d.Link,{href:"https://go.microsoft.com/fwlink/?LinkID=787012"},m.Stakeholder_LinkText)))}}}(),function(e){s.VisualMessagesUnconfiguredMessage={};s.VisualMessagesUnconfiguredMessage.UnconfiguredMessage=class extends i.VssComponent{constructor(){super(...arguments),this.handleKeyDown=(e=>{13===e.keyCode&&this.props.onClick&&this.props.onClick(e)})}render(){return t.createElement("div",{className:"unconfigured-message-container",tabIndex:0,onClick:this.props.onClick,onKeyDown:this.handleKeyDown,role:"button","aria-label":(0,g.format)("{0}{1}",this.props.visualTitle,m.Unconfigured_Message)},t.createElement(f.VisualMessageBase,{visualTitle:this.props.visualTitle,messageContent:(0,g.format)(m.Unconfigured_Message),size:this.props.size,imagePath:"ms.vss-reporting/reporting-visuals-common/images/unconfigured-large.png",renderSmallImage:this.props.renderSmallImage,altText:m.UnconfiguredImage_AltText}))}}}()},["Resources","VisualSubtitle","VisualTitle","VisualHeader","VisualMessages/WrappedVisualImage","VisualMessages/AccessRestrictedImage","VisualMessages/ActionRequiredContent","VisualMessages/VisualMessageBase","VisualMessages/AxFaultInMessage","VisualMessages/CompactChartErrorWarningComponent","VisualMessages/ErrorMessage","VisualMessages/NoDataMessage","VisualMessages/StakeholderAccessRestrictedMessage","VisualMessages/UnconfiguredMessage"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-reporting.reporting-visuals-common"}}));