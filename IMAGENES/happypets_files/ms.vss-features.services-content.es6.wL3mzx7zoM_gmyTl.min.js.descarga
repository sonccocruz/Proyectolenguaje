"use strict";define("VSS/Features/Services",["require","exports","VSS/Platform/Context","VSS/Core/Util/String"],function(e,t,n,i){!function(e){t.OrganizationsService={};n.Services.add("IOrganizationsService",{serviceFactory:class extends n.VssService{getMyOrganizationData(){if(!this.myOrganizationData){const e=this.pageContext.getService("IVssContributionService");this.myOrganizationData=e.getDataAsync("ms.vss-features.my-organizations-data-provider")}return this.myOrganizationData}getUserOrganizations(){return this.myOrganizations||(this.myOrganizations=this.getMyOrganizationData().then(e=>{let t=[];return e&&e.organizations&&(t=[...e.organizations]).sort((e,t)=>(0,i.localeIgnoreCaseComparer)(e.name,t.name)),t})),this.myOrganizations}getMostRecentlyAccessedUserOrganizations(){return this.myRecentlyUsedOrganizations||(this.myRecentlyUsedOrganizations=this.getMyOrganizationData().then(e=>{let t=[];if(e&&e.mostRecentlyAccessedHosts&&e.organizations){const n={};for(let t of e.organizations)n[t.id]=t;for(let i of e.mostRecentlyAccessedHosts){const e=n[i];e&&t.push(e)}}return t})),this.myRecentlyUsedOrganizations}getNewOrganizationUrl(){return this.getMyOrganizationData().then(e=>e?e.createNewOrgUrl:void 0)}isUserAccountMappingRequired(){return this.getMyOrganizationData().then(e=>!!e&&e.isUserAccountMappingRequired)}}}),t.OrganizationsService.getUserOrganizations=function(e){return e.getService("IOrganizationsService").getUserOrganizations()},t.OrganizationsService.getNewOrganizationUrl=function(e){return e.getService("IOrganizationsService").getNewOrganizationUrl()},t.OrganizationsService.getMostRecentlyAccessedUserOrganizations=function(e){return e.getService("IOrganizationsService").getMostRecentlyAccessedUserOrganizations()},t.OrganizationsService.isUserAccountMappingRequired=function(e){return e.getService("IOrganizationsService").isUserAccountMappingRequired()}}(),function(e){t.AccountMappingService={},t.AccountMappingService.queueSyncUserAccountMapping=function(e){return e.getService("IVssContributionService").getDataAsync("ms.vss-features.sync-user-account-mapping-data-provider",{queueSyncUserAccountMapping:!0}).then(e=>e)},t.AccountMappingService.activateMapping=function(e,t,n){return e.getService("IVssContributionService").getDataAsync("ms.vss-features.sync-user-account-mapping-data-provider",{activateMapping:!0,subjectDescriptor:t,accountId:n}).then(e=>e)}}()},["OrganizationsService","AccountMappingService"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-features.services-content"}}));