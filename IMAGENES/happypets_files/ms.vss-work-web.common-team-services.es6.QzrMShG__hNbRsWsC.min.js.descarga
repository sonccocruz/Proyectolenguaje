"use strict";define("Wit/Common/TeamServices",["require","exports","VSS/Core/Observable","VSS/Platform/Context","Wit/Clients/Work/RestClient/Work"],function(e,t,a,i,s){!function(e){var n;t.TeamSettingsService={},function(e){e.TeamSettingsDataProvider="ms.vss-work-web.new-team-wit-settings-data-provider"}(n||(n={}));function r(e){const t={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0};return e.forEach(e=>t[e]=!1),Object.keys(t).filter(e=>t[Number(e)]).map(e=>Number(e))}i.Services.add("ITeamSettingsService",{serviceFactory:class extends i.VssService{constructor(){super(...arguments),this.updateTeamSettings=((e,t)=>{var a,i;const n=(0,s.getWorkClient)(this.pageContext),o=this.pageContext.getService("ITfsPageService").getData(),c=null!==(i=null===(a=null==o?void 0:o.project)||void 0===a?void 0:a.id)&&void 0!==i?i:"";return n.updateTeamSettings(e,{teamId:t,projectId:c}).then(e=>{var t;(null===(t=this.teamDataCache)||void 0===t?void 0:t.value)&&(this.teamDataCache.value=Object.assign(Object.assign({},this.teamDataCache.value),{backlogVisibilities:e.backlogVisibilities,weekends:{canEditWeekends:this.teamDataCache.value.weekends.canEditWeekends,days:r(e.workingDays)},bugsBehavior:Number(e.bugsBehavior)}))})})}getTeamSettings(e){if((null==e?void 0:e.ignoreCache)||!this.teamDataPromise){const t=this.pageContext.getService("IVssContributionService");this.teamDataPromise=t.getDataAsync(n.TeamSettingsDataProvider,{},null==e?void 0:e.ignoreCache)}return this.teamDataPromise}getTeamSettingsObservable(e){return((null==e?void 0:e.ignoreCache)||!this.teamDataCache)&&(void 0===this.teamDataCache&&(this.teamDataCache=new a.ObservableValue(void 0)),this.getTeamSettings(e).then(e=>{this.teamDataCache.value=e})),this.teamDataCache}}})}()},["TeamSettingsService"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-work-web.common-team-services"}}));