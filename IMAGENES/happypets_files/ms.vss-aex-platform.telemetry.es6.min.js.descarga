"use strict";define("Aex/Platform/Telemetry",["require","exports","VSS/Platform/Context","VSS/Platform/Fetch","VSS/Platform/Util/Url","VSS/Core/Util/Promise"],function(e,t,i,s,a,r){var n,c,o,l,u,h,p,d,m,y,f,T,S,D,g,v,E,C,z,P,I,F,_,b,x,A,N;n=t.Constants={},(x=t.Constants.ServiceName||(t.Constants.ServiceName={})).IAexTelemetryService="IAexTelemetryService",x.IAexFetchTelemetryService="IAexFetchTelemetryService",(t.Constants.EventKey||(t.Constants.EventKey={})).baseType="baseType",c=t.CommonEnums={},(A=t.CommonEnums.FieldType||(t.CommonEnums.FieldType={}))[A.Default=0]="Default",A[A.Required=1]="Required",A[A.Array=2]="Array",A[A.Hidden=4]="Hidden",t.IAexTelemetry={},function(e){t.AexFetchTelemetryService={};const r=["/_apis/customerintelligence/Events","/_apis/ClientTrace/Events"];class c{constructor(e){this.aexTelemetry=e,this.preRequestEventLog={},this.idCounter=0,this._observer=((e,t)=>{switch(t){case"beforeRequest":const i=e;let s=!1;for(const e of r)if(i.requestUrl.endsWith(e)){s=!0;break}if(s)break;this.preRequestEventLog[i.requestId]=[i,+new Date];break;case"afterRequest":const n=e;if(!this.preRequestEventLog[n.requestId])break;const[c,o]=this.preRequestEventLog[n.requestId],l=+new Date,u=n.response;if(u){const e=u.headers.get("activityid")||(++this.idCounter).toString(),t=c.options&&c.options.method||"UNKNOWN",i=new a.Uri(u.url);this.aexTelemetry.trackDependency(e,t,i.absoluteUri,i.path,l-o,u.ok,u.status)}delete this.preRequestEventLog[n.requestId]}})}get observer(){return this._observer}}class o extends i.VssService{constructor(){super(...arguments),this.idCounter=0,this.observers={}}startTrackDependency(e){const t=this.idCounter++,i=this.observers[t]=new c(e);return s.requestListeners.subscribe(i.observer),t}stopTrackDependency(e){const t=this.observers[e];t&&s.requestListeners.unsubscribe(t.observer)}}t.AexFetchTelemetryService.AexFetchTelemetryService=o,i.Services.add(n.ServiceName.IAexFetchTelemetryService,{serviceFactory:o})}(),function(e){t.AexTelemetryService={};class s{constructor(e){this.onPublish=e,this.events=[],this.flushPromise=null}push(e){return this.events.push(e),null===this.flushPromise&&(this.flushPromise=this.schedulePublish()),this.flushPromise}async flush(){if(this.flushPromise=null,this.events.length>0){const e=this.events;return this.events=[],this.prevPublishPromise&&await this.prevPublishPromise,this.prevPublishPromise=this.onPublish(e),this.prevPublishPromise}this.prevPublishPromise&&await this.prevPublishPromise,this.prevPublishPromise=void 0}async schedulePublish(){const e=1e3+Math.floor(500*Math.random());return await(0,r.wait)(e),this.flush()}}class a extends i.VssService{constructor(){super(...arguments),this.onPublishCiEvent=(e=>{if(this.ciClient)return this.ciClient.publishEvents(e)}),this.onPublishCtEvent=(e=>{if(this.ctClient)return this.ctClient.publishEvents(e)})}_serviceStart(e){super._serviceStart(e),this.getSessionId(),this.ciClient=this.pageContext.getRestClient("ICustomerIntelligenceRestClient"),this.ciEventQueue=new s(this.onPublishCiEvent),this.ctClient=this.pageContext.getRestClient("IClientTraceRestClient"),this.ctEventQueue=new s(this.onPublishCtEvent)}_serviceRestart(){this.flush(),this.getSessionId()}publishCustomerIntelligenceEvent(e){return e.properties&&!e.properties.SessionId||!this.sessionId||(e.properties=e.properties||{},e.properties.SessionId=this.sessionId),this.ciEventQueue?this.ciEventQueue.push(e):Promise.reject("No customer intelligence queue found")}publishClientTraceEvent(e){return this.ctEventQueue?this.ctEventQueue.push(e):Promise.reject("No client trace queue found")}async flush(){this.ciEventQueue&&await this.ciEventQueue.flush(),this.ctEventQueue&&await this.ctEventQueue.flush()}getSessionId(){const e=this.pageContext.getService("IVssPageService").getData();e&&(this.sessionId=e.sessionId)}}t.AexTelemetryService.AexTelemetryService=a,i.Services.add(n.ServiceName.IAexTelemetryService,{serviceFactory:a})}(),t.InterfacesTelemetryISerializable={},function(e){o=t.SDKSerializer={};const i="__aiCircularRefCheck";class s{static serialize(e){return s._serializeObject(e,"root")}static _serializeObject(e,t){let a={};if(!e)return a;if(e[i])return a;if(!e.aiDataContract){if("measurements"===t)a=s._serializeStringNumberMap(e,t);else if("properties"===t)a=s._serializeStringStringMap(e,t);else if("tags"===t)a=s._serializeStringStringMap(e,t);else if(Array.isArray(e))a=s._serializeArray(e,t);else try{JSON.stringify(e),a=e}catch(e){}return a}e[i]=!0;for(const t in e.aiDataContract){const i=e.aiDataContract[t],r=i===c.FieldType.Required,n=i===c.FieldType.Hidden,o=i===c.FieldType.Array,l=void 0!==e[t],u="object"==typeof e[t]&&null!==e[t];if(r&&!l&&!o)continue;if(n)continue;let h;void 0!==(h=u?o?s._serializeArray(e[t],t):s._serializeObject(e[t],t):e[t])&&(a[t]=h)}return delete e[i],a}static _serializeArray(e,t){let i;if(e)if(Array.isArray(e)){i=[];for(let a=0;a<e.length;a++){const r=e[a],n=s._serializeObject(r,t+"["+a+"]");i.push(n)}}else;return i}static _serializeStringStringMap(e,t){let i;if(e){i={};for(const t in e){const s=e[t];void 0===s?i[t]="undefined":null===s?i[t]="null":s.toString?i[t]=s.toString():i[t]="invalid field: toString() is not defined."}}return i}static _serializeStringNumberMap(e,t){let i;if(e){i={};for(const t in e){const s=e[t];if(void 0===s)i[t]="undefined";else if(null===s)i[t]="null";else{const e="number"==typeof s?s:parseFloat(s);isNaN(e)?i[t]="NaN":i[t]=e}}}return i}}t.SDKSerializer.Serializer=s}(),function(e){l=t.InterfacesContractsDomain={};t.InterfacesContractsDomain.Domain=class{}}(),function(e){u=t.InterfacesContractsEventData={};t.InterfacesContractsEventData.EventData=class extends l.Domain{constructor(){super(),this.ver=2,this.properties={},this.measurements={}}}}(),function(e){h=t.SDKUtil={};class i{static _getVerifiedStorageObject(){let e,t=null;try{const i=(new Date).toString();(t=window.sessionStorage).setItem(i,i),e=t.getItem(i)!==i,t.removeItem(i),e&&(t=null)}catch(e){t=null}return t}static canUseSessionStorage(){return void 0===i._canUseSessionStorage&&(i._canUseSessionStorage=!!i._getVerifiedStorageObject()),i._canUseSessionStorage}static _getSessionStorageObject(){return i.canUseSessionStorage()?i._getVerifiedStorageObject():null}static getSessionStorage(e){const t=i._getSessionStorageObject();if(null!==t)try{return t.getItem(e)}catch(e){i._canUseSessionStorage=!1}return null}static setSessionStorage(e,t){const s=i._getSessionStorageObject();if(null!==s)try{return s.setItem(e,t),!0}catch(e){i._canUseSessionStorage=!1}return!1}static removeSessionStorage(e){const t=i._getSessionStorageObject();if(null!==t)try{return t.removeItem(e),!0}catch(e){i._canUseSessionStorage=!1}return!1}static isError(e){return"[object Error]"===Object.prototype.toString.call(e)}static msToTimeSpan(e){(isNaN(e)||e<0)&&(e=0);let t=""+(e=Math.round(e))%1e3,i=""+Math.floor(e/1e3)%60,s=""+Math.floor(e/6e4)%60,a=""+Math.floor(e/36e5)%24;const r=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,i=i.length<2?"0"+i:i,s=s.length<2?"0"+s:s,(r>0?r+".":"")+(a=a.length<2?"0"+a:a)+":"+s+":"+i+"."+t}}t.SDKUtil.Util=i,i.notSpecified="not_specified";class s{static parseUrl(e){return s.htmlAnchorElement||(s.htmlAnchorElement=s.document.createElement?s.document.createElement("a"):{}),s.htmlAnchorElement.href=e,s.htmlAnchorElement}static getAbsoluteUrl(e){let t;const i=s.parseUrl(e);return i&&(t=i.href),t}static getPathName(e){let t;const i=s.parseUrl(e);return i&&(t=i.pathname),t}static getCompleteUrl(e,t){return e?e.toUpperCase()+" "+t:t}}t.SDKUtil.UrlHelper=s,s.document="undefined"!=typeof document?document:{}}(),function(e){p=t.SDKTelemetryCommonDataSanitizer={};class i{static sanitizeKeyAndAddUniqueness(e,t){const s=e.length;let a=i.sanitizeKey(e);if(a.length!==s){let e=0,s=a;for(;void 0!==t[s];)e++,s=a.substring(0,i.MAX_NAME_LENGTH-3)+i.padNumber(e);a=s}return a}static sanitizeKey(e){return e&&(e=e.toString().trim()).length>i.MAX_NAME_LENGTH&&(e=e.substring(0,i.MAX_NAME_LENGTH)),e}static sanitizeString(e,t=i.MAX_STRING_LENGTH){return e&&(t=t||i.MAX_STRING_LENGTH,(e=e.trim()).toString().length>t&&(e=e.toString().substring(0,t))),e}static sanitizeUrl(e){return e&&(e=e.trim()).length>i.MAX_URL_LENGTH&&(e=e.substring(0,i.MAX_URL_LENGTH)),e}static sanitizeMessage(e){return e&&e.length>i.MAX_MESSAGE_LENGTH&&(e=e.substring(0,i.MAX_MESSAGE_LENGTH)),e}static sanitizeException(e){return e&&e.length>i.MAX_EXCEPTION_LENGTH&&(e=e.substring(0,i.MAX_EXCEPTION_LENGTH)),e}static sanitizeProperties(e){if(e){const t={};for(let s in e){const a=i.sanitizeString(e[s],i.MAX_PROPERTY_LENGTH);void 0!==a&&(t[s=i.sanitizeKeyAndAddUniqueness(s,t)]=a)}e=t}return e}static sanitizeMeasurements(e){if(e){const t={};for(let s in e){const a=e[s];t[s=i.sanitizeKeyAndAddUniqueness(s,t)]=a}e=t}return e}static padNumber(e){const t="00"+e;return t.substr(t.length-3)}}t.SDKTelemetryCommonDataSanitizer.DataSanitizer=i,i.MAX_NAME_LENGTH=150,i.MAX_PROPERTY_LENGTH=8192,i.MAX_STRING_LENGTH=1024,i.MAX_URL_LENGTH=2048,i.MAX_MESSAGE_LENGTH=32768,i.MAX_EXCEPTION_LENGTH=32768}(),function(e){d=t.SDKTelemetryEvent={};const i={ver:c.FieldType.Required,name:c.FieldType.Required,properties:c.FieldType.Default,measurements:c.FieldType.Default,features:c.FieldType.Array};class s extends u.EventData{constructor(e,t,s){super(),this.aiDataContract=i,this.name=p.DataSanitizer.sanitizeString(e)||h.Util.notSpecified,this.properties=p.DataSanitizer.sanitizeProperties(t),this.measurements=p.DataSanitizer.sanitizeMeasurements(s)}}t.SDKTelemetryEvent.Event=s,s.dataType="EventData"}(),function(e){m=t.InterfacesContractsStackFrame={};t.InterfacesContractsStackFrame.StackFrame=class{}}(),function(e){y=t.InterfacesContractsExceptionDetails={};t.InterfacesContractsExceptionDetails.ExceptionDetails=class{constructor(){this.hasFullStack=!0,this.parsedStack=[]}}}(),function(e){f=t.InterfacesContractsExceptionData={};t.InterfacesContractsExceptionData.ExceptionData=class extends l.Domain{constructor(){super(),this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}}}(),function(e){T=t.SDKTelemetryException={};const i={ver:c.FieldType.Required,exceptions:c.FieldType.Required,severityLevel:c.FieldType.Default,properties:c.FieldType.Default,measurements:c.FieldType.Default};class s extends f.ExceptionData{constructor(e,t,s,a){super(),this.aiDataContract=i,this.properties=p.DataSanitizer.sanitizeProperties(t),this.measurements=p.DataSanitizer.sanitizeMeasurements(s),this.exceptions=[new r(e)],a&&(this.severityLevel=a)}}t.SDKTelemetryException.Exception=s,s.dataType="ExceptionData";const a={id:c.FieldType.Default,outerId:c.FieldType.Default,typeName:c.FieldType.Required,message:c.FieldType.Required,hasFullStack:c.FieldType.Default,stack:c.FieldType.Default,parsedStack:c.FieldType.Array};class r extends y.ExceptionDetails{constructor(e){super(),this.aiDataContract=a,this.typeName=p.DataSanitizer.sanitizeString(e.name)||h.Util.notSpecified,this.message=p.DataSanitizer.sanitizeMessage(e.message)||h.Util.notSpecified;const t=e.stack;this.parsedStack=this.parseStack(t),this.stack=p.DataSanitizer.sanitizeException(t),this.hasFullStack=Array.isArray(this.parsedStack)&&this.parsedStack.length>0}parseStack(e){let t;if("string"==typeof e){const i=e.split("\n");t=[];let s=0,a=0;for(const e of i)if(o.regex.test(e)){const i=new o(e,s++);a+=i.sizeInBytes,t.push(i)}const r=32768;if(a>r){let e=0,i=t.length-1,s=0,a=e,n=i;for(;e<i;){if((s+=t[e].sizeInBytes+t[i].sizeInBytes)>r){const e=n-a+1;t.splice(a,e);break}a=e,n=i,e++,i--}}}return t}}const n={level:c.FieldType.Required,method:c.FieldType.Required,assembly:c.FieldType.Default,fileName:c.FieldType.Default,line:c.FieldType.Default};class o extends m.StackFrame{constructor(e,t){super(),this.sizeInBytes=0,this.aiDataContract=n,this.level=t,this.method="<no_method>",this.assembly=e.trim();const i=e.match(o.regex);i&&i.length>=5&&(this.method=i[2].trim()||this.method,this.fileName=i[4].trim(),this.line=parseInt(i[5],10)||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName?this.fileName.length:0,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=o.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line?this.line.toString().length:0}}t.SDKTelemetryException.StackFrame=o,o.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,o.baseSize=58}(),S=t.InterfacesContractsDataPointType={},(N=t.InterfacesContractsDataPointType.DataPointType||(t.InterfacesContractsDataPointType.DataPointType={}))[N.Measurement=0]="Measurement",N[N.Aggregation=1]="Aggregation",function(e){D=t.InterfacesContractsDataPoint={};t.InterfacesContractsDataPoint.DataPoint=class{constructor(){this.kind=S.DataPointType.Measurement}}}(),function(e){g=t.InterfacesContractsMetricData={};t.InterfacesContractsMetricData.MetricData=class extends l.Domain{constructor(){super(),this.ver=2,this.metrics=[],this.properties={}}}}(),function(e){v=t.SDKTelemetryMetric={};const i={ver:c.FieldType.Required,metrics:c.FieldType.Required,properties:c.FieldType.Default};class s extends g.MetricData{constructor(e,t,s,a,r,n){super(),this.aiDataContract=i;const c=new D.DataPoint;c.count=void 0!==s&&s>0?s:void 0,c.max=void 0===r||isNaN(r)?void 0:r,c.min=void 0===a||isNaN(a)?void 0:a,c.name=p.DataSanitizer.sanitizeString(e)||h.Util.notSpecified,c.value=t,this.metrics=[c],this.properties=p.DataSanitizer.sanitizeProperties(n)}}t.SDKTelemetryMetric.Metric=s,s.dataType="MetricData"}(),function(e){E=t.InterfacesContractsPageViewData={};t.InterfacesContractsPageViewData.PageViewData=class extends u.EventData{constructor(){super()}}}(),function(e){C=t.SDKTelemetryPageView={};const i={ver:c.FieldType.Required,name:c.FieldType.Default,duration:c.FieldType.Default,properties:c.FieldType.Default,measurements:c.FieldType.Default,id:c.FieldType.Default,features:c.FieldType.Array};class s extends E.PageViewData{constructor(e,t,s,a,r){super(),this.aiDataContract=i,this.id=p.DataSanitizer.sanitizeString(r),this.name=p.DataSanitizer.sanitizeString(e)||h.Util.notSpecified,void 0===t||isNaN(t)||(this.duration=h.Util.msToTimeSpan(t)),this.properties=p.DataSanitizer.sanitizeProperties(s),this.measurements=p.DataSanitizer.sanitizeMeasurements(a)}}t.SDKTelemetryPageView.PageView=s,s.dataType="PageviewData"}(),function(e){z=t.SDKTelemetryPageViewManager={};t.SDKTelemetryPageViewManager.PageViewManager=class{constructor(e){this.aexTelemetry=e}trackPageView(e,t,i,s){"string"!=typeof e&&(e=window.document&&window.document.title||""),this.aexTelemetry.sendPageViewInternal(e,void 0===s?void 0:isNaN(s)?void 0:s,t,i)}}}(),function(e){P=t.SDKTelemetryPageViewPerformance={};t.SDKTelemetryPageViewPerformance.PageViewPerformance=class{static getDuration(e,t){if(!isNaN(e)&&!isNaN(t))return Math.max(t-e,0)}}}(),function(e){I=t.InterfacesContractsRemoteDependencyData={};t.InterfacesContractsRemoteDependencyData.RemoteDependencyData=class extends l.Domain{constructor(){super(),this.ver=2,this.success=!0,this.properties={},this.measurements={}}}}(),function(e){F=t.SDKTelemetryRemoteDependencyData={};const i={id:c.FieldType.Required,ver:c.FieldType.Required,name:c.FieldType.Default,resultCode:c.FieldType.Default,duration:c.FieldType.Default,success:c.FieldType.Default,data:c.FieldType.Default,target:c.FieldType.Default,type:c.FieldType.Default,properties:c.FieldType.Default,measurements:c.FieldType.Default,kind:c.FieldType.Default,value:c.FieldType.Default,count:c.FieldType.Default,min:c.FieldType.Default,max:c.FieldType.Default,stdDev:c.FieldType.Default,dependencyKind:c.FieldType.Default,dependencySource:c.FieldType.Default,commandName:c.FieldType.Default,dependencyTypeName:c.FieldType.Default};class s extends I.RemoteDependencyData{constructor(e,t,s,a,r,n,c,o,l){if(super(),this.aiDataContract=i,this.id=e,this.duration=h.Util.msToTimeSpan(a),this.success=r,this.resultCode=n+"",this.type="Ajax",this.data=p.DataSanitizer.sanitizeUrl(s),t&&t.length>0){const e=h.UrlHelper.parseUrl(t);if(this.target=e.host,null!=e.pathname){let t=0===e.pathname.length?"/":e.pathname;"/"!==t.charAt(0)&&(t="/"+t),this.name=p.DataSanitizer.sanitizeString(c?c+" "+t:t)}else this.name=p.DataSanitizer.sanitizeString(t)}else this.target=s,this.name=s;this.properties=p.DataSanitizer.sanitizeProperties(o),this.measurements=p.DataSanitizer.sanitizeMeasurements(l)}}t.SDKTelemetryRemoteDependencyData.RemoteDependencyData=s,s.dataType="RemoteDependencyData"}(),function(e){_=t.InterfacesContractsMessageData={};t.InterfacesContractsMessageData.MessageData=class extends l.Domain{constructor(){super(),this.ver=2,this.properties={}}}}(),function(e){b=t.SDKTelemetryTrace={};const i={ver:c.FieldType.Required,message:c.FieldType.Required,severityLevel:c.FieldType.Default,properties:c.FieldType.Default};class s extends _.MessageData{constructor(e,t){super(),this.aiDataContract=i,e=e||h.Util.notSpecified,this.message=p.DataSanitizer.sanitizeMessage(e),this.properties=p.DataSanitizer.sanitizeProperties(t)}}t.SDKTelemetryTrace.Trace=s,s.dataType="MessageData"}(),function(e){t.AexTelemetry={};class i{constructor(e,t,i,a){this.service=e,this.area=t,this.feature=i,this.features=a,this._pageViewManager=new z.PageViewManager(this),this._eventTracking=new s((e,t,i,s)=>{s?isNaN(s.duration)&&(s.duration=t):s={duration:t};const a=new d.Event(e,i,s),r=o.Serializer.serialize(a);r&&(r.dataType=d.Event.dataType,this.service.publishClientTraceEvent({area:this.area,feature:this.feature,properties:r}))}),this._pageTracking=new s((e,t,i,s)=>{this.sendPageViewInternal(e,t,i,s)})}child(e){return this.withFeature(this.feature+"."+e)}withFeature(e){return new i(this.service,this.area,e,this.features)}get areaName(){return this.area}get featureName(){return this.feature}sendPageViewInternal(e,t,i,s){try{const a=new C.PageView(e,t,i,s);a.features=this.features;const r=o.Serializer.serialize(a);r&&(r.dataType=C.PageView.dataType,this.service.publishCustomerIntelligenceEvent({area:this.area,feature:this.feature,properties:r}))}catch(e){}}startTrackPage(e){try{this._pageTracking.start(e)}catch(e){}}stopTrackPage(e,t,i){try{this._pageTracking.stop(e,t,i)}catch(e){}}trackPageView(e,t,i,s){try{this._pageViewManager.trackPageView(e,t,i,s)}catch(e){}}startTrackEvent(e){try{this._eventTracking.start(e)}catch(e){}}stopTrackEvent(e,t,i){try{this._eventTracking.stop(e,t,i)}catch(e){}}trackClientTraceEvent(e,t,i){try{const s=new d.Event(e,t,i),a=o.Serializer.serialize(s);a&&(a.dataType=d.Event.dataType,this.service.publishClientTraceEvent({area:this.area,feature:this.feature,properties:a}))}catch(e){}}trackCustomerIntelligenceEvent(e,t,i){try{const s=new d.Event(e,t,i);s.features=this.features;const a=o.Serializer.serialize(s);a&&(a.dataType=d.Event.dataType,this.service.publishCustomerIntelligenceEvent({area:this.area,feature:this.feature,properties:a}))}catch(e){}}trackDependency(e,t,i,s,a,r,n,c,l){try{const u=new F.RemoteDependencyData(e,i,s,a,r,n,t,c,l),h=o.Serializer.serialize(u);h&&(h.dataType=F.RemoteDependencyData.dataType,this.service.publishClientTraceEvent({area:this.area,feature:this.feature,properties:h,level:4}))}catch(e){}}trackException(e,t,i,s,a=1){try{if(!h.Util.isError(e))try{throw new Error(e)}catch(t){e=t}const r=new T.Exception(e,i,s),n=o.Serializer.serialize(r);if(n)return n.dataType=T.Exception.dataType,n.handledAt=t,this.service.publishClientTraceEvent({area:this.area,feature:this.feature,properties:n,level:a})}catch(e){}return Promise.resolve(void 0)}trackMetric(e,t,i,s,a,r){try{const n=new v.Metric(e,t,i,s,a,r),c=o.Serializer.serialize(n);c&&(c.dataType=v.Metric.dataType,this.service.publishClientTraceEvent({area:this.area,feature:this.feature,properties:c}))}catch(e){}}trackTrace(e,t,i){try{const s=new b.Trace(e,t),a=o.Serializer.serialize(s);a&&(a.dataType=b.Trace.dataType,this.service.publishClientTraceEvent({area:this.area,feature:this.feature,properties:a,level:i}))}catch(e){}}flush(){return this.service.flush()}}t.AexTelemetry.AexTelemetry=i;class s{constructor(e){this.action=e,this._events={}}start(e){this._events[e],this._events[e]=+new Date}stop(e,t,i){const s=this._events[e];if(isNaN(s));else{const a=+new Date,r=P.PageViewPerformance.getDuration(s,a);void 0!==r&&this.action(e,r,t,i)}delete this._events[e]}}}(),function(e){function i(){}t.NullAexTelemetry={};const s=Promise.resolve(void 0);function a(){return s}t.NullAexTelemetry.NullAexTelemetry=class{constructor(){this.startTrackPage=i,this.stopTrackPage=i,this.trackPageView=i,this.startTrackEvent=i,this.stopTrackEvent=i,this.trackEvent=i,this.trackDependency=i,this.trackException=a,this.trackMetric=i,this.trackTrace=i,this.setProperty=i,this.trackClientTraceEvent=i,this.trackCustomerIntelligenceEvent=i,this.flush=a,this.areaName="",this.featureName=""}child(){return this}withFeature(){return this}}}()},["Constants","Common/Enums","IAexTelemetry","AexFetchTelemetryService","AexTelemetryService","Interfaces/Telemetry/ISerializable","SDK/Serializer","Interfaces/Contracts/Domain","Interfaces/Contracts/EventData","SDK/Util","SDK/Telemetry/Common/DataSanitizer","SDK/Telemetry/Event","Interfaces/Contracts/StackFrame","Interfaces/Contracts/ExceptionDetails","Interfaces/Contracts/ExceptionData","SDK/Telemetry/Exception","Interfaces/Contracts/DataPointType","Interfaces/Contracts/DataPoint","Interfaces/Contracts/MetricData","SDK/Telemetry/Metric","Interfaces/Contracts/PageViewData","SDK/Telemetry/PageView","SDK/Telemetry/PageViewManager","SDK/Telemetry/PageViewPerformance","Interfaces/Contracts/RemoteDependencyData","SDK/Telemetry/RemoteDependencyData","Interfaces/Contracts/MessageData","SDK/Telemetry/Trace","AexTelemetry","NullAexTelemetry"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-aex-platform.telemetry"}}));