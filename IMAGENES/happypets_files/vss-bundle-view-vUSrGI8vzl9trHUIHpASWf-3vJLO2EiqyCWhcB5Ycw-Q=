if (window.performance && window.performance.mark) { window.performance.mark('startLoadBundleInner-view'); }
// Copyright (C) Microsoft Corporation. All rights reserved.
define("TfsCommon/Scripts/Navigation/PageService",["require","exports","VSS/Contributions/LocalPageData","VSS/Service"],function(n,t,i,r){function o(){return e.getProject()}Object.defineProperty(t,"__esModule",{value:!0});t.getProject=void 0;var u="ms.vss-tfs-web.page-data",f=function(){function n(){}return n.prototype.getProject=function(){var n=i.getData(u)||{};return n.project},n}(),e=r.getLocalService(f);t.getProject=o});

define("TfsCommon/Scripts/ProjectTelemetry",["require","exports","TfsCommon/Scripts/Navigation/PageService","VSS/Telemetry/Services"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});r.addTelemetryEventHandler(function(n){var t=i.getProject();t&&(n.properties.dataspaceId=t.id,n.properties.dataspaceType="Project",n.properties.dataspaceVisibility=t.visibility.toString(),n.properties.navigationMode="vertical")})});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define("VSS/Settings/RestClient",["require","exports","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r){"use strict";function d(n){return window.VSS&&window.VSS.VssSDKRestVersion&&b[window.VSS.VssSDKRestVersion]?i.getClient(b[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):i.getClient(e,undefined,undefined,undefined,n)}var u,f,e,o,s,h,c,l,a,v,y,p,w,k,b;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.SettingsHttpClient=t.SettingsHttpClient3=t.SettingsHttpClient3_1=t.SettingsHttpClient3_2=t.SettingsHttpClient4=t.SettingsHttpClient4_1=t.SettingsHttpClient5=t.SettingsHttpClient5_1=t.SettingsHttpClient5_2=t.SettingsHttpClient6=t.SettingsHttpClient6_1=t.SettingsHttpClient7=t.SettingsHttpClient7_1=t.CommonMethods3To7_1=void 0;u=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.setEntriesForScope=function(n,t,i,r){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"Settings",locationId:"4cbaafaf-e8af-4570-98d1-79ee99c56327",resource:"Entries",routeTemplate:"_apis/{area}/{scopeName}/{scopeValue}/{resource}/{userScope}/{*key}",routeValues:{userScope:t,scopeName:i,scopeValue:r},apiVersion:this.entriesApiVersion,data:n})},t.prototype.removeEntriesForScope=function(n,t,i,r){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Settings",locationId:"4cbaafaf-e8af-4570-98d1-79ee99c56327",resource:"Entries",routeTemplate:"_apis/{area}/{scopeName}/{scopeValue}/{resource}/{userScope}/{*key}",routeValues:{userScope:n,scopeName:t,scopeValue:i,key:r},apiVersion:this.entriesApiVersion})},t.prototype.getEntriesForScope=function(n,t,i,r){return this._beginRequest({httpMethod:"GET",area:"Settings",locationId:"4cbaafaf-e8af-4570-98d1-79ee99c56327",resource:"Entries",routeTemplate:"_apis/{area}/{scopeName}/{scopeValue}/{resource}/{userScope}/{*key}",responseIsCollection:!0,routeValues:{userScope:n,scopeName:t,scopeValue:i,key:r},apiVersion:this.entriesApiVersion})},t.prototype.setEntries=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"Settings",locationId:"cd006711-163d-4cd4-a597-b05bad2556ff",resource:"Entries",routeTemplate:"_apis/{area}/{resource}/{userScope}/{*key}",routeValues:{userScope:t},apiVersion:this.entriesApiVersion_cd006711,data:n})},t.prototype.removeEntries=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Settings",locationId:"cd006711-163d-4cd4-a597-b05bad2556ff",resource:"Entries",routeTemplate:"_apis/{area}/{resource}/{userScope}/{*key}",routeValues:{userScope:n,key:t},apiVersion:this.entriesApiVersion_cd006711})},t.prototype.getEntries=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Settings",locationId:"cd006711-163d-4cd4-a597-b05bad2556ff",resource:"Entries",routeTemplate:"_apis/{area}/{resource}/{userScope}/{*key}",responseIsCollection:!0,routeValues:{userScope:n,key:t},apiVersion:this.entriesApiVersion_cd006711})},t}(r.VssHttpClient);t.CommonMethods3To7_1=u;f=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="7.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient7_1=f;e=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="7.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient7=e;o=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="6.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient6_1=o;s=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="6.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient6=s;h=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="5.2-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient5_2=h;c=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="5.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient5_1=c;l=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="5.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient5=l;a=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="4.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient4_1=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="4.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient4=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="3.2-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient3_2=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="3.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient3_1=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="3.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient3=w;k=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(f);t.SettingsHttpClient=k;b={"7.1":f,"7.0":e,"6.1":o,"6.0":s,"5.2":h,"5.1":c,"5.0":l,"4.1":a,"4.0":v,"3.2":y,"3.1":p,"3.0":w};t.getClient=d});

define("TfsCommon/Scripts/Navigation/SettingsService",["require","exports","VSS/Contributions/Services","VSS/Service","VSS/Settings/RestClient"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.SettingsService=void 0;var f=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.initializeSettings(),t}return __extends(t,n),t.prototype.initializeSettings=function(){var n=r.getService(i.WebPageDataService);this._prefs=n.getPageData(t.DATA_PROVIDER_ID)||{};this._prefs[t.USER_KEY]||(this._prefs[t.USER_KEY]={})},t.prototype.setUserSetting=function(n,i){this._prefs[t.USER_KEY][n]=i;var f={};return f[t.PREFIX+n]=i,r.getClient(u.SettingsHttpClient).setEntries(f,"me")},t.prototype.getUserSetting=function(n,i){var r=this._prefs[t.USER_KEY][n];return r!==undefined&&r!==null?r:i},t.DATA_PROVIDER_ID="ms.vss-tfs-web.navigation-settings-data-provider",t.PREFIX="Navigation/",t.USER_KEY="user",t}(r.VssService);t.SettingsService=f});

define("WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.Navigation",["require","exports"],function(require,exports){var e=exports;e.NewWorkItemActionTitle="{0}";e.NewWorkItemSubmenuTitle="New Work Item";e.AllWorkItemsTitle="New Work Item";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/TFS.Host.TfsContext",["require","exports","VSS/VSS","VSS/Context","VSS/Diag","VSS/Common/Contracts/Platform","VSS/Contributions/LocalPageData"],function(n,t,i,r,u,f,e){function l(){h=$.now()}var h,s,a,o,c;Object.defineProperty(t,"__esModule",{value:!0});t.TfsContext=t.TeamFoundationHostType=t.NavigationContextLevels=t.Configuration=t.setImageTimestamp=void 0;t.setImageTimestamp=l;s=function(){function n(n){this._options=n||{}}return n.prototype.getRootPath=function(){return this._options.rootPath||"/"},n.prototype.getTheme=function(){return this._options.theme||"Default"},n.prototype.getResourcesPath=function(){return this._options.resourcesPath||this.getRootPath()+"_content/"},n.prototype.getResourcesFile=function(n){return this.getResourcesPath()+encodeURIComponent(n)},n.prototype.getTfsStaticRootPath=function(){return this._options.staticRootTfs||"/tfs/_static/tfs/12/"},n.prototype.get3rdPartyStaticRootPath=function(){return this._options.staticRoot3rdParty||"/tfs/_static/3rdParty/"},n.prototype.getThemedFile=function(n){return this.getTfsStaticRootPath()+"App_Themes/"+encodeURIComponent(this.getTheme())+"/"+encodeURIComponent(n)},n.prototype.getWebApiVersion=function(){return this._options.webApiVersion||"1"},n.prototype.getMailSettings=function(){return this._options.mailSettings},n}();t.Configuration=s,function(n){n[n.None=0]="None";n[n.Deployment=1]="Deployment";n[n.Application=2]="Application";n[n.Collection=4]="Collection";n[n.Project=8]="Project";n[n.Team=16]="Team";n[n.ApplicationAll=15]="ApplicationAll";n[n.All=31]="All"}(a=t.NavigationContextLevels||(t.NavigationContextLevels={})),function(n){n[n.Parent=-1]="Parent";n[n.Unknown=0]="Unknown";n[n.Deployment=1]="Deployment";n[n.Application=2]="Application";n[n.ProjectCollection=4]="ProjectCollection"}(o=t.TeamFoundationHostType||(t.TeamFoundationHostType={}));c=function(){function n(t){n._addedFpsCallback||(n._addedFpsCallback=!0,document.body.addEventListener("legacyFpsComplete",function(){n._defaultTfsContext=undefined}));this.initialize(t)}return n.getContextOrDefault=function(t){var i=r.parseWebContext(t);return i?new n(i):n.getDefault()},n.getDefault=function(){if(!n._defaultTfsContext){var t=r.getDefaultWebContext();if(!t)throw new Error("Default context information is missing.");n.setDefaultContext(t)}return n._defaultTfsContext},n.tryGetDefaultContext=function(){if(typeof n._defaultTfsContext=="undefined"){var t=r.getDefaultWebContext();t?n.setDefaultContext(t):n._defaultTfsContext=null}return n._defaultTfsContext},n.setDefaultContext=function(t){n._previousTfsContext?(n._previousTfsContext.initialize(t),n._defaultTfsContext=n._previousTfsContext):(n._defaultTfsContext=new n(t),n._previousTfsContext=n._defaultTfsContext)},n.prototype.initialize=function(t){this.contextData=t;var i=r.getPageContext();this.navigation={applicationServiceHost:n.createServiceHost(t.account,f.ContextHostType.Application,t,i.webAccessConfiguration.paths.rootPath),area:i.navigation.area,areaPrefix:i.webAccessConfiguration.api.areaPrefix,collection:n.createServiceHost(t.collection,f.ContextHostType.ProjectCollection,t,i.webAccessConfiguration.paths.rootPath),controllerPrefix:i.webAccessConfiguration.api.controllerPrefix,currentAction:i.navigation.currentAction,currentController:i.navigation.currentController,currentParameters:i.navigation.currentParameters,project:null,projectId:null,publicAccessPoint:{authority:t.host.authority,scheme:t.host.scheme,uri:t.account?t.account.uri:t.host.uri},serviceHost:n.createServiceHost(t.host,t.host.hostType,t,i.webAccessConfiguration.paths.rootPath),topMostLevel:i.navigation.topMostLevel,team:null,teamId:null};this.navigation.publicAccessPoint.uri[this.navigation.publicAccessPoint.uri.length-1]!=="/"&&(this.navigation.publicAccessPoint.uri+="/");t.project&&(this.navigation.project=t.project.name,this.navigation.projectId=t.project.id);t.team&&i.navigation.topMostLevel===f.NavigationContextLevels.Team&&(this.navigation.team=t.team.name,this.navigation.teamId=t.team.id);this.configuration=new s({mailSettings:i.webAccessConfiguration.mailSettings,resourcesPath:i.webAccessConfiguration.paths.resourcesPath,rootPath:i.webAccessConfiguration.paths.rootPath,staticRoot3rdParty:i.webAccessConfiguration.paths.staticRoot3rdParty,staticRootTfs:i.webAccessConfiguration.paths.staticRootTfs,theme:i.globalization.theme,webApiVersion:i.webAccessConfiguration.api.webApiVersion});this.isHosted=!!i.webAccessConfiguration.isHosted;this.allowStatsCollection=!!i.diagnostics.allowStatsCollection;this.activityId=i.diagnostics.activityId;this.sessionId=i.diagnostics.sessionId;this.isAADAccount=!!t.host.isAADAccount;this.isSameHost=window.self==window.top;t.user&&(this.currentUser=t.user.name,this.standardAccessMode=!t.user.limitedAccess,this.currentIdentity={displayName:t.user.name,email:t.user.email,id:t.user.id,isActive:!0,isContainer:!1,uniqueName:t.user.uniqueName});t.team&&(this.currentTeam={name:t.team.name,identity:{displayName:t.team.name,id:t.team.id,isActive:!0,isContainer:!0,email:null,uniqueName:null}})},n.createServiceHost=function(n,t,i,r){return n?{hostType:t,name:n.name,instanceId:n.id,uri:n.uri,relVDir:this.trimVirtualPath(n.relativeUri,r),vDir:n.relativeUri}:null},n.trimVirtualPath=function(n,t){if(!n||n.length===0)return n;for(n.toLowerCase().indexOf(t.toLowerCase())===0&&(n=n.substr(t.length));n.length>0&&n[0]==="/";)n=n.substr(1);while(n.length>0&&n[n.length-1]==="/")n=n.substr(0,n.length-1);return n},n.prototype.getSessionId=function(){var t,r,i,u,n;for(t=this.sessionId,r=document.cookie?document.cookie.split("; "):[],i=0,u=r.length;i<u;i++)if(n=r[i].split("="),n&&n.length===2&&n[0]==="Tfs-SessionId"){t=n[1];break}return this.sessionId=t,t},n.prototype.getHostUrl=function(){return this.navigation.publicAccessPoint.scheme+"://"+this.navigation.publicAccessPoint.authority},n.prototype.getServiceHostUrl=function(){return this.navigation.serviceHost.vDir},n.prototype.getPublicActionUrl=function(n,t,i){var r=this._constructActionUrl(n,t,i);return this.getHostUrl()+this.configuration.getRootPath()+r},n.prototype.getActionUrl=function(n,t,i){if(!this.isSameHost)return this.getPublicActionUrl(n,t,i);var r=this._constructActionUrl(n,t,i);return this.configuration.getRootPath()+r},n.prototype.getCollectionActionUrl=function(n,t,i,r){var u=this._getCollectionTfsContext(n);return u.getActionUrl(t,i,r)},n.prototype.getCollectionTfsContext=function(n){var t=$.extend(!0,{},this);return t.navigation.serviceHost=n,t.navigation.collection=n,t.contextData=$.extend(!0,{},t.contextData),t.contextData.host.id=n.instanceId,t.contextData.host.name=n.name,t.contextData.host.uri=n.uri,t.contextData.host.relativeUri=n.vDir,t.contextData.host.hostType=f.ContextHostType.ProjectCollection,t.contextData.collection=t.contextData.host,t},n.prototype._getCollectionTfsContext=function(n){if(this.navigation.serviceHost.hostType===o.ProjectCollection&&this.navigation.serviceHost.name.toLowerCase()===n.toLowerCase())return this;var t={instanceId:"",name:n,hostType:o.ProjectCollection,vDir:"",relVDir:n};return this.getCollectionTfsContext(t)},n.prototype.getPermalinkUrl=function(n,t,i){var r=this._constructPermalinkUrl(n,t,i);return this.configuration.getRootPath()+r},n.prototype.getIdentityImageUrl=function(t,i){var r=e.getSharedData("_identityDetails"),u={area:n._API,project:"",id:t,t:r&&r[t]?r[t].identityImageId:h};return this.getActionUrl("IdentityImage","common",$.extend(u,i))},n.prototype.isEmbedded=function(){return!!this.getClientHost()},n.prototype.getClientHost=function(){return r.getPageContext().webAccessConfiguration.clientHost},n.prototype._constructActionUrl=function(t,r,u){var h=this.navigation,e=[],c,a,v,f,l,w,b,d,s,k,y,p;if(b=h.areaPrefix||"",d=h.controllerPrefix||"",f=$.extend({},u),s=f.area,typeof s=="undefined"&&(s=h.area),delete f.area,c=f.serviceHost,typeof c=="undefined"&&(c=h.serviceHost),c&&(c.relVDir&&e.push(encodeURI(c.relVDir)),c.hostType===o.ProjectCollection&&(k=this._shouldBuildApiUrl(s,f),a=f.project,typeof a=="undefined"&&(a=k?h.projectId:h.project),a&&(e.push(encodeURIComponent(a)),v=f.team,(typeof f.includeTeam=="undefined"||f.includeTeam===null)&&(f.includeTeam=!0),f.includeTeam&&(typeof v=="undefined"&&(v=k?h.teamId:h.team),v&&e.push(encodeURIComponent(v)))))),delete f.serviceHost,delete f.project,delete f.team,delete f.includeTeam,s)if($.isArray(s))for(y=s,y.length>0&&e.push(encodeURIComponent(b+y[0])),p=1;p<y.length;p++)e.push(encodeURIComponent(y[p]));else e.push(encodeURIComponent(b+s));return r||(r=f.controller),delete f.controller,t||(t=f.action),delete f.action,l=f.parameters,delete f.parameters,l&&(r||(r=n._DEFAULT_CONTROLLER_NAME),t||(t=n._DEFAULT_ACTION_NAME)),r&&(e.push(encodeURIComponent(d+r)),t&&(e.push(encodeURIComponent(t)),l&&($.isArray(l)?e.push.apply(e,$.map(l,encodeURIComponent)):e.push(encodeURIComponent(l))))),(f.includeVersion||s===n._API)&&(f[n._VERSION]=this.configuration.getWebApiVersion()),f.includeLanguage&&i.uiCulture&&(f[n._LANGUAGE]=i.uiCulture),delete f.includeVersion,f.area!==n._API&&this.getClientHost()&&(f[n._CLIENTHOST]=this.getClientHost()),w=$.param(f),e.join("/")+(w?"?"+w:"")},n.prototype._constructPermalinkUrl=function(t,i,r){var s=this.navigation,u=[],f=$.extend({},r),o,h=s.controllerPrefix||"",c=i||f.controller||n._DEFAULT_CONTROLLER_NAME,l=t||f.action||n._DEFAULT_ACTION_NAME,e=f.parameters;return u.push(n._PERMALINK_PREFIX),u.push(encodeURIComponent(h+c)),u.push(encodeURIComponent(l)),delete f.controller,delete f.action,delete f.parameters,e&&($.isArray(e)?u.push.apply(u,$.map(e,encodeURIComponent)):u.push(encodeURIComponent(e))),o=$.param(f),u.join("/")+(o?"?"+o:"")},n.prototype._shouldBuildApiUrl=function(t,i){var r;return t&&(r=$.isArray(t)?t[0]:t),i.useApiUrl||r===n._API&&(typeof i.useApiUrl=="undefined"||i.useApiUrl)},n._DEFAULT_CONTROLLER_NAME="home",n._DEFAULT_ACTION_NAME="index",n._CLIENTHOST="clientHost",n._VERSION="__v",n._LANGUAGE="__loc",n._PERMALINK_PREFIX="_permalink",n._API="api",n.ControlExtensions={initializeEnhancementOptions:function(t,i){return $.extend({},i,{tfsContext:n.getContextOrDefault(t)})}},n}();t.TfsContext=c});

define("TFS/WorkItemTracking/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.WorkItemTypeFieldsExpandLevel=t.WorkItemRecentActivityType=t.WorkItemExpand=t.WorkItemErrorPolicy=t.TreeStructureGroup=t.TreeNodeStructureType=t.TemplateType=t.ReportingRevisionsExpand=t.QueryType=t.QueryResultType=t.QueryRecursionOption=t.QueryOption=t.QueryExpand=t.QueryErrorPolicy=t.ProvisioningActionType=t.LogicalOperation=t.LinkQueryMode=t.GetFieldsExpand=t.FieldUsage=t.FieldType=t.CommentSortOrder=t.CommentReactionType=t.CommentExpandOptions=t.ClassificationNodesErrorPolicy=void 0,function(n){n[n.Fail=1]="Fail";n[n.Omit=2]="Omit"}(i=t.ClassificationNodesErrorPolicy||(t.ClassificationNodesErrorPolicy={})),function(n){n[n.None=0]="None";n[n.Reactions=1]="Reactions";n[n.RenderedText=8]="RenderedText";n[n.RenderedTextOnly=16]="RenderedTextOnly";n[n.All=-17]="All"}(r=t.CommentExpandOptions||(t.CommentExpandOptions={})),function(n){n[n.Like=0]="Like";n[n.Dislike=1]="Dislike";n[n.Heart=2]="Heart";n[n.Hooray=3]="Hooray";n[n.Smile=4]="Smile";n[n.Confused=5]="Confused"}(u=t.CommentReactionType||(t.CommentReactionType={})),function(n){n[n.Asc=1]="Asc";n[n.Desc=2]="Desc"}(f=t.CommentSortOrder||(t.CommentSortOrder={})),function(n){n[n.String=0]="String";n[n.Integer=1]="Integer";n[n.DateTime=2]="DateTime";n[n.PlainText=3]="PlainText";n[n.Html=4]="Html";n[n.TreePath=5]="TreePath";n[n.History=6]="History";n[n.Double=7]="Double";n[n.Guid=8]="Guid";n[n.Boolean=9]="Boolean";n[n.Identity=10]="Identity";n[n.PicklistString=11]="PicklistString";n[n.PicklistInteger=12]="PicklistInteger";n[n.PicklistDouble=13]="PicklistDouble"}(e=t.FieldType||(t.FieldType={})),function(n){n[n.None=0]="None";n[n.WorkItem=1]="WorkItem";n[n.WorkItemLink=2]="WorkItemLink";n[n.Tree=3]="Tree";n[n.WorkItemTypeExtension=4]="WorkItemTypeExtension"}(o=t.FieldUsage||(t.FieldUsage={})),function(n){n[n.None=0]="None";n[n.ExtensionFields=1]="ExtensionFields";n[n.IncludeDeleted=2]="IncludeDeleted"}(s=t.GetFieldsExpand||(t.GetFieldsExpand={})),function(n){n[n.WorkItems=0]="WorkItems";n[n.LinksOneHopMustContain=1]="LinksOneHopMustContain";n[n.LinksOneHopMayContain=2]="LinksOneHopMayContain";n[n.LinksOneHopDoesNotContain=3]="LinksOneHopDoesNotContain";n[n.LinksRecursiveMustContain=4]="LinksRecursiveMustContain";n[n.LinksRecursiveMayContain=5]="LinksRecursiveMayContain";n[n.LinksRecursiveDoesNotContain=6]="LinksRecursiveDoesNotContain"}(h=t.LinkQueryMode||(t.LinkQueryMode={})),function(n){n[n.NONE=0]="NONE";n[n.AND=1]="AND";n[n.OR=2]="OR"}(c=t.LogicalOperation||(t.LogicalOperation={})),function(n){n[n.Import=0]="Import";n[n.Validate=1]="Validate"}(l=t.ProvisioningActionType||(t.ProvisioningActionType={})),function(n){n[n.Fail=1]="Fail";n[n.Omit=2]="Omit"}(a=t.QueryErrorPolicy||(t.QueryErrorPolicy={})),function(n){n[n.None=0]="None";n[n.Wiql=1]="Wiql";n[n.Clauses=2]="Clauses";n[n.All=3]="All";n[n.Minimal=4]="Minimal"}(v=t.QueryExpand||(t.QueryExpand={})),function(n){n[n.Doing=1]="Doing";n[n.Done=2]="Done";n[n.Followed=3]="Followed"}(y=t.QueryOption||(t.QueryOption={})),function(n){n[n.ParentFirst=0]="ParentFirst";n[n.ChildFirst=1]="ChildFirst"}(p=t.QueryRecursionOption||(t.QueryRecursionOption={})),function(n){n[n.WorkItem=1]="WorkItem";n[n.WorkItemLink=2]="WorkItemLink"}(w=t.QueryResultType||(t.QueryResultType={})),function(n){n[n.Flat=1]="Flat";n[n.Tree=2]="Tree";n[n.OneHop=3]="OneHop"}(b=t.QueryType||(t.QueryType={})),function(n){n[n.None=0]="None";n[n.Fields=1]="Fields"}(k=t.ReportingRevisionsExpand||(t.ReportingRevisionsExpand={})),function(n){n[n.WorkItemType=0]="WorkItemType";n[n.GlobalWorkflow=1]="GlobalWorkflow"}(d=t.TemplateType||(t.TemplateType={})),function(n){n[n.Area=0]="Area";n[n.Iteration=1]="Iteration"}(g=t.TreeNodeStructureType||(t.TreeNodeStructureType={})),function(n){n[n.Areas=0]="Areas";n[n.Iterations=1]="Iterations"}(nt=t.TreeStructureGroup||(t.TreeStructureGroup={})),function(n){n[n.Fail=1]="Fail";n[n.Omit=2]="Omit"}(tt=t.WorkItemErrorPolicy||(t.WorkItemErrorPolicy={})),function(n){n[n.None=0]="None";n[n.Relations=1]="Relations";n[n.Fields=2]="Fields";n[n.Links=3]="Links";n[n.All=4]="All"}(it=t.WorkItemExpand||(t.WorkItemExpand={})),function(n){n[n.Visited=0]="Visited";n[n.Edited=1]="Edited";n[n.Deleted=2]="Deleted";n[n.Restored=3]="Restored"}(rt=t.WorkItemRecentActivityType||(t.WorkItemRecentActivityType={})),function(n){n[n.None=0]="None";n[n.AllowedValues=1]="AllowedValues";n[n.DependentFields=2]="DependentFields";n[n.All=3]="All"}(ut=t.WorkItemTypeFieldsExpandLevel||(t.WorkItemTypeFieldsExpandLevel={}));t.TypeInfo={AccountMyWorkResult:{},AccountRecentActivityWorkItemModel:{},AccountRecentActivityWorkItemModel2:{},AccountRecentActivityWorkItemModelBase:{},AccountRecentMentionWorkItemModel:{},AccountWorkWorkItemModel:{},ClassificationNodesErrorPolicy:{enumValues:{fail:1,omit:2}},Comment:{},CommentExpandOptions:{enumValues:{none:0,reactions:1,renderedText:8,renderedTextOnly:16,all:-17}},CommentList:{},CommentReaction:{},CommentReactionType:{enumValues:{like:0,dislike:1,heart:2,hooray:3,smile:4,confused:5}},CommentSortOrder:{enumValues:{asc:1,desc:2}},CommentVersion:{},ExternalDeployment:{},FieldType:{enumValues:{string:0,integer:1,dateTime:2,plainText:3,html:4,treePath:5,history:6,double:7,guid:8,boolean:9,identity:10,picklistString:11,picklistInteger:12,picklistDouble:13}},FieldUsage:{enumValues:{none:0,workItem:1,workItemLink:2,tree:3,workItemTypeExtension:4}},GetFieldsExpand:{enumValues:{none:0,extensionFields:1,includeDeleted:2}},LinkQueryMode:{enumValues:{workItems:0,linksOneHopMustContain:1,linksOneHopMayContain:2,linksOneHopDoesNotContain:3,linksRecursiveMustContain:4,linksRecursiveMayContain:5,linksRecursiveDoesNotContain:6}},LogicalOperation:{enumValues:{none:0,and:1,or:2}},ProvisioningActionType:{enumValues:{"import":0,validate:1}},QueryBatchGetRequest:{},QueryErrorPolicy:{enumValues:{fail:1,omit:2}},QueryExpand:{enumValues:{none:0,wiql:1,clauses:2,all:3,minimal:4}},QueryHierarchyItem:{},QueryHierarchyItemsResult:{},QueryOption:{enumValues:{doing:1,done:2,followed:3}},QueryRecursionOption:{enumValues:{parentFirst:0,childFirst:1}},QueryResultType:{enumValues:{workItem:1,workItemLink:2}},QueryType:{enumValues:{flat:1,tree:2,oneHop:3}},ReportingRevisionsExpand:{enumValues:{none:0,fields:1}},TemplateType:{enumValues:{workItemType:0,globalWorkflow:1}},TreeNodeStructureType:{enumValues:{area:0,iteration:1}},TreeStructureGroup:{enumValues:{areas:0,iterations:1}},WorkItemBatchGetRequest:{},WorkItemClassificationNode:{},WorkItemComment:{},WorkItemComments:{},WorkItemErrorPolicy:{enumValues:{fail:1,omit:2}},WorkItemExpand:{enumValues:{none:0,relations:1,fields:2,links:3,all:4}},WorkItemField:{},WorkItemHistory:{},WorkItemQueryClause:{},WorkItemQueryResult:{},WorkItemRecentActivityType:{enumValues:{visited:0,edited:1,deleted:2,restored:3}},WorkItemTypeFieldsExpandLevel:{enumValues:{none:0,allowedValues:1,dependentFields:2,all:3}},WorkItemTypeTemplateUpdateModel:{},WorkItemUpdate:{}};t.TypeInfo.AccountMyWorkResult.fields={workItemDetails:{isArray:!0,typeInfo:t.TypeInfo.AccountWorkWorkItemModel}};t.TypeInfo.AccountRecentActivityWorkItemModel.fields={activityDate:{isDate:!0},activityType:{enumType:t.TypeInfo.WorkItemRecentActivityType},changedDate:{isDate:!0}};t.TypeInfo.AccountRecentActivityWorkItemModel2.fields={activityDate:{isDate:!0},activityType:{enumType:t.TypeInfo.WorkItemRecentActivityType},changedDate:{isDate:!0}};t.TypeInfo.AccountRecentActivityWorkItemModelBase.fields={activityDate:{isDate:!0},activityType:{enumType:t.TypeInfo.WorkItemRecentActivityType},changedDate:{isDate:!0}};t.TypeInfo.AccountRecentMentionWorkItemModel.fields={mentionedDateField:{isDate:!0}};t.TypeInfo.AccountWorkWorkItemModel.fields={changedDate:{isDate:!0}};t.TypeInfo.Comment.fields={createdDate:{isDate:!0},createdOnBehalfDate:{isDate:!0},modifiedDate:{isDate:!0},reactions:{isArray:!0,typeInfo:t.TypeInfo.CommentReaction}};t.TypeInfo.CommentList.fields={comments:{isArray:!0,typeInfo:t.TypeInfo.Comment}};t.TypeInfo.CommentReaction.fields={type:{enumType:t.TypeInfo.CommentReactionType}};t.TypeInfo.CommentVersion.fields={createdDate:{isDate:!0},createdOnBehalfDate:{isDate:!0},modifiedDate:{isDate:!0}};t.TypeInfo.ExternalDeployment.fields={statusDate:{isDate:!0}};t.TypeInfo.QueryBatchGetRequest.fields={$expand:{enumType:t.TypeInfo.QueryExpand},errorPolicy:{enumType:t.TypeInfo.QueryErrorPolicy}};t.TypeInfo.QueryHierarchyItem.fields={children:{isArray:!0,typeInfo:t.TypeInfo.QueryHierarchyItem},clauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},createdDate:{isDate:!0},filterOptions:{enumType:t.TypeInfo.LinkQueryMode},lastExecutedDate:{isDate:!0},lastModifiedDate:{isDate:!0},linkClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},queryRecursionOption:{enumType:t.TypeInfo.QueryRecursionOption},queryType:{enumType:t.TypeInfo.QueryType},sourceClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},targetClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause}};t.TypeInfo.QueryHierarchyItemsResult.fields={value:{isArray:!0,typeInfo:t.TypeInfo.QueryHierarchyItem}};t.TypeInfo.WorkItemBatchGetRequest.fields={$expand:{enumType:t.TypeInfo.WorkItemExpand},asOf:{isDate:!0},errorPolicy:{enumType:t.TypeInfo.WorkItemErrorPolicy}};t.TypeInfo.WorkItemClassificationNode.fields={children:{isArray:!0,typeInfo:t.TypeInfo.WorkItemClassificationNode},structureType:{enumType:t.TypeInfo.TreeNodeStructureType}};t.TypeInfo.WorkItemComment.fields={revisedDate:{isDate:!0}};t.TypeInfo.WorkItemComments.fields={comments:{isArray:!0,typeInfo:t.TypeInfo.WorkItemComment}};t.TypeInfo.WorkItemField.fields={type:{enumType:t.TypeInfo.FieldType},usage:{enumType:t.TypeInfo.FieldUsage}};t.TypeInfo.WorkItemHistory.fields={revisedDate:{isDate:!0}};t.TypeInfo.WorkItemQueryClause.fields={clauses:{isArray:!0,typeInfo:t.TypeInfo.WorkItemQueryClause},logicalOperator:{enumType:t.TypeInfo.LogicalOperation}};t.TypeInfo.WorkItemQueryResult.fields={asOf:{isDate:!0},queryResultType:{enumType:t.TypeInfo.QueryResultType},queryType:{enumType:t.TypeInfo.QueryType}};t.TypeInfo.WorkItemTypeTemplateUpdateModel.fields={actionType:{enumType:t.TypeInfo.ProvisioningActionType},templateType:{enumType:t.TypeInfo.TemplateType}};t.TypeInfo.WorkItemUpdate.fields={revisedDate:{isDate:!0}}});

define("TFS/WorkItemTracking/RestClient",["require","exports","TFS/WorkItemTracking/Contracts","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f){"use strict";function vt(n){return window.VSS&&window.VSS.VssSDKRestVersion&&lt[window.VSS.VssSDKRestVersion]?r.getClient(lt[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(b,undefined,undefined,undefined,n)}var h,c,o,s,l,a,v,y,p,e,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,at,lt;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.WorkItemTrackingHttpClient=t.WorkItemTrackingHttpClient2=t.WorkItemTrackingHttpClient2_1=t.WorkItemTrackingHttpClient2_2=t.WorkItemTrackingHttpClient2_3=t.WorkItemTrackingHttpClient3=t.WorkItemTrackingHttpClient3_1=t.WorkItemTrackingHttpClient3_2=t.WorkItemTrackingHttpClient4=t.WorkItemTrackingHttpClient4_1=t.WorkItemTrackingHttpClient5=t.WorkItemTrackingHttpClient5_1=t.WorkItemTrackingHttpClient5_2=t.WorkItemTrackingHttpClient6=t.WorkItemTrackingHttpClient6_1=t.WorkItemTrackingHttpClient7=t.WorkItemTrackingHttpClient7_1=t.CommonMethods5_2To7_1=t.CommonMethods5_1To7_1=t.CommonMethods5To7_1=t.CommonMethods4_1To7_1=t.CommonMethods4To7_1=t.CommonMethods3_2To7_1=t.CommonMethods3To7_1=t.CommonMethods2_2To7_1=t.CommonMethods2_1To7_1=t.CommonMethods2To7_1=void 0;h=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateWorkItemTypeDefinition=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"8637ac8b-5eb6-4f90-b3f7-4f2ff576a459",resource:"workItemTypeTemplate",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",requestType:i.TypeInfo.WorkItemTypeTemplateUpdateModel,routeValues:{project:t},apiVersion:this.workItemTypeTemplateApiVersion,data:n})},t.prototype.exportWorkItemTypeDefinition=function(n,t,i){var r={exportGlobalLists:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"8637ac8b-5eb6-4f90-b3f7-4f2ff576a459",resource:"workItemTypeTemplate",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",routeValues:{project:n,type:t},queryParams:r,apiVersion:this.workItemTypeTemplateApiVersion})},t.prototype.getWorkItemTypeStates=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"7c9d7a76-4a09-43e8-b5df-bd792f4ac6aa",resource:"workItemTypeStates",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/states",responseIsCollection:!0,routeValues:{project:n,type:t},apiVersion:this.workItemTypeStatesApiVersion})},t.prototype.getWorkItemTypes=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"7c8d7a76-4a09-43e8-b5df-bd792f4ac6aa",resource:"workItemTypes",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.workItemTypesApiVersion})},t.prototype.getWorkItemType=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"7c8d7a76-4a09-43e8-b5df-bd792f4ac6aa",resource:"workItemTypes",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",routeValues:{project:n,type:t},apiVersion:this.workItemTypesApiVersion})},t.prototype.getWorkItemTypeColorAndIcons=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f0f8dc62-3975-48ce-8051-f636b68b52e3",resource:"workItemTypeColorAndIcon",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.workItemTypeColorAndIconApiVersion,data:n})},t.prototype.getWorkItemTypeColors=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"958fde80-115e-43fb-bd65-749c48057faf",resource:"workitemTypeColor",routeTemplate:"_apis/work/{resource}",responseIsCollection:!0,apiVersion:this.workitemTypeColorApiVersion,data:n})},t.prototype.getWorkItemTypeCategory=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"9b9f5734-36c8-415e-ba67-f83b45c31408",resource:"workItemTypeCategories",routeTemplate:"{project}/_apis/{area}/{resource}/{category}",routeValues:{project:n,category:t},apiVersion:this.workItemTypeCategoriesApiVersion})},t.prototype.getWorkItemTypeCategories=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"9b9f5734-36c8-415e-ba67-f83b45c31408",resource:"workItemTypeCategories",routeTemplate:"{project}/_apis/{area}/{resource}/{category}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.workItemTypeCategoriesApiVersion})},t.prototype.getWorkItemStateColors=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"0b83df8a-3496-4ddb-ba44-63634f4cda61",resource:"workitemStateColor",routeTemplate:"_apis/work/{resource}",responseIsCollection:!0,apiVersion:this.workitemStateColorApiVersion,data:n})},t.prototype.updateWorkItemTemplate=function(n,t,i,r,u){var f={validateOnly:r,bypassRules:u};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:t,type:i},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:f,apiVersion:this.workItemsApiVersion,data:n})},t.prototype.getWorkItemTemplate=function(n,t,i,r,u){var f={fields:i,asOf:r,$expand:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:n,type:t},queryParams:f,apiVersion:this.workItemsApiVersion})},t.prototype.createWorkItem=function(n,t,i,r,u,f,e){var o={validateOnly:r,bypassRules:u,suppressNotifications:f,$expand:e};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:t,type:i},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:o,apiVersion:this.workItemsApiVersion,data:n})},t.prototype.getRelationTypes=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f5d33bc9-5b49-4a3c-a9bd-f3cd46dd2165",resource:"workItemRelationTypes",routeTemplate:"_apis/{area}/{resource}/{relation}",responseIsCollection:!0,apiVersion:this.workItemRelationTypesApiVersion})},t.prototype.getRelationType=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f5d33bc9-5b49-4a3c-a9bd-f3cd46dd2165",resource:"workItemRelationTypes",routeTemplate:"_apis/{area}/{resource}/{relation}",routeValues:{relation:n},apiVersion:this.workItemRelationTypesApiVersion})},t.prototype.getWorkItemIconXaml=function(n,t,i){var r={color:t,v:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"image/xaml+xml",area:"wit",locationId:"4e1eb4a5-1970-4228-a682-ec48eb2dca30",resource:"workItemIcons",routeTemplate:"_apis/{area}/{resource}/{icon}",routeValues:{icon:n},queryParams:r,apiVersion:this.workItemIconsApiVersion})},t.prototype.getWorkItemIconSvg=function(n,t,i){var r={color:t,v:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"image/svg+xml",area:"wit",locationId:"4e1eb4a5-1970-4228-a682-ec48eb2dca30",resource:"workItemIcons",routeTemplate:"_apis/{area}/{resource}/{icon}",routeValues:{icon:n},queryParams:r,apiVersion:this.workItemIconsApiVersion})},t.prototype.getWorkItemIcons=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"4e1eb4a5-1970-4228-a682-ec48eb2dca30",resource:"workItemIcons",routeTemplate:"_apis/{area}/{resource}/{icon}",responseIsCollection:!0,apiVersion:this.workItemIconsApiVersion})},t.prototype.getWorkItemIconJson=function(n,t,i){var r={color:t,v:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"4e1eb4a5-1970-4228-a682-ec48eb2dca30",resource:"workItemIcons",routeTemplate:"_apis/{area}/{resource}/{icon}",routeValues:{icon:n},queryParams:r,apiVersion:this.workItemIconsApiVersion})},t.prototype.queryById=function(n,t,r,u,f){var e={timePrecision:u,$top:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a02355f5-5f8a-4671-8e32-369d23aac83d",resource:"wiql",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",responseType:i.TypeInfo.WorkItemQueryResult,routeValues:{project:t,team:r,id:n},queryParams:e,apiVersion:this.wiqlApiVersion})},t.prototype.getQueryResultCount=function(n,t,i,r,u){var f={timePrecision:r,$top:u};return this._beginRequest({httpMethod:"HEAD",area:"wit",locationId:"a02355f5-5f8a-4671-8e32-369d23aac83d",resource:"wiql",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",routeValues:{project:t,team:i,id:n},queryParams:f,apiVersion:this.wiqlApiVersion},!0).then(function(n){var i=n[0],r=n[1],t=n[2];return t.getResponseHeader("X-Total-Count")},function(n){throw n;})},t.prototype.queryByWiql=function(n,t,r,u,f){var e={timePrecision:u,$top:f};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"1a9c53f7-f243-4447-b110-35ef023636e4",resource:"wiql",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseType:i.TypeInfo.WorkItemQueryResult,routeValues:{project:t,team:r},queryParams:e,apiVersion:this.wiqlApiVersion_1a9c53f7,data:n})},t.prototype.sendMail=function(n,t){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"wit",locationId:"12438500-2f84-4fa7-9f1a-c31871b4959d",resource:"sendMail",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.sendMailApiVersion,data:n})},t.prototype.updateQuery=function(n,t,r,u){var f={$undeleteDescendants:u};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",requestType:i.TypeInfo.QueryHierarchyItem,responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:t,query:r},queryParams:f,apiVersion:this.queriesApiVersion,data:n})},t.prototype.searchQueries=function(n,t,r,u,f){var e={$filter:t,$top:r,$expand:u,$includeDeleted:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",responseType:i.TypeInfo.QueryHierarchyItemsResult,routeValues:{project:n},queryParams:e,apiVersion:this.queriesApiVersion})},t.prototype.getQuery=function(n,t,r,u,f,e){var o={$expand:r,$depth:u,$includeDeleted:f,$useIsoDateFormat:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:n,query:t},queryParams:o,apiVersion:this.queriesApiVersion})},t.prototype.getQueries=function(n,t,r,u){var f={$expand:t,$depth:r,$includeDeleted:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",responseType:i.TypeInfo.QueryHierarchyItem,responseIsCollection:!0,routeValues:{project:n},queryParams:f,apiVersion:this.queriesApiVersion})},t.prototype.deleteQuery=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",routeValues:{project:n,query:t},apiVersion:this.queriesApiVersion})},t.prototype.createQuery=function(n,t,r,u){var f={validateWiqlOnly:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",requestType:i.TypeInfo.QueryHierarchyItem,responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:t,query:r},queryParams:f,apiVersion:this.queriesApiVersion,data:n})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:this.fieldsApiVersion,data:n})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:this.fieldsApiVersion})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:this.fieldsApiVersion})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:this.fieldsApiVersion})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:this.fieldsApiVersion,data:n})},t.prototype.updateClassificationNode=function(n,t,r,u){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",requestType:i.TypeInfo.WorkItemClassificationNode,responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:t,structureGroup:i.TreeStructureGroup[r],path:u},apiVersion:this.classificationNodesApiVersion,data:n})},t.prototype.getClassificationNode=function(n,t,r,u){var f={$depth:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:n,structureGroup:i.TreeStructureGroup[t],path:r},queryParams:f,apiVersion:this.classificationNodesApiVersion})},t.prototype.deleteClassificationNode=function(n,t,r,u){var f={$reclassifyId:u};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",routeValues:{project:n,structureGroup:i.TreeStructureGroup[t],path:r},queryParams:f,apiVersion:this.classificationNodesApiVersion})},t.prototype.createOrUpdateClassificationNode=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",requestType:i.TypeInfo.WorkItemClassificationNode,responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:t,structureGroup:i.TreeStructureGroup[r],path:u},apiVersion:this.classificationNodesApiVersion,data:n})},t.prototype.getRootNodes=function(n,t){var r={$depth:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a70579d1-f53a-48ee-a5be-7be8659023b9",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.WorkItemClassificationNode,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:this.classificationNodesApiVersion_a70579d1})},t.prototype.getClassificationNodes=function(n,t,r,u){var f={ids:t&&t.join(","),$depth:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a70579d1-f53a-48ee-a5be-7be8659023b9",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.WorkItemClassificationNode,responseIsCollection:!0,routeValues:{project:n},queryParams:f,apiVersion:this.classificationNodesApiVersion_a70579d1})},t.prototype.getRecentMentions=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"d60eeb6e-e18c-4478-9e94-a0094e28f41c",resource:"accountRecentMentions",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentMentionWorkItemModel,responseIsCollection:!0,apiVersion:this.accountRecentMentionsApiVersion})},t.prototype.getAccountMyWorkData=function(n){var t={$queryOption:n};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"def3d688-ddf5-4096-9024-69beea15cdbd",resource:"accountMyWork",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountMyWorkResult,queryParams:t,apiVersion:this.accountMyWorkApiVersion})},t.serviceInstanceId=f.ServiceInstanceTypes.TFS,t}(u.VssHttpClient);t.CommonMethods2To7_1=h;c=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.restoreWorkItem=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:t},apiVersion:this.recyclebinApiVersion,data:n})},t.prototype.getDeletedWorkItems=function(n,t){var i={ids:n&&n.join(",")};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:t},queryParams:i,apiVersion:this.recyclebinApiVersion})},t.prototype.getDeletedWorkItem=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:t,id:n},apiVersion:this.recyclebinApiVersion})},t.prototype.destroyWorkItem=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:t,id:n},apiVersion:this.recyclebinApiVersion})},t}(h);t.CommonMethods2_1To7_1=c;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.readReportingRevisionsPost=function(n,t,i,r,u){var f={continuationToken:i,startDateTime:r,$expand:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:f,apiVersion:this.workItemRevisionsApiVersion,data:n})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e,o,s,h,c,l){var a={fields:t&&t.join(","),types:i&&i.join(","),continuationToken:r,startDateTime:u,includeIdentityRef:f,includeDeleted:e,includeTagRef:o,includeLatestOnly:s,$expand:h,includeDiscussionChangesOnly:c,$maxPageSize:l};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:a,apiVersion:this.workItemRevisionsApiVersion})},t}(c);t.CommonMethods2_2To7_1=o;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.replaceTemplate=function(n,t,i,r){return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:t,team:i,templateId:r},apiVersion:this.templatesApiVersion,data:n})},t.prototype.getTemplate=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:n,team:t,templateId:i},apiVersion:this.templatesApiVersion})},t.prototype.deleteTemplate=function(n,t,i){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:n,team:t,templateId:i},apiVersion:this.templatesApiVersion})},t.prototype.getTemplates=function(n,t,i){var r={workitemtypename:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6a90345f-a676-4969-afce-8e163e1d5642",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:n,team:t},queryParams:r,apiVersion:this.templatesApiVersion_6a90345f})},t.prototype.createTemplate=function(n,t,i){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"6a90345f-a676-4969-afce-8e163e1d5642",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",routeValues:{project:t,team:i},apiVersion:this.templatesApiVersion_6a90345f,data:n})},t}(o);t.CommonMethods3To7_1=s;l=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getWorkArtifactLinkTypes=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1a31de40-e318-41cd-a6c6-881077df52e3",resource:"artifactLinkTypes",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.artifactLinkTypesApiVersion})},t}(s);t.CommonMethods3_2To7_1=l;a=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateWorkItem=function(n,t,i,r,u,f,e){var o={validateOnly:r,bypassRules:u,suppressNotifications:f,$expand:e};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:o,apiVersion:this.workItemsApiVersion_72c7ddf8,data:n})},t.prototype.getWorkItems=function(n,t,i,r,u,f){var e={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:f},queryParams:e,apiVersion:this.workItemsApiVersion_72c7ddf8})},t.prototype.getWorkItem=function(n,t,i,r,u){var f={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:u,id:n},queryParams:f,apiVersion:this.workItemsApiVersion_72c7ddf8})},t.prototype.deleteWorkItem=function(n,t,i){var r={destroy:i};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:t,id:n},queryParams:r,apiVersion:this.workItemsApiVersion_72c7ddf8})},t}(l);t.CommonMethods4To7_1=a;v=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getWorkItemTypeFieldWithReferences=function(n,t,i,r){var u={$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},queryParams:u,apiVersion:this.workItemTypesFieldApiVersion})},t.prototype.getWorkItemTypeFieldsWithReferences=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",responseIsCollection:!0,routeValues:{project:n,type:t},queryParams:r,apiVersion:this.workItemTypesFieldApiVersion})},t.prototype.getWorkItemNextStatesOnCheckinAction=function(n,t){var i={ids:n&&n.join(","),action:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"afae844b-e2f6-44c2-8053-17b3bb936a40",resource:"workItemTransitions",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,queryParams:i,apiVersion:this.workItemTransitionsApiVersion})},t.prototype.getUpdates=function(n,t,r,u){var f={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"{project}/_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{project:u,id:n},queryParams:f,apiVersion:this.updatesApiVersion})},t.prototype.getUpdate=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"{project}/_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{project:r,id:n,updateNumber:t},apiVersion:this.updatesApiVersion})},t.prototype.getRevisions=function(n,t,i,r,u){var f={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"{project}/_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{project:u,id:n},queryParams:f,apiVersion:this.revisionsApiVersion})},t.prototype.getRevision=function(n,t,i,r){var u={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"{project}/_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{project:r,id:n,revisionNumber:t},queryParams:u,apiVersion:this.revisionsApiVersion})},t.prototype.getDeletedWorkItemShallowReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.recyclebinApiVersion})},t.prototype.uploadAttachment=function(n,t,i,r,u){var f={fileName:u};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:r,id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:f,apiVersion:this.attachmentsApiVersion,data:n,isRawData:!0})},t.prototype.getAttachmentZip=function(n,t,i,r){var u={fileName:t,download:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:n},queryParams:u,apiVersion:this.attachmentsApiVersion})},t.prototype.getAttachmentContent=function(n,t,i,r){var u={fileName:t,download:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:n},queryParams:u,apiVersion:this.attachmentsApiVersion})},t.prototype.createAttachment=function(n,t,i,r,u){var f={fileName:t,uploadType:i,areaPath:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:r},customHeaders:{"Content-Type":"application/octet-stream"},queryParams:f,apiVersion:this.attachmentsApiVersion,data:n,isRawData:!0})},t.prototype.queryWorkItemsForArtifactUris=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a9a9aa7a-8c09-44d3-ad1b-46e855c1e3d3",resource:"artifactUriQuery",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.artifactUriQueryApiVersion,data:n})},t}(a);t.CommonMethods4_1To7_1=v;y=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getWorkItemsBatch=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"908509b6-4248-4475-a1cd-829139ba419f",resource:"workItemsBatch",routeTemplate:"{project}/_apis/{area}/{resource}",requestType:i.TypeInfo.WorkItemBatchGetRequest,responseIsCollection:!0,routeValues:{project:t},apiVersion:this.workItemsBatchApiVersion,data:n})},t.prototype.getReportingLinksByLinkType=function(n,t,i,r,u){var f={linkTypes:t&&t.join(","),types:i&&i.join(","),continuationToken:r,startDateTime:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b5b5b6d0-0308-40a1-b3f4-b9bb3c66878f",resource:"workItemLinks",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:f,apiVersion:this.workItemLinksApiVersion})},t.prototype.getQueriesBatch=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"549816f9-09b0-4e75-9e81-01fbfcd07426",resource:"queriesBatch",routeTemplate:"{project}/_apis/{area}/{resource}",requestType:i.TypeInfo.QueryBatchGetRequest,responseType:i.TypeInfo.QueryHierarchyItem,responseIsCollection:!0,routeValues:{project:t},apiVersion:this.queriesBatchApiVersion,data:n})},t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel2,responseIsCollection:!0,apiVersion:this.accountMyWorkRecentActivityApiVersion})},t}(v);t.CommonMethods5To7_1=y;p=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.readReportingDiscussions=function(n,t,i){var r={continuationToken:t,$maxPageSize:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"4a644469-90c5-4fcc-9a9f-be0827d369ec",resource:"workItemRevisionsDiscussions",routeTemplate:"{project}/_apis/{area}/reporting/workItemRevisions/discussions",routeValues:{project:n},queryParams:r,apiVersion:this.workItemRevisionsDiscussionsApiVersion})},t.prototype.getCommentVersions=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"49e03b34-3be0-42e3-8a5d-e8dfb88ac954",resource:"commentsVersions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/versions/{version}",responseType:i.TypeInfo.CommentVersion,responseIsCollection:!0,routeValues:{project:n,workItemId:t,commentId:r},apiVersion:this.commentsVersionsApiVersion})},t.prototype.getCommentVersion=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"49e03b34-3be0-42e3-8a5d-e8dfb88ac954",resource:"commentsVersions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/versions/{version}",responseType:i.TypeInfo.CommentVersion,routeValues:{project:n,workItemId:t,commentId:r,version:u},apiVersion:this.commentsVersionsApiVersion})},t.prototype.getCommentReactions=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f6cb3f27-1028-4851-af96-887e570dc21f",resource:"commentsReactions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/reactions/{reactionType}",responseType:i.TypeInfo.CommentReaction,responseIsCollection:!0,routeValues:{project:n,workItemId:t,commentId:r},apiVersion:this.commentsReactionsApiVersion})},t.prototype.deleteCommentReaction=function(n,t,r,u){return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"f6cb3f27-1028-4851-af96-887e570dc21f",resource:"commentsReactions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/reactions/{reactionType}",responseType:i.TypeInfo.CommentReaction,routeValues:{project:n,workItemId:t,commentId:r,reactionType:i.CommentReactionType[u]},apiVersion:this.commentsReactionsApiVersion})},t.prototype.createCommentReaction=function(n,t,r,u){return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"f6cb3f27-1028-4851-af96-887e570dc21f",resource:"commentsReactions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/reactions/{reactionType}",responseType:i.TypeInfo.CommentReaction,routeValues:{project:n,workItemId:t,commentId:r,reactionType:i.CommentReactionType[u]},apiVersion:this.commentsReactionsApiVersion})},t.prototype.updateComment=function(n,t,r,u){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:t,workItemId:r,commentId:u},apiVersion:this.commentsApiVersion,data:n})},t.prototype.getCommentsBatch=function(n,t,r,u,f){var e={ids:r&&r.join(","),includeDeleted:u,$expand:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.CommentList,routeValues:{project:n,workItemId:t},queryParams:e,apiVersion:this.commentsApiVersion})},t.prototype.getComments=function(n,t,r,u,f,e,o){var s={$top:r,continuationToken:u,includeDeleted:f,$expand:e,order:o};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.CommentList,routeValues:{project:n,workItemId:t},queryParams:s,apiVersion:this.commentsApiVersion})},t.prototype.getComment=function(n,t,r,u,f){var e={includeDeleted:u,$expand:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:n,workItemId:t,commentId:r},queryParams:e,apiVersion:this.commentsApiVersion})},t.prototype.deleteComment=function(n,t,i){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",routeValues:{project:n,workItemId:t,commentId:i},apiVersion:this.commentsApiVersion})},t.prototype.addComment=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:t,workItemId:r},apiVersion:this.commentsApiVersion,data:n})},t.prototype.getEngagedUsers=function(n,t,r,u,f,e){var o={$top:f,$skip:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"e33ca5e0-2349-4285-af3d-d72d86781c35",resource:"commentReactionsEngagedUsers",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/reactions/{reactionType}/users",responseIsCollection:!0,routeValues:{project:n,workItemId:t,commentId:r,reactionType:i.CommentReactionType[u]},queryParams:o,apiVersion:this.commentReactionsEngagedUsersApiVersion})},t}(y);t.CommonMethods5_1To7_1=p;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateTag=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"bc15bc60-e7a8-43cb-ab01-2106be3983a1",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}/{tagIdOrName}",routeValues:{project:t,tagIdOrName:i},apiVersion:this.tagsApiVersion,data:n})},t.prototype.getTags=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bc15bc60-e7a8-43cb-ab01-2106be3983a1",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}/{tagIdOrName}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.tagsApiVersion})},t.prototype.getTag=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bc15bc60-e7a8-43cb-ab01-2106be3983a1",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}/{tagIdOrName}",routeValues:{project:n,tagIdOrName:t},apiVersion:this.tagsApiVersion})},t.prototype.deleteTag=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"bc15bc60-e7a8-43cb-ab01-2106be3983a1",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}/{tagIdOrName}",routeValues:{project:n,tagIdOrName:t},apiVersion:this.tagsApiVersion})},t.prototype.migrateProjectsProcess=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"19801631-d4e5-47e9-8166-0330de0ff1e6",resource:"projectProcessMigration",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.projectProcessMigrationApiVersion,data:n})},t}(p);t.CommonMethods5_2To7_1=e;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.projectProcessMigrationApiVersion=r.queriesBatchApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.workItemIconsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsBatchApiVersion=r.workitemStateColorApiVersion=r.workItemTransitionsApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="7.1-preview.1",r.accountMyWorkRecentActivityApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion="7.1-preview.2",r.attachmentsApiVersion=r.commentsApiVersion=r.revisionsApiVersion=r.updatesApiVersion=r.workItemLinksApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemTypesFieldApiVersion="7.1-preview.3",r}return __extends(t,n),t}(e);t.WorkItemTrackingHttpClient7_1=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="7.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="7.0-preview.1",r.commentsApiVersion="7.0-preview.3",r}return __extends(t,n),t}(e);t.WorkItemTrackingHttpClient7=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="6.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="6.1-preview.1",r.commentsApiVersion="6.1-preview.3",r}return __extends(t,n),t}(e);t.WorkItemTrackingHttpClient6_1=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="6.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="6.0-preview.1",r.commentsApiVersion="6.0-preview.3",r}return __extends(t,n),t}(e);t.WorkItemTrackingHttpClient6=d;g=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="5.2",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="5.2-preview.1",r.commentsApiVersion="5.2-preview.3",r}return __extends(t,n),t}(e);t.WorkItemTrackingHttpClient5_2=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="5.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="5.1-preview.1",r.commentsApiVersion="5.1-preview.3",r}return __extends(t,n),t}(p);t.WorkItemTrackingHttpClient5_1=nt;tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="5.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="5.0-preview.1",r}return __extends(t,n),t.prototype.getComment=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"{project}/_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{project:r,id:n,revision:t},apiVersion:"5.0-preview.2"})},t.prototype.getComments=function(n,t,r,u,f){var e={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"{project}/_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{project:f,id:n},queryParams:e,apiVersion:"5.0-preview.2"})},t}(y);t.WorkItemTrackingHttpClient5=tt;it=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="4.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="4.1-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"4.1"})},t.prototype.getComment=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"{project}/_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{project:r,id:n,revision:t},apiVersion:"4.1-preview.2"})},t.prototype.getComments=function(n,t,r,u,f){var e={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"{project}/_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{project:f,id:n},queryParams:e,apiVersion:"4.1-preview.2"})},t}(v);t.WorkItemTrackingHttpClient4_1=it;rt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.artifactLinkTypesApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="4.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="4.0-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"4.0"})},t.prototype.queryWorkItemsForArtifactUris=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a9a9aa7a-8c09-44d3-ad1b-46e855c1e3d3",resource:"artifactUriQuery",routeTemplate:"_apis/{area}/{resource}",apiVersion:"4.0",data:n})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"4.0",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"4.0"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"4.0"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"4.0",data:n,isRawData:!0})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:"4.0-preview.1"})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:"4.0-preview.1"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"4.0"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"4.0"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"4.0"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"4.0"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"4.0"})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"4.0"})},t}(a);t.WorkItemTrackingHttpClient4=rt;ut=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.artifactLinkTypesApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="3.2",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="3.2-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"3.2"})},t.prototype.queryWorkItemsForArtifactUris=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a9a9aa7a-8c09-44d3-ad1b-46e855c1e3d3",resource:"artifactUriQuery",routeTemplate:"_apis/{area}/{resource}",apiVersion:"3.2",data:n})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"3.2",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.2"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.2"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"3.2",data:n,isRawData:!0})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:"3.2-preview.1"})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:"3.2-preview.1"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"3.2"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"3.2"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.2"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"3.2"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.2"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"3.2"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"3.2"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"3.2"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"3.2",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"3.2"})},t}(l);t.WorkItemTrackingHttpClient3_2=ut;ft=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="3.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="3.1-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"3.1"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"3.1",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.1"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.1"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"3.1",data:n,isRawData:!0})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:"3.1-preview.1"})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:"3.1-preview.1"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"3.1"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"3.1"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.1"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"3.1"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.1"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"3.1"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"3.1"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"3.1"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"3.1",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"3.1"})},t}(s);t.WorkItemTrackingHttpClient3_1=ft;et=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="3.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="3.0-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"3.0"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"3.0",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.0"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.0"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"3.0",data:n,isRawData:!0})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:"3.0-preview.1"})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:"3.0-preview.1"})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"3.0"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"3.0"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"3.0"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"3.0"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"3.0"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"3.0"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"3.0",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"3.0"})},t}(s);t.WorkItemTrackingHttpClient3=et;ot=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="2.3",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="2.3-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"2.3"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"2.3",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.3"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.3"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"2.3",data:n,isRawData:!0})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.3"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"2.3"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"2.3"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"2.3"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"2.3"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"2.3"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"2.3",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"2.3"})},t}(o);t.WorkItemTrackingHttpClient2_3=ot;st=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="2.2",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="2.2-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"2.2"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"2.2",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.2"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.2"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"2.2",data:n,isRawData:!0})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.2"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"2.2"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"2.2"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"2.2"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"2.2"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"2.2"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"2.2",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"2.2"})},t}(o);t.WorkItemTrackingHttpClient2_2=st;ht=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="2.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="2.1-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"2.1"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"2.1",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.1"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.1"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"2.1",data:n,isRawData:!0})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.1"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"2.1"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"2.1"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"2.1"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e){var o={includeDeleted:t,fields:i&&i.join(","),types:r&&r.join(","),watermark:u,startDateTime:f,includeIdentityRef:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:o,apiVersion:"2.1"})},t.prototype.readReportingRevisionsPost=function(n,t,i,r){var u={watermark:i,startDateTime:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:u,apiVersion:"2.1",data:n})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"2.1"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"2.1"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"2.1",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"2.1"})},t}(c);t.WorkItemTrackingHttpClient2_1=ht;ct=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.queriesApiVersion=r.sendMailApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="2.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="2.0-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"2.0"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"2.0",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.0"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.0"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"2.0",data:n,isRawData:!0})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.0"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"2.0"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"2.0"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e){var o={includeDeleted:t,fields:i&&i.join(","),types:r&&r.join(","),watermark:u,startDateTime:f,includeIdentityRef:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:o,apiVersion:"2.0"})},t.prototype.readReportingRevisionsPost=function(n,t,i,r){var u={watermark:i,startDateTime:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:u,apiVersion:"2.0",data:n})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"2.0"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"2.0"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"2.0",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"2.0"})},t}(h);t.WorkItemTrackingHttpClient2=ct;at=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(w);t.WorkItemTrackingHttpClient=at;lt={"7.1":w,"7.0":b,"6.1":k,"6.0":d,"5.2":g,"5.1":nt,"5.0":tt,"4.1":it,"4.0":rt,"3.2":ut,"3.1":ft,"3.0":et,"2.3":ot,"2.2":st,"2.1":ht,"2.0":ct};t.getClient=vt});

define("Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTypeIcons=t.WorkItemTrackingMetadataCacheConstants=t.WorkItemSettingsConstants=t.WorkItemLinkConstants=t.WorkItemFormExtensionsConstants=t.WorkItemFormContributionProperties=t.WorkItemFeatureStateConstants=t.WITCommonConstants=t.WellKnownControlNames=t.UnfollowResultStatus=t.QueryResultFormat=t.QueriesConstants=t.OobFieldRefNames=t.FormLayoutType=t.FollowsConstants=t.FieldType=t.DalFields=t.CoreLinkTypeReferenceNames=t.CoreFieldRefNames=t.CoreField=t.CacheStatus=void 0,function(n){n[n.UpToDate=0]="UpToDate";n[n.NewData=1]="NewData";n[n.StaleData=2]="StaleData"}(i=t.CacheStatus||(t.CacheStatus={})),function(n){n[n.Id=-3]="Id";n[n.Rev=8]="Rev";n[n.Title=1]="Title";n[n.Description=52]="Description";n[n.WorkItemType=25]="WorkItemType";n[n.TeamProject=-42]="TeamProject";n[n.State=2]="State";n[n.Reason=22]="Reason";n[n.CreatedBy=33]="CreatedBy";n[n.AssignedTo=24]="AssignedTo";n[n.ChangedBy=9]="ChangedBy";n[n.ChangedDate=-4]="ChangedDate";n[n.CreatedDate=32]="CreatedDate";n[n.RevisedDate=-5]="RevisedDate";n[n.AuthorizedDate=3]="AuthorizedDate";n[n.AuthorizedAs=-1]="AuthorizedAs";n[n.History=54]="History";n[n.AreaPath=-7]="AreaPath";n[n.AreaId=-2]="AreaId";n[n.IterationPath=-105]="IterationPath";n[n.IterationId=-104]="IterationId";n[n.NodeName=-12]="NodeName";n[n.RelatedLinkCount=75]="RelatedLinkCount";n[n.HyperLinkCount=-32]="HyperLinkCount";n[n.AttachedFileCount=-31]="AttachedFileCount";n[n.ExternalLinkCount=-57]="ExternalLinkCount";n[n.CommentCount=-33]="CommentCount";n[n.LinkType=100]="LinkType";n[n.Tags=80]="Tags";n[n.Watermark=7]="Watermark";n[n.BoardColumn=90]="BoardColumn";n[n.BoardColumnDone=91]="BoardColumnDone";n[n.BoardLane=92]="BoardLane";n[n.IsDeleted=-404]="IsDeleted";n[n.Parent=-35]="Parent"}(r=t.CoreField||(t.CoreField={})),function(n){n.AreaId="System.AreaId";n.AreaPath="System.AreaPath";n.AssignedTo="System.AssignedTo";n.AttachedFileCount="System.AttachedFileCount";n.AuthorizedAs="System.AuthorizedAs";n.BoardColumn="System.BoardColumn";n.BoardColumnDone="System.BoardColumnDone";n.BoardLane="System.BoardLane";n.ChangedBy="System.ChangedBy";n.ChangedDate="System.ChangedDate";n.CreatedBy="System.CreatedBy";n.CreatedDate="System.CreatedDate";n.Description="System.Description";n.CommentCount="System.CommentCount";n.ExternalLinkCount="System.ExternalLinkCount";n.History="System.History";n.HyperLinkCount="System.HyperLinkCount";n.RemoteLinkCount="System.RemoteLinkCount";n.Id="System.Id";n.IterationId="System.IterationId";n.IterationPath="System.IterationPath";n.LinkType="System.Links.LinkType";n.NodeName="System.NodeName";n.Reason="System.Reason";n.RelatedLinkCount="System.RelatedLinkCount";n.Rev="System.Rev";n.RevisedDate="System.RevisedDate";n.State="System.State";n.AuthorizedDate="System.AuthorizedDate";n.TeamProject="System.TeamProject";n.Tags="System.Tags";n.Title="System.Title";n.WorkItemType="System.WorkItemType";n.Watermark="System.Watermark";n.IsDeleted="System.IsDeleted";n.Parent="System.Parent"}(u=t.CoreFieldRefNames||(t.CoreFieldRefNames={})),function(n){n.Related="System.LinkTypes.Related";n.Hierarchy="System.LinkTypes.Hierarchy";n.Dependency="System.LinkTypes.Dependency";n.Duplicate="System.LinkTypes.Duplicate"}(f=t.CoreLinkTypeReferenceNames||(t.CoreLinkTypeReferenceNames={})),function(n){n.IDId=-3;n.RevId=8;n.TitleId=1;n.DescriptionId=52;n.WorkItemTypeId=25;n.PortfolioProjectId=-42;n.WorkItemFormIDId=-14;n.WorkItemFormId=-15;n.StateId=2;n.ReasonId=22;n.CreatedById=33;n.WatermarkId=7;n.AssignedToId=24;n.LastChangedById=9;n.LastChangedDateId=-4;n.AuthorizedDateId=3;n.CreatedDateId=32;n.RevisedDateId=-5;n.PersonNameId=-1;n.AuthorizedAsId=-1;n.HistoryId=54;n.AreaPathId=-7;n.AreaIDId=-2;n.IterationPathId=-105;n.IterationIDId=-104;n.NodeNameId=-12;n.RelatedLinkCountId=75;n.RemoteLinkCountId=-34;n.LinkedFileCountId=-32;n.AttachedFileCountId=-31;n.CommentCountId=-33;n.BISURICountId=-57;n.Tags=80;n.BoardColumnId=90;n.BoardColumnDoneId=91;n.BoardLaneId=92;n.RelatedLinks=37;n.PersonID=-6;n.LinkedFiles=51;n.BISURI=58;n.AttachedFiles=50;n.HiddenAttachedFiles=49;n.AreaLevel1=-43;n.AreaLevel2=-44;n.AreaLevel3=-45;n.AreaLevel4=-46;n.AreaLevel5=-47;n.AreaLevel6=-48;n.AreaLevel7=-49;n.IterationLevel1=-50;n.IterationLevel2=-51;n.IterationLevel3=-52;n.IterationLevel4=-53;n.IterationLevel5=-54;n.IterationLevel6=-55;n.IterationLevel7=-56;n.IsDeleted=-404;n.ZZZDummyField=-58;n.Parent=-35}(e=t.DalFields||(t.DalFields={})),function(n){n[n.Internal=0]="Internal";n[n.String=1]="String";n[n.Integer=2]="Integer";n[n.DateTime=3]="DateTime";n[n.PlainText=5]="PlainText";n[n.Html=7]="Html";n[n.TreePath=8]="TreePath";n[n.History=9]="History";n[n.Double=10]="Double";n[n.Guid=11]="Guid";n[n.Boolean=12]="Boolean";n[n.PicklistInteger=14]="PicklistInteger";n[n.PicklistString=15]="PicklistString"}(o=t.FieldType||(t.FieldType={})),function(n){n.ArtifactType="WorkItem";n.UnfollowResult="UnfollowResult"}(s=t.FollowsConstants||(t.FollowsConstants={})),function(n){n[n.Desktop=0]="Desktop";n[n.Mobile=1]="Mobile"}(h=t.FormLayoutType||(t.FormLayoutType={})),function(n){n.BacklogPriority="Microsoft.VSTS.Common.BacklogPriority";n.StackRank="Microsoft.VSTS.Common.StackRank";n.ActivatedBy="Microsoft.VSTS.Common.ActivatedBy";n.ActivatedDate="Microsoft.VSTS.Common.ActivatedDate";n.ClosedBy="Microsoft.VSTS.Common.ClosedBy";n.ClosedDate="Microsoft.VSTS.Common.ClosedDate";n.ResolvedBy="Microsoft.VSTS.Common.ResolvedBy";n.ResolvedDate="Microsoft.VSTS.Common.ResolvedDate";n.StateChangeDate="Microsoft.VSTS.Common.StateChangeDate"}(c=t.OobFieldRefNames||(t.OobFieldRefNames={})),function(n){n.LastVisitedQueryGroupKey="LAST_VISITED_QUERY_GROUP";n.MyFavoritesGroupKey="MY_FAVORITES_GROUP";n.LastVisitedQueryMruKey="Queries/LastVisited";n.TeamFavoriteGroupsExpandStatesMruKey="Queries/FavoriteGroupExpandStates"}(l=t.QueriesConstants||(t.QueriesConstants={})),function(n){n[n.Json=0]="Json";n[n.Html=1]="Html"}(a=t.QueryResultFormat||(t.QueryResultFormat={})),function(n){n[n.unfollowFailed=0]="unfollowFailed";n[n.unfollowSuccess=1]="unfollowSuccess"}(v=t.UnfollowResultStatus||(t.UnfollowResultStatus={})),function(n){n.HtmlControl="HtmlFieldControl";n.PlainTextControl="PlainTextControl";n.FreshnessIndicatorControl="FreshnessIndicatorControl";n.FieldControl="FieldControl";n.DateControl="DateTimeControl";n.ClassificationControl="WorkItemClassificationControl";n.WorkItemLogControl="WorkItemLogControl";n.WorkItemHistoryControl="WorkItemHistoryControl";n.WorkItemStateGraphControl="WorkItemStateGraphControl";n.LinksControl="LinksControl";n.AttachmentsControl="AttachmentsControl";n.WebpageControl="WebpageControl";n.LabelControl="LabelControl";n.TagFieldControl="TagFieldControl";n.TestStepsControl="TestStepsControl";n.AssociatedAutomationControl="AssociatedAutomationControl";n.StageControl="StageControl";n.StageBuildControl="StageBuildControl";n.ReleaseBuildControl="ReleaseBuildControl";n.AcceptanceCriteriaControl="AcceptanceCriteriaControl";n.DevelopmentControl="DevelopmentControl";n.WorkItemDiscussionControl="WorkItemDiscussionControl";n.ParameterSetControl="ParameterSetControl";n.DeploymentsControl="DeploymentsControl"}(y=t.WellKnownControlNames||(t.WellKnownControlNames={})),function(n){n.LinkTypes="LinkTypes";n.WorkItemTypes="WorkItemTypes";n.Nodes="Nodes";n.Fields="Fields";n.AllowedValues="AllowedValues";n.ConstantSets="ConstantSets";n.WorkItemTypeCategories="WorkItemTypeCategories";n.TeamProjects="TeamProjects";n.AdhocQueries="AdhocQueries";n.WorkItemTrackingArea="WIT";n.WitCacheProviderInit="WorkItemTracking.CacheProvider.Initialize"}(p=t.WITCommonConstants||(t.WITCommonConstants={})),function(n){n.DataProviderName="ms.vss-work-web.work-item-feature-state-data-provider"}(w=t.WorkItemFeatureStateConstants||(t.WorkItemFeatureStateConstants={})),function(n){n.ShowOnDeletedWorkItem="showOnDeletedWorkItem";n.Height="height";n.Name="name";n.Inputs="inputs";n.InputId="id";n.InputRequired="isRequired";n.InputMode="inputMode";n.InputValidation="validation";n.InputDataType="dataType";n.InputDescription="description";n.InputType="type";n.InputProperties="properties";n.InputType_WorkItemField="WorkItemField";n.FieldType="Field";n.InputProperties_WorkItemFieldTypes="workItemFieldTypes"}(b=t.WorkItemFormContributionProperties||(t.WorkItemFormContributionProperties={})),function(n){n.ContributionDefaultHeight_Group=150;n.ContributionDefaultHeight_Control=75;n.ContributionTarget_Form="ms.vss-work-web.work-item-form";n.ContributionType_Page="ms.vss-work-web.work-item-form-page";n.ContributionType_Group="ms.vss-work-web.work-item-form-group";n.ContributionType_Control="ms.vss-work-web.work-item-form-control";n.ContributionType_Notifications="ms.vss-work-web.work-item-notifications"}(k=t.WorkItemFormExtensionsConstants||(t.WorkItemFormExtensionsConstants={})),function(n){n.RESOURCELINKTYPES=["Hyperlink","ArtifactLink"];n.WORKITEMLINKUSAGE="workItemLink";n.RESOURCELINKUSAGE="resourceLink";n.ATTACHEDLINKTYPE="AttachedFile";n.HYPERLINKLINKTYPE="Hyperlink";n.ARTIFACTLINKTYPE="ArtifactLink";n.EXTERNALLINKTYPE="ExternalLink";n.ATTRIBUTES_USAGE="usage";n.ATTRIBUTES_EDITABLE="editable";n.ATTRIBUTES_ENABLED="enabled";n.ATTRIBUTES_ACYCLIC="acyclic";n.ATTRIBUTES_DIRECTIONAL="directional";n.ATTRIBUTES_SINGLETARGET="singleTarget";n.ATTRIBUTES_TOPOLOGY="topology";n.ATTRIBUTES_ID="id";n.ATTRIBUTES_AUTHORIZEDDATE="authorizedDate";n.ATTRIBUTES_RESOURCECREATEDDATE="resourceCreatedDate";n.ATTRIBUTES_RESOURCEMODIFIEDDATE="resourceModifiedDate";n.ATTRIBUTES_REVISEDDATE="revisedDate";n.ATTRIBUTES_RESOURCESIZE="resourceSize";n.ATTRIBUTES_COMMENT="comment";n.ATTRIBUTES_NAME="name";n.ATTRIBUTES_ISLOCKED="isLocked"}(d=t.WorkItemLinkConstants||(t.WorkItemLinkConstants={})),function(n){n.DataProviderName="ms.vss-work-web.work-item-settings-data-provider";n.Path="WorkItemTracking/Settings"}(g=t.WorkItemSettingsConstants||(t.WorkItemSettingsConstants={})),function(n){n.CookieFormat="WIT";n.DataProviderExperimentId="ms.vss-work-web.work-item-form-data-providers-experiment"}(nt=t.WorkItemTrackingMetadataCacheConstants||(t.WorkItemTrackingMetadataCacheConstants={})),function(n){n.WorkItemTypeIconNames=["icon_clipboard","icon_crown","icon_trophy","icon_list","icon_book","icon_sticky_note","icon_insect","icon_traffic_cone","icon_chat_bubble","icon_flame","icon_megaphone","icon_code_review","icon_code_response","icon_review","icon_response","icon_test_plan","icon_test_suite","icon_test_case","icon_test_step","icon_test_parameter","icon_star","icon_ribbon","icon_chart","icon_headphone","icon_key","icon_airplane","icon_car","icon_diamond","icon_asterisk","icon_database_storage","icon_government","icon_gavel","icon_parachute","icon_paint_brush","icon_palette","icon_gear","icon_check_box","icon_gift","icon_test_beaker","icon_broken_lightbulb","icon_clipboard_issue","icon_github","icon_pull_request","icon_github_issue"];n.DefaultWorkItemTypeIconName="icon_clipboard"}(tt=t.WorkItemTypeIcons||(t.WorkItemTypeIcons={}))});

define("Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider",["require","exports","VSS/Diag","VSS/Service","VSS/Contributions/Services","VSS/Error","Presentation/Scripts/TFS/TFS.Host.TfsContext","TFS/WorkItemTracking/RestClient","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o,s){function h(n){return n=n||"",n.trim().toLowerCase()}var c,l;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTypeColorAndIconsProvider=t.WorkItemTypeColorAndIcons=t.getNormalizedValue=void 0;t.getNormalizedValue=h;c=function(){function n(){this._items={}}return n.getDefault=function(){return{color:n.DEFAULT_WORKITEMTYPE_COLOR,icon:n.DEFAULT_WORKITEMTYPE_BOWTIE_ICON}},n.prototype.setColorAndIcon=function(t,i,r){var u=h(t);return this._items[u]={color:n.transformColor(i),icon:n.transformIcon(r)},this._items[u]},n.prototype.getColorAndIcon=function(t){var i=h(t);return this._items[i]||n.getDefault()},n.transformColor=function(t){return t?"#".concat(t.substr(t.length-6)):n.DEFAULT_WORKITEMTYPE_COLOR},n.transformIcon=function(t){return(t=h(t),!t||!n.ICON_NAME_MAPPINGS[t])?n.DEFAULT_WORKITEMTYPE_BOWTIE_ICON:n.ICON_NAME_MAPPINGS[t]},n.ICON_NAME_MAPPINGS={icon_crown:"bowtie-symbol-crown",icon_trophy:"bowtie-symbol-trophy",icon_list:"bowtie-symbol-list",icon_book:"bowtie-symbol-book",icon_sticky_note:"bowtie-symbol-stickynote",icon_clipboard:"bowtie-symbol-task",icon_insect:"bowtie-symbol-bug",icon_traffic_cone:"bowtie-symbol-impediment",icon_chat_bubble:"bowtie-symbol-review",icon_flame:"bowtie-symbol-flame",icon_megaphone:"bowtie-symbol-ask",icon_test_plan:"bowtie-test-plan",icon_test_suite:"bowtie-test-suite",icon_test_case:"bowtie-test-case",icon_test_step:"bowtie-test-step",icon_test_parameter:"bowtie-test-parameter",icon_code_review:"bowtie-symbol-review-request",icon_code_response:"bowtie-symbol-review-response",icon_review:"bowtie-symbol-feedback-request",icon_response:"bowtie-symbol-feedback-response",icon_ribbon:"bowtie-symbol-ribbon",icon_chart:"bowtie-symbol-finance",icon_headphone:"bowtie-symbol-headphone",icon_key:"bowtie-symbol-key",icon_airplane:"bowtie-symbol-airplane",icon_car:"bowtie-symbol-car",icon_diamond:"bowtie-symbol-diamond",icon_asterisk:"bowtie-symbol-asterisk",icon_database_storage:"bowtie-symbol-storage-database",icon_government:"bowtie-symbol-government",icon_gavel:"bowtie-symbol-decision",icon_parachute:"bowtie-symbol-parachute",icon_paint_brush:"bowtie-symbol-paint-brush",icon_palette:"bowtie-symbol-color-palette",icon_gear:"bowtie-settings-gear",icon_check_box:"bowtie-status-success-box",icon_gift:"bowtie-package-fill",icon_test_beaker:"bowtie-test-fill",icon_broken_lightbulb:"bowtie-symbol-defect",icon_clipboard_issue:"bowtie-symbol-issue",icon_github:"bowtie-brand-github",icon_pull_request:"bowtie-tfvc-pull-request",icon_github_issue:"bowtie-status-error-outline"},n.DEFAULT_UNPARENTED_WORKITEM_COLOR="#A6A6A6",n.DEFAULT_UNPARENTED_WORKITEM_BOWTIE_ICON="bowtie-square",n.DEFAULT_WORKITEMTYPE_COLOR_HEX="009CCC",n.DEFAULT_WORKITEMTYPE_COLOR="#".concat(n.DEFAULT_WORKITEMTYPE_COLOR_HEX),n.DEFAULT_WORKITEMTYPE_ICON=s.WorkItemTypeIcons.DefaultWorkItemTypeIconName,n.DEFAULT_WORKITEMTYPE_BOWTIE_ICON=n.ICON_NAME_MAPPINGS[n.DEFAULT_WORKITEMTYPE_ICON],n}();t.WorkItemTypeColorAndIcons=c;l=function(){function n(){this._cachedPromises={};this._projectToColorAndIconsMap={};this._restClient=o.getClient()}return n.getInstance=function(){return n._instance||(n._instance=this._getDataProvider()),n._instance},n.prototype.isPopulated=function(n){return n?(n=h(n),this._projectToColorAndIconsMap.hasOwnProperty(n)):!1},n.prototype.getColorAndIcon=function(n,t){return n&&t&&(n=h(n),this._projectToColorAndIconsMap[n])?this._projectToColorAndIconsMap[n].getColorAndIcon(t):c.getDefault()},n.prototype.getColor=function(n,t){return this.getColorAndIcon(n,t).color},n.prototype.ensureColorAndIconsArePopulated=function(n){var s=this,u,e,o,t,r;for(n||i.Debug.fail("EnsureWorkItemTypeColors - parameter 'projects' cannot be null or undefined"),u={},e=0,o=n;e<o.length;e++)t=o[e],t=h(t),u.hasOwnProperty(t)||this.isPopulated(t)||(u[t]=null);return(r=Object.keys(u),r.length===0)?Promise.resolve():r.length===1?this._fetchWorkItemTypeColorAndIcons(r[0]):this._restClient.getWorkItemTypeColorAndIcons(r).then(function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],s._setColors(r.key,r.value)},function(n){return f.publishErrorToTelemetry(n)})},n.prototype.getColorAndIconAsync=function(n,t){var r=this;return(i.Debug.assertIsNotNull(n,"WorkItemTypeColorAndIconsProvider - 'getColorAndIconAsync' projectName cannot be null/undefined"),this.isPopulated(n))?Promise.resolve(this.getColorAndIcon(n,t)):this.queueEnsureColorAndIconsArePopulated(n).then(function(){return r.getColorAndIcon(n,t)})},n.prototype.getColorAsync=function(n,t){return i.Debug.assertIsNotNull(n,"WorkItemTypeColorAndIconsProvider - 'getColorAsync' projectName cannot be null/undefined"),this.getColorAndIconAsync(n,t).then(function(n){return n.color})},n.prototype.queueEnsureColorAndIconsArePopulated=function(n){var t=this;return i.Debug.assertIsNotNull(n,"WorkItemTypeColorAndIconsProvider - 'queueEnsureColorAndIconsArePopulated' projectName cannot be null/undefined"),n=h(n),this._cachedPromises[n]?this._cachedPromises[n]:(this._cachedPromises[n]=this.ensureColorAndIconsArePopulated([n]),this._cachedPromises[n].then(function(){delete t._cachedPromises[n]},function(i){delete t._cachedPromises[n];f.publishErrorToTelemetry(i)}))},n.prototype._setColors=function(n,t){for(var i,u=new c,r=0,f=t;r<f.length;r++)i=f[r],u.setColorAndIcon(i.workItemTypeName,i.color,i.icon);n=h(n);this._projectToColorAndIconsMap[n]=u},n._getDataProvider=function(){var t=e.TfsContext.getDefault().contextData.project,o=r.getService(u.WebPageDataService),i=new n,f=o.getPageData("ms.vss-work-web.work-item-type-color-icon-data-provider");return t&&f&&i._setColors(t.name,f),i},n.prototype._fetchWorkItemTypeColorAndIcons=function(t){var i=this;return this._restClient.getWorkItemTypes(t).then(function(r){if(!r)throw new Error("WorkItemTypeColorAndIconsProvider - '_restClient.getWorkItemTypes' returned undefined workItemTypes for project '".concat(t,"'"));i._setColors(t,r.map(function(i){if(!i)throw new Error("WorkItemTypeColorAndIconsProvider - '_restClient.getWorkItemTypes' returned a null type for project '".concat(t,"'"));return n._toWorkItemTypeColorAndIcon(i)}))},function(n){return f.publishErrorToTelemetry(n)}).then(function(){},function(n){return f.publishErrorToTelemetry(n)})},n._toWorkItemTypeColorAndIcon=function(n){var i=n.color,t=n.icon,r=n.name;return{color:i,icon:t&&t.id,workItemTypeName:r}},n}();t.WorkItemTypeColorAndIconsProvider=l});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)};define("Presentation/Scripts/TFS/Components/WorkItemTypeIcon",["require","exports","react","react-dom","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","VSS/Telemetry/Services","OfficeFabric/Utilities","VSSUI/Tooltip","VSS/LoaderPlugins/Css!Presentation/Components/WorkItemTypeIcon"],function(n,t,i,r,u,f,e,o){function l(n,t,u,f,e){var o=typeof u!="string",c={workItemTypeName:t,projectName:o?null:u,customInput:o?u:null,iconAccessibilityOptions:f},l=h(n,!0);r.render(i.createElement(s,__assign({},c)),l,e)}function a(n){var t=h(n,!1);t&&(r.unmountComponentAtNode(t),n.removeChild(t))}function h(n,t){var r="work-item-type-icon-host",u=n.getElementsByClassName(r),i;return u.length>0?u[0]:t?(i=document.createElement("span"),i.classList.add(r),n.appendChild(i),i):undefined}var s,c;Object.defineProperty(t,"__esModule",{value:!0});t.unmountWorkItemTypeIcon=t.renderWorkItemTypeIcon=t.WorkItemTypeIcon=void 0;s=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._isMounted=!1,i.state=i._getState(i.props),i}return __extends(t,n),t.prototype.render=function(){var h=!this.props.customInput&&this._isProjectAndWorkItemTypeNullOrEmpty();h&&c.publishEvent(__assign(__assign({},this.props),{insufficientInput:h}));var l=this.state?this.state.icon:null,a=this.state?this.state.color:u.WorkItemTypeColorAndIcons.DEFAULT_WORKITEMTYPE_COLOR,n=this.props.iconAccessibilityOptions,r=null,f=null,t=!n||!n.suppressTooltip;t&&(r=n&&n.tooltip||this.props.workItemTypeName,f=e.getId("work-item-type-icon-tooltip"));var v=n&&n.ariaAttributes?n.ariaAttributes.label:r||this.props.workItemTypeName,w=n&&n.ariaAttributes?n.ariaAttributes.describedby:f,y=n&&n.ariaAttributes?n.ariaAttributes.labelledby:null,p=e.css("work-item-type-icon bowtie-icon",l,{"work-item-type-icon-no-tooltip":!t},!t&&this.props.className),s=i.createElement("i",{"aria-label":v,"aria-labelledby":y,className:p,role:"figure",style:{color:a}});return s&&t?i.createElement(o.TooltipHost,{hostClassName:e.css("work-item-type-icon-wrapper",this.props.className),content:r,id:f},s):s},t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.componentWillReceiveProps=function(n){var t=this._getState(n);t&&(!this.state||t.color!==this.state.color||t.icon!==this.state.icon)&&this.setState(t)},t.prototype._getState=function(n){var i=this,t;return n.customInput?{color:n.customInput.color?n.customInput.color:u.WorkItemTypeColorAndIcons.DEFAULT_WORKITEMTYPE_COLOR,icon:n.customInput.icon?n.customInput.icon:u.WorkItemTypeColorAndIcons.DEFAULT_WORKITEMTYPE_BOWTIE_ICON}:this._isProjectAndWorkItemTypeNullOrEmpty()?u.WorkItemTypeColorAndIcons.getDefault():(t=u.WorkItemTypeColorAndIconsProvider.getInstance(),t.isPopulated(n.projectName)?t.getColorAndIcon(n.projectName,n.workItemTypeName):(t.getColorAndIconAsync(n.projectName,n.workItemTypeName).then(function(n){i._isMounted&&i.setState(n)}),null))},t.prototype._isProjectAndWorkItemTypeNullOrEmpty=function(){return!(this.props.projectName&&this.props.workItemTypeName)},t}(i.Component);t.WorkItemTypeIcon=s;t.renderWorkItemTypeIcon=l;t.unmountWorkItemTypeIcon=a;c=function(){function n(){}return n.publishEvent=function(t,i){f.publishEvent(new f.TelemetryEventData("WIT",n._featureName,__assign(__assign({},t),{action:n._featureAction})),i)},n._featureAction="Render",n._featureName="WorkItemTypeIcon",n}()});

define("WorkItemTracking/Scripts/Navigation",["require","exports","VSS/Contributions/Services","VSS/Locations","TfsCommon/Scripts/Navigation/SettingsService","VSS/SDK/Shim","VSS/Utils/Array","VSS/Utils/String","VSS/VSS","VSS/Service","VSS/Context","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.Navigation","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","Presentation/Scripts/TFS/Components/WorkItemTypeIcon"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){Object.defineProperty(t,"__esModule",{value:!0});var y="workitems",p=function(){function n(){}return n.prototype.getMenuItems=function(){var a=h.getService(i.WebPageDataService),n=a.getCachedPageData("ms.vss-work-web.new-workitem-data-provider",null,!0),t,c;if(!n||!n.hasNewWorkItemPermission)return[];t=h.getLocalService(u.SettingsService).getUserSetting("PinnedWorkAction");t||(t=n.defaultMenuItem?["new-workitem-".concat(n.defaultMenuItem)]:[]);n.workItemTypeTexts=e.toDictionary(n.workItemTypes,function(n){return n.toLowerCase()},function(n){return o.localeFormat(l.NewWorkItemActionTitle,n)});var r=[{separator:!0}],f=this._createChildItems(n,t),s={id:"all-work-items-hub-group-action",text:l.AllWorkItemsTitle,childItems:f};s.pinningMenuOptions={isPinningSource:!0,hidePinnedItems:!0,closeOnPin:!1,groupId:"new-workitem"};r.push(s);var v=f.filter(function(n){return!n.separator&&n.pinningOptions&&n.pinningOptions.isPinned===!0}),y=e.toDictionary(v,function(n){return n.id},function(n){return n}),p=t.map(function(n){return y[n]}).filter(function(n){return!!n});return r=r.concat(p),c=f.filter(function(n){return!n.separator&&n.pinningOptions&&n.pinningOptions.isPinned===!1}),r.concat(c)},n.prototype._createChildItems=function(n,t){var r=this,i=[];return n&&(i=n.workItemTypes.map(function(i){return r._createMenuItem(n,i,t)})),i.sort(function(n,t){return n.text.localeCompare(t.text)}),i.unshift({separator:!0,text:l.NewWorkItemSubmenuTitle}),i},n.prototype._createMenuItem=function(n,t,i){var l=this,f={id:"new-workitem-".concat(t.replace(" ","-").toLowerCase()),text:n.workItemTypeTexts[t.toLowerCase()],href:r.urlHelper.getMvcUrl({controller:y,queryParams:{_a:"new",witd:t}}),action:function(){return s.requireModules(["WorkItemTracking/SharedScripts/WorkItemDialogShim"]).spread(function(n){n.createNewWorkItem(t)}),!1}},o,u,h;return f.pinningOptions={isPinnable:!0,isPinned:this._isPinned(i,f.id),groupId:"new-workitem",onPinnedChanged:function(n,t){var r=n._item.id;r&&(t?i.push(r):e.remove(i,r),l._savePinnedSettings(i))}},o=null,u=c.getPageContext(),u&&u.webContext&&u.webContext.project&&(o=u.webContext.project.name),h=this.getWorkItemTypeColorAndIcon(n,t),f.icon=h||!o?function(n){v.renderWorkItemTypeIcon(n[0],t,h||a.WorkItemTypeColorAndIcons.getDefault(),{suppressTooltip:!0})}:function(n){v.renderWorkItemTypeIcon(n[0],t,o,{suppressTooltip:!0})},f},n.prototype.getWorkItemTypeColorAndIcon=function(n,t){if(t=a.getNormalizedValue(t),t&&n.colorAndIcons){var i=n.colorAndIcons[t];if(i&&i.icon)return(new a.WorkItemTypeColorAndIcons).setColorAndIcon(t,i.color,i.icon)}return null},n.prototype._isPinned=function(n,t){return n&&n.indexOf(t)!==-1},n.prototype._savePinnedSettings=function(n){h.getLocalService(u.SettingsService).setUserSetting("PinnedWorkAction",n)},n}(),w=new p;f.VSS.register("ms.vss-work-web.work-hub-group-actions",function(){return w})});

define("VSS/Flux/Action",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.Action=void 0;var i="DEFAULT_SCOPE",r=function(){function n(n){n===void 0&&(n=i);this._listeners=[];this._scope=n}return n.prototype.invoke=function(t){if(n.executingScopes[this._scope])throw new Error("Cannot invoke an action with scope ".concat(this._scope," from inside another action with the same scope"));n.executingScopes[this._scope]=!0;try{this._listeners.forEach(function(n){n(t)})}finally{delete n.executingScopes[this._scope]}},n.prototype.addListener=function(n,t){var i=t?n.bind(t):n;return this._listeners.push(i),i},n.prototype.removeListener=function(n){var t=this._listeners.indexOf(n);t>=0&&this._listeners.splice(t,1)},n.executingScopes={},n}();t.Action=r});

define("VSS/Flux/Diag",["require","exports","VSS/Flux/Action","VSS/Context"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.registerDiagActions=void 0;var u=function(n){if(!!r.getPageContext().diagnostics.tracePointCollectionEnabled){var t=function(){for(var e,u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];var t=new n(u),o=t,f=t.constructor?t.constructor.name:"",s=function(n){var r,u;t.hasOwnProperty(n)&&(r=t[n],r instanceof i.Action&&(u=f?"".concat(f,".").concat(n):n,r.addListener(function(n){var t=(new Error).stack||"",i=new CustomEvent("ACTION_FIRED",{detail:{actionName:u,payload:n,stack:t,timestamp:new Date}});document.dispatchEvent(i)})))};for(e in o)s(e);return t};return t.prototype=n.prototype,t}return n};t.registerDiagActions=u});

define("Agile/Scripts/Common/ActionsHub",["require","exports","VSS/Flux/Action"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.ActionsHub=void 0;var r=function(){function n(n){this._scope=n}return n.prototype.createAction=function(){return new i.Action(this._scope)},n}();t.ActionsHub=r});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u};define("Agile/Scripts/BacklogsHub/BacklogContentView/ActionsCreator/BacklogContentViewActions",["require","exports","VSS/Flux/Diag","Agile/Scripts/Common/ActionsHub"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogContentViewActions=void 0;var u=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.headerDataAvailable=t.createAction(),t.changeBacklogLevel=t.createAction(),t.allArtifactPickerTeamsAvailable=t.createAction(),t}return __extends(t,n),__decorate([i.registerDiagActions],t)}(r.ActionsHub);t.BacklogContentViewActions=u});

define("Agile/Scripts/Generated/HubConstants",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemsConstants=t.TeamPanelConstants=t.SprintsHubStorageConstants=t.SprintsHubServerConstants=t.SprintsHubRoutingConstants=t.SprintsHubConstants=t.SprintsHubBackCompatRoutingConstants=t.RightPanelExtensionIds=t.FavoriteConstants=t.DirectoryConstants=t.BoardsHubServerConstants=t.BoardsHubRoutingConstants=t.BoardsHubConstants=t.BacklogsHubConstants=t.BacklogConstants=t.AgileRouteParameters=t.AgileQueryParameters=t.AgileHubServerConstants=t.AgileHubContributionIds=void 0,function(n){n.BacklogConfiguration_DataProvider="ms.vss-work-web.agile-backlog-configuration-data-provider";n.TeamSetting_DataProvider="ms.vss-work-web.team-wit-settings-data-provider";n.Settings_Route="ms.vss-admin-web.project-admin-hub-route"}(i=t.AgileHubContributionIds||(t.AgileHubContributionIds={})),function(n){n.FilterRegistryKeyFormat="{0}/{1}/Filter";n.HelpLinkPlanAnIteration="https://go.microsoft.com/fwlink/?LinkId=2046708";n.TeamMRUKey="Agile/Team"}(r=t.AgileHubServerConstants||(t.AgileHubServerConstants={})),function(n){n.TeamId="teamid";n.Level="level"}(u=t.AgileQueryParameters||(t.AgileQueryParameters={})),function(n){n.Name="name";n.Project="project";n.Pivot="pivot";n.Iteration="iteration";n.TeamName="teamName";n.BacklogLevel="backlogLevel";n.Report="report";n.Id="id";n.ViewName="viewname"}(f=t.AgileRouteParameters||(t.AgileRouteParameters={})),function(n){n.SprintForecastVelocity="AgileBacklog.SprintForecastVelocity";n.DefaultSprintForecastVelocity=10;n.ShowForecastFilter="AgileBacklog.ShowForecastFilter";n.ActionNameIteration="Iteration";n.NumberOfIterationsInVelocity=5;n.ShowInProgressFilter="AgileBacklog.ShowInProgressFilter";n.ShowCompletedChildItemsFilter="AgileBacklog.ShowCompletedChildItemsFilter";n.ParentColumnRefName="System.Backlog.Parent"}(e=t.BacklogConstants||(t.BacklogConstants={})),function(n){n.HUB_NAME="Backlogs";n.BacklogPivot="backlog";n.AnalyticsPivot="analytics";n.InProgressParameter="inProgress";n.CompletedChildItemsParameter="completedChildItems";n.InProgressSetting="Agile/BacklogsHub/InProgressFilter";n.CompletedChildItemsSetting="Agile/BacklogsHub/CompletedChildItemsFilter";n.ShowParentsQueryParameter="showParents";n.RightPaneQueryParameter="rightPane";n.ShowParentsSetting="Agile/BacklogsHub/ShowParentsFilter";n.ForecastingParameter="forecasting";n.ForecastingSetting="Agile/BacklogsHub/Forecasting";n.PaneParameter="pane";n.PaneSetting="Agile/BacklogsHub/Pane";n.MruBacklogKey="Agile/BacklogsHub/BacklogId";n.HUB_CONTRIBUTION_ID="ms.vss-work-web.backlogs-hub";n.PRODUCTBACKLOG_DATAPROVIDER_ID="ms.vss-work-web.backlogs-hub-backlog-data-provider";n.HEADER_DATAPROVIDER_ID="ms.vss-work-web.backlogs-hub-content-header-data-provider";n.ContentRouteContributionId="ms.vss-work-web.backlogs-content-route";n.DirectoryRouteContributionId="ms.vss-work-web.backlogs-directory-route";n.LegacyBacklogsHubContributionRouteId="ms.vss-work-web.agile-route";n.DirectoryViewName="directory";n.WorkItemIds="workItemIds";n.ColumnOptionsFormat="Agile/BacklogsHub/ColumnOptions/{0}";n.CFDReportName="cfd";n.VelocityReportName="velocity"}(o=t.BacklogsHubConstants||(t.BacklogsHubConstants={})),function(n){n.HUB_NAME="Boards";n.HUB_CONTRIBUTION_ID="ms.vss-work-web.boards-hub";n.TEAM_BOARD_CONTENT_ROUTE_CONTRIBUTION_ID="ms.vss-work-web.team-board-content-route";n.EMBEDDED_ROUTE_CONTRIBUTION_ID="ms.vss-work-web.microsoft-teams-board-tab-content-route";n.DIRECTORY_ROUTE_CONTRIBUTION_ID="ms.vss-work-web.boards-directory-route";n.TEAM_BOARD_CONTENT_HEADER_DATAPROVIDER_ID="ms.vss-work-web.team-board-content-header-data-provider";n.TEAM_BOARD_CONTENT_DATAPROVIDER_ID="ms.vss-work-web.team-board-content-data-provider";n.HubCategoryReferenceName="hubCategoryReferenceName";n.WorkItemIds="workItemIds";n.MruBacklogKey="Agile/BoardsHub/BacklogId"}(s=t.BoardsHubConstants||(t.BoardsHubConstants={})),function(n){n.AllPivot="all";n.MinePivot="mine";n.BoardPivot="board";n.AnalyticsPivot="analytics";n.DirectoryViewName="directory"}(h=t.BoardsHubRoutingConstants||(t.BoardsHubRoutingConstants={})),function(n){n.ContentContributionRouteId="ms.vss-work-web.team-board-content-route";n.DirectoryContributionRouteId="ms.vss-work-web.boards-directory-route";n.EmbeddedContentContributionRouteId="ms.vss-work-web.microsoft-teams-board-tab-content-route";n.EmbeddedQueryParameter="embedded"}(c=t.BoardsHubServerConstants||(t.BoardsHubServerConstants={})),function(n){n.KeywordFilterItemKey="DirectoryFilter-Keyword";n.TeamFilterItemKey="DirectoryFilter-Team"}(l=t.DirectoryConstants||(t.DirectoryConstants={})),function(n){n.TeamName="TeamName"}(a=t.FavoriteConstants||(t.FavoriteConstants={})),function(n){n.PortfolioBacklog="ms.vss-work-web.portfolio-backlog-toolpane";n.RequirementBacklog="ms.vss-work-web.requirement-backlog-toolpane";n.IterationBacklog="ms.vss-work-web.iteration-backlog-toolpane"}(v=t.RightPanelExtensionIds||(t.RightPanelExtensionIds={})),function(n){n.SprintBacklogPivot="iteration"}(y=t.SprintsHubBackCompatRoutingConstants||(t.SprintsHubBackCompatRoutingConstants={})),function(n){n.HUB_NAME="Sprints";n.HUB_CONTRIBUTION_ID="ms.vss-work-web.sprints-hub";n.RIGHT_PANEL_DEFAULT_SIZE_PX=420;n.ContentPivotSetting="Agile/SprintsHub/Navigation/ContentPivot";n.DirectoryPivotSetting="Agile/SprintsHub/Navigation/DirectoryPivot";n.IterationSetting="Agile/SprintsHub/Navigation/Iteration";n.PivotSettings="Agile/SprintsHub/Navigation/PivotSettings";n.PeopleSwitcher="people-switcher";n.ColumnOptions="Agile/SprintsHub/IterationBacklogColumnOptions"}(p=t.SprintsHubConstants||(t.SprintsHubConstants={})),function(n){n.AllPivot="all";n.MinePivot="mine";n.NewPivot="new";n.TaskboardPivot="taskboard";n.SprintBacklogPivot="backlog";n.CapacityPivot="capacity";n.AnalyticsPivot="analytics";n.DirectoryViewName="directory"}(w=t.SprintsHubRoutingConstants||(t.SprintsHubRoutingConstants={})),function(n){n.ContributionRouteId="ms.vss-work-web.sprints-content-route";n.TeamAgnosticContributionRouteId="ms.vss-work-web.sprints-route";n.DirectoryContributionRouteId="ms.vss-work-web.sprints-directory-route";n.SprintsHubNavigationSettings="Agile/SprintsHub/NavigationSettings"}(b=t.SprintsHubServerConstants||(t.SprintsHubServerConstants={})),function(n){n.AgileBoardFilter="AgileBoardFilter.";n.Group="group"}(k=t.SprintsHubStorageConstants||(t.SprintsHubStorageConstants={})),function(n){n.TeamId="teamId";n.ProjectId="projectId";n.TeamName="teamName";n.ProjectName="projectName"}(d=t.TeamPanelConstants||(t.TeamPanelConstants={})),function(n){n.WorkItemsFormContributionId="ms.vss-work-web.work-items-form-route-with-id";n.WorkItemFormRouteIdParam="id"}(g=t.WorkItemsConstants||(t.WorkItemsConstants={}))});

define("Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogsHubTelemetryConstants=void 0;var i;(function(n){n.PivotKey="Pivot";n.LEVEL_CHANGE="Backlogs.LevelChange";n.BACKLOGS_START_LOADCONTENTVIEW="Backlogs_Start_LoadContentView";n.BACKLOGS_START_LOADDIRECTORYVIEW="Backlogs_Start_LoadDirectoryView";n.SEARCH_TEAM="Backlogs_Search_Team";n.NAVIGATE_TO_DIRECTORY="Backlogs_ArtifactPicker_NavigateDirectory";n.VIEW_HUB_TILE_REGION="Backlogs_View_Hub_Tile_Region";n.CLICK_TRYOUT_ANALYTICSPIVOT="Backlogs_TryOutAnalyticsPivot";n.MAPPING_OPENED="Mapping_Opened";n.MAPPING_CLOSED="Mapping_Closed";n.MAPPING_ITEM_DROPPED="Mapping_Item_Dropped";n.MAPPING_WORKITEMIDS_LOADED="Mapping_WorkItemIds_Loaded";n.MAPPING_WORKITEMS_PAGED="Mapping_WorkItems_Paged";n.MAPPING_TEAM_SELECTED="Mapping_Team_Selected";n.MAPPING_INITIAL_LOAD="Mapping_Initial_Load";n.IdsLoadedSplit="IdsLoaded";n.ItemCount="ItemCount";n.SameTeam="SameTeam";n.PLANNING_OPENED="Planning_Opened";n.PLANNING_CLOSED="Planning_Closed";n.PLANNING_ITEM_DROPPED="Planning_ItemDropped";n.PLANNING_ITEM_DROPPED_BACKLOG="Planning_ItemDropped_Backlog";n.PLANNING_NEW_SPRINT_OPENED="Planning_NewSprint_Opened";n.PLANNING_NAVIGATE_TO_ITERATION="Planning_Navigate_To_Iteration";n.PLANNING_NAVIGATE_TO_BACKLOG="Planning_Navigate_To_Backlog";n.PLANNING_INITIAL_LOAD="Planning_Initial_Load";n.IterationCount="IterationCount";n.BucketLoadedSplit="BucketLoaded";n.SWITCH_TO_MATCHING_BOARD="SwitchToMatchingBoard";n.ZERO_DATA_ADD_NEW_ITEM="BacklogsHub_Backlog_ZeroDataAddNewItem";n.PARENT_COLUMN_ADDED="BacklogsHub_Backlog_ParentColumn_Added";n.PARENT_COLUMN_REMOVED="BacklogsHub_Backlog_ParentColumn_Removed";n.BacklogLevel="BacklogLevel";n.COMPLETED_CHILD_ITEMS_TOGGLED="ShowCompletedChildItems_Button_Toggled_To";n.COMPLETED_CHILD_ITEMS_LOADED_AS="ShowCompletedChildItems_Loaded_As";n.ROLLUP_BANNER_DISPLAYED="RollupBannerDisplayed";n.IsRequirementBacklog="isRequirementBacklog"})(i=t.BacklogsHubTelemetryConstants||(t.BacklogsHubTelemetryConstants={}))});

define("Agile/Scripts/Common/HubTelemetryHelper",["require","exports","VSS/Telemetry/Services","Agile/Scripts/Generated/HubConstants"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.SprintsHubTelemetryHelper=t.BacklogsHubTelemetryHelper=t.BoardsHubTelemetryHelper=t.HubTelemetryHelper=void 0;var u=function(){function n(n){this._area=n}return n.prototype.publishTelemetry=function(n,t,r){r===void 0&&(r=!1);i.publishEvent(new i.TelemetryEventData(this._area,n,t),r)},n.prototype.publishTelemetryValue=function(n,t,i,r){r===void 0&&(r=!1);var u={};u[t]=i;this.publishTelemetry(n,u,r)},n}();t.HubTelemetryHelper=u;t.BoardsHubTelemetryHelper=new u(r.BoardsHubConstants.HUB_NAME);t.BacklogsHubTelemetryHelper=new u(r.BacklogsHubConstants.HUB_NAME);t.SprintsHubTelemetryHelper=new u(r.SprintsHubConstants.HUB_NAME)});

define("Agile/Scripts/Models/Team/Team",["require","exports","VSS/Utils/String"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.Team=void 0;var r=function(){function n(n){this.id=n.id;this.name=n.name;this.description=n.description;this.projectId=n.projectId;this.projectName=n.projectName;this.isMember=n.isMember}return n.prototype.equals=function(n){return i.equals(n.id,this.id,!0)},n}();t.Team=r});

define("Agile/Scripts/Models/Team/TeamBuilder",["require","exports","Agile/Scripts/Models/Team/Team"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.TeamBuilder=void 0;var r;(function(n){function t(n){if(n)return new i.Team({name:n.name,id:n.id,description:n.description,projectId:n.projectId,projectName:n.projectName})}function r(n,t){if(n)return new i.Team({name:n.name,id:n.id,description:n.description,projectId:n.projectId,projectName:n.projectName,isMember:t})}n.fromWebApiTeam=t;n.fromWebApiTeamWithMembership=r})(r=t.TeamBuilder||(t.TeamBuilder={}))});

var __createBinding=this&&this.__createBinding||(Object.create?function(n,t,i,r){r===undefined&&(r=i);Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[i]}})}:function(n,t,i,r){r===undefined&&(r=i);n[r]=t[i]}),__exportStar=this&&this.__exportStar||function(n,t){for(var i in n)i==="default"||Object.prototype.hasOwnProperty.call(t,i)||__createBinding(t,n,i)};define("Agile/Scripts/Models/Team",["require","exports","Agile/Scripts/Models/Team/Team","Agile/Scripts/Models/Team/TeamBuilder"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});__exportStar(i,t);__exportStar(r,t)});

define("Presentation/Scripts/TFS/Generated/TFS.WebApi.Constants",["require","exports"],function(n,t){var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.TfsSettingsScopeNames=t.TeamProjectCapabilitiesConstants=t.ProjectState=t.CoreConstants=void 0,function(n){n.ProjectCollectionsLocationId="8031090f-ef1d-4af6-85fc-698cd75d42bf";n.ProjectsLocationId="603fe2ac-9723-48b9-88ad-09305aa6c6e1";n.ProcessLocationId="93878975-88c5-4e6a-8abb-7ddd77a8a7d8";n.ProjectHistoryLocationId="6488a877-4749-4954-82ea-7340d36be9f2";n.TeamsLocationId="d30a3dd1-f8ba-442a-b86a-bd0c0c383e59";n.CollectionTeamsLocationId="7a4d9ee9-3433-4347-b47a-7a80f1cf307e";n.TeamMembersLocationId="294c494c-2600-4d7e-b76c-3dd50c3c95be";n.ConnectedServicesId="b4f70219-e18b-42c5-abe3-98b07d35525e";n.ProxyId="ec1f4311-f2b4-4c15-b2b8-8990b80d2908";n.PropertiesLocationId="4976a71a-4487-49aa-8aab-a1eda469037a";n.AreaId="79134C72-4A58-4B42-976C-04E7115F32BF";n.AreaName="core";n.ProcessAreaName="process";n.ApiString="_apis";n.JsonPatchMediaType="application/json-patch+json";n.ProcessResource="processes";n.ProjectsResource="projects";n.ProjectHistoryResource="projectHistory";n.ProjectCollectionsResource="projectCollections";n.TeamsResource="teams";n.TeamMembersResource="members";n.ConnectedServicesResource="connectedServices";n.ProxyResource="proxies";n.ProxyAuthorizationResource="proxyauthorization";n.PropertiesResource="properties";n.ProjectCollectionsRouteName="ProjectCollections";n.ProjectsRouteName="Projects";n.ProjectHistoryRouteName="ProjectHistory";n.ProcessesRouteName="Processes";n.TeamsRouteName="Teams";n.CollectionTeamsRouteName="CollectionTeams";n.TeamMembersRouteName="TeamMembers";n.ConnectedServicesRouteName="ConnectedServices";n.ProxyRouteName="Proxies";n.PropertiesRouteName="Properties";n.TeamsLocationIdString="D30A3DD1-F8BA-442A-B86A-BD0C0C383E59";n.CollectionTeamsLocationIdString="7A4D9EE9-3433-4347-B47A-7A80F1CF307E"}(i=t.CoreConstants||(t.CoreConstants={})),function(n){n[n.Deleting=2]="Deleting";n[n.New=0]="New";n[n.WellFormed=1]="WellFormed";n[n.CreatePending=3]="CreatePending";n[n.All=-1]="All";n[n.Unchanged=-2]="Unchanged";n[n.Deleted=4]="Deleted"}(r=t.ProjectState||(t.ProjectState={})),function(n){n.FeaturesCapabilityName="features";n.FeaturesEnabled="featuresEnabled";n.VersionControlCapabilityName="versioncontrol";n.VersionControlCapabilityAttributeName="sourceControlType";n.VersionControlGitEnabledAttributeName="gitEnabled";n.VersionControlTfvcEnabledAttributeName="tfvcEnabled";n.ProcessTemplateCapabilityName="processTemplate";n.ProcessTemplateCapabilityTemplateNameAttributeName="templateName";n.ProcessTemplateCapabilityTemplateTypeIdAttributeName="templateTypeId"}(u=t.TeamProjectCapabilitiesConstants||(t.TeamProjectCapabilitiesConstants={})),function(n){n.Project="Project";n.Team="Team";n.WebTeam="WebTeam";n.Repository="Repository"}(f=t.TfsSettingsScopeNames||(t.TfsSettingsScopeNames={}))});

define("VSS/Settings/Services",["require","exports","q","VSS/Contributions/LocalPageData","VSS/Service","VSS/Settings/RestClient","VSS/User/Services"],function(n,t,i,r,u,f,e){function c(n){return u.VssConnection.getConnection(n).getService(h)}Object.defineProperty(t,"__esModule",{value:!0});t.getService=void 0;var s=i({value:{},count:0}),o=i(),h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),Object.defineProperty(t.prototype,"httpClient",{get:function(){return this._httpClient||(this._httpClient=u.getClient(f.SettingsHttpClient)),this._httpClient},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canCallSettingsEndpoint",{get:function(){return this._claimsService||(this._claimsService=e.getService()),this._claimsService.hasClaim(e.UserClaims.Member)},enumerable:!1,configurable:!0}),t.prototype.getEntry=function(n,t,i,u){var h,c,l,f,e,v,y,a,o,s;if(!this.canCallSettingsEndpoint)return undefined;if(h=r.getSharedData("_settings"),h&&(c=this.userScopeToString(t),i&&(c+=";"+i+";"+(u||"")),l=h[c],l))for(f=n.split("/"),e=0,v=f.length;e<v;e++)if(y=f.slice(0,e+1).join("/"),a=l[y],a){for(o=a,s=e+1;s<f.length&&o;s++)o=o[f[s]];return o}return undefined},t.prototype.getEntriesAsync=function(n,t,i,r){return this.canCallSettingsEndpoint?i?this.httpClient.getEntriesForScope(this.userScopeToString(t),i,r,n):this.httpClient.getEntries(this.userScopeToString(t),n):s},t.prototype.setEntries=function(n,t,i,r){return this.canCallSettingsEndpoint?i?this.httpClient.setEntriesForScope(n,this.userScopeToString(t),i,r):this.httpClient.setEntries(n,this.userScopeToString(t)):o},t.prototype.removeEntries=function(n,t,i,r){return this.canCallSettingsEndpoint?i?this.httpClient.removeEntriesForScope(this.userScopeToString(t),i,r,n):this.httpClient.removeEntries(this.userScopeToString(t),n):o},t.prototype.userScopeToString=function(n){return n===1?"host":"me"},t}(u.VssService);t.getService=c});

define("VSS/FeatureManagement/Services",["require","exports","VSS/Contributions/LocalPageData","VSS/Diag","VSS/Service"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.FeatureManagementService=void 0;var f=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.isFeatureEnabled=function(n){var t=i.getSharedData("_features");return t&&t[n]!==undefined?t[n]:(r.logWarning("Requested feature '".concat(n,"' could not be found in local data island. Ensure that the feature is added using IClientFeatureProviderService.AddFeatureState.")),!1)},t}(u.VssService);t.FeatureManagementService=f});

var __spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("Agile/Scripts/BacklogsHub/BacklogContentView/ActionsCreator/BacklogContentViewActionsCreator",["require","exports","Agile/Scripts/Generated/HubConstants","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants","Agile/Scripts/Common/HubTelemetryHelper","Agile/Scripts/Models/Team","Presentation/Scripts/TFS/Generated/TFS.WebApi.Constants","VSS/Contributions/Services","VSS/Error","VSS/Service","VSS/Settings/Services","VSS/FeatureManagement/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogContentViewActionsCreator=t.ALLTEAMS_PICKER_DATAPROVIDER_ID=void 0;t.ALLTEAMS_PICKER_DATAPROVIDER_ID="ms.vss-work-web.all-teams-artifact-picker-data-provider";var a=function(){function n(n){this._actions=n}return n.prototype.initializeHeaderData=function(){var r=h.getService(o.WebPageDataService),n=r.getPageData(i.BacklogsHubConstants.HEADER_DATAPROVIDER_ID),t;n&&!n.exceptionInfo&&n.allBacklogLevels&&(t=n.allBacklogLevels.filter(function(t){return t.id===n.backlogId}),this._setBacklogMRU(t[0].name,n.teamId));this._publishHubTileState();this._actions.headerDataAvailable.invoke(n)},n.prototype.changeBacklogLevel=function(n,t){this._setBacklogMRU(n,t);this._actions.changeBacklogLevel.invoke(n)},n.prototype.getBacklogArtifactPickerTeams=function(n){var i=this;return n.fetchMemberTeams().then(function(n){var r=h.getService(o.WebPageDataService);return r.getDataAsync(t.ALLTEAMS_PICKER_DATAPROVIDER_ID).then(function(t){var r=t?t.teams.map(function(n){return new f.Team({id:n.id,name:n.name,isMember:!1})}):[];i._actions.allArtifactPickerTeamsAvailable.invoke(__spreadArray(__spreadArray([],n,!0),r,!0))}),n},function(n){return i._handleRejectedArtifactPickerTeams("member",n)})},n.prototype._handleRejectedArtifactPickerTeams=function(n,t){return s.publishErrorToTelemetry(new Error("Backlog hub - could not fetch ".concat(n," teams: ").concat(t))),[]},n.prototype._setBacklogMRU=function(n,t){this._setMru(e.TfsSettingsScopeNames.WebTeam,t,i.BacklogsHubConstants.MruBacklogKey,n)},n.prototype._setMru=function(n,t,i,r){var u,f=(u={},u[i]=r,u);c.getService().setEntries(f,0,n,t).then(null,function(u){s.publishErrorToTelemetry(new Error("Backlog Hub - Could not store mru '".concat(u,"', key: ").concat(i,", value: ").concat(r,", scopeName: ").concat(n,", scopeValue: ").concat(t)))})},n.prototype._publishHubTileState=function(){var n=h.getService(l.FeatureManagementService),t=n.isFeatureEnabled("ms.vss-reporting-web.reporting-boards-reports-feature");u.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.VIEW_HUB_TILE_REGION,{isAnalyticsChartsEnabled:t},!1)},n}();t.BacklogContentViewActionsCreator=a});

define("Agile/Scripts/BacklogsHub/BacklogContentView/Selectors/BacklogContentViewSelectors",["require","exports"],function(n,t){function i(n){return{visibleBacklogLevels:n.visibleBacklogLevels,currentBacklog:n.currentBacklog,nextBacklog:n.nextBacklog,team:n.team,exceptionInfo:n.exceptionInfo,headerDataReady:n.headerDataReady,hasIterations:n.hasIterations,isRequirementBacklog:n.isRequirementBacklog,newBacklogLevelsSignature:n.newBacklogLevelsSignature,artifactPickerTeams:n.artifactPickerTeams}}Object.defineProperty(t,"__esModule",{value:!0});t.getState=void 0;t.getState=i});

define("VSS/Events/Document",["require","exports","VSS/Diag","VSS/Events/Action","VSS/Events/Services","VSS/Navigation/HubsService","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Utils/Array","VSS/Utils/Core","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h,c){function p(){return o.getLocalService(a)}function y(){return o.getLocalService(l)}var v,l,a;Object.defineProperty(t,"__esModule",{value:!0});t.getRunningDocumentsTable=t.getService=t.DocumentService=t.RunningDocumentsTable=void 0;v=c.handleError;l=function(){function n(){var n=this;this._runningDocEntries=[];this._registerUnloadEvent();u.getService().attachEvent(f.HubEventNames.PostXHRNavigate,function(){n._runningDocEntries=[]})}return n.prototype.add=function(n,t){var r={moniker:n,document:t};return this._runningDocEntries.push(r),r},n.prototype.remove=function(n){this._runningDocEntries=s.subtract(this._runningDocEntries,[n])},n.prototype.isModified=function(n){if(n){var t=this._runningDocEntries.filter(function(t){return t.moniker===n})[0];if(!t)throw new Error("Document ".concat(n," not found."));return t.document.isDirty()}return this._isAnyModified()},n.prototype.beginSave=function(n,t){function e(n){v(n,t,i)}function u(){var t=r[f++];t?t.beginSave(function(){h.delay(i,0,u)},e):$.isFunction(n)&&n.call(i)}var i=this,r=[],f=0;$.each(this._runningDocEntries,function(n,t){t.document.isDirty()&&$.isFunction(t.document.beginSave)&&r.push(t.document)});u()},n.prototype.getUnsavedItemsMessage=function(){for(var s,f,n=[],t,r,h,u,i=0,o=this._runningDocEntries.length;i<o;i++)if(s=this._runningDocEntries[i],u=s.document,u.isDirty()&&$.isFunction(u.getDirtyDocumentTitles)){for(f=u.getDirtyDocumentTitles(6),r=0,h=f.length;r<h;r++){if(t=f[r],n.length===5){n.push(e.UnsavedChangesMore);break}t.length>55&&(t=t.substr(0,52)+"...");n.push(t)}if(n.length>5)break}return n.length===0?e.UnsavedChanges:e.UnsavedChangesWithNames+"\n"+n.join("\n")},n.prototype._isAnyModified=function(){for(var i,n=0,t=this._runningDocEntries.length;n<t;n++)if(i=this._runningDocEntries[n],i.document.isDirty())return!0;return!1},n.prototype._registerUnloadEvent=function(){var n=this,t;r.getService().registerActionWorker(r.CommonActions.ACTION_WINDOW_UNLOAD,function(){if(n.isModified())return n.getUnsavedItemsMessage()});t=$(window);t.bind("beforeunload",function(){try{return r.getService().performAction(r.CommonActions.ACTION_WINDOW_UNLOAD,{})}catch(n){alert(n)}})},n}();t.RunningDocumentsTable=l;a=function(){function n(){this._runningDocumentsTable=y()}return n.prototype.addDeleteListener=function(n){u.getService().attachEvent("tfs-document-delete",n)},n.prototype.removeDeleteListener=function(n){u.getService().detachEvent("tfs-document-delete",n)},n.prototype.addBuildPropertyChangedListener=function(n){u.getService().attachEvent("tfs-document-build-property-changed",n)},n.prototype.removeBuildPropertyChangedListener=function(n){u.getService().detachEvent("tfs-document-build-property-changed",n)},n.prototype.addBuildStoppedListener=function(n){u.getService().attachEvent("tfs-document-build-stopped",n)},n.prototype.removeBuildStoppedListener=function(n){u.getService().detachEvent("tfs-document-build-stopped",n)},n.prototype.addModifiedChangedListener=function(n){u.getService().attachEvent("tfs-document-modified-change",n)},n.prototype.removeModifiedChangedListener=function(n){u.getService().detachEvent("tfs-document-modified-change",n)},n.prototype.isModified=function(n){return this._runningDocumentsTable.isModified(n)},n.prototype.save=function(n,t){var i=this.getActiveDocument();if(i)i.save(n,t);else return this._runningDocumentsTable.beginSave(n,t)},n.prototype.getActiveDocument=function(){return this._activeDocument},n.prototype.setActiveDocument=function(n){this._activeDocument=n},n}();t.DocumentService=a;t.getService=p;t.getRunningDocumentsTable=y});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u};define("VSSPreview/Utilities/ViewStateNavigation",["require","exports","OfficeFabric/Utilities","VSS/Core/Observable","VSSUI/Utilities/ViewState","VSS/Navigation/NavigationHistoryService"],function(n,t,i,r,u,f){var e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.ViewStateNavigation=t.NAVIGATION_POPPED_EVENT=void 0;t.NAVIGATION_POPPED_EVENT="navigationPopped";e="updateNavigationState";o=function(){function n(n){this.viewState=n.viewState;this.viewStateNotifyDelegate=n.viewStateNotifyDelegate;this.navigationParameters=n.navigationParameters;this.getUpdateBehavior=n.getUpdateBehavior;this.routeChoiceParameter=n.routeChoiceParameter;this.navHistoryService=f.getNavigationHistoryService();this.defaultRouteId=n.defaultRouteId||this.navHistoryService.getCurrentRouteId&&this.navHistoryService.getCurrentRouteId();this.routeChoices={};n.initializeViewState&&this._updateFromNavigationState(this.navHistoryService.getState(),this.navHistoryService.getCurrentRouteId&&this.navHistoryService.getCurrentRouteId());this.navHistoryService.subscribe(this._onNavigate);this.viewState.subscribe(this._onViewStateChanged,u.ViewStateEventNames.viewStateChanged)}return n.prototype.dispose=function(){this.navHistoryService.unsubscribe(this._onNavigate);this.viewState.unsubscribe(this._onViewStateChanged,u.ViewStateEventNames.viewStateChanged)},n.prototype.updateNavigationState=function(n,t){this.behaviorOverride=n;this.viewStateNotifyDelegate(null,e,this.viewState,e,function(){t()});delete this.behaviorOverride},n.prototype.createObservableUrl=function(n,t){t===void 0&&(t=2);var i;return this.routeChoiceParameter&&n[this.routeChoiceParameter]?(i=this.chooseRoute(n[this.routeChoiceParameter]),i!==this.defaultRouteId&&(n=__assign({},n),delete n[this.routeChoiceParameter])):i=this.defaultRouteId,new s(i,this.viewState,n,t)},n.prototype.addRouteChoice=function(n,t){var i,r,u;this.routeChoices[n]=t;this.navHistoryService.registerRouteAlias(this.defaultRouteId,t);this.routeChoiceParameter&&this.navigationParameters[this.routeChoiceParameter]&&(i=this.navHistoryService.getCurrentRouteId(),r=this.navigationParameters[this.routeChoiceParameter].getValue(),i!==t||r||this.navigationParameters[this.routeChoiceParameter].setValue(n),i!==t&&r===n&&(u=this.navHistoryService.getState(),delete u[this.routeChoiceParameter],this.navHistoryService.replaceState(u,null,t)))},n.prototype._onViewStateChanged=function(n){var e,t,r,i,u,f;if(e=this.behaviorOverride!==undefined?this.behaviorOverride:this.getUpdateBehavior(n),e!==0){t=this.navHistoryService.getState();r=!1;for(i in this.navigationParameters)u=this.navigationParameters[i].getValue(),u?t[i]!==u&&(t[i]=u,r=!0):t[i]!==undefined&&(delete t[i],r=!0);r&&(f=this.chooseRoute(t[this.routeChoiceParameter]),this.routeChoiceParameter&&f!==this.defaultRouteId&&delete t[this.routeChoiceParameter],e===2?this.navHistoryService.pushState(t,undefined,f):this.navHistoryService.replaceState(t,undefined,f))}},n.prototype.chooseRoute=function(n){return this.routeChoiceParameter?this.routeChoices[n]||this.defaultRouteId:this.defaultRouteId},n.prototype._onNavigate=function(n){var r=this,i=n.newState&&n.newState.routeId;(!n.isNewRouteId||this.getParamValueFromRouteId(i)||this.defaultRouteId===i)&&this.viewStateNotifyDelegate(null,t.NAVIGATION_POPPED_EVENT,this.viewState,t.NAVIGATION_POPPED_EVENT,function(){n.newState&&r._updateFromNavigationState(n.newState.state,i)})},n.prototype._updateFromNavigationState=function(n,t){var i,r;for(i in this.navigationParameters)this.navigationParameters[i].setValue(n[i]);this.routeChoiceParameter&&(r=this.getParamValueFromRouteId(t),r&&this.navigationParameters[this.routeChoiceParameter].setValue(r))},n.prototype.getParamValueFromRouteId=function(n){for(var t in this.routeChoices)if(this.routeChoices[t]===n)return t;return null},__decorate([i.autobind],n.prototype,"_onViewStateChanged",null),__decorate([i.autobind],n.prototype,"_onNavigate",null),n}();t.ViewStateNavigation=o;s=function(n){function t(t,i,r,f){var e=__construct(this,n,[undefined]);for(var o in e)e.hasOwnProperty(o)&&(this[o]=e[o]);return e.routeId=t,e.viewState=i,e.state=r,e.mergeOptions=f,e.updateUrl(),e.viewState.subscribe(e.onViewStateChanged,u.ViewStateEventNames.viewStateChanged),e}return __extends(t,n),t.prototype.updateUrl=function(){var t=f.getNavigationHistoryService(),n=this.routeId?t.generateUrlForRoute(this.routeId,this.state,this.mergeOptions):t.generateUrl(this.state,this.mergeOptions);return this.value!==n&&(this.value=n),n},t.prototype.setState=function(n){this.state=n;this.updateUrl()},t.prototype.onViewStateChanged=function(){this.updateUrl()},t.prototype.dispose=function(){this.viewState.unsubscribe(this.onViewStateChanged,u.ViewStateEventNames.viewStateChanged)},__decorate([i.autobind],t.prototype,"onViewStateChanged",null),t}(r.ObservableValue)});

define("VSSPreview/Utilities/VssHubViewState",["require","exports","OfficeFabric/Utilities","VSS/Contributions/LocalPageData","VSS/Diag","VSS/Events/Document","VSS/VSS","VSSPreview/Utilities/ViewStateNavigation","VSSUI/Utilities/HubViewState","VSSUI/Utilities/ViewOptions","VSSUI/Utilities/ViewState"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.VssHubViewState=t.DEFAULT_PIVOT_PARAM_NAME=void 0;t.DEFAULT_PIVOT_PARAM_NAME="view";var l=[{key:s.HubViewOptionKeys.showFilterBar,serialize:function(n){return n?"true":undefined}},{key:s.HubViewOptionKeys.fullScreen,serialize:function(n){return n?"true":undefined}}],a=function(n){function a(i,f){var e,c,y,a,p,v,w,o,b;i===void 0&&(i={});f===void 0&&(f=!0);e=__construct(this,n,[i]);for(c in e)e.hasOwnProperty(c)&&(this[c]=e[c]);for(e.observableUrls=[],e.chromeless=document.body.classList.contains("chromeless"),e.viewOptionParams={},c=0,y=l;c<y.length;c++)o=y[c],e.viewOptionParams[o.key]=o;if(i.viewOptionNavigationParameters)for(a=0,p=i.viewOptionNavigationParameters;a<p.length;a++)o=p[a],u.Debug.assert(o.key!==i.pivotNavigationParamName,"Do not include pivotNavigationParamName in viewOptionNavigationParameters."),o.behavior===0?delete e.viewOptionParams[o.key]:e.viewOptionParams[o.key]=o;if(e.filterParams={},i.filterNavigationParameters)for(v=0,w=i.filterNavigationParameters;v<w.length;v++)o=w[v],e.filterParams[o.key]=o;return e.observableValueParams={},e.pivotNavigationBehavior=i.pivotNavigationBehavior===undefined?2:i.pivotNavigationBehavior,e.pivotParamName=i.pivotNavigationParamName===undefined?t.DEFAULT_PIVOT_PARAM_NAME:i.pivotNavigationParamName,e.pivotParamName&&(e.observableValueParams[s.HubViewStateEventNames.pivotChanging]={observable:e.selectedPivot,key:e.pivotParamName,rawString:!0,deserialize:i.pivotNavigationParamDeserializer,behavior:e.pivotNavigationBehavior,defaultValue:i.defaultPivot},e.enforceDirtyPivots=i.preventDirtyPivotNavigation),e.defaultRouteId=i.defaultRouteId,f&&e.setupNavigation(),i.mruPivotKey&&(b=r.getSharedData("mruPivot"),b&&(e.selectedPivot.value=b),e.setupMruPivotSaving(i.mruPivotKey)),e.viewOptions.subscribe(e._onViewOptionsChanged,h.VIEW_OPTIONS_CHANGE_EVENT),e}return __extends(a,n),a.prototype.setupNavigation=function(){this.navigation&&this.navigation.dispose();this.navigation=new o.ViewStateNavigation({viewState:this,viewStateNotifyDelegate:this.notify.bind(this),navigationParameters:this.getNavigationParameters(),initializeViewState:!0,getUpdateBehavior:this._getUpdateBehavior,routeChoiceParameter:this.pivotParamName,defaultRouteId:this.defaultRouteId});this._setFullScreenMode(this.viewOptions.getViewOption(s.HubViewOptionKeys.fullScreen)===!0)},a.prototype.setupMruPivotSaving=function(n){var t=this;this.selectedPivot.subscribe(function(i){t.saveMruPrefTimeout&&clearTimeout(t.saveMruPrefTimeout);t.saveMruPrefTimeout=setTimeout(function(){e.requireModules(["VSS/Settings/RestClient"]).spread(function(t){var u=t.getClient(),r={};r["mruPivots/"+n]={pivotKey:i};u.setEntries(r,"me")})},a.MruPrefSaveDelayMs)})},a.prototype.addRouteChoice=function(n,t){this.navigation&&this.navigation.addRouteChoice(n,t)},a.prototype.dispose=function(){var n,t,i;for(this.viewOptions.unsubscribe(this._onViewOptionsChanged,h.VIEW_OPTIONS_CHANGE_EVENT),this.navigation&&(this.navigation.dispose(),delete this.navigation),n=0,t=this.observableUrls;n<t.length;n++)i=t[n],i.dispose();this.observableUrls=[]},a.prototype.updateNavigationState=function(n,t){this.navigation?this.navigation.updateNavigationState(n,t):t()},a.prototype.createObservableUrl=function(n,t){var i=this.navigation.createObservableUrl(n,t);return this.observableUrls.push(i),i},a.prototype.createObservableValue=function(n,t){return new c.ViewStateObservableValue(this.notify.bind(this),n,t)},a.prototype.createNavParmObservableValue=function(n,t,i,r,u){var f=this.createObservableValue(n,u);return this.observableValueParams[n]={key:t,observable:f,rawString:i,behavior:r},f},a.prototype.getNavigationParameters=function(){var i={},t,n,r;for(t in this.observableValueParams)n=this.observableValueParams[t],i[n.navParamName||n.key]=this.createObservableValueNavParam(n);for(t in this.viewOptionParams)n=this.viewOptionParams[t],i[n.navParamName||n.key]=this.createViewOptionNavParam(n);for(t in this.filterParams)n=this.filterParams[t],r=n.navParamName||n.key,i[r]=this.createFilterNavValueParam(n),i["op."+r]=this.createFilterNavOperatorParam(n);return i},a.prototype.getStringValueForNavParam=function(n,t,i){return((n===null||n===undefined)&&(n=i),t.serialize)?t.serialize(n):n===null||n===undefined?undefined:t.rawString?n.toString():JSON.stringify(n)},a.prototype.getRawValueFromNavParamString=function(n,t){var i;if(n)if(t.deserialize)i=t.deserialize(n);else if(t.rawString)i=n;else try{i=JSON.parse(n)}catch(r){i=undefined}else i=undefined;return i},a.prototype.updateFromNavParamString=function(n,t,i,r){var u=this.getRawValueFromNavParamString(t,i);this.updateFromNavParamValue(n,u,r)},a.prototype.updateFromNavParamValue=function(n,t,i){t===undefined||t===null?n!==null&&n!==undefined&&i(undefined):n!==t&&i(t)},a.prototype.createObservableValueNavParam=function(n){var t=this;return{getValue:function(){return t.getStringValueForNavParam(n.observable.value,n,n.defaultValue)},setValue:function(i){var r=n.observable.value;(r===null||r===undefined)&&(r=n.defaultValue);i===undefined&&n.defaultValue!==undefined?t.updateFromNavParamValue(r,n.defaultValue,function(t){n.observable.value=t}):t.updateFromNavParamString(r,i,n,function(t){n.observable.value=t})}}},a.prototype.createViewOptionNavParam=function(n){var t=this;return{getValue:function(){return t.getStringValueForNavParam(t.viewOptions.getViewOption(n.key),n)},setValue:function(i){var r=t.viewOptions.getViewOption(n.key);t.updateFromNavParamString(r,i,n,function(i){t.viewOptions.setViewOption(n.key,i)})}}},a.prototype.createFilterNavValueParam=function(n){var t=this;return{getValue:function(){return t.getStringValueForNavParam(t.filter.getFilterItemValue(n.key),n)},setValue:function(i){var r=t.filter.getFilterItemValue(n.key);t.updateFromNavParamString(r,i,n,function(i){var r=t.filter.getFilterItemState(n.key);t.filter.setFilterItemState(n.key,{value:i,operator:r&&r.operator})})}}},a.prototype.createFilterNavOperatorParam=function(n){var t=this;return{getValue:function(){var i=t.filter.getFilterItemState(n.key);return i&&i.operator==="or"?"or":undefined},setValue:function(i){var r=t.filter.getFilterItemState(n.key);i==="or"?r&&r.operator==="or"||t.filter.setFilterItemState(n.key,{value:r&&r.value,operator:"or"}):r&&r.operator==="or"&&t.filter.setFilterItemState(n.key,{value:r.value,operator:"and"})}}},a.prototype._getUpdateBehavior=function(n){return this.getUpdateBehavior(n)},a.prototype._onViewOptionsChanged=function(n){if(s.HubViewOptionKeys.fullScreen in n){this._setFullScreenMode(n[s.HubViewOptionKeys.fullScreen]===!0);var t=document.createEvent("Event");t.initEvent("resize",!1,!0);window.dispatchEvent(t)}},a.prototype._setFullScreenMode=function(n){n||this.chromeless?(document.body.classList.add("full-screen-mode"),document.body.classList.add("no-chrome")):(document.body.classList.remove("full-screen-mode"),document.body.classList.remove("no-chrome"))},a.prototype.getUpdateBehavior=function(n){var i=0,u=this.observableValueParams[n.eventName],r,t;if(u)i=u.behavior;else switch(n.eventName){case s.HubViewStateEventNames.pivotChanging:i=this.pivotNavigationBehavior;break;case s.HubViewStateEventNames.viewOptionsChanging:for(r in n.eventValue)if(t=this.viewOptionParams[r],t&&t.behavior!==0&&(i=t.behavior,t.behavior===1))break;break;case s.HubViewStateEventNames.filterChanging:for(r in n.eventValue)if(t=this.filterParams[r],t&&t.behavior!==0&&(i=t.behavior,t.behavior===1))break}return i},a.prototype.canSwitchPivots=function(n){if(this.enforceDirtyPivots){var t=f.getRunningDocumentsTable();if(t.isModified())return this._showDialog(t.getUnsavedItemsMessage(),n),!1}return!0},a.prototype._showDialog=function(n,t){var i=this;e.requireModules(["VSS/Controls/Dialogs"]).spread(function(r){r.showConfirmNavigationDialog(n).then(function(){i.selectedPivot.value=t},function(){})})},a.MruPrefSaveDelayMs=2e3,__decorate([i.autobind],a.prototype,"_getUpdateBehavior",null),__decorate([i.autobind],a.prototype,"_onViewOptionsChanged",null),a}(s.HubViewState);t.VssHubViewState=a});

define("Agile/Scripts/BacklogsHub/BacklogsHubViewState",["require","exports","Agile/Scripts/Generated/HubConstants","VSS/Navigation/NavigationHistoryService","VSSPreview/Utilities/VssHubViewState","VSSUI/Utilities/HubViewState"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogsHubViewState=void 0;var e=function(n){function t(t){var r=n.call(this,{preventDirtyPivotNavigation:!0,viewOptionNavigationParameters:[{key:i.AgileRouteParameters.TeamName,rawString:!0,behavior:2},{key:i.AgileRouteParameters.BacklogLevel,rawString:!0,behavior:2},{key:i.BacklogsHubConstants.ShowParentsQueryParameter,rawString:!1,behavior:1},{key:i.BacklogsHubConstants.RightPaneQueryParameter,rawString:!0,behavior:1},{key:i.AgileRouteParameters.Report,rawString:!0,behavior:2}],pivotNavigationParamDeserializer:function(n){return n.toLowerCase()},defaultPivot:t,pivotNavigationParamName:i.AgileRouteParameters.Pivot})||this;return r.onPivotChanging=function(){r.viewOptions.setViewOption(i.AgileRouteParameters.Report,null)},r.setupNavigation(),r.subscribe(r.onPivotChanging,f.HubViewStateEventNames.pivotChanging),r}return __extends(t,n),t.prototype.getCurrentUrl=function(){var n=r.getNavigationHistoryService();return n.generateUrl(this.viewOptions.getViewOptions())},t}(u.VssHubViewState);t.BacklogsHubViewState=e});

define("Agile/Scripts/Resources/TFS.Resources.AgileControls",["require","exports"],function(require,exports){var e=exports;e.Filtering_RemoveFilterTooltip="Remove this filter";e.CardStyling_Description="Styling rules make the cards with important information stand out. When a work item matches more than one rule, the first rule is used.";e.PastMarkerText="Past";e.CFDSettingsStartDateDescription="Leave blank to display the last 30 weeks of activity.";e.Filtering_LogicalOperator_Or="OR";e.CardOptions_RemoveFieldTooltip="Remove";e.KanbanDoneColumnAriaLabel="Done";e.TestAnnotation_DeleteTestCaseFromSuiteFormat="{0}. {1}";e.TagColoring_Description="Emphasize selected tags using colors. Only one color applies to a tag at a time.";e.SaveDiscard_SaveButton="Save changes";e.Board_Options_Badge_Settings_Title="Settings";e.Kanban_AutoRefreshStateIcon_HotSpot_Title="Live updates";e.Filtering_AppliedFilters_Label="Applied filters:";e.CardStyling_PreviewText="Title";e.Board_Options_Badge_No_Permissions="You do not have sufficient permissions to configure the board status badge. You must either be a team administrator or a project administrator.";e.Effort="Effort";e.BoardFilter_Announcer_ItemCount="{0} items on the board";e.CardStyleRule_NameLabel="Name";e.CardFieldOptionsLoading="Loading";e.CardStyling_AddRule_Label="Add new styling rule";e.CustomizeColumnsEditCriteriaLabel="Edit Definition";e.KeyboardShortcutkeyDescription_AddNewItem="Add new item";e.TestAnnotation_RemoveTestTitle="Remove test";e.Burndownchart_TitlePrefix="Burndown for:";e.BacklogVisibilities_Tab_Title="Backlogs";e.WorkingDays_Work_Days_Remaining="{0} work days remaining";e.CardOptions_AssignedToFieldHelpText="Check if you want to view or edit work assigned to team members";e.CardStyleRule_Title_BoldToolTip="Bold";e.CardStyling_ColorPicker_PurpleLighter80="Purple, Lighter 80%";e.CardStyling_ColorPicker_PurpleLighter60="Purple, Lighter 60%";e.CardStyling_ColorPicker_PurpleLighter40="Purple, Lighter 40%";e.CardStyling_ColorPicker_PurpleLighter20="Purple, Lighter 20%";e.Wiql_MacroMe="Me";e.Swimlane_Settings_InvalidCharactersLaneName="Lane name contains unsupported characters.";e.CSC_CANCEL_BUTTON_TEXT="Cancel";e.CardStyling_RuleCheckbox_ToolTip="Enable or disable styling rule";e.Filtering_EmptyDropDown_Text="\u003cNone\u003e";e.Column_Settings_Description="Columns visualize the flow of work across the board.";e.BoardCard_ContextMenu_OpenItem="Open";e.CardOptions_ShowTags="Show {0}";e.CardStyling_SelectCardColor_Label="Select rule color";e.CSC_DIALOG_TITLE="Settings";e.Velocitychart_AltText="The velocity chart shows how much work is completed each iteration. Data is only available visually at this time.";e.CustomizeColumnsSaving="Saving...";e.Filtering_AND_Operator_ToolTip="Filter using \u0027AND\u0027";e.Board_Options_Badge_Copy_Text="Copy to clipboard";e.CustomizeColumnsStateLabel="State";e.CardStyling_DefaultName="Rule Name";e.CustomizeCardsUnsavedChanges="You have unsaved changes made to the card settings which will be lost. Are you sure you want to discard these changes?";e.CardOptions_EffortFieldHelpTextForTaskboard="Check if you want to track remaining work on the card.";e.Board_Settings_Swimlanes="Swimlanes";e.CustomizeColumnsInvalidCharactersColumnName="Column name contains unsupported characters.";e.CardStyleRule_Title_UnderlineToolTip="Underline";e.Annotation_Checkbox_Label="Enable or disable {0} annotation";e.CustomizeColumns_LongColumnName="The column name must be less than 256 characters.";e.CardStyleRule_AriaDescribedby="Press space to enable or disable this rule, press enter to expand, press ctrl up or down to reorder the rule, press alt f10 to open context menu";e.CardStyles_MoveUp="Move up";e.CardStyleRule_State_On="On";e.CSC_INVALID_TAB_ERROR="You have errors in your configuration settings. Please correct the errors and try again.";e.CardStyles_Delete="Delete";e.Board_Options_Badge_Title="Status badge";e.Board_Options_Badge_Enable_Description="Configure the details for a badge and copy the resulting URL or Markdown to display the badge with these settings.";e.RefreshNotification_IdleDisconnect="Live updates have disconnected due to inactivity. ";e.CommonSettings_Fields_CoreFieldsSectionHeader="Core fields";e.BoardHub_Boards_ArtifactName="boards";e.CardOptionsCancel="Cancel";e.Filtering_WorkItemType_DisplayName="Work Item Type";e.CardStyling_ColorPicker_BlueLighter80="Blue, Lighter 80%";e.CardStyling_ColorPicker_BlueLighter60="Blue, Lighter 60%";e.CardStyling_ColorPicker_BlueLighter40="Blue, Lighter 40%";e.CardStyling_ColorPicker_BlueLighter20="Blue, Lighter 20%";e.CustomizeColumnsDeleteTooltip="Delete";e.Swimlane_Settings_Tab_Title="Swimlane name";e.Kanban_AutoRefreshStateIconOFFTooltip="Enable live updates";e.KeyboardShortcutkeyDescription_FocusFirstItem="Select first item";e.SprintDates_NoneSet="No iteration dates";e.SprintDates_IterationNotFound="The current iteration no longer exists. Another person may have removed it.";e.Board_Options_CardReordering_AllowBacklogReordering="Work items reorder when changing columns, and the backlog reflects the new order.";e.Board_Options_CardReorderingDescription="Choose the expected reorder behavior for your work items.";e.CSC_TESTS_TAB_TITLE="Tests";e.Configure_Outcome_Label="Show same outcome of the tests in multiple suites under the same plan";e.Configure_Outcome_Title="Manual tests - Configure test outcome settings";e.CardAnnotation_HeaderName="Annotation";e.StoriesWithTwoStatusesLabel="{0}: {1}, {2}";e.CardOptionsSelectWIT="Choose the work item type whose card you want to customize:";e.BacklogAddItemCallout_Disabled="You cannot add an item while a filter is applied. Please clear the filter";e.EditButtonText="Edit";e.Board_DisplayLimitReached="The number of backlog items has exceeded the display limit of the board ({0}), so some items will not appear here. To see all of your backlog items, go to the backlog.";e.TagColoring_NewTag="Tag color";e.FilterBox_Tooltip_Format="{0}: {1}";e.StoriesWithOneStatusLabel="{0}: {1}";e.BoardsHub_NewItem="New item";e.CustomizeColumnsColumnLabel="Title";e.KanbanDoingColumnAriaLabel="Doing";e.KeyboardShortcutkeyDescription_RowUp="Select row above";e.Column_Settings_DuplicateLaneName="Another column has the same name. Column names must be unique.";e.TestOutcome_Failed="Failed";e.CardStyling_CloneRule_ToolTip="Clone styling rule";e.CardTagColor_New="Enter tag name";e.Filtering_ParentItem_DisplayName="Parent Work Item";e.Swimlane_Settings_Tab_Title_Default="Default lane";e.Board_Settings_Card_Reordering="Card reordering";e.ColumnDoingStateLabel="Doing";e.CardFields_AddNewField_Label="Add new field";e.Filtering_MoreText="more";e.Swimlane_Settings_Title="Customize Swimlanes";e.Checklist_Summary_Tooltip="{0} of {1} {2} completed";e.CardStyles_MoveDown="Move down";e.Cumulativechart_AltText="The cumulative flow diagram reflects the work in progress and lead time. Data is only available visually at this time.";e.EditDatesForIteration="Edit the dates for this iteration";e.Column_Settings_WIP_Limit_Subtitle="Setting it to 0 specifies no limit.";e.CfdChartBottleneck="Is there a bottleneck in my process?";e.QueryOr="Or";e.CustomizeColumnsInitialColumnName="Column Name";e.CardFields_Settings_MainHeader_Description="Show the important information to your team. Fields are editable directly on the card.";e.Filtering_ParentItem_NoItems="No parent work items available";e.Board_DefinitionOfDoneIcon_AriaLabel="Show definition of done for {0} column";e.CardFieldOptions_InvalidFieldError="Please select a field name from the list.";e.Swimlane_Settings_Description="Swimlanes visualize different classes of work as horizontal lanes on the board.";e.CardStyling_ColorPicker_Default="Default";e.Swimlane_Settings_UnsavedChanges="You have unsaved changes made to the swimlanes which will be lost. Are you sure you want to discard these changes?";e.CardAnnotation_HeaderPreview="Visualization";e.CustomizeColumnsInvalidStateForColumnType="{0}: The following state is not valid for this column: {1}.";e.CardAnnotation_EnabledLimit="You can enable up to 5 Annotations on this backlog level.";e.VelocityChartDelivery="How much work can we commit to deliver in upcoming sprints?";e.Column_Settings_InvalidCharactersColumnName="Column name contains unsupported characters.";e.FutureMarkerText="Future";e.CustomizeColumnsDuplicateColumnName="Another column has the same name. Column names must be unique.";e.TabStrip_Menu_InsertLeft="Insert left";e.Kanban_AutoRefreshStateIconONTooltip="Disable live updates";e.CardOptions_ShowWorkItemId="Show {0}";e.Kanban_StatusMessage_FilterSaveError="An error has occurred while attempting to save your filter changes. Error details: {0}";e.CardOptionsConfigureFieldsHelpTextForTaskboard="Choose the work item fields that will display on your team\u0027s task board. All cards display the Title and Assigned To fields.";e.BoardValidator_DeletedLaneHasItems="You attempted to delete a lane that has items in it. You must first move the items to another lane, then try deleting the lane again.";e.Configure_Outcome_Description="Configure how same tests across test suites under a test plan need to behave";e.CardStyling_HeaderPreview="Preview";e.Swimlane_Settings_LongLaneName="Lane name must be less than 256 characters.";e.CardStyling_ColorPicker_DarkRed="Dark red";e.CardStyling_ManageRules_CSC_Description="Add, edit, and reorder rules for card styling. When a work item matches more than one rule, only the first rule is used";e.Checklist_Invalid_Transition_From_Complete="Your process does not allow you to transition out the state \u0027{0}\u0027. Open the work item to change the state. Contact your process administrator to update your process.";e.TestOutcome_Active="Active";e.CardOptions_NewTagColorToolTip="Add tag color";e.BoardValidator_LaneCountInvalid="Board cannot have more than 50 lanes.";e.Chart_LoadFailure="The chart could not be generated.";e.TestAnnotation_Configuration_TestPlan_SelectTestPlanDialog="Select Test Plan";e.Filtering_TextBox_Display="{0} (+{1} {2})";e.Column_Settings_Name_Subtitle="Specify the name of the column that will display on the board.";e.CardOptions_AdditionalFieldsSectionHeader="Show additional fields";e.KeyboardShortcutkeyDescription_MoveItemDownSwimlane="Move item to swimlane below";e.KeyboardShortcutkeyDescription_AddChildForItemInFocus="Add new child item";e.Watermark_With_Count="{0} ({1})";e.BacklogAddItemCallout_SplitLabel="More submit options";e.CardOptions_InvalidSettingsError="The settings are not valid for the following work item types: {0}";e.Board_Options_Badge_Notice="Note, badge settings are not saved and can be reconfigured for each badge.";e.KeyboardShortcutkeyDescription_SelectSwimLaneBelow="Select last/next swimlane below";e.KeyboardShortcutkeyDescription_SelectSwimLaneAbove="Select first/next swimlane above";e.TestAnnotation_ConfirmDeletionText="Do you want to continue?";e.TestAnnotation_Configuration_TestPlan_Description="Configure where tests need to be created for manual tests";e.Swimlane_Settings_Add_Button_Label="Add Swimlane";e.CustomizeColumnsUnsavedChanges="You have unsaved changes made to the columns which will be lost. Are you sure you want to discard these changes?";e.CFDSettingsStartDateTitle="Start date";e.CardStyling_DeleteRule_ToolTip="Delete styling rule";e.BurndownChartConent="The Burndown chart lets you display a trend of remaining work for the selected sprint. It will help you answer questions like:";e.CFDSettingsStartDateLabel="Date";e.KeyboardShortcutkeyDescription_MoveItemRight="Move item right";e.GenericCumulativeErrorMessage="VS402648: There was a problem loading the cumulative flow chart. Refresh to try again.";e.FilterIcon_ToolTip="Filter cards";e.KeyboardShortcutkeyDescription_MoveItemUpRow="Move item to row above";e.Common_Setting_Refresh_Command="Refresh";e.RefreshNotification_Click="Please try to refresh the board.";e.BugBehavior_Tab_Title="Working with bugs";e.CardStyleRule_Title_ItalicToolTip="Italic";e.ProductBacklogSearchCancel="Cancel search";e.GenericVelocityErrorMessage="VS402648: There was a problem loading the velocity chart. Refresh to try again.";e.TestAnnotation_Badge_Tooltip="{0} passed, {1} failed, {2} others";e.KeyboardShortcutkeyDescription_MoveItemUp="Move item up";e.CSC_BOARD_GROUP_TITLE="Board";e.CardStyling_NewStylingRule="Styling rule";e.CardStyling_HeaderRuleName="Rule Name";e.CustomizeConfigurationUnsavedChanges="You have unsaved changes made to the settings which will be lost. Are you sure you want to discard these changes?";e.CardStyling_ContextMenu_ToolTip="Open context menu";e.CardStyling_EmptyName_Error="Rule name must be specified.";e.CardFields_Settings_AdditionalFields_Label="Enter the additional field name";e.TestAnnotation_CardMenu_AddTest="Add Test";e.TagColoring_MaxRuleWarning="You can add up to 20 tag colors.";e.Column_Settings_State_Mapping_Label="State name";e.CardOptions_TagsFieldHelpText="Check if you want tags to appear on the card.";e.AgileHub_ErrorTitle="Sorry, something went wrong";e.TestAnnotation_RemoveTestCaseFromRequirementSuiteMessage="In addition it will also remove the mapping between the requirement and the test";e.CFDSettingsShowOutgoingLabel="Include the last column of the Kanban board";e.CSC_GENERAL_GROUP_TITLE="General";e.Column_Settings_State_Mapping_Title="State mapping";e.CustomizeColumnsWipLimitLabel="WIP limit";e.BoardRefreshRequired="You have modified the work item in a way that affects how it appears on the board. You must refresh the board to reflect the latest changes.";e.Board_Options_Badge_All_Columns="Include all columns";e.Cfd_Settings_Description="Visualize your lead time, work in progress, and any bottlenecks in your process.";e.CardOptions_AddField="Field";e.EditColumnNameAriaLabel="Edit column name";e.CardStyling_ColorPicker_DarkGreen="Dark green";e.Swimlane_Settings_Main_Header="Swimlanes";e.KeyboardShortcutkeyDescription_DeleteItemInFocus="Delete item";e.CardStyleRule_NameInstruction="Enter a descriptive label.";e.CardStyling_ColorPicker_DarkPurple="Dark purple";e.IterationDateRange="{0} - {1}";e.Board_Card_Ordering_NoPermissions="You do not have sufficient permissions to configure card reordering for this team. You must either be a team administrator or a project administrator.";e.Filtering_Iteration_DisplayName="Iteration";e.CardCustomizationStylesNoPermissions="You do not have sufficient permissions to configure card style rules for this team. You must either be a team administrator or a project administrator.";e.CardStyling_CompatRuleLabel="{0} styling rule";e.CardOptions_RemoveFieldAltText="Remove the field from the cards";e.EditSwimlaneNameAriaLabel="Edit swimlane name";e.CfdChartDelivery="Am I consistently delivering value to my users?";e.Kanban_AutoRefreshStateIcon_AriaLabel="Live updates";e.ClickToEditDatesForIteration="Click to edit the dates for this iteration";e.BacklogAddItemCallout_AddToBottom="Add to bottom";e.CardStyleRule_CriteriaLabel="Rule criteria";e.Board_LoadingInProgress="Board is getting ready, please wait...";e.BoardHub_Header_TeamProfileCard_Prefix="Team:";e.BoardCard_ContextMenu_EditTitle="Edit title";e.Board_Options_CardReorderingTitle="Card reordering";e.Column_Settings_Definition_of_Done_Title="Definition of done";e.TestAnnotation_Configuration_Description="Configure how you want tests to appear and behave on the cards.";e.CumulativeFlowSettingsEarlyDate="The start date you specified is not valid. The Cumulative Flow Diagram will only show the last 30 weeks of data. You must provide a date that is on or after {0}.";e.CardStyling_RuleColor_ToolTipWithColorValue="Color Preview ({0})";e.KeyboardShortcutkeyDescription_ExpandSwimlanes="Expand all swimlanes";e.KeyboardShortcutkeyDescription_RowDown="Select row below";e.Board_CollapseColumn_AriaLabel="Collapse {0} column";e.Column_Settings_Definition_of_Done_Subtitle="Enter plain text or format using markdown.";e.TabStrip_Menu_InsertRight="Insert right";e.CardStyling_ColorPicker_GreyLighter20="Grey, Lighter 20%";e.CardStyling_ColorPicker_GreyLighter40="Grey, Lighter 40%";e.CardStyling_ColorPicker_GreyLighter60="Grey, Lighter 60%";e.RefreshNotification_ConnectionTimedout="Live updates are not available due to technical difficulties. ";e.Filtering_SelectAll_Text="Select All";e.TabStrip_Menu_InsertBelow="Insert below";e.TabStrip_Menu_InsertAbove="Insert above";e.TestOutcome_Passed="Passed";e.TestOutcome_Paused="Paused";e.TagColoring_SelectTag_Label="Select tag color";e.SaveAndCloseButtonText="Save and Close";e.Velocitychart_Title="Velocity";e.CustomizeColumnsChangeStateWarning="You have changed a state mapping for the\"{0}\"work item type from \"{1}\" to \"{2}\". All \"{0}\" work items currently appearing in this column will be moved to the first column mapped to the \"{1}\" state. If no columns are mapped to the \"{1}\" state, the work items will no longer appear on the board.";e.Filtering_SelectFilters_Label="Select filters:";e.TagColoring_EnabledHeader="Enabled";e.TestOutcome_NotApplicable="Not applicable";e.BoardValidator_LaneNameLengthInvalid="Error on lane {0}: The lane name must be less than 256 characters.";e.CardStyling_ColorPicker_BeigeLighter80="Beige, Lighter 80%";e.CardStyling_ColorPicker_BeigeLighter40="Beige, Lighter 40%";e.CardStyling_ColorPicker_BeigeLighter60="Beige, Lighter 60%";e.CardStyling_ColorPicker_BeigeLighter20="Beige, Lighter 20%";e.Checklist_Invalid_Transition_To_Complete="Your process does not allow you to transition the state from \u0027{0}\u0027 to \u0027{1}\u0027. Open the work item to change the state.";e.CardOptionsShowAvatarOnly="Avatar only";e.TestAnnotation_Configuration_TestPlan_Title="Manual tests - Test plans";e.TagColoring_ColorHeader="Color";e.CardAnnotation_Description="Show visual cues on cards.";e.CardStyleRule_StylingLabel="Styling";e.KeyboardShortcutkeyDescription_MoveItemDown="Move item down";e.KeyboardShortcutkeyDescription_MoveItemLeft="Move item left";e.CustomizeColumnsInvalidWipLimit="The WIP limit must be an integer between 0 and 999. Enter 0 for no limit.";e.CfdChartConent="The Cumulative Flow chart shows the count of work items (over time) for each column of a Kanban board. This allows you to see patterns in your team\u0027s development cycle over time. It will help you answer questions like:";e.CardStyling_Fill="Fill";e.KeyboardShortcutkeyDescription_OpenItemInFocus="Open item";e.Charts_Settings_Cfd_Title="Cumulative Flow";e.Column_Settings_Name_Label1="Name";e.Column_Settings_Add_Button="Column";e.TestAnnotation_FailTest="Fail test";e.Column_Settings_Incoming_State_Mapping_Subtitle="The first column is mapped to the initial state used when a work item is created.";e.CardStyleRule_StateHeading="State";e.CSC_FIELDS_TAB_TITLE="Fields";e.Column_Settings_NoPermissions="You do not have sufficient permissions to configure columns for this team. You must either be a team administrator or a project administrator.";e.CardCustomizationsNoPermissions="You do not have sufficient permissions to configure cards for this team. You must either be a team administrator or a project administrator.";e.CardStyling_EmptyCriteria_Error="The criteria for the rule cannot be blank.";e.CSC_CHARTS_GROUP_TITLE="Charts";e.Filtering_LogicalOperator_And="AND";e.Column_Settings_LongLaneName="Column name must be less than 256 characters.";e.CardOptions_EnableDisableTagColor="Enable/disable tag color";e.KeyboardShortcutGroup_KanbanBoard="Kanban board";e.Board_Filter="Filter the board";e.RefreshNotification_WorkItemRemovedDueToTypeChange="{0} \u0027{1}\u0027 was removed from the board because its type was changed. ";e.CardOptions_EffortFieldHelpTextForKanban="Check if your team sizes work for velocity and forecast use.";e.BoardValidator_MustNotHaveDuplicateLaneName="Error on lane {0}: Another lane has the same name. Lane names must be unique.";e.TestAnnotation_Configuration_AnnotationDisabledWarning="Test annotation is currently disabled. You must enable it in the annotations page before attempting to make changes to this page.";e.CardFields_Settings_MainHeader="Fields";e.CardOptions_DuplicateFieldError="Duplicate";e.Swimlane_Settings_EmptyLaneName="Lane name must be specified.";e.Column_Settings_Main_Header="Columns";e.DefinitionOfDoneCharacterCount="{0}/{1}";e.CardStyling_Title="Styles";e.CardStyleRule_TitleStyleLabel="Title style";e.BoardsHub_FavoritesPicker_ZeroData="Favorite {0} this board for quick access or go to the {1} to find others";e.BurndownChartScopeCreep="Is there any scope creep introduced in the sprint?";e.BacklogAddItemCallout_NameLabel="Title";e.CustomizeColumnsBoardSettingsInvalid_Help_ClickHere="click here";e.Kanban_Unparented="Unparented";e.ExpandSwimlane="Expand {0} swimlane";e.TestOutcome_InProgress="In progress";e.Column_Settings_WIP_Limit_Label="WIP limit";e.Swimlane_Settings_Lane_Label="Name";e.CardStyling_MaxRuleWarning="You can add up to 10 styling rules.";e.Column_Settings_State_Mapping_Subtitle="Specify the state this column maps to.";e.CardStyling_ColorPicker_OrangeLighter20="Orange, Lighter 20%";e.CardStyling_ColorPicker_OrangeLighter40="Orange, Lighter 40%";e.CardStyling_ColorPicker_OrangeLighter60="Orange, Lighter 60%";e.CardStyling_ColorPicker_OrangeLighter80="Orange, Lighter 80%";e.Column_Settings_WIP_Limit_Title="Work in progress limit";e.KeyboardShortcutkeyDescription_MoveItemDownRow="Move item to row below";e.WorkingDays_Work_Days="{0} work days";e.CardFieldOptions_ShowEmptyFieldsHelpText="Check if you want to display fields, even when they are empty.";e.BurndownValidation_Dates="No burndown charts are available because you have not configured a start date and an end date for following iteration: {0}.";e.BacklogAddItemCallout_Title="New Work Item";e.CardFields_Settings_SectionHeader_DescriptionKanban="Add, remove, and edit fields on the cards displayed on the team\u0027s Kanban board. All cards display the Title and Assigned To fields.";e.RemainingWork="Remaining work";e.CardOptionsConfigureFieldsHelpTextForKanban="Choose the work item fields that will display on your team\u0027s Kanban board. All cards display the Title and Assigned To fields.";e.RefreshNotification_SignalRFailedToLoad="Live updates isn\u0027t available because of a fatal script error.";e.CardStyling_RuleName_ToolTip="Add or edit styling rule name";e.Board_SearchIconTooltip_FirstColumn="Filter the first column";e.WorkingDays_Work_Day_Remaining="{0} work day remaining";e.Wiql_MacroCurrentIteration="CurrentIteration";e.TagColoring_TagHeader="Tag";e.TabPageApplyChanges="Apply Changes";e.KanbanCard_AriaRoleDescription="Card";e.Kanban_AutoRefreshStateIconRefreshingTooltip="Saving settings";e.CumulativeFlowSettingsInvalidDate="The start date you specified is not valid. You must provide the date in the following format: {0}.";e.CardFields_Settings_SectionHeader="Manage card fields";e.CardOptionsSelectOptions="Select options";e.CSC_GENERIC_SERVER_ERROR_TOOLTIP="You have errors in this configuration";e.TestAnnotation_RunTest="Run test";e.NoneValue="none";e.Board_OnlineFilter_Summary="{0} matches found. {1} items searched.";e.Filtering_OR_Operator_ToolTip="Filter using \u0027OR\u0027";e.CardAnnotation_Checkbox_ToolTip="Enable or disable annotation";e.KanbanColumnAriaLabel="Column";e.BoardsHub_FavoritesPicker_ZeroData_DirectoryLinkText="Boards directory";e.Column_Settings_Definition_of_Done_Prefix="Max character limit exceeded:";e.TestAnnotation_NotApplicableTest="Not applicable";e.Column_Settings_Outgoing_State_Mapping_Subtitle="The last column is always mapped to the final state.";e.CardStyleRule_StyleInstruction="Select your style choices.";e.CustomizeColumnsWiMaxLabel="Max work items";e.CustomizeColumnsMoveRightToolTip="Move right";e.Column_Settings_Name_Label="Name";e.Filtering_ClearAll="Clear filters";e.Swimlane_Settings_Default_Lane_Name="Lane Name";e.Column_Settings_Name_Title="Column name";e.TestOutcome_Blocked="Blocked";e.CardStyleRule_NameSectionTitle="Rule name";e.CardStyling_ColorPicker_RedLighter20="Red, Lighter 20%";e.CardStyling_ColorPicker_RedLighter60="Red, Lighter 60%";e.CardStyling_ColorPicker_RedLighter40="Red, Lighter 40%";e.CardStyling_ColorPicker_RedLighter80="Red, Lighter 80%";e.CurrentMarkerText="Current";e.CardStyleRule_CriteriaInstructions="Your styling choices apply to all work items that match all clauses of your custom criteria.";e.CardStyles_Clone="Clone";e.QueryEqualTo="=";e.Kanban_StatusMessage_RecoverableError="An error has occurred while attempting to save your changes. Click here to try saving your changes again. Error details: {0}";e.VelocityChartConent="The Velocity chart will help you learn how much work your team can complete during a sprint. Using the Velocity chart, you will be able to answer questions like:";e.Common_Setting_Filter_Command="Filter";e.CardStyling_MaxClausesWarning="You can add up to 5 clauses to a criteria.";e.CardStyling_ColorPicker_NoColor="No color";e.TestAnnotation_AddTest="Add Test";e.WorkingDays_Tab_Title="Working days";e.CardStyling_InvalidCriteria_Error="The criteria for the rule is not valid.";e.Checklist_Invalid_Transition_To_Complete_With_Link="The work item cannot transition directly from \u0027{0}\u0027 to \u0027{1}\u0027 because the project\u0027s custom process requires specific state transitions. Open the work item to update the state, or contact your project administrator. ";e.Swimlane_Settings_DuplicateLaneName="Another lane has the same name. Lane names must be unique.";e.CustomizeColumnsNoPermissions="You do not have sufficient permissions to configure columns for this team. You must either be a team administrator or a project administrator.";e.CardStyling_ManageRules_Standalone_Description="Cardstyling allows to visually draw attention towards specificcards.Add, edit, and reorder rules for card styling. Cards that meet multiple rule criteria will display with the style of the first rule in the list.  ";e.Checklist_Summary="{0}/{1}";e.CardStyling_ColorPicker_GreenLighter80="Green, Lighter 80%";e.CardStyling_ColorPicker_GreenLighter20="Green, Lighter 20%";e.CardStyling_ColorPicker_GreenLighter60="Green, Lighter 60%";e.CardStyling_ColorPicker_GreenLighter40="Green, Lighter 40%";e.CardOptionsDialogTitle="Customize cards";e.CardOptions_AdditionalFieldsSectionHelpText="Add up to 10 fields in the order that you want them to appear on the card.";e.KeyboardShortcutkeyDescription_MoveItemUpSwimlane="Move item to swimlane above";e.Swimlane_Settings_NoPermissions="You do not have sufficient permissions to configure lanes for this team. You must either be a team administrator or a project administrator.";e.CardOptions_DeleteTagColor="Delete tag color";e.BoardCard_ContextMenu_AddChild="Add {0}";e.Board_Options_Badge_Preview_Title="Preview";e.Board_Options_Badge_Description="Summarize your board in a badge that can be included in a ReadMe file or on a dashboard.";e.CSC_CARDS_GROUP_TITLE="Cards";e.TestAnnotation_ResetToActive="Reset to active";e.TestAnnotation_BlockTest="Block test";e.CustomizeColumnsErrorsOnPage="You have errors you need to fix before saving.";e.BoardCard_ContextMenu_Label="Actions";e.CardCustomizationAnnotationsNoPermissions="You do not have sufficient permissions to configure card annotations for this team. You must either be a team administrator or a project administrator.";e.CardStyling_ColorPicker_YellowLighter40="Yellow, Lighter 40%";e.CardStyling_ColorPicker_YellowLighter60="Yellow, Lighter 60%";e.CardStyling_ColorPicker_YellowLighter20="Yellow, Lighter 20%";e.CardStyling_ColorPicker_YellowLighter80="Yellow, Lighter 80%";e.CSC_CARDS_TAGCOLOR_TAB_TITLE="Tag colors";e.KanbanSwimlaneAriaLabel="Swimlane";e.CSC_SAVE_BUTTON_TEXT="Save";e.Board_Options_Badge_Example_Status="Example status badge for this board.";e.StoriesInProgress="{0} in progress";e.CustomizeCardsSaving="Saving...";e.TestAnnotation_Configuration_TestPlan_Custom_Placeholder="Select test plan";e.Kanban_RefreshIconTooltip="Refresh Board";e.Column_Settings_Add_Button_Label="Add Column";e.CustomizeColumnsBoardSettingsInvalid_Help="For more information on what might cause this error and how to fix it,";e.Cfd_Settings_Main_Header="Cumulative Flow Diagram";e.Board_Options_Badge_InProgress_Columns="Show \"In Progress\" columns only";e.Board_OnlineFilter_Summary_Singular="1 match found. {0} items searched.";e.BurndownChartOnTrack="Are we on track to complete all the work assigned to the sprint?";e.Filtering_Area_DisplayName="Area";e.TestAnnotation_Badge_Content="{0}/{1}";e.IterationPathTooltip="Iteration Path: {0}";e.CardStyling_EnabledStateLabel="Enabled";e.CardStyling_ColorPicker_Yellow="Yellow";e.ProductBacklogSearch="Backlog search";e.CSC_CARDS_STYLES_TAB_TITLE="Styles";e.Checklist_Add_Item="Add {0}";e.CardStyling_ColorPicker_White="White";e.CardStyling_ColorPicker_Black="Black";e.Board_PagedColumn_NoResultMessage="Didn\u0027t find any additional matches online.";e.CardStyling_ColorPicker_Beige="Beige";e.AgileHub_ConfigurationRequiredTitle="Configuration required";e.CardStyling_ColorPicker_Green="Green";e.Tag_Field_Label="Enter the tag name";e.CardOptionsDialogWorkItemTooltip="Customize {0} cards";e.Board_Options_CardReordering_PreserveBacklogOrder="Work items follow the backlog order when changing columns.";e.CardStyling_RuleColor_ToolTip="Color Preview";e.Board_ExpandColumn_AriaLabel="Expand {0} column";e.CSC_CARDS_ANNOTATION_TAB_TITLE="Annotations";e.CardStyling_Off="Off";e.TestAnnotation_RemoveTestCaseWarningMessage="This will remove selected test across all configurations from the suite";e.KeyboardShortcutkeyDescription_MoveItemBottomOfColumn="Move item to bottom of column";e.CardStyleRule_State_Off="Off";e.Configure_Outcome_Info="Outcomes will be same for tests with same configuration";e.CustomizeColumnsNewColumnToolTip="New column";e.Board_OnlineFilter_Continue="Continue searching for more matches online.";e.Column_Settings_WIP_Limit_Label1="WIP limit";e.Filtering_NoFiltersSelected_Label="None";e.Swimlane_Settings_Tab_Subtitle_Default="This lane is the default lane and cannot be deleted. New items are placed in this lane. Naming the lane is optional.";e.CardOptions_IdFieldHelpText="Check if your team frequently refers to work items by their ID.";e.GitHubLinksAnnotationSettingName="GitHub";e.CardStyleRule_CheckboxInstructions="If the above is not checked, this rule will not be applied to the current board.";e.CardStyleRule_CardColorLabel="Card color";e.CardStyling_ColorPicker_Red="Red";e.Board_Options_Badge_Markdown_Text="Sample Markdown";e.CSC_GENERIC_SERVER_ERROR="An error has prevented us from saving your settings. Please review the error messages before continuing. You may need to refresh your page and try again.";e.CustomizeColumnsIsSplitLabel="Split column";e.CommaSeparator=",";e.TestAnnotation_PassTest="Pass test";e.Kanban_AutoRefreshStateIconDisabledTooltip="Live updates disabled";e.CardOptionsSave="Save";e.CFDSettingsShowIncomingLabel="Include the first column of the Kanban board";e.CardStyling_ColorPicker_Purple="Purple";e.CustomizeColumnsWorkItemsLabel="Backlog items";e.CardStyling_ColorPicker_Teal="Teal";e.CardStyling_ColorPicker_Blue="Blue";e.CardStyling_ColorPicker_Grey="Grey";e.CardStyling_ManageRules_Title="Manage rules";e.Swimlane_Settings_DefaultLaneWithNameDeleted="You have deleted all the lanes except the default lane. The default lane name was: {0}. When you save these configuration settings, the name of the default lane will be changed from {0} to be blank. Any work items in this lane will be updated to reflect this change.";e.Checklist_Invalid_Transition_Link="https://go.microsoft.com/fwlink/?linkid=828652";e.CardStyleRule_CheckboxLabel="Turn on this rule.";e.KeyboardShortcutkeyDescription_RenameItemInFocus="Rename item";e.StoriesNotStarted="{0} not started";e.CardOptionsShowFullName="Full name only";e.GenericBurndownErrorMessage="TF401500: An error occurred when rendering the chart. It might be because no iterations have been configured for your current team or the work item count limit has been reached. Please contact your team or project administrator to resolve this issue";e.ProductBacklogSearchWatermark="Search backlog items";e.TabStrip_Menu_MoveRight="Move right";e.CardStyleRule_StyleInstructionWithoutTitleStyling="Choose the background color of the card.";e.Swimlane_Settings_DefaultLane_Subtitle="All your work items are displayed in a single lane. To view additional lanes, add new swimlanes.";e.Board_Options_Badge_URL_Text="Image URL";e.TestAnnotation_Configuration_TestPlan_Default="Create new plan using area/iteration of selected card";e.TestAnnotation_OpenTestTitle="Open";e.CardOptions_ShowEffort="Show {0}";e.CardFieldOptions_DuplicateFieldError="The field has already been selected";e.Backlog_LowercaseDisplayName="backlog";e.TestAnnotation_Configuration_TestPlan_Custom="Select a test plan";e.KeyboardShortcutkeyDescription_MoveItemTopOfColumn="Move item to top of column";e.KeyboardShortcutkeyDescription_CollapseSwimlanes="Collapse all swimlanes";e.Filtering_AssignedTo_DisplayName="Assigned To";e.ColumnDoneStateLabel="Done";e.Swimlane_Settings_Add_Button="Swimlane";e.CardOptions_InvalidTagNameError="Invalid";e.Board_PagedColumn_ShowMoreItems="Show more items";e.Kanban_AutoRefreshStateIcon_HotSpot_FeatureText2="Turn on live updates by clicking on the icon.";e.Kanban_AutoRefreshStateIcon_HotSpot_FeatureText1="Live updates automatically shows changes made by others to your Kanban board. No need to press the F5 key to refresh the board anymore.";e.Board_Settings_Columns="Columns";e.RefreshNotification_SettingsChanged="Live updates isn\u0027t available due to changes made to board layout. ";e.CustomizeColumnsMoveLeftToolTip="Move left";e.KanbanBoard_AriaDescribedByText="Board with multiple columns containing cards identified as groups. On a card, press enter or space to open the workItem, use shift F10 for context menu, use arrow keys to navigate between cards, use control arrow keys to reorder cards or change column, use control shift up or down to change swimlane.";e.Column_Settings_Split_Columns_Title="Split column into doing and done";e.CardOptionsShowAvatarAndFullName="Avatar and full name (default)";e.BoardValidator_LaneNameContainsInvalidChar="Error on lane {0}: Lane name contains unsupported characters. For more information about valid naming conventions for swimlanes, see the topic Kanban naming restrictions on the Microsoft website (https://go.microsoft.com/fwlink/?LinkId=77936).";e.TestAnnotation_EditTitle="Edit title";e.VelocityChartAverage="On average, what is the velocity of my team?";e.CardOptionsCustomizeWIT="Customize {0}";e.SaveDiscard_DiscardButton="Undo changes";e.CustomizeColumns="Customize columns";e.CardFields_Settings_AdditionalFields_Delete_Label="Delete this additional field";e.KeyboardShortcutkeyDescription_ExpandItemInFocus="Show/hide empty fields";e.CardStyling_ColorPicker_TealLighter80="Teal, Lighter 80%";e.CardStyling_ColorPicker_TealLighter40="Teal, Lighter 40%";e.CardStyling_ColorPicker_TealLighter60="Teal, Lighter 60%";e.CardStyling_ColorPicker_TealLighter20="Teal, Lighter 20%";e.CumulativeFlowSettingsFutureDate="The start date you specified is not valid. You cannot specify a date in the future.";e.Board_LoadingTakingTooLong="TF401052: It took too long to load the board configuration. Please wait a few minutes and try again.";e.CollapseSwimlane="Collapse {0} swimlane";e.CardStyling_SelectFontColor_label="Font Color";e.Burndownchart_AltText="The burndown chart displays the remaining work and capacity against the ideal trend for an iteration. Data is only available visually at this time.";e.CustomizeColumnsDefinitionOfDoneLabel="Definition of Done";e.Kanban_StatusMessage_FatalError="An error has occurred while attempting to save your changes. Click here to discard your changes and refresh your view. Error details: {0}";e.CardOptions_ShowAssignedToFieldAs="Show {0} as:";e.EditTitle="Edit title";e.Board_Options_Badge_Enable_Help_Text="Allow anonymous users to access the status badge.";e.CardStyling_DuplicateName_Error="Another style rule has the same name. Rule names must be unique.";e.CustomizeColumnsEmptyColumnName="Column name must be specified.";e.AssignedTo="Assigned to";e.SprintDates_SetDates="Set dates";e.CommonSettings_Fields_AdditionalFieldsSectionHeader="Additional fields";e.BacklogAddItemCallout_AddAtSelection="Add at selection";e.BacklogAddItemCallout_AddToTop="Add to top";e.Swimlane_Settings_DefaultLaneName="(Default lane)";e.Filtering_Tags_DisplayName="Tags";e.CardStyling_ColorPicker_Orange="Orange";e.AddNewItem_Add_Items="Add: {0}";e.CustomizeColumnsBoardSettingsInvalid_ClickHere="Correct this now.";e.Common_Setting_Config_Menu_Tooltip="Configure team settings";e.KeyboardShortcutkeyDescription_TaskboardGroup="Taskboard";e.CSC_CLOSE_BUTTON_TEXT="Close";e.CustomizeColumnsBoardSettingsInvalid="The column configurations are not valid. The board cannot be displayed.";e.CumulativeFlowSettingsNoPermission="You do not have sufficient permissions to configure the Cumulative Flow Diagram for this team. You must either be a team administrator or a project administrator.";e.WorkingDays_Work_Day="{0} work day";e.TestAnnotation_NavigateToSuiteTooltip="Open test suite";e.RefreshingNotification="Refreshing...";e.CardFieldOptions_ShowEmptyFieldsLabel="Show empty fields";e.CardAnnotation_EnabledStateLabel="Enabled";e.NewRuleName="{0} ({1})";e.HowToReadThisChart="How do I read this chart?";e.TabStrip_Menu_MoveLeft="Move left";e.CardStyleRulesLoading="Loading";e.CardStyling_Title_Dialog="STYLE CARDS";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/TFS.IllustrationUrlUtils",["require","exports","VSS/Locations"],function(n,t,i){var r,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.WorkIllustrationUrlUtils=t.WorkWidgetIllustrationPaths=t.WorkZeroDataIllustrationPaths=t.GeneralZeroDataIllustrationPaths=void 0,function(n){n.SomethingWrongOnServer="Illustrations/general-something-wrong-on-server.svg"}(r=t.GeneralZeroDataIllustrationPaths||(t.GeneralZeroDataIllustrationPaths={})),function(n){n.ChartingNotSupported="Illustrations/zerodata-charting-not-supported.svg";n.CustomRules="Illustrations/zerodata-custom-rules.svg";n.GetBackToRecentWork="Illustrations/zerodata-get-back-to-recent-work.svg";n.GetStartedWithSprints="Illustrations/zerodata-get-started-with-sprint.svg";n.InvalidWorkItemType="Illustrations/zerodata-invalid-workitem-type.svg";n.KeepAnEyeOnImportantWork="Illustrations/zerodata-keep-an-eye-on-important-work.svg";n.MentionSomeone="Illustrations/zerodata-mention-someone.svg";n.NoCharts="Illustrations/zerodata-no-charts.svg";n.UnsavedQuery="Illustrations/zerodata-unsaved-query.svg";n.WorkItemNotFound="Illustrations/zerodata-workitem-not-found.svg";n.YourWorkInOnePlace="Illustrations/zerodata-your-work-in-one-place.svg";n.QueryNoResultFound="Illustrations/general-no-results-found.svg";n.NoPlan="Illustrations/zerodata-no-plan.svg";n.InitializingTestResults="Illustrations/zerodata-initializing-test-results.svg";n.NoWorkScheduled="Illustrations/zerodata-no-work-scheduled.svg";n.SprintDragAndDrop="Illustrations/zerodata-sprint-drag-n-drop.svg";n.ConfigurationRequired="Illustrations/zerodata-feature-not-configured.svg"}(u=t.WorkZeroDataIllustrationPaths||(t.WorkZeroDataIllustrationPaths={})),function(n){n.YouDontHavePermission="Illustrations/widget-you-dont-have-permission.svg"}(f=t.WorkWidgetIllustrationPaths||(t.WorkWidgetIllustrationPaths={})),function(n){function t(n){return i.urlHelper.getVersionedContentUrl(n)}n.getIllustrationImageUrl=t}(e=t.WorkIllustrationUrlUtils||(t.WorkIllustrationUrlUtils={}))});

define("Agile/Scripts/Common/Components/AgileHubError",["require","exports","Agile/Scripts/Resources/TFS.Resources.AgileControls","react","VSS/Locations","VSSUI/ZeroData","Presentation/Scripts/TFS/TFS.IllustrationUrlUtils","OfficeFabric/Button","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/AgileHubError"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.HubError=void 0;var s=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.render=function(){var n=this,s=r.createElement("div",null,this.props.exceptionsInfo.map(function(t,i){return r.createElement("div",{key:i},n._getErrorsList(t),n._getErrorActionButtons(t))})),t=this.props.exceptionsInfo.some(function(n){return n.isSettingsException}),h=t?e.WorkIllustrationUrlUtils.getIllustrationImageUrl(e.WorkZeroDataIllustrationPaths.ConfigurationRequired):u.urlHelper.getVersionedContentUrl("MyExperiences/general-robot-error.png"),o=t?i.AgileHub_ConfigurationRequiredTitle:i.AgileHub_ErrorTitle;return r.createElement("div",{className:"agile-hub-error"},r.createElement(f.ZeroData,{imagePath:h,imageAltText:o,primaryText:o,secondaryText:s}))},t.prototype._getErrorsList=function(n){var t=n.additionalMessages&&n.additionalMessages.length>0;return r.createElement("div",null,r.createElement("div",null,n.exceptionMessage),t&&r.createElement("ul",null,n.additionalMessages.map(function(n,t){return r.createElement("li",{key:"Error".concat(t)},n)})))},t.prototype._getErrorActionButtons=function(n){var t,i;return n.primaryLinkHref&&n.primaryLinkText&&(t=r.createElement("span",{className:"error-button"},r.createElement(o.PrimaryButton,{href:n.primaryLinkHref},n.primaryLinkText," "))),n.secondaryLinkHref&&n.secondaryLinkText&&(i=r.createElement("span",{className:"error-button"},r.createElement(o.DefaultButton,{href:n.secondaryLinkHref},n.secondaryLinkText," "))),r.createElement("div",{className:"error-footer"},t,i)},t}(r.Component);t.HubError=s});

define("VSS/Controls/CheckboxList",["require","exports","VSS/Controls","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/UI","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f){var s,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.CheckboxList=t.CheckboxListO=void 0;s=u.delegate;e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"checkbox-list",tagName:"ul"},t))},t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this.setItems(this._options.items);this._bind("click",s(this,this._onCheckClick));this._options.useArrowKeysForNavigation&&this._bind("keydown",function(n){var i,r;switch(n.keyCode){case f.KeyCode.UP:if(i=$(n.target).closest("li").prev("li").find("input[type=checkbox]"),i.length>0)return t._inputHasTabIndex&&t._inputHasTabIndex.attr("tabIndex",-1),t._inputHasTabIndex=i.attr("tabIndex",0).focus(),!1;break;case f.KeyCode.DOWN:if(r=$(n.target).closest("li").next("li").find("input[type=checkbox]"),r.length>0)return t._inputHasTabIndex&&t._inputHasTabIndex.attr("tabIndex",-1),t._inputHasTabIndex=r.attr("tabIndex",0).focus(),!1}})},t.prototype.enableElement=function(t){n.prototype.enableElement.call(this,t);f.enableElement(this.getElement().find("input"),t)},t.prototype.setItems=function(n){this._items=n||[];this._draw()},t.prototype.getCheckedItems=function(){var n=this;return this._items.filter(function(t){return n._checkItemState(t,!0)})},t.prototype.getUncheckedItems=function(){var n=this;return this._items.filter(function(t){return n._checkItemState(t,!1)})},t.prototype.getCheckedValues=function(){var n=this;return this.getCheckedItems().map(function(t){return n._getItemValue(t)})},t.prototype.getUncheckedValues=function(){var n=this;return this.getUncheckedItems().map(function(t){return n._getItemValue(t)})},t.prototype.setCheckedValues=function(n){for(var t,i=r.toDictionary(n,function(n){return n},function(){return!0}),u=0,f=this.getCheckedValues();u<f.length;u++)t=f[u],t in i?delete i[t]:(this.getElement().find("#"+this._idMap[t]).prop("checked",!1),delete this._checkedItems[t]);for(t in i)i.hasOwnProperty(t)&&(this.getElement().find("#"+this._idMap[t]).prop("checked",!0),this._checkedItems[t]=!0)},t.prototype._initializeElement=function(){this._options.id||(this._options.id="cbl_"+i.getId());n.prototype._initializeElement.call(this)},t.prototype._getItemValue=function(n){var t=null;return typeof n=="string"?t=n:n&&(typeof n.value!="undefined"?t=n.value:typeof n.text!="undefined"&&(t=n.text)),t},t.prototype._checkItemState=function(n,t){var i=this._getItemValue(n);return i!==null&&i!==undefined&&i in this._checkedItems===t?!0:!1},t.prototype._draw=function(){var n=this;this.getElement().empty();this._checkedItems={};this._idMap={};$.each(this._items||[],function(t,i){var u,r,c,e,h=n._options.id+"_cb"+t,f,o,s;typeof i=="string"?u=i:i&&(u=i.text,r=i.value,c=i.checked,e=i.content);u=u||r;(r===null||r===undefined)&&(r=u);(u!=null||e!=null)&&(f=$("<li />"),n._options.itemCssClass&&f.addClass(n._options.itemCssClass),i.cssClass&&f.addClass(i.cssClass),o=$("<input />").data("value",r).attr("type","checkbox").attr("id",h).data("index",t).appendTo(f),c&&(o.prop("checked",!0),n._checkedItems[r]=!0),s=$("<label />").attr("for",h),e?s.append(e):s.text(u),s.appendTo(f),n._options.useArrowKeysForNavigation&&(t===0?n._inputHasTabIndex=o:o.attr("tabIndex",-1)),n.getElement().append(f),n._idMap[r]=h)})},t.prototype._onCheckClick=function(n){var t=$(n.target),i,r=!1;t.is("input[type=checkbox]")&&(i=t.data("value"),t.prop("checked")?(this._checkedItems[i]=!0,r=!0):delete this._checkedItems[i],this._options.useArrowKeysForNavigation&&(this._inputHasTabIndex&&this._inputHasTabIndex.attr("tabIndex",-1),this._inputHasTabIndex=t.attr("tabIndex",0)),this._fireChange([i,r]))},t.enhancementTypeName="tfs.checkboxList",t}(i.Control);t.CheckboxListO=e;o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(e);t.CheckboxList=o;i.Enhancement.registerJQueryWidget(o,"checkboxList")});

define("VSS/Controls/PopupContent",["require","exports","VSS/Controls","VSS/Diag","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI"],function(n,t,i,r,u,f,e){var v,h,o;Object.defineProperty(t,"__esModule",{value:!0});t.RichContentTooltip=t.RichContentTooltipO=t.PopupContentControl=t.PopupContentControlO=void 0;var c=e.domElem,l=u.delegate,a=100,y=1e3,s=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._hasFocus=!1,t._blockFocusUntil=-a-1,t._hasMouse=!1,t._enabled=!0,t._handlers={},t}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._element[0].classList.add("popup-content-control");this._setAriaDescribedBy();!this._options.openDelay&&this._$dropElement.is(":focus")&&this.show();this._onForceHideDropPopupDelegate=this.onForceHideDropPopup.bind(this)},t.prototype.onForceHideDropPopup=function(){this.hide()},t.prototype.setTextContent=function(n){this._setContent(f.htmlEncode(n))},t.prototype.setHtmlContent=function(n){this._setContent(n)},t.prototype._setContent=function(n){this._$contentContainer.html(n);this._contentSet=!0;this._visible&&this._reposition()},t.prototype._initializeContent=function(){if(!this._contentSet){if(this._options.text)typeof this._options.text=="function"?this.setTextContent(this._options.text.call(this)):this.setTextContent(this._options.text);else if(this._options.html)typeof this._options.html=="function"?this.setHtmlContent(this._options.html.call(this)):this.setHtmlContent(this._options.html);else if(this._options.content){var n=this._options.content;typeof n=="function"?this._setContent(n.call(this)):this._setContent(n)}this._contentSet=!0}},t.prototype._setAriaDescribedBy=function(){if(this._options.setAriaDescribedBy){this._initializeContent();var t=this._$contentContainer.attr("id"),n=this._$dropElement.attr("aria-describedby")||"";n.indexOf(t)===-1&&this._$dropElement.attr("aria-describedby",(n?n+" ":"")+t)}},t.prototype.resetContent=function(){this._contentSet=!1},t.prototype.show=function(){this._show({useMousePosition:!1})},t.prototype.toggle=function(){this._element.is(":visible")?this.hide():this.show()},t.prototype._enhance=function(n){var u=this,t;this._createElement();this._$dropElement=n;t=this._options.menuContainer||$("#PopupContentContainer");t.length===0&&(t=$("<div id='PopupContentContainer'><\/div>").appendTo(document.body));this._element.appendTo(t);this._element.css("position","fixed");this._$contentContainer=$(c("div","popup-content-container")).attr({role:"tooltip",id:i.getHtmlId(),"aria-hidden":"true"}).appendTo(this._element);this._decorate();this._bind(n,"remove.removePopupDropElement",function(){u.dispose()})},t.prototype._decorate=function(){var n=this;this._options.openCloseOnHover?(this._listen("mouseover",this.onMouseOver),this._options.showOnFocus!==!1&&this._listen("focus",this._onFocus)):(this._documentEventDelegate=l(this,this._handleDocumentMouseDown),this._bind(this._$dropElement,"click",function(){n._element.is(":visible")?n.hide():n.show()}))},t.prototype._listen=function(n,t){!this._handlers[n]&&this._$dropElement.length>0&&this._$dropElement[0].addEventListener(n,this._handlers[n]=t.bind(this))},t.prototype._stopListening=function(n){var t=this._handlers[n];t&&this._$dropElement[0].removeEventListener(n,t)},t.prototype._onInteract=function(){this.hide();this._hasFocus=!1;this._blockFocusUntil=Date.now()+a},t.prototype._onFocus=function(n){n.target===this._$dropElement[0]&&Date.now()>this._blockFocusUntil&&(this._hasFocus=!0,this._listen("blur",this._onBlur),!this._hasMouse&&this._enabled&&this._showDelayed())},t.prototype._onBlur=function(){this._hasFocus=!1;this._hasMouse||this.hide()},t.prototype._onMouseMove=function(n){this._mousePosition?(this._mousePosition.left=n.pageX,this._mousePosition.top=n.pageY):this._mousePosition={left:n.pageX,top:n.pageY}},t.prototype.onMouseOver=function(n){(!this._options.mouseEventFilter||this._options.mouseEventFilter(n))&&(this._options.useStrictTarget&&n.target!==this._$dropElement[0]||(this._hasMouse=!0,this._enabled)&&(this._listen("mouseout",this._onMouseOut),this._listen("mousemove",this._onMouseMove),this._onMouseMove(n),this._showDelayed({useMousePosition:!0}),this._delayedHide&&this._delayedHide.cancel()))},t.prototype._onMouseOut=function(){var n=this;this._hasMouse=!1;this._delayedHide&&this._delayedHide.cancel();this._delayedHide=u.delay(this,100,function(){n.hide();n._delayedHide=null})},t.prototype.showDelayed=function(){this._showDelayed({useMousePosition:!1})},t.prototype._showDelayed=function(n){var t=this;this._visible||(n=n||{useMousePosition:!1},this._options.openDelay?(this._delayedShow&&this._delayedShow.cancel(),this._delayedShow=u.delay(this,this._options.openDelay,function(){t._show(n)})):this._show(n))},t.prototype._handleDocumentMouseDown=function(n){var t=$(n.target);this._$dropElement.has(n.target).length>0||this._$dropElement[0]===n.target||this._$contentContainer.has(n.target).length>0||this._$contentContainer[0]===n.target||this._element.has(n.target).length>0||this._element[0]===n.target||this.hide()},t.prototype._setPosition=function(){this._setPositionInternal({useMousePosition:!1})},t.prototype._setPositionInternal=function(n){if(this._visible){this._element.css({top:0,left:0});this._lastPositionContext={options:n};var t={elementAlign:this._options.elementAlign||"left-top",baseAlign:this._options.baseAlign||"left-bottom",overflow:this._options.overflow,supportScroll:this._options.supportScroll,leftOffsetPixels:this._options.leftOffsetPixels,topOffsetPixels:this._options.topOffsetPixels,skipZIndexSetting:this._options.skipZIndexSetting};n.useMousePosition&&this._options.useMousePosition!==!1?(this._lastPositionContext.mousePosition={left:this._mousePosition.left,top:this._mousePosition.top},t.leftOffsetPixels=this._options.mouseLeftOffsetPixels||t.leftOffsetPixels,t.topOffsetPixels=this._options.mouseTopOffsetPixels||t.topOffsetPixels,e.Positioning.positionAtLocation(this._element,this._mousePosition,t)):this._$dropElement.length>0&&e.Positioning.position(this._element,this._$dropElement,t)}},t.prototype._reposition=function(){this._lastPositionContext&&(this._lastPositionContext.mousePosition&&(this._mousePosition=this._lastPositionContext.mousePosition),this._setPositionInternal(this._lastPositionContext.options))},t.prototype._getDropElement=function(){return this._$dropElement},t.prototype._show=function(n){!this.isDisposed()&&this._getDropElement().is(":visible")&&(!this._options.onlyShowWhenOverflows||e.contentsOverflow(this._options.onlyShowWhenOverflows))&&(this._visible||(this._visible=!0,this._options.openCloseOnHover&&(this._listen("click",this._onInteract),this._listen("keypress",this._onInteract)),this._initializeContent(),this.getElement().show(),this._setPositionInternal(n),this._fire("popup-opened"),this._documentEventDelegate&&$(document).bind("mousedown",this._documentEventDelegate),e.attachResize(this._element,l(this,this._setPosition)),this._bind(this._$dropElement.parents(),"scroll",this._onForceHideDropPopupDelegate),this._escapeKeyHandler||(this._escapeKeyHandler=this.onEscapeKeyPressed.bind(this),document.addEventListener("keydown",this._escapeKeyHandler,!0)),this._delayedShow&&this._delayedShow.cancel(),this._$contentContainer.attr("aria-hidden","false")))},t.prototype.onEscapeKeyPressed=function(n){n.key==="Escape"&&(this.hide(),n.preventDefault(),n.stopPropagation())},t.prototype.hide=function(){(this._escapeKeyHandler&&document.removeEventListener("keydown",this._escapeKeyHandler,!0),this.isDisposed())||(this._delayedShow&&this._delayedShow.cancel(),this._visible)&&(this._visible=!1,this._documentEventDelegate&&$(document).unbind("mousedown",this._documentEventDelegate),e.detachResize(this._element),this._onForceHideDropPopupDelegate&&this._unbind(this._$dropElement.parents(),"scroll",this._onForceHideDropPopupDelegate),this._element.hide(),this._fire("popup-closed"),this._stopListening("mousemove"),this._$contentContainer.attr("aria-hidden","true"))},t.prototype.enable=function(){this._enabled=!0;(this._hasFocus||this._hasMouse)&&this._showDelayed()},t.prototype.disable=function(){this._enabled=!1;this.hide()},t.prototype._dispose=function(){if(n.prototype._dispose.call(this),this._options.setAriaDescribedBy){var i=this._$contentContainer.attr("id"),t=this._$dropElement.attr("aria-describedby")||"";t=t.replace(new RegExp("\\b".concat(i,"\\b"),"g"),"").trim().replace(/\s+/," ");t?this._$dropElement.attr("aria-describedby",t):this._$dropElement.removeAttr("aria-describedby")}this._documentEventDelegate&&($(document).unbind("mousedown",this._documentEventDelegate),this._documentEventDelegate=null);this._onForceHideDropPopupDelegate&&(this._unbind(this._$dropElement.parents(),"scroll",this._onForceHideDropPopupDelegate),this._onForceHideDropPopupDelegate=null);this._$dropElement&&this._$dropElement.length>=1&&(this._unbind(this._$dropElement,"click"),this._unbind(this._$dropElement,"remove.removePopupDropElement"),this._stopListening("mouseover"),this._stopListening("mouseout"),this._stopListening("mousemove"),this._stopListening("focus"),this._stopListening("blur"),this._stopListening("click"),this._stopListening("keypress"));e.detachResize(this._element)},t}(i.Control);t.PopupContentControlO=s;v=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(s);t.PopupContentControl=v;h=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._onKeyDown=function(n){n.which===27&&t._visible&&(t._popupHasMouse=!1,t.hide())},t}return __extends(t,n),t.hide=function(){t._shownTooltip&&t._shownTooltip.hide()},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"rich-content-tooltip",openCloseOnHover:!0,elementAlign:"middle-top",baseAlign:"middle-bottom",useMousePosition:!1},t))},t.prototype.initialize=function(){var i=this.getElement(),r=this._options,t;r.popupTag!==!1&&(this._$popupTag=$(c("div","popup-tag")).prependTo(i),this._popupHasMouse=!1,t=this,this._$popupTag[0].parentElement.addEventListener("mouseenter",function(){t._popupHasMouse=!0}),this._$popupTag[0].parentElement.addEventListener("mouseleave",function(){t._popupHasMouse=!1;t._delayedHide=u.delay(this,100,function(){t.hide();t._delayedHide=null})}));n.prototype.initialize.call(this);i[0].classList.add("v2");r.autoWidth&&i[0].classList.add("auto-width")},t.prototype._getPopupTooltipElement=function(){return this._$popupTag},t.prototype._show=function(i){if(document.addEventListener("keydown",this._onKeyDown),n.prototype._show.call(this,i),this._visible){var r=t._shownTooltip;r&&r!==this&&r.hide();t._shownTooltip=this}},t.prototype.hide=function(){this._popupHasMouse||(document.removeEventListener("keydown",this._onKeyDown),n.prototype.hide.call(this),t._shownTooltip===this&&(t._shownTooltip=null))},t.prototype._setPositionInternal=function(t){var f,i,r,e,o,s;if((n.prototype._setPositionInternal.call(this,t),this._visible)&&this._$popupTag){f=t&&t.useMousePosition&&this._options.useMousePosition!==!1;this._$popupTag.css({top:0,left:0});this._$contentContainer.toggleClass("mouse",f);i={left:parseInt(this._element.css("left"),10),top:parseInt(this._element.css("top"),10),width:this._element.outerWidth(),height:this._element.outerHeight()};r=void 0;f?r=this._mousePosition:(e=this._getDropElement(),o=e.offset(),r={left:o.left+e.outerWidth()/2,top:o.top});s=this._element.offset();r.left+=i.left-s.left;r.top+=i.top-s.top;var l=f?27:11,u=15,a=u*.5,c=u*(Math.SQRT2-1)*.5,v=c+u,h={left:Math.max(Math.min(r.left-a,i.left+i.width-v),i.left+c),top:i.top+l-u*.5};i.top<r.top-.5?(this._$popupTag.addClass("flipped"),h.top=i.top+i.height-11-u*.5):this._$popupTag.removeClass("flipped");this._$popupTag.css({left:h.left+"px",top:h.top+"px"})}},t.add=function(n,t,r){return r=__assign({openDelay:y,topOffsetPixels:0,mouseTopOffsetPixels:0,autoWidth:!0},r),typeof n=="string"?r.text=n:n&&(r.html=n),i.Enhancement.enhance(o,$(t),r)},t.addIfOverflow=function(n,t,i){return o.add(n,t,__assign(__assign({},i),{onlyShowWhenOverflows:t}))},t}(s);t.RichContentTooltipO=h;o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(h);t.RichContentTooltip=o});

define("VSS/Controls/Validation",["require","exports","VSS/Controls","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/Number","VSS/Utils/String","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s){function d(n,t,i){function u(t,i,u,f){u&&u!=="*"&&u!==n||f||r.push(i)}var r=[];return $(i||window.document.body).bind(h.EVENT_VALIDATE_STATUS,u),$(i||window.document.body).trigger(h.EVENT_VALIDATE,[n]),$(i||window.document.body).unbind(h.EVENT_VALIDATE_STATUS,u),r.length&&t&&$.each(r,function(n,i){t.push(i)}),r.length===0}var c,h,a,v,y,p,w,b,k,l;Object.defineProperty(t,"__esModule",{value:!0});t.validateGroup=t.ValidationSummary=t.MaxLengthValidator=t.IntegerRangeValidator=t.DateValidator=t.CustomValidator=t.RegexValidator=t.RangeValidator=t.RequiredValidator=t.BaseValidator=void 0;c=u.delegate;h=function(n){function t(r){var u=__construct(this,n,[r]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);if(u.getType()===t)throw new Error("You cannot instantiate an abstract type.");return u.instanceId="val_"+i.getId(),u}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({invalidCssClass:"invalid",message:"Invalid input value!",group:"*",allowEmptyString:!1},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._bind("change",c(this,this.onChanged));this._onValidationRequiredDelegate=c(this,this.onValidationRequired);this._bind(window.document.body,t.EVENT_VALIDATE,this._onValidationRequiredDelegate,!0);this._options.bindtokeystrokes&&this._bind("keyup",c(this,this.onKeyUp))},t.prototype.dispose=function(){this._onValidationRequiredDelegate&&this._unbind(window.document.body,t.EVENT_VALIDATE,this._onValidationRequiredDelegate,!0);n.prototype.dispose.call(this)},t.prototype.getValue=function(){return this._element.val()},t.prototype.isValid=function(){return!0},t.prototype.getValidationGroup=function(){return this._options.group},t.prototype.getMessage=function(){var n=this._options.message;return n&&typeof n=="function"&&(n=n.call(this)),n},t.prototype.onKeyUp=function(){this.validate()},t.prototype.onChanged=function(){this.validate()},t.prototype.onValidationRequired=function(n,t){t&&t!=="*"&&t!==this._options.group||this.validate()},t.prototype.validate=function(){var n,i;this._disposed||(n=this._testEmptyString()||this.isValid(),i=this.getValidationGroup(),this._element.toggleClass(this._options.invalidCssClass,!n),this._fire(t.EVENT_VALIDATE_STATUS,[this,i,n]))},t.prototype._testEmptyString=function(){return this._options.allowEmptyString&&this.getValue()===""},t.optionsPrefix="validator",t.EVENT_VALIDATE="validate",t.EVENT_VALIDATE_STATUS="validate-status",t}(i.Enhancement);t.BaseValidator=h;s.initClassPrototype(h,{instanceId:null});a=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value cannot be empty!"},t))},t.prototype.isValid=function(){return $.trim(this.getValue())?!0:!1},t.optionsPrefix="requiredValidator",t}(h);t.RequiredValidator=a;i.Enhancement.registerEnhancement(a,".validate.required");v=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Out of range"},t))},t.prototype.isValid=function(){var n=this.getValue(),t=this._element.data("rangeValidator-min"),i=this._element.data("rangeValidator-max");return n>=t&&n<=i},t.prototype.getMessage=function(){var n=this.getValue(),t=this._element.data("rangeValidator-min"),i=this._element.data("rangeValidator-max");return n<t?"Input cannot be smaller than "+t:n>i?"Input cannot be greater than "+i:void 0},t.optionsPrefix="rangeValidator",t}(h);t.RangeValidator=v;i.Enhancement.registerEnhancement(v,".validate.range");y=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value doesn't match regex",testEmptyString:!0},t))},t.prototype.isValid=function(){var n,t;return(t=this._options.regex||this._element.data("regexValidator-regex"),t&&(n=this.getValue(),this._options.testEmptyString||$.trim(n)))?new RegExp(t).test(n):!0},t.prototype.getMessage=function(){return this._element.data("regexValidator-message")||this._options.message},t.optionsPrefix="regexValidator",t}(h);t.RegexValidator=y;i.Enhancement.registerEnhancement(y,".validate.regex");p=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value doesn't satisfy function",testEmptyString:!0,validate:function(){return!0}},t))},t.prototype.isValid=function(){var n,t;return(t=this._options.validate,typeof t=="function"&&(n=this.getValue(),this._options.testEmptyString||$.trim(n)))?t(n):!0},t.prototype.setValidate=function(n){this._options.validate=n},t.prototype.getMessage=function(){return this._element.data("customValidator-message")||this._options.message},t.optionsPrefix="customValidator",t}(h);t.CustomValidator=p;i.Enhancement.registerEnhancement(p,".validate.custom");w=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value must be a valid date",parseFormat:""},t))},t.prototype.isValid=function(){var t=$.trim(this.getValue()),n;if(t)n=f.parseDateString(t,this._options.parseFormat);else return!0;return n instanceof Date&&!isNaN(n.getTime())},t.prototype.getMessage=function(){return this._element.data("dateValidator-message")||this._options.message},t.optionsPrefix="dateValidator",t}(h);t.DateValidator=w;i.Enhancement.registerEnhancement(w,".validate.date");b=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.isValid=function(){var t=this.getValue(),n=this._getBounds();return this.isWithinBounds(t,n.max,n.min)},t.prototype.isWithinBounds=function(n,t,i){var u=e.parseLocale(n),f=!1,r=parseInt(""+u,10),o=parseFloat(""+u);return!isNaN(u)&&r===o&&isFinite(r)&&i<=r&&t>=r&&(f=!0),f},t.prototype.getMessage=function(){var n=this._getBounds();return o.format(r.Validation_IntegerRange,n.min,n.max)},t.prototype._getBounds=function(){var n,t;return n=this._options.minValue!==undefined?this._options.minValue:Number(this._element.data("integerRangeValidator-min")),t=this._options.maxValue!==undefined?this._options.maxValue:Number(this._element.data("integerRangeValidator-max")),{min:n,max:t}},t.optionsPrefix="integerRangeValidator",t}(h);t.IntegerRangeValidator=b;i.Enhancement.registerEnhancement(b,".validate.integerRange");k=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:o.format("Input cannot exceed {0} characters.",t.maxLength)},t))},t.prototype.isValid=function(){return this.getValue().length>this._options.maxLength?!1:!0},t.optionsPrefix="maxLengthValidator",t}(h);t.MaxLengthValidator=k;i.Enhancement.registerEnhancement(k,".validate.maxlength");l=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._messages={},t.fixedHeight&&(i._fixedHeight=!0),t.singleMessage&&(i._singleMessage=!0),t.showAsWarning&&(i._showAsWarning=!0),i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"validation-summary",group:"*"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._bind(this._options.context||window.document.body,h.EVENT_VALIDATE_STATUS,c(this,this.onValidationStatus),!0)},t.prototype.onValidationStatus=function(n,t,i,r){delete this._messages[t.instanceId];i&&i!=="*"&&i!==this._options.group||(r||(this._messages[t.instanceId]=t.getMessage()),this._updateUI())},t.prototype.validate=function(){try{this._messages={};this._ignoreUIUpdate=!0;this._fire(this._options.context||window.document.body,h.EVENT_VALIDATE,[this._options.group])}finally{this._ignoreUIUpdate=!1}this._updateUI()},t.prototype._updateUI=function(){var n=this,t=!1,i;this._ignoreUIUpdate||(this._element.empty(),$.each(this._messages,function(i,r){return(t=!0,n._element.append($("<div />").text(r||"")),n._singleMessage)?!1:!0}),i=n._showAsWarning?"invalid-warning":"invalid",this._element.toggleClass(i,t),this._element.toggleClass("fixed-height",n._fixedHeight))},t}(i.Control);t.ValidationSummary=l;s.initClassPrototype(l,{_messages:null,_ignoreUIUpdate:!1,_fixedHeight:!1,_singleMessage:!1,_showAsWarning:!1});i.Enhancement.registerEnhancement(l,".validation-summary");t.validateGroup=d;s.tfsModuleLoaded("VSS.UI.Controls.Validation",t)});

define("VSS/Controls/Virtualization",["require","exports","VSS/Controls","VSS/Utils/Core","VSS/Utils/UI","VSS/Controls/PopupContent","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.VirtualizingListView=void 0;var e=r.delegate,o=u.domElem,s=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._firstVisible=0,t._selectedIndex=-1,t._rowHeight=20,t._ignoreScrollEvent=!1,t._enableMouseOver=!0,t._prevMousePos="",t.visibleRowCount=1,t._pointerDownY=null,t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"virtualizing-list-view",maxRowCount:8,selectedIndex:-1},t))},t.prototype.initialize=function(){this._bind("click",e(this,this._onClick));this._itemsContainer=$(o("ul","items"));this._itemsContainer.attr("role",this._options.virtualizingListViewRole||"listbox");this._itemsContainer.attr("id",i.getId());this._bind(this._itemsContainer,"mouseover",e(this,this._onMouseOver));this._bind(this._itemsContainer,"mousemove",e(this,this._onMouseMove));this._options.preventMouseDown&&this._bind(this._itemsContainer,"mousedown",function(n){return n.preventDefault()});this._bind(this._itemsContainer,u.BrowserCheckUtils.isFirefox()?"DOMMouseScroll":"mousewheel",e(this,this._onMouseWheel));this._bind(this._itemsContainer,"pointerdown",this._onPointerDown.bind(this));this._bind(this._itemsContainer,"pointerleave",this._onPointerLeave.bind(this));this._bind(this._itemsContainer,"pointermove",this._onPointerMove.bind(this));this._element.append(this._itemsContainer);this._scrollContainer=$(o("div","scroller"));this._bind(this._scrollContainer,"scroll",e(this,this._onScroll));this._scrollSpacer=$(o("div","content-spacer"));this._scrollContainer.append(this._scrollSpacer);this._element.append(this._scrollContainer);this._dataSource=this._options.dataSource;this._selectedIndex=this._options.selectedIndex;this.update();this._enableMouseOver=!0;n.prototype.initialize.call(this)},t.prototype.update=function(){var t=this._dataSource.getCount(),n;this.visibleRowCount=Math.min(t,this._options.maxRowCount);this._selectedIndex>=0&&(this._selectedIndex=Math.min(this._selectedIndex,t-1));this._setVisibleBounds(this._selectedIndex);this._drawItems();n=this._itemsContainer.outerHeight();this._element.height(n);this._setupScrollbar(n)},t.prototype.scrollItemIntoView=function(n){var t=this._firstVisible;this._setVisibleBounds(n);this._firstVisible!==t?(this._drawItems(),this._updateScrollbar()):this._updateItemStyles()},t.prototype.selectNext=function(n){var t=this._dataSource.nextIndex(this._selectedIndex,n?this.visibleRowCount:1,null);return t>=0?(this.setSelectedIndex(t),this._fireSelectionChanged(),!0):!1},t.prototype.selectPrev=function(n){var t=this._dataSource.nextIndex(this._selectedIndex,-(n?this.visibleRowCount:1),null);return t>=0?(this.setSelectedIndex(t),this._fireSelectionChanged(),!0):!1},t.prototype.getSelectedIndex=function(){return this._selectedIndex},t.prototype.getSelectedItem=function(){return this._itemsContainer.children("li.selected")},t.prototype.setSelectedIndex=function(n,t){this._selectedIndex!==n&&(this._selectedIndex=n,t||this.scrollItemIntoView(n))},t.prototype._setVisibleBounds=function(n){n=n||0;n<=this._firstVisible?this._firstVisible=Math.max(0,n):n>=this._firstVisible+this.visibleRowCount&&(this._firstVisible=Math.max(0,Math.min(n,this._dataSource.getCount()-this.visibleRowCount)));this._firstVisible=Math.max(0,Math.min(this._firstVisible,this._dataSource.getCount()-this.visibleRowCount))},t.prototype._createItem=function(n,t,r){t===void 0&&(t=0);r===void 0&&(r=0);var s=this._dataSource.getItemText(n)||"",e=$(o("li",this._options.itemCss)),h=n+1-r,c=this._dataSource.getCount()-t;return e.attr({id:i.getId(),role:"option","aria-posinset":h,"aria-setsize":c}),s&&$.isFunction(this._options.getItemContents)?e.append(this._options.getItemContents(s)):e.text(s),(this._options.setTitleOnlyOnOverflow===!1||u.contentsOverflow(e[0]))&&f.RichContentTooltip.add(s,e,{useStrictTarget:!0}),e},t.prototype._drawItems=function(){var n,t,r;this._itemsContainer.empty();var e=this._options.createItem||this._createItem,i=this._firstVisible,o=Math.min(i+this.visibleRowCount,this._dataSource.getCount());for(n=i;n<o;n++)t=e.call(this,n),t.data("index",n),t.attr("data-id",n),this._itemsContainer.append(t),r=this._dataSource.getItemText(n)||"",(this._options.setTitleOnlyOnOverflow===!1||u.contentsOverflow(t))&&f.RichContentTooltip.add(r,t,{useStrictTarget:!0});this._updateItemStyles();this._updateAriaAttributes();this._enableMouseOver=!1;this._fireItemsUpdated()},t.prototype._updateItemStyles=function(){var n=this._firstVisible,t=this._selectedIndex;this._itemsContainer.children("li").each(function(i){$(this).toggleClass("selected",i+n===t)})},t.prototype._updateAriaAttributes=function(){var n=this._selectedIndex;this._itemsContainer.children("li").each(function(t){$(this).attr("aria-selected","".concat(t===n))})},t.prototype._setupScrollbar=function(n){var t=this._dataSource.getCount(),i=this.visibleRowCount<t;this._element.toggleClass("scroll",i);i&&(this._rowHeight=(n||this._itemsContainer.outerHeight())/this.visibleRowCount,this._scrollSpacer.height(this._rowHeight*t),this._updateScrollbar())},t.prototype._updateScrollbar=function(){try{this._ignoreScrollEvent=!0;this._scrollContainer.scrollTop(Math.ceil(this._rowHeight*this._firstVisible))}finally{this._ignoreScrollEvent=!1}},t.prototype._onScroll=function(){var n=this._dataSource.getCount();return this._ignoreScrollEvent||(this._firstVisible=Math.max(0,Math.min(Math.round(this._scrollContainer.scrollTop()/this._rowHeight),n-this.visibleRowCount)),this._drawItems()),!1},t.prototype._onMouseMove=function(n){var t="".concat(n.screenX,"-").concat(n.screenY);this._prevMousePos&&this._prevMousePos===t||(this._prevMousePos=t,this._enableMouseOver=!0)},t.prototype._onMouseOver=function(n){var t=this,i=$(n.target);r.delay(this,10,function(){if(t._enableMouseOver&&t._pointerDownY===null){t._enableMouseOver=!1;var n=i.closest("li");n.length&&(t._selectedIndex=n.data("index"),t._updateItemStyles())}})},t.prototype._onPointerDown=function(n){var t=n.originalEvent;t.pointerType==="touch"&&t.isPrimary&&(this._pointerDownY=t.pageY,this._pointerDownFirstVisible=this._firstVisible)},t.prototype._onPointerLeave=function(n){var t=n.originalEvent;t.pointerType==="touch"&&t.isPrimary&&(this._pointerDownY=null)},t.prototype._onPointerMove=function(n){var r=n.originalEvent,u,i,t;r.pointerType==="touch"&&r.isPrimary&&this._pointerDownY!==null&&(u=this._dataSource.getCount(),i=(this._pointerDownY-r.pageY)/this._rowHeight,i-=i%1,t=this._pointerDownFirstVisible+i,t=Math.max(t,0),t=Math.min(t,u-this.visibleRowCount),this._firstVisible!==t&&(this._firstVisible=t,this._drawItems(),this._updateScrollbar()))},t.prototype._onMouseWheel=function(n){var t=u.getWheelDelta(n);if(t!==0)return this._firstVisible=Math.max(0,Math.min(this._firstVisible+(t>0?-1:1),this._dataSource.getCount()-this.visibleRowCount)),this._drawItems(),this._updateScrollbar(),!1},t.prototype._onClick=function(n){var r=$(n.target),t=r.closest("li"),i;if(t.length){if(i=t.data("index"),this._options.itemClick&&this._options.itemClick.call(this,n,i,r,t)===!1)return!1;this.setSelectedIndex(i);this._updateItemStyles();this._fireSelectionChanged(!0)}},t.prototype._fireSelectionChanged=function(n){this._options.selectionChange&&this._options.selectionChange.call(this,this._selectedIndex,n)},t.prototype._fireItemsUpdated=function(){this._options.itemsUpdated&&this._options.itemsUpdated.call(this)},t}(i.BaseControl);t.VirtualizingListView=s});

define("VSS/Controls/Combos",["require","exports","VSS/Controls","VSS/Controls/PopupContent","VSS/Utils/Culture","VSS/Diag","VSS/Events/Services","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/String","VSS/Utils/UI","VSS/Controls/Validation","VSS/Controls/Virtualization","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function ut(n,t){var i=$.extend({},n);return t&&$.each(t,function(n,t){delete i[t]}),i}var ft,d,g,nt,yt,et,w,tt,it,vt,b,ot,st,ht,ct,lt,at;Object.defineProperty(t,"__esModule",{value:!0});t.ComboMultiValueBehavior=t.ComboMultiValueDropPopup=t.DatePicker=t.ComboDateBehavior=t.ComboDateDropPopup=t.DatePanel=t.ComboControlValidator=t.ComboListBehavior=t.ComboListDropPopup=t.Combo=t.ComboO=t.ComboTypeOptionsConstants=t.BaseComboDropPopup=t.BaseComboBehavior=t.ListDataSource=t.extendWithout=void 0;var p=s.delegate,k=l.domElem,y=l.KeyCode,rt;(function(n){function t(t){var i=$("<div/>").attr("id",n._PROBE_ID).css("position","absolute").css("left","-50000px").css("top","-50000px").css("width","9em").css("height","18ex").css("overflow","auto").appendTo(t);return $("<div><\/div>").css("width","3in").css("height","36ex").appendTo(i),i}function i(t){t=t||$(document.body);var i=t.children("#"+n._PROBE_ID);return i.length===0&&(i=n._createProbe(t)),i}function r(){return n._getProbe().width()/9}function u(){return n._getProbe().height()/18}function f(){return $("div",n._getProbe()).width()/3}function e(t){var i=n._getProbe(t);return i.width()-i[0].clientWidth}function o(t){var i=n._getProbe(t);return i.height()-i[0].clientHeight}function s(t){t=t.toLowerCase();var i=parseInt(t,10);return t.indexOf("px")>0?i=Math.round(parseFloat(t)):t.indexOf("em")>0?i=Math.round(parseFloat(t)*n.getUnitEm()):t.indexOf("ex")>0?i=Math.round(parseFloat(t)*n.getUnitEx()):t.indexOf("in")>0?i=Math.round(parseFloat(t)*n.getUnitIn()):t.indexOf("mm")>0?i=Math.round(parseFloat(t)*n.getUnitIn()/25.4):t.indexOf("cm")>0&&(i=Math.round(parseFloat(t)*n.getUnitIn()/2.54)),i}n._PROBE_ID="tfs-measurement-probe";n._createProbe=t;n._getProbe=i;n.getUnitEm=r;n.getUnitEx=u;n.getUnitIn=f;n.getScrollbarWidth=e;n.getScrollbarHeight=o;n.getUnitAsPixel=s})(rt||(rt={}));t.extendWithout=ut;ft=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(i.BaseDataSource);t.ListDataSource=ft;d=function(){function n(n,t){this.combo=n;this._options=t||{};this._onForceHideDropPopupDelegate=p(this,this.onForceHideDropPopup);this._onParentsScrollDelegate=p(this,this.onParentsScroll);this._onWheelDelegate=function(){}}return n.prototype.initialize=function(){this._options.source&&this.setSource(this._options.source)},n.prototype.dispose=function(){this.hideDropPopup()},n.prototype.setMode=function(n){this._options.mode=n},n.prototype.canType=function(){return!0},n.prototype.getAriaAutocomplete=function(){return this._options.autoComplete===!1?"none":"both"},n.prototype.getAriaDescription=function(){return null},n.prototype.getValue=function(){return null},n.prototype.getDropPopup=function(){return this._dropPopup},n.prototype.getDataSource=function(){return this._dataSource},n.prototype.getDropOptions=function(){return $.extend({combo:this.combo,anchor:this.combo.getElement(),host:this.combo.getElement(),width:this.getDropWidth(),dropElementAlign:"left-top",dropBaseAlign:"left-bottom",dataSource:this._dataSource,setTitleOnlyOnOverflow:this._options.setTitleOnlyOnOverflow},this._options.dropOptions)},n.prototype.getDropWidth=function(){return this.combo.getElement().innerWidth()},n.prototype.showDropPopup=function(){var t=this._options.dropControlType,n;return(this._dropPopup&&this.hideDropPopup(),t)?(n=this.getDropOptions(),n.width=this.getDropWidth(),this._attachGlobalEvents(),this._dropPopup=i.BaseControl.createIn(t,n.host||$(document.body),n),this._options.dropShow&&this._options.dropShow(this._dropPopup),!0):!1},n.prototype.hideDropPopup=function(){if(this._dropPopup){if(this._detachGlobalEvents(),!this._options.dropHide||this._options.dropHide(this._dropPopup))return this._dropPopup.dispose(),this._dropPopup=null,!0;this._dropPopup=null}return!1},n.prototype.toggleDropDown=function(){this._dropPopup?this.hideDropPopup():this.showDropPopup()},n.prototype.isDropVisible=function(){return Boolean(this._dropPopup)},n.prototype.setSource=function(n){this._dataSource&&this._dataSource.setSource(n)},n.prototype.getSelectedIndex=function(){return-1},n.prototype.setSelectedIndex=function(){},n.prototype.getText=function(){return this.combo.getInputText()},n.prototype.setText=function(n,t){typeof n!="undefined"&&this.combo.setInputText(n,t)},n.prototype.upKey=function(n){if(n.altKey)return this.isDropVisible()&&this.hideDropPopup(),!1},n.prototype.downKey=function(n){if(n.altKey)return this.isDropVisible()||this.showDropPopup(),!1},n.prototype.pageUpKey=function(){},n.prototype.pageDownKey=function(){},n.prototype.leftKey=function(){},n.prototype.rightKey=function(){},n.prototype.keyDown=function(){},n.prototype.keyPress=function(){},n.prototype.keyUp=function(){},n.prototype.onForceHideDropPopup=function(){this.hideDropPopup()},n.prototype.onParentsScroll=function(n){if(n&&n.target){var t=$(n.target);if(t.css("overflow-x")==="hidden"&&t.css("overflow-y")==="hidden"&&t.css("overflow")==="hidden"){n.stopPropagation();return}}this.onForceHideDropPopup(n)},n.prototype.getItemText=function(n,t){return $.isFunction(this._options.getItemText)?this._options.getItemText(this._dataSource.getItem(n,!0)):this._dataSource.getItemText(n,t)},n.prototype._attachGlobalEvents=function(){this.combo._bind(this.combo.getElement().parents(),"scroll resize",this._onParentsScrollDelegate);this.combo._bind(this.combo.getElement().parents(),"wheel",this._onWheelDelegate);e.getService().attachEvent("dialog-move",this._onForceHideDropPopupDelegate)},n.prototype._detachGlobalEvents=function(){this.combo._unbind(this.combo.getElement().parents(),"scroll resize",this._onForceHideDropPopupDelegate);this.combo._unbind(this.combo.getElement().parents(),"wheel",this._onWheelDelegate);e.getService().detachEvent("dialog-move",this._onForceHideDropPopupDelegate)},n}();t.BaseComboBehavior=d;g=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.combo=i._options.combo,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"combo-drop-popup"},t))},t.prototype.initialize=function(){this._bind("mousedown",p(this,this._onMouseDown));this.setPosition();this.getElement().attr("title","");n.prototype.initialize.call(this)},t.prototype.setPosition=function(){l.Positioning.position(this.getElement(),this._options.anchor,{elementAlign:this._options.dropElementAlign,baseAlign:this._options.dropBaseAlign});this.getElement().css("opacity","1")},t.prototype.getSelectedIndex=function(){return-1},t.prototype.getSelectedValue=function(){return""},t.prototype.getSelectedItem=function(){return undefined},t.prototype.setSelectedValue=function(){},t.prototype.selectNext=function(){return!1},t.prototype.selectPrev=function(){return!1},t.prototype.update=function(){},t.prototype.dispose=function(){var i=this,t;if(!this.isDisposed())if(t=this.getElement(),t[0]&&!t[0].style.transition)n.prototype.dispose.call(this);else this.getElement().css("opacity","0").on("transitionend",function(){n.prototype.dispose.call(i)})},t.prototype._onMouseDown=function(){this.combo.blockBlur()},t}(i.BaseControl);t.BaseComboDropPopup=g;nt={},function(n){n.ListType="list";n.DateTimeType="date-time";n.MultiValueType="multi-value";n.TreeType="tree";n.TreeSearchType="treesearch"}(yt=t.ComboTypeOptionsConstants||(t.ComboTypeOptionsConstants={}));et=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._currentText="",t}return __extends(t,n),t.registerBehavior=function(n,t){nt[n]=t},t.attachBehavior=function(n,t){var i=nt[n._options.type];return i=n._options.type?nt[n._options.type]:d,i?new i(n,t):null},t.prototype.focus=function(){this._input.focus()},t.prototype.initializeOptions=function(t){var i=this,r,u;t=$.extend({allowEdit:!0,type:"list",treeLevel:1,mode:"drop",dropWidth:"dynamic",dropCount:8,invalidCss:"invalid",disabledCss:"disabled",dropButtonHoverCss:"hover",inputCss:undefined,coreCssClass:"combo input-text-box",enabled:!0},t);r=t.dropHide;t.dropHide=function(n){var t=!0;return r&&(t=r(n)),t&&(i.updateAriaAttributes(!1),s.delay(i,1,i._updateTooltip)),t};u=t.dropShow;t.dropShow=function(n){u&&u(n);s.delay(i,1,i._updateTooltip);i.updateAriaAttributes(!0)};n.prototype.initializeOptions.call(this,t)},t.prototype._dispose=function(){this._disposeBehavior();n.prototype._dispose.call(this)},t.prototype._disposeBehavior=function(){this._behavior&&(typeof this._behavior.dispose=="function"&&this._behavior.dispose(),this._behavior=null)},t.prototype._createIn=function(t){n.prototype._createIn.call(this,t);this._input=$(k("input")).attr("type","text");this._options.id&&this._input.attr("id",this._options.id+"_txt");typeof this._options.value!="undefined"&&(this._input.val(this._options.value),this._currentText=this.getInputText());this._decorate()},t.prototype._enhance=function(n){this._createElement();this._input=n;n.after(this.getElement());this._decorate();this._currentText=this.getInputText()},t.prototype.initialize=function(){this._ensureBehavior();n.prototype.initialize.call(this)},t.prototype.getBehavior=function(){return this._behavior},t.prototype.getText=function(){return this._behavior.getText()},t.prototype.setText=function(n,t){this._behavior&&this._behavior.setText(n,t)},t.prototype.getDropButton=function(){return this._dropButton},t.prototype.getInput=function(){return this._input},t.prototype.getInputText=function(){return this._input.val()},t.prototype._updateTooltip=function(){!this._input||!this._input[0]||this._behavior&&this._behavior.isDropVisible()?this._tooltip&&this._tooltip.disable():(this._tooltip||(this._tooltip=r.RichContentTooltip.addIfOverflow("",this._input[0])),this._tooltip.enable(),this._tooltip.setTextContent(this._input[0].value))},t.prototype.setInputText=function(n,t){this._input.val()!==n&&this._input.val(n);this._updateTooltip();t?this.fireChangeIfNecessary(n):this._currentText=n;this.updateAriaActiveDescendant();this._updateStyles()},t.prototype.getSelectedIndex=function(){return this._behavior.getSelectedIndex()},t.prototype.setSelectedIndex=function(n,t){this._behavior.setSelectedIndex(n,t)},t.prototype.getValue=function(){return this._behavior.getValue()},t.prototype.fireChangeIfNecessary=function(n){return typeof n=="undefined"&&(n=this.getText()),this._currentText!==n?(this._currentText=n,this._updateTooltip(),this._fireChange()):void 0},t.prototype.toggleDropDown=function(){this._behavior.toggleDropDown();this._input.focus();var n=this.getElement();n&&this._fire("dropDownToggled",{isDropVisible:this.isDropVisible(),target:n})},t.prototype.showDropPopup=function(){this._behavior.showDropPopup();this._input.focus()},t.prototype.hideDropPopup=function(){return this._behavior.hideDropPopup()},t.prototype.isDropVisible=function(){return this._behavior?this._behavior.isDropVisible():!1},t.prototype.isBlockingBlur=function(){return this._blockBlur},t.prototype.blockBlur=function(){this._blockBlur=!0;this.delayExecute("blockBlur",200,!0,function(){this.cancelBlockBlur()})},t.prototype.cancelBlockBlur=function(){this._blockBlur=!1;this.cancelDelayedFunction("blockBlur")},t.prototype._onInputKeyDown=function(n){if(this._options.onKeyDown&&this._options.onKeyDown.call(this,n),this._behavior.keyDown(n)===!1)return!1;switch(n.keyCode){case y.BACKSPACE:if(!this._options.allowEdit)return n.stopPropagation(),n.preventDefault(),!1;break;case y.PAGE_UP:return this._options.enabled?this._behavior.pageUpKey(n):!1;case y.UP:return this._options.enabled?this._behavior.upKey(n):!1;case y.PAGE_DOWN:return this._options.enabled?this._behavior.pageDownKey(n):!1;case y.DOWN:return this._options.enabled?this._behavior.downKey(n):!1;case y.LEFT:return this._options.enabled?this._behavior.leftKey(n):!1;case y.RIGHT:return this._options.enabled?this._behavior.rightKey(n):!1;case y.TAB:this.cancelBlockBlur();break;case y.ENTER:case y.ESCAPE:if(this.fireChangeIfNecessary(),this.hideDropPopup())return!1;break;default:if(!this._behavior.canType())return!1}},t.prototype.setTextSelection=function(n){var t=this._input[0],i;t.setSelectionRange?t.setSelectionRange(n,t.value.length):t.createTextRange&&(i=t.createTextRange(),i.moveStart("character",n),i.select())},t.prototype.setSource=function(n){this._behavior&&this._behavior.setSource(n)},t.prototype.getEnabled=function(){return this._options.enabled===!0},t.prototype.setEnabled=function(n){this._options.enabled=n===!0;this._updateStyles()},t.prototype.getMode=function(){return this._options.mode},t.prototype.setMode=function(n){this._options.mode=n;this._behavior.setMode(n);this._updateStyles()},t.prototype.setType=function(n){this._options.type!==n&&(this.hideDropPopup(),this.getElement().removeClass(this._options.type),this._options.type=n,this._ensureBehavior(),this._updateStyles())},t.prototype.getComboType=function(){return this._options?this._options.type:null},t.prototype.setInvalid=function(n){if(this.getElement().toggleClass(this._options.invalidCss,n),this._input.attr(t.invalidAttribute,n?"true":"false"),this._options.errorMessage&&(this._errorAriaDescription&&this._errorAriaDescription.remove(),n)){var r=String(i.getId());this._errorAriaDescription=$("<div />").attr("id",r).attr("role","alert").hide().text(this._options.errorMessage).appendTo(this._element);this._input.attr("aria-describedby",r)}},t.prototype.isValid=function(){return c.ignoreCaseComparer(this._input.attr(t.invalidAttribute),"true")!==0},t.prototype._ensureBehavior=function(){var n,t;if(this._disposeBehavior(),this._behavior=w.attachBehavior(this,this._options),!this._behavior)throw new Error(c.format("Unsupported combo behavior '{0}'.",this._options.type));this._behavior.initialize();n=this._behavior.getAriaDescription();n?(this._ariaDescription&&this._ariaDescription.remove(),t=String(i.getId()),this._ariaDescription=$("<div />").attr("id",t).hide().text(n).appendTo(this._element),this._input.attr("aria-describedby",t)):this._input.attr("aria-describedby",null);this._input.attr("aria-autocomplete",this._options.mode!="text"?this._behavior.getAriaAutocomplete():null)},t.prototype._decorate=function(){var f=this,u=this,t=this._options,i=this.getElement(),n=this._input,r;i.val=function(){return arguments.length?u.setText(arguments[0],!1):u.getText()};n.attr("autocomplete","off");this._setAriaAttributes();this._bind("mousedown",p(this,this._onMouseDown));this._bind(n,"keydown",p(this,this._onInputKeyDown));this._bind(n,"keypress",p(this,this._onInputKeyPress));this._bind(n,"keyup",p(this,this._onInputKeyUp));this._bind(n,"focus",p(this,this._onInputFocus));this._bind(n,"blur",p(this,this._onInputBlur));this._bind(n,"click",p(this,this._onInputClick));this._bind(n,"focus",function(){f.getEnabled()&&i.addClass("focus")});this._bind(n,"blur",function(){i.removeClass("focus")});t.allowEdit||(n.attr("readonly","readonly"),i.addClass("no-edit"));t.inputCss&&n.addClass(t.inputCss);t.placeholderText&&n.attr("placeholder",t.placeholderText);n.bind("change input",function(){return u.fireChangeIfNecessary()});this._input.attr("title","");this._updateTooltip();t.noDropButton&&i.addClass("no-background");r=$(k("div","wrap"));r.append(n);this._options.label&&n.attr("aria-label",this._options.label);this._options.required&&n.prop("required",!0);t.iconCss&&($(k("div","preWrapIcon")).addClass(t.iconCss).appendTo(i),r.addClass("withIcon"));i.append(r);this._dropButton=$(k("div","drop"));this._dropButton.attr({role:"button"});this._bind(this._dropButton,"mouseenter",function(){$(this).addClass(t.dropButtonHoverCss)});this._bind(this._dropButton,"mouseleave",function(){$(this).removeClass(t.dropButtonHoverCss)});this._bind(this._dropButton,"click",p(this,this._onDropButtonClick));i.append(this._dropButton);this._updateStyles()},t.prototype._setAriaAttributes=function(){this._input&&n.prototype._setAriaAttributes.call(this,this._input)},t.prototype._updateStyles=function(){var t=this.getElement(),n=this._input,i,r;t.addClass(this._options.type);this._dropButton.removeClass(c.localeIgnoreCaseComparer(this._options.type,"date-time")===0?"bowtie-icon bowtie-chevron-down-light":"bowtie-icon bowtie-calendar");this._dropButton.addClass(c.localeIgnoreCaseComparer(this._options.type,"date-time")===0?"bowtie-icon bowtie-calendar":"bowtie-icon bowtie-chevron-down-light");this._dropButton.attr("aria-label",c.localeIgnoreCaseComparer(this._options.type,"date-time")===0?o.CalendarComboExpandButtonLabel:o.ComboExpandButtonLabel);i=this._options.enabled;i&&this._options.allowEdit?n.removeAttr("readonly"):n.attr("readonly","readonly");n.toggleClass(this._options.disabledCss,!i);t.children("div").toggleClass(this._options.disabledCss,!i);i?(t.removeAttr("readonly"),n.removeAttr("disabled"),this._options.isFocusableWhenDisabled||(n.removeAttr("tabindex"),n.removeAttr("aria-disabled"))):(this._currentText===""?(n.removeAttr("readonly"),n.attr("disabled","disabled")):(n.removeAttr("disabled"),n.attr("readonly","readonly")),t.attr("readonly","readonly"),this._options.isFocusableWhenDisabled||n.attr({tabindex:-1,"aria-disabled":!0}));r=i&&this._options.mode==="drop";t.toggleClass("drop",r&&!this._options.noDropButton);t.toggleClass("text",!r);this._options.mode==="text"?this._input.attr({"aria-autocomplete":null,"aria-expanded":null,role:null}):(this._input.attr({"aria-expanded":"false"}),this._input.attr("role")!=="combobox"&&this._input.attr({role:"combobox"}),this._behavior&&this._input.attr("aria-autocomplete",this._behavior.getAriaAutocomplete()))},t.prototype._onDropButtonClick=function(){return this.toggleDropDown(),!1},t.prototype._onInputClick=function(){return!this._options.allowEdit&&this._options.enabled&&this.toggleDropDown(),!1},t.prototype._onInputFocus=function(){if(!this._onInputFocusInProgress)try{this._onInputFocusInProgress=!0;this._blockBlur||this._options.disableTextSelectOnFocus||this._input.select();$.isFunction(this._options.focus)&&this._options.focus.apply(this,arguments)}finally{this._onInputFocusInProgress=!1}},t.prototype._onInputBlur=function(){this._disposed||(this.fireChangeIfNecessary(),this._blockBlur?this._input.focus(10):this.hideDropPopup(),$.isFunction(this._options.blur)&&this._options.blur.apply(this,arguments))},t.prototype._onMouseDown=function(){this.blockBlur()},t.prototype._onInputKeyPress=function(n){return this._behavior.keyPress(n)},t.prototype._onInputKeyUp=function(n){var i=this._behavior.keyUp(n),t;return this.fireChangeIfNecessary(),t=this._behavior&&this._behavior.getDropPopup(),t&&t.setPosition(),i},t.prototype.updateAriaAttributes=function(n){if(n===void 0&&(n=this.isDropVisible()),n){var t=this._behavior.getDropPopup();this._input.attr({"aria-expanded":"true","aria-owns":t?t.getId():null});this.updateAriaActiveDescendant()}else this._input.attr({"aria-expanded":"false","aria-owns":null,"aria-activedescendant":null})},t.prototype.updateAriaActiveDescendant=function(){var n=this._behavior.getDropPopup(),t=n&&n.getSelectedItem();this._input.attr("aria-activedescendant",t?t.attr("id"):null)},t.invalidAttribute="aria-invalid",t.enhancementTypeName="tfs.combo",t}(i.Control);t.ComboO=et;w=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(et);t.Combo=w;i.Enhancement.registerJQueryWidget(w,"comboList",{type:"list"});i.Enhancement.registerJQueryWidget(w,"comboTree",{type:"tree"});tt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({itemCss:""},t))},t.prototype.initialize=function(){this._dataSource=this._options.dataSource;this._initializeVirtualization();n.prototype.initialize.call(this)},t.prototype._initializeVirtualization=function(){var r=this,n=$.extend(ut(this._options,["coreCssClass"]),{maxRowCount:this._options.dropCount,itemsUpdated:function(){r.combo.updateAriaAttributes()}}),t=this._options.combo._enhancementOptions.ariaAttributes;t&&t.label&&(n.ariaAttributes||(n.ariaAttributes={}),n.ariaAttributes.label=t.label);this.virtualizingListView=i.Enhancement.enhance(v.VirtualizingListView,this.getElement(),n)},t.prototype.selectPrev=function(n){return this.virtualizingListView.selectPrev(n)},t.prototype.selectNext=function(n){return this.virtualizingListView.selectNext(n)},t.prototype.getSelectedIndex=function(){return this.virtualizingListView.getSelectedIndex()},t.prototype.getSelectedValue=function(){return this._dataSource.getItemText(this.virtualizingListView.getSelectedIndex())},t.prototype.setSelectedValue=function(n){var t=n?this._dataSource.getItemIndex(n):-1;this.virtualizingListView.setSelectedIndex(t)},t.prototype.getSelectedItem=function(){return this.virtualizingListView.getSelectedItem()},t.prototype.getDataSource=function(){return this._dataSource},t.prototype.update=function(){this.virtualizingListView.update()},t}(g);t.ComboListDropPopup=tt;it=function(n){function t(t,i){return n.call(this,t,$.extend({dropControlType:tt},i))||this}return __extends(t,n),t.prototype.initialize=function(){this._dataSource=this._createDataSource();n.prototype.initialize.call(this)},t.prototype.setSource=function(t){n.prototype.setSource.call(this,t);this._maxItemLength=null},t.prototype.getDropOptions=function(){return $.extend(n.prototype.getDropOptions.call(this),{selectedIndex:this._dataSource.getItemIndex(this.combo.getText()),selectionChange:p(this,this._dropSelectionChanged)})},t.prototype.getValue=function(){return this.getText()},t.prototype.getMaxItemLength=function(){var n;if(this._maxItemLength===null){var r=this._dataSource.getCount(!0),i=void 0,t=0;for(n=0;n<r;n++)i=this.getItemText(n,!0),t=Math.max(i.length,t);this._maxItemLength=t}return this._maxItemLength},t.prototype.getDropWidth=function(){var i=n.prototype.getDropWidth.call(this),t;return this._options.fixDropWidth?i:(t=this.getMaxItemLength()*rt.getUnitEx(),t*=1.2,this._options.maxAutoExpandDropWidth!=null&&t>i?Math.min(Math.max(this._options.maxAutoExpandDropWidth,i),t):Math.max(i,t))},t.prototype.getSelectedIndex=function(n,t){return this._dataSource.getItemIndex(n||this.getText(),!1,t)},t.prototype.setSelectedIndex=function(n,t){this._setSelectedIndex(n,t)},t.prototype.setText=function(t,i){var r=t!==this.getText(),u=this.getDropPopup();n.prototype.setText.call(this,t,i);i&&r&&this._options.indexChanged&&this._options.indexChanged.call(this,this.getSelectedIndex(t,!0));u&&r&&u.update()},t.prototype.upKey=function(t){if(this._options.mode!=="text")return n.prototype.upKey.call(this,t)===!1?!1:this.selectPrev()},t.prototype.downKey=function(t){if(this._options.mode!=="text")return n.prototype.downKey.call(this,t)===!1?!1:this.selectNext()},t.prototype.pageUpKey=function(t){if(this._options.mode!=="text")return n.prototype.pageUpKey.call(this,t)===!1?!1:this.selectPrev(!0)},t.prototype.pageDownKey=function(t){if(this._options.mode!=="text")return n.prototype.pageDownKey.call(this,t)===!1?!1:this.selectNext(!0)},t.prototype.keyDown=function(n){if(this._options.mode!=="text")if(n.keyCode===229)this._enableAutoFill=!1;else if(n.ctrlKey&&(n.keyCode===89||n.keyCode===90))return!1},t.prototype.keyPress=function(n){if(this._options.mode!=="text")return n.metaKey||(this._enableAutoFill=typeof this._options.autoComplete=="undefined"?!0:this._options.autoComplete),!0},t.prototype.keyUp=function(n){var t;if(this._options.mode!=="text")return t=n.keyCode||n.charCode,this._options.enableFilter===!0&&(t>=47||t===y.SPACE||t===y.BACKSPACE||t===y.DELETE)&&this._applyFilter(),this._enableAutoFill&&((t>=47||t===y.SPACE)&&this._tryAutoFill(),this._enableAutoFill=!1),this._options.keyUp&&this._options.keyUp.call(this),!0},t.prototype.selectPrev=function(n){var i=this.getDropPopup(),t;if(i){if(i.selectPrev(n))return!1}else if(!n&&(t=this._dataSource.nextIndex(this.getSelectedIndex(null,!0),-1,!0),t>=0))return this._setSelectedIndex(t,!0),!1},t.prototype.selectNext=function(n){var i=this.getDropPopup(),t;if(i){if(i.selectNext(n))return!1}else if(!n&&(t=this._dataSource.nextIndex(this.getSelectedIndex(null,!0),1,!0),t>=0))return this._setSelectedIndex(t,!0),!1},t.prototype._createDataSource=function(){return new ft(this._options)},t.prototype._dropSelectionChanged=function(n,t){this.setText(this.getItemText(n,!1),!0);t&&this.hideDropPopup()},t.prototype._setSelectedIndex=function(n,t){this.setText(this.getItemText(n,!0),t)},t.prototype._tryAutoFill=function(){var n,t,i,r;f.logTracePoint("Combo._tryAutoFill.start");t=this.combo.getText();i=this._dataSource.getItemIndex(t,!0,!0);i>=0&&(n=this.getItemText(i,!0));n&&(this.combo.setText(n,!0),this.combo.setTextSelection(t.length));r=this.getDropPopup();r&&r.setSelectedValue(n);f.logTracePoint("Combo._tryAutoFill.complete")},t.prototype._applyFilter=function(){f.logTracePoint("Combo._applyFilter.start");this._filterData(this.combo.getText());var n=this.getDropPopup();n&&n.update();f.logTracePoint("Combo._applyFilter.complete")},t.prototype._filterData=function(n){var r=this,t,i;n?(t=this._dataSource.getItemIndexes(n,!0,!0),i=t.map(function(n){return r._dataSource.getItem(n,!0)}),this._dataSource.setItems(i,this._dataSource.getItems(!0))):this._dataSource.setItems(this._dataSource.getItems(!0))},t}(d);t.ComboListBehavior=it;w.registerBehavior("list",it);vt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value is not allowed!"},t))},t.prototype.isValid=function(){var t=$.trim(this.getValue()),n;return t&&(n=i.Enhancement.getInstance(w,this.getElement()),n)?n.getSelectedIndex()>=0:!0},t}(a.BaseValidator);t.ComboControlValidator=vt;b=function(){function n(n){this._setDate(n||new Date)}return n.toGregorian=function(n,t,i){var r=u.getDateTimeFormat().Calendar.convert;return r?r.toGregorian(n,t,i):new Date(n,t,i)},n.fromGregorian=function(n){var t=u.getDateTimeFormat().Calendar.convert;if(t)return t.fromGregorian(n)},n.prototype.getBaseDate=function(){return this._baseDate},n.prototype.setTime=function(n){n=n instanceof Date?n:new Date(n);this._setDate(n)},n.prototype.getTime=function(){return this.getBaseDate().getTime()},n.prototype.getDay=function(){return this.getBaseDate().getDay()},n.prototype.getFullYear=function(n){return n===!0&&this._convertedDate?this._convertedDate[0]:this.getBaseDate().getFullYear()},n.prototype.getMonth=function(n){return n===!0&&this._convertedDate?this._convertedDate[1]:this.getBaseDate().getMonth()},n.prototype.getDate=function(n){return n===!0&&this._convertedDate?this._convertedDate[2]:this.getBaseDate().getDate()},n.prototype.jumpToMonthStart=function(){var i=this.getFullYear(),r=this.getMonth(),u=this.getDate(),t=new n(new Date(i,r,u,12));return this.setTime(t.getTime()-n.DAY_IN_MILLISECONDS*(t.getDate(!0)-1)),this},n.prototype.jumpToWeekStart=function(){var t=u.getDateTimeFormat().FirstDayOfWeek,i=(n.DAYS_IN_A_WEEK-t+this.getDay())%n.DAYS_IN_A_WEEK;return this.setTime(this.getTime()-i*n.DAY_IN_MILLISECONDS),this},n.prototype.nextDay=function(){return this.setTime(this.getTime()+n.DAY_IN_MILLISECONDS),this},n.prototype.prevMonth=function(){return this._increment(0,-1),this},n.prototype.nextMonth=function(){return this._increment(0,1),this},n.prototype.prevYear=function(){return this._increment(-1,0),this},n.prototype.nextYear=function(){return this._increment(1,0),this},n.prototype.equals=function(n){return this.getFullYear()===n.getFullYear()&&this.getMonth()===n.getMonth()&&this.getDate()===n.getDate()},n.prototype._setDate=function(t){this._baseDate=t;this._convertedDate=n.fromGregorian(t)},n.prototype._increment=function(t,i){var r=this.getMonth(!0),u=this.getFullYear(!0);i>0?++r>11&&(r=0,u++):i<0&&--r<0&&(r=11,u--);u+=t;this.setTime(n.toGregorian(u,r,1))},n.DAY_IN_MILLISECONDS=864e5,n.DAYS_IN_A_WEEK=7,n}();ot=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"date-panel",canTakeFocus:!1},t))},t.prototype.initialize=function(){this._selectedDate=this._options.selectedDate;this._date=this._selectedDate||h.getNowInUserTimeZone();this._bind("click",p(this,this._onClick));this._bind("keydown",p(this,this._onKeyDown));this._draw(this._date,"prev-month");n.prototype.initialize.call(this)},t.prototype.prevMonth=function(){var n=new b(this._date);this._date=n.prevMonth().getBaseDate();this._draw(this._date,"prev-month")},t.prototype.nextMonth=function(){var n=new b(this._date);this._date=n.nextMonth().getBaseDate();this._draw(this._date,"next-month")},t.prototype.prevYear=function(){var n=new b(this._date);this._date=n.prevYear().getBaseDate();this._draw(this._date,"prev-year")},t.prototype.nextYear=function(){var n=new b(this._date);this._date=n.nextYear().getBaseDate();this._draw(this._date,"next-year")},t.prototype.selectDate=function(n){this.setSelectedDate(n);this._options.onSelectDate&&this._options.onSelectDate()},t.prototype.setSelectedDate=function(n){this._selectedDate=this._date=n;this._draw(this._selectedDate);this._fireChange()},t.prototype.getSelectedDate=function(){return this._selectedDate},t.prototype.getSelectedItem=function(){return this._$selectedItem},t.prototype._draw=function(n,t){var f=this.getElement(),e=this._options.todayFormat||"d",u=$("<div />"),i=$("<div />").addClass("quick-nav flex-row"),r;$("<a />").addClass("prev-month").attr("href","#").attr("tabindex",-1).append($("<span/>").addClass("icon icon-drop-left")).appendTo($("<div/>").addClass("prev-month").appendTo(i));r=$("<div/>").addClass("month-year").appendTo(i);r.text(h.localeFormat(n,"y",!0));$("<a />").addClass("next-month").attr("href","#").attr("tabindex",-1).append($("<span/>").addClass("icon icon-drop-right")).appendTo($("<div/>").addClass("next-month").appendTo(i));u.append(i);i=$("<div/>");r=$("<div />").addClass("days");r.append(this._drawCalendarTable(n));i.append(r);u.append(i);i=$("<div />");r=$("<div />").addClass("legend");$("<span/>").addClass("today").appendTo(r);$("<a />").addClass("today").attr("href","#").attr("tabindex",-1).append(c.format(o.TodayTitle,h.localeFormat(new Date,e))).appendTo(r);i.append(r);u.append(i);i=$("<div />");r=$("<div />").addClass("note").text(c.format(o.DatePanel_ControlsHelpLabel,"pageup","pagedown","t")).appendTo(i);u.append(i);f.empty().append(u);t&&this._options.canTakeFocus&&$("."+t).focus()},t.prototype._drawCalendarTable=function(n){var a=h.getTodayInUserTimeZone(),o=u.getDateTimeFormat(),r=new b(n),v=r.getMonth(!0),s,e,c,f,l,t;for(r.jumpToMonthStart(),r.jumpToWeekStart(),s=$("<table />").attr("cellSpacing",0).attr("border",0),e=$("<tr />").addClass("day-names"),f=0;f<7;f++)t=$("<th />"),c=(o.FirstDayOfWeek+f)%b.DAYS_IN_A_WEEK,t.text(o.ShortestDayNames[c]),t.attr("aria-label",o.DayNames[c]),e.append(t);for(s.append(e),f=0;f<6;f++){for(e=$("<tr />").addClass("days"),l=0;l<b.DAYS_IN_A_WEEK;l++)t=$("<td />").addClass("date-cell").attr({id:i.getId(),"aria-label":h.localeFormat(r.getBaseDate(),o.LongDatePattern,!0)}),$("<span />").addClass("date").attr("href","#").attr("tabindex",-1).data("date",r.getTime()).text(r.getDate(!0)).appendTo(t),r.getMonth(!0)!==v&&t.addClass("other-month"),r.equals(a)&&t.addClass("today"),this._selectedDate instanceof Date?r.equals(this._selectedDate)&&(t.addClass("selected"),this._options.canTakeFocus&&t.focus(),this._$selectedItem=t):r.equals(n)&&(this._options.canTakeFocus&&t.focus(),t.addClass("selected")),e.append(t),r.nextDay();s.append(e)}return s},t.prototype._onKeyDown=function(n){return n.keyCode===y.ENTER||n.keyCode===y.SPACE?this._onClick(n):n.keyCode===y.LEFT||n.keyCode===y.RIGHT||n.keyCode===y.UP||n.keyCode===y.DOWN?!1:void 0},t.prototype._onClick=function(n){var r=$(n.target),t=r.closest("a"),i,u;return t.length?(t.hasClass("prev-month")?this.prevMonth():t.hasClass("next-month")?this.nextMonth():t.hasClass("prev-year")?this.prevYear():t.hasClass("next-year")?this.nextYear():t.hasClass("today")&&this.selectDate(h.getNowInUserTimeZone()),!1):(i=r.closest("span"),i.length)?(i.hasClass("date")&&this.selectDate(new Date(i.data("date"))),!1):(u=r.closest(".date-cell"),u.length)?(this.selectDate(new Date(u.find("span").data("date"))),!1):void 0},t}(i.BaseControl);t.DatePanel=ot;st=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initialize=function(){this._selectedDate=this._options.selectedDate;this._datePanel=i.BaseControl.createIn(ot,this.getElement(),$.extend(ut(this._options,["coreCssClass"]),{change:p(this,this._onChange)}));n.prototype.initialize.call(this)},t.prototype.getSelectedDate=function(){return this._selectedDate},t.prototype.getSelectedItem=function(){return this._datePanel.getSelectedItem()},t.prototype.setSelectedDate=function(n){this._selectedDate=n;this._datePanel&&this._datePanel.setSelectedDate(n)},t.prototype._onChange=function(){return this._selectedDate=this._datePanel.getSelectedDate(),this._fireChange(),!1},t}(g);t.ComboDateDropPopup=st;ht=function(n){function t(t,i){return n.call(this,t,$.extend({dropControlType:st,dateTimeFormat:u.getDateTimeFormat().ShortDatePattern},i))||this}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._timeValue=this._options.defaultTimeOfDay||0},t.prototype.canType=function(){return!this.isDropVisible()},t.prototype.getAriaAutocomplete=function(){return"none"},t.prototype.getAriaDescription=function(){return c.format(o.ComboDateScreenReaderHelp,"page up","Page down","t")},t.prototype.getValue=function(){return this.getSelectedDate()},t.prototype.getDropOptions=function(){var i=this,t=this.getSelectedDate();return!t&&this._options.getInitialDate&&(t=this._options.getInitialDate(this.combo)),$.extend(n.prototype.getDropOptions.call(this),{dropElementAlign:"right-top",dropBaseAlign:"right-bottom",selectedDate:t,onSelectDate:function(){i.hideDropPopup()},change:p(this,this._onChange)})},t.prototype.getDropWidth=function(){return undefined},t.prototype.getSelectedDate=function(){var i=$.trim(this.combo.getText()),n=null,t;return i&&(n=h.parseDateString(i,this._options.parseFormat,!0),n&&(t=new Date(n.getFullYear(),n.getMonth(),n.getDate()),this._options.defaultTimeOfDay&&n.getTime()===t.getTime()?(n=new Date(n.getTime()+this._options.defaultTimeOfDay),this.setText(h.localeFormat(n,this._options.dateTimeFormat,!0),!1)):this._timeValue=n-t)),n},t.prototype.setSelectedDate=function(n,t){t===void 0&&(t=!0);n=new Date(n.getFullYear(),n.getMonth(),n.getDate());n=new Date(n.getTime()+(this._timeValue||0));this.setText(h.localeFormat(n,this._options.dateTimeFormat,!0),t)},t.prototype.upKey=function(){var n=this.getDropPopup();if(n)return n.setSelectedDate(this._addDays(this._getSelectedDate(),-7)),!1},t.prototype.keyDown=function(n){var t;if(n&&n.keyCode===y.ENTER)if(t=this.getDropPopup(),t)t.setSelectedDate(this._getSelectedDate());else return this.combo.toggleDropDown(),!1;else n&&n.keyCode===y.T&&(t=this.getDropPopup(),t&&t.setSelectedDate(h.getTodayInUserTimeZone()))},t.prototype.downKey=function(t){if(n.prototype.downKey.call(this,t)===!1)return!1;var i=this.getDropPopup();if(i)return i.setSelectedDate(this._addDays(this._getSelectedDate(),7)),!1;this.combo.toggleDropDown()},t.prototype.pageUpKey=function(){var t=this.getDropPopup(),n;if(t)return n=this._getSelectedDate(),t.setSelectedDate(this._addDays(n,-1*this._getMonthLength(n.getMonth()-1,n.getFullYear()))),!1},t.prototype.pageDownKey=function(){var t=this.getDropPopup(),n;if(t)return n=this._getSelectedDate(),t.setSelectedDate(this._addDays(n,this._getMonthLength(n.getMonth(),n.getFullYear()))),!1},t.prototype.leftKey=function(){var n=this.getDropPopup();if(n)return n.setSelectedDate(this._addDays(this._getSelectedDate(),-1)),!1},t.prototype.rightKey=function(){var n=this.getDropPopup();if(n)return n.setSelectedDate(this._addDays(this._getSelectedDate(),1)),!1},t.prototype._onChange=function(){var t=this.getDropPopup(),n=t.getSelectedDate();return n&&this.setSelectedDate(n),!1},t.prototype._getSelectedDate=function(){var n=this.getDropPopup();return n.getSelectedDate()||new Date},t.prototype._addDays=function(n,t){var i=new Date;return i.setTime(n.getTime()+t*864e5),i},t.prototype._getMonthLength=function(n,t){n=(n+12)%12+1;switch(n){case 4:case 6:case 9:case 11:return 30;case 2:if(t%4==0){var i=new Date(t,1,29);if(i.getMonth()===1)return 29}return 28;default:return 31}},t}(d);t.ComboDateBehavior=ht;w.registerBehavior("date-time",ht);i.Enhancement.registerJQueryWidget(w,"comboDateTime",{type:"date-time"});ct=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({type:"date-time"},t))},t}(w);t.DatePicker=ct;i.Enhancement.registerJQueryWidget(ct,"datePicker");lt=function(n){function t(t){var r=__construct(this,n,[t]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._checkStates={},r._options.id||(r._options.id="cmvdp_"+i.getId()),r}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"multi-value",createItem:p(this,this._createItem),itemClick:p(this,this._onItemClick)},t))},t.prototype.initialize=function(){var t=this.combo.getText().split(this._options.sepChar),i=this;$.each(t,function(n,t){t=$.trim(t);t&&(i._checkStates[t]=!0)});n.prototype.initialize.call(this)},t.prototype.getCheckedItems=function(){var n=this;return $.map(this._dataSource.getItems(),function(t){if(n._checkStates[t])return t})},t.prototype.getValue=function(){return this.getCheckedItems().join(this._options.joinChar||this._options.sepChar+" ")},t.prototype.toggleCheckbox=function(n){var r=this._options.id+"_cb"+n,t,i;i=this._dataSource.getItemText(n);t=$("#"+r);t.prop("checked")?(t.prop("checked",!1),this._checkStates[i]=!1):(t.prop("checked",!0),this._checkStates[i]=!0)},t.prototype._createItem=function(n){var t=this._dataSource.getItemText(n),r=this._options.id+"_cb"+n,i=$(k("li",this._options.nodeCss)).attr("id",this._options.id+"_li"+n),u=$("<input />").data("value",t).attr("type","checkbox").attr("id",r).data("index",n).appendTo(i);return this._checkStates[t]&&u.prop("checked",!0),i.append($(k("label")).attr("for",r).text(t||"")),i},t.prototype._onItemClick=function(n,t,i,r){var f,u,e=this._dataSource.getItemText(t);f=Boolean(this._checkStates[e]);u=Boolean(r.find("input").prop("checked"));this._checkStates[e]=u;f!==u&&this._fireChange()},t}(tt);t.ComboMultiValueDropPopup=lt;at=function(n){function t(i,r){return n.call(this,i,$.extend({dropControlType:lt,sepChar:t.Default_Seperate_Char,joinChar:t.Default_Join_Char},r))||this}return __extends(t,n),t.prototype.canType=function(){return!this.isDropVisible()},t.prototype.getValue=function(){var n=this.getDropPopup();return n.getCheckedItems()},t.prototype.getDropOptions=function(){var t=this;return $.extend(n.prototype.getDropOptions.call(this),{sepChar:this._options.sepChar,joinChar:this._options.joinChar,selectedIndex:-1,selectionChange:function(){t.combo.updateAriaActiveDescendant()},change:p(this,this._onChange)})},t.prototype.keyDown=function(n){var t=this.getDropPopup(),i;t&&n.keyCode===y.SPACE&&(i=t.getSelectedIndex(),i>=0&&(t.toggleCheckbox(i),this.setText(t.getValue(),!0)))},t.prototype._onChange=function(){var n=this.getDropPopup();return this.setText(n.getValue(),!0),!1},t.Default_Seperate_Char=",",t.Default_Join_Char=", ",t}(it);t.ComboMultiValueBehavior=at;w.registerBehavior("multi-value",at)});

define("VSS/Controls/Panels",["require","exports","VSS/Ajax","VSS/Controls","VSS/Diag","VSS/Resources/VSS.Resources.Platform","VSS/Controls/StatusIndicator","VSS/Utils/Core","VSS/Utils/UI","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h){var a,v;Object.defineProperty(t,"__esModule",{value:!0});t.AjaxPanel=t.AjaxPanelO=t.CollapsiblePanel=void 0;var c=s.domElem,y=h.getErrorMessage,l=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({collapsed:!0,iconCss:"icon",iconCollapseCss:"bowtie-icon bowtie-toggle-tree-collapsed",iconExpandCss:"bowtie-icon bowtie-toggle-tree-expanded"},t))},t.prototype._swapDefaultToggleIconForCustom=function(n){this._$toggleIcon.remove();this._$toggleIcon=n;this._header.addClass(t._defaultToggleIconOverrideClass)},t.prototype._createControl=function(){var t=this,n=this._options;return this._isDisabled=!1,n.hoverCss&&this.getElement().hover(function(){$(this).addClass(n.hoverCss)},function(){$(this).removeClass(n.hoverCss)}),this._header=$(c("div","tfs-collapsible-header")),this._options.headerNotFocusable?this._header.attr("role","presentation"):this._header.attr({tabIndex:"0",role:"button","aria-expanded":String(this.isExpanded())}),n.headerCss&&this._header.addClass(n.headerCss),this._header.bind("click.CollapsiblePanel",function(){return t.toggleExpandedState()}),this._header.bind("keydown",function(n){if(n.target===n.currentTarget&&(n.keyCode===s.KeyCode.ENTER||n.keyCode===s.KeyCode.SPACE)&&!s.KeyUtils.isModifierKey(n))return t.toggleExpandedState()}),this._header.bind("mouseenter focus",function(n){return n.preventDefault(),t._header.addClass("focus"),!1}),this._header.bind("mouseleave blur",function(n){return n.preventDefault(),t._header.removeClass("focus"),!1}),this._$toggleIcon=$(c("span","tfs-collapsible-collapse")).attr("aria-hidden","true").addClass(n.iconCss).addClass(n.collapsed?n.iconCollapseCss:n.iconExpandCss),n.collapseCss&&this._$toggleIcon.addClass(n.collapseCss),this._header.append(this._$toggleIcon),this.getElement().append(this._header),this._content=$(c("div","tfs-collapsible-content")),n.contentCss&&this._content.addClass(n.contentCss),n.collapsed&&this._content.hide(),this.getElement().append(this._content),this.getElement()},t.prototype._createIn=function(t){n.prototype._createIn.call(this,t);this._createControl()},t.prototype._enhance=function(n){if(this._options.collapsed=n.hasClass("collapsed"),this._createElement(),this._createControl(),n.after(this.getElement()),this.appendContent(n),this._options.headerText)this.appendHeaderText(this._options.headerText);else if(this._options.headerContent)this.appendHeader(this._options.headerContent),this._options.customToggleIcon&&this._swapDefaultToggleIconForCustom(this._options.customToggleIcon);else{var t=n.attr("title");t&&(n.hasClass("header")&&(n.removeClass("header"),this._header.addClass("header")),this.appendHeader(t))}},t.prototype.replaceHeaderTextIfPresent=function(n){return $("span.tfs-collapsible-text",this._header).text(n)},t.prototype.appendHeaderText=function(n){this._header.attr("title",n);var t=$("<span/>").text(n).addClass("tfs-collapsible-text");return(this._options.headingLevel===undefined||this._options.headingLevel>0)&&t.attr({role:"heading","aria-level":this._options.headingLevel?String(this._options.headingLevel):"2"}),this.appendHeader(t)},t.prototype.appendHeader=function(n){return this._header.append(n),this},t.prototype.prependHeader=function(n){return this._header.prepend(n),this},t.prototype.appendContent=function(n){var i=this._options,t;return $.isFunction(n)?i.collapsed?(this._dynamicContents||(this._dynamicContents=[]),this._dynamicContents.push(n)):t=n.call(this):t=n,t&&typeof t!="function"&&(this._content.append(t),this.getElement().removeClass("collapsed")),this},t.prototype.isExpanded=function(){return this._options.collapsed?!1:!0},t.prototype.expand=function(){this.isExpanded()||this.toggleExpandedState()},t.prototype.collapse=function(){this.isExpanded()&&this.toggleExpandedState()},t.prototype.toggleExpandedState=function(){var n=this._options,r=this._content,o=this._dynamicContents,u,i,f,e;if(this._isDisabled)return!1;if(n.collapsed=!n.collapsed,u=this._$toggleIcon,u.removeClass(n.iconCollapseCss+" "+n.iconExpandCss),u.addClass(n.collapsed?n.iconCollapseCss:n.iconExpandCss),this._options.headerNotFocusable||this._header.attr("aria-expanded",String(!n.collapsed)),n.collapsed)r.hide(),n.expandCss&&this.getElement().removeClass(n.expandCss),this._fire(t.EVENT_CONTENT_COLLAPSED);else{if(o){for(i=0,f=o;i<f.length;i++)e=f[i],typeof e=="function"&&r.append(e.apply(undefined));this._dynamicContents=null}r.show();n.expandCss&&this.getElement().addClass(n.expandCss);this._fire(t.EVENT_CONTENT_EXPANDED)}if(this._options.onToggleCallback&&$.isFunction(this._options.onToggleCallback))this._options.onToggleCallback(this.isExpanded());return!1},t.prototype.setDisabled=function(n){this._isDisabled!==n&&(n?(this._header.addClass("disabled"),this._$toggleIcon.hide(),this._header.removeAttr("tabindex")):(this._header.removeClass("disabled"),this._$toggleIcon.show(),this._header.attr("tabindex","0")),this._isDisabled=n)},t.prototype.isCollapsiblePanelDisabled=function(){return this._isDisabled},t.EVENT_CONTENT_EXPANDED="collapsible-panel-expanded",t.EVENT_CONTENT_COLLAPSED="collapsible-panel-collapsed",t.enhancementTypeName="tfs.collapsiblepanel",t._defaultToggleIconOverrideClass="custom-toggle-icon",t}(r.Control);t.CollapsiblePanel=l;r.Enhancement.registerJQueryWidget(l,"collapsible");r.Enhancement.registerEnhancement(l,".tfs-collapsible");a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"ajax-panel",replaceContent:!0,cache:!0},t))},t.prototype.initialize=function(){var t=this._options.url;n.prototype.initialize.call(this);t&&this.beginLoad(t,this._options.urlParams,this._options.success,this._options.error)},t.prototype._dispose=function(){this._cancelPendingLoad();n.prototype._dispose.call(this)},t.prototype.beginLoad=function(n,t,s,h){var l=this,c,a;u.logTracePoint("AjaxPanel.beginLoad.start");this._cancelPendingLoad();c=new o.Cancelable(this);this._cancelable=c;this.getElement().empty();this._options.showStatusIndicator!==!1&&(a=r.BaseControl.createIn(e.StatusIndicator,this.getElement(),{center:!0,imageClass:"big-status-progress",message:f.Loading}),a.start());this._element.attr("aria-busy","true");i.issueRequest(n,{type:"GET",data:t,dataType:"html",traditional:!0,cache:this._options.cache}).then(c.wrap(function(n){l.onLoadCompleted(n);$.isFunction(s)&&s.call(self,n)}),c.wrap(function(n){var t;$.isFunction(h)&&(t=h.call(self,n)===!0);l.onLoadError(n,t)}))},t.prototype.onLoadCompleted=function(n){this.getElement()&&this._options.replaceContent&&(this.getElement().empty(),this.getElement().html(n),r.Enhancement.ensureEnhancements(this.getElement()));this._element.removeAttr("aria-busy");u.logTracePoint("AjaxPanel.beginLoad.complete")},t.prototype.onLoadError=function(n,t){t||this.showError(n);this._element.removeAttr("aria-busy");u.logTracePoint("AjaxPanel.beginLoad.complete")},t.prototype.showError=function(n){this.getElement().empty();$(c("div","error")).appendTo(this.getElement()).text(y(n))},t.prototype._cancelPendingLoad=function(){this._cancelable&&(this._cancelable.cancel(),this._cancelable=null)},t.enhancementTypeName="tfs.ajaxPanel",t}(r.Control);t.AjaxPanelO=a;v=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(a);t.AjaxPanel=v});

/*!
 * jQuery UI Button 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/button",["jquery", "./core", "./widget"], n) : n(jQuery) })(function (n) { var t, i = "ui-button ui-widget ui-state-default ui-corner-all", r = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", f = function () { var t = n(this); setTimeout(function () { t.find(":ui-button").button("refresh") }, 1) }, u = function (t) { var i = t.name, r = t.form, u = n([]); return i && (i = i.replace(/'/g, "\\'"), u = r ? n(r).find("[name='" + i + "'][type=radio]") : n("[name='" + i + "'][type=radio]", t.ownerDocument).filter(function () { return !this.form })), u }; return n.widget("ui.button", { version: "1.11.4", defaultElement: "<button>", options: { disabled: null, text: !0, label: null, icons: { primary: null, secondary: null } }, _create: function () { this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, f); typeof this.options.disabled != "boolean" ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled); this._determineButtonType(); this.hasTitle = !!this.buttonElement.attr("title"); var e = this, r = this.options, o = this.type === "checkbox" || this.type === "radio", s = o ? "" : "ui-state-active"; r.label === null && (r.label = this.type === "input" ? this.buttonElement.val() : this.buttonElement.html()); this._hoverable(this.buttonElement); this.buttonElement.addClass(i).attr("role", "button").bind("mouseenter" + this.eventNamespace, function () { r.disabled || this === t && n(this).addClass("ui-state-active") }).bind("mouseleave" + this.eventNamespace, function () { r.disabled || n(this).removeClass(s) }).bind("click" + this.eventNamespace, function (n) { r.disabled && (n.preventDefault(), n.stopImmediatePropagation()) }); this._on({ focus: function () { this.buttonElement.addClass("ui-state-focus") }, blur: function () { this.buttonElement.removeClass("ui-state-focus") } }); o && this.element.bind("change" + this.eventNamespace, function () { e.refresh() }); this.type === "checkbox" ? this.buttonElement.bind("click" + this.eventNamespace, function () { if (r.disabled) return !1 }) : this.type === "radio" ? this.buttonElement.bind("click" + this.eventNamespace, function () { if (r.disabled) return !1; n(this).addClass("ui-state-active"); e.buttonElement.attr("aria-pressed", "true"); var t = e.element[0]; u(t).not(t).map(function () { return n(this).button("widget")[0] }).removeClass("ui-state-active").attr("aria-pressed", "false") }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function () { if (r.disabled) return !1; n(this).addClass("ui-state-active"); t = this; e.document.one("mouseup", function () { t = null }) }).bind("mouseup" + this.eventNamespace, function () { if (r.disabled) return !1; n(this).removeClass("ui-state-active") }).bind("keydown" + this.eventNamespace, function (t) { if (r.disabled) return !1; (t.keyCode === n.ui.keyCode.SPACE || t.keyCode === n.ui.keyCode.ENTER) && n(this).addClass("ui-state-active") }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function () { n(this).removeClass("ui-state-active") }), this.buttonElement.is("a") && this.buttonElement.keyup(function (t) { t.keyCode === n.ui.keyCode.SPACE && n(this).click() })); this._setOption("disabled", r.disabled); this._resetButton() }, _determineButtonType: function () { var n, t, i; this.type = this.element.is("[type=checkbox]") ? "checkbox" : this.element.is("[type=radio]") ? "radio" : this.element.is("input") ? "input" : "button"; this.type === "checkbox" || this.type === "radio" ? (n = this.element.parents().last(), t = "label[for='" + this.element.attr("id") + "']", this.buttonElement = n.find(t), this.buttonElement.length || (n = n.length ? n.siblings() : this.element.siblings(), this.buttonElement = n.filter(t), this.buttonElement.length || (this.buttonElement = n.find(t))), this.element.addClass("ui-helper-hidden-accessible"), i = this.element.is(":checked"), i && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element }, widget: function () { return this.buttonElement }, _destroy: function () { this.element.removeClass("ui-helper-hidden-accessible"); this.buttonElement.removeClass(i + " ui-state-active " + r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()); this.hasTitle || this.buttonElement.removeAttr("title") }, _setOption: function (n, t) { if (this._super(n, t), n === "disabled") { this.widget().toggleClass("ui-state-disabled", !!t); this.element.prop("disabled", !!t); t && (this.type === "checkbox" || this.type === "radio" ? this.buttonElement.removeClass("ui-state-focus") : this.buttonElement.removeClass("ui-state-focus ui-state-active")); return } this._resetButton() }, refresh: function () { var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled"); t !== this.options.disabled && this._setOption("disabled", t); this.type === "radio" ? u(this.element[0]).each(function () { n(this).is(":checked") ? n(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false") }) : this.type === "checkbox" && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false")) }, _resetButton: function () { if (this.type === "input") { this.options.label && this.element.val(this.options.label); return } var i = this.buttonElement.removeClass(r), e = n("<span><\/span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(i.empty()).text(), t = this.options.icons, f = t.primary && t.secondary, u = []; t.primary || t.secondary ? (this.options.text && u.push("ui-button-text-icon" + (f ? "s" : t.primary ? "-primary" : "-secondary")), t.primary && i.prepend("<span class='ui-button-icon-primary ui-icon " + t.primary + "'><\/span>"), t.secondary && i.append("<span class='ui-button-icon-secondary ui-icon " + t.secondary + "'><\/span>"), this.options.text || (u.push(f ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || i.attr("title", n.trim(e)))) : u.push("ui-button-text-only"); i.addClass(u.join(" ")) } }), n.widget("ui.buttonset", { version: "1.11.4", options: { items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)" }, _create: function () { this.element.addClass("ui-buttonset") }, _init: function () { this.refresh() }, _setOption: function (n, t) { n === "disabled" && this.buttons.button("option", n, t); this._super(n, t) }, refresh: function () { var i = this.element.css("direction") === "rtl", t = this.element.find(this.options.items), r = t.filter(":ui-button"); t.not(":ui-button").button(); r.button("refresh"); this.buttons = t.map(function () { return n(this).button("widget")[0] }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(i ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(i ? "ui-corner-left" : "ui-corner-right").end().end() }, _destroy: function () { this.element.removeClass("ui-buttonset"); this.buttons.map(function () { return n(this).button("widget")[0] }).removeClass("ui-corner-left ui-corner-right").end().button("destroy") } }), n.ui.button });

/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/mouse",["jquery", "./widget"], n) : n(jQuery) })(function (n) { var t = !1; return n(document).mouseup(function () { t = !1 }), n.widget("ui.mouse", { version: "1.11.4", options: { cancel: "input,textarea,button,select,option", distance: 1, delay: 0 }, _mouseInit: function () { var t = this; this.element.bind("mousedown." + this.widgetName, function (n) { return t._mouseDown(n) }).bind("click." + this.widgetName, function (i) { if (!0 === n.data(i.target, t.widgetName + ".preventClickEvent")) return n.removeData(i.target, t.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1 }); this.started = !1 }, _mouseDestroy: function () { this.element.unbind("." + this.widgetName); this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate) }, _mouseDown: function (i) { if (!t) { this._mouseMoved = !1; this._mouseStarted && this._mouseUp(i); this._mouseDownEvent = i; var r = this, u = i.which === 1, f = typeof this.options.cancel == "string" && i.target.nodeName ? n(i.target).closest(this.options.cancel).length : !1; return !u || f || !this._mouseCapture(i) ? !0 : (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () { r.mouseDelayMet = !0 }, this.options.delay)), this._mouseDistanceMet(i) && this._mouseDelayMet(i) && (this._mouseStarted = this._mouseStart(i) !== !1, !this._mouseStarted)) ? (i.preventDefault(), !0) : (!0 === n.data(i.target, this.widgetName + ".preventClickEvent") && n.removeData(i.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (n) { return r._mouseMove(n) }, this._mouseUpDelegate = function (n) { return r._mouseUp(n) }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), i.preventDefault(), t = !0, !0) } }, _mouseMove: function (t) { return this._mouseMoved && (n.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button || !t.which) ? this._mouseUp(t) : ((t.which || t.button) && (this._mouseMoved = !0), this._mouseStarted) ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted) }, _mouseUp: function (i) { return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, i.target === this._mouseDownEvent.target && n.data(i.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(i)), t = !1, !1 }, _mouseDistanceMet: function (n) { return Math.max(Math.abs(this._mouseDownEvent.pageX - n.pageX), Math.abs(this._mouseDownEvent.pageY - n.pageY)) >= this.options.distance }, _mouseDelayMet: function () { return this.mouseDelayMet }, _mouseStart: function () { }, _mouseDrag: function () { }, _mouseStop: function () { }, _mouseCapture: function () { return !0 } }) });

/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/draggable",["jquery", "./core", "./mouse", "./widget"], n) : n(jQuery) })(function (n) { return n.widget("ui.draggable", n.ui.mouse, { version: "1.11.4", widgetEventPrefix: "drag", options: { addClasses: !0, appendTo: "parent", axis: !1, connectToSortable: !1, containment: !1, cursor: "auto", cursorAt: !1, grid: !1, handle: !1, helper: "original", iframeFix: !1, opacity: !1, refreshPositions: !1, revert: !1, revertDuration: 500, scope: "default", scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, snap: !1, snapMode: "both", snapTolerance: 20, stack: !1, zIndex: !1, drag: null, start: null, stop: null }, _create: function () { this.options.helper === "original" && this._setPositionRelative(); this.options.addClasses && this.element.addClass("ui-draggable"); this.options.disabled && this.element.addClass("ui-draggable-disabled"); this._setHandleClassName(); this._mouseInit() }, _setOption: function (n, t) { this._super(n, t); n === "handle" && (this._removeHandleClassName(), this._setHandleClassName()) }, _destroy: function () { if ((this.helper || this.element).is(".ui-draggable-dragging")) { this.destroyOnClear = !0; return } this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"); this._removeHandleClassName(); this._mouseDestroy() }, _mouseCapture: function (t) { var i = this.options; return (this._blurActiveElement(t), this.helper || i.disabled || n(t.target).closest(".ui-resizable-handle").length > 0) ? !1 : (this.handle = this._getHandle(t), !this.handle) ? !1 : (this._blockFrames(i.iframeFix === !0 ? "iframe" : i.iframeFix), !0) }, _blockFrames: function (t) { this.iframeBlocks = this.document.find(t).map(function () { var t = n(this); return n("<div>").css("position", "absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0] }) }, _unblockFrames: function () { this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks) }, _blurActiveElement: function (t) { var i = this.document[0]; if (this.handleElement.is(t.target)) try { i.activeElement && i.activeElement.nodeName.toLowerCase() !== "body" && n(i.activeElement).blur() } catch (r) { } }, _mouseStart: function (t) { var i = this.options; return (this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), n.ui.ddmanager && (n.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter(function () { return n(this).css("position") === "fixed" }).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(t), this.originalPosition = this.position = this._generatePosition(t, !1), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), this._trigger("start", t) === !1) ? (this._clear(), !1) : (this._cacheHelperProportions(), n.ui.ddmanager && !i.dropBehaviour && n.ui.ddmanager.prepareOffsets(this, t), this._normalizeRightBottom(), this._mouseDrag(t, !0), n.ui.ddmanager && n.ui.ddmanager.dragStart(this, t), !0) }, _refreshOffsets: function (n) { this.offset = { top: this.positionAbs.top - this.margins.top, left: this.positionAbs.left - this.margins.left, scroll: !1, parent: this._getParentOffset(), relative: this._getRelativeOffset() }; this.offset.click = { left: n.pageX - this.offset.left, top: n.pageY - this.offset.top } }, _mouseDrag: function (t, i) { if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t, !0), this.positionAbs = this._convertPositionTo("absolute"), !i) { var r = this._uiHash(); if (this._trigger("drag", t, r) === !1) return this._mouseUp({}), !1; this.position = r.position } return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", n.ui.ddmanager && n.ui.ddmanager.drag(this, t), !1 }, _mouseStop: function (t) { var r = this, i = !1; return n.ui.ddmanager && !this.options.dropBehaviour && (i = n.ui.ddmanager.drop(this, t)), this.dropped && (i = this.dropped, this.dropped = !1), this.options.revert === "invalid" && !i || this.options.revert === "valid" && i || this.options.revert === !0 || n.isFunction(this.options.revert) && this.options.revert.call(this.element, i) ? n(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () { r._trigger("stop", t) !== !1 && r._clear() }) : this._trigger("stop", t) !== !1 && this._clear(), !1 }, _mouseUp: function (t) { return this._unblockFrames(), n.ui.ddmanager && n.ui.ddmanager.dragStop(this, t), this.handleElement.is(t.target) && this.element.focus(), n.ui.mouse.prototype._mouseUp.call(this, t) }, cancel: function () { return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this }, _getHandle: function (t) { return this.options.handle ? !!n(t.target).closest(this.element.find(this.options.handle)).length : !0 }, _setHandleClassName: function () { this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element; this.handleElement.addClass("ui-draggable-handle") }, _removeHandleClassName: function () { this.handleElement.removeClass("ui-draggable-handle") }, _createHelper: function (t) { var r = this.options, u = n.isFunction(r.helper), i = u ? n(r.helper.apply(this.element[0], [t])) : r.helper === "clone" ? this.element.clone().removeAttr("id") : this.element; return i.parents("body").length || i.appendTo(r.appendTo === "parent" ? this.element[0].parentNode : r.appendTo), u && i[0] === this.element[0] && this._setPositionRelative(), i[0] === this.element[0] || /(fixed|absolute)/.test(i.css("position")) || i.css("position", "absolute"), i }, _setPositionRelative: function () { /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative") }, _adjustOffsetFromHelper: function (t) { typeof t == "string" && (t = t.split(" ")); n.isArray(t) && (t = { left: +t[0], top: +t[1] || 0 }); "left" in t && (this.offset.click.left = t.left + this.margins.left); "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left); "top" in t && (this.offset.click.top = t.top + this.margins.top); "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top) }, _isRootNode: function (n) { return /(html|body)/i.test(n.tagName) || n === this.document[0] }, _getParentOffset: function () { var t = this.offsetParent.offset(), i = this.document[0]; return this.cssPosition === "absolute" && this.scrollParent[0] !== i && n.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (t = { top: 0, left: 0 }), { top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) } }, _getRelativeOffset: function () { if (this.cssPosition !== "relative") return { top: 0, left: 0 }; var n = this.element.position(), t = this._isRootNode(this.scrollParent[0]); return { top: n.top - (parseInt(this.helper.css("top"), 10) || 0) + (t ? 0 : this.scrollParent.scrollTop()), left: n.left - (parseInt(this.helper.css("left"), 10) || 0) + (t ? 0 : this.scrollParent.scrollLeft()) } }, _cacheMargins: function () { this.margins = { left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0 } }, _cacheHelperProportions: function () { this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() } }, _setContainment: function () { var f, t, i, r = this.options, u = this.document[0]; if (this.relativeContainer = null, !r.containment) { this.containment = null; return } if (r.containment === "window") { this.containment = [n(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, n(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, n(window).scrollLeft() + n(window).width() - this.helperProportions.width - this.margins.left, n(window).scrollTop() + (n(window).height() || u.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]; return } if (r.containment === "document") { this.containment = [0, 0, n(u).width() - this.helperProportions.width - this.margins.left, (n(u).height() || u.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]; return } if (r.containment.constructor === Array) { this.containment = r.containment; return } (r.containment === "parent" && (r.containment = this.helper[0].parentNode), t = n(r.containment), i = t[0], i) && (f = /(scroll|auto)/.test(t.css("overflow")), this.containment = [(parseInt(t.css("borderLeftWidth"), 10) || 0) + (parseInt(t.css("paddingLeft"), 10) || 0), (parseInt(t.css("borderTopWidth"), 10) || 0) + (parseInt(t.css("paddingTop"), 10) || 0), (f ? Math.max(i.scrollWidth, i.offsetWidth) : i.offsetWidth) - (parseInt(t.css("borderRightWidth"), 10) || 0) - (parseInt(t.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (f ? Math.max(i.scrollHeight, i.offsetHeight) : i.offsetHeight) - (parseInt(t.css("borderBottomWidth"), 10) || 0) - (parseInt(t.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = t) }, _convertPositionTo: function (n, t) { t || (t = this.position); var i = n === "absolute" ? 1 : -1, r = this._isRootNode(this.scrollParent[0]); return { top: t.top + this.offset.relative.top * i + this.offset.parent.top * i - (this.cssPosition === "fixed" ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top) * i, left: t.left + this.offset.relative.left * i + this.offset.parent.left * i - (this.cssPosition === "fixed" ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left) * i } }, _generatePosition: function (n, t) { var i, s, u, f, r = this.options, h = this._isRootNode(this.scrollParent[0]), e = n.pageX, o = n.pageY; return h && this.offset.scroll || (this.offset.scroll = { top: this.scrollParent.scrollTop(), left: this.scrollParent.scrollLeft() }), t && (this.containment && (this.relativeContainer ? (s = this.relativeContainer.offset(), i = [this.containment[0] + s.left, this.containment[1] + s.top, this.containment[2] + s.left, this.containment[3] + s.top]) : i = this.containment, n.pageX - this.offset.click.left < i[0] && (e = i[0] + this.offset.click.left), n.pageY - this.offset.click.top < i[1] && (o = i[1] + this.offset.click.top), n.pageX - this.offset.click.left > i[2] && (e = i[2] + this.offset.click.left), n.pageY - this.offset.click.top > i[3] && (o = i[3] + this.offset.click.top)), r.grid && (u = r.grid[1] ? this.originalPageY + Math.round((o - this.originalPageY) / r.grid[1]) * r.grid[1] : this.originalPageY, o = i ? u - this.offset.click.top >= i[1] || u - this.offset.click.top > i[3] ? u : u - this.offset.click.top >= i[1] ? u - r.grid[1] : u + r.grid[1] : u, f = r.grid[0] ? this.originalPageX + Math.round((e - this.originalPageX) / r.grid[0]) * r.grid[0] : this.originalPageX, e = i ? f - this.offset.click.left >= i[0] || f - this.offset.click.left > i[2] ? f : f - this.offset.click.left >= i[0] ? f - r.grid[0] : f + r.grid[0] : f), r.axis === "y" && (e = this.originalPageX), r.axis === "x" && (o = this.originalPageY)), { top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.offset.scroll.top : h ? 0 : this.offset.scroll.top), left: e - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.offset.scroll.left : h ? 0 : this.offset.scroll.left) } }, _clear: function () { this.helper.removeClass("ui-draggable-dragging"); this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(); this.helper = null; this.cancelHelperRemoval = !1; this.destroyOnClear && this.destroy() }, _normalizeRightBottom: function () { this.options.axis !== "y" && this.helper.css("right") !== "auto" && (this.helper.width(this.helper.width()), this.helper.css("right", "auto")); this.options.axis !== "x" && this.helper.css("bottom") !== "auto" && (this.helper.height(this.helper.height()), this.helper.css("bottom", "auto")) }, _trigger: function (t, i, r) { return r = r || this._uiHash(), n.ui.plugin.call(this, t, [i, r, this], !0), /^(drag|start|stop)/.test(t) && (this.positionAbs = this._convertPositionTo("absolute"), r.offset = this.positionAbs), n.Widget.prototype._trigger.call(this, t, i, r) }, plugins: {}, _uiHash: function () { return { helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs } } }), n.ui.plugin.add("draggable", "connectToSortable", { start: function (t, i, r) { var u = n.extend({}, i, { item: r.element }); r.sortables = []; n(r.options.connectToSortable).each(function () { var i = n(this).sortable("instance"); i && !i.options.disabled && (r.sortables.push(i), i.refreshPositions(), i._trigger("activate", t, u)) }) }, stop: function (t, i, r) { var u = n.extend({}, i, { item: r.element }); r.cancelHelperRemoval = !1; n.each(r.sortables, function () { var n = this; n.isOver ? (n.isOver = 0, r.cancelHelperRemoval = !0, n.cancelHelperRemoval = !1, n._storedCSS = { position: n.placeholder.css("position"), top: n.placeholder.css("top"), left: n.placeholder.css("left") }, n._mouseStop(t), n.options.helper = n.options._helper) : (n.cancelHelperRemoval = !0, n._trigger("deactivate", t, u)) }) }, drag: function (t, i, r) { n.each(r.sortables, function () { var f = !1, u = this; u.positionAbs = r.positionAbs; u.helperProportions = r.helperProportions; u.offset.click = r.offset.click; u._intersectsWith(u.containerCache) && (f = !0, n.each(r.sortables, function () { return this.positionAbs = r.positionAbs, this.helperProportions = r.helperProportions, this.offset.click = r.offset.click, this !== u && this._intersectsWith(this.containerCache) && n.contains(u.element[0], this.element[0]) && (f = !1), f })); f ? (u.isOver || (u.isOver = 1, r._parent = i.helper.parent(), u.currentItem = i.helper.appendTo(u.element).data("ui-sortable-item", !0), u.options._helper = u.options.helper, u.options.helper = function () { return i.helper[0] }, t.target = u.currentItem[0], u._mouseCapture(t, !0), u._mouseStart(t, !0, !0), u.offset.click.top = r.offset.click.top, u.offset.click.left = r.offset.click.left, u.offset.parent.left -= r.offset.parent.left - u.offset.parent.left, u.offset.parent.top -= r.offset.parent.top - u.offset.parent.top, r._trigger("toSortable", t), r.dropped = u.element, n.each(r.sortables, function () { this.refreshPositions() }), r.currentItem = r.element, u.fromOutside = r), u.currentItem && (u._mouseDrag(t), i.position = u.position)) : u.isOver && (u.isOver = 0, u.cancelHelperRemoval = !0, u.options._revert = u.options.revert, u.options.revert = !1, u._trigger("out", t, u._uiHash(u)), u._mouseStop(t, !0), u.options.revert = u.options._revert, u.options.helper = u.options._helper, u.placeholder && u.placeholder.remove(), i.helper.appendTo(r._parent), r._refreshOffsets(t), i.position = r._generatePosition(t, !0), r._trigger("fromSortable", t), r.dropped = !1, n.each(r.sortables, function () { this.refreshPositions() })) }) } }), n.ui.plugin.add("draggable", "cursor", { start: function (t, i, r) { var u = n("body"), f = r.options; u.css("cursor") && (f._cursor = u.css("cursor")); u.css("cursor", f.cursor) }, stop: function (t, i, r) { var u = r.options; u._cursor && n("body").css("cursor", u._cursor) } }), n.ui.plugin.add("draggable", "opacity", { start: function (t, i, r) { var u = n(i.helper), f = r.options; u.css("opacity") && (f._opacity = u.css("opacity")); u.css("opacity", f.opacity) }, stop: function (t, i, r) { var u = r.options; u._opacity && n(i.helper).css("opacity", u._opacity) } }), n.ui.plugin.add("draggable", "scroll", { start: function (n, t, i) { i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)); i.scrollParentNotHidden[0] !== i.document[0] && i.scrollParentNotHidden[0].tagName !== "HTML" && (i.overflowOffset = i.scrollParentNotHidden.offset()) }, drag: function (t, i, r) { var u = r.options, o = !1, e = r.scrollParentNotHidden[0], f = r.document[0]; e !== f && e.tagName !== "HTML" ? (u.axis && u.axis === "x" || (r.overflowOffset.top + e.offsetHeight - t.pageY < u.scrollSensitivity ? e.scrollTop = o = e.scrollTop + u.scrollSpeed : t.pageY - r.overflowOffset.top < u.scrollSensitivity && (e.scrollTop = o = e.scrollTop - u.scrollSpeed)), u.axis && u.axis === "y" || (r.overflowOffset.left + e.offsetWidth - t.pageX < u.scrollSensitivity ? e.scrollLeft = o = e.scrollLeft + u.scrollSpeed : t.pageX - r.overflowOffset.left < u.scrollSensitivity && (e.scrollLeft = o = e.scrollLeft - u.scrollSpeed))) : (u.axis && u.axis === "x" || (t.pageY - n(f).scrollTop() < u.scrollSensitivity ? o = n(f).scrollTop(n(f).scrollTop() - u.scrollSpeed) : n(window).height() - (t.pageY - n(f).scrollTop()) < u.scrollSensitivity && (o = n(f).scrollTop(n(f).scrollTop() + u.scrollSpeed))), u.axis && u.axis === "y" || (t.pageX - n(f).scrollLeft() < u.scrollSensitivity ? o = n(f).scrollLeft(n(f).scrollLeft() - u.scrollSpeed) : n(window).width() - (t.pageX - n(f).scrollLeft()) < u.scrollSensitivity && (o = n(f).scrollLeft(n(f).scrollLeft() + u.scrollSpeed)))); o !== !1 && n.ui.ddmanager && !u.dropBehaviour && n.ui.ddmanager.prepareOffsets(r, t) } }), n.ui.plugin.add("draggable", "snap", { start: function (t, i, r) { var u = r.options; r.snapElements = []; n(u.snap.constructor !== String ? u.snap.items || ":data(ui-draggable)" : u.snap).each(function () { var t = n(this), i = t.offset(); this !== r.element[0] && r.snapElements.push({ item: this, width: t.outerWidth(), height: t.outerHeight(), top: i.top, left: i.left }) }) }, drag: function (t, i, r) { for (var e, o, s, h, c, a, l, v, w, b = r.options, f = b.snapTolerance, y = i.offset.left, k = y + r.helperProportions.width, p = i.offset.top, d = p + r.helperProportions.height, u = r.snapElements.length - 1; u >= 0; u--) { if (c = r.snapElements[u].left - r.margins.left, a = c + r.snapElements[u].width, l = r.snapElements[u].top - r.margins.top, v = l + r.snapElements[u].height, k < c - f || y > a + f || d < l - f || p > v + f || !n.contains(r.snapElements[u].item.ownerDocument, r.snapElements[u].item)) { r.snapElements[u].snapping && r.options.snap.release && r.options.snap.release.call(r.element, t, n.extend(r._uiHash(), { snapItem: r.snapElements[u].item })); r.snapElements[u].snapping = !1; continue } b.snapMode !== "inner" && (e = Math.abs(l - d) <= f, o = Math.abs(v - p) <= f, s = Math.abs(c - k) <= f, h = Math.abs(a - y) <= f, e && (i.position.top = r._convertPositionTo("relative", { top: l - r.helperProportions.height, left: 0 }).top), o && (i.position.top = r._convertPositionTo("relative", { top: v, left: 0 }).top), s && (i.position.left = r._convertPositionTo("relative", { top: 0, left: c - r.helperProportions.width }).left), h && (i.position.left = r._convertPositionTo("relative", { top: 0, left: a }).left)); w = e || o || s || h; b.snapMode !== "outer" && (e = Math.abs(l - p) <= f, o = Math.abs(v - d) <= f, s = Math.abs(c - y) <= f, h = Math.abs(a - k) <= f, e && (i.position.top = r._convertPositionTo("relative", { top: l, left: 0 }).top), o && (i.position.top = r._convertPositionTo("relative", { top: v - r.helperProportions.height, left: 0 }).top), s && (i.position.left = r._convertPositionTo("relative", { top: 0, left: c }).left), h && (i.position.left = r._convertPositionTo("relative", { top: 0, left: a - r.helperProportions.width }).left)); !r.snapElements[u].snapping && (e || o || s || h || w) && r.options.snap.snap && r.options.snap.snap.call(r.element, t, n.extend(r._uiHash(), { snapItem: r.snapElements[u].item })); r.snapElements[u].snapping = e || o || s || h || w } } }), n.ui.plugin.add("draggable", "stack", { start: function (t, i, r) { var f, e = r.options, u = n.makeArray(n(e.stack)).sort(function (t, i) { return (parseInt(n(t).css("zIndex"), 10) || 0) - (parseInt(n(i).css("zIndex"), 10) || 0) }); u.length && (f = parseInt(n(u[0]).css("zIndex"), 10) || 0, n(u).each(function (t) { n(this).css("zIndex", f + t) }), this.css("zIndex", f + u.length)) } }), n.ui.plugin.add("draggable", "zIndex", { start: function (t, i, r) { var u = n(i.helper), f = r.options; u.css("zIndex") && (f._zIndex = u.css("zIndex")); u.css("zIndex", f.zIndex) }, stop: function (t, i, r) { var u = r.options; u._zIndex && n(i.helper).css("zIndex", u._zIndex) } }), n.ui.draggable });

/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(n){typeof define=="function"&&define.amd?define("jQueryUI/position",["jquery"],n):n(jQuery)})(function(n){return function(){function a(n,t,i){return[parseFloat(n[0])*(l.test(n[0])?t/100:1),parseFloat(n[1])*(l.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}function y(t){var i=t[0];return i.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var u,f,i=Math.max,t=Math.abs,e=Math.round,o=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,l=/%$/,v=n.fn.position;n.position={scrollbarWidth:function(){if(u!==undefined)return u;var r,i,t=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),f=t.children()[0];return n("body").append(t),r=f.offsetWidth,t.css("overflow","scroll"),i=f.offsetWidth,r===i&&(i=t[0].clientWidth),t.remove(),u=r-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]),u=!!i[0]&&i[0].nodeType===9;return{element:i,isWindow:r,isDocument:u,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r||u?i.width():i.outerWidth(),height:r||u?i.height():i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return v.apply(this,arguments);u=n.extend({},u);var k,l,p,b,w,g,nt=n(u.of),it=n.position.getWithinInfo(u.within),rt=n.position.getScrollInfo(it),d=(u.collision||"flip").split(" "),tt={};return g=y(nt),nt[0].preventDefault&&(u.at="left top"),l=g.width,p=g.height,b=g.offset,w=n.extend({},b),n.each(["my","at"],function(){var n=(u[this]||"").split(" "),t,i;n.length===1&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]);n[0]=o.test(n[0])?n[0]:"center";n[1]=s.test(n[1])?n[1]:"center";t=h.exec(n[0]);i=h.exec(n[1]);tt[this]=[t?t[0]:0,i?i[0]:0];u[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),d.length===1&&(d[1]=d[0]),u.at[0]==="right"?w.left+=l:u.at[0]==="center"&&(w.left+=l/2),u.at[1]==="bottom"?w.top+=p:u.at[1]==="center"&&(w.top+=p/2),k=a(tt.at,l,p),w.left+=k[0],w.top+=k[1],this.each(function(){var y,g,s=n(this),h=s.outerWidth(),c=s.outerHeight(),ut=r(this,"marginLeft"),ft=r(this,"marginTop"),et=h+ut+r(this,"marginRight")+rt.width,ot=c+ft+r(this,"marginBottom")+rt.height,o=n.extend({},w),v=a(tt.my,s.outerWidth(),s.outerHeight());u.my[0]==="right"?o.left-=h:u.my[0]==="center"&&(o.left-=h/2);u.my[1]==="bottom"?o.top-=c:u.my[1]==="center"&&(o.top-=c/2);o.left+=v[0];o.top+=v[1];f||(o.left=e(o.left),o.top=e(o.top));y={marginLeft:ut,marginTop:ft};n.each(["left","top"],function(t,i){n.ui.position[d[t]]&&n.ui.position[d[t]][i](o,{targetWidth:l,targetHeight:p,elemWidth:h,elemHeight:c,collisionPosition:y,collisionWidth:et,collisionHeight:ot,offset:[k[0]+v[0],k[1]+v[1]],my:u.my,at:u.at,within:it,elem:s})});u.using&&(g=function(n){var r=b.left-o.left,a=r+l-h,f=b.top-o.top,v=f+p-c,e={target:{element:nt,left:b.left,top:b.top,width:l,height:p},element:{element:s,left:o.left,top:o.top,width:h,height:c},horizontal:a<0?"left":r>0?"right":"center",vertical:v<0?"top":f>0?"bottom":"middle"};l<h&&t(r+a)<l&&(e.horizontal="center");p<c&&t(f+v)<p&&(e.vertical="middle");e.important=i(t(r),t(a))>i(t(f),t(v))?"horizontal":"vertical";u.using.call(this,n,e)});s.offset(n.extend(o,{using:g}))})};n.ui.position={fit:{left:function(n,t){var e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,r=u-s,f=s+t.collisionWidth-o-u,h;t.collisionWidth>o?r>0&&f<=0?(h=n.left+r+t.collisionWidth-o-u,n.left+=r-h):n.left=f>0&&r<=0?u:r>f?u+o-t.collisionWidth:u:r>0?n.left+=r:f>0?n.left-=f:n.left=i(n.left-s,n.left)},top:function(n,t){var o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,r=u-s,f=s+t.collisionHeight-e-u,h;t.collisionHeight>e?r>0&&f<=0?(h=n.top+r+t.collisionHeight-e-u,n.top+=r-h):n.top=f>0&&r<=0?u:r>f?u+e-t.collisionHeight:u:r>0?n.top+=r:f>0?n.top-=f:n.top=i(n.top-s,n.top)}},flip:{left:function(n,i){var r=i.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-i.collisionPosition.marginLeft,a=l-o,v=l+i.collisionWidth-c-o,u=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,f=i.at[0]==="left"?i.targetWidth:i.at[0]==="right"?-i.targetWidth:0,e=-2*i.offset[0],s,h;a<0?(s=n.left+u+f+e+i.collisionWidth-c-y,(s<0||s<t(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-i.collisionPosition.marginLeft+u+f+e-o,(h>0||t(h)<v)&&(n.left+=u+f+e))},top:function(n,i){var r=i.within,y=r.offset.top+r.scrollTop,c=r.height,o=r.isWindow?r.scrollTop:r.offset.top,l=n.top-i.collisionPosition.marginTop,a=l-o,v=l+i.collisionHeight-c-o,p=i.my[1]==="top",u=p?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,f=i.at[1]==="top"?i.targetHeight:i.at[1]==="bottom"?-i.targetHeight:0,e=-2*i.offset[1],s,h;a<0?(h=n.top+u+f+e+i.collisionHeight-c-y,(h<0||h<t(a))&&(n.top+=u+f+e)):v>0&&(s=n.top-i.collisionPosition.marginTop+u+f+e-o,(s>0||t(s)<v)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,e,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};o&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in r)t.style[e]=r[e];t.appendChild(s);i=o||document.documentElement;i.insertBefore(t,i.firstChild);s.style.cssText="position: absolute; left: 10.7432222px;";u=n(s).offset().left;f=u>10&&u<11;t.innerHTML="";i.removeChild(t)}()}(),n.ui.position});

/*!
 * jQuery UI Resizable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/resizable",["jquery", "./core", "./mouse", "./widget"], n) : n(jQuery) })(function (n) { return n.widget("ui.resizable", n.ui.mouse, { version: "1.11.4", widgetEventPrefix: "resize", options: { alsoResize: !1, animate: !1, animateDuration: "slow", animateEasing: "swing", aspectRatio: !1, autoHide: !1, containment: !1, ghost: !1, grid: !1, handles: "e,s,se", helper: !1, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 90, resize: null, start: null, stop: null }, _num: function (n) { return parseInt(n, 10) || 0 }, _isNumber: function (n) { return !isNaN(parseInt(n, 10)) }, _hasScroll: function (t, i) { if (n(t).css("overflow") === "hidden") return !1; var r = i && i === "left" ? "scrollLeft" : "scrollTop", u = !1; return t[r] > 0 ? !0 : (t[r] = 1, u = t[r] > 0, t[r] = 0, u) }, _create: function () { var e, f, u, i, o, r = this, t = this.options; if (this.element.addClass("ui-resizable"), n.extend(this, { _aspectRatio: !!t.aspectRatio, aspectRatio: t.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: t.helper || t.ghost || t.animate ? t.helper || "ui-resizable-helper" : null }), this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i) && (this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({ position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left") })), this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")), this.elementIsWrapper = !0, this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") }), this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0 }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" })), this.originalElement.css({ margin: this.originalElement.css("margin") }), this._proportionallyResize()), this.handles = t.handles || (n(".ui-resizable-handle", this.element).length ? { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" } : "e,s,se"), this._handles = n(), this.handles.constructor === String) for (this.handles === "all" && (this.handles = "n,e,s,w,se,sw,ne,nw"), e = this.handles.split(","), this.handles = {}, f = 0; f < e.length; f++) u = n.trim(e[f]), o = "ui-resizable-" + u, i = n("<div class='ui-resizable-handle " + o + "'><\/div>"), i.css({ zIndex: t.zIndex }), "se" === u && i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[u] = ".ui-resizable-" + u, this.element.append(i); this._renderAxis = function (t) { var i, u, f, e; t = t || this.element; for (i in this.handles) this.handles[i].constructor === String ? this.handles[i] = this.element.children(this.handles[i]).first().show() : (this.handles[i].jquery || this.handles[i].nodeType) && (this.handles[i] = n(this.handles[i]), this._on(this.handles[i], { mousedown: r._mouseDown })), this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i) && (u = n(this.handles[i], this.element), e = /sw|ne|nw|se|n|s/.test(i) ? u.outerHeight() : u.outerWidth(), f = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""), t.css(f, e), this._proportionallyResize()), this._handles = this._handles.add(this.handles[i]) }; this._renderAxis(this.element); this._handles = this._handles.add(this.element.find(".ui-resizable-handle")); this._handles.disableSelection(); this._handles.mouseover(function () { r.resizing || (this.className && (i = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), r.axis = i && i[1] ? i[1] : "se") }); t.autoHide && (this._handles.hide(), n(this.element).addClass("ui-resizable-autohide").mouseenter(function () { t.disabled || (n(this).removeClass("ui-resizable-autohide"), r._handles.show()) }).mouseleave(function () { t.disabled || r.resizing || (n(this).addClass("ui-resizable-autohide"), r._handles.hide()) })); this._mouseInit() }, _destroy: function () { this._mouseDestroy(); var t, i = function (t) { n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove() }; return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({ position: t.css("position"), width: t.outerWidth(), height: t.outerHeight(), top: t.css("top"), left: t.css("left") }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), i(this.originalElement), this }, _mouseCapture: function (t) { var r, i, u = !1; for (r in this.handles) i = n(this.handles[r])[0], (i === t.target || n.contains(i, t.target)) && (u = !0); return !this.options.disabled && u }, _mouseStart: function (t) { var u, f, e, r = this.options, i = this.element; return this.resizing = !0, this._renderProxy(), u = this._num(this.helper.css("left")), f = this._num(this.helper.css("top")), r.containment && (u += n(r.containment).scrollLeft() || 0, f += n(r.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = { left: u, top: f }, this.size = this._helper ? { width: this.helper.width(), height: this.helper.height() } : { width: i.width(), height: i.height() }, this.originalSize = this._helper ? { width: i.outerWidth(), height: i.outerHeight() } : { width: i.width(), height: i.height() }, this.sizeDiff = { width: i.outerWidth() - i.width(), height: i.outerHeight() - i.height() }, this.originalPosition = { left: u, top: f }, this.originalMousePosition = { left: t.pageX, top: t.pageY }, this.aspectRatio = typeof r.aspectRatio == "number" ? r.aspectRatio : this.originalSize.width / this.originalSize.height || 1, e = n(".ui-resizable-" + this.axis).css("cursor"), n("body").css("cursor", e === "auto" ? this.axis + "-resize" : e), i.addClass("ui-resizable-resizing"), this._propagate("start", t), !0 }, _mouseDrag: function (t) { var i, r, u = this.originalMousePosition, e = this.axis, o = t.pageX - u.left || 0, s = t.pageY - u.top || 0, f = this._change[e]; return (this._updatePrevProperties(), !f) ? !1 : (i = f.apply(this, [t, o, s]), this._updateVirtualBoundaries(t.shiftKey), (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), this._updateCache(i), this._propagate("resize", t), r = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), n.isEmptyObject(r) || (this._updatePrevProperties(), this._trigger("resize", t, this.ui()), this._applyChanges()), !1) }, _mouseStop: function (t) { this.resizing = !1; var r, u, f, e, o, s, h, c = this.options, i = this; return this._helper && (r = this._proportionallyResizeElements, u = r.length && /textarea/i.test(r[0].nodeName), f = u && this._hasScroll(r[0], "left") ? 0 : i.sizeDiff.height, e = u ? 0 : i.sizeDiff.width, o = { width: i.helper.width() - e, height: i.helper.height() - f }, s = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, h = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null, c.animate || this.element.css(n.extend(o, { top: h, left: s })), i.helper.height(i.size.height), i.helper.width(i.size.width), this._helper && !c.animate && this._proportionallyResize()), n("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1 }, _updatePrevProperties: function () { this.prevPosition = { top: this.position.top, left: this.position.left }; this.prevSize = { width: this.size.width, height: this.size.height } }, _applyChanges: function () { var n = {}; return this.position.top !== this.prevPosition.top && (n.top = this.position.top + "px"), this.position.left !== this.prevPosition.left && (n.left = this.position.left + "px"), this.size.width !== this.prevSize.width && (n.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (n.height = this.size.height + "px"), this.helper.css(n), n }, _updateVirtualBoundaries: function (n) { var r, u, f, e, t, i = this.options; t = { minWidth: this._isNumber(i.minWidth) ? i.minWidth : 0, maxWidth: this._isNumber(i.maxWidth) ? i.maxWidth : Infinity, minHeight: this._isNumber(i.minHeight) ? i.minHeight : 0, maxHeight: this._isNumber(i.maxHeight) ? i.maxHeight : Infinity }; (this._aspectRatio || n) && (r = t.minHeight * this.aspectRatio, f = t.minWidth / this.aspectRatio, u = t.maxHeight * this.aspectRatio, e = t.maxWidth / this.aspectRatio, r > t.minWidth && (t.minWidth = r), f > t.minHeight && (t.minHeight = f), u < t.maxWidth && (t.maxWidth = u), e < t.maxHeight && (t.maxHeight = e)); this._vBoundaries = t }, _updateCache: function (n) { this.offset = this.helper.offset(); this._isNumber(n.left) && (this.position.left = n.left); this._isNumber(n.top) && (this.position.top = n.top); this._isNumber(n.height) && (this.size.height = n.height); this._isNumber(n.width) && (this.size.width = n.width) }, _updateRatio: function (n) { var t = this.position, i = this.size, r = this.axis; return this._isNumber(n.height) ? n.width = n.height * this.aspectRatio : this._isNumber(n.width) && (n.height = n.width / this.aspectRatio), r === "sw" && (n.left = t.left + (i.width - n.width), n.top = null), r === "nw" && (n.top = t.top + (i.height - n.height), n.left = t.left + (i.width - n.width)), n }, _respectSize: function (n) { var t = this._vBoundaries, i = this.axis, r = this._isNumber(n.width) && t.maxWidth && t.maxWidth < n.width, u = this._isNumber(n.height) && t.maxHeight && t.maxHeight < n.height, f = this._isNumber(n.width) && t.minWidth && t.minWidth > n.width, e = this._isNumber(n.height) && t.minHeight && t.minHeight > n.height, o = this.originalPosition.left + this.originalSize.width, s = this.position.top + this.size.height, h = /sw|nw|w/.test(i), c = /nw|ne|n/.test(i); return f && (n.width = t.minWidth), e && (n.height = t.minHeight), r && (n.width = t.maxWidth), u && (n.height = t.maxHeight), f && h && (n.left = o - t.minWidth), r && h && (n.left = o - t.maxWidth), e && c && (n.top = s - t.minHeight), u && c && (n.top = s - t.maxHeight), n.width || n.height || n.left || !n.top ? n.width || n.height || n.top || !n.left || (n.left = null) : n.top = null, n }, _getPaddingPlusBorderDimensions: function (n) { for (var t = 0, i = [], r = [n.css("borderTopWidth"), n.css("borderRightWidth"), n.css("borderBottomWidth"), n.css("borderLeftWidth")], u = [n.css("paddingTop"), n.css("paddingRight"), n.css("paddingBottom"), n.css("paddingLeft")]; t < 4; t++) i[t] = parseInt(r[t], 10) || 0, i[t] += parseInt(u[t], 10) || 0; return { height: i[0] + i[2], width: i[1] + i[3] } }, _proportionallyResize: function () { if (this._proportionallyResizeElements.length) for (var n, t = 0, i = this.helper || this.element; t < this._proportionallyResizeElements.length; t++) n = this._proportionallyResizeElements[t], this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(n)), n.css({ height: i.height() - this.outerDimensions.height || 0, width: i.width() - this.outerDimensions.width || 0 }) }, _renderProxy: function () { var t = this.element, i = this.options; this.elementOffset = t.offset(); this._helper ? (this.helper = this.helper || n("<div style='overflow:hidden;'><\/div>"), this.helper.addClass(this._helper).css({ width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++i.zIndex }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element }, _change: { e: function (n, t) { return { width: this.originalSize.width + t } }, w: function (n, t) { var i = this.originalSize, r = this.originalPosition; return { left: r.left + t, width: i.width - t } }, n: function (n, t, i) { var r = this.originalSize, u = this.originalPosition; return { top: u.top + i, height: r.height - i } }, s: function (n, t, i) { return { height: this.originalSize.height + i } }, se: function (t, i, r) { return n.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, i, r])) }, sw: function (t, i, r) { return n.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, i, r])) }, ne: function (t, i, r) { return n.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, i, r])) }, nw: function (t, i, r) { return n.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, i, r])) } }, _propagate: function (t, i) { n.ui.plugin.call(this, t, [i, this.ui()]); t !== "resize" && this._trigger(t, i, this.ui()) }, plugins: {}, ui: function () { return { originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition } } }), n.ui.plugin.add("resizable", "animate", { stop: function (t) { var i = n(this).resizable("instance"), u = i.options, r = i._proportionallyResizeElements, f = r.length && /textarea/i.test(r[0].nodeName), s = f && i._hasScroll(r[0], "left") ? 0 : i.sizeDiff.height, h = f ? 0 : i.sizeDiff.width, c = { width: i.size.width - h, height: i.size.height - s }, e = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, o = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null; i.element.animate(n.extend(c, o && e ? { top: o, left: e } : {}), { duration: u.animateDuration, easing: u.animateEasing, step: function () { var u = { width: parseInt(i.element.css("width"), 10), height: parseInt(i.element.css("height"), 10), top: parseInt(i.element.css("top"), 10), left: parseInt(i.element.css("left"), 10) }; r && r.length && n(r[0]).css({ width: u.width, height: u.height }); i._updateCache(u); i._propagate("resize", t) } }) } }), n.ui.plugin.add("resizable", "containment", { start: function () { var r, f, e, o, s, h, c, t = n(this).resizable("instance"), l = t.options, a = t.element, u = l.containment, i = u instanceof n ? u.get(0) : /parent/.test(u) ? a.parent().get(0) : u; i && (t.containerElement = n(i), /document/.test(u) || u === document ? (t.containerOffset = { left: 0, top: 0 }, t.containerPosition = { left: 0, top: 0 }, t.parentData = { element: n(document), left: 0, top: 0, width: n(document).width(), height: n(document).height() || document.body.parentNode.scrollHeight }) : (r = n(i), f = [], n(["Top", "Right", "Left", "Bottom"]).each(function (n, i) { f[n] = t._num(r.css("padding" + i)) }), t.containerOffset = r.offset(), t.containerPosition = r.position(), t.containerSize = { height: r.innerHeight() - f[3], width: r.innerWidth() - f[1] }, e = t.containerOffset, o = t.containerSize.height, s = t.containerSize.width, h = t._hasScroll(i, "left") ? i.scrollWidth : s, c = t._hasScroll(i) ? i.scrollHeight : o, t.parentData = { element: i, left: e.left, top: e.top, width: h, height: c })) }, resize: function (t) { var o, s, h, c, i = n(this).resizable("instance"), v = i.options, r = i.containerOffset, l = i.position, f = i._aspectRatio || t.shiftKey, e = { top: 0, left: 0 }, a = i.containerElement, u = !0; a[0] !== document && /static/.test(a.css("position")) && (e = r); l.left < (i._helper ? r.left : 0) && (i.size.width = i.size.width + (i._helper ? i.position.left - r.left : i.position.left - e.left), f && (i.size.height = i.size.width / i.aspectRatio, u = !1), i.position.left = v.helper ? r.left : 0); l.top < (i._helper ? r.top : 0) && (i.size.height = i.size.height + (i._helper ? i.position.top - r.top : i.position.top), f && (i.size.width = i.size.height * i.aspectRatio, u = !1), i.position.top = i._helper ? r.top : 0); h = i.containerElement.get(0) === i.element.parent().get(0); c = /relative|absolute/.test(i.containerElement.css("position")); h && c ? (i.offset.left = i.parentData.left + i.position.left, i.offset.top = i.parentData.top + i.position.top) : (i.offset.left = i.element.offset().left, i.offset.top = i.element.offset().top); o = Math.abs(i.sizeDiff.width + (i._helper ? i.offset.left - e.left : i.offset.left - r.left)); s = Math.abs(i.sizeDiff.height + (i._helper ? i.offset.top - e.top : i.offset.top - r.top)); o + i.size.width >= i.parentData.width && (i.size.width = i.parentData.width - o, f && (i.size.height = i.size.width / i.aspectRatio, u = !1)); s + i.size.height >= i.parentData.height && (i.size.height = i.parentData.height - s, f && (i.size.width = i.size.height * i.aspectRatio, u = !1)); u || (i.position.left = i.prevPosition.left, i.position.top = i.prevPosition.top, i.size.width = i.prevSize.width, i.size.height = i.prevSize.height) }, stop: function () { var t = n(this).resizable("instance"), r = t.options, u = t.containerOffset, f = t.containerPosition, e = t.containerElement, i = n(t.helper), o = i.offset(), s = i.outerWidth() - t.sizeDiff.width, h = i.outerHeight() - t.sizeDiff.height; t._helper && !r.animate && /relative/.test(e.css("position")) && n(this).css({ left: o.left - f.left - u.left, width: s, height: h }); t._helper && !r.animate && /static/.test(e.css("position")) && n(this).css({ left: o.left - f.left - u.left, width: s, height: h }) } }), n.ui.plugin.add("resizable", "alsoResize", { start: function () { var t = n(this).resizable("instance"), i = t.options; n(i.alsoResize).each(function () { var t = n(this); t.data("ui-resizable-alsoresize", { width: parseInt(t.width(), 10), height: parseInt(t.height(), 10), left: parseInt(t.css("left"), 10), top: parseInt(t.css("top"), 10) }) }) }, resize: function (t, i) { var r = n(this).resizable("instance"), e = r.options, u = r.originalSize, f = r.originalPosition, o = { height: r.size.height - u.height || 0, width: r.size.width - u.width || 0, top: r.position.top - f.top || 0, left: r.position.left - f.left || 0 }; n(e.alsoResize).each(function () { var t = n(this), u = n(this).data("ui-resizable-alsoresize"), r = {}, f = t.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"]; n.each(f, function (n, t) { var i = (u[t] || 0) + (o[t] || 0); i && i >= 0 && (r[t] = i || null) }); t.css(r) }) }, stop: function () { n(this).removeData("resizable-alsoresize") } }), n.ui.plugin.add("resizable", "ghost", { start: function () { var t = n(this).resizable("instance"), i = t.options, r = t.size; t.ghost = t.originalElement.clone(); t.ghost.css({ opacity: .25, display: "block", position: "relative", height: r.height, width: r.width, margin: 0, left: 0, top: 0 }).addClass("ui-resizable-ghost").addClass(typeof i.ghost == "string" ? i.ghost : ""); t.ghost.appendTo(t.helper) }, resize: function () { var t = n(this).resizable("instance"); t.ghost && t.ghost.css({ position: "relative", height: t.size.height, width: t.size.width }) }, stop: function () { var t = n(this).resizable("instance"); t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0)) } }), n.ui.plugin.add("resizable", "grid", { resize: function () { var h, t = n(this).resizable("instance"), i = t.options, y = t.size, o = t.originalSize, s = t.originalPosition, c = t.axis, l = typeof i.grid == "number" ? [i.grid, i.grid] : i.grid, f = l[0] || 1, e = l[1] || 1, a = Math.round((y.width - o.width) / f) * f, v = Math.round((y.height - o.height) / e) * e, r = o.width + a, u = o.height + v, p = i.maxWidth && i.maxWidth < r, w = i.maxHeight && i.maxHeight < u, b = i.minWidth && i.minWidth > r, k = i.minHeight && i.minHeight > u; i.grid = l; b && (r += f); k && (u += e); p && (r -= f); w && (u -= e); /^(se|s|e)$/.test(c) ? (t.size.width = r, t.size.height = u) : /^(ne)$/.test(c) ? (t.size.width = r, t.size.height = u, t.position.top = s.top - v) : /^(sw)$/.test(c) ? (t.size.width = r, t.size.height = u, t.position.left = s.left - a) : ((u - e <= 0 || r - f <= 0) && (h = t._getPaddingPlusBorderDimensions(this)), u - e > 0 ? (t.size.height = u, t.position.top = s.top - v) : (u = e - h.height, t.size.height = u, t.position.top = s.top + o.height - u), r - f > 0 ? (t.size.width = r, t.position.left = s.left - a) : (r = f - h.width, t.size.width = r, t.position.left = s.left + o.width - r)) } }), n.ui.resizable });

/*!
 * jQuery UI Dialog 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/dialog",["jquery", "./core", "./widget", "./button", "./draggable", "./mouse", "./position", "./resizable"], n) : n(jQuery) })(function (n) { return n.widget("ui.dialog", { version: "1.11.4", options: { appendTo: "body", autoOpen: !0, buttons: [], closeOnEscape: !0, closeText: "Close", dialogClass: "", draggable: !0, hide: null, height: "auto", maxHeight: null, maxWidth: null, minHeight: 150, minWidth: 150, modal: !1, position: { my: "center", at: "center", of: window, collision: "fit", using: function (t) { var i = n(this).css(t).offset().top; i < 0 && n(this).css("top", t.top - i) } }, resizable: !0, show: null, title: null, width: 300, beforeClose: null, close: null, drag: null, dragStart: null, dragStop: null, focus: null, open: null, resize: null, resizeStart: null, resizeStop: null }, sizeRelatedOptions: { buttons: !0, height: !0, maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0, width: !0 }, resizableRelatedOptions: { maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0 }, _create: function () { this.originalCss = { display: this.element[0].style.display, width: this.element[0].style.width, minHeight: this.element[0].style.minHeight, maxHeight: this.element[0].style.maxHeight, height: this.element[0].style.height }; this.originalPosition = { parent: this.element.parent(), index: this.element.parent().children().index(this.element) }; this.originalTitle = this.element.attr("title"); this.options.title = this.options.title || this.originalTitle; this._createWrapper(); this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog); this._createTitlebar(); this._createButtonPane(); this.options.draggable && n.fn.draggable && this._makeDraggable(); this.options.resizable && n.fn.resizable && this._makeResizable(); this._isOpen = !1; this._trackFocus() }, _init: function () { this.options.autoOpen && this.open() }, _appendTo: function () { var t = this.options.appendTo; return t && (t.jquery || t.nodeType) ? n(t) : this.document.find(t || "body").eq(0) }, _destroy: function () { var n, t = this.originalPosition; this._untrackInstance(); this._destroyOverlay(); this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(); this.uiDialog.stop(!0, !0).remove(); this.originalTitle && this.element.attr("title", this.originalTitle); n = t.parent.children().eq(t.index); n.length && n[0] !== this.element[0] ? n.before(this.element) : t.parent.append(this.element) }, widget: function () { return this.uiDialog }, disable: n.noop, enable: n.noop, close: function (t) { var i, r = this; if (this._isOpen && this._trigger("beforeClose", t) !== !1) { if (this._isOpen = !1, this._focusedElement = null, this._destroyOverlay(), this._untrackInstance(), !this.opener.filter(":focusable").focus().length) try { i = this.document[0].activeElement; i && i.nodeName.toLowerCase() !== "body" && n(i).blur() } catch (u) { } this._hide(this.uiDialog, this.options.hide, function () { r._trigger("close", t) }) } }, isOpen: function () { return this._isOpen }, moveToTop: function () { this._moveToTop() }, _moveToTop: function (t, i) { var r = !1, f = this.uiDialog.siblings(".ui-front:visible").map(function () { return +n(this).css("z-index") }).get(), u = Math.max.apply(null, f); return u >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", u + 1), r = !0), r && !i && this._trigger("focus", t), r }, open: function () { var t = this; if (this._isOpen) { this._moveToTop() && this._focusTabbable(); return } this._isOpen = !0; this.opener = n(this.document[0].activeElement); this._size(); this._position(); this._createOverlay(); this._moveToTop(null, !0); this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1); this._show(this.uiDialog, this.options.show, function () { t._focusTabbable(); t._trigger("focus") }); this._makeFocusTarget(); this._trigger("open") }, _focusTabbable: function () { var n = this._focusedElement; n || (n = this.element.find("[autofocus]")); n.length || (n = this.element.find(":tabbable")); n.length || (n = this.uiDialogButtonPane.find(":tabbable")); n.length || (n = this.uiDialogTitlebarClose.filter(":tabbable")); n.length || (n = this.uiDialog); n.eq(0).focus() }, _keepFocus: function (t) { function i() { var t = this.document[0].activeElement, i = this.uiDialog[0] === t || n.contains(this.uiDialog[0], t); i || this._focusTabbable() } t.preventDefault(); i.call(this); this._delay(i) }, _createWrapper: function () { this.uiDialog = n("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({ tabIndex: -1, role: "dialog" }).appendTo(this._appendTo()); this._on(this.uiDialog, { keydown: function (t) { if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === n.ui.keyCode.ESCAPE) { t.preventDefault(); this.close(t); return } if (t.keyCode === n.ui.keyCode.TAB && !t.isDefaultPrevented()) { var i = this.uiDialog.find(":tabbable"), r = i.filter(":first"), u = i.filter(":last"); t.target !== u[0] && t.target !== this.uiDialog[0] || t.shiftKey ? (t.target === r[0] || t.target === this.uiDialog[0]) && t.shiftKey && (this._delay(function () { u.focus() }), t.preventDefault()) : (this._delay(function () { r.focus() }), t.preventDefault()) } }, mousedown: function (n) { this._moveToTop(n) && this._focusTabbable() } }); this.element.find("[aria-describedby]").length || this.uiDialog.attr({ "aria-describedby": this.element.uniqueId().attr("id") }) }, _createTitlebar: function () { var t; this.uiDialogTitlebar = n("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog); this._on(this.uiDialogTitlebar, { mousedown: function (t) { n(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus() } }); this.uiDialogTitlebarClose = n("<button type='button'><\/button>").button({ label: this.options.closeText, icons: { primary: "ui-icon-closethick" }, text: !1 }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar); this._on(this.uiDialogTitlebarClose, { click: function (n) { n.preventDefault(); this.close(n) } }); t = n("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar); this._title(t); this.uiDialog.attr({ "aria-labelledby": t.attr("id") }) }, _title: function (n) { this.options.title || n.html("&#160;"); n.text(this.options.title) }, _createButtonPane: function () { this.uiDialogButtonPane = n("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"); this.uiButtonSet = n("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane); this._createButtons() }, _createButtons: function () { var i = this, t = this.options.buttons; if (this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), n.isEmptyObject(t) || n.isArray(t) && !t.length) { this.uiDialog.removeClass("ui-dialog-buttons"); return } n.each(t, function (t, r) { var u, f; r = n.isFunction(r) ? { click: r, text: t } : r; r = n.extend({ type: "button" }, r); u = r.click; r.click = function () { u.apply(i.element[0], arguments) }; f = { icons: r.icons, text: r.showText }; delete r.icons; delete r.showText; n("<button><\/button>", r).button(f).appendTo(i.uiButtonSet) }); this.uiDialog.addClass("ui-dialog-buttons"); this.uiDialogButtonPane.appendTo(this.uiDialog) }, _makeDraggable: function () { function i(n) { return { position: n.position, offset: n.offset } } var t = this, r = this.options; this.uiDialog.draggable({ cancel: ".ui-dialog-content, .ui-dialog-titlebar-close", handle: ".ui-dialog-titlebar", containment: "document", start: function (r, u) { n(this).addClass("ui-dialog-dragging"); t._blockFrames(); t._trigger("dragStart", r, i(u)) }, drag: function (n, r) { t._trigger("drag", n, i(r)) }, stop: function (u, f) { var e = f.offset.left - t.document.scrollLeft(), o = f.offset.top - t.document.scrollTop(); r.position = { my: "left top", at: "left" + (e >= 0 ? "+" : "") + e + " top" + (o >= 0 ? "+" : "") + o, of: t.window }; n(this).removeClass("ui-dialog-dragging"); t._unblockFrames(); t._trigger("dragStop", u, i(f)) } }) }, _makeResizable: function () { function r(n) { return { originalPosition: n.originalPosition, originalSize: n.originalSize, position: n.position, size: n.size } } var t = this, i = this.options, u = i.resizable, f = this.uiDialog.css("position"), e = typeof u == "string" ? u : "n,e,s,w,se,sw,ne,nw"; this.uiDialog.resizable({ cancel: ".ui-dialog-content", containment: "document", alsoResize: this.element, maxWidth: i.maxWidth, maxHeight: i.maxHeight, minWidth: i.minWidth, minHeight: this._minHeight(), handles: e, start: function (i, u) { n(this).addClass("ui-dialog-resizing"); t._blockFrames(); t._trigger("resizeStart", i, r(u)) }, resize: function (n, i) { t._trigger("resize", n, r(i)) }, stop: function (u, f) { var e = t.uiDialog.offset(), o = e.left - t.document.scrollLeft(), s = e.top - t.document.scrollTop(); i.height = t.uiDialog.height(); i.width = t.uiDialog.width(); i.position = { my: "left top", at: "left" + (o >= 0 ? "+" : "") + o + " top" + (s >= 0 ? "+" : "") + s, of: t.window }; n(this).removeClass("ui-dialog-resizing"); t._unblockFrames(); t._trigger("resizeStop", u, r(f)) } }).css("position", f) }, _trackFocus: function () { this._on(this.widget(), { focusin: function (t) { this._makeFocusTarget(); this._focusedElement = n(t.target) } }) }, _makeFocusTarget: function () { this._untrackInstance(); this._trackingInstances().unshift(this) }, _untrackInstance: function () { var t = this._trackingInstances(), i = n.inArray(this, t); i !== -1 && t.splice(i, 1) }, _trackingInstances: function () { var n = this.document.data("ui-dialog-instances"); return n || (n = [], this.document.data("ui-dialog-instances", n)), n }, _minHeight: function () { var n = this.options; return n.height === "auto" ? n.minHeight : Math.min(n.minHeight, n.height) }, _position: function () { var n = this.uiDialog.is(":visible"); n || this.uiDialog.show(); this.uiDialog.position(this.options.position); n || this.uiDialog.hide() }, _setOptions: function (t) { var i = this, r = !1, u = {}; n.each(t, function (n, t) { i._setOption(n, t); n in i.sizeRelatedOptions && (r = !0); n in i.resizableRelatedOptions && (u[n] = t) }); r && (this._size(), this._position()); this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", u) }, _setOption: function (n, t) { var u, r, i = this.uiDialog; (n === "dialogClass" && i.removeClass(this.options.dialogClass).addClass(t), n !== "disabled") && (this._super(n, t), n === "appendTo" && this.uiDialog.appendTo(this._appendTo()), n === "buttons" && this._createButtons(), n === "closeText" && this.uiDialogTitlebarClose.button({ label: "" + t }), n === "draggable" && (u = i.is(":data(ui-draggable)"), u && !t && i.draggable("destroy"), !u && t && this._makeDraggable()), n === "position" && this._position(), n === "resizable" && (r = i.is(":data(ui-resizable)"), r && !t && i.resizable("destroy"), r && typeof t == "string" && i.resizable("option", "handles", t), r || t === !1 || this._makeResizable()), n === "title" && this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))) }, _size: function () { var t, i, r, n = this.options; this.element.show().css({ width: "auto", minHeight: 0, maxHeight: "none", height: 0 }); n.minWidth > n.width && (n.width = n.minWidth); t = this.uiDialog.css({ height: "auto", width: n.width }).outerHeight(); i = Math.max(0, n.minHeight - t); r = typeof n.maxHeight == "number" ? Math.max(0, n.maxHeight - t) : "none"; n.height === "auto" ? this.element.css({ minHeight: i, maxHeight: r, height: "auto" }) : this.element.height(Math.max(0, n.height - t)); this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight()) }, _blockFrames: function () { this.iframeBlocks = this.document.find("iframe").map(function () { var t = n(this); return n("<div>").css({ position: "absolute", width: t.outerWidth(), height: t.outerHeight() }).appendTo(t.parent()).offset(t.offset())[0] }) }, _unblockFrames: function () { this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks) }, _allowInteraction: function (t) { return n(t.target).closest(".ui-dialog").length ? !0 : !!n(t.target).closest(".ui-datepicker").length }, _createOverlay: function () { if (this.options.modal) { var t = !0; this._delay(function () { t = !1 }); this.document.data("ui-dialog-overlays") || this._on(this.document, { focusin: function (n) { t || this._allowInteraction(n) || (n.preventDefault(), this._trackingInstances()[0]._focusTabbable()) } }); this.overlay = n("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()); this._on(this.overlay, { mousedown: "_keepFocus" }); this.document.data("ui-dialog-overlays", (this.document.data("ui-dialog-overlays") || 0) + 1) } }, _destroyOverlay: function () { if (this.options.modal && this.overlay) { var n = this.document.data("ui-dialog-overlays") - 1; n ? this.document.data("ui-dialog-overlays", n) : this.document.unbind("focusin").removeData("ui-dialog-overlays"); this.overlay.remove(); this.overlay = null } } }) });

// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Controls/Dialogs",["require","exports","VSS/Controls","VSS/Diag","VSS/Events/Services","VSS/Navigation/HubsService","VSS/Controls/Panels","VSS/Controls/PopupContent","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Accessibility","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","q","jQueryUI/core","jQueryUI/button","jQueryUI/dialog","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function rt(n,t){t&&a.BrowserCheckUtils.isEdge()&&$.each(t,function(t,i){var r=i.click;r&&(i.click=function(t){t&&!$(t.currentTarget).is(":disabled")&&r.apply(n[0],arguments)})})}function ut(n,t){var r=t||"",i;return i=typeof n=="string"?n.split(" "):n,r.split(" ").concat(i).filter(function(n,t,i){return i.indexOf(n)===t}).join(" ")}function st(n,t){return w.show(n,t)}function ht(n,t){return b.showMessageDialog(n,t)}function ct(n,t){return ht(n,{title:t||s.UnsavedChangesMessageTitle,noDefaultButton:!0,buttons:[{id:"leave",text:s.UnsavedChangesLeaveButton,reject:!1},{id:"stay",text:s.UnsavedChangesStayButton,reject:!0},]})}var p,it,k,w,d,g,nt,ft,et,tt,b,ot;Object.defineProperty(t,"__esModule",{value:!0});t.showConfirmNavigationDialog=t.showMessageDialog=t.show=t.CopyContentDialog=t.MessageDialog=t.MessageDialogO=t.ConfirmationDialog=t.ConfirmationDialogO=t.ModalDialog=t.ModalDialogO=t.Dialog=t.DialogO=t.preventClickingDisabledButtons=void 0;p=c.delegate;it=a.domElem,function(){var n=[".ms-Layer",".bolt-portal"];$.widget("ui.dialog",$.ui.dialog,{_allowInteraction:function(t){var i,r,u;if(this._super(t)||a.BrowserCheckUtils.isFirefox()&&t.type==="focusin"&&t.target==document)return!0;for(i=0,r=n;i<r.length;i++)if(u=r[i],$(t.target).closest(u).length)return!0}})}();t.preventClickingDisabledButtons=rt;k=function(n){function t(t){var i=n.call(this,t)||this;return i._closedByNavigation=!1,i._resizing=!1,i._onWindowResizeDelegate=p(i,i._onWindowResize),i}return __extends(t,n),t.beginExecuteDialogAction=function(n){w._dialogActionInProgress||(w._dialogActionInProgress=!0,n(function(){w._dialogActionInProgress=!1}))},t.create=function(n,t){var o=t&&t.content||$("<div />"),r,u,f,e;return t&&t.contentText&&o.text(t.contentText),r=i.Enhancement.enhance(n,o,t),u=this._getNextDialogZIndex(),r._element.parent().css("z-index",u),r._options.modal&&(f=r._element.parent().next("div.ui-widget-overlay").css("z-index",u-1),(a.BrowserCheckUtils.isIE()||a.BrowserCheckUtils.isEdge())&&(e=f.clone().insertAfter(f),f.css("width","50%"),e.css({"z-index":u-1,width:"50%",left:"50%"}),r._secondOverlay=e)),r._element.parent().children("div.ui-icon-gripsmall-diagonal-se").addClass("ui-icon-grip-diagonal-se"),r},t._getNextDialogZIndex=function(){var n,i,t=0;return $("div.ui-dialog").each(function(){n=Number($(this).css("z-index"));!isNaN(n)&&n>t&&(t=n)}),$("div.ms-Modal").closest("div.ms-Layer").each(function(){n=Number($(this).css("z-index"));!isNaN(n)&&n>t&&(t=n)}),$("div.bolt-portal-host").each(function(n,i){i.querySelector("div.work-item-form-dialog")&&(t=1e6)}),t<10001?i=10002:(i=t+2,i%2!=0&&i++),i},t.show=function(n,t){return this.create(n,$.extend({autoOpen:!0},t))},t.prototype.initializeOptions=function(t){var i,r,u,f;this._options=this._options||{};n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"dialog",widthPct:.8,heightPct:.8,modal:!0,draggable:!0,resizable:!0,autoOpen:!1,dynamicSize:!0,disposeOnClose:!0,closeText:s.CloseButtonLabelText},t));i=this._options;r=$(window);i.height==="auto"&&(i.height=null);i.minWidth=Math.max(240,parseInt(i.minWidth,10)||0);i.minHeight=Math.max(192,parseInt(i.minHeight,10)||0);this._specifiedMaxWidth=parseInt(i.maxWidth,10);this._specifiedMaxHeight=parseInt(i.maxHeight,10);this._setMaxSize();this._ensureCtaButton();i.dynamicSize?(i.width=r.width()*i.widthPct,i.height=r.height()*i.heightPct):!i.useLegacyStyle&&i.height&&(u=66,i.subtitle&&(u+=22),f=typeof i.height=="number"?i.height:parseInt(i.height,10),f+=u,i.height=f);i.height&&!isNaN(i.height)&&(i.height=Math.min(i.height,r.height()));i.width&&!isNaN(i.width)&&(i.width=Math.min(i.width,r.width()));i.hideCloseButton&&(i.dialogClass=ut("no-close",i.dialogClass));this._options.useLegacyStyle&&(i.dialogClass=ut("ui-dialog-legacy",i.dialogClass))},t.prototype.initialize=function(){var t=this,s,l,c,h;n.prototype.initialize.call(this);var i=this,v=$(window),e=$.extend({},this._options);e.title=this.getTitle();e.close=function(n){t._options.close&&t._options.close(__assign(__assign({},n),{closedByNavigation:t._closedByNavigation}));t._removeSecondOverlay();t.onClose(n)};e.beforeClose=function(n){if(t._options.beforeClose)return t._options.beforeClose(__assign(__assign({},n),{closedByNavigation:t._closedByNavigation}))};e.open=function(n){i._options.open&&i._options.open.call(this,n);i.onOpen(n)};this._bind("dialogdragstart dialogdragstop",function(){u.getService().fire("dialog-move",t);t._onDialogMove()});this._options.attachResize&&this._bind("dialogresizestop",this.onDialogResize.bind(this));this._options.resizable&&(this._bind("dialogresize",this._onDialogResizing.bind(this)),this._bind("dialogresizestart",this._onDialogResizeStart.bind(this)),this._bind("dialogresizestop",this._onDialogResizeStop.bind(this)));e.dynamicSize&&(u.getService().attachEvent("window-resize",this._onWindowResizeDelegate),this._bind("dialogclose",function(){var n=u.getService();n.fire("dialog-close",i);n.detachEvent("window-resize",i._onWindowResizeDelegate)}));e.url||r.logTracePoint("Dialog.initialize.complete");rt(this.getElement(),e.buttons);this._options.contentMargin===!1&&this.getElement().addClass("no-margin");this.getElement().dialog(e);this._options.useLegacyStyle||(s=this.getElement().parent(),l=s.find(".ui-dialog-titlebar"),l.addClass("bowtie").append($("<div />").addClass("ui-dialog-subtitle")),c=$("span.ui-dialog-title",l),c.attr({role:"heading","aria-level":1}),a.tooltipIfOverflow(c[0],{titleTarget:c[0],titleText:this.getTitle()}),s.find(".ui-dialog-buttonpane").addClass("bowtie"),h=s.find("button.ui-dialog-titlebar-close"),this._closeTooltip=o.RichContentTooltip.add(this._options.closeText,h),h.removeAttr("title"),h.attr("aria-label",this._options.closeText),h.find(".ui-button-icon-primary").addClass("bowtie-icon bowtie-navigate-close"),(this._options.useBowtieStyle||this._options.bowtieVersion>0)&&s.addClass("bowtie-style"));this.setSubtitle(this.getSubtitle());this.getElement().keydown(function(n){var r,u,t;if(n.keyCode===$.ui.keyCode.ENTER){if(t=$(n.target),t.attr("role")==="combobox"||t.attr("role")==="radio")return!0;if((!n.shiftKey&&t.is("input[type='text']")||t.is("textarea")&&n.ctrlKey)&&i._options.defaultButton&&i._options.buttons)return r=i._options.buttons[i._options.defaultButton],r&&(u=$("#"+r.id).button("option"),u.disabled||r.click.apply(this,[n])),!1;if(!t.is("textarea")&&!t.is("a")&&!t.is("button")&&!t.hasClass("propagate-keydown-event"))return!1}});this._options.resizable&&this._addResizeKeydownHandler();setTimeout(function(){t._autoSizeAndPosition();t.onInitialize()},0);w._dialogActionInProgress=!1;this._onHubNavigateDelegate=function(){t._closedByNavigation=!0;t.close()};u.getService().attachEvent(f.HubEventNames.PreXHRNavigate,this._onHubNavigateDelegate);a.attachResize(this.getElement(),p(this,this._onWindowResize))},t.prototype._addResizeKeydownHandler=function(){var i=this,n=this.getElement(),t=n.siblings(".ui-icon-gripsmall-diagonal-se");if(t.length>0){t.attr({tabindex:0,role:"button","aria-label":s.DialogResizeLabel});this._resizeIconTooltip=o.RichContentTooltip.add(s.DialogResizeLabel,t);t.removeAttr("title");var r=n.dialog("option","minWidth")||150,u=n.dialog("option","minHeight")||150,f=n.dialog("option","maxWidth")||Number.MAX_VALUE,e=n.dialog("option","maxHeight")||Number.MAX_VALUE;t.keydown(function(n){switch(n.keyCode){case a.KeyCode.LEFT:i._resize("width",!1,r,Math.max);h.announce(s.DialogSizeDecreased);break;case a.KeyCode.RIGHT:i._resize("width",!0,f,Math.min);h.announce(s.DialogSizeIncreased);break;case a.KeyCode.UP:i._resize("height",!1,u,Math.max);h.announce(s.DialogSizeDecreased);break;case a.KeyCode.DOWN:i._resize("height",!0,e,Math.min);h.announce(s.DialogSizeIncreased)}})}},t.prototype._resize=function(n,i,r,u){var f=this.getElement(),e=f.dialog("option",n),o;e==="auto"&&(e=f.parent().height());o=u(e+t.RESIZE_STEP*(i?1:-1),r);f.dialog("option",n,o);f.trigger("dialogresizestop",{size:{width:f.dialog("option","width"),height:f.dialog("option","height")}})},t.prototype._autoSizeAndPosition=function(){var n=this.getElement(),t=this._options;n&&n.length>0&&$.contains(document.body,n[0])&&(t.preventAutoResize||(t.position&&n.dialog("option","position",t.position),t.height?n.dialog("option","height",t.height):n.dialog("option","height","auto"),this._setMaxHeight()),n.show())},t.prototype._ensureCtaButton=function(){var n=this._options,r,u,t,i;n.noAutoCta!==!0&&(r=/(^cta$)|(^cta\ )|(\ cta\ )|( cta$)/,u=/(^warning$)|(^warning\ )|(\ warning\ )|( warning$)/,$.isArray(n.buttons)&&n.buttons.length>0&&!n.buttons.some(function(n){return r.test(n.class)})&&!n.buttons.some(function(n){return u.test(n.class)})?(i=n.buttons[0].class||"",n.buttons[0].class=i+" cta"):n.buttons&&typeof n.buttons=="object"&&(t=Object.keys(n.buttons),t.length>0&&(t.some(function(t){return r.test(n.buttons[t].class)})||t.some(function(t){return u.test(n.buttons[t].class)})||(i=n.buttons[t[0]].class||"",n.buttons[t[0]].class=i+" cta"))))},t.prototype.onLoadCompleted=function(t){n.prototype.onLoadCompleted.call(this,t);this.setInitialFocus();r.logTracePoint("Dialog.initialize.complete")},t.prototype.setInitialFocus=function(){var n=this._options.initialFocusSelector||":visible:tabbable";this.getElement().find(n).first().focus()},t.prototype.setFormFocusDelayed=function(n){c.delay(this,300,function(){n.eq(0).focus().select()})},t.prototype.setTitle=function(n){this._title=n;this._updateTitle()},t.prototype.getTitle=function(){return this._title||this._options.title||this.getElement().attr("title")||""},t.prototype.setSubtitle=function(n){this._subtitle=n;this._updateSubtitle()},t.prototype.getSubtitle=function(){var n=this._subtitle;return(n===null||n===undefined)&&(n=this._options.subtitle),n||""},t.prototype.centerDialog=function(){this.getElement().dialog("option","position",{my:"center",at:"center",of:window});this._setMaxHeight()},t.prototype.getDialogResult=function(){return this._dialogResult},t.prototype.setDialogResult=function(n){this._dialogResult=n},t.prototype.show=function(){this.getElement().dialog("open")},t.prototype.onOpen=function(){if(!this._options||this._options.hasProgressElement!==!1){var n=$("<div />").addClass("ui-dialog-titlebar-progress-container").appendTo(this.getElement().parent().find(".ui-dialog-titlebar"));this._progressElement=$("<div />").addClass("ui-dialog-titlebar-progress-element").appendTo(n);v.globalProgressIndicator.registerProgressElement(this._progressElement)}u.getService().fire("dialog-open",this)},t.prototype.onClose=function(){u.getService().fire("dialog-close",this);this._progressElement&&v.globalProgressIndicator.unRegisterProgressElement(this._progressElement);this._removeSecondOverlay();this._options.disposeOnClose&&this.dispose();var n=$(".ui-dialog").slice(-1);n.length&&!this._options.noFocusOnClose&&n.focus()},t.prototype.onInitialize=function(){typeof this._options.initialize=="function"&&this._options.initialize.call(this)},t.prototype.close=function(){this.getElement()&&this.getElement().dialog("close")},t.prototype.dispose=function(){this._removeSecondOverlay();u.getService().detachEvent(f.HubEventNames.PreXHRNavigate,this._onHubNavigateDelegate);a.detachResize(this.getElement());this._closeTooltip&&(this._closeTooltip.dispose(),this._closeTooltip=null);this._resizeIconTooltip&&(this._resizeIconTooltip.dispose(),this._resizeIconTooltip=null);n.prototype.dispose.call(this)},t.prototype._removeSecondOverlay=function(){this._secondOverlay&&(this._secondOverlay.remove(),this._secondOverlay=null)},t.prototype._updateSubtitle=function(){if(this._initialized&&this.getElement()){var n=this.getElement().parent().find(".ui-dialog-subtitle"),t=this.getSubtitle()||"";n.text(t);a.tooltipIfOverflow(n[0],{titleTarget:n[0],titleText:t});n.toggle(t.length>0)}},t.prototype.onDialogResize=function(){},t.prototype._updateTitle=function(){if(this._initialized&&this.getElement()){var t=this.getElement().dialog("option","title",this.getTitle()),n=$("span.ui-dialog-title",t.parent());a.tooltipIfOverflow(n[0],{titleTarget:n[0],titleText:this.getTitle()})}},t.prototype._onWindowResize=function(){if(!this._resizing){var t=$(window),n=this._options;n.dynamicSize&&(this._setMaxSize(),this.getElement().dialog("option",{width:t.width()*n.widthPct,height:t.height()*n.heightPct,maxHeight:parseInt(this._options.maxHeight,10),maxWidth:parseInt(this._options.maxWidth,10)}));this.getElement().dialog("option","position",{my:"center",at:"center",of:window})}},t.prototype._onDialogResizing=function(n,t){var u=$(window),i,r;t&&t.position&&t.size&&(i=Math.min(t.size.height,u.height()-t.position.top),r=Math.min(t.size.width,u.width()-t.position.left),(i!==t.size.height||r!==t.size.width)&&this.getElement().dialog("option",{width:r,height:i}))},t.prototype._onDialogMove=function(){this._options.preventAutoResize||(this._setMaxHeight(),this._ensureDialogContentHeight());this._hideCloseButtonTooltip();this._hideResizeIconTooltip()},t.prototype._onDialogResizeStart=function(){this._resizing=!0;this._hideCloseButtonTooltip();this._hideResizeIconTooltip()},t.prototype._onDialogResizeStop=function(){this._resizing=!1},t.prototype._ensureDialogContentHeight=function(){var n=this.getElement().parent().css("height");n!=="auto"?this.getElement().css("height",this.getElement().outerHeight()):this.getElement().css("height","auto")},t.prototype._setMaxHeight=function(){var n=this.getElement().prev().outerHeight(!0)+this.getElement().next().outerHeight(!0);this.getElement().css("maxHeight",window.innerHeight-this.getElement().parent().position().top-n)},t.prototype._setMaxSize=function(){this._options.maxWidth=Math.min(window.innerWidth,this._specifiedMaxWidth||Infinity);this._options.maxHeight=Math.min(window.innerHeight,this._specifiedMaxHeight||Infinity)},t.prototype._hideCloseButtonTooltip=function(){this._closeTooltip&&this._closeTooltip.hide()},t.prototype._hideResizeIconTooltip=function(){this._resizeIconTooltip&&this._resizeIconTooltip.hide()},t.enhancementTypeName="tfs.dialog",t._dialogActionInProgress=!1,t.RESIZE_STEP=25,t}(e.AjaxPanelO);t.DialogO=k;w=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(k);t.Dialog=w;d=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"dialog modal-dialog",modal:!0,dynamicSize:!1,width:500,height:"auto",defaultButton:"ok",buttons:{ok:{id:"ok",text:t&&t.okText||s.ModalDialogOkButton,click:p(this,this.onOkClick),"class":"cta",disabled:"disabled"},cancel:{id:"cancel",text:t&&t.cancelText||s.ModalDialogCancelButton,click:p(this,this.onCancelClick)}}},t))},t.prototype.initialize=function(){this._bind(g.EVENT_BUTTON_STATUS_CHANGE,p(this,this.onButtonStatusChange));this._bind("resultReady",p(this,this.onResultReady));n.prototype.initialize.call(this)},t.prototype.updateOkButton=function(n){this.getElement()&&this.getElement().trigger(g.EVENT_BUTTON_STATUS_CHANGE,{enabled:n===!0})},t.prototype.processResult=function(n){var t=this._options.okCallback;n&&($.isFunction(t)&&(t.call(this,n),r.logTracePoint(this.getTypeName()+".callback-complete")),this.close())},t.prototype.onOkClick=function(){r.logTracePoint(this.getTypeName()+".OkClicked");this.processResult(this.getDialogResult())},t.prototype.onResultReady=function(n,t){this.processResult(t)},t.prototype.onCancelClick=function(){$.isFunction(this._options.cancelCallback)&&this._options.cancelCallback();this.close()},t.prototype.onButtonStatusChange=function(n,t){var i=this.getElement().siblings(".ui-dialog-buttonpane").find("#"+(t.button||"ok"));i.button("option","disabled",t.enabled?"":"disabled");this.setAttribute("aria-disabled",t.enabled?"false":"true",i)},t.enhancementTypeName="tfs.modaldialog",t.EVENT_BUTTON_STATUS_CHANGE="buttonStatusChange",t}(k);t.ModalDialogO=d;g=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(d);t.ModalDialog=g;nt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:400,height:200,resizable:!1,cssClass:"confirmation-dialog"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.$errorContainer=$(it("div")).addClass("confirmation-dialog-error").prependTo(this.getElement()).hide();this.updateOkButton(!0)},t.prototype._onSuccess=function(){this._fire("resultReady",!0);var n=this._options.successCallback;$.isFunction(n)&&(n.apply(this,arguments),r.logTracePoint(this.getTypeName()+".callback-complete"))},t.prototype._onError=function(n){this.$errorContainer.text(n.message).show()},t.prototype.onOkClick=function(t){this.updateOkButton(!1);n.prototype.onOkClick.call(this,t)},t}(d);t.ConfirmationDialogO=nt;ft=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(nt);t.ConfirmationDialog=ft;et=function(){function n(n){this.button=n}return n.prototype.toString=function(){return"MessageDialogResult: Button: "+(this.button?this.button.id:"?")+" ("+v.ErrorHandler.ignoreRejectedPromiseTag+")"},n}();tt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){var u=this,i=$.extend({width:500,height:"auto",hideCloseButton:!0,coreCssClass:"dialog modal-dialog message-dialog",modal:!0,dynamicSize:!1},t),r;i.buttons instanceof Array&&i.buttons.length>0&&(r={},i.buttons.forEach(function(n){r[n.id]=u.getButtonOptions(n)}),t.noDefaultButton||(i.defaultButton=i.buttons[0].id),this.setDialogResult(i.buttons[i.buttons.length-1]),i.buttons=r);t.escapeButton&&this.setDialogResult(t.escapeButton);t.initialFocusButton&&c.delay(this,100,function(){document.getElementById(t.initialFocusButton.id).focus()});n.prototype.initializeOptions.call(this,i)},t.prototype.initialize=function(){var i,t;n.prototype.initialize.call(this);this._options.requiredTypedConfirmation&&this.initializeTypedConfirmation();for(i in this._options.buttons)t=this._options.buttons[i],t.style&&$("#"+t.id).addClass(t.style)},t.prototype.initializeTypedConfirmation=function(){var u=this,f=this.getElement(),n=$("<input type='text' class='textbox message-dialog-confirm-textbox no-match' />"),t=$(),i,r;for(i in this._options.buttons)this._options.buttons[i].reject||(t=t.add($("#"+this._options.buttons[i].id)));r=function(){l.ignoreCaseComparer(n.val(),u._options.requiredTypedConfirmation)==0?(n.removeClass("no-match").addClass("match"),t.button("option","disabled","")):(n.addClass("no-match").removeClass("match"),t.button("option","disabled","disabled"))};n.bind("input keyup",r);f.append($("<div class='message-dialog-confirm'><\/div>").append(n));r(null);c.delay(this,100,function(){n.focus();n.select()})},t.prototype.getPromise=function(){return this._deferred||(this._deferred=y.defer()),this._deferred.promise},t.showMessageDialog=function(n,t){var i,r;return t=t||{},i=$.extend({buttons:[b.buttons.ok,b.buttons.cancel],useBowtieStyle:!0,minWidth:t.width,minHeight:t.height,title:s.Confirm},t),i.content=typeof n=="string"?$("<div />").text(n):n,r=st(b,i),r.getPromise()},t.prototype.onClose=function(t){if(this._deferred){var i=new et(this.getDialogResult());this._options.beforeClose&&this._options.beforeClose(i.button);i.button.reject?this._deferred.reject(i):this._deferred.resolve(i)}return n.prototype.onClose.call(this,t)},t.prototype.getButtonOptions=function(n){var t=this;return $.extend({click:function(){t.setDialogResult(n);t.close()}},n)},t.buttons={ok:{id:"ok",text:s.ModalDialogOkButton,reject:!1},cancel:{id:"cancel",text:s.ModalDialogCancelButton,reject:!0},yes:{id:"yes",text:s.ModalDialogYesButton,reject:!1},no:{id:"no",text:s.ModalDialogNoButton,reject:!0},close:{id:"close",text:s.CloseButtonLabelText,reject:!0}},t}(k);t.MessageDialogO=tt;b=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(tt);t.MessageDialog=b;ot=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:t.width||600,minWidth:400,height:t.height||450,minHeight:200,attachResize:!0,defaultButton:"close",buttons:[{id:"close",text:s.CloseButtonLabelText,click:p(this,this.close)},]},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.setTitle(s.CopyContentDialogTitle);this._decorate()},t.prototype._decorate=function(){var r=this.getElement(),n,i=$("<div>").text(this._options.dialogLabel||this._getDefaultLabelText()),t;this._options.dialogLabelExtend&&i.append(this._options.dialogLabelExtend);t=$("<div class='copy-dialog-container'>").append(i).append($("<p>"));this._options.excludeTextPanel||(n=$("<div>"),t.append(n),this._options.copyAsHtml?this._initializeRichEditor(n):(this._initializeTextPanel(n),this._options.preventAutoTextSelection||c.delay(this,100,function(){this._$textArea.focus();this._$textArea.select()})),this._bind("dialogresize",function(){n.css("height",t.height()-i.height()-40+"px")}));r.append(t);this._options.excludeTextPanel||n.css("height",t.height()-i.height()-40+"px")},t.prototype._getDefaultLabelText=function(){return a.BrowserCheckUtils.isMacintosh()?s.CopyContentMacintoshHelpText:s.CopyContentPcHelpText},t.prototype._initializeRichEditor=function(n){var t=this;v.using(["VSS/Controls/RichEditor"],function(r){var u=i.BaseControl.createIn(r.RichEditor,n,{noToolbar:!0,height:"100%",pageHtml:t._options.pageHtml,internal:!0});u.ready(function(){u.setValue(t._options.data);u.bindOnCopy(p(t,function(){c.delay(this,0,function(){this.close()})}));c.delay(t,100,function(){u.selectText();u.setEnabled(!1)})})})},t.prototype._initializeTextPanel=function(n){var t="copy-content-textarea";this._options.textAreaCopyClass&&(t=this._options.textAreaCopyClass);this._$textArea=$("<textarea/>").addClass(t).text(this._options.data);this._$textArea.attr("aria-label",s.CopyTextAreaName);this._options.disableEdit&&(this._$textArea.attr("readonly","readonly"),this._$textArea.focus(function(){this._$textArea.select()}));this._$textArea[0].oncopy=p(this,function(){c.delay(this,0,function(){this.close()})});n.append(this._$textArea)},t.enhancementTypeName="CopyContentDialog",t}(d);t.CopyContentDialog=ot;t.show=st;t.showMessageDialog=ht;t.showConfirmNavigationDialog=ct});

define("VSS/Controls/Menus",["require","exports","q","VSS/Context","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Controls","VSS/Controls/PopupContent","VSS/Diag","VSS/Events/Action","VSS/Events/Handlers","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/UI","VSS/Utils/String","VSS/VSS","VSS/ClientTrace/Contracts","VSS/Error","VSS/Telemetry/Services","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g){function wt(n){var t;return n&&(t=n.state|it.None,n.disabled&&(t=t|it.Disabled),n.hidden&&(t=t|it.Hidden),n.toggled&&(t=t|it.Toggled)),t}function fi(n){var t=new v.StableSorter(function(n,t){var i=n.rank?n.rank:9999,r=t.rank?t.rank:9999;return i-r});return t.sort(n,!1)}var yt,ft,ut,it,pt,rt,dt,et,ot,bt,ht,ct,lt,at,gt,ni,ti,vt,kt,ii;Object.defineProperty(t,"__esModule",{value:!0});t.sortMenuItems=t.PopupMenu=t.PopupMenuO=t.Toolbar=t.MenuBar=t.MenuBarO=t.MenuOwner=t.Menu=t.MenuContributionProvider=t.MenuItem=t.MenuBase=t.MenuSelectionMode=t.MenuItemState=t.BLUR_CLOSE_TIMEOUT=t.menuManager=void 0;var nt=y.delegate,st=p.domElem,tt=p.KeyCode,ri=b.handleError,ui=b.getErrorMessage;t.BLUR_CLOSE_TIMEOUT=25,function(n){function t(n){return Boolean(n)&&n.which===2}function i(n){return Boolean(n)&&$(n.target).is("ul.menu")}n.isMiddleClick=t;n.targetIsMenu=i}(yt||(yt={})),function(n){function t(t){return t==="vertical"?n.Vertical:n.Horizontal}n.Horizontal=0;n.Vertical=1;n.parse=t}(ft||(ft={})),function(n){function t(t){switch(t){case"static":return n.Static;case"popup":return n.Popup;case"dropdown":return n.DropDown;case"chevron":return n.Chevron}return n.Normal}n.None=0;n.Normal=1;n.Static=2;n.Popup=3;n.DropDown=4;n.Chevron=5;n.SubMenu=6;n.parse=t}(ut||(ut={})),function(n){n[n.None=0]="None";n[n.Disabled=1]="Disabled";n[n.Hidden=2]="Hidden";n[n.Toggled=4]="Toggled"}(it=t.MenuItemState||(t.MenuItemState={})),function(n){n[n.None=0]="None";n[n.SingleSelect=1]="SingleSelect";n[n.MultiSelect=2]="MultiSelect"}(pt=t.MenuSelectionMode||(t.MenuSelectionMode={})),function(n){function t(t){switch(t){case"right-bottom":return n.RightBottom;case"left-bottom":return n.LeftBottom;case"left-top":return n.LeftTop}return n.RightJustify}n.RightBottom=0;n.RightJustify=1;n.LeftBottom=2;n.LeftTop=3;n.parse=t}(rt||(rt={}));dt=function(){function n(){this._executeEvent="execute-command";this._commandStates=null;this._commandStates={}}return n.prototype.getCommandState=function(n,t){var i=this._commandStates&&this._commandStates[n];return $.isFunction(i)?i.call(t,n,t):i},n.prototype.updateCommandStates=function(n){var t=this;n&&$.each(n,function(n,i){t._commandStates[i.id]=wt(i)})},n.prototype.executeCommand=function(n){this._fireEvent(this._executeEvent,this,n)},n.prototype.attachExecuteCommand=function(n){this.attachEvent(this._executeEvent,n)},n.prototype.detachExecuteCommand=function(n){this.detachEvent(this._executeEvent,n)},n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype._fireEvent=function(n,t,i){var r;if(this._events&&(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r))return!1},n.prototype.attachEvent=function(n,t){this._events||(this._events=new c.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n}();t.menuManager=new dt;et=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._type=ut.parse(i._options.type),i._children=[],i}return __extends(t,n),t.prototype.getOwner=function(){return this._parent?this._parent.getOwner():this},t.prototype.getParent=function(){return this._parent},t.prototype.getParentMenu=function(){return undefined},t.prototype.getContextInfo=function(){return this._options.contextInfo},t.prototype.getActionArguments=function(){var n=this._options.arguments||this.actionArguments;return typeof n=="string"?{url:n}:$.isFunction(n)?n.call(this,this.getOwner().getContextInfo()):n},t.prototype.getMenuType=function(){return this._type},t.prototype.updateCommandStates=function(n){this._updateCommandStates(n)},t.prototype.isMenuBar=function(){return this._type===ut.Static},t.prototype._fireUpdateCommandStates=function(n){(n=n||this,typeof this._options.updateCommandStates!="function"||this._options.updateCommandStates.call(n,n)!==!1)&&this._parent&&this._parent._fireUpdateCommandStates(n)},t.prototype._clear=function(){for(var t=this._children.length,n=0;n<t;n++)this._children[n]._clear(),this._children[n].dispose();this._children=[]},t.prototype._updateCommandStates=function(n){var t=this;this._commandStates||(this._commandStates={});n&&$.each(n,function(n,i){t._commandStates[i.id]=wt(i)})},t.prototype._updateContributedMenuItems=function(n){this._children&&this._children.forEach(function(t){t._updateContributedMenuItems(n)})},t}(e.Control);t.MenuBase=et;b.initClassPrototype(et,{_type:null,_parent:null,_children:null,_commandStates:null,actionArguments:null});ot=function(n){function i(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);i._isPinFocused=!1;i._quenchMouseLeave=!1;i._blockHoverOpenSubMenu=!1;i._isHidden=!1;i._item=i._options.item||{};i.setEnhancementOptions({coreCssClass:i._item.href?"menu-item-container":"menu-item",tagName:"li"});try{i.actionArguments=i._item.arguments}catch(u){}return i._align=rt.parse(i._options.align),i}return __extends(i,n),i.getScopedCommandId=function(n,t){return t?t+"-"+n:n},i.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t)},i.prototype.getParentMenu=function(){return this._parent instanceof ht&&this._parent},i.prototype.getCommandId=function(){return i.getScopedCommandId(this._item.id,this._item.scope)},i.prototype.getAction=function(){var n=this._item.idIsAction;return n===!1?this._item.action:this._item.action||this.getCommandId()||this._item.href},i.prototype.hasAction=function(){var n=this.getAction();return n!==null&&typeof n!="undefined"},i.prototype.hasSubMenu=function(){return!this.isDefault()&&this._item.childItems},i.prototype.isDecorated=function(){return this._item.decorated===!0},i.prototype.isDefault=function(){return this._type===ut.None},i.prototype.isSeparator=function(){return this._item.separator===!0},i.prototype.isLabel=function(){return this.isSeparator()&&this._item.isLabel},i.prototype.isSelected=function(){return this._item.selected===!0},i.prototype.getCommandState=function(n,i){var r=null;return n=n||this._item.id,i=i||this,typeof this._options.getCommandState=="function"&&(r=this._options.getCommandState.call(this,n,i)),(r===null||typeof r=="undefined")&&this._parent&&$.isFunction(this._parent.getCommandState)&&(r=this._parent.getCommandState(n,i)),(r===null||typeof r=="undefined")&&(r=t.menuManager.getCommandState(n,i)),(r===null||typeof r=="undefined")&&this._item.id===n&&(r=wt(i._item)),$.isFunction(r)&&(r=r.call(this,n,this)),r},i.prototype.getIndex=function(){return this._index},i.prototype.setIndex=function(n){this._index=n},i.prototype.setIsHidden=function(n){this._isHidden=n;this._updateState()},i.prototype.isHidden=function(){if(this.isPinnable()&&this._parent&&this._parent.getMenuPinningOptions()){var n=this._parent.getMenuPinningOptions();if(n.hidePinnedItems&&this._isPinned&&!this._item.pinningOptions.neverHide||n.hideUnpinnedItems&&!this._isPinned&&!this._item.pinningOptions.neverHide)return!0}return Boolean((this.getCommandState()&it.Hidden)===it.Hidden||this._type===ut.None||this.isSeparator()&&this._item.hidden||this._isHidden)},i.prototype.isEnabled=function(){return this.isHidden()?!1:this.isSeparator()?void 0:(this.getCommandState()&(it.Disabled|it.Hidden))===it.None},i.prototype.isFocusable=function(){return!this.isHidden()&&this._item&&this._item.focusable!==!1},i.prototype.isToggled=function(){var n=!1;return this.isSeparator()||this.isHidden()||(n=(this.getCommandState()&it.Toggled)===it.Toggled),n},i.prototype.isPinnable=function(){return this._item.pinningOptions&&this._item.pinningOptions.isPinnable},i.prototype.isPinned=function(){return this._isPinned},i.prototype.getSelectionMode=function(){var n=this.getOwner()._options.selectionMode;return typeof n=="undefined"?pt.None:typeof n=="function"?n(this._item):n},i.prototype.initialize=function(){var f=this,t,r,u,i;n.prototype.initialize.call(this);this.isPinnable()&&(t=this.getParentMenu(),r=t&&t.getMenuPinningOptions(),r&&r.isPinningSource?(u=t.getParentMenu(),i=v.first(u._menuItems,function(n){return n._item&&n._item.id===f._item.id}),this._isPinned=i&&i.isPinnable()?i._isPinned:!!this._item.pinningOptions.isPinned):this._isPinned=!!this._item.pinningOptions.isPinned);this._decorate()},i.prototype.update=function(n){var t=this;n!==this._item&&(Object.keys(this._item).forEach(function(n){delete t._item[n]}),$.extend(this._item,n));this._clear();this._item.decorated=!1;this._element.empty();this._unbind("click mouseenter mouseleave mousedown mouseup keydown");this._decorate()},i.prototype.updateItems=function(n){this._clear();this._item.childItems=n},i.prototype._decorate=function(){var n=this._element,u,d,t,f,c,l;!this.isDecorated()&&this._item.href&&(n=$('<a class="menu-item" tabindex="-1"/>').appendTo(n),n.attr("href",this._item.href));this._$menuItemElement=n;var g=this.getOwner()._options.showIcon===!0,a=this.hasSubMenu(),v=this._item.showText!==!1,y=this._item.showHtml!==!1,o,i,s,r,w=!1,b=!1,h=!1,k="mi_"+e.getId();this._item.id&&(k+="_"+this._item.id);n.attr({id:k,tabindex:"-1"});this._element.attr({role:this.getAriaRole(),tabindex:"-1"});this.isDecorated()?r=n.children(".drop").eq(0):(n.addClass(this._options.cssCoreClass).addClass(this._options.cssClass),u=this._item.title,u||this._item.encoded||!this._item.setDefaultTitle&&this._item.showText!==!1?u||(u=""):u=this._item.text,this._element.attr("title",""),this.updateTitle(u),this._item.ariaLabel&&this._element.attr("aria-label",this._item.ariaLabel),this._item.id&&n.attr("command",this._item.id),this._item.cssClass&&n.addClass(this._item.cssClass),this._item.hidden&&n.addClass("invisible"),this._item.focusable===!1&&n.addClass("unfocusable"),this.isSeparator()?(n.addClass("menu-item-separator"),n.attr("role","separator"),n.removeAttr("tabindex"),o=this._createSeparatorElement(),this._item.text&&(o.text(this._item.text),o.removeClass("separator"),o.addClass("text-separator")),n.append(o)):(d=this._item.ariaLabel||this._item.text||this._item.title,g&&!this._item.noIcon&&(typeof this._item.icon=="string"&&this._item.icon.match(/^https?:\/\//)?this._item.icon=this._getExternalIcon.bind(this,this._item.icon):typeof this._item.icon=="string"&&this._item.icon.match(/^css:\/\//)&&(this._item.icon=this._item.icon.substr(6)),t=this._createIconElement(),$.isFunction(this._item.icon)?t.append(this._item.icon.call(this,t)):this._item.icon&&t.addClass(this._item.icon),t.hasClass("bowtie-icon")&&t.removeClass("icon"),v||y&&this._item.html?t.attr("aria-hidden","true"):t.attr("role","button").attr("aria-label",d),n.append(t),w=!0),v&&(i=this._createTextElement(),this._item.encoded?i[0].innerHTML=this._item.text||"":typeof this._item.text=="string"?i.text(this._item.text):$.isFunction(this._item.text)&&i.text(this._item.text.call(this)||""),this._item.textClass&&i.addClass(this._item.textClass),i.attr("role","button"),b=!0,n.append(i)),y&&(h=!0,s=this._createHtmlElement(),f=this._item.html,typeof f=="function"&&(f=f.call(this)),f instanceof jQuery?s.append(this._item.html):typeof f=="string"?s.html(this._item.html):h=!1,this._item.htmlClass&&s.addClass(this._item.htmlClass),n.append(s)),h||b||!w||n.addClass("icon-only"),a&&(this._element.attr({"aria-haspopup":"true","aria-expanded":"false"}),this._item.hideDrop||(r=this._createDropElement(),c=this.getElement().css("display"),c!=="inline-block"&&c!=="table-cell"?n.prepend(r):n.append(r),n.addClass("drop-visible"))),this.isPinnable()&&!this._item.pinningOptions.hidePin&&(n.addClass("pin-visible"),this._pinElement=$("<i class='pin bowtie-icon' />"),this._pinElement.click(this._onPinClick.bind(this)),this._pinElement.attr({id:n.attr("id")+"_pin",role:"button",tabindex:"-1"}),n.append(this._pinElement))));this._updateState();l=this.isSelected();n.toggleClass("selected",l);l?this._element.attr("aria-checked","true"):this._element.removeAttr("aria-checked");this.isDefault()||this.isSeparator()?this.isSeparator()&&this._bind("click",function(n){n.stopPropagation()}):(this._bind("click",nt(this,this._onClick)),this._bind("mouseenter",nt(this,this._onMouseEnter)),"onpointerdown"in this._element[0]||this._bind("touchstart",nt(this,this._onTouchStart)),this._bind("pointerdown",nt(this,this._onPointerDown)),this._bind("pointerup",nt(this,this._onPointerUp)),this._bind("mouseleave",nt(this,this._onMouseLeave)),this._bind("mousedown",nt(this,this._onMouseDown)),this._bind("mouseup",nt(this,this._onMouseUp)),this._bind("keydown",this._onKeyDown.bind(this)),a&&r&&r.length>0&&this._bind(r,"click",nt(this,this._onDropClick)));this.getOwner()._options.markUnselectable===!0&&p.makeElementUnselectable(n[0])},i.prototype._getExternalIcon=function(n){return $("<img/>").attr("src",n)},i.prototype.select=function(n,t){n===void 0&&(n=!1);t===void 0&&(t=!0);this._parent._selectItem(this,n,t);this._parent._clearTimeouts()},i.prototype.focusPin=function(n){n===void 0&&(n=!0);this._isPinFocused=n;this._pinElement&&(this._pinElement.toggleClass("focus",this._isPinFocused),n&&p.tryFocus(this._pinElement))},i.prototype.deselect=function(){this._parent._selectItem(null)},i.prototype.escaped=function(){this.select()},i.prototype.execute=function(n){n;var t=this.getOwner();return this.collapse({immediate:!0}),t.escaped(),t.isMenuBar()&&n&&n.keepHighlight&&this.showHoverHighlight(),t._proceedBlur(),this.hasAction()?this.executeAction($.extend({},t.getActionArguments(),this.getActionArguments()),n?n.e:null):void 0},i.prototype.executeAction=function(n,i){var r=this.getAction(),l=this.getOwner(),e=r==="navigate"&&n.url||this._item.href,o,s,u,f;if(r){if(n.telemetry&&n.telemetry.area&&n.telemetry.feature&&g.publishEvent(new g.TelemetryEventData(n.telemetry.area,n.telemetry.feature,{CommandId:this.getCommandId()||"Unknown",GroupId:this._item.groupId,ContributionId:this._item.contributionId})),o=i&&(i.ctrlKey||i.metaKey),$.isFunction(r)&&!(e&&o)&&(s=r.apply(this,[n,i]),!e||s===!1))return s;if(e){try{u=n.url;u||(u=this._item.href);f=null;n.target&&(f=n.target);o&&(f="_blank");f?h.getService().performAction(h.CommonActions.ACTION_WINDOW_OPEN,{url:u,target:n.target}):h.getService().performAction(h.CommonActions.ACTION_WINDOW_NAVIGATE,{url:u})}catch(i){}return!1}return l?l.executeAction(new c.CommandEventArgs(r,n,this)):t.menuManager.executeCommand(new c.CommandEventArgs(r,n,this))}},i.prototype.collapse=function(n){for(var t=this._parent,i=n&&n.immediate===!0;t;)$.isFunction(t.hide)&&t.hide({immediate:i}),t=t._parent;this.getOwner().ownFocus()},i.prototype.setFocus=function(n){n===void 0&&(n=!0);var t=this._$menuItemElement;!t||this.isSeparator()||this.isDefault()||t.addClass("focus");t&&p.tryFocus(this._element)},i.prototype.removeFocus=function(){var n=this._$menuItemElement;!n||this.isSeparator()||this.isDefault()||n.removeClass("focus");this.focusPin(!1)},i.prototype.showHoverHighlight=function(){this._highlightHover=!0;this._updateState()},i.prototype.showPressedHighlight=function(){this.hasSubMenu()&&this.getSubMenu()._visible||(this._highlightPressed=!0,this._updateState())},i.prototype.removePressedHighlight=function(){this._highlightPressed&&(this._highlightPressed=!1,this._updateState())},i.prototype.removeHighlight=function(){this._highlightHover=!1;this._highlightPressed=!1;this._updateState()},i.prototype.updateTitle=function(n){this._setTooltip(null);this._item.setTitleOnlyOnOverflow&&this._item.showText!==!1?(n||(n=this._item.text),this._setTooltip(n,{onlyShowWhenOverflows:this._$menuItemElement[0],setAriaDescribedBy:!0})):(n&&!this.getParentMenu().openSubMenuOnHover&&this._setTooltip(n,{setAriaDescribedBy:!0}),this._item.showText!==!1||this._item.ariaLabel||this._element.attr("aria-label",n));this._options.item&&(this._options.item.title=n)},i.prototype._setTooltip=function(n,t){var i=this;this._tooltip&&this._tooltip.dispose();this._tooltip=n?o.RichContentTooltip.add(n,this._element[0],__assign({menuContainer:this._element,mouseEventFilter:function(n){return!(i.hasSubMenu()&&i.getSubMenu()._element[0].contains(n.target))}},t)):null},i.prototype.updateText=function(n){var t;typeof n=="string"?t=n:this._item&&$.isFunction(this._item.text)&&(t=this._item.text.call(this));t&&this._$menuItemElement.children("span.text").text(t)},i.prototype.getSubMenu=function(n){var t,i;return n===void 0&&(n=!0),t=null,this.hasSubMenu()&&(this._children.length===0?n&&(i=this._parent&&this._parent._parent&&this._parent._parent._element||this._$menuItemElement,t=e.create(ht,i,$.extend({},this._options,this._item.childOptions,{earlyInitialize:!1,items:this._item.childItems,type:"submenu",cssCoreClass:"menu sub-menu",tagName:"ul",ariaLabel:this._item.ariaLabel})),t._element.addClass("menu"),t._element.attr("data-parent",this._$menuItemElement.attr("id")),t._parent=this,t._type=ut.SubMenu,this._children.push(t)):t=this._children[0]),t},i.prototype.tryShowSubMenu=function(n){var t=n&&n.immediate;return!this.isDefault()&&this.isEnabled()&&this.getSubMenu()?(this.showSubMenu({immediate:t}),!0):!1},i.prototype.showSubMenu=function(n){var i=n&&n.immediate===!0,r=n?n.showTimeout:undefined,u=n?n.callback:undefined,t=this.getSubMenu(),f=this._item.splitDropItem?this._item.splitDropItem:this,e=(n&&n.setFocus)!==!1;this._closeSubmenuOnMouseLeave=n&&n.closeOnMouseLeave;t.show({immediate:i,showTimeout:r,callback:u,element:f._$menuItemElement,align:this._align,setFocus:e})},i.prototype.hideSubMenu=function(n){var r=this;if(this.hasSubMenu()){var u=n&&n.immediate===!0,i=n&&n.callback,t=this.getSubMenu(!1);t&&t._parent===this&&t.hide({immediate:u,callback:function(){r._closeSubmenuOnMouseLeave=!1;typeof i=="function"&&i()}})}},i.prototype.hideSiblings=function(n){this._parent.hideChildren(this,n)},i.prototype.getAriaRole=function(){switch(this.getSelectionMode()){case pt.MultiSelect:return"menuitemcheckbox";case pt.SingleSelect:return"menuitemradio"}return"menuitem"},i.prototype._attachMenuEvents=function(){},i.prototype._createIconElement=function(){return $(st("span","icon menu-item-icon"))},i.prototype._createTextElement=function(){return $(st("span","text"))},i.prototype._createHtmlElement=function(){return $(st("span","html"))},i.prototype._createDropElement=function(){return $(st("div","drop"))},i.prototype._createSeparatorElement=function(){return $(st("div","separator"))},i.prototype._updateState=function(){var n,r,t;this._disposed||(n=this._$menuItemElement,!n||this.isSeparator()||this.isDefault()||(r=(this._item.splitDrop||this._item.splitDropItem||{})._$menuItemElement,this.isEnabled()?(n.toggleClass("hover",this._highlightHover),n.toggleClass("pressed",this._highlightPressed),this._element.attr("aria-disabled","false"),n.removeClass("disabled"),r&&r.toggleClass("split-drop-hover",this._highlightHover)):(n.addClass("disabled"),this._element.attr("aria-disabled","true"),n.removeClass("hover"),n.removeClass("pressed")),this._pinElement&&this._pinElement.toggleClass("focus",this._isPinFocused),n.toggleClass("toggle-on",this.isToggled())),n&&!this.isDefault()&&n.toggleClass("invisible",this.isHidden()),this._pinElement&&(this._pinElement.toggleClass(i.PinnedIconClass,this._isPinned),this._pinElement.toggleClass(i.UnpinnedIconClass,!this._isPinned),this._pinElement.attr("title",this._isPinned?l.MenuItemUnpinButtonLabel:l.MenuItemPinButtonLabel),t=null,this._isPinned?(i._unpinDescribedById||(i._unpinDescribedById=String(e.getId()),$(st("div")).attr("id",i._unpinDescribedById).addClass("visually-hidden").text(l.UnpinDescribedByText).appendTo(document.body)),t=i._unpinDescribedById):(i._pinDescribedById||(i._pinDescribedById=String(e.getId()),$(st("div")).attr("id",i._pinDescribedById).addClass("visually-hidden").text(l.PinDescribedByText).appendTo(document.body)),t=i._pinDescribedById),this._element.attr("aria-describedby",t)))},i.prototype._updateContributedMenuItems=function(t){var i=[this._item],r=function(n,i,u){for(var f,o=!1,e=0,s=t;e<s.length;e++)if(f=s[e],n.id===f.id&&n.sourceExtensionId===f.sourceExtensionId){u[i]=f;o=!0;break}!o&&$.isArray(n.childItems)&&n.childItems.forEach(r)};i.forEach(r);i[0]!==this._item?this.update(i[0]):n.prototype._updateContributedMenuItems.call(this,t)},i.prototype._onPointerDown=function(n){var i=n.originalEvent;if(i.pointerType==="touch"){var r=this.hasSubMenu()&&this.getParentMenu().openSubMenuOnHover,t=this._children&&this._children[0],u=t&&t._visible;r&&(!u||t.shownTime>Date.now()-100)&&(this._handledPointerId=i.pointerId)}},i.prototype._onPointerUp=function(n){var t=n.originalEvent;t.pointerId===this._handledPointerId&&(this._blockClickUntil=Date.now()+500);this._handledPointerId=null},i.prototype._onTouchStart=function(n){!this.hasSubMenu()||!this.getParentMenu().openSubMenuOnHover||this._children&&this._children[0]&&this._children[0]._visible?this._onClick(n):(this._onMouseEnter(n),n.preventDefault())},i.prototype._onMouseEnter=function(n){var i,t,r,u,f;for(s.logTracePoint("MenuItem._onMouseEnter.start"),i=n.target;i&&i.tagName.toUpperCase()!=="UL";)i=i.parentElement;i===this._parent._element[0]&&(t=this.getOwner(),!this._blockHoverOpenSubMenu&&(t._active||t.openSubMenuOnHover)?(t.activate(),r=t._subMenuVisible,this.hideSiblings({immediate:this._options.immediateShowHide}),this.select(!0),(t!==this._parent||r||t.openSubMenuOnHover)&&(t._subMenuVisible=r,this.isEnabled()&&this.hasSubMenu()&&(u=this.getSubMenu(),u._parent===this&&(u._visible||(f=t.openSubMenuOnHover&&t===this._parent,this.showSubMenu({immediate:f&&!r?!1:this._options.immediateShowHide,showTimeout:f&&!r?200:undefined,closeOnMouseLeave:f,callback:function(){u.selectDefaultItem(!0)},setFocus:!1})))))):this.showHoverHighlight())},i.prototype._onMouseLeave=function(n){var r=this,i=this.getOwner(),t;if(this._quenchMouseLeave){this._quenchMouseLeave=!1;n.stopPropagation();return}this._closeSubmenuOnMouseLeave&&this.hideSubMenu({immediate:!1,hideTimeout:200,callback:function(){return r.removeHighlight()}});i._active?i!==this._parent?this.hasSubMenu()?(t=this.getSubMenu(),t._parent===this?t._visible||(this.deselect(),t._clearTimeouts()):this.deselect()):this.deselect():this.hasSubMenu()&&this.getSubMenu()._visible||this.removeHighlight():this.removeHighlight()},i.prototype._onMouseDown=function(n){this.showPressedHighlight();n.stopPropagation();n.preventDefault()},i.prototype._onMouseUp=function(){this.removePressedHighlight()},i.prototype._onClick=function(n){var u=this,t,i,r;if(yt.targetIsMenu(n))return!1;if(!yt.isMiddleClick(n)){if(this._blockClickUntil&&Date.now()<this._blockClickUntil){n.stopPropagation();n.preventDefault();return}if(i=this.actionArguments,i||(i={}),i.clickArguments||(i.clickArguments={}),$.extend(i.clickArguments,n),this.isEnabled()){if(this.hasSubMenu()&&this._item.clickOpensSubMenu!==!1)t=this.getSubMenu(),this.select(),t._parent===this&&t._visible?(this.getOwner().activate(),this._options.clickToggles===!0?(t.hide({immediate:!0}),this._blockHoverOpenSubMenu=!0,r=function(){u._blockHoverOpenSubMenu=!1;u._unbind("mouseleave",r)},this._bind("mouseleave",r),this.select()):t.ownFocus()):(this.getOwner().activate(),this.hideSiblings({immediate:!0}),this.showSubMenu({immediate:!0}),t.selectDefaultItem());else if(this.hasAction())return this.select(),this.execute({e:n,keepHighlight:this._parent.getMenuType()!==ut.SubMenu})===!0}else this.getOwner().activate(),this.hideSiblings({immediate:!0}),this.select();n.stopPropagation();n.preventDefault()}},i.prototype._onDropClick=function(){var n;return this.isEnabled()&&(this.getOwner().activate(),this.hasSubMenu()&&(n=this.getSubMenu(),n._parent===this&&n._visible?this._options.clickToggles===!0?(n.hide({immediate:!0}),this.select()):n.ownFocus():(this.hideSiblings({immediate:!0}),this.showSubMenu({immediate:!0}),n.selectDefaultItem()))),!1},i.prototype._onPinClick=function(n){n.stopPropagation();n.preventDefault();this.toggleIsPinned()},i.prototype.toggleIsPinned=function(n,t){var i,f,e,s,h,y,c,p,u,l,a,w,g,v,b,r,o,nt,k,d;if(n===void 0&&(n=!this._isPinned),this._isPinned=n,this._updateState(),i=this.getParentMenu(),f=i&&i.getMenuPinningOptions()||{},i&&i.updateAriaSetProperties(),e=[],f.isPinningSource)s=i.getParentMenu(),e.push(s);else if(f.isPinningTarget)for(s=i,h=0,y=this._parent._menuItems;h<y.length;h++)r=y[h],r.hasSubMenu()&&(c=r.getSubMenu(),p=c&&c.getMenuPinningOptions(),p&&p.isPinningSource&&e.push(c));if(e.length>0){for(l=void 0,a=0,w=e;a<w.length;a++){for(g=w[a],v=0,b=g._menuItems;v<b.length;v++)r=b[v],r.isPinnable()&&r._item.pinningOptions.groupId===this._item.pinningOptions.groupId&&(l=r),r._item.id===this._item.id&&(u=r);if(u)break}u&&(u._isPinned=this._isPinned,u._updateState(),o=u.getParentMenu(),o&&(o.updateAriaSetProperties(),l&&o.getMenuPinningOptions().pinItemsToEnd&&o.moveMenuItemAfter(u,l)))}if(f.closeOnPin&&(!t||t.unfocus)&&(this._quenchMouseLeave=!0,this._parent.selectLeft()),i&&!f.closeOnPin&&(nt=i.selectPrevItem()||i.selectNextItem(),nt||(i.hide({immediate:!0}),k=i.getParentMenu(),k&&k.selectFirstItem())),s.updateSourceMenu(this._item.pinningOptions.groupId),d=this._item.pinningOptions,d.onPinnedChanged)d.onPinnedChanged(this,this._isPinned,u)},i.prototype._onKeyDown=function(n){var i=function(){return!n.ctrlKey&&!n.altKey&&!n.shiftKey&&!n.metaKey},t;switch(n.keyCode){case tt.RIGHT:if(i()&&!this._isPinFocused&&this.isPinnable()&&!this._item.pinningOptions.hidePin)return this.focusPin(),!1;break;case tt.LEFT:if(i()&&this._isPinFocused)return this.focusPin(!1),this.select(),!1;break;case tt.SPACE:case tt.ENTER:return this.isEnabled()&&(this._isPinFocused?(this._element.focus(),this.toggleIsPinned()):this.hasAction()?this.execute({e:n}):this.hasSubMenu()&&(t=this.getSubMenu(!1),t&&t._visible||(this.hideSiblings({immediate:!0}),this.showSubMenu({immediate:!0}),this.getSubMenu().selectFirstItem()))),!1}},i.enhancementTypeName="tfs.menu.item",i.PinnedIconClass="bowtie-unpin",i.UnpinnedIconClass="bowtie-pin-unpin",i}(et);t.MenuItem=ot;b.initClassPrototype(ot,{_item:null,_align:null,_index:0,_highlightHover:!1,_highlightPressed:!1});bt=function(){function n(n,t,i,r,u,e,o){this._menu=n;this._webContext=t;this._contributionIds=i;this._contributionType=r;this._contributionQueryOptions=u||f.ContributionQueryOptions.IncludeRecursiveTargets;this._getMenuActionContext=e;this._options=o||{}}return n.prototype._immediateInstanceRequired=function(n){return n.id&&f.ExtensionHelper.hasContent(n)&&!n.properties.text},n.prototype._getContributions=function(){var n=this;return this._contributionsPromise||(this._contributionsPromise=this._contributionIds&&this._contributionIds.length?a.getService(f.ExtensionService).queryContributions(this._contributionIds,this._contributionQueryOptions,this._contributionType).then(function(t){var r=i.defer(),u=[];return t.forEach(function(t){var i=n._getContributionWithSource(t);i&&u.push(i)}),i.allSettled(u).then(function(n){var t=[];n.forEach(function(n){n.state==="rejected"&&console.error(n.reason);n.state==="fulfilled"&&n.value&&t.push(n.value)});r.resolve(t)},r.reject),r.promise}):i.resolve([])),this._contributionsPromise},n.prototype._getContributionWithSource=function(t){var r=t.id||"";return this._immediateInstanceRequired(t)?u.getBackgroundInstance(t,t.properties.registeredObjectId||r,this._webContext,this._webContext,this.getContributionSourceTimeout(),"Timed-out waiting for menu source provider for contribution: "+r).then(function(n){return{contribution:t,source:n}}):t.type===n.ACTION_TYPE||t.type===n.HYPERLINK_ACTION_TYPE?i.resolve({contribution:t}):null},n.prototype._makeThennable=function(n){return n&&$.isFunction(n.then)?n:i.resolve(n)},n.prototype._contributionToMenuItems=function(t,r){var e=this,f=t.contribution.id||"",u;return t.source?(u=i.defer(),$.isFunction(t.source.getMenuItems)?(r=$.extend({updateMenuItems:function(n){e._updateContributedMenuItems(n,t)}},r),this._makeThennable(t.source.getMenuItems(r)).then(function(n){n&&n.length?i.all(n.map(function(n){return e._updateContributedMenuFromSource(n,t.contribution,t.source)})).then(function(n){u.resolve(n)}):u.resolve(n)},u.reject)):this._getBasicMenuItemFromContribution(f,t.contribution,t.source).then(function(n){u.resolve([n])}),i.timeout(u.promise,n._contributionGetItemsTimeout,"Timed-out waiting for getMenuItems call from contribution: "+f)):this._immediateInstanceRequired(t.contribution)?i.resolve([]):this._getBasicMenuItemFromContribution(f,t.contribution,t.source).then(function(n){return[n]})},n._getMenuItemFromContributedMenuItem=function(t){var r={id:t.id,text:t.text,title:t.title,separator:t.separator,disabled:t.disabled,hidden:t.hidden,icon:t.icon,noIcon:t.noIcon,groupId:t.groupId,action:t.action,href:t.href,setDefaultTitle:!1};return t.pinningOptions&&(r.pinningOptions=t.pinningOptions),t.pinningMenuOptions&&(r.pinningMenuOptions=t.pinningMenuOptions),t.childItems&&($.isArray(t.childItems)?r.childItems=t.childItems.map(function(t){return n._getMenuItemFromContributedMenuItem(t)}):i.isPromise(t.childItems)&&(r.childItems=function(i,r,u){t.childItems.then(function(t){r((t||[]).map(function(t){return n._getMenuItemFromContributedMenuItem(t)}))},u)})),r},n.prototype._updateContributedMenuFromSource=function(t,u,e,o){var c=this,s;o===void 0&&(o=!0);s=o?n._getMenuItemFromContributedMenuItem(t):t;s.action=this._getMenuAction(u,e,s.action);var h=null,l=a.getService(f.ExtensionService).getBaseUri(u),v=f.ExtensionHelper.getPublisherId(u),y=f.ExtensionHelper.getExtensionId(u);return typeof s.icon=="string"&&(h=f.ExtensionHelper.resolveUriTemplate(s.icon,r.getDefaultWebContext(),l)),s.isContribution=!0,s.sourceExtensionId=v+"."+y,s.contributionId=u.id,s.title&&!s.text&&s.text!==""&&(this._options.defaultTextToTitle===!1&&s.icon?(s.showText=!1,s.showHtml=!1):s.text=s.title),o&&!s.groupId&&(s.groupId=u.properties.groupId),$.isArray(s.childItems)&&s.childItems.forEach(function(n){c._updateContributedMenuFromSource(n,u,e,!1)}),h?h.then(function(n){return s.icon=n,s}):i.resolve(s)},n.prototype._getBasicMenuItemFromContribution=function(n,t,i){var e=this,o=t.properties.text||null,u=t.properties.title||null,s=this._makeThennable("");return typeof t.properties.icon=="string"&&(s=f.ExtensionHelper.resolveUriTemplateProperty(t,r.getDefaultWebContext(),"icon")),s.then(function(r){var s={id:n,text:o,title:u,icon:r,groupId:t.properties.groupId,action:e._getMenuAction(t,i,null),isContribution:!0,sourceExtensionId:f.ExtensionHelper.getPublisherId(t)+"."+f.ExtensionHelper.getExtensionId(t),contributionId:n};return o===null&&u&&(e._options.defaultTextToTitle===!1&&r?(s.showText=!1,s.showHtml=!1):s.text=u),s})},n.prototype._getMenuAction=function(t,i,r){var e=this,o;return!r&&t.type===n.ACTION_TYPE?function(){u.getBackgroundInstance(t,t.properties.registeredObjectId||t.id,e._webContext,e._webContext,e.getContributionSourceTimeout(),"Timed-out waiting for menu action: "+t.id).then(function(n){n.execute(e._getMenuActionContext())})}:$.isFunction(r)?function(){return f.ExtensionHelper.publishTraceData(t),r(e._getMenuActionContext())}:t.properties.targetUri?function(){var n=a.getService(f.ExtensionService).getBaseUri(t),i=f.ExtensionHelper.resolveUriTemplate(t.properties.targetUri,e._getMenuActionContext(),n);i.then(function(n){f.ExtensionHelper.publishTraceData(t,n);window.location.href=n})}:i&&$.isFunction(i.execute)?function(){return f.ExtensionHelper.publishTraceData(t),i.execute(e._getMenuActionContext())}:o},n.prototype._updateContributedMenuItems=function(n,t){var r=this;this._menu&&i.all(n.map(function(n){return r._updateContributedMenuFromSource(n,t.contribution,t.source)})).then(function(n){r._menu.updateContributedMenuItems(n)})},n.prototype.getContributedMenuItems=function(n){var t=this;return this._getContributions().then(function(r){var u=[];return r.forEach(function(i){u.push(t._contributionToMenuItems(i,n))}),i.allSettled(u).then(function(n){var t=[];return n.forEach(function(n){n.value&&n.value.length&&n.value.forEach(function(n){t.push(n)})}),t})})},n.prototype.getContributionSourceTimeout=function(){return this._menu&&this._menu._options&&this._menu._options.contributionSourceTimeoutMs||n.DEFAULT_CONTRIBUTION_SOURCE_TIMEOUT},n.ACTION_TYPE="ms.vss-web.action",n.HYPERLINK_ACTION_TYPE="ms.vss-web.hyperlink-action",n.DEFAULT_CONTRIBUTION_SOURCE_TIMEOUT=5e3,n._contributionGetItemsTimeout=2e3,n}();t.MenuContributionProvider=bt;ht=function(n){function i(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._mouseIsDown=!1,i._shouldSelectFirstItem=!1,i.setEnhancementOptions({role:"menu",coreCssClass:"menu"+(i._options.useBowtieStyle?" bowtie-menus":""),tagName:"ul"}),i._menuItems=[],i._initializeItemsSource(),i}return __extends(i,n),Object.defineProperty(i.prototype,"shownTime",{get:function(){return this._shownTime},enumerable:!1,configurable:!0}),i.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t);this.openSubMenuOnHover=t.alwaysOpenSubMenuOnHover},i.prototype.initialize=function(){n.prototype.initialize.call(this);this._options.suppressInitContributions||this.refreshContributedItems();this._decorate()},i.prototype._initializeItemsSource=function(){this._itemsSource=this._options.items},i.prototype._decorate=function(){this._element.addClass(this._options.cssCoreClass).addClass(this._options.cssClass).attr("tabindex","-1").attr("aria-label",this._options.ariaLabel);this._bind("mousedown",nt(this,this._onMouseDown));this._bind("keydown",this._onMenuKeyDown.bind(this));this._itemsSource=this.getGroupedItems();this._ensureChildren()},i.prototype.getItem=function(n){for(var i,t=0,r=this._menuItems.length;t<r;t++)if(i=this._menuItems[t],i&&n===i.getCommandId())return i;return null},i.prototype.getItems=function(){return this._menuItems},i.prototype.getItemByTag=function(n){for(var i,t=0,r=this._menuItems.length;t<r;t++)if(i=this._menuItems[t],i&&n===i._item.tag)return i;return null},i.prototype.getMenuItemSpecs=function(){return this._items},i.prototype.getParentMenu=function(){return this._parent&&this._parent._parent instanceof i&&this._parent._parent},i.prototype.getMenuPinningOptions=function(){var n=this._options.item;return n&&n.pinningMenuOptions?n.pinningMenuOptions:this._options.pinningMenuOptions},i.prototype.getCommandState=function(n,t){t=t||this;var i=null;return $.isFunction(this._options.getCommandState)&&(i=this._options.getCommandState.call(t,n,t)),(i===null||typeof i=="undefined")&&(i=this._commandStates&&this._commandStates[n]),(i===null||typeof i=="undefined")&&this._parent&&$.isFunction(this._parent.getCommandState)&&(i=this._parent.getCommandState(n,t)),$.isFunction(i)&&(i=i.call(t,n,t)),i},i.prototype.updateCommandStates=function(t){n.prototype.updateCommandStates.call(this,t);this._skipUpdateMenuItemStates||this._updateMenuItemStates()},i.prototype.updateItems=function(n){this._updateItems(n,!0)},i.prototype._updateItems=function(n,t){if(!this._disposed){var i=this._menuItems.length;this._updateItemsWithContributions(n,this._contributedItems||[]);t&&this._refreshContributedMenuItems();i===0&&this._menuItems.length>0&&this._visible&&this._parent&&this._parent._element&&this._parent._element[0]===document.activeElement&&this.selectFirstItem()}},i.prototype._updateItemsWithContributions=function(n,t){this._disposed||(this._fire("menuUpdatingContributedItems",{source:this,existingItems:n,contributedItems:t}),n||(n=[]),$.isArray(n)&&(n=$.grep(n,function(n){return!n.isContribution}),t&&t.length&&(n=n.concat(t))),this._contributedItems=t,this._updateCombinedSource(n),this._fire(i.CONTRIBUTION_ITEMS_UPDATED_EVENT,{source:this,existingItems:n,contributedItems:t}))},i.prototype._updateCombinedSource=function(n){var t,i,r;if(!this._disposed){if(i=!1,this._element[0].contains(document.activeElement)&&document.activeElement instanceof HTMLLIElement&&(i=!0,t=this._selectedItem&&this._selectedItem.getCommandId(),this._parent instanceof et&&this._parent.focus()),this._parent instanceof et&&n&&this._parent.getElement().attr({"aria-haspopup":String(n.length>0),"aria-expanded":this._visible}),this._asyncLoadingDelay||this._contributedItemsDelay){this._menuUpdateNeeded=!0;this._itemsSource=n;this.getOwner().focus();return}this._clear();this._itemsSource=n;this._initialized&&(this._menuUpdateNeeded=!1,this._itemsSource=this.getGroupedItems(),this._ensureChildren(),this.updateMenuItemStates(),$.isFunction(this._positioningRoutine)&&this._positioningRoutine.call(this),i&&(r=t&&this.getItem(t),r?r.select():this.selectFirstItem()),this._shouldSelectFirstItem&&(this._shouldSelectFirstItem=!1,this.selectFirstItem()))}},i.prototype.getGroupedItems=function(){var n,t,i;if(!$.isArray(this._itemsSource)||(n=[],t={__ungrouped__:[]},this._itemsSource.forEach(function(n){n.groupId&&(!n.separator||n.separator&&n.text)?t[n.groupId]?t[n.groupId].push(n):t[n.groupId]=[n]:t.__ungrouped__.push(n)}),t.__ungrouped__.length===this._itemsSource.length))return this._itemsSource;for(i=null,t.__ungrouped__=t.__ungrouped__.reduce(function(n,t,r,u){return t.separator&&!t.text&&(i&&i.separator||n.length===0||r===u.length-1)||n.push(t),i=t,n},[]),$.each(t,function(t,i){if(t==="__ungrouped__")return!0;Array.prototype.push.apply(n,i);n.push({separator:!0,isGroupSeparator:!0})}),(t.__ungrouped__.length===0||this._options.doNotSeparateUngroupedItems)&&n.splice(n.length-1,1),Array.prototype.push.apply(n,t.__ungrouped__);n.length>0&&n[n.length-1].separator;)n.splice(n.length-1,1);return n},i.prototype.appendItems=function(n){$.isArray(n)&&n.length&&this.updateItems((this._itemsSource||[]).slice(0).concat(n))},i.prototype.appendItem=function(n){this._createChildMenuItem(n);this._items.push(n)},i.prototype.moveMenuItemAfter=function(n,t){var i;if(n===t)return!0;var f=this._children.indexOf(n),r=this._menuItems.indexOf(n),e=this._items.indexOf(n._item),o=this._children.indexOf(t)+1,u=this._menuItems.indexOf(t)+1,s=this._items.indexOf(t._item)+1;if(f<0||r<0||e<0||o<0||u<0||s<0)return!1;for(v.reorder(this._children,f,o,1),v.reorder(this._menuItems,r,u,1),v.reorder(this._items,e,s,1),i=Math.min(r,u);i<this._menuItems.length;i++)this._menuItems[i].setIndex(i);return n._element.detach(),n._element.insertAfter(t._element),!0},i.prototype.removeItem=function(n){for(var i,t=0,r=this._children;t<r.length;t++)if(i=r[t],i instanceof ot&&i._item===n)return this.removeMenuItem(i);return!1},i.prototype.removeMenuItem=function(n){var t=this._children.indexOf(n),i=this._menuItems.indexOf(n),r=this._items.indexOf(n._item);return t<0||r<0?!1:(this._children.splice(t,1),i>=0&&this._menuItems.splice(i,1),this._items.splice(r,1),n.dispose(),!0)},i.prototype._updateAllSourceMenus=function(){var t=this,n=[];this._items.forEach(function(i){i.pinningOptions&&n.indexOf(i.pinningOptions.groupId)<0&&(n.push(i.pinningOptions.groupId),t.updateSourceMenu(i.pinningOptions.groupId))})},i.prototype.updateSourceMenu=function(n){var i=this.getMenuPinningOptions()||{},r,t;i.isPinningTarget&&i.hideEmptySourceMenu&&(r=v.first(this._menuItems,function(t){return t._item&&t._item.pinningOptions&&t._item.pinningOptions.groupId===n&&!t.isPinned()}),t=v.first(this._menuItems,function(t){var r=t.getSubMenu(),i=r&&r.getMenuPinningOptions();return i&&i.isPinningSource&&i.groupId===n}),t)&&t.setIsHidden(!r)},i.prototype._enhance=function(t){n.prototype._enhance.call(this,t);this._enhanceChildren()},i.prototype._getMenuItemType=function(){return ot},i.prototype.getMenuItemOptions=function(n,t){return $.extend({earlyInitialize:!1,item:n,align:this.getMenuItemAlignment(),overflow:this._options.overflow},t)},i.prototype._getFirstMenuItem=function(){return this._getNextEnabledItem(0)},i.prototype._selectItem=function(n,t,i){if((t===void 0&&(t=!1),i===void 0&&(i=!0),this._selectedItem&&this._selectedItem!==n&&(this._selectedItem.removeHighlight(),this._selectedItem.removeFocus()),this._selectedItem=n,n)&&(n.showHoverHighlight(),!t)){var r=this.getOwner();r._focusItem=n;this._selectedItem.setFocus(i)}},i.prototype.selectDefaultItem=function(n){n||p.tryFocus(this._element)},i.prototype.selectFirstItem=function(){var n=this._getFirstMenuItem();return n?(this._selectItem(n),!0):(this._shouldSelectFirstItem=!0,!1)},i.prototype.selectLastItem=function(){var n=this._getPrevEnabledItem(-1,{rollOver:!0});n&&this._selectItem(n)},i.prototype.selectNextItem=function(){var t=0,r=this._menuItems,i=this._selectedItem,n;return r.length>0&&(i&&(t=i.getIndex()+1),n=this._getNextEnabledItem(t),n)?(n.select(),!0):!1},i.prototype.selectPrevItem=function(){var t=-1,r=this._menuItems,i=this._selectedItem,n;return r.length>0&&(i&&(t=i.getIndex()-1),n=this._getPrevEnabledItem(t),n)?(n.select(),!0):!1},i.prototype.selectDown=function(){if(this._menuItems.length>0){var n=this._getNextFocusableItem(this._selectedItem?this._selectedItem.getIndex()+1:0,{rollOver:!0});if(n)return n.select(),this._ensureVisible(n),!0}return!1},i.prototype.selectUp=function(){if(this._menuItems.length>0){var n=this._getPrevFocusableItem(this._selectedItem?this._selectedItem.getIndex()-1:-1,{rollOver:!0});if(n)return n.select(),this._ensureVisible(n),!0}return!1},i.prototype.selectRight=function(){return this._selectedItem&&this._selectedItem.tryShowSubMenu({immediate:!0})?(this._selectedItem.getSubMenu().selectFirstItem(),!0):this.getOwner()!==this?this.getOwner().selectRight({redirected:!0}):void 0},i.prototype.selectLeft=function(){return this._parent&&this._parent._parent!==this.getOwner()?(this.hide({immediate:!0}),this._parent.select(),!0):this.getOwner()!==this?this.getOwner().selectLeft({redirected:!0}):void 0},i.prototype.show=function(n){var f=n&&n.immediate===!0,e=n?n.showTimeout:undefined,t=n&&n.callback,i=n?n.element:null,r=n?n.align:rt.RightJustify,u=(n&&n.setFocus)!==!1;if(!i)throw new Error("options.element is required.");return f?(this._showPopup(i,r,u),t&&t()):this._startShowTimeout(i,r,u,e||this.getOwner()._options.showTimeout,t),!0},i.prototype.hide=function(n){var i=n&&n.immediate===!0,r=n?n.hideTimeout:undefined,t=n?n.callback:undefined;i?(this._hidePopup(),t&&t()):this._startHideTimeout(r||this.getOwner()._options.hideTimeout,t)},i.prototype.hideChildren=function(n,t){var i,f,r,u=this._children,e=t&&t.immediate===!0,o=n&&n._item&&n._item.splitDrop;if($.isArray(u))for(i=0,f=u.length;i<f;i++)r=u[i],r!==n&&r!==o&&r.hideSubMenu({immediate:e})},i.prototype.escape=function(){return this.hide({immediate:!0}),this._parent&&this._parent.escaped(),!0},i.prototype.ownFocus=function(){this._selectItem(this._selectedItem)},i.prototype.attach=function(n){this._parent!==n&&this._visible&&this.hide({immediate:!0});this._parent=n},i.prototype.getMenuItemAlignment=function(){return"right-justify"},i.prototype.updateMenuItemStates=function(){try{this._skipUpdateMenuItemStates=!0;this._fireUpdateCommandStates(this)}finally{this._skipUpdateMenuItemStates=!1}this._updateMenuItemStates()},i.prototype.executeAction=function(n){var i;return $.isFunction(this._options.executeAction)&&(i=this._options.executeAction.call(this,n)),i!==!1&&(i=t.menuManager.executeCommand(n)),i},i.prototype._ensureVisible=function(n){if(n&&n.getElement()){var f=n.getElement(),t=this.getElement(),r=f.outerHeight(!0),i=n.getIndex()*r,u=i+r;i<t.scrollTop()?t.scrollTop(i):u-t.height()>t.scrollTop()&&t.scrollTop(u-t.height())}},i.prototype._getItems=function(){var n=this,i,t=!1;return this._items||(this._itemsSource?$.isFunction(this._itemsSource)?(i=this._itemsSource.call(this,this.getOwner().getContextInfo(),function(i){n._asyncLoadingDelay&&(n._asyncLoadingDelay.cancel(),n._asyncLoadingDelay=null);n._items=i||[];t?n._disposed||n._updateItems(n._items,!1):t=!0},function(i){n._asyncLoadingDelay&&(n._asyncLoadingDelay.cancel(),n._asyncLoadingDelay=null);n._items=[{text:ui(i),icon:"icon-tfs-build-failed"}];t?n._disposed||n._updateItems(n._items,!1):t=!0;ri(i)}),t||(t=!0,i||(i=[],this._asyncLoadingDelay=y.delay(this,200,function(){n._asyncLoadingDelay=null;n._updateItems([{text:l.MenuItemsLoading}],!1)})),this._items=i)):this._items=this._itemsSource:this._items=[]),this._items},i.prototype._clear=function(){this._element[0].contains(document.activeElement)&&p.tryFocus(this._element);n.prototype._clear.call(this);this._menuItems=[];this._items=null;this._childrenCreated=!1},i.prototype._createChildMenuItem=function(n,t){var i,r;return r=this.getMenuItemOptions(n,n?n.extraOptions:undefined),i=t?e.Enhancement.enhance(this._getMenuItemType(),t,r):e.BaseControl.createIn(this._getMenuItemType(),this._element,r),i._parent=this,this._children.push(i),i._item.separator||(i.setIndex(this._menuItems.length),this._menuItems.push(i)),n.splitDropOptions&&(n.childItems||n.splitDropOptions.childItems)&&this._createSplitDropMenuItem(n,i),i.initialize(),i},i.prototype._createSplitDropMenuItem=function(n,t){var i=$.extend(n.splitDropOptions,{splitDropItem:t,childItems:n.splitDropOptions.childItems||n.childItems,showText:!1,showHtml:!1,toggled:n.toggled,disabled:n.disabled,title:n.splitDropOptions&&n.splitDropOptions.title,noIcon:n.splitDropOptions.noIcon!==undefined?n.splitDropOptions.noIcon:!0,cssClass:n.splitDropOptions.cssClass||"split-drop",splitDropOptions:null});n.splitDrop=this._createChildMenuItem(i);n.childItems=null;t._element.addClass("split-drop-item")},i.prototype._ensureChildren=function(){var t=this,n;this._childrenCreated||($.each(this._getItems(),function(n,i){t._createChildMenuItem(i)}),this._childrenCreated=!0,n=this.getMenuPinningOptions(),n&&n.isPinningTarget&&this._updateAllSourceMenus(),this.updateAriaSetProperties())},i.prototype._enhanceChildren=function(){var n=this,t=this._getItems();this._element.children("li").each(function(i,r){n._createChildMenuItem($.extend({},t[i],{decorated:!0}),$(r))});this._childrenCreated=!0;this.updateAriaSetProperties()},i.prototype.updateAriaSetProperties=function(){var i,t,r,u,f,n;if(this._menuItems){for(i=0,t=0,r=this._menuItems;t<r.length;t++)u=r[t],u.isFocusable()&&i++;for(f=0,n=0;n<this._menuItems.length;++n)this._menuItems[n].isFocusable()&&this._menuItems[n].getElement().attr({"aria-posinset":++f,"aria-setsize":i})}},i.prototype._getNextFocusableItem=function(n,t){return this._getNextItem(function(n){return n.isFocusable()},n,t)},i.prototype._getNextEnabledItem=function(n,t){return this._getNextItem(function(n){return n.isEnabled()},n,t)},i.prototype._getNextItem=function(n,t,i){function f(t,i){for(var f,r=t;r<=i;r++)if(f=u[r],n(f))return f;return null}var e=i&&i.rollOver===!0,r,u=this._menuItems;return(t=t||0,r=f(t,u.length-1),r)?r:e&&(r=f(0,t),r)?r:null},i.prototype._getPrevFocusableItem=function(n,t){return this._getPrevItem(function(n){return n.isFocusable()},n,t)},i.prototype._getPrevEnabledItem=function(n,t){return this._getPrevItem(function(n){return n.isEnabled()},n,t)},i.prototype._getPrevItem=function(n,t,i){function f(t,i){for(var f,r=i;r>=t;r--)if(f=u[r],n(f))return f;return null}var e=i&&i.rollOver===!0,r,u=this._menuItems;return(t=t||0,r=f(0,t),r)?r:e&&(r=f(t,u.length-1),r)?r:null},i.prototype._ensurePopup=function(){this._ensureInitialized()&&(this._popupElement=this._element);this._ensureChildren()},i.prototype._getPopupAlign=function(n){switch(n){case rt.RightJustify:return["left-top","right-top"];case rt.RightBottom:return["right-top","right-bottom"];case rt.LeftTop:return["left-bottom","left-top"]}return["left-top","left-bottom"]},i.prototype._showPopup=function(n,t,r){var f=this,u;this._clearTimeouts();this._ensurePopup();this.updateAriaSetProperties();this._pinElement=n;y.delay(this,300,function(){f._attachAncestorScroll(n)});this.updateMenuItemStates();u=this._getPopupAlign(t);this._element.show();this._parent instanceof et&&this._parent.getElement().attr("aria-expanded","true");this._positioningRoutine=function(){var f,e,o,t,r;(this._options.alignToMarkerVertical||this._options.alignToMarkerHorizontal)&&($.isFunction(this._options.getAlignmentMarkers)?(o=this._options.getAlignmentMarkers.call(this,this._element,n),f=o.elementAlignmentMarker,e=o.baseAlignmentMarker):(f=this._element.find(".alignment-marker").first(),e=n.find(".alignment-marker:not(.sub-menu .alignment-marker)").first()));t=this._options.overflow;t||(r=this._parent&&this._parent._parent,t=!(r instanceof i)||r instanceof vt||r instanceof lt?"fit-flip":"flip-flip");p.Positioning.position(this._element,n,{elementAlign:u[0],baseAlign:u[1],overflow:t,supportScroll:!0,scrollByMarker:this._options.scrollByMarker,alignToMarkerHorizontal:this._options.alignToMarkerHorizontal,alignToMarkerVertical:this._options.alignToMarkerVertical,elementAlignmentMarker:f,baseAlignmentMarker:e})};this._element[0].style.removeProperty("left");this._element[0].style.removeProperty("top");this._positioningRoutine.call(this);this._visible=!0;this._shownTime=Date.now();this.getOwner()._updateSubMenuVisibleState();r&&this.ownFocus()},i.prototype._hidePopup=function(){this._parent instanceof et&&this._parent.getElement()!=null&&this._parent.getElement().attr("aria-expanded","false");this._visible&&this._options.item.dynamic&&this._clear();this._clearTimeouts();this._visible=!1;this._pinElement&&(this._detachAncestorScroll(this._pinElement),this._pinElement=null);this._popupElement&&this._popupElement.hide();delete this._positioningRoutine;this.hideChildren(null,{immediate:!0});this.getOwner()._updateSubMenuVisibleState()},i.prototype._updateMenuItemStates=function(){function o(){return r&&u}function f(){var n=o();t&&t.isHidden()===n&&t.update($.extend(t._item,{separator:!0,hidden:!n}))}for(var n,t,r=!1,i=!1,u=!1,e=0,s=this._children;e<s.length;e++)n=s[e],n.isSeparator()&&!n.isLabel()?(i=!0,t=n,f()):(n.isHidden()||i?!n.isHidden()&&i&&(r=!0):u=!0,t&&o()&&!n.isHidden()&&(f(),t=null,i=!1,u=!0,r=!1),n._updateState(),n.updateText());f()},i.prototype._startShowTimeout=function(n,t,i,r,u){var f=this;this._clearTimeouts();this.delayExecute("show",r,!0,function(){f.isDisposed()||(f._showPopup(n,t,i),u&&u())})},i.prototype._startHideTimeout=function(n,t){var i=this;this._clearTimeouts();this.delayExecute("hide",n,!0,function(){i._hidePopup();t&&t()})},i.prototype._clearTimeouts=function(){this.cancelDelayedFunction("show");this.cancelDelayedFunction("hide")},i.prototype._attachAncestorScroll=function(n){this._bind($(n).parents(),"scroll",nt(this,this._onParentScroll))},i.prototype._detachAncestorScroll=function(n){this._unbind($(n).parents(),"scroll")},i.prototype._dispose=function(){this._pinElement&&this._detachAncestorScroll(this._pinElement);this._asyncLoadingDelay&&(this._asyncLoadingDelay.cancel(),this._asyncLoadingDelay=null);this._contributedItemsDelay&&(this._contributedItemsDelay.cancel(),this._contributedItemsDelay=null);this._options.executeAction=null;n.prototype._dispose.call(this)},i.prototype._onParentScroll=function(){p.BrowserCheckUtils.isEdge()&&this._mouseIsDown||this._hidePopup()},i.prototype._onMouseDown=function(){var n=this;p.BrowserCheckUtils.isEdge()&&(this._mouseIsDown=!0,this._bind(window.document,"mouseup",function(){n._mouseIsDown=!1;n._unbind(window.document,"mouseup")},!0))},i.prototype._onMenuKeyDown=function(n){var t=!n.ctrlKey&&!n.altKey&&!n.shiftKey;switch(n.keyCode){case tt.DOWN:if(t)return this.selectDown(),!1;break;case tt.UP:if(t)return this.selectUp(),!1;break;case tt.RIGHT:if(t)return this.selectRight(),!1;break;case tt.LEFT:if(t)return this.selectLeft(),!1;break;case tt.ESCAPE:if(this.escape())return!1;break;case tt.HOME:if(t)return this.selectFirstItem(),!1;break;case tt.END:if(t)return this.selectLastItem(),!1}},i.prototype.setContributedItemOptions=function(n,t,i){var r=!1;(this._options.contributionIds||[]).join(";")!==n.join(";")&&(this._options.contributionIds=n,r=!0);typeof t!="undefined"&&this._options.contributionType!==t&&(this._options.contributionType=t,r=!0);typeof i!="undefined"&&this._options.contributionQueryOptions!==i&&(this._options.contributionQueryOptions=i,r=!0);r&&(this._menuContributionProvider=null,this._menuUpdateNeeded=!0,this.refreshContributedItems())},i.prototype.refreshContributedItems=function(){var n=this;!this._menuContributionProvider&&this._options.contributionIds&&(this._menuContributionProvider=new bt(this,r.getDefaultWebContext(),this._options.contributionIds,this._options.contributionType,this._options.contributionQueryOptions,this._getContributionContext.bind(this),this._contributionProviderOptions),this._contributedItemsDelay=y.delay(this,100,function(){n._contributedItemsDelay=null;n._updateItems(n._items,!1)}));this._refreshContributedMenuItems()},i.prototype._refreshContributedMenuItems=function(){var n=this;this._menuContributionProvider&&(this._contributionPromise=this._menuContributionProvider.getContributedMenuItems(this._getContributionContext()).then(function(t){n._contributedItemsDelay&&(n._contributedItemsDelay.cancel(),n._contributedItemsDelay=null);(n._menuUpdateNeeded||t&&t.length)&&n._updateItemsWithContributions(n._itemsSource,t)},function(n){n.name=w.format("{0}.GetContributedMenuItemsError",n.name||"");n.message="getContributedMenuItems() failed in Menu._refreshContributedMenuItems: "+b.getErrorMessage(n);d.publishErrorToTelemetry(n,!1,k.Level.Warning,{thirdParty:!0})}))},i.prototype.updateContributedMenuItems=function(n){var t=this;this._contributionPromise.then(function(){var i=[];(function r(n){Array.prototype.push.apply(i,n);n.forEach(function(n){n.childItems&&n.childItems.length>0&&r(n.childItems)})})(n);i=i.filter(function(n){return!!n.id});t._updateContributedMenuItems(i)})},i.prototype._getContributionContext=function(){var n=this._options.contextInfo?$.extend({},this._options.contextInfo.item):{};return $.isFunction(n.getContributionContext)?n=n.getContributionContext():$.isFunction(this._options.getContributionContext)&&(n=this._options.getContributionContext()),n},i.enhancementTypeName="tfs.menu.menu",i.CONTRIBUTION_ITEMS_UPDATED_EVENT="menuContributedItemsUpdated",i}(et);t.Menu=ht;b.initClassPrototype(ht,{_items:null,_itemsSource:null,_menuItems:null,_selectedItem:null,_focusItem:null,_childrenCreated:!1,_popupElement:null,_visible:!1,_active:!1,_skipUpdateMenuItemStates:!1,_positioningRoutine:null,_pinElement:null});ct=function(n){function i(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._focusing=!1,i.setEnhancementOptions({role:"menu"}),i._align=rt.parse(i._options.align),i}return __extends(i,n),i.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({markUnselectable:!0,showIcon:!0,showTimeout:500,hideTimeout:500},t))},i.prototype.setShowIcon=function(n){this._options.showIcon=n},i.prototype.initialize=function(){n.prototype.initialize.call(this);this._fire("menuInitialized",{menu:this})},i.prototype._decorate=function(){var t=this;n.prototype._decorate.call(this);this._updateTabIndex(!0);this._bind(this._element,"keydown",this._onKeyDown.bind(this));this._bind(this._element,"focus",this._onFocus.bind(this));this._element[0].addEventListener("blur",this._onChildBlur.bind(this),!0);this._element[0].addEventListener("focus",this._onChildFocus.bind(this),!0);this._options.emptyMenuInTabOrder===!1&&this._bind(ht.CONTRIBUTION_ITEMS_UPDATED_EVENT,function(){t._isOwned(document.activeElement)||t._updateTabIndex()})},i.prototype.getMenuItemAlignment=function(){return this._options.popupAlign||n.prototype.getMenuItemAlignment.call(this)},i.prototype.getMenuItemOptions=function(t,i){return n.prototype.getMenuItemOptions.call(this,t,$.extend({immediateShowHide:!0,clickToggles:!0,type:"static"},i))},i.prototype.escape=function(){return!1},i.prototype.escaped=function(){},i.prototype.isActive=function(){return this._active},i.prototype.activate=function(n){if(n===void 0&&(n=!0),!this._activating){this._activating=!0;try{this._clearBlurTimeout();this._active=!0;n&&p.tryFocus(this._focusElement);$.isFunction(this._options.onActivate)&&this._options.onActivate.call(this)}finally{this._activating=!1}}},i.prototype._hide=function(){this._active&&(this.hide({immediate:!0}),this.ownFocus())},i.prototype._blur=function(){this._clearBlurTimeout();this.hide({immediate:!0});this._disposed||this._selectItem(null);this._active=!1;$.isFunction(this._options.onDeactivate)&&this._options.onDeactivate.call(this);this._disposed||this._updateTabIndex()},i.prototype._updateSubMenuVisibleState=function(){var n,u,t,r=this._menuItems,i;if(this._subMenuVisible=!1,$.isArray(r))for(n=0,u=r.length;n<u;n++)if(t=r[n],t.hasSubMenu()&&(i=t.getSubMenu(!1),i&&i._parent===t&&i._visible)){this._subMenuVisible=!0;break}},i.prototype._updateTabIndex=function(n){this._options.inTabOrder!==!1&&(this._options.emptyMenuInTabOrder!==!1||this._menuItems.length>0)?this._element.attr("tabIndex",0):n&&this._element.attr("tabIndex",-1)},i.prototype._onKeyDown=function(n){if(n.keyCode===tt.TAB)this._immediateBlur=!0;else if(n.keyCode===tt.F10&&n.shiftKey)return this._onContextMenu(n)},i.prototype._onFocus=function(){var n=this,t;this._focusing||(this._focusing=!0,this.activate(!1),!this._selectedItem||this._selectedItem.getIndex()<0||!this._selectedItem._element?(t=this._getFirstMenuItem()||this._getNextFocusableItem(0),t&&y.delay(null,0,function(){n._selectItem(t)})):y.delay(null,0,function(){n._selectedItem&&n._selectedItem.select()}),this._focusing=!1)},i.prototype._isOwned=function(n){if(this._element[0].contains(n)){for(var t=n;t!==this._element[0]&&t!==document.body;t=t.parentElement)if(t.classList.contains("unfocusable"))return!1;return!0}return!1},i.prototype._onChildFocus=function(n){if(this._isOwned(n.target)){this._element.attr("tabindex","-1");var t=e.Enhancement.getInstance(ot,$(n.target)),i=t&&t.getParentMenu();t&&i&&i._selectItem(t)}},i.prototype._onChildBlur=function(){var n=this;y.delay(this,t.BLUR_CLOSE_TIMEOUT,function(){n._disposed||n._isOwned(document.activeElement)&&document.hasFocus()||(n._options.inTabOrder!==!1&&n._updateTabIndex(),n._immediateBlur?(n._immediateBlur=!1,n._blur()):n._blur())})},i.prototype._proceedBlur=function(){this._canBlur=!0},i.prototype._clearBlurTimeout=function(){this.cancelDelayedFunction("blur")},i.prototype._onParentScroll=function(){this._hide()},i.prototype._onResize=function(){this._hide()},i.prototype._onContextMenu=function(){return this.showSubMenuOnFocusedItem()},i.prototype.showSubMenuOnFocusedItem=function(){var n=this._focusItem;return n&&n.tryShowSubMenu({immediate:!0}),!1},i}(ht);t.MenuOwner=ct;b.initClassPrototype(ct,{_focusItem:null,_focusElement:null,_activating:!1,_subMenuVisible:!1,_align:null,_canBlur:!1,_immediateBlur:!1});lt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.setEnhancementOptions({role:"menubar",coreCssClass:"menu-bar"+(i._options.useBowtieStyle?" bowtie-menus":"")}),i._orientation=ft.parse(i._options.orientation),i._type=ut.Static,i._contributionProviderOptions={defaultTextToTitle:!1},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t)},t.prototype.getMenuItemAlignment=function(){return this._orientation===ft.Horizontal?"left-bottom":"right-justify"},t.prototype.selectUp=function(t){return this._orientation===ft.Vertical?n.prototype.selectUp.call(this):n.prototype.selectLeft.call(this,t)},t.prototype.selectDown=function(t){return this._orientation===ft.Vertical?n.prototype.selectDown.call(this):n.prototype.selectRight.call(this,t)},t.prototype.selectLeft=function(){if(this._orientation===ft.Vertical)return n.prototype.selectLeft.call(this);var t=this._subMenuVisible;return(this.hideChildren(null,{immediate:!0}),n.prototype.selectUp.call(this),t&&(this._subMenuVisible=!0,this._selectedItem.tryShowSubMenu({immediate:!0})))?(this._selectedItem.getSubMenu().selectFirstItem(),!0):!1},t.prototype.selectRight=function(){if(this._orientation===ft.Vertical)return n.prototype.selectRight.call(this);var t=this._subMenuVisible;return(this.hideChildren(null,{immediate:!0}),n.prototype.selectDown.call(this),t&&(this._subMenuVisible=!0,this._selectedItem.tryShowSubMenu({immediate:!0})))?(this._selectedItem.getSubMenu().selectFirstItem(),!0):!1},t.tryActivate=function(n){var t=this._getMenuBar(n);return t?(t.focus(),!0):!1},t.tryShowSubMenu=function(n){var t=this._getMenuBar(n);return t?(t.focus(),y.delay(this,0,function(){t.showSubMenuOnFocusedItem()}),!0):!1},t.prototype.focus=function(){this.activate()},t._getMenuBar=function(n){var t=$(n);return e.Enhancement.getInstance(at,t)},t.enhancementTypeName="tfs.menu.menubar",t}(ct);t.MenuBarO=lt;at=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(lt);t.MenuBar=at;gt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.setEnhancementOptions({role:"toolbar"}),i}return __extends(t,n),t.prototype._getMenuItemType=function(){return ni},t}(at);t.Toolbar=gt;ni=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getAriaRole=function(){return"listitem"},t}(ot);b.initClassPrototype(lt,{_orientation:ft.Horizontal});ti=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.escaped=function(){n.prototype.escaped.call(this);this._parent.escaped()},t}(ot);vt=function(n){function t(t){var i=n.call(this,$.extend({inTabOrder:!1},t))||this;return i.setEnhancementOptions({coreCssClass:"menu-popup"+(i._options.useBowtieStyle?" bowtie-menus":""),hidden:!0}),i._type=ut.Popup,i._hidden=i._options.hidden===!0,i._onHide=i._options.onHide,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t)},t.prototype._getMenuItemType=function(){return ti},t.prototype._decorate=function(){n.prototype._decorate.call(this);this._hidden===!0&&this._element.addClass("invisible")},t.prototype.popup=function(n,t){var r=this;if(this._escapeFocusReceiver=n,this._popupPinElement=t,this._floating=!0,this._active)this.escaped();else{var i=null,f=!1,u=function(){i&&(i.cancel(),i=null);r._active||f||(r.activate(),r._showPopupMenu(),f=!0)};this._contributionPromise?(this._contributionPromise.then(u),i=y.delay(this,500,u)):u()}},t.prototype._showPopupMenu=function(){var i=this._getFirstMenuItem(),n=i.getSubMenu(),t=this._options.setFocus!==!1;n&&(n.show({immediate:!0,element:this._popupPinElement,align:this._align,setFocus:t}),t&&n.selectDefaultItem())},t.prototype._updateItemsWithContributions=function(n,t){if(this._contributedItems=t,n&&n.length>0&&n[0].childItems){var i=$.grep(n[0].childItems,function(n){return!n.isContribution});n[0].childItems=i.concat(t)}else n=[{childItems:t}];this._updateCombinedSource(n)},t.prototype._updateCombinedSource=function(t){n.prototype._updateCombinedSource.call(this,t);this._active&&this._showPopupMenu()},t.prototype.selectUp=function(){return!0},t.prototype.selectDown=function(t){var i=t&&t.redirected;return!i&&this._align!==rt.RightJustify?n.prototype.selectRight.call(this):!1},t.prototype.selectFirstItem=function(){var t=this._getFirstMenuItem(),n=t.getSubMenu();return n._visible?n.selectFirstItem():!1},t.prototype.selectLeft=function(){return!0},t.prototype.selectRight=function(t){var i=t&&t.redirected;return!i&&this._align===rt.RightJustify?n.prototype.selectRight.call(this):!1},t.prototype.escaped=function(){this._floating&&(this._floating=!1,this._escapeFocusReceiver&&(this._escapeFocusReceiver.focus(),this._escapeFocusReceiver=null,$.isFunction(this._options.onPopupEscaped)&&this._options.onPopupEscaped.call(this)))},t.prototype._hidePopup=function(){this._onHide&&this._onHide(this._escapeFocusReceiver);n.prototype._hidePopup.call(this)},t.enhancementTypeName="tfs.menu.popup",t}(ct);t.PopupMenuO=vt;kt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(vt);t.PopupMenu=kt;b.initClassPrototype(vt,{_align:rt.RightJustify,_floating:!1,_hidden:!1,_escapeFocusReceiver:null});ii=function(n){function i(t){return n.call(this,t)||this}return __extends(i,n),i.prototype.initialize=function(){var t=this._element.data();n.prototype.initialize.call(this);this._bind(t.commandAction||"click",nt(this,this.onCommandExecute));t.commandCompleteEvent&&this._bind(window,t.commandCompleteEvent,nt(this,this.onCommandComplete))},i.prototype.onCommandExecute=function(){var n=this._element.data();return n.commandName&&(this._element.prop("disabled",!0),this._element.prop("aria-disabled",!0),t.menuManager.executeCommand(new c.CommandEventArgs(n.commandName,n.commandArg,this))),!1},i.prototype.onCommandComplete=function(){this._element.removeAttr("disabled");this._element.prop("aria-disabled",!1)},i}(e.BaseControl);e.Enhancement.registerEnhancement(at,".menu-bar.enhance");e.Enhancement.registerEnhancement(kt,".menu-popup.enhance");e.Enhancement.registerEnhancement(ii,".single-command");t.sortMenuItems=fi;b.tfsModuleLoaded("VSS.UI.Controls.Menus",t)});

/*!
 * jQuery UI Droppable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/droppable",["jquery", "./core", "./widget", "./mouse", "./draggable"], n) : n(jQuery) })(function (n) { return n.widget("ui.droppable", { version: "1.11.4", widgetEventPrefix: "drop", options: { accept: "*", activeClass: !1, addClasses: !0, greedy: !1, hoverClass: !1, scope: "default", tolerance: "intersect", activate: null, deactivate: null, drop: null, out: null, over: null }, _create: function () { var t, i = this.options, r = i.accept; this.isover = !1; this.isout = !0; this.accept = n.isFunction(r) ? r : function (n) { return n.is(r) }; this.proportions = function () { if (arguments.length) t = arguments[0]; else return t ? t : t = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight } }; this._addToManager(i.scope); i.addClasses && this.element.addClass("ui-droppable") }, _addToManager: function (t) { n.ui.ddmanager.droppables[t] = n.ui.ddmanager.droppables[t] || []; n.ui.ddmanager.droppables[t].push(this) }, _splice: function (n) { for (var t = 0; t < n.length; t++) n[t] === this && n.splice(t, 1) }, _destroy: function () { var t = n.ui.ddmanager.droppables[this.options.scope]; this._splice(t); this.element.removeClass("ui-droppable ui-droppable-disabled") }, _setOption: function (t, i) { if (t === "accept") this.accept = n.isFunction(i) ? i : function (n) { return n.is(i) }; else if (t === "scope") { var r = n.ui.ddmanager.droppables[this.options.scope]; this._splice(r); this._addToManager(i) } this._super(t, i) }, _activate: function (t) { var i = n.ui.ddmanager.current; this.options.activeClass && this.element.addClass(this.options.activeClass); i && this._trigger("activate", t, this.ui(i)) }, _deactivate: function (t) { var i = n.ui.ddmanager.current; this.options.activeClass && this.element.removeClass(this.options.activeClass); i && this._trigger("deactivate", t, this.ui(i)) }, _over: function (t) { var i = n.ui.ddmanager.current; i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", t, this.ui(i))) }, _out: function (t) { var i = n.ui.ddmanager.current; i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", t, this.ui(i))) }, _drop: function (t, i) { var r = i || n.ui.ddmanager.current, u = !1; return !r || (r.currentItem || r.element)[0] === this.element[0] ? !1 : (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function () { var i = n(this).droppable("instance"); if (i.options.greedy && !i.options.disabled && i.options.scope === r.options.scope && i.accept.call(i.element[0], r.currentItem || r.element) && n.ui.intersect(r, n.extend(i, { offset: i.element.offset() }), i.options.tolerance, t)) return u = !0, !1 }), u) ? !1 : this.accept.call(this.element[0], r.currentItem || r.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(r)), this.element) : !1 }, ui: function (n) { return { draggable: n.currentItem || n.element, helper: n.helper, position: n.position, offset: n.positionAbs } } }), n.ui.intersect = function () { function n(n, t, i) { return n >= t && n < t + i } return function (t, i, r, u) { if (!i.offset) return !1; var o = (t.positionAbs || t.position.absolute).left + t.margins.left, s = (t.positionAbs || t.position.absolute).top + t.margins.top, h = o + t.helperProportions.width, c = s + t.helperProportions.height, f = i.offset.left, e = i.offset.top, l = f + i.proportions().width, a = e + i.proportions().height; switch (r) { case "fit": return f <= o && h <= l && e <= s && c <= a; case "intersect": return f < o + t.helperProportions.width / 2 && h - t.helperProportions.width / 2 < l && e < s + t.helperProportions.height / 2 && c - t.helperProportions.height / 2 < a; case "pointer": return n(u.pageY, e, i.proportions().height) && n(u.pageX, f, i.proportions().width); case "touch": return (s >= e && s <= a || c >= e && c <= a || s < e && c > a) && (o >= f && o <= l || h >= f && h <= l || o < f && h > l); default: return !1 } } }(), n.ui.ddmanager = { current: null, droppables: { "default": [] }, prepareOffsets: function (t, i) { var r, f, u = n.ui.ddmanager.droppables[t.options.scope] || [], o = i ? i.type : null, e = (t.currentItem || t.element).find(":data(ui-droppable)").addBack(); n: for (r = 0; r < u.length; r++) if (!u[r].options.disabled && (!t || u[r].accept.call(u[r].element[0], t.currentItem || t.element))) { for (f = 0; f < e.length; f++) if (e[f] === u[r].element[0]) { u[r].proportions().height = 0; continue n } (u[r].visible = u[r].element.css("display") !== "none", u[r].visible) && (o === "mousedown" && u[r]._activate.call(u[r], i), u[r].offset = u[r].element.offset(), u[r].proportions({ width: u[r].element[0].offsetWidth, height: u[r].element[0].offsetHeight })) } }, drop: function (t, i) { var r = !1; return n.each((n.ui.ddmanager.droppables[t.options.scope] || []).slice(), function () { this.options && (!this.options.disabled && this.visible && n.ui.intersect(t, this, this.options.tolerance, i) && (r = this._drop.call(this, i) || r), !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, i))) }), r }, dragStart: function (t, i) { t.element.parentsUntil("body").bind("scroll.droppable", function () { t.options.refreshPositions || n.ui.ddmanager.prepareOffsets(t, i) }) }, drag: function (t, i) { t.options.refreshPositions && n.ui.ddmanager.prepareOffsets(t, i); n.each(n.ui.ddmanager.droppables[t.options.scope] || [], function () { if (!this.options.disabled && !this.greedyChild && this.visible) { var r, e, f, o = n.ui.intersect(t, this, this.options.tolerance, i), u = !o && this.isover ? "isout" : o && !this.isover ? "isover" : null; u && (this.options.greedy && (e = this.options.scope, f = this.element.parents(":data(ui-droppable)").filter(function () { return n(this).droppable("instance").options.scope === e }), f.length && (r = n(f[0]).droppable("instance"), r.greedyChild = u === "isover")), r && u === "isover" && (r.isover = !1, r.isout = !0, r._out.call(r, i)), this[u] = !0, this[u === "isout" ? "isover" : "isout"] = !1, this[u === "isover" ? "_over" : "_out"].call(this, i), r && u === "isout" && (r.isout = !1, r.isover = !0, r._over.call(r, i))) } }) }, dragStop: function (t, i) { t.element.parentsUntil("body").unbind("scroll.droppable"); t.options.refreshPositions || n.ui.ddmanager.prepareOffsets(t, i) } }, n.ui.droppable });

// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Utils/Draggable",["require","exports","VSS/Diag","jQueryUI/draggable"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});$(function(){$.ui.plugin.add("draggable","scrollables",{start:function(){function s(n){return n.closest("body").length?!0:!1}for(var f=[],i=null,n=null,o=$(this).data("ui-draggable"),r=o.options,e=0,t=0,u=r.scrollables.length;t<u;t++,e++)(i=$(r.scrollables[t]),s(i))&&i.each(function(t,i){var r=$(i);n=r.offset();n.bottom=n.top+r.height();n.right=n.left+r.width();f[e++]={element:i,rect:n}});r.scrollableElements=f},drag:function(n){var s=$(this).data("ui-draggable"),t=s.options,u=t.cursorAt||{left:0,top:0},l=!1,f=null,h=!1,c=t.scrollableElements,r=null,p,o,y;var a=u.top!=null?u.top:s.helperProportions.height-u.bottom,v=u.left!=null?u.left:s.helperProportions.width-u.right,e={left:n.pageX-v,top:n.pageY-a,right:n.pageX-v+s.helperProportions.width,bottom:n.pageY-a+s.helperProportions.height};for(o=0,y=c.length;o<y;o+=1)typeof c[o]!="undefined"&&(f=c[o].element,r=c[o].rect,l=(e.left>=r.left&&e.left<=r.right||e.right>=r.left&&e.right<=r.right)&&(e.top>=r.top&&e.top<=r.bottom||e.bottom>=r.top&&e.bottom<=r.bottom),l&&(t.axis&&t.axis!=="y"||t.scrollablesAxis&&t.scrollablesAxis!=="y"||(r.bottom-n.pageY<t.scrollSensitivity?(f.scrollTop=f.scrollTop+t.scrollSpeed,h=!0):n.pageY-r.top<t.scrollSensitivity&&(f.scrollTop=f.scrollTop-t.scrollSpeed,h=!0)),t.axis&&t.axis!=="x"||t.scrollablesAxis&&t.scrollablesAxis!=="x"||(r.right-n.pageX<t.scrollSensitivity?(f.scrollLeft=f.scrollLeft+t.scrollSpeed,h=!0):n.pageX-r.left<t.scrollSensitivity&&(f.scrollLeft=f.scrollLeft-t.scrollSpeed,h=!0))));h!==!1&&(p=f.offsetHeight)},stop:function(){var n=$(this).data("ui-draggable"),t=n.options;delete t.scrollableElements}})})});

define("VSS/Controls/TreeView",["require","exports","VSS/Controls/Combos","VSS/Contributions/Services","VSS/Controls","VSS/Controls/PopupContent","VSS/Diag","VSS/Controls/Menus","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Telemetry/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","jQueryUI/droppable","VSS/Utils/Draggable","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function lt(n){return n=n||a.localeIgnoreCaseComparer,function(t,i){return n(t.text,i.text)}}function g(n,t,i){var r,e,u,f=n.children;if(f&&(e=f.length))for(r=0;r<e;r++)u=f[r],t[t.length]=u,(i||u.expanded)&&g(u,t,i)}function st(n){return $.map(n,function(n){if(n.id)t=new d(n.text,n.config,[],n.id);else var t=new d(n.text,n.config);return n.children&&n.children.length&&t.addRange(st(n.children)),t})}function at(n){return n?n.length&&!(n[0]instanceof d)?st(n):n:[]}function ht(n,t){n.expanded=!0;t&&n.hasChildren()&&$.each(n.children,function(n,i){ht(i,t-1)})}var nt,d,it,b,tt,rt,ut,ft,et;Object.defineProperty(t,"__esModule",{value:!0});t.flatten=t.SearchComboTreeBehaviorName=t.SearchComboTreeBehavior=t.ComboTreeMultivalueBehaviorName=t.MultiSelectTreeComboBehavior=t.MultiSelectTreeComboDropPopup=t.ComboTreeBehaviorName=t.ComboTreeBehavior=t.ComboTreeDropPopup=t.TreeView=t.TreeViewO=t.TreeNode=t.TreeDataSource=void 0;var vt=e.log,yt=e.LogVerbosity.Verbose,k=l.delegate,pt=y.getErrorMessage,p=v.KeyCode,w=v.domElem,ot="TFSUICommonControls",ct=0;nt=function(n){function t(t){var i=n.call(this,$.extend({sepChar:"\\"},t))||this;return i._initRoot(),i}return __extends(t,n),t.prototype.setSource=function(t){this._initRoot();this.root.clear();n.prototype.setSource.call(this,t)},t.prototype.prepareSource=function(n){var t=at(n);this.root.addRange(t);this._options.sorted&&this.root.sort(!0,lt(this._options.comparer));this._options.treeLevel&&ht(this.root,this._options.treeLevel);this.updateItemsFromSource()},t.prototype.updateItemsFromSource=function(){var t=[],n;g(this.root,t,!0);n=[];g(this.root,n,!1);this.setItems(n,t)},t.prototype.getItemText=function(n,t,i){return i===!0?this.getItem(n,t).text:this.getItem(n,t).path(!1,this._options.sepChar)},t.prototype.getItemIndex=function(t,i,r){var f=n.prototype.getItemIndex.call(this,t,i,!0),u,e;if(f>=0){for(u=this.getItem(f,!0);u.parent;)u=u.parent,u.expanded||(e=!0),u.expanded=!0;return e&&this._prepareCurrentItems(),n.prototype.getItemIndex.call(this,t,i,r)}return f},t.prototype.expandNode=function(n){n.expanded||(n.expanded=!0,this._prepareCurrentItems())},t.prototype.collapseNode=function(n){n.expanded&&(n.expanded=!1,this._prepareCurrentItems())},t.prototype._initRoot=function(){this.root||(this.root=new d(""),this.root.expanded=!0,this.root.root=!0)},t.prototype._prepareCurrentItems=function(){var n=[];g(this.root,n,!1);this.setItems(n,this.getItems(!0))},t}(u.BaseDataSource);t.TreeDataSource=nt;y.initClassPrototype(nt,{root:null});d=function(){function n(n,t,i,r){r?this.id=r:this._ensureNodeId();this.text=n;this.config=t||{};this.children=[];this.addRange(i)}return n.create=function(t,i,r){return new n(t,i,r)},n.prototype.hasChildren=function(){return this.children.length>0},n.prototype.clear=function(){this.children=[]},n.prototype.remove=function(){var n=this;this.parent&&(this.parent.children=$.map(this.parent.children,function(t){if(t!==n)return t}))},n.prototype.add=function(n){this.children.push(n);n.parent=this},n.prototype.moveTo=function(n){this.remove();n.add(this)},n.prototype.addRange=function(n){var t,i;if(n)for(t=0,i=n.length;t<i;t++)this.add(n[t])},n.prototype.findNode=function(n,t,i){return v.findTreeNode.call(this,n,t||"/",i||a.localeIgnoreCaseComparer,"text")},n.prototype.sort=function(n,t){this._sort(n,t)},n.prototype.path=function(n,t){return v.calculateTreePath.call(this,n,t||"/","text","root")},n.prototype.level=function(n){for(var i=0,t=this.parent;t;){if(n&&t.root)break;i++;t=t.parent}return i},n.prototype.getContributionContext=function(){return this},n.prototype.getHtmlId=function(){return"treeNode"+this.id},n.prototype._ensureNodeId=function(){(this.id<0||this.id===undefined||this.id===null)&&(this.id=""+ct++)},n.prototype._sort=function(n,t){var r,u,i=this.children;if(i&&i.length&&(i.sort(t),n))for(r=0,u=i.length;r<u;r++)i[r]._sort(n,t)},n}();t.TreeNode=d;y.initClassPrototype(d,{id:-1,root:!1,text:null,parent:null,children:null,config:null,expanded:!1,selected:!1,icon:null,tag:null,noFocus:!1,noContextMenu:!1,noTreeIcon:!1,folder:null,type:null,link:"",title:"",droppable:null,iterationPath:null,definition:null,linkDelegate:null,hasExpanded:!1,owner:null,application:null,isSearchHit:null});it=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.rootNode=new d("root"),i.rootNode.root=!0,i._droppable=i._options.droppable,i._draggable=i._options.draggable,i._focusDelegate=k(i,i._onFocus),i._blurDelegate=k(i,i._onBlur),i._dragStartDelegate=k(i,i._onDragStart),i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({clickSelects:!0,clickToggles:!1,contextMenu:!1,coreCssClass:"tree-view",showIcons:!0,sortMenuItems:!0,styleFocusElement:!0,useArrowKeysForNavigation:!0,useEmptyFolderNodes:!0},t))},t.prototype.initialize=function(){var t=this,i;n.prototype.initialize.call(this);this._bind("mouseover",function(n){var u=$(n.target),i,r;i=u.closest("div.node-content, div.node-context-menu-container");i.length>0&&(r=i.closest("li.node"),t._setFocusElement(r))});this._bind("mouseout",function(){t._setFocusElement(null)});this._bind("click",k(this,this._click));this._bind("contextmenu",k(this,this._onContextMenu));this._bind("keydown",k(this,this._onInputKeyDown));$.isArray(this._options.nodes)&&this.rootNode.addRange(this._options.nodes);this._options.contextMenu&&this._options.contextMenu.contributionIds&&h.getService(r.ExtensionService).getContributionsForTargets(this._options.contextMenu.contributionIds);i=this._options.useBowtieStyle?"bowtie-tree":"basic-tree";this.getElement().addClass(i);this.getElement().attr("role","tree");this._draw();e.logTracePoint("TreeView.initialize.complete")},t.prototype._draw=function(){var n,i,r;this._focusedNode&&(n=this._getNode(this._focusedNode),i=$("<button>").appendTo("body").focus());this.getElement().empty();this._options.contextMenu&&(this._ariaDescribedById=String(u.getId()),$(w("div")).attr("id",this._ariaDescribedById).addClass("visually-hidden").text(s.TreeViewOptionsText).appendTo(this.getElement()));this._drawNode(this.rootNode,this.getElement(),-1);n?(r=this._getNodeElement(n),r.length>0&&this._getFirstTabbableChild(r).focus()):this._options.useArrowKeysForNavigation&&this._setNodeHasTabindex(this._getNode(this.getElement().find(t.NODE_VISIBLE_AND_FOCUSABLE).first()));i&&i.remove()},t.prototype._getNodeElement=function(n){return this.getElement().find("#tfs_tnli"+n.id).eq(0)},t.prototype._getNode=function(n){return n.data(b.NODE_DATA_NAME)},t.prototype.getSelectedNode=function(){return this._selectedNode},t.prototype.setSelectedNode=function(n,t){n&&n.config&&n.config.unselectable||(this._selectedNode&&(this._selectedNode.selected=!1),this._selectedNode=n,n&&(n.selected=!0,t||this._fire("selectionchanged",{selectedNode:n}),this._expandNodeParents(n,t),this._options.useArrowKeysForNavigation&&this._setNodeHasTabindex(n)),this._updateSelections())},t.prototype.focus=function(){this._selectedNode&&(this._getNodeElement(this._selectedNode).children(".node-link").focus(),this._options.useArrowKeysForNavigation&&this._setNodeHasTabindex(this._selectedNode))},t.prototype._expandNodeParents=function(n,t){for(var i=n,f=this.rootNode,r,u;i.parent;)i=i.parent,i===f||i.expanded||(i.expanded=!0,r=i);r&&(r.expanded=!1,u=this._getNodeElement(r),this._toggle(r,u,t))},t.prototype._updateSelections=function(){var n=this;this.getElement().find("li.node").each(function(){var i=$(this),t;t=n._getNode(i);t&&(i.toggleClass("selected",t.selected),i.find(".node-link").each(function(){var n=$(this);n.attr("aria-selected",t.selected)}))})},t.prototype._updateNode=function(n,t,i){var r,u,e,s,o;if(n.addClass("node"),!t.root){if(n.attr("id","tfs_tnli"+t.id),n.attr("role","presentation"),t.draggable&&this._draggable&&n.draggable(this._draggable),t.droppable&&this._droppable&&n.droppable(this._droppable),this._draggable&&this._bind(n,"selectstart",function(n){n.preventDefault()}),t.selected&&n.addClass("selected"),t.noFocus&&n.addClass("nofocus"),t.folder&&n.addClass("folder"),t.config&&t.config.css&&n.addClass(t.config.css),r=$("<a />").addClass("node-link").attr("role","treeitem"),this._options.contextMenu&&!t.noContextMenu){var h=$(w("div","node-context-menu-container node-context-menu")).attr("title",""),c=$(w("span","node-context-menu-icon")),l=this._options.useBowtieStyle?"bowtie-icon bowtie-ellipsis":"icon icon-drop";c.addClass(l);h.append(c);n.append(h);r.attr("aria-describedby",this._ariaDescribedById)}else t.noContextMenu&&n.append($(w("div","node-context-menu-container node-no-context-menu")));this._draggable&&this._bind(r,"dragstart",this._dragStartDelegate);t.link&&r.attr("href",t.link);t.linkDelegate&&$.isFunction(t.linkDelegate)&&this._bind(r,"click",t.linkDelegate);r.attr("aria-level",i+1);t.noFocus||(this._options.useArrowKeysForNavigation?r.attr("tabindex",-1):r.attr("tabindex",0),this._bind(r,"focus",this._focusDelegate),this._bind(r,"blur",this._blurDelegate));u=$("<div />").addClass("node-content").text(t.text||"");this._draggable&&this._bind(u,"dragstart",this._dragStartDelegate);e=4;this._options.showIcons&&(e=0,s=this._options.onRenderIcon&&this._options.onRenderIcon(t),s?u.prepend($(s)):t.icon&&$("<span />").addClass("icon tree-node-img").addClass(t.icon).prependTo(u));t.noTreeIcon||(o="icon",this._options.useBowtieStyle&&(o="bowtie-icon",(t.hasChildren()||t.folder&&this._options.useEmptyFolderNodes)&&(o+=" bowtie-chevron-right")),$(w("span","node-img "+o)).prependTo(u));e=this._options.useBowtieStyle?e+4:e;u.css("padding-left",e+i*12);r.append(u);n.append(r);this._options.setTitleOnlyOnOverflow!==!1?f.RichContentTooltip.addIfOverflow(t.text||"",u):n.attr("title",t.text||"")}return n.data(b.NODE_DATA_NAME,t),n.data(b.LEVEL_DATA_NAME,i),(t.hasChildren()||t.folder&&this._options.useEmptyFolderNodes)&&this._drawChildren(t,n,i),u},t.prototype._drawChildren=function(n,t,i){var r,u,f;if(n.root||n.expanded){if(f=n.children.length,this._setNodeElementExpandState(t,!0,f>0),r=$(w("ul","tree-children")).attr("id","tfs_tnul"+n.id).attr("role",n.root?"tree":"group"),typeof i=="undefined"&&(i=t.data(b.LEVEL_DATA_NAME)),i=i+1,f===0)this._drawEmptyFolderNode(r,i,n.emptyFolderNodeText||this._options.defaultEmptyFolderNodeText||s.NoItemsInThisFolder);else for(u=0;u<f;u++)this._drawNode(n.children[u],r,i);t.append(r)}else this._setNodeElementExpandState(t,!1)},t.prototype._toggle=function(n,t){return n&&(n.folder||n.hasChildren())?(n.expanded?(n.expanded=!1,t.find("ul.tree-children:first").remove()):(n.expanded=!0,this._drawChildren(n,t)),this._setNodeElementExpandState(t,n.expanded),!0):!1},t.prototype._setNodeExpansion=function(n,t,i){return n.expanded!==i?this._toggle(n,t):!1},t.prototype.removeNode=function(n){var u,i,r,t,f;if(this._options.useArrowKeysForNavigation){if(u=this._getNodeElement(n),i=void 0,n.parent){for(r=n.parent.children.indexOf(n),t=r-1;t>=0;t--)if(!n.parent.children[t].noFocus){i=n.parent.children[t];break}if(!i){for(t=r+1;t<n.parent.children.length;t++)if(!n.parent.children[t].noFocus){i=n.parent.children[t];break}i||(i=n.parent)}}f=this._getNodeElement(n).is(this._focusedNode);u.remove();n.remove();this._restoreTabindexAndFocus(i,f)}else this._getNodeElement(n).remove(),n.remove()},t.prototype.updateNode=function(n,t){var i,r,u;n.root?(i=this.getElement(),r=-1):(i=this._getNodeElement(n),r=i.data(b.LEVEL_DATA_NAME),i.removeClass());u=i.is(this._focusedNode);i.data("ui-draggable")&&i.draggable("destroy");i.data("ui-droppable")&&i.droppable("destroy");i.empty();this._updateNode(i,n,r);this._options.useArrowKeysForNavigation&&!t&&this._restoreTabindexAndFocus(n,u)},t.prototype.onItemClick=function(n,t){if(this._options.clickToggles&&this._toggle(n,t))return!1;this._options.clickSelects&&this.setSelectedNode(n)},t.prototype.onShowPopupMenu=function(n,t){var r,i,f,e,s;if(t&&t.items&&t.items.length){if(i=this._getNodeElement(n),f=this._getFirstTabbableChild(i)[0],e=i.find("div.node-context-menu"),this._popupMenu){if(i.hasClass("context-menu-active")){t.suppressInitContributions&&this._popupMenu.refreshContributedItems();this._popupMenu.popup(f,e);return}this._popupMenu.dispose();this._popupMenu=null}r=t.items.slice(0);t.sortMenuItems&&r.sort(function(n,t){return(n.rank||9999)-(t.rank||9999)});s=$.extend({},n);this._popupMenu=u.BaseControl.createIn(o.PopupMenu,i,{align:t.align||(this._options.useBowtieStyle?"right-bottom":"left-bottom"),useBowtieStyle:this._options.useBowtieStyle,executeAction:t.executeAction||t.clickHandler,items:[{childItems:r}],onActivate:function(){i.addClass("context-menu-active")},onDeactivate:function(){i.removeClass("context-menu-active")},onPopupEscaped:function(){i.removeClass("context-menu-active")},getCommandState:t.getCommandState,updateCommandStates:t.updateCommandStates,arguments:t.arguments,contributionIds:t.contributionIds,contextInfo:{item:s,menu:this._popupMenu},suppressInitContributions:t.suppressInitContributions});this._popupMenu.getElement().prependTo(i);l.delay(this,10,function(){t.suppressInitContributions&&this._popupMenu.refreshContributedItems();this._popupMenu.popup(f,e)})}},t.prototype.enableFocusStyling=function(n){this._options.styleFocusElement!==n&&(this._options.styleFocusElement=n,this._setFocusElement(this._focusedNode))},t.prototype._setFocusElement=function(n){var t=this._options.styleFocusElement;this._focusedNode&&this._focusedNode.length&&this._focusedNode.removeClass("focus");this._focusedNode=n;t&&this._focusedNode&&this._focusedNode.length&&(this._focusedNode.hasClass("nofocus")||this._focusedNode.addClass("focus"))},t.prototype.getNodeFromElement=function(n){var t=$(n);return this._getNode(t)},t.prototype._drawNode=function(n,t,i){var r;r=n.root?t:$("<li />").appendTo(t);this._updateNode(r,n,i)},t.prototype._drawEmptyFolderNode=function(n,t,i){var r,u;u=$("<li />").appendTo(n);r=new d(i);r.isEmptyFolderChildNode=!0;r.config.css="info";r.config.unselectable=!0;r.noFocus=!0;r.noContextMenu=!0;this._updateNode(u,r,t)},t.prototype._click=function(n){var t=$(n.target),i=t.closest("li.node");if(i.length>0){if(this._options.useArrowKeysForNavigation&&i.children("a.node-link").focus(),this._setFocusElement(i),t.closest("span.node-img").length>0)return this._onToggle(n);if(t.closest("div.node-content").length>0)return this._itemClick(n);if(t.closest("div.node-context-menu").length>0)return this._onContextMenu(n)}},t.prototype.focusOnNode=function(n){if(n&&!n.noFocus){var t=this._getNodeElement(n);t.length>0&&t.children("a.node-link").focus()}},t.prototype._onInputKeyDown=function(n){var f=this,e=$(n.target),i=e.closest("li.node"),r=this._getNode(i),u=function(n,t){var i=t(n);if(i.length>0)return i.children("a.node-link").focus(),!1};switch(n.keyCode){case p.RIGHT:return r&&r.expanded===!0&&this._options.useArrowKeysForNavigation?u(i,function(n){return n.children("ul.tree-children").find(t.NODE_VISIBLE_AND_FOCUSABLE).first()}):(this._setNodeExpansion(this._getNode(i),i,!0),!1);case p.LEFT:return r&&r.expanded===!1&&this._options.useArrowKeysForNavigation?u(i,function(n){return n.parents(t.NODE_VISIBLE_AND_FOCUSABLE).first()}):(this._setNodeExpansion(this._getNode(i),i,!1),!1);case p.DOWN:if(this._options.useArrowKeysForNavigation)return u(i,function(n){var o=f.getNodeFromElement(n),r,u,i,e;if(o&&o.expanded===!0&&(r=n.children("ul.tree-children").find(t.NODE_VISIBLE_AND_FOCUSABLE).first(),r.length===1))return r;if(u=n.nextAll(t.NODE_VISIBLE_AND_FOCUSABLE).first(),u.length===1)return u;for(i=n.parents(t.NODE_VISIBLE_AND_FOCUSABLE).first();i.length===1;){if(e=i.nextAll(t.NODE_VISIBLE_AND_FOCUSABLE).first(),e.length===1)return e;i=i.parents(t.NODE_VISIBLE_AND_FOCUSABLE).first()}return $([])});case p.UP:if(this._options.useArrowKeysForNavigation)return u(i,function(n){var i=n.prevAll(t.NODE_VISIBLE_AND_FOCUSABLE).first(),r,u,e;return i.length===1?(r=f.getNodeFromElement(i),r&&r.expanded===!0&&(u=i.children("ul.tree-children").find(t.NODE_VISIBLE_AND_FOCUSABLE).last(),u.length===1))?u:i:(e=n.parents(t.NODE_VISIBLE_AND_FOCUSABLE).first(),e.length===1)?e:$([])});case p.ENTER:if(!$(".node-link",i).attr("href")){this.onItemClick(r,i,n);return!1}break;case p.F10:return n.shiftKey?this._onContextMenu():void 0}},t.prototype._onToggle=function(n){var t=$(n.target).parents("li.node:first"),i=this._getNode(t);return $.isFunction(this._options.onItemToggle)&&this._options.onItemToggle.call(this,i),this._toggle(i,t),!1},t.prototype._itemClick=function(n){var t=$(n.target).closest("li.node"),i=this._getNode(t);return this.onItemClick(i,t,n)},t.prototype._onContextMenu=function(){if(this._options.contextMenu&&this._focusedNode&&this._focusedNode.length>0)return this._showPopupMenu(this._getNode(this._focusedNode)),!1},t.prototype._showPopupMenu=function(n){var t,i;if(n){t=n.contextMenu;i=typeof t!="undefined"?$.isFunction(t)?t.call(this,n):t:this._options.contextMenu;this.onShowPopupMenu(n,i)}},t.prototype._onFocus=function(n){var t=$(n.target).closest("li.node");t.length>0&&(this._setFocusElement(t),this._options.useArrowKeysForNavigation&&this._setNodeHasTabindex(this._getNode(this._focusedNode)));this.getElement().toggleClass("focus",!0);this._hasFocus=!0},t.prototype._onBlur=function(){this._setFocusElement(null);this._clearFocusOnElement()},t.prototype._clearFocusOnElement=function(){this.getElement().toggleClass("focus",!1);this._hasFocus=!1},t.prototype._onDragStart=function(){return!1},t.prototype.setDroppable=function(n){this._droppable=n},t.prototype._getFirstTabbableChild=function(n){return n.children("a.node-link, div.node-content[tabIndex]").first()},t.prototype._setNodeElementExpandState=function(n,t,i){i===void 0&&(i=!0);n.removeClass(b.EXPANDED_CLASS+" "+b.COLLAPSED_CLASS);n.addClass(t?b.EXPANDED_CLASS:b.COLLAPSED_CLASS);var r=this._getFirstTabbableChild(n);r.length>0&&i&&r.attr("aria-expanded",""+t)},t.prototype._restoreTabindexAndFocus=function(n,t){if(this._nodeHasTabindex){var i=this._getNodeElement(this._nodeHasTabindex);if(i.is(":visible")){this._setNodeHasTabindex(this._nodeHasTabindex);t&&i.children("a.node-link").focus();return}}this._setNodeHasTabindex(n);t&&this._getNodeElement(n).children("a.node-link").focus()},t.prototype._setNodeHasTabindex=function(n){var t,i;n&&(this._nodeHasTabindex&&(t=this._getNodeElement(this._nodeHasTabindex),t.removeClass("has-tab-index"),t.children("a.node-link").attr("tabindex",-1)),this._nodeHasTabindex=n,i=this._getNodeElement(this._nodeHasTabindex),i.addClass("has-tab-index"),i.children("a.node-link").attr("tabindex",0))},t._typeName="tfs.treeView",t.NODE_DATA_NAME="node-data",t.LEVEL_DATA_NAME="node-level",t.EXPANDED_CLASS="expanded",t.COLLAPSED_CLASS="collapsed",t.NODE_VISIBLE_AND_FOCUSABLE="li.node:visible:not(.nofocus)",t}(u.Control);t.TreeViewO=it;b=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(it);t.TreeView=b;y.initClassPrototype(b,{rootNode:null,_focusDelegate:null,_blurDelegate:null,_dragStartDelegate:null,_hasFocus:!1,_selectedNode:null,_draggable:null,_droppable:null,_focusedNode:null,_popupMenu:null});u.Enhancement.registerJQueryWidget(b,"treeView");tt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"tree",createItem:k(this,this._createItem),itemClick:k(this,this._onItemClick),dropPopupRole:"treeview",virtualizingListViewRole:"tree"},t))},t.prototype.expandNode=function(){var n=this._getSelectedNode();return n&&n.hasChildren()&&!n.expanded?(this.getDataSource().expandNode(n),this.virtualizingListView.update(),!0):!1},t.prototype.collapseNode=function(){var n=this._getSelectedNode();return n&&n.hasChildren()&&n.expanded?(this.getDataSource().collapseNode(n),this.virtualizingListView.update(),!0):!1},t.prototype._createItem=function(n){var t=this.getDataSource().getItem(n),i=$(w("li",this._options.nodeCss)),s=t.level(!0),o,r,u,e;return i.attr({id:t.getHtmlId(),role:"treeitem","aria-posinset":t.parent.children.indexOf(t)+1,"aria-setsize":t.parent.children.length,"aria-level":s+1}),t.hasChildren()&&(i.addClass(t.expanded?"expanded":"collapsed"),i.attr("aria-expanded",String(t.expanded)),o=$("<ul><\/ul>"),i.append(o),o.attr({id:"".concat(t.getHtmlId(),"_group"),role:"group","aria-owns":t.children.map(function(n){return n.getHtmlId()}).join(" ")})),r=$(w("div","node-content")).css("padding-left",s*10),$(w("span","node-img icon")).appendTo(r),this._options.showIcons&&t.icon&&$(w("span",t.icon)).appendTo(r),u=t.text||"",e=$(w("span","text")).text(u),this._options.setTitleOnlyOnOverflow!==!1?f.RichContentTooltip.addIfOverflow(u,r):e.attr("title",u),t.isSearchHit&&e.addClass("searchHit"),r.append(e),i.append(r),i},t.prototype._onItemClick=function(n,t,i){var r,u;return i.hasClass("node-img")&&(u=this.getDataSource(),r=u.getItem(t),r.hasChildren())?(r.expanded?(u.collapseNode(r),this.combo._fire("treeNodeCollapsed")):(u.expandNode(r),this.combo._fire("treeNodeExpanded")),this.virtualizingListView.update(),!1):!0},t.prototype._getSelectedNode=function(){return this.getDataSource().getItem(this.virtualizingListView.getSelectedIndex())},t}(i.ComboListDropPopup);t.ComboTreeDropPopup=tt;rt=function(n){function t(t,i){return n.call(this,t,$.extend({dropControlType:tt,sepChar:"\\",treeLevel:2},i))||this}return __extends(t,n),t.prototype.canType=function(){return!this.isDropVisible()},t.prototype.leftKey=function(){var n=this.getDropPopup();if(n)return n.collapseNode(),!1},t.prototype.rightKey=function(){var n=this.getDropPopup();if(n)return n.expandNode(),!1},t.prototype.keyUp=function(t){return this.isDropVisible()?!1:n.prototype.keyUp.call(this,t)},t.prototype._createDataSource=function(){return new nt(this._options)},t}(i.ComboListBehavior);t.ComboTreeBehavior=rt;t.ComboTreeBehaviorName="tree";i.Combo.registerBehavior(t.ComboTreeBehaviorName,rt);ut=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._checkStates={},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"tree",createItem:k(this,this._createItem),itemClick:k(this,this._onItemClick)},t))},t.prototype.initialize=function(){this._options.id||(this._options.id="ctmvdp_"+u.getId());this._updateCheckList();n.prototype.initialize.call(this)},t.prototype.expandNode=function(){var n=this._getSelectedNode();return n&&n.hasChildren()&&!n.expanded?(this.getDataSource().expandNode(n),this.virtualizingListView.update(),!0):!1},t.prototype.collapseNode=function(){var n=this._getSelectedNode();return n&&n.hasChildren()&&n.expanded?(this.getDataSource().collapseNode(n),this.virtualizingListView.update(),!0):!1},t.prototype.getCheckedItems=function(){var t=this,n=this.getDataSource();return $.map(n.getItems(!0),function(i,r){return i=n.getItemText(r,!0),t._checkStates[i]?i:void 0})},t.prototype.getValue=function(){return this.getCheckedItems().join(this._options.multiJoinChar)},t.prototype._createItem=function(n){var f=this.getDataSource(),t=f.getItem(n),r,i,e=this._options.id+"_cb"+n,o=this._checkStates[f.getItemText(n)],s=t.level(!0),h=this._options.id+"_label"+n,u,c;return r=$(w("li",this._options.nodeCss)).attr({id:this._options.id+"_li"+n,"aria-checked":o?"true":"false","aria-level":s+1,"aria-posinset":t.parent.children.indexOf(t)+1,"aria-setsize":t.parent.children.length,"aria-labelledby":h}),t.hasChildren()&&r.addClass(t.expanded?"expanded":"collapsed"),i=$(w("div","node-content")).css("padding-left",s*10),$(w("span","node-img icon")).appendTo(i),this._options.showIcons&&t.icon&&$(w("span",t.icon)).appendTo(i),u=$(w("input","cb")).data("value",t.text||"").attr("title",t.text||"").attr("type","checkbox").attr("id",e).data("index",n),c=$(w("label","text")).attr({"for":e,id:h,title:t.text||""}).text(t.text||""),o&&u.prop("checked",!0),t.isSearchHit&&u.addClass("searchHit"),i.append(u),i.append(c),r.append(i),r},t.prototype._onItemClick=function(n,t,i,r){var u=this.getDataSource(),f=u.getItem(t);if(i.hasClass("node-img")&&(this._fireDropPopupChange(u,t,r),f.hasChildren()))return f.expanded?u.collapseNode(f):u.expandNode(f),this.virtualizingListView.update(),!1;(i.hasClass("text")||i.hasClass("cb"))&&this._fireDropPopupChange(u,t,r)},t.prototype._getSelectedNode=function(){return this.getDataSource().getItem(this.virtualizingListView.getSelectedIndex())},t.prototype.toggleCheckbox=function(n){var r=this._options.id+"_cb"+n,t,i;i=this.getDataSource().getItemText(n);t=$("#"+r);t.prop("checked")?(t.prop("checked",!1),this._checkStates[i]=!1):(t.prop("checked",!0),this._checkStates[i]=!0)},t.prototype.update=function(){this._updateCheckList();n.prototype.update.call(this)},t.prototype._updateCheckList=function(){var n=this.combo.getText().split(this._options.multiJoinChar),t=this;this._clearCheckList();$.each(n,function(n,i){i=$.trim(i);i&&(t._checkStates[i]=!0)})},t.prototype._clearCheckList=function(){this._checkStates={}},t.prototype._fireDropPopupChange=function(n,t,i){var u,r,f=n.getItemText(t);u=Boolean(this._checkStates[f]);r=Boolean(i.find("input").prop("checked"));this._checkStates[f]=r;u!==r&&this._fireChange()},t}(i.ComboListDropPopup);t.MultiSelectTreeComboDropPopup=ut;ft=function(n){function t(t,i){return n.call(this,t,$.extend({dropControlType:ut,sepChar:"\\",joinChar:"\\",multiJoinChar:"; ",treeLevel:2},i))||this}return __extends(t,n),t.prototype.canType=function(){return!this.isDropVisible()},t.prototype.getDropOptions=function(){var t=this;return $.extend(n.prototype.getDropOptions.call(this),{sepChar:this._options.sepChar,joinChar:this._options.joinChar,multiJoinChar:this._options.multiJoinChar,selectedIndex:-1,selectionChange:function(){t.combo.updateAriaActiveDescendant()},change:k(this,this._onChange)})},t.prototype.leftKey=function(){var n=this.getDropPopup();if(n)return n.collapseNode(),!1},t.prototype.rightKey=function(){var n=this.getDropPopup();if(n)return n.expandNode(),!1},t.prototype.keyUp=function(t){return this.isDropVisible()?!1:n.prototype.keyUp.call(this,t)},t.prototype.upKey=function(t){this.isDropVisible()&&n.prototype.upKey.call(this,t)},t.prototype.downKey=function(t){this.isDropVisible()?n.prototype.downKey.call(this,t):this.showDropPopup()},t.prototype.keyDown=function(n){var t=this.getDropPopup(),i;t&&n.keyCode===p.SPACE&&(i=t.getSelectedIndex(),i>=0&&(t.toggleCheckbox(i),this.setText(t.getValue(),!0)))},t.prototype._createDataSource=function(){return new nt(this._options)},t.prototype._onChange=function(){var n=this.getDropPopup();return this.setText(n.getValue(),!0),!1},t.prototype.setSource=function(t){if(JSON.stringify(t)===JSON.stringify(this.getDataSource().getSource())){this._maxItemLength=null;return}n.prototype.setSource.call(this,t)},t}(i.ComboListBehavior);t.MultiSelectTreeComboBehavior=ft;t.ComboTreeMultivalueBehaviorName="treeMultiValue";i.Combo.registerBehavior(t.ComboTreeMultivalueBehaviorName,ft);et=function(n){function t(t,i){var r=n.call(this,t,$.extend({dropControlType:tt,sepChar:"\\",treeLevel:2},i))||this;return r.hitText=[],r.selectedHitIndex=-1,r.originalNodes=null,r.lastSearchText="",r.debounceWaitTime=300,r.textHasChanged=!1,r}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this.combo._bind(this.combo.getInput(),"mouseup",k(this,this.mouseUp))},t.prototype.canType=function(){return!0},t.prototype.getAriaAutocomplete=function(){return"list"},t.prototype.getAriaDescription=function(){return s.ComboSearchTreeScreenReaderHelp},t.prototype.leftKey=function(){var n=this.getDropPopup();if(n)return n.collapseNode(),!1},t.prototype.rightKey=function(){var n=this.getDropPopup();if(n)return n.expandNode(),!1},t.prototype.keyDown=function(t){var i=t.keyCode||t.charCode,r;return this.isDropVisible()&&(i===p.ENTER||i===p.TAB)&&!this.searchDebounceTimeout&&(r=this.combo.getText(),r===this.lastSearchText)?(this.acceptSelectedIndex(),!0):i===p.TAB&&this.searchDebounceTimeout?(this.clearSearchDebounce(),!0):n.prototype.keyDown.call(this,t)},t.prototype.keyUp=function(t){var i=t.keyCode||t.charCode,r=n.prototype.keyUp.call(this,t);if(this._options.mode!=="text"&&!this.isComboTextPath()){if(i===p.ENTER)return this.debounceSearch(0),!0;if(i===p.UP||i===p.DOWN||i===p.PAGE_UP||i===p.PAGE_DOWN||i===p.ESCAPE||this.isDropVisible()&&(i===p.LEFT||i===p.RIGHT))return this.clearSearchDebounce(),!0;this.debounceSearch(this.debounceWaitTime)}return r},t.prototype._createDataSource=function(){return new nt(this._options)},t.prototype.mouseUp=function(){if($.isFunction(this._options.onMouseUp)){this._options.onMouseUp.call(this);return}if(!this.textHasChanged){this.lastSearchText=this.combo.getText();this.textHasChanged=!0;return}this.debounceSearch(this.debounceWaitTime)},t.prototype.clearSearchDebounce=function(){clearTimeout(this.searchDebounceTimeout);this.searchDebounceTimeout=null},t.prototype.debounceSearch=function(n){var t=this,i=function(){t.searchDebounceTimeout=null;t.searchNodes()};clearTimeout(this.searchDebounceTimeout);this.searchDebounceTimeout=setTimeout(i,n)},t.prototype.isComboTextPath=function(){var n=this.combo.getText();return n.indexOf("\\")>=0},t.prototype.searchNodes=function(){var n=this.combo.getText(),i,t,r;if(this._ensureOriginalNodesStored(),this.lastSearchText!==n){i=Date.now();this.hitText=[];this.selectedHitIndex=-1;t=!1;n===""||this.isComboTextPath()||(r=this.getNodesToSearch(n),t=this.createCopyOfSubtreeWhichMatchesSearch(n,r));this.modifyDatasourceAndDropdownWithResults(t);var u=Date.now(),f={SearchText:n,SearchTimeTaken:u-i};c.publishEvent(new c.TelemetryEventData(ot,"TreeSearch",f));this.lastSearchText=n}},t.prototype._ensureOriginalNodesStored=function(){if(!this.originalNodes){var n=this._dataSource;this.originalNodes=n.getItems(!0)}},t.prototype.getNodesToSearch=function(n){var t=this._dataSource;return this.lastSearchText!==""&&a.startsWith(n,this.lastSearchText)?t.getItems(!1):this.originalNodes},t.prototype.createCopyOfSubtreeWhichMatchesSearch=function(n,t){var r=this._dataSource,o=[],s=!1,u,f,e,i,h,l,a;for(r.root=this.copyNodeToArray(o,r.root),r.root.root=!0,u=t.length,e=0,i=0;i<u;i++)f=t[i],h=f.text,this.stringContains(h,n)&&(s=!0,this.performSearchHitProcessing(o,f),e++);return l={SearchText:n,SearchResultCount:e.toString(),CountOfItemsSearched:u.toString()},a="TreeSearch",c.publishEvent(new c.TelemetryEventData(ot,a,l)),s},t.prototype.stringContains=function(n,t){return a.caseInsensitiveContains(n,t)},t.prototype.modifyDatasourceAndDropdownWithResults=function(n){var t=this._dataSource,i,r,u;n||(this.hideDropPopup(),this.selectedHitIndex=-1,t.root=this.originalNodes[0].parent);i=[];r=[];g(t.root,i,!1);g(t.root,r,!0);t.setItems(i,r);n&&(this.showDropPopup(),u=this.getDropPopup(),u.virtualizingListView.update(),this.selectedHitIndex=0,this.setHit(this.selectedHitIndex))},t.prototype.expandAncestors=function(n){for(n=n.parent;n&&!n.expanded;)n.expanded=!0,n=n.parent},t.prototype.performSearchHitProcessing=function(n,t){this.copyNodeAndAncestorsToArray(n,t);this.copyDecendantsToArray(n,t);this.hitText[this.hitText.length]=t.path(!1,"\\");t=n[t.id];t.expanded=!1;this.expandAncestors(t);t.isSearchHit=!0},t.prototype.copyNodeToArray=function(n,t){var i=new d(t.text,t.config);return i.id=t.id,n[i.id]=i,i},t.prototype.copyNodeAndAncestorsToArray=function(n,t){if(!n[t.id]){var i=this.copyNodeToArray(n,t);t.parent&&(this.copyNodeAndAncestorsToArray(n,t.parent),n[t.parent.id].add(i))}n[t.id].expanded=!0},t.prototype.copyDecendantsToArray=function(n,t){var u,i,r;if(t.hasChildren)for(u in t.children)i=t.children[u],n[i.id]||(r=this.copyNodeToArray(n,i),r.expanded=!1,n[i.parent.id].add(r),this.copyDecendantsToArray(n,i))},t.prototype.setHit=function(n){if(n<0||n>=this.hitText.length)return!1;var i=this.hitText[n],t=this.getDropPopup();return t&&t.setSelectedValue(i),!0},t.prototype.acceptSelectedIndex=function(){this.selectedHitIndex>=0&&this.selectedHitIndex<this.hitText.length&&this.setText(this.hitText[this.selectedHitIndex],!0)},t}(i.ComboListBehavior);t.SearchComboTreeBehavior=et;t.SearchComboTreeBehaviorName="treeSearch";i.Combo.registerBehavior(t.SearchComboTreeBehaviorName,et);t.flatten=g;y.tfsModuleLoaded("VSS.UI.Controls.TreeView",t)});

define("VSS/Controls/KeyboardShortcuts",["require","exports","react","VSS/VSS","VSS/Resources/VSS.Resources.Platform","VSS/Utils/UI","VSS/LWP","VSS/LWP","VSS/LoaderPlugins/Css!VSS.Controls","VSS/LoaderPlugins/Css!widget"],function(n,t,i,r,u,f,e,o){var c,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.ShortcutManager=t.ShortcutKeys=void 0,function(n){n.ALT="alt";n.CONTROL="ctrl";n.SHIFT="shift"}(c=t.ShortcutKeys||(t.ShortcutKeys={}));s=function(){function n(){}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getShortcutGroups=function(){var n=o.getLWPService("IVssKeyboardShortcutService");return n?n.getShortcutGroups():[]},n.prototype.getGlobalCombos=function(){var n=o.getLWPService("IVssKeyboardShortcutService");return n?n.getGlobalCombos():[]},n.prototype.registerShortcut=function(n,t,i,r,u){var f;return f=typeof i=="string"?{action:r,allowPropagation:u,description:i}:i,this.registerShortcuts(n,[t],f)},n.prototype.registerShortcuts=function(n,t,i,r,u){var e,f;return e=typeof i=="string"?{action:r,allowPropagation:u,description:i}:i,f=o.getLWPService("IVssKeyboardShortcutService"),f&&f.registerShortcut(n,__assign({combos:t},e)),this},n.prototype.unRegisterShortcut=function(n,t){var i=o.getLWPService("IVssKeyboardShortcutService");i&&i.unRegisterShortcut(n,t)},n.prototype.removeShortcutGroup=function(n){var t=o.getLWPService("IVssKeyboardShortcutService");t&&t.removeShortcutGroup(n)},n.prototype.showShortcutDialog=function(t){var i=this;$(".keyboard-shortcut-dialog").length<=0&&r.using(["VSS/Controls/Dialogs"],function(r){var f=n.getInstance().getShortcutGroups(),e=300*Math.min(f.length,4)+50,o=f.map(function(n){return n.shortcuts.filter(function(n){return n.combosToDisplay.length>0}).length}),s=Math.max.apply(Math,o),h=35*s+150;i._shortcutDialog=r.show(r.ModalDialog,{width:e,height:h,minWidth:300,minHeight:300,resizable:!1,buttons:[],cssClass:"keyboard-shortcut-dialog",title:u.KeyboardShortcutDialogTitle,content:i.renderDialogContent(f),close:function(){t&&t();i._shortcutDialog=null}})})},n.prototype.renderDialogContent=function(n){var t=$("<div />").addClass("keyboard-shortcut-container");return t.append(this.renderShortcutGroups(n)),t.append(this.renderHelpLink()),t},n.prototype.renderShortcutGroups=function(n){for(var u,i=$("<div />").addClass("keyboard-shortcut-groups"),t=0,r=n.filter(function(n){return n.shortcuts.some(function(n){return n.combosToDisplay.length>0})});t<r.length;t++)u=r[t],i.append(this.renderGroup(u));return i},n.prototype.renderShortcut=function(n){var r=f.BrowserCheckUtils.isMacintosh()||f.BrowserCheckUtils.isIOS(),i=$("<span />"),t;return n.combosToDisplay.forEach(function(n,t){n=n.replace(/\bmod\b/gi,r?"\u2318":"ctrl");t>0&&i.append("/ ");n.split(" ").forEach(function(n){$("<kbd />").text(n).appendTo(i)})}),t=$("<tr />"),$("<td class='keys-definition' />").append(i).appendTo(t),$("<td class='keys-description' />").text(n.description).appendTo(t),t},n.prototype.renderGroup=function(n){var u=this,r=$("<div />").addClass("keyboard-shortcut-group"),t=$("<table />"),i=$("<tr />");return i.append("<th />"),$("<th />").text(n.name).attr("scope","col").appendTo(i),i.appendTo(t),n.shortcuts.forEach(function(n){n.combosToDisplay.length>0&&u.renderShortcut(n).appendTo(t)}),r.append(t),r},n.prototype.renderHelpLink=function(){var n=$("<div />").addClass("keyboard-shortcut-helplink");return $("<a />").attr("href","https://go.microsoft.com/fwlink/?LinkID=708466").attr("target","_blank").text(u.KeyboardShortcutHelpLinkText).appendTo(n),n},n.AREA="KeyboardShortcuts",n.FEATURE="ShortcutInvoked",n}();t.ShortcutManager=s;h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){return s.getInstance().showShortcutDialog(this.props.onClose),null},t}(i.Component);e.registerLWPComponent("shortcutDialog",h)});

define("TfsCommon/Scripts/Resources/TFS.Resources.TfsCommon",["require","exports"],function(require,exports){var e=exports;e.CancelButtonText="Cancel";e.ManageFeaturesScopeCustom="for this {0} [{1}]";e.ManageFeaturesOnLabel="On";e.ToggleFeatureOnAriaLabelFormat="{0}: on. Press enter to turn the feature off.";e.UnpinnedHubsMenuTitle="More ...";e.NewTeamProjectText="New project";e.FeatureBannerNameFormat="{0}:";e.MobileFeedbackSendButtonLabel="Send";e.GoToHomePage="Go to home page";e.NoFeatureScopeWritePermission="You don\u0027t have permission to manage these features.";e.FeatureScope="Feature scope";e.ProjectSelectorLabel="Project Selector";e.ManageFeaturesScopeCollection="for this collection [{0}]";e.NavigationContextMenuDefaultLabelTitle="Select a project";e.MobileNavigation_ButtonOpenLabel="Open navigation";e.ManageFeaturesSubHeadingOnPrem="The following features are optional and can be turned on or off.";e.TurnOnFeatureDialogTitleFormat="Turn on {0}?";e.CloseButtonLabel="Close";e.NavigationContextMenuDefaultLabel="Projects";e.KeyboardShortcutDescription_ShowShortcuts="Show shortcuts";e.SettingsMenuTitle="Settings";e.MobileFeedbackSent="Feedback sent! Thanks for improving Azure DevOps Services";e.NewTeamText="New team";e.FeatureEnabledCalloutBodyHtml="You can turn off this feature by going to \u003cb\u003ePreview features\u003c/b\u003e under your profile menu.";e.ManageFeaturesHeaderOnPrem="Manage features";e.NavigationContextMenuTeamLabelTitleFormat="Team \u0027{0}\u0027 in Project \u0027{1}\u0027";e.KeyboardShortcutDescription_GoHome="Go home";e.KeyboardShortcutDescription_GoCode="Go to code";e.KeyboardShortcutDescription_GoWork="Go to work";e.KeyboardShortcutDescription_GoWiki="Go to wiki";e.KeyboardShortcutDescription_GoTest="Go to test";e.MobileFeedbackNegativeSentiment="Frown";e.ToggleFeatureForCollectionWarning="This will affect all users in your collection.";e.MobileNavigation_Feedback="Send Feedback";e.ToggleFeatureForTeamWarning="This will affect all users in your team.";e.MobileFeedbackSending="Sending...";e.ManageFeaturesScopeTeam="for this team [{0}]";e.MobileFeedbackPositivePrompt="What did you like?";e.KeyboardShortcutDescription_Search="Search";e.UnpinMenuItemText="Unpin";e.ManageFeaturesSubHeading="The following preview features are available for your evaluation. Help us make them better!";e.ManageFeaturesScopeMe="for me [{0}]";e.TurnOffFeatureButtonText="Turn off";e.MoreHubsMenuTitle="More ...";e.TurnOnFeatureButtonText="Turn on";e.TurnOffFeatureDialogLabel="How can we make this feature better?";e.ManageFeaturesScopeAccount="for this organization [{0}]";e.KeyboardShortcutDescription_GoSettings="Go to settings";e.FeatureLearnMoreAriaLabel="Learn more about feature: {0}";e.FeatureBannerDismissButton="Not now";e.MobileFeedbackCommentAriaLabel="Comment";e.NavigationContextMenuTeamLabelFormat="{0} / {1}";e.AccountSettings="Organization settings";e.NoFeaturesAvailable="No features are available to manage.";e.CollectionsLabel="Collections";e.CollectionSelectorLabel="Collection Selector";e.ProjectSelectorMoreItemText="More";e.MobileFeedbackPositiveSentiment="Smile";e.UnpinnedItemsSeparatorText="Unpinned items";e.MobileNavigation_Fullsite="View full site";e.KeyboardShortcutDescription_ProjectsAndTeams="Projects and teams";e.NavigationContextMenuProjectLabelTitleFormat="Project \u0027{0}\u0027";e.KeyboardShortcutDescription_GoBuild="Go to build";e.LearnMore="Learn more";e.RecentProjectsTeamsLabel="Recent projects/teams";e.KeyboardShortcutDescription_FocusPrevious="Focus previous section";e.PrivacyStatement="Your privacy is important to us.";e.MobileNavigation_Signout="Sign out";e.PinnedProjectText="{0} Home";e.FeatureBannerTryItButton="Try it!";e.KeyboardShortcutGroup_Global="Global";e.MobileNavigation_GoProjectHomeLabel="Go home";e.KeyboardShortcutDescription_FocusNext="Focus next section";e.ManageFeaturesHeader="Preview features";e.MobileFeedbackNegativePrompt="What can we improve?";e.ToggleFeatureForAccountWarning="This will affect all users in your organization.";e.BrowseAllTeams="Browse...";e.MobileNavigation_GoHomeLabel="Go home";e.ManageFeaturesOffLabel="Off";e.PinMenuItemText="Pin";e.ManageFeaturesScopeProject="for this project [{0}]";e.DevModeFeaturesHeader="Experimental [Debug build only]";e.MoreMenuItemTitle="More items";e.FeatureDismissedCalloutBodyHtml="You can turn on this and other features in \u003cb\u003ePreview features\u003c/b\u003e under your profile menu.";e.DevModeFeaturesHeaderTooltip="This section lists all features and does not appear in retail builds.";e.NavigationContextMenuHostedBackTo="Organization home";e.Loading="Loading...";e.MobileFeedbackDialogTitle="Send Feedback";e.NavigationContextMenuOnPremBackTo="Server home";e.FeatureDismissedCalloutHeader="No problem. If you change your mind...";e.MoreItemsSeparatorText="More items";e.FeatureEnabledCalloutHeader="{0} is now on";e.TurnOffFeatureDialogTitleFormat="Turn off {0}?";e.ToggleFeatureOffAriaLabelFormat="{0}: off. Press enter to turn the feature on.";e.ProjectWithCollectionLabel="{0} ({1})";e.MobileBannerMessage="Switch to mobile version";e.MobileFeedbackCancelButtonLabel="Cancel";e.ToggleFeatureForProjectWarning="This will affect all users in your project.";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("TfsCommon/Scripts/KeyboardShortcuts",["require","exports","VSS/Context","VSS/Navigation/HubsService","VSS/Controls/KeyboardShortcuts","VSS/Locations","VSS/Controls/Menus","TfsCommon/Scripts/Resources/TFS.Resources.TfsCommon","VSS/Service","VSS/Utils/String","VSS/Utils/Array","VSS/Utils/UI","VSS/VSS","VSS/Events/Services","VSS/Events/Page","VSS/User/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var b,k,d,w,g;Object.defineProperty(t,"__esModule",{value:!0});t.ShortcutVisibility=t.GlobalShortcutGroup=t.ShortcutGroupDefinition=void 0;b=null;k=function(){function n(n,t){this.groupName=n;this.preserveLastGroupStateForSameGroupName=t;this._lastShortcutState={};this.shortcutManager=u.ShortcutManager.getInstance();t&&this._preserveLastShortcutGroupState();this._isMemberUser=this.isMemberUser()}return n.prototype.navigateToUrl=function(n){window.location.href=n},n.prototype.navigateToAction=function(n,t){var i=f.urlHelper.getMvcUrl({action:n,controller:t});this.navigateToUrl(i)},n.prototype.navigateToHub=function(){for(var f,h,c,e,o,l=[],n=0;n<arguments.length;n++)l[n]=arguments[n];var t=s.getLocalService(r.HubsService),i=null,u=null;for(f=0,h=l;f<h.length;f++){if(c=h[f],e=t.getHubGroupById(c),e&&e.uri){i=e;break}if(o=t.getHubById(c),o&&o.uri){u=o;break}}i?t.navigateToHub(i.id,i.uri):u&&t.navigateToHub(u.id,u.uri)},n.prototype.registerPageNavigationShortcut=function(n,t,i){((i&w.Member)!==w.Member||this._isMemberUser)&&(t.isPageNavigationShortcut=!0,this.shortcutManager.registerShortcut(this.groupName,n,t))},n.prototype.registerShortcut=function(n,t,i,r){((r&w.Member)!==w.Member||this._isMemberUser)&&(i&&this._preserveLastShortcutState([n]),this.shortcutManager.registerShortcut(this.groupName,n,t))},n.prototype.registerShortcuts=function(n,t,i,r){((r&w.Member)!==w.Member||this._isMemberUser)&&(i&&this._preserveLastShortcutState(n),this.shortcutManager.registerShortcuts(this.groupName,n,t))},n.prototype.unRegisterShortcut=function(n){this.shortcutManager.unRegisterShortcut(this.groupName,n)},n.prototype.removeShortcutGroup=function(){this.shortcutManager.removeShortcutGroup(this.groupName);this._restoreLastShortcutGroupState();this._restoreLastShortcutState()},n.prototype.isMemberUser=function(){return p.getService().hasClaim(p.UserClaims.Member)},n.prototype._preserveLastShortcutGroupState=function(){var t=this,i=this.shortcutManager.getShortcutGroups(),n=i.filter(function(n){return h.equals(n.name,t.groupName)});n.length>0&&(this._lastShortcutGroupState=__assign({},n[0]),this.shortcutManager.removeShortcutGroup(this.groupName))},n.prototype._preserveLastShortcutState=function(n){var t=this,r=this.shortcutManager.getShortcutGroups(),i;r.forEach(function(r){if(i)return!1;r.shortcuts.forEach(function(u){if(c.arrayEquals(n,u.combos,function(n,t){return h.equals(n,t,!0)})){var f=n.join(",");return t._lastShortcutState[f]={name:r.name,shortcuts:[u]},t.shortcutManager.unRegisterShortcut(r.name,f),i=!0,!1}})})},n.prototype._restoreLastShortcutGroupState=function(){var n=this;this.preserveLastGroupStateForSameGroupName&&this._lastShortcutGroupState&&h.equals(this._lastShortcutGroupState.name,this.groupName)&&(this._lastShortcutGroupState.shortcuts.forEach(function(t){n.shortcutManager.registerShortcuts(n._lastShortcutGroupState.name,t.combos,{description:t.description,action:t.action,element:t.element,hideFromHelpDialog:t.hideFromHelpDialog,allowPropagation:t.allowPropagation,globalCombos:t.globalCombos,isPageNavigationShortcut:t.isPageNavigationShortcut})}),this._lastShortcutGroupState=null)},n.prototype._restoreLastShortcutState=function(){var i,t,n;if(this._lastShortcutState)for(i in this._lastShortcutState)t=this._lastShortcutState[i],t&&(n=t.shortcuts[0],this.shortcutManager.registerShortcuts(t.name,n.combos,{description:n.description,action:n.action,element:n.element,hideFromHelpDialog:n.hideFromHelpDialog,allowPropagation:n.allowPropagation,globalCombos:n.globalCombos,isPageNavigationShortcut:n.isPageNavigationShortcut}),delete this._lastShortcutState[i])},n}();t.ShortcutGroupDefinition=k;d=function(n){function t(){var t=n.call(this,o.KeyboardShortcutGroup_Global)||this;return t.registerShortcut("f n",{description:o.KeyboardShortcutDescription_FocusNext,action:function(){return l.sectionManager.nextSection()}}),t.registerShortcut("f p",{description:o.KeyboardShortcutDescription_FocusPrevious,action:function(){return l.sectionManager.previousSection()}}),t}return __extends(t,n),t}(k);t.GlobalShortcutGroup=d,function(n){n[n.All=0]="All";n[n.Member=1]="Member"}(w=t.ShortcutVisibility||(t.ShortcutVisibility={}));g=function(){i.getPageContext().webContext.project&&new d};g();v.getService().attachEvent(r.HubEventNames.ProcessXHRNavigate,function(){g()});e.menuManager.attachExecuteCommand(function(n,t){function i(n){var i=$(".icon",n),t=$('<div class="nav-feedback-icon-wrappper"><\/div>');return t.appendTo(n),i.appendTo(t),t}switch(t.get_commandName()){case"send-a-smile":return a.using(["Engagement/SendASmile/UI"],function(n){if(!b){var r=t.get_commandSource().getElement();b=new n.SendASmile(r,{icon:i(r),textEntryType:n.FeedbackTextEntryType.Modal});b.show();b.popUp()}}),!1;case"keyboard-shortcuts":return u.ShortcutManager.getInstance().showShortcutDialog(),!1}});y.getService().subscribe(y.CommonPageEvents.InitialScriptsLoaded,function(){l.sectionManager.identifySections()})});

define("Presentation/Scripts/TFS/TFS.Core.Utils",["require","exports","q","VSS/Diag","VSS/Utils/Core"],function(n,t,i,r,u){function c(n,t){var u,f,e,i,o,r=!1,s=t||[];for(e=0,i=0,o=0,u=0;u<n.length;u++){if(i=n[u],i==="r")if(r)i=2,r=!1;else{r=!0;continue}else r?r=!1:(o=i,i=1);for(f=0;f<i;f++)e+=o,s[s.length]=e}return s}function l(n){return n.length===0?n:c(n)}function a(n,t){var r=[],i;if(t)for(i in n)r.push(i);else for(i in n)n.hasOwnProperty(i)&&r.push(i);return r}function v(n){var t,i;return document.cookie.length>0&&(t=document.cookie.indexOf(n+"="),t!==-1)?(t=t+n.length+1,i=document.cookie.indexOf(";",t),i===-1&&(i=document.cookie.length),decodeURIComponent(document.cookie.substring(t,i))):""}function y(n,t,i){i===void 0&&(i="/");var r="";window.location.protocol.indexOf("https")!==-1&&(r=";secure");document.cookie=n+"="+encodeURIComponent(t)+";path="+i+r}function s(n){return i.isPromise(n)}function d(n){return s(n)?n:i(n)}function g(n,t,i){var u=null,r;if(typeof t!="string"&&!$.isFunction(t))throw new Error("Invalid argument type: 'messageOrTransform'.");return $.isFunction(n)&&(u=function(u){typeof t=="string"?(r=new Error(t),i&&$.each(i,function(n,t){r[n]=t}),r.innerException=u):r=t(u);n(r)}),u}function nt(n){return typeof n=="string"}function tt(n){var r=[],t,i;return nt(n)&&(t=n.split(","),$.each(t,function(n){i=t[n].split(";");$.each(i,function(n){r.push($.trim(i[n]))})})),r}function it(){return typeof QUnit!="undefined"}function h(n){var t,i;if(Array.isArray(n)){t=[];for(i in n)t.push(h(n[i]));return t}return $.extend(!0,{},n)}function rt(){var n=document.documentElement&&document.documentElement.scrollTop,t=document.body.scrollTop;return n||t||0}function ut(n){document.body.scrollTop=n;document.documentElement&&(document.documentElement.scrollTop=n)}var f,e,p,o,w,b,k;Object.defineProperty(t,"__esModule",{value:!0});t.setWindowScrollTop=t.getWindowScrollTop=t.makeCopy=t.isRunningUnderTest=t.parseEmailAddressesStringToArray=t.transformError=t.makePromise=t.isPromise=t.GUIDUtils=t.BoolUtils=t.AnchorLinkUtils=t.TypeFactory=t.UserAgentUtils=t.OperationQueue=t.setCookie=t.getCookie=t.keys=t.unpackIntegerArray=t.Dictionary=void 0;f=function(){function n(n){this._items={};this._count=0;n&&n.throwOnKeyMissing===!0&&(this._throwOnKeyMissing=!0)}return n.prototype.count=function(){return this._count},n.prototype.item=function(n,t){if(this._checkKey(n),n=n.toString(),arguments.length>1)this._set(n,t);else{if(this._throwOnKeyMissing&&!this._items.hasOwnProperty(n))throw new Error("KeyNotFound: "+n);return this._items[n]}},n.prototype.keys=function(){var t=this._items,n=[];for(var i in t)t.hasOwnProperty(i)?n.push(i):n.push(null);return n},n.prototype.values=function(){var n=this._items,t=[];for(var i in n)t.push(n[i]);return t},n.prototype.add=function(n,t){if(this._checkKey(n),n=n.toString(),this._items.hasOwnProperty(n))throw new Error("An element with the same key already exists in the dictionary");this._set(n,t)},n.prototype.clear=function(){this._items={};this._count=0},n.prototype.containsKey=function(n){return this._checkKey(n),n=n.toString(),this._items.hasOwnProperty(n)},n.prototype.get=function(n){return this.item(n)},n.prototype.remove=function(n){this._checkKey(n);n=n.toString();this._items.hasOwnProperty(n)&&(this._count-=1);delete this._items[n]},n.prototype.set=function(n,t){this.item(n,t)},n.prototype.tryGetValue=function(n,t){return this.containsKey(n)?(t.value=this.get(n),!0):(t.value=undefined,!1)},n.prototype._checkKey=function(n){if(n===null||n===undefined)throw new Error("Null key not allowed");},n.prototype._set=function(n,t){this._items.hasOwnProperty(n)||(this._count+=1);this._items[n]=t},n}();t.Dictionary=f;t.unpackIntegerArray=l;t.keys=a;t.getCookie=v;t.setCookie=y;e=function(){function n(){this._operationQueue=[]}return n.prototype.queueOperation=function(n){this._operationQueue.push(n);this._processQueue()},n.prototype._processQueue=function(){var n=this;!this._isProcessingOperation&&this._operationQueue.length>0&&(this._isProcessingOperation=!0,u.delay(this,0,function(){function u(){t||(t=!0,n._isProcessingOperation=!1,n._processQueue())}var i,t=!1;i=n._operationQueue.shift();i(u)}))},n}();t.OperationQueue=e,function(n){function i(){return t().toLowerCase().indexOf("windows nt")>=0}function t(){return window.navigator.userAgent}n.isWindowsClient=i;n.getUserAgent=t}(p=t.UserAgentUtils||(t.UserAgentUtils={}));o=function(){function n(){}return n.prototype.registerConstructor=function(n,t){this._ctors||(this._ctors={});this._ctors[n]=t},n.prototype.getConstructor=function(n){return this._ctors&&this._ctors[n]},n.prototype.createInstance=function(n,t){function f(){}var u=this.getConstructor(n),i;return u&&(f.prototype=u.prototype,i=new f,i=u.apply(i,t)||i),i},n}();t.TypeFactory=o,function(n){function t(n,t){var i=null,u=t.find("#"+n),r;return u.length>0?i=$(u[0]):(r=t.find("a[name='"+n+"']"),r.length>0?i=$(r[0]):n.toLowerCase()==="top"&&(i=t)),i}n.findAnchorInContainer=t}(w=t.AnchorLinkUtils||(t.AnchorLinkUtils={})),function(n){function t(n){return(n||"").trim().toLowerCase()==="true"}function i(n){var t=(n||"").trim().toLowerCase();return t==="true"||t==="false"}n.parse=t;n.isValid=i}(b=t.BoolUtils||(t.BoolUtils={})),function(n){function i(){var n=(128+Math.floor(Math.random()*64)).toString(16);return t(8)+"-"+t(4)+"-4"+t(3)+"-"+n+t(2)+"-"+t(12)}function t(n){var i,r;if(!n)return Math.floor(Math.random()*16).toString(16);for(i="",r=0;r<n;r++)i+=t();return i}n.newGuid=i}(k=t.GUIDUtils||(t.GUIDUtils={}));t.isPromise=s;t.makePromise=d;t.transformError=g;t.parseEmailAddressesStringToArray=tt;t.isRunningUnderTest=it;t.makeCopy=h;t.getWindowScrollTop=rt;t.setWindowScrollTop=ut});

define("Presentation/Scripts/TFS/TFS.Service",["require","exports","VSS/Service","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Context","VSS/Common/Contracts/Platform"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.TfsService=void 0;var e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this.tfsConnection=t},t.prototype.getTfsContext=function(){if(!this._tfsContext){var n=this.getWebContext();this._tfsContext=n===u.getDefaultWebContext()?r.TfsContext.getDefault():new r.TfsContext(n)}return this._tfsContext},t.prototype.getCurrentServiceHost=function(){var n=this.getTfsContext(),t=this.getConnection().getHostType();return t===f.ContextHostType.ProjectCollection?n.navigation.collection:t===f.ContextHostType.Application?n.navigation.applicationServiceHost:n.navigation.serviceHost},t}(i.VssService);t.TfsService=e});

define("VSS/Diag/Services",["require","exports","VSS/Ajax","VSS/Context","VSS/Service"],function(n,t,i,r,u){function s(){var n=r.getPageContext();n&&n.diagnostics.allowStatsCollection&&n.diagnostics.activityId&&u.getLocalService(f).logActivity(n.diagnostics.activityId,window.location.href)}var f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.ActivityStatsCollector=void 0;f=function(){function n(){this._activtyIdHeader="ActivityId";this._progressPendingActions=null;this._progressPendingActionsNewId=0;this._progressPendingActions={};this._activtyStatsCollectionAllowedCallbacks=[]}return n.prototype.initialize=function(){},n.prototype.addActivtyStatsCollectionAllowedCallback=function(n){this._activtyStatsCollectionAllowedCallbacks.push(n)},n.prototype.actionStarted=function(n){if(!this.isCollectingStats())return-1;var t=++this._progressPendingActionsNewId;return this._progressPendingActions[t]=n,t},n.prototype.actionCompleted=function(n,t){var r=null,i,u,f;if(n>-1&&this._allowStatsCollection()&&this.isCollectingStats()&&(i=this._progressPendingActions[n],i)){delete this._progressPendingActions[n];try{u=t.getResponseHeader(this._activtyIdHeader);u&&i.toLowerCase().indexOf("/_apis/stats/activities")===-1&&(r=this.getCurrentPage(),f={actionDate:(new Date).toUTCString(),name:i,id:u,status:t.status,parentId:r?r.id:null},this._saveActivity(f))}catch(e){this.clearStats()}}},n.prototype.logActivity=function(n,t){try{if(this._allowStatsCollection()&&t&&t.toLowerCase().indexOf("_statistics")===-1){var i={actionDate:(new Date).toUTCString(),name:t,id:n};this._saveActivity(i,!0)}}catch(r){this.clearStats()}},n.prototype.getActivityStatistics=function(){try{var t=window.localStorage.getItem(n.ACTIVITY_ID_STORAGE_ITEM);return t?JSON.parse(t):[]}catch(i){return[]}},n.prototype.clearStats=function(){try{window.localStorage.removeItem(n.ACTIVITY_ID_STORAGE_ITEM);window.localStorage.removeItem(n.CURRENT_PAGE)}catch(t){}},n.prototype.collectStats=function(t){try{window.localStorage.setItem(n.ACTIVITY_COLLECTION_STATUS,t.toString())}catch(i){}},n.prototype.getCurrentPage=function(){try{var t=window.localStorage.getItem(n.CURRENT_PAGE);if(t)return JSON.parse(t)}catch(i){}return null},n.prototype.setCurrentPage=function(t){try{window.localStorage.setItem(n.CURRENT_PAGE,JSON.stringify(t))}catch(i){}},n.prototype.isCollectingStats=function(){try{var t=window.localStorage.getItem(n.ACTIVITY_COLLECTION_STATUS);return t?(t=t.toLowerCase(),t==="true"?!0:t==="false"?!1:(window.localStorage.removeItem(n.ACTIVITY_COLLECTION_STATUS),!1)):!1}catch(i){return!1}},n.prototype._saveActivity=function(t,i){if(this.isCollectingStats()&&this._allowStatsCollection()){var r=this.getActivityStatistics();r.push(t);window.localStorage.setItem(n.ACTIVITY_ID_STORAGE_ITEM,JSON.stringify(r));i&&this.setCurrentPage(t)}},n.prototype._allowStatsCollection=function(){for(var t=!0,n=0;n<this._activtyStatsCollectionAllowedCallbacks.length;n++)t=t&&this._activtyStatsCollectionAllowedCallbacks[n]();return t},n.ACTIVITY_COLLECTION_STATUS="TFS.ActivityCollectionStatus",n.ACTIVITY_ID_STORAGE_ITEM="TFS.ActivityIdStats",n.CURRENT_PAGE="TFS.CurrentPageActivity",n}();t.ActivityStatsCollector=f;s();u.getLocalService(f).addActivtyStatsCollectionAllowedCallback(function(){var n=r.getPageContext();return!!(n&&n.diagnostics.allowStatsCollection)});e={};o=r.getPageContext();o&&o.diagnostics.allowStatsCollection&&i.addGlobalListener({beforeRequest:function(n,t){var i=u.getLocalService(f).actionStarted(t);e[n]=i},responseReceived:function(n,t,i,r){u.getLocalService(f).actionCompleted(e[n],r);delete e[n]}})});

define("Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation",["require","exports"],function(require,exports){var e=exports;e.JumpstartGotoCode="Add code";e.EmbedVideosHelperString="Insert iframe block from YouTube or Microsoft Streams here.";e.ChartConsolidatedItemsTooltip="To fit within the chart, a set of items were consolidated into this single element:\r\n{0}";e.CancelButtonText="Cancel";e.MoveToIteration_Backlog="Backlog";e.MSTeamsVSTSConfig_TeamPickerPlaceholder="Select a team";e.AreaChartName="Area";e.MoreOptionsText="More options";e.KeyboardShortcutDescription_OpenQueries="Open queries";e.ProjectNameNotSpecified="Project name must be specified.";e.NewTeamProjectText="New team project";e.RemoveFromMyFavorites="Remove from my favorites";e.RelatedArtifacts_DuplicateKey="An item with the same key already exists";e.UnpinFromHomepageTooltipText="Unpin from homepage";e.MSTeamsVSTSConfig_AddDashboardRadioButton="Add a Dashboard";e.ChartsRemainingItems="(other)";e.JumpstartGotoBacklog="Manage work";e.WorkingTitle="Working...";e.ManualTestButtonText="Start manual testing";e.MVCActionToDpIdMappingNotFoundError="There is no dataprovider id mapped for the passed action {0}";e.ItemSecurityTitle="Security...";e.XTPromotionQuickStartOkButtonContent="Install";e.AddToTeamFavoritesTitle="Add to team favorites";e.MembersAddIdentitySeparationKey="semicolons";e.TwentyPercentLighterColor="20% lighter {0}";e.DashboardNotFoundDashboardMayHaveExisted="It is possible the dashboard did exist at one point but was removed.";e.ChartConfigurationLabel_RollingPeriod="Rolling period";e.InfoCustomProcessesShort="Reporting and SharePoint integration steps will be skipped when creating a team project from the Web.";e.AnnouncementCloseButtonTitle="Hide this module.  Select \u0026#34;Display announcement\u0026#34; from the help menu to make it visible again.";e.ClearFiltersText="Clear Filters";e.OpenPlatformSubtitle="Extend and empower Azure DevOps Server with your favorite third-party apps and services";e.PowerBIBackgroundImage="PowerBI.png";e.PivotTableTotalText="Total";e.OpenPlatformTitle="Integrate with other services";e.VsLinksOpenInVsTitle="Open in Visual Studio";e.LinkedArtifacts_EditComment="Edit comment";e.VideoLoadingMessage="Loading Video";e.TeamInputPlaceholder="Select a team";e.AboutTFSLearnSubtitle_OnPrem="Access online help for Azure DevOps Server";e.RelatedArtifacts_RemainingCount="({0} of {1})";e.ChartDimensionValue_NotRun="Not run";e.ErrorMissingDataForPinningWidget="Not Enough data in commandArgs to pin widget";e.YouViewedDateFormat="You viewed {0}";e.StateCategoryRemoved="Removed";e.XTPromotionQuickStartContent="Drive quality in your agile teams - capture your findings, create tasks/bugs/tests and collaborate with each other, right from your browser.";e.AboutTFSPricingSubtitle="Free for up to 5 users";e.RelatedArtifacts_SummaryNotShown="Not shown: {0}";e.AboutTFSLearnSubtitle_Hosted="Access online help for Azure DevOps Server";e.MSTeamsVSTSConfig_TeamDashboardsHeader="All team dashboards";e.MermaidDiagramText="Mermaid";e.ChartOrderResults_Descending="Descending";e.FilteredListNoItems="No items";e.LinkedArtifacts_RemoveLink="Remove link";e.ProjectCreationErrorGeneral="There was an error creating your project.";e.CodeSearchPromotionQuickStartTitle="Search for code across your projects";e.XTPromotionQuickStartCancelButtonContent="Not now";e.ErrorLoadingProjects="Cannot load recent project. Refresh the page to try again.";e.TeamRooms="Team rooms";e.SixtyPercentLighterColor="60% lighter {0}";e.TeamLabel="Team";e.CreateProjectProcessTemplateLabel="Process template";e.NavigationContextMenuDefaultLabelTitle="Select a project";e.PowerBITileSubTitle="Monitor, analyze, and share your VSTS data using Power BI";e.ChangeSearchTypeTooltip="Change search type";e.TeamMemberCountFormat="{0} MEMBERS";e.MSTeamsVSTSConfig_DashboardPickerLabel="Dashboard";e.DashboardNotFoundSystemNotBroken="Don\u0027t worry, the system is not broken.";e.AddToMyFavorites="Add to my favorites";e.ProgressControl_SummaryProgressToolTip="{0} remaining of {1} total capacity";e.ChartMessage_Loading="Loading...";e.BacklogDoesNotExistMessage="Backlog level does not exist.";e.ChartConfigurationLabel_Rows="Rows";e.ChartConfigurationLabel_Sort="Sort";e.FilteredListAriaDescribeSearchbox="Type to filter the list of items.";e.LoadMermaidDiagramAriaLabel="Load diagram";e.AccountTrialStartAccountTrial="Start organization trial";e.Indigo="Indigo";e.LinkedArtifacts_DataProvider_Null="There was error loading renderer for \u0027{0}\u0027 links.";e.SourceControlSystemDescriptionTFVC="Team Foundation Version Control (TFVC) uses a single, centralized server repository to track and version files.  Local changes are always checked in to the central server where other developers can get the latest changes.";e.LinkedArtifacts_EditCommentCancelButton="Cancel";e.MSTeamsVSTSConfig_KanbanDescription="Kanban boards provides a visual interactive way of tracking progress of work.";e.InlineEdit_Cancel="Cancel";e.RoomExplorer_NewRoom="New";e.AboutTFSPricingTitle="Pricing";e.MembersFinishTitle="Life is better with friends!";e.NewsTitle="News";e.ProjectVisibilityLabel="Visibility  who can see your project";e.PinToHomepageTitle="Pin to homepage";e.ChartDimensionValue_NotApplicable="Not applicable";e.SourceControlSystemDescriptionGit="Git is a Distributed Version Control System (DVCS) that uses a local repository to track and version files.  Changes are shared with other developers by pushing and pulling changes through a remote, shared repository.";e.ChartDimensionValue_Failed="Failed";e.LinkedArtifacts_ColumnHeader_State="State";e.AboutTFSAdminSubtitle="Manage projects, users, groups and permissions";e.ProgressControl_NoCurrentValue="({0})";e.gettingStartedContentVideourl="https://go.microsoft.com/fwlink/?LinkId=513324";e.InfoArea_DefaultMD_base="[Learn more](https://go.microsoft.com/fwlink/p/?LinkId=524306) about Markdown.";e.Orange="Orange";e.AzureBenefitSubTitle="Download software, use Azure services, view online training and more";e.TeamRoomPanelTitle="Recent team rooms";e.TryAllFeatures="Try out all the features for 90 days";e.InfoArea_DefaultReadmeMD_base="# Introduction\\\\r\\\\nTODO: Give a short introduction of your project. Let this section explain the objectives or the motivation behind this project. \\\\r\\\\n\\\\r\\\\n# Getting Started\\\\r\\\\nTODO: Guide users through getting your code up and running on their own system. In this section you can talk about:\\\\r\\\\n1.\tInstallation process\\\\r\\\\n2.\tSoftware dependencies\\\\r\\\\n3.\tLatest releases\\\\r\\\\n4.\tAPI references\\\\r\\\\n\\\\r\\\\n# Build and Test\\\\r\\\\nTODO: Describe and show how to build your code and run the tests. \\\\r\\\\n\\\\r\\\\n# Contribute\\\\r\\\\nTODO: Explain how other users and developers can contribute to make your code better. \\\\r\\\\n\\\\r\\\\nIf you want to learn more about creating good readme files then refer the following [guidelines](https://www.visualstudio.com/en-us/docs/git/create-a-readme). You can also seek inspiration from the below readme files:\\\\r\\\\n- [ASP.NET Core](https://github.com/aspnet/Home)\\\\r\\\\n- [Visual Studio Code](https://github.com/Microsoft/vscode)\\\\r\\\\n- [Chakra Core](https://github.com/Microsoft/ChakraCore)\\\\r\\\\n";e.ConfirmToDeleteChart="Do you want to delete the chart \u0027{0}\u0027?";e.ChartTooltipRemainingItemsOmitted="... (Additional items were omitted)";e.NavigationContextMenuDefaultLabel="Projects";e.TabNameContainsInvalidCharacters="Tab name contains invalid characters.";e.LinkedArtifacts_EditCommentDoneButton="OK";e.MermaidExampleTagAString="Wiki supports Mermaid";e.AdminGroupHeader="Admins";e.MembersFinishContent="The users you invited are now members of your team. You can now assign work, collaborate on code and ship great software!";e.MembersAddIdentity1Title="Add a user";e.MembersAddIdentity1Content1="Type the name or sign in address of the user you want to add. Use {0} to add multiple users.";e.MembersAddIdentity1Content2="When you are done, click on {0}.";e.LinkedArtifacts_ResolutionFailed="This {0} could not be read";e.VsLinksOpenInVsTooltip="Open Visual Studio and connect to this project with Team Explorer.";e.LinkedArtifacts_LoadingStart="Loading linked items";e.ConfigureChartDialogTitle="Configure Chart";e.LinkedArtifacts_LoadingError="Error loading linked items";e.ProjectNameInvalid="The project name is not valid.";e.CreateProjectProjectNameInvalidDescription="For more information about valid naming conventions for projects, see the topic \"Naming Restrictions for Azure DevOps Server\" on the Microsoft Web site: \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=77936\" target=\"_blank\"\u003ehttps://go.microsoft.com/fwlink/?LinkId=77936\u003c/a\u003e";e.LinkedArtifacts_ColumnHeader_LastUpdate="Latest Update";e.VsLinksGetVsIconTitle="Get Visual Studio";e.ProgressControl_DefaultProgressText="({0} of {1})";e.FilteredListShowingCount="Showing {0} matched items";e.AddNewItemsToolTip="Add: {0}";e.ProjectCreationErrorTryAgain="try again";e.CodeAnalysisAuthor="Code Analysis Bot";e.ProjectInputPlaceholder="Select a project";e.BacklogInputPlaceholder="Select a backlog level";e.AddToTeamFavoritesContextMenuItem="Add to Team Favorites";e.MembersAddButtonTitle="Manage members of your team";e.SidebarSearchWatermark="Search...";e.Chart2DValueTooltip="{0}, {1}: {2}";e.AreaChartAdvancedTooltip="Use this chart type to highlight the change in magnitude of a category over time.";e.TabStrip_Menu_InsertLeft="Insert left";e.NavigationContextMenuTeamLabelTitleFormat="Team \u0027{0}\u0027 in Project \u0027{1}\u0027";e.CreateFirstProjectWelcomeText="Welcome.  Your organization, \u003ca href=\u0027{0}\u0027 target=\u0027_blank\u0027\u003e{0}\u003c/a\u003e, is created and ready to go.  Now create your first team project where youll host your code and backlog. ";e.Stakeholder_NoProjectMessage="No projects available in the organization. Contact the organization owner to {0}.";e.AnnouncementCloseTileIcon="icon-close-small";e.MarkdownExternalLinkTooltip="External link";e.NewRoom="New Room";e.ProjectLabel="Project";e.ItemSecurityTooltipText="Security settings";e.Saving="Saving ...";e.QueryResultsText="Query Results";e.UnpinFromHomepageTitle="Unpin from homepage";e.Purple="Purple";e.AddToMyFavoritesTooltip="Add to my favorites";e.ColumnChartAdvancedTooltip="Use this chart type to compare categories.";e.ColorPickerLabelFormat="{0} {1}";e.PowerBITitle="Visualize data across your enterprise";e.ChartDimensionValue_Passed="Passed";e.LineChartAdvancedTooltip="Use this chart type to show how category values change relative to each other over time.";e.EnterFullScreenModeTooltip="Enter full screen mode (Z)";e.FilterClearFiltersTooltip="Clear filters";e.Yellow="Yellow";e.YouUpdatedDateFormat="You updated {0}";e.ProjectVisibilityDescriptionEveryoneInTenant="Members of your enterprise can view the project. Explicit permissions will not be respected.";e.ResourceUsageTitle="Resource usage";e.ChartDimensionValue_Blocked="Blocked";e.TeamDoesNotExistMessage="Team does not exist.";e.TabStrip_Menu_MoveUp="Move up";e.CreateProjectNamePlaceholderText="Type your project name, e.g. My first project";e.ChartSizeMissingMessage="Chart Control requires a width and height to be specified.";e.SourceControlSystemNameTFVC="Team Foundation Version Control";e.ChartMessage_NoDataToDisplay_Header="Last time you checked";e.MermaidExampleTagBString="Visit https://mermaidjs.github.io/ for Mermaid syntax";e.RMOAnnouncementTileSubTitle="Reduce your cycle time to improve your value delivery";e.MSTeamsVSTSConfig_DashboardPickerPlaceholder="Select a dashboard";e.LinkedArtifacts_ItemError="This link could not be read.";e.ChartConfigurationLabel_Columns="Columns";e.ChartsListLoading="Loading...";e.SignInToViewBoard="You must sign in to view this board.";e.MoveToIteration="Move to iteration";e.AjaxRequestFailedWithStatus="Ajax request failed with status: {0}.";e.ColorPalleteLabel="Color palette";e.GalleryPromotionNewFeatureText="Discover, try and buy extensions to enhance your development experience.";e.Confirm="Confirm";e.FilteredListRemoveFromFavorites="Remove from favorites";e.CreateReadMeWithProjectLabel="Create a README.md file to describe this project";e.TestHubContentWelcome="Deliver high quality projects with enhanced Manual/User acceptance testing, Automated unit/functional testing and Performance/Load testing.";e.MembersAddUserDialogSaveChanges="Save changes";e.NewWorkItemItemButtonText="New Work Item";e.AboutTFSFeaturesSubtitle_OnPrem="What does Azure DevOps Server have to offer?";e.VsLinksGetVsTitle="Get Visual Studio";e.GettingStartedVideos="https://go.microsoft.com/fwlink/?LinkID=512562";e.CodeSearchPromotionQuickStartCancelButtonContent="No thanks";e.Stakeholder_NoProjectMessage_LinkText="create a new project";e.ResourceUsageLearnMore="Learn more";e.AddToTeamFavoritesTooltipText="Add to team favorites";e.InsertMermaidDiagramDisabledInIEText="Mermaid diagrams are not supported in Internet Explorer browser";e.AnnouncementId="1";e.gettingStartedContentImageurl="https://go.microsoft.com/fwlink/?LinkId=513325";e.FilteredListAddToFavorites="Add to favorites";e.SearchTeams="Search Teams";e.BacklogLevelLabel="Backlog Level";e.ProjectVisibilityNameEveryoneInMicrosoftTenant="People in Microsoft";e.BarChartName="Bar";e.FilteredListTooManyMatches="Showing {0} of {1} matches. Click here to show all.";e.LinkedArtifacts_AriaLabel_LinksGrid="Links";e.ProjectVisibilityNameEveryone="Public";e.MembersFinishOkButton="Lets plan the sprint";e.Unassigned="Unassigned";e.ElsVsoIntegrationTitle="Load Testing";e.CodeSearchQuickStartContent="Start by typing a simple search like \u003cb\u003etodo\u003c/b\u003e or a method name in the search box. Press \u003cb\u003eEnter\u003c/b\u003e when you\u0027re done";e.LineChartName="Line";e.AboutTFSFeaturesSubtitle_Hosted="What does Azure DevOps Server have to offer?";e.InfoArea_Repo_Commit="\"Adding repository documentation\"";e.ProjectMruListProjectIconTitle="Project";e.TeamPanel_Close="Close";e.TestHubAutomateTestContent="Automate testing using build-deploy-test workflows and make sure your app still works after every check-in.";e.TeamAwarenessAssignTo="Assign to";e.AzureBenefitTitle="Enjoy free benefits";e.ChartOrderResults_ByValue="Value";e.CreateProjectDescriptionLabel="Description";e.LinkedArtifacts_TooManyLinks="You have too many links. Some links cannot be viewed.";e.InfoArea_FileDoesNotExist_NoEdit="\\\\t{0} does not exist.\\\\r\\\\n\\\\r\\\\n";e.TagFilterDropdownTooltip="Show more...";e.MembersWelcomeTitle="Invite your friends and create your team";e.TabStrip_Menu_InsertRight="Insert right";e.ChartOrderResults_ByLabel="Label";e.AccountLabel="Organization";e.AccountTrial="Organization trial";e.TabStrip_Menu_InsertBelow="Insert below";e.TabStrip_Menu_InsertAbove="Insert above";e.FilteredListWatermark="Filter items...";e.ProjectVisibilityNameTeamMembers="Specific People";e.TestHubManualTestContent="Create test plans to track manual testing for sprints or milestones. Run tests, log defects and quickly view the status using lightweight charts.";e.ProjectMruListCreateNewProjectText="New";e.TabNameTooLongMessage="Tab name must be less than 256 characters.";e.MoveToIteration_Current="Current ({0})";e.ProjectMruListCreateNewProjectTitle="Create a new project";e.CompleteSignInToVSTS="Authentication complete. You may close this window.";e.CodeSearchQuickStartTitle="Search for code across your projects";e.HelpMenuText="Help";e.NoAvailableBacklogs="This team does not have any backlogs configured. Please select another team.";e.MultipleContributionFound="Multiple default contributions found.";e.GetProcessTemplatesError="An error occurred attempting to load the process templates.  Try again or contact your system administrator.";e.CloseButtonText="Close";e.ExitFullScreenModeTooltip="Exit full screen mode (Z)";e.CreateProjectCollectionLabel="Collection";e.EmbedVideosText="Embed video";e.StakeholderMsdnEligibleRefreshButtonPageWaitText="We are verifying your subscription now. Thanks for your patience";e.DashboardNotFound="Could not find the requested dashboard.";e.NavigationContextMenuTeamLabelFormat="{0} / {1}";e.TabNameLabel="Tab name";e.ResetChartEditorColors="Reset colors";e.ChartDataNullValueLabel="(blank)";e.ProjectEmptyNameMessage="Project must be specified.";e.PivotChartAdvancedTooltip="Use this chart type to arrange and summarize complex data in a tabular form.";e.ClearTextTooltip="Clear text";e.LinkedArtifacts_DataProvider_NotRegistered="There is no renderer for \u0027{0}\u0027 links.";e.MembersManageDialogAddUser="Add user";e.VsLinksGetVsSubTitle="See Visual Studio downloads";e.OpenPlatformBackgroundImage="OpenPlatformAnnouncement.png";e.TagFilterShowAllButtonText="All";e.RemoveFromTeamFavoritesTooltipText="Remove from team favorites";e.MembersWelcomeOkButton="Show me how";e.BacklogEmptyNameMessage="Backlog level must be specified.";e.RemoveFromMyFavoritesTitle="Remove from my favorites";e.NoAvailableProjects="You don\u0027t have access to any team projects in this organization. Please select another organization.";e.FilteredListNoMatches="No items contain the filter text";e.ChartConfigurationLabel_AggregationOf="Aggregation of";e.MSTeamsVSTSConfig_DashboardLinkText="Learn more about Dashboards";e.ChartHostDeleteChartTitle="Delete";e.ElsVsoIntegrationSubtitle="Measure app\u0027s performance under load";e.ResourceUsageSeperator="of";e.SavingChartChanges="Saving...";e.InsertQueryResultsText="Insert Query Results";e.PivotTabNavigationAriaLabel="Tabs";e.FilterSearchPlaceholderText="Search";e.TabStrip_Menu_Remove="Remove";e.ProjectMruListRecentProjectsAndTeams="Recent projects \u0026 teams";e.AccountTrialLearnMore="Learn more";e.TabNamePlaceholder="Type the tab name";e.ChartHostEditChartTitle="Edit";e.ChartHostEditChartToolTip="Edit chart";e.KeyboardShortcutDescription_OpenBoard="Open board";e.CreateFirstProject="Create your first team project";e.ChartEditorAggregationTooltip="You can only use fields with numeric values.";e.Red="Red";e.TeamPanel_Member="Members";e.Green="Green";e.Black="Black";e.AutomateTestButtonText="Start automated testing";e.Clear="Clear";e.LastUpdatedDateFormat="Updated {0}";e.ChartOrderResults_Ascending="Ascending";e.ProjectMruListBrowseTitle="Browse teams and projects";e.RefreshSignInToVSTS="This page should automatically refresh when you sign in. If it doesn\u0027t, click the Reload tab button to refresh manually.";e.ProjectMruListTeamIconTitle="Team";e.JumpstartContentWelcome="Your new team project {0} is now in the cloud. Your project can store everything - your tasks, code, builds, test suites and more. You might be wondering what\u0027s next:";e.FilteredListAriaDescribeFavorites="List items can be favorited via right arrow and Enter.";e.VsLinksMainTitle="Visual Studio";e.ChartMessage_RenderFailed="TF401189: The chart failed to render";e.ProjectVisibilityDescriptionEveryone="Anyone can view. Certain features like TFVC are not supported.";e.PieChartAdvancedTooltip="Use this chart type when there are multiple series relating to a sum.";e.GalleryPromotionNewFeatureTitle="Supercharge your Team Services Project";e.LinkedArtifacts_BuildResolutionFailed="{0} link can not be read. The build may have been deleted.";e.AddToMyFavoritesTitle="Add to my favorites";e.CreatedDateFormat="Created {0}";e.GalleryPromotionNewFeatureLearnMoreLinkTitle="Explore Extensions";e.TeamFavorites="Team favorites";e.LinkedArtifacts_EditCommentDialogLabel="Comment:";e.NoMruRooms="Browse to the Rooms hub to view team rooms you have access to.";e.InfoArea_DefaultRepoMD="# Create a default repository\\\\r\\\\n\\\\r\\\\nTo display project documentation you will need a default repository. A default repository is a repository that is named the same as your project. You may create the default repository named {0} using the [source control administration page]({1}).\\\\r\\\\n\\\\r\\\\n";e.CodeSearchPromotionQuickStartOkButtonContent="Install Code Search";e.TabNameEmptyNameMessage="Tab name must be specified.";e.NavigationContextMenuProjectLabelTitleFormat="Project \u0027{0}\u0027";e.LinkedArtifacts_ColumnHeader_Link="Link";e.FilteredListSuggestions="Suggestions";e.CreateProjectNoTemplates="The new team project wizard did not find any process templates on the Azure DevOps Server.\r\n\r\nContact your Azure DevOps Server administrator and ask that a process template be uploaded to the server.";e.MSTeamsVSTSConfig_DashboardFilterHeader="Dashboard type";e.MembersManageDialogAdd="Add";e.AboutTFSTitle_OnPrem="About Azure DevOps Server";e.ChartConfigurationLabel_GroupBy="Group by*";e.LearnMoreLabel="Learn more";e.PushToDashboardTitle="Add to dashboard";e.LearnMore="Learn more";e.ProjectVisibilityNameEveryoneInOrganization="People in your enterprise";e.NoMruProjects="Browse to a project by selecting browse above.";e.TeamSettingLabel="Team Settings";e.TenPercentLighterColor="10% lighter {0}";e.AboutTFSTitle_Hosted="About Azure DevOps Server";e.AboutTFSGetVSSubtitle="View all the download options";e.AboutTFSLearnTitle="Learn";e.CreateProject="Create project";e.EllipsisMenuTitle="Configure";e.InlineEdit_Edit="Edit";e.InlineEdit_Save="Save";e.PieChartName="Pie";e.ProjectDoesNotExistMessage="Project does not exist.";e.RelatedArtifacts_RemoveLink="Remove link";e.DataServicesEmptyResponse="The data services connection was terminated by the server.\r\n\r\nThis can arise due to a processing error on the server or a timeout with a very large data sets.";e.ErrorLoadingRooms="Cannot load recent rooms. Refresh the page to try again.";e.StackedBarChartName="Stacked bar";e.ChartMessage_MissingChartSelection="Select an option from \u0027{0}\u0027.";e.ChartConfigurationLabel_Of="of";e.ChartConfigurationLabel_YAxis="Y-axis";e.MoveToIterationTooltip="Move to an iteration.";e.LoadTestButtonText="Start load testing";e.LearningBubbleButtonLabel="Got It";e.MyFavoritesText="My favorites";e.ProgressControl_SummaryProgressText="of {0}";e.MissingTeamSettingsError="Incomplete team settings.";e.ShowTeamProfile="Show Team Profile";e.AboutTFSFeaturesTitle="Features";e.XTPromotionQuickStartTitle="Test \u0026 Feedback - Capture, Create, Collaborate";e.ChartAggregateTooltip="{0}: {1}";e.ChartEditorGroupingTooltip="Choose a query column to group the data by in your chart.";e.RMOAnnouncementSubtitle="Release Management";e.BrowseAllTeams="Browse all";e.TeamFavoritesText="Team favorites";e.NewsViewAllLink="View all";e.TeamAwarenessAssignToTooltip="Assign to a team member.";e.Asterix="*";e.JumpstartTitle="Congratulations!";e.JumpstartContentCode="Regardless of your preference - centralized or decentralized, we give you the tools to let you manage your code and share it with your team.";e.FortyPercentLighterColor="40% lighter {0}";e.ElsVsoIntegrationBackgroundImage="CloudLoadTesting.png";e.MSTeamsVSTSConfig_AccountText="Connected to account: {0}";e.LinkedArtifacts_ColumnHeader_Id="Id";e.EightyPercentLighterColor="80% lighter {0}";e.InfoArea_FileDoesNotExist="\\\\t{0} does not exist. Edit and commit this file to create it.\\\\r\\\\n\\\\r\\\\n";e.StackedAreaChartName="Stacked area";e.MembersWelcomeContent="Your team project lets you collaborate with others, work on the same code, create work items, track status, and more.";e.DefaultChartName="{0} - Chart";e.ProjectMruListBrowseText="Browse";e.ContributionNotFound="Tab group contribution expected.";e.MembersAddButtonContent1="From here you can directly add, modify, and remove users from your team project.";e.MembersAddButtonContent2="Click on {0}";e.RelatedArtifacts_ShowMore="Show more";e.SourceControlSystemLabel="Version control";e.StateCategoryCompleted="Completed";e.InsertMermaidDiagramText="Insert Mermaid diagram";e.InfoCustomProcesses="Customizations that require specific user credentials will also not work because the operation is being performed using the server credentials. Please refer to \u003ca href=\"https://msdn.microsoft.com/Library/vs/alm/overview/create-team-project\" target=\u0027_blank\u0027\u003ecreating a team project\u003c/a\u003e for more details on this and additional restrictions.";e.ChartMessage_UnsupportedBrowser="TF401209: The chart requires capabilities which are unsupported on the current web browser";e.MSTeamsVSTSConfig_ProjectDashboardsHeader="All project dashboards";e.PivotTableName="Pivot table";e.TestHubContentTitle="Integrate testing into your development process";e.Turquoise="Turquoise";e.LinkedArtifacts_DataProvider_CouldNotBeResolved="Could not get details. Please refresh.";e.RMOAnnouncementBackgroundImage="ReleaseManagement.png";e.TestHubLoadTestContent="Understand and fix performance issues before they impact your business. Scale your tests to hundreds of thousands of concurrent users.";e.ProjectVisibilityDescriptionTeamMembers="Only people you give access to will be able to view the project.";e.FutureIterations="Future Iterations";e.AboutTFSAdminTitle="Administer";e.RemoveFromMyFavoritesTooltip="Remove from my favorites";e.ChartConfigurationLabel_Values="Aggregation";e.CreateProjectNameLabel="Project name";e.NavigationContextMenuHostedBackTo="Organization home";e.StateCategoryResolved="Resolved";e.StackedAreaChartAdvancedTooltip="Use this chart type to compare a relationship of parts to a whole over time and highlight the general trend across categories.";e.MoreActionsText="More actions";e.AddToMyFavoritesTooltipText="Add to my favorites";e.LastMentionedDateFormat="Mentioned {0}";e.TeamPanel_ItemsPivot="Items";e.MSTeamsVSTSConfig_KanbanLinkText="Learn more about Kanban boards";e.Loading="Loading...";e.ColumnChartName="Column";e.GenericFilterZeroData_Message="No {0} match your filter";e.FilterButtonClearFilters="Clear";e.FilteredListSelectedItem="Selected item {0}";e.ProjectCreationError="There was an error creating your project. Please {0}.";e.RelatedArtifacts_SummaryDelimiter="{0}, {1}";e.RemoveFromMyFavoritesTooltipText="Remove from my favorites";e.ChartEditorHistoryRangeTooltip="You must choose a time span for your chart.";e.BarChartAdvancedTooltop="Use this chart type to compare categories.";e.MembersFinishCancelButton="Ive got it from here";e.AllITemsFilterText="All Items";e.ProjectMruListRemoveFromList="Remove from list";e.CodeSearchPromotionQuickStartContent="Install Code Search extension to perform fast, flexible, and powerful searches across all your code.";e.TagFilterLabel="Tags";e.LinkedArtifacts_LoadingEnd="Linked items loaded";e.TabStrip_Menu_MoveRight="Move right";e.FilterApplyFiltersButtonText="Apply";e.InfoArea_Project_Commit="\"Adding project documentation\"";e.FilteredListAriaDescribeTabs="Multiple tabs exist with different lists of items.";e.MSTeamsVSTSConfig_ProjectPickerPlaceholder="Select a project";e.MSTeamsVSTSConfig_DashboardFilterPickerPlaceholder="Select a dashboard type";e.AjaxRequestTimedOut="Ajax request has been timed out.";e.ElsVsoIntegrationTileSubTitle="Free credits to test it now";e.Chart1DValueTooltip="{0}: {1}";e.TeamRoomUserCount="{0} users in room";e.ChartHostDeleteChartToolTip="Delete chart";e.ChartMessage_DescribeServerError="The server failed to process the chart transform request, with an error of: {0}";e.ToggleFilterPanelHide="Hide Filter Panel";e.ToggleFilterPanelShow="Show Filter Panel";e.StateCategoryInProgress="In Progress";e.NetworkConnectionUnavailable="TF400893: Unable to contact the server. This is most likely caused by a network error. Please check your connection and try again.";e.AboutTFSCloseIconTitle_OnPrem="Hide this module.  Select \u0026#34;Display About Azure DevOps Server\u0026#34; from the help menu to make it visible again.";e.LinkedArtifacts_ColumnHeader_Comment="Comment";e.AboutTFSCloseIconTitle_Hosted="Hide this module.  Select \u0026#34;Display About Azure DevOps Server\u0026#34; from the help menu to make it visible again.";e.RMOAnnouncementTitle="Release Management Service Preview";e.AboutTFSGetVSTitle="Get Visual Studio";e.TeamServicesHeaderText="Team Services";e.Ellipsis="...";e.VideosText="Videos";e.ChartMeasure_Count="Count";e.VideoError="Unable to play video";e.MSTeamsVSTSConfig_DashboardDescription="Dashboards provide easy-to-read, easy access, real-time information.";e.StateCategoryProposed="Proposed";e.PinToHomepageTooltipText="Pin to homepage";e.AnnouncementFontColor="White";e.AzureBenefitTileBackgroundImage="vs-portfolio-of-benefits.png";e.JumpstartContentAgile="Get organized fast with the kanban board. Managing your work is as simple as dragging cards across the board.";e.SourceControlSystemNameGit="Git";e.LoadQueryResults="Load query results";e.LinkedArtifacts_Loading="Loading...";e.RequiresVS2012="Requires Visual Studio 2013+";e.ChartingTimeout="Chart query timed out";e.MSTeamsVSTSConfig_AddKanbanRadioButton="Add a Kanban board";e.ChartMessage_NoDataToDisplay_Body="there were 0 results";e.Edit_Undo="Undo";e.DefaultContributionExpected="No default contribution found.";e.SignInToVSTS="Sign in to Azure DevOps";e.ChartConfigurationLabel_StackBy="Stack by";e.TeamEmptyNameMessage="Team must be specified.";e.ChartConfigurationLabel_SortOrder="Sort order";e.DashboardDoesNotExistMessage="Dashboard does not exist.";e.RemoveFromTeamFavoritesContextMenuItem="Remove from Team Favorites";e.ChartEditorOrderTooltip="The results can be sorted by the series label or the value.";e.ChartService_ColumnsUnavailable="TF401188: Data for Chart Column editing could not be retrieved";e.TagFilterShowAllButtonTooltip="Remove all tag filters";e.MembersWelcomeCancelButton="Not now";e.JumpstartViewCode="View code";e.Blue="Blue";e.Teal="Teal";e.Pink="Pink";e.AddButtonText="Add...";e.StackedBarChartAdvancedTooltip="Use this chart type to compare parts of a whole across categories.";e.TabStrip_Menu_MoveLeft="Move left";e.TabStrip_Menu_MoveDown="Move down";e.RemoveFromTeamFavoritesTitle="Remove from team favorites";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/TFS.Legacy.Ajax",["require","exports","VSS/Context","VSS/VSS","VSS/Service","VSS/Diag/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Diag","VSS/Performance","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation"],function(n,t,i,r,u,f,e,o,s,h,c){function rt(n,i,e,o,h){var c,v,p,a,y,w,k;if(s.logTracePoint("Ajax.response-received",h.requestId),u.getLocalService(f.ActivityStatsCollector).actionCompleted(tt[h.requestId],e),delete tt[ht],h.onComplete)for(y=0,w=h.onComplete;y<w.length;y++)k=w[y],k(e);if(h.isComplete=!0,delete b[h.requestId],h.options!==null&&h.options!==undefined&&h.options.wait!==null&&h.options.wait!==undefined&&t.endWait(h),i!=="timeout"&&e&&e.status===203&&(c=e.getResponseHeader("X-Tfs-Location"),c)){if(v=c.indexOf("reply_to="),v!==-1){for(p=c.indexOf("&",v),a=c.substring(0,v),p!==-1&&(a+=c.substring(p));a.charAt(a.length-1)==="&";)a=a.substring(0,a.length-1);c=a+"&reply_to="+encodeURIComponent(window.location.href)}window.location.href=c;return}if(o)try{o(n,i,e)}catch(d){s.logTracePoint("Ajax.callback-exception",d);l(d)}s.logTracePoint("Ajax.callback-complete",h.requestId);h.progressActionId&&r.globalProgressIndicator.actionCompleted(h.progressActionId);h.options&&h.options.tracePoint&&s.logTracePoint(h.options.tracePoint)}function a(n,t){return function(i,r,u){rt(i,r,u,t,n)}}function y(n,i,r){return function(u,f,o){rt(null,f,u,function(){var n;if(f==="timeout")l(pt(u,r),i);else if(u.status===0)t.unloadRequested||t.unloading||e.delay(this,2e3,function(){t.unloadRequested||t.unloading||l(lt(u,r),i)});else if(u.status>=12e3&&u.status<13e3)t.unloadRequested||t.unloading||l(lt(u,r),i);else{if(t.unloading&&f==="abort")return;try{n=e.parseMSJSON(u.responseText,!1)}catch(s){}n?l(new it(n.message,n.type),i):l(yt(u,o||u.statusText||u.status,r),i)}},n)}}function v(n,i,e){var o,c,l,a,v;return o={isComplete:!1,requestId:ht++,options:e},e&&e.wait&&t.startWait(o),l=h.getScenarioManager().addAjaxCallStart(),a=function(t){var i=t&&t.getResponseHeader&&t.getResponseHeader("ActivityId")||"",r=t&&t.getResponseHeader&&t.getResponseHeader("Content-Length")||0;l(n,o&&o.options&&o.options.type||"",i,t&&t.status||-1,Number(r));document.dispatchEvent(new CustomEvent("performance.legacyAjaxCall"))},o.onComplete=[a],c=n+" ("+o.requestId+")",s.logTracePoint("Ajax.request-started",c),v=u.getLocalService(f.ActivityStatsCollector).actionStarted(n),tt[o.requestId]=v,e&&e.showGlobalProgressIndicator===!1||(o.progressActionId=r.globalProgressIndicator.actionStarted(c)),b[o.requestId]=o,o}function p(n,t,i){n.options=$.extend(!0,{},i,n.options);n.xhr=$.ajax(t,n.options)}function at(n){var t=n.options.wait;t.entireWindow||(t.element.css("margin-top",-parseInt(t.target.css("padding-top"),10)),t.element.css("margin-left",-parseInt(t.target.css("padding-left"),10)),t.element.height(t.target.outerHeight()-2),t.element.width(t.target.outerWidth()-2));t.msgElement&&(t.msgElement.css("top",t.element.position().top+(t.element.height()-t.msgElement.height())/2+parseInt(t.element.css("margin-top"),10)),t.msgElement.css("left",t.element.position().left+(t.element.width()-t.msgElement.width())/2+parseInt(t.element.css("margin-left"),10)))}function ut(n){var t;return typeof n=="string"&&(n=n.replace(/\u2028/g,"\\u2028")),t=e.parseMSJSON(n,!1),t.hasOwnProperty("__wrappedArray")&&(t=t.__wrappedArray),t}function wt(){t.unloadRequested=!0;e.delay(this,2e3,function(){t.unloadRequested=!1})}function w(n){var t,u,r;return(n&&(t=n.sessionId,u=n.command),t||(r=i.getPageContext(),r&&r.diagnostics&&r.diagnostics.sessionId&&(t=r.diagnostics.sessionId)),t)?u?{"X-TFS-Session":t+","+u}:{"X-TFS-Session":t}:{}}function bt(n,t,i,r,u){var f=v(n,t,u),e={type:"GET",data:t,success:a(f,i),error:y(f,r,n),dataType:"json",traditional:!0,timeout:g,headers:w(u)};return ct.allowArrayResult||(e.converters={"text json":ut}),p(f,n,e),f}function ft(n){var t,r,i;if(Array.isArray(n))for(t=0;t<n.length;++t)r=n[t],n[t]==null?n[t]="":typeof r=="object"&&ft(r);else if(typeof n=="object")for(i in n)n[i]==null?n[i]="":typeof n[i]=="object"&&ft(n[i])}function vt(n,t,i,r,u,f){var s,o,c,h,l;if(f||(ft(t),t=e.stringifyMSJSON(t),u=u||{},u.contentType="application/json"),s=v(n,t,u),u&&u.timeout&&(g=u.timeout),o={type:"POST",data:t,success:a(s,i),error:y(s,r,n),dataType:"json",traditional:!0,timeout:g,headers:w(u)},ct.allowArrayResult||(o.converters={"text json":ut}),f)for(o.contentType=!1,o.processData=!1,o.data=new FormData,c=Object.keys(t),h=0;h<c.length;h++)l=c[h],o.data.append(l,t[l]);try{p(s,n,o)}catch(b){r(b)}return s}function kt(n,t,i,r,u){return vt(n,t,i,r,u,!0)}function dt(n,t,i,r,u){var e,f;return t=$.extend(t,{__RequestVerificationToken:st()}),e=d(),e&&(t=$.extend(t,{__RequestVerificationToken2:e})),f=v(n,t,u),p(f,n,{type:"POST",data:t,success:a(f,i),error:y(f,r,n),dataType:"html",traditional:!0,cache:!1,headers:w(u)}),f}function gt(n,t,i,r,u){var f=v(n,t,u);return p(f,n,{type:"GET",data:t,success:a(f,i),error:y(f,r,n),dataType:"html",traditional:!0,cache:!1,headers:w(u)}),f}function ni(n){var t=v(n&&n.url,n&&n.data,n);return p(t,n&&n.url,{type:"GET",dataType:"jsonp",traditional:!0,success:a(t,n&&n.callback),headers:w(n)}),t}function st(){return et||(et=$("input[name=__RequestVerificationToken]").val()),et}function d(){return ot||(ot=$("input[name=__RequestVerificationToken2]").val()),ot}function ti(){var n,t;return n=$("<input />").attr("type","hidden").attr("name","__RequestVerificationToken").val(st()),t=d(),t&&n.after($("<input />").attr("type","hidden").attr("name","__RequestVerificationToken2").val(d())),n}function ii(n){var t=$(n);if(t.find("input[name=__RequestVerificationToken]").length===0)return t.append(ti())}var it,et,ot;Object.defineProperty(t,"__esModule",{value:!0});t.setAntiForgeryToken=t.getAntiForgeryTokenValue2=t.getAntiForgeryTokenValue=t.getJSONp=t.getHTML=t.postHTML=t.multipartPostMSJSON=t.postMSJSON=t.getMSJSON=t.msJSONFilter=t.beginRequest=t.wrapErrorCallback=t.wrapSuccessCallback=t.endRequest=t.XhrError=t.Exceptions=t.endWait=t.startWait=t.unloadRequested=t.unloading=void 0;t.unloading=!1;t.unloadRequested=!1;var ht=1,g=3e5,l=r.handleError,b,nt,ct={allowArrayResult:!1,byPassAntiForgery:!1},tt={},k;(function(n){n.AjaxException="TFS.Core.Ajax.AjaxException";n.AjaxTimeoutException="TFS.Core.Ajax.AjaxTimeoutException";n.NetworkException="TFS.Core.Ajax.NetworkException"})(k=t.Exceptions||(t.Exceptions={}));b={};it=function(){function n(n,t){this.message=n;this.type=t}return n}();t.XhrError=it;var yt=function(n,t,i){var r=new Error(o.format(c.AjaxRequestFailedWithStatus,t));return r.name=k.AjaxException,r.response=n.responseText,r.xhr=n,r.source=i,r},pt=function(n,t){var i=new Error(c.AjaxRequestTimedOut);return i.name=k.AjaxTimeoutException,i.status=n.status,i.xhr=n,i.source=t,i},lt=function(n,t){var i=new Error(c.NetworkConnectionUnavailable);return i.name=k.NetworkException,i.status=n.status,i.xhr=n,i.source=t,i};t.endRequest=rt;t.wrapSuccessCallback=a;t.wrapErrorCallback=y;t.beginRequest=v;t.startWait=function(n){n.options.wait.end=function(){var t=n.options.wait;t.element&&n.isComplete&&!t.timeout&&(t.fade!==!1?(t.element.css("cursor","auto"),t.element.fadeOut("fast",function(){t.element.remove();t.element=null}),t.msgElement&&(t.msgElement.css("cursor","auto"),t.msgElement.fadeOut("fast",function(){t.msgElement.remove();t.msgElement=null}))):(t.element.css("cursor","auto"),t.element.remove(),t.element=null,t.msgElement&&(t.msgElement.css("cursor","auto"),t.msgElement.remove(),t.msgElement=null)),$(window).unbind("resize."+n.requestId))};var t=n.options.wait;t.showDelay||(t.showDelay=250);t.target||(t.entireWindow=!0,t.target=$("body"));t.target.children(".wait-element").hide();t.target.children(".wait-box").hide();t.showDelay!==0?n.showTimer=e.delay(this,t.showDelay,function(){delete n.showTimer;nt(n)}):nt(n)};t.endWait=function(n){n.options.wait.end();n.showTimer&&(n.showTimer.cancel(),delete n.showTimer)};nt=function(n){var i="",r="",t=n.options.wait;t.image&&(i+='<img class="wait-image" src="'+t.image+'" />');t.message&&(i+='<div class="wait-message">'+t.message+"<\/div>");i.length>0&&(t.target.prepend('<div class="wait-box">'+i+"<\/div>"),t.msgElement=t.target.children(".wait-box").first());t.backgroundcolor&&(r+="background-color: "+t.backgroundcolor+";");t.target.prepend('<div class="wait-element" style="'+r+'"><\/div>');t.element=t.target.children(".wait-element").first();at(n);$(window).bind("resize."+n.requestId,function(){at(n)});t.minLifetime||(t.minLifetime=100);t.timeout=e.delay(this,t.minLifetime,function(){delete t.timeout;t.end()})};t.msJSONFilter=ut;$(window).bind("beforeunload",wt);$(window).bind("unload",function(){t.unloading=!0;$.each(b,function(n,t){if(t.xhr)try{t.xhr.abort()}catch(i){}})});t.getMSJSON=bt;t.postMSJSON=vt;t.multipartPostMSJSON=kt;t.postHTML=dt;t.getHTML=gt;t.getJSONp=ni;t.getAntiForgeryTokenValue=st;t.getAntiForgeryTokenValue2=d;t.setAntiForgeryToken=ii});

define("Presentation/Scripts/TFS/TFS.WebSettingsService",["require","exports","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Diag"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.WebSettingsService=t.WebSettingsScope=void 0,function(n){n[n.User=1]="User";n[n.UserAndTeam=3]="UserAndTeam";n[n.Project=4]="Project";n[n.ProjectAndUser=5]="ProjectAndUser";n[n.Collection=6]="Collection";n[n.Root=7]="Root"}(f=t.WebSettingsScope||(t.WebSettingsScope={}));e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.canAccessTeamSettings=function(){var n=this.getTfsContext();return Boolean(n.currentTeam)},t.prototype.beginWriteSetting=function(n,t,i,u,e,o){var s;return typeof t=="boolean"?s="setBoolean":typeof t=="number"?(t=Math.floor(t),s="setInteger"):(s="setString",typeof t=="undefined"?t=null:t!==null&&typeof t!="string"&&(t=$.param(t))),typeof i=="undefined"&&(i=f.User),r.postMSJSON(this._getApiLocation(s,this._getContext(i)),{path:n,value:t,scope:i},u,e,o)},t.prototype.beginReadSetting=function(n,t,i,u,e){return typeof t=="undefined"&&(t=f.User),r.getMSJSON(this._getApiLocation("readSetting",this._getContext(t)),{path:n,scope:t},i,u,e)},t.prototype.writeLocalSetting=function(n,t,i,r){var f=this._getScopedKey(n,i);if(f)try{window.localStorage.setItem(f,t)}catch(e){if(r)throw e;else u.logWarning("Local storage write failed."),u.logWarning(e)}},t.prototype.readLocalSetting=function(n,t,i){var r=this._getScopedKey(n,t);if(r)try{return window.localStorage.getItem(r)}catch(f){if(i)throw f;else u.logWarning("Local storage read failed."),u.logWarning(f)}return null},t.prototype.removeLocalSetting=function(n,t,i){var r=this._getScopedKey(n,t);if(r)try{window.localStorage.removeItem(r)}catch(f){if(i)throw f;else u.logWarning("Local storage removal failed."),u.logWarning(f)}return null},t.prototype._getScopedKey=function(n,t){var i=this.getTfsContext(),r=i.currentIdentity?i.currentIdentity.id:null,s=i.currentTeam?i.currentTeam.identity.id:null,o,e;switch(t){case f.User:return r+n;case f.UserAndTeam:return r+"/"+s+n;case f.Project:return e=i.navigation?i.navigation.projectId:null,o=i.navigation?i.navigation.collection.instanceId:null,o+"/"+e+n;case f.ProjectAndUser:return e=i.navigation?i.navigation.projectId:null,e+"/"+r+n;default:return null}},t.prototype._getApiLocation=function(n,t){return this.getTfsContext().getActionUrl(n,"webSettings",{area:"api",team:t.team,project:t.project,serviceHost:this.getCurrentServiceHost()})},t.prototype._getContext=function(n){return n===f.User||n===f.Collection||n===f.Root?{team:"",project:""}:n===f.Project?{team:"",project:this.getTfsContext().contextData.project.id}:{team:this.getTfsContext().currentTeam.identity.id}},t}(i.TfsService);t.WebSettingsService=e});

define("VSS/Artifacts/Constants",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.ToolNames=t.ArtifactTypeNames=void 0,function(n){n.TcmResult="TcmResult";n.TcmResultAttachment="TcmResultAttachment";n.TcmTest="TcmTest";n.Build="Build";n.VersionedItem="VersionedItem";n.LatestItemVersion="LatestItemVersion";n.Changeset="Changeset";n.Shelveset="Shelveset";n.WorkItem="WorkItem";n.Storyboard="Storyboard";n.Commit="Commit";n.CodeReviewId="CodeReviewId";n.CodeReviewSdkId="ReviewId";n.PullRequestId="PullRequestId";n.ProjectDownloadProject="Project";n.Ref="Ref";n.WikiPage="WikiPage";n.PullRequest="PullRequest";n.Issue="Issue"}(i=t.ArtifactTypeNames||(t.ArtifactTypeNames={})),function(n){n.VersionControl="VersionControl";n.WorkItemTracking="WorkItemTracking";n.RemoteWorkItemTracking="RemoteWorkItemTracking";n.TeamBuild="Build";n.TestManagement="TestManagement";n.Requirements="Requirements";n.Hyperlink="Hyperlink";n.Legacy="Legacy";n.CodeSense="CodeSense";n.Git="Git";n.CodeReview="CodeReview";n.ProjectDownload="ProjectDownload";n.Wiki="Wiki";n.GitHub="GitHub"}(r=t.ToolNames||(t.ToolNames={}))});

define("VSS/Artifacts/Services",["require","exports","VSS/Context","VSS/Diag","VSS/Events/Action","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Utils/Url","VSS/Utils/String","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h){function v(n){return n.toLowerCase()}function p(n){for(var i={},u,r,t=0,f=n.length;t<f;t++)u=l.decodeUri(n[t]),r=v(u.tool),i[r]||(i[r]=[]),i[r].push(u);return i}var c,l,y,a;Object.defineProperty(t,"__esModule",{value:!0});t.ClientLinking=t.LinkingUtilities=t.Artifact=void 0;c=function(){function n(n){this._data=n;this._data.uri||(this._data.uri=l.encodeUri({tool:this.getTool(),type:this.getType(),id:this.getId()}))}return n._execute=function(n,t){var i=n.getUrl(t);i?u.getService().performAction(u.CommonActions.ACTION_WINDOW_OPEN,{url:i,target:"_blank"}):alert(s.format(f.UnknownArtifactType,n.getType()))},n.prototype.getUri=function(){return this._data.uri},n.prototype.getTool=function(){return this._data.tool},n.prototype.getType=function(){return this._data.type},n.prototype.getId=function(){return this._data.id},n.prototype.getTitle=function(){return this.getUri()},n.prototype.setError=function(n){this._error=n},n.prototype.getError=function(){return this._error},n.prototype.execute=function(t){return u.getService().performAction(n.ACTION_ARTIFACT_EXECUTE,{artifact:this,webContext:t})},n.prototype.getUrl=function(){return null},n.ACTION_ARTIFACT_EXECUTE="artifact-execute",n}();t.Artifact=c;u.getService().registerActionWorker(c.ACTION_ARTIFACT_EXECUTE,function(n){return c._execute(n.artifact,n.webContext)});l=function(){function n(){}return n.encodeUri=function(t){return n.VSTFS+[encodeURIComponent(t.tool),encodeURIComponent(t.type),encodeURIComponent(t.id)].join(n.URI_SEPARATOR)},n.decodeUri=function(t){var u,i;if(t.length>n.VSTFS.length&&(u=t.substr(0,n.VSTFS.length).toLowerCase(),u===n.VSTFS&&(i=t.substr(n.VSTFS.length).split(n.URI_SEPARATOR),i.length>=3))){var e=i[0],o=i[1],h=i.slice(2).join("/");return{uri:t,tool:n.legacyDecodeURIComponent(e),type:n.legacyDecodeURIComponent(o),id:n.legacyDecodeURIComponent(h)}}throw new Error(s.format(f.InvalidArtifactUri,t));},n.legacyDecodeURIComponent=function(n){var t;return t=n.replace(/\+/g," "),decodeURIComponent(t)},n.VSTFS="vstfs:///",n.URI_SEPARATOR="/",n}();t.LinkingUtilities=l;y={};a=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.registerArtifactResolver=function(n,t){y[v(n)]=t},t.getArtifactResolver=function(n){return y[v(n)]},t.prototype.beginResolveArtifacts=function(n,i,r){function l(n,t){for(var f=[],r,i=0,u=n.length;i<u;i++)r=new c(n[i]),t&&r.setError(t),f.push(r);return f}function e(){u.resolving===0&&(r(u.results),u.resolving-=1)}function f(n,t){u.resolving-=1;u.results=u.results.concat(n.success?n.artifacts:l(t,n.error));e()}function a(n,i){var r=t.getArtifactResolver(n);return r?(r(i,h,function(n){f(n,i)},function(n){f({success:!1,error:n},i)}),!0):!1}var s=this.getWebContext(),h=$.extend({webContext:s},i),u={results:[],resolving:0},o=p(n);$.each(o,function(){u.resolving+=1});$.each(o,function(n,t){a(n,t)||f({success:!1,error:new Error("NoResolver")},t)});e()},t.MODE_TRANSLATEURL="translateURL",t}(e.VssService);t.ClientLinking=a;o.getTranslatorService().registerUrlTranslator(function(n,t,r,u,f){var o;n&&s.startsWith(n,l.VSTFS,s.ignoreCaseComparer)?(o=t&&t.webContext||i.getDefaultWebContext(),e.getCollectionService(a,o).beginResolveArtifacts([n],{mode:a.MODE_TRANSLATEURL},function(n){n&&n.length===1&&!n[0].getError()?r(n[0].getUrl(o)):f()},u)):f()});h.tfsModuleLoaded("VSS.OM.Artifacts",t)});

define("Build.Common/Scripts/Registration.Artifacts",["require","exports","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/VSS"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});r.ClientLinking.registerArtifactResolver(i.ToolNames.TeamBuild,function(n,t,i,r){u.using(["Build.Common/Scripts/BuildArtifacts"],function(u){u.BuildArtifactResolver.beginResolve(n,t,i,r)})});u.tfsModuleLoaded("Registration.Artifacts",t)});

define("Requirements/Scripts/TFS.Requirements.Setup",["require","exports","VSS/VSS","VSS/Artifacts/Constants","VSS/Artifacts/Services"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});u.ClientLinking.registerArtifactResolver(r.ToolNames.Requirements,function(n,t,r,u){i.using(["Requirements/Scripts/TFS.Requirements.Utils"],function(i){i.RequirementsArtifactHandler.beginResolve(n,t,r,u)})});i.tfsModuleLoaded("TFS.Requirements.Setup",t)});

define("TestManagement/Scripts/TFS.TestManagement.Setup",["require","exports","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/VSS"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});r.ClientLinking.registerArtifactResolver(i.ToolNames.TestManagement,function(n,t,i,r){u.using(["TestManagement/Scripts/TFS.TestManagement.TestManagementHandler"],function(u){u.TestManagementArtifactHandler.beginResolve(n,t,i,r)})});u.tfsModuleLoaded("TFS.TestManagement.Setup",t)});

define("Presentation/Scripts/TFS/TFS.ArtifactPlugins",["require","exports","q","VSS/Diag"],function(n,t,i,r){function e(n,t){n=n.toLowerCase();u[n]=t}function s(){return u}function h(n,t){var i;n=n.toLowerCase();i=u[n];i?i(t):t(null)}function c(n){var t=i.defer();return h(n,function(i){i?t.resolve(i):t.reject("Could not create plug-in of type "+n)}),t.promise}function l(n){return f(n.tool,n.type)}function f(n,t){return(n+"/"+t).toLowerCase()}function a(n){return f(n.tool,n.type)}var o,u;Object.defineProperty(t,"__esModule",{value:!0});t.combineArtifactType=t.combineToolAndType=t.combineArtifactToolAndType=t.beginGetArtifactPlugin=t.getGlobalArtifactPlugins=t.registerArtifactPluginAsync=t.ArtifactIconType=void 0,function(n){n[n.icon=0]="icon";n[n.colorBar=1]="colorBar";n[n.colorCircle=2]="colorCircle"}(o=t.ArtifactIconType||(t.ArtifactIconType={}));u={};t.registerArtifactPluginAsync=e;t.getGlobalArtifactPlugins=s;t.beginGetArtifactPlugin=c;t.combineArtifactToolAndType=l;t.combineToolAndType=f;t.combineArtifactType=a});

define("VersionControl/Scripts/TFS.VersionControl.Registration.Artifacts",["require","exports","VSS/VSS","VSS/Artifacts/Constants","VSS/Artifacts/Services","Presentation/Scripts/TFS/TFS.ArtifactPlugins"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});u.ClientLinking.registerArtifactResolver(r.ToolNames.VersionControl,function(n,t,r,u){i.using(["VersionControl/Scripts/TFS.VersionControl"],function(i){i.VersionControlArtifactHandler.beginResolve(n,t,r,u)})});u.ClientLinking.registerArtifactResolver(r.ToolNames.Git,function(n,t,r,u){i.using(["VersionControl/Scripts/TFS.VersionControl"],function(i){i.GitArtifactHandler.beginResolve(n,t,r,u)})});f.registerArtifactPluginAsync("git",function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.RelatedArtifacts"],function(t){n(t.VCArtifactPlugin)})});i.tfsModuleLoaded("TFS.VersionControl.Registration.Artifacts",t)});

define("Presentation/Scripts/TFS/TFS.OM.Common",["require","exports","VSS/VSS","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VSS/Utils/UI","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.WebSettingsService","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Diag","VSS/Service","VSS/Events/Action","VSS/Context","VSS/Common/Contracts/Platform"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function k(n){var t=new Error(u.format("Favorite item '{0}' already exist.",n));return t.name=b.FavoriteItemAlreadyExist,t}function it(n,t,i){var r;return r={area:"api"},t=t||n.navigation.topMostLevel,r.team=i,t>=o.NavigationContextLevels.Application&&(t<o.NavigationContextLevels.Team&&(r.ignoreDefaultTeam=!0,r.team=""),t<o.NavigationContextLevels.Project&&(r.project=""),t<o.NavigationContextLevels.Collection&&(r.serviceHost="")),r}var b,d,g,nt,p,w,tt,rt,et,ut,ft;Object.defineProperty(t,"__esModule",{value:!0});t.AlmUriManager=t.AlmUriBuilder=t.ContextUtils=t.FavoriteStore=t.FavoriteFolder=t.FavoriteItem=t.ProjectCollection=t.Deployment=t.Application=void 0,function(n){n.FavoriteItemAlreadyExist="VSS.Service.FavoriteItemAlreadyExist"}(b||(b={}));d=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:v.getDefaultWebContext();return l.VssConnection.getConnection(t,y.ContextHostType.Application)},n.getDefaultConnection=function(){return l.VssConnection.getConnection(v.getDefaultWebContext(),y.ContextHostType.Application)},n}();t.Application=d;g=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:v.getDefaultWebContext();return l.VssConnection.getConnection(t,y.ContextHostType.Deployment)},n.getDefaultConnection=function(){return l.VssConnection.getConnection(v.getDefaultWebContext(),y.ContextHostType.Deployment)},n}();t.Deployment=g;nt=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:v.getDefaultWebContext();return l.VssConnection.getConnection(t,y.ContextHostType.ProjectCollection)},n.getDefaultConnection=function(){return l.VssConnection.getConnection(v.getDefaultWebContext(),y.ContextHostType.ProjectCollection)},n}();t.ProjectCollection=nt;p=function(){function n(n,t){this.favStore=n;t&&(this.id=t.id,this.name=t.name,this.parentId=t.parentId,this.type=t.type,this.data=t.data,this.artifactIsDeleted=t.artifactIsDeleted)}return n.prototype.path=function(n){return e.calculateTreePath.call(this,n,"/","name","root")},n.prototype.beginRename=function(n,t,r){var u=this,f;this.parent&&this.parent.findChildItem(n,this.type,this.data)?i.handleError(k(n),r,this):(f=$.extend({},this),f.name=n,this.favStore.beginUpdateItems([f],function(){u.name=n;$(window).trigger("favorite-item-renamed",u);$.isFunction(t)&&t.call(u,u)},r))},n.prototype.beginDelete=function(n,t,i){this.favStore.beginDeleteItems([this],n,t,i)},n.prototype.onDelete=function(n,t){!t&&this.parent&&this.parent.remove(this);delete this.favStore.all[this.id];n&&$(window).trigger("favorite-item-removed",this)},n.FAVITEM_TYPE_WIT_QUERYITEM="Microsoft.TeamFoundation.WorkItemTracking.QueryItem",n.FAVITEM_TYPE_WIT_QUERYCHART="Microsoft.TeamFoundation.WorkItemTracking.QueryChart",n.FAVITEM_TYPE_VC_PATH="Microsoft.TeamFoundation.VersionControl.Path",n.FAVITEM_TYPE_GIT_REPOSITORY="Microsoft.TeamFoundation.Git.Repository",n.FAVITEM_TYPE_GIT_REPOSITORY_FORK="Microsoft.TeamFoundation.Git.Repository.Fork",n.FAVITEM_TYPE_TFVC_REPOSITORY="Microsoft.TeamFoundation.Tfvc.Repository",n.FAVITEM_TYPE_BUILD_DEFINITION="Microsoft.TeamFoundation.Build.Definition",n.FAVITEM_TYPE_TESTMANAGEMENT_CHART="Microsoft.Teamfoundation.TestManagement.Charts",n.FAVITEM_TYPE_PROJECT="Microsoft.TeamFoundation.Classification.TeamProject",n.FAVITEM_TYPE_TEAM="Microsoft.TeamFoundation.Teams.Team",n.FAVITEM_TYPE_TEST_PLAN="Microsoft.TeamFoundation.TestManagement.Plan",n}();t.FavoriteItem=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.children=[],r}return __extends(t,n),t.prototype.add=function(n,t){this.children.push(n);n.parent=this;t!==!0&&this.children.sort(function(n,t){return u.localeIgnoreCaseComparer(n.name,t.name)})},t.prototype.remove=function(n){f.remove(this.children,n)},t.prototype.clear=function(){this.children=[]},t.prototype.findByPath=function(n){return e.findTreeNode.call(this,n,"/",u.localeIgnoreCaseComparer,"name")},t.prototype.findByData=function(n){for(var i,t=0,r=this.children.length;t<r;t++)if(i=this.children[t],i.data===n)return i;return null},t.prototype.beginCreateNewFolder=function(n,t,i){this.beginCreateNewItem(n,null,null,t,i)},t.prototype.beginCreateNewItem=function(n,r,u,f,e,o){var s,h=this,c;(o===null||o===undefined)&&(o=!0);this.findChildItem(n,r,u)?i.handleError(k(n),e,this):(c={id:undefined,parentId:this.id,name:n,type:r,data:u},s=r?new p(this.favStore,c):new t(this.favStore,c),this.favStore.beginUpdateItems([s],function(){h.add(s);h.favStore.all[s.id]=s;o&&$(window).trigger("favorite-item-created",s);$.isFunction(f)&&f.call(h,s)},e))},t.prototype.onDelete=function(t,i){$.each(this.children,function(n,t){t.onDelete(!1,!0)});n.prototype.onDelete.call(this,t,i)},t.prototype.findChildItem=function(n,t,i){for(var r,f=0,e=this.children.length;f<e;f++)if(r=this.children[f],u.localeIgnoreCaseComparer(n,r.name)===0&&r.type===t&&r.data===i)return r;return null},t}(p);t.FavoriteFolder=w;tt={};rt=function(n){function t(t,i,r,u,f,e){var o=n.call(this,null,{id:f,name:e})||this;return o.root=!0,o.favStore=o,o._tfsContext=t,o._routeData=i,o._identity=r,o._scope=u,o.all={},o}return __extends(t,n),t.computeStoreKey=function(n,t,i,r){return n.getActionUrl("list","favorites",$.extend({},r,{identityId:t,scope:i}))},t.createFavoriteStore=function(n,i,r,u,f){var e,o;return r===null&&(r=undefined),e=it(n,i,r),o=t.computeStoreKey(n,r,u,e),new t(n,e,r,u,o,f)},t.beginGetFavoriteStore=function(n,r,u,f,e,o,s,h){var c,l;o?(c=t.createFavoriteStore(n,r,u,f,e),c.beginRefresh(function(){s(c)},h)):(l=t.computeStoreKey(n,u,f,it(n,r,u)),i.queueRequest(this,tt,l,s,h,function(i,o){var s=t.createFavoriteStore(n,r,u,f,e);s.beginRefresh(function(){i(s)},o)}))},t.getFavoriteStore=function(n,i,r,u,f){return t.createFavoriteStore(n,i,r,u,f)},t.prototype.beginRefresh=function(n,t){var i,r=this;i=this._tfsContext.getActionUrl("list","favorites",this._routeData);h.getMSJSON(i,{identityId:this._identity,scope:this._scope},function(t){r._populateItems(t);$.isFunction(n)&&n.call(r)},t)},t.prototype.beginDeleteItems=function(n,t,i,r){var e=this,u,f;(r===null||r===undefined)&&(r=!0);n&&n.length&&(f=this._tfsContext.getActionUrl("delete","favorites",this._routeData),u=$.map(n,function(n){return n.id}),h.postMSJSON(f,{identityId:this._identity,scope:this._scope,favItemIds:u},function(){$.each(n,function(n,t){t.onDelete(r)});$.isFunction(t)&&t.call(e,n)},i))},t.prototype.beginUpdateItems=function(n,t,i){var u=this,f,e;n&&n.length&&(e=this._tfsContext.getActionUrl("update","favorites",this._routeData),f=$.map(n,function(n){return r.stringifyMSJSON({id:n.id,parentId:n.parentId===u.id?undefined:n.parentId,name:n.name,type:n.type,data:n.data,artifactIsDeleted:n.artifactIsDeleted})}),h.postMSJSON(e,{identityId:this._identity,scope:this._scope,favItemJsons:f},function(i){$.each(i,function(t,i){n[i.index].id=i.id});$.isFunction(t)&&t.call(u,n)},i))},t.prototype._populateItems=function(n){var t={},r,i,f,e=this;this.clear();n&&(n.sort(function(n,t){return u.localeIgnoreCaseComparer(n.name,t.name)}),$.each(n,function(n,i){var r;r=i.type?new p(e,i):new w(e,i);t[r.id]=r}));for(r in t)t.hasOwnProperty(r)&&(i=t[r],f=t[i.parentId],f?f.add(i,!0):this.add(i,!0));this.all=t},t.FAVORITE_STORE_SCOPE_FAVORITE_QUERIES="WorkItemTracking.Queries",t.FAVORITE_STORE_SCOPE_FAVORITE_BUILD_DEFINITIONS="Build.Definitions",t.FAVORITE_STORE_SCOPE_FAVORITE_PATHS="VersionControl.Paths",t.FAVORITE_STORE_SCOPE_FAVORITE_PROJECTS="Classification.TeamProjects",t.FAVORITE_STORE_SCOPE_FAVORITE_TEAMS="Team.Teams",t.FAVORITE_STORE_SCOPE_FAVORITE_VC_REPOSITORIES="VersionControl.Repositories",t.FAVORITE_STORE_SCOPE_FAVORITE_TEST_PLAN="TestManagement.Plans",t}(w);t.FavoriteStore=rt,function(n){function t(n,t,i,r){var u=o.TfsContext.getDefault();t=n+t;l.getCollectionService(s.WebSettingsService).beginWriteSetting("/"+t,i,s.WebSettingsScope.User,r)}function i(n,i,r,u){t(n,i,r,u)}function r(n,i,r,u){t(n,i,r,u)}function u(n,i,r,u){t(n,i,r,u)}n.saveTeamUserStringSetting=i;n.saveTeamUserNumberSetting=r;n.saveTeamUserBoolSetting=u}(et=t.ContextUtils||(t.ContextUtils={}));ut=function(){function n(){}return n._combineUri=function(t,i){return n._ensureUriReadyForAppend(t)+i},n._ensureUriReadyForAppend=function(n){return n.lastIndexOf("/")===n.length-1?n:n+"/"},n.browserRequiresParamEncoding=function(){return e.BrowserCheckUtils.isMsie()&&parseInt(e.BrowserCheckUtils.getVersion(),10)<10},n.beginBuildUri=function(t,i,r,u,f,e){u;var a=n.ALM_SCHEME+t+"/"+i,s,l,v=n.browserRequiresParamEncoding();u=u||[];r&&(s=o.TfsContext.getDefault(),u.splice(0,0,{name:n.COLLECTION_PARAM_NAME,value:s.navigation.collection.uri}));l=n.buildQueryParameterString(u);v?h.getMSJSON(s.getActionUrl("Base64EncodeValue","common",{area:"api"}),{value:n.buildQueryParameterString(u,v)},function(t){f.call(this,a+l+"&"+n.ENCODED_PARAM_NAME+"="+t)},e):f.call(this,a+l)},n.buildFeedbackClientUri=function(t){var i,u=[],r=o.TfsContext.getDefault();return i=r.navigation.publicAccessPoint.scheme==="https"?n.MFBCLIENTS_SCHEME:n.MFBCLIENT_SCHEME,i+=r.navigation.publicAccessPoint.authority+r.navigation.collection.vDir,i+=n.PROJECT_PARAM_NAME+":"+r.navigation.project,u.push({name:n.FEEDBACK_REQUEST_IDS_PARAM_NAME,value:t.join(",")}),i+n.buildQueryParameterString(u)},n.buildQueryParameterString=function(n,t){var i="",r;return $.each(n,function(u){r=n[u];i+=u===0?"?":"&";i+=encodeURIComponent(r.name)+"=";i+=t||r.doNotEncode?r.value:encodeURIComponent(r.value)}),i},n.ALM_SCHEME="tfs://",n.COLLECTION_PARAM_NAME="cn",n.PROJECT_PARAM_NAME="p",n.WORK_ITEM_ID_PARAM_NAME="wid",n.MFBCLIENT_SCHEME="mfbclient://",n.MFBCLIENTS_SCHEME="mfbclients://",n.FEEDBACK_REQUEST_IDS_PARAM_NAME="rid",n.ENCODED_PARAM_NAME="__params",n}();t.AlmUriBuilder=ut;ft=function(){function n(){}return n.launchUri=function(n){var t=e.BrowserCheckUtils.isMsie()&&parseInt(e.BrowserCheckUtils.getVersion(),10)>=10;t||window.navigate?a.getService().performAction(a.CommonActions.ACTION_WINDOW_NAVIGATE,{url:n}):a.getService().performAction(a.CommonActions.ACTION_WINDOW_OPEN,{url:n,target:"_blank"})},n}();t.AlmUriManager=ft;i.tfsModuleLoaded("TFS.OM.Common",t)});

define("Agile/Scripts/Backlog/ProductBacklogMru",["require","exports","VSS/Diag","Presentation/Scripts/TFS/TFS.Core.Utils","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.WebSettingsService"],function(n,t,i,r,u,f,e){var o,s;Object.defineProperty(t,"__esModule",{value:!0});t.BacklogsToolPanel=t.ShowParents=void 0,function(n){function s(n){var n=n||u.TfsContext.getDefault(),s=t(),o=f.ProjectCollection.getConnection(n).getService(e.WebSettingsService).readLocalSetting(s,e.WebSettingsScope.UserAndTeam);return o===undefined||o===null?(i.logVerbose("Show Parents MRU state not defined. Defaulting to OFF."),!1):r.BoolUtils.parse(o)}function h(n,r){var r=r||u.TfsContext.getDefault(),o=t(),s=n.toString();f.ProjectCollection.getConnection(r).getService(e.WebSettingsService).writeLocalSetting(o,s,e.WebSettingsScope.UserAndTeam)}function t(){return"/"+o}var o="AgileBacklog.ShowParentsFilter";n.getMRUState=s;n.setMRUState=h}(o=t.ShowParents||(t.ShowParents={})),function(n){function o(n,r){r=r||u.TfsContext.getDefault();var o=t(n);return f.ProjectCollection.getConnection(r).getService(e.WebSettingsService).readLocalSetting(o,e.WebSettingsScope.User)}function s(n,r,o){o=o||u.TfsContext.getDefault();var s=t(n);f.ProjectCollection.getConnection(o).getService(e.WebSettingsService).writeLocalSetting(s,r,e.WebSettingsScope.User)}function t(n){return"/"+n+"/"+r}n.AREA_PRODUCTBACKLOG="productbacklog";n.AREA_ITERATIONBACKLOG="iterationbacklog";n.AREA_CAPACITYPLANNING="capacityplanning";var r="AgileBacklog.Panel";n.getMRUPanel=o;n.setMRUPanel=s}(s=t.BacklogsToolPanel||(t.BacklogsToolPanel={}))});

define("Agile/Scripts/Resources/TFS.Resources.Agile",["require","exports"],function(require,exports){var e=exports;e.AdminWorkHub_Iteration_RemoveText="Remove";e.WorkAdminHub_ClassificationPicker_Errortip="The default area can only be set to areas owned by {0}";e.CreateAreaDialogTitle="New area";e.WorkAdminHub_ClassficationPicker_Error="There was an error. Please try again later.";e.TeamSettings_Area_Manage_Dismissable="\u003cspan id=\u0027areaManageDismissable\u0027\u003eTo manage areas for the project, navigate to \u003c/span\u003e\u003ca aria-describedby=\u0027areaManageDismissable\u0027 href=\u0027{0}\u0027 target=\u0027{1}\u0027\u003eProject settings\u003c/a\u003e";e.ExpandAll="Expand all";e.TeamSettings_Iteration_ConfirmationDialogMessageHeader="Are you sure you want to change the backlog iteration?";e.EditIterationInvalidNameDesc="The most likely cause of this error is that the name that you chose is either restricted or already in use. For more information, see \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=136810\u0027 target=\u0027_blank\u0027\u003eNaming Restrictions\u003c/a\u003e in Azure DevOps.";e.DirectoryFavoriteGroupTitle="My Favorites";e.WorkAdminHub_ClassificationPicker_Cancel="Cancel";e.TeamSettings_Area_Title="Areas";e.WorkAdminHub_ClassificationPicker_Change="Change";e.EditIterationNameRequired="You must specify a name for this iteration.";e.ExpandOneLevelToolTip="Expand one level (+)";e.TeamSettings_Iteration_Grid_Iteration="Iteration";e.DeleteAreaDialogTitle="Delete area";e.AreaIterations_SecureClassificationTitle="Open security dialog to manage node security";e.EditIterationInvalidNameTitle="The name that you specified for this iteration is not valid.";e.UnexpectedServerError="The server returned an unexpected error.";e.ProjectWorkhub_TeamSettings_Description_Link_Text="the default team\u0027s settings.";e.RollupColumn_Available_Message="Rollup columns are now available in Column Options on this backlog!";e.Resources_Security_Dialog_Title="Permissions for {0}";e.WorkAdminHub_AddSubChild_ErrorMessage="Area {0} is included as a sub-area of {1} already. Exclude sub-areas to add individual child nodes.";e.SprintsDirectoryFavoritesGroupTitle="My favorites";e.DirectoryEmptyFavoritesGroupText="No favorites yet! Favorite {0} a {1} to quickly access it here.";e.AdminWorkHub_Iteration_ClassificationDialog_AddLimitMessage="You can add up to {0} iterations at a time.";e.AdminWorkHub_Iteration_RecordsRemovedMessageHeader="One or more iterations have been removed as a result of adding parent and/or child nodes of existing iterations.";e.ProjectWorkhub_Iteration_Description="Create and manage the iterations for this project. These iterations will be used by teams for iteration planning (sprint planning).";e.WorkAdminHubSelectDialog_DeleteLabel="Delete this {0}";e.AreaIterations_IterationsDialogTitle="Iterations";e.UnexpectedErrorChangesNotSaved="Your changes could not be saved.";e.ReorderWorkItemsOperationsNullOrEmpty="operations is null or empty.";e.SprintsHub_NavigateToDirectoryToFindTaskboard="Navigate to the Sprints directory below to find a taskboard.";e.ExpandOneLevel="Expand one level";e.AdminWorkHub_SetAsDefaultArea="Set as default area for team";e.KeywordFilter_PlaceholderText="Filter by text";e.Directory_UnfavoriteFailed="Could not unfavorite this item";e.PaneClosedLearningBubbleButtonText="Got it";e.EditIterationInvalidDateFormat="You have specified a date for the start or end of the iteration, but the date is not valid. You must provide the date in the following format: {0}";e.WorkAdminHub_Iteration_DefaultIteration_LabelTooltip="Assigns a default Iteration value to work items created from your team context";e.TeamSettings_Iteration_ToolbarInfo="The iterations selected below will appear in the Sprints hub for your team. Each iteration will have a backlog and board to help your team plan and manage work.";e.AdminWorkHub_Area_ClassificationPickerLabel="Area";e.Areas_Column_Header="Areas";e.AdminArea_LearnMore_FwLink="https://go.microsoft.com/fwlink/?LinkId=786954";e.AdminWorkHub_Area_RemoveText="Remove";e.EditIterationInvalidCharactersTitle="Invalid character(s) entered.";e.AreaIterations_SubAreasIncluded="sub-areas are included";e.BoardsBacklogLevelsColumnTitle="Backlog levels";e.CssNodeNoEditPermissions="You do not have permission to make changes.";e.EditIterationInvalidCharactersDesc="The name that you specified for this iteration contains one or more characters that are not allowed. For more information, see \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=136810\u0027 target=\u0027_blank\u0027\u003eNaming Restrictions\u003c/a\u003e in Azure DevOps.";e.AreaIterations_RemoveNodeTitle="Delete the selected item";e.DeleteButtonName="Delete path";e.AreaNameField="Area name";e.DirectoryEmptyMyTeamsGroupText="You are not a member of any teams in this project";e.AdminTeamWorkItems_Title="Team field";e.EditIterationInvalidNameLength="The name that you specified exceeds the maximum allowance of 255 characters. You must shorten the name.";e.Directory_FavoriteFailed="Could not favorite this item";e.ConfirmDeleteAreaIteration="You have chosen to delete this path. If you delete it, any work items, tests, or other items in the team project that reference this path or any of its dependent paths will be reassigned.";e.AreaIterations_AddChildNodeText="New child";e.WorkAdminHub_Area_ConfirmRootAreaPathChangeHeader="Are you sure you want to include sub-areas?";e.SprintsDatesColumnTitle="Sprint dates";e.TeamSettings_Area_IntroHtml="Select the areas your team owns below. The selected area paths will determine what shows up on your team\u0027s backlog and what work items your team is responsible for.";e.AreaIterations_AreasDialogTitle="Areas";e.AdminWorkHub_Area_RecordsRemovedMessage="One or more areas have been removed as a result of including sub-areas.";e.AreaIterations_OpenNodeText="Open";e.AdminWorkHub_Area_ClassificationDialogSubTitle="Work items in the selected area path(s) will show up on your team\u0027s backlog";e.WorkAdminHub_Error="{0} Please refresh the page.";e.WorkAdminHub_Area_ConfirmRootAreaPathChange="You have selected the root area path as your team\u0027s work area. This causes two things to happen:\u003cbr /\u003e\u003cbr /\u003e\r\n1) All work items that appear on any team backlog will also appear on your team\u0027s backlog.\u003cbr /\u003e\u003cbr /\u003e\r\n2) All work items under this area path will be updated, which might impact the performance of your server until the changes are complete.\r\n\r\nAre you sure you want to do this? If not, choose Cancel, and the change will not be made.";e.DirectoryNameColumnTitle="Name";e.CollapseAll="Collapse all";e.AdminArea_Description_Text="Create and manage the areas for this project. These areas will be used by teams to determine what shows up on the team\u0027s backlog and what work items the team is responsible for. ";e.Toolbar_New="New";e.Toolbar_NewChild="New child";e.SprintsHub_SprintsDirectory="Go to directory";e.WorkAdminHub_Area_DefaultArea="Default area";e.WorkAdminHub_MissingBacklogError="No backlog iteration has been selected for your team. Before you can select iterations for your team to participate in, you must first specify a backlog iteration.";e.AdminWorkHub_ExcludeSubAreas="Exclude sub areas";e.AreaIterations_AddNodeText="New";e.ProjectWorkhub_TeamSettings_Description_Area="areas";e.WorkAdminHubSelectDialog_AddLabel="Select {0} for your teams backlog";e.Iterations_Plural="Iterations";e.End_Date_Column_Header="End Date";e.CollapseOneLevelToolTip="Collapse one level (-)";e.AdminWorkHub_Iteration_ClassificationPickerLabel="Iteration";e.EditIterationDefaultName="Iteration name";e.EditAreaDefaultName="Area name";e.SaveAndCloseButtonName="Save and close";e.AdminWorkHub_Area_DuplicateErrorMessage="This area is already selected for the team.";e.AdminIteration_Description_Text="Create and manage the iterations for this project. These iterations will be used by teams for iteration planning (sprint planning). ";e.EditAreaInvalidNameTitle="The name that you specified for this area is not valid.";e.AdminWork_Title="Work";e.AdminWorkHub_Iteration_ClassificationDialogSubTitle="These iterations will be available on your team\u0027s backlog";e.AgileSettings_DetailsOfErrorMessages="Details about the validation error appear below:";e.CollapseOneLevel="Collapse one level";e.AreaIterations_AddNodeTitle="Add a new entry at the same level as the selected item";e.ProgressVerifyingPermissions="Verifying permissions...";e.Iteration_Grid_StartDate="Start Date";e.AdminWorkHub_Iteration_RecordsRemovedMessageText="Adding \u0027{0}\u0027 removed the following iteration(s):";e.WorkAdminHub_Iteration_Picker_Watermark="Select an iteration";e.AdminWorkHub_Area_ClassificationDialog_AddLimitMessage="You can add up to {0} areas at a time.";e.ClassificationPicker_ErrorText_PathRequired="Input cannot be empty";e.WorkAdminHub_ClassificationPicker_Persist="Set";e.TeamSettings_Area_Grid_Area="Area";e.RollupColumn_AddDefault_Button="Add a default Rollup Column";e.AdminWorkHub_Area_AddText="Select area(s)";e.Admin="Admin";e.Close="Close";e.TeamSettings_Iteration_ConfirmationDialogMessageContent="Changing the backlog iteration will remove all existing iterations that are not descendants of \u0027{0}\u0027 iteration.";e.Teams="Teams";e.TeamSettings_NoPermissionsGeneral="\"team settings\"";e.AdminWorkHub_IncludeSubAreas="Include sub areas";e.PaneClosedLearningBubbleInfoText="You have turned off the side pane. If you wish to turn it back on in the future, you can find it in the view options menu.";e.TeamSettings_NoPermissionsIterations="\"iterations\"";e.TeamSettings_Iteration_Manage_Dismissable="\u003cspan id=\u0027iterationManageDismissable\u0027\u003eTo manage iterations for the project, navigate to \u003c/span\u003e\u003ca aria-describedby=\u0027iterationManageDismissable\u0027 href=\u0027{0}\u0027 target=\u0027{1}\u0027\u003eProject settings\u003c/a\u003e";e.SprintsHub_SelectTeamSprint="Select team\u0027s sprint";e.EditAreaInvalidCharactersDesc="The name that you specified for this area contains one or more characters that are not allowed. For more information, see \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=136810\u0027 target=\u0027_blank\u0027\u003eNaming Restrictions\u003c/a\u003e in Azure DevOps.";e.WorkAdminHub_Iteration_DefaultIteration_Label="Default iteration";e.BoardsHub_AllBoardsDirectory="Boards directory";e.Admin_Area_Iteration_LearnMore="Learn more about customizing areas and iterations";e.EditIterationDialogTitle="Edit iteration";e.ProductBacklogQueryName_Backlog="{0} - {1}";e.SprintsActivityColumnTitle="Sprint activity";e.ProjectWorkHub_Area_Description="Create and manage the areas for this project. These areas will be used by teams to determine what shows up on the team\u0027s backlog and what work items the team is responsible for.";e.AdminWorkHub_Iteration_DuplicateErrorMessage="This iteration is already selected for the team.";e.AdminWorkHub_Area_DefaultArea="default area";e.WorkAdminHub_Area_Picker_Watermark="Select an area";e.CreateIterationDialogTitle="New iteration";e.AdminWorkHub_Iteration_AddText="Select iteration(s)";e.AreaIterations_SecureClassificationText="Security";e.AreaIterations_RemoveNodeText="Delete";e.Start_Date_Column_Header="Start Date";e.AdminIterations_Index_Title="Iterations";e.UnsavedChangesPrompt="You have modified the form details.  Close and lose changes?";e.WorkAdminHub_ClassificationSettings_AndNMore="and {0} more";e.AdminWorkHub_Remove="Remove";e.WorkAdminHub_Area_NoAreaSelectedWarning="There are no areas selected for your team. You must select at least one area to enable features such as your product backlog or the task board.";e.AdminWorkHub_Area_IncludeChildren="sub-areas are included";e.WorkAdminHub_Iteration_ChangeBacklog_LabelTooltip="Determines which work items appear on your teams backlog and board";e.WorkAdminHub_Iteration_ChangeBacklog_Label="Backlog iteration";e.AdminWorkHub_Iteration_ClassificationDialogTitle="Select iteration(s)";e.AdminIterations_SetDate="Set dates";e.RollupColumn_FwLink="https://go.microsoft.com/fwlink/?linkid=2096313";e.EndDateField="End date";e.EditAreaDialogTitle="Edit area";e.Directory_GridLabel="Directory Grid";e.FWLink_LearnMore="Learn more";e.AdminWorkHub_Iteration_NodeNotFound="The iteration node was not found, please specify a valid iteration path.";e.SprintsHub_UnknownSprint="Unknown";e.TeamSettings_NoPermissionsAreas="\"areas\"";e.WorkAdminHub_Area_RecordsRemovedMessageBody="By including sub-areas of \u0027\u003cstrong\u003e{0}\u003c/strong\u003e\u0027, the following child area paths have been removed: ";e.TeamSettings_NoPermissionsWarning="You do not have sufficient permissions to configure {0}. You must either be a team administrator or a project administrator.";e.StartDateField="Start date";e.WorkAdminHub_GenericError="Something went wrong. Please refresh the page and try again.";e.DirectoryMyGroupTitle="My {0}";e.IterationNameField="Iteration name";e.AdminAreas_IndexTitle="Areas";e.TeamSettings_Iteration_IntroHtml="Teams plan and track work at regular time intervals, commonly referred to as an iteration or sprint. Here you can manage the iterations for your team.";e.AdminWorkHub_InvalidBacklogIterationMessage="Only iterations that are descendants of the backlog iteration for this team can be selected.";e.AdminIteration_LearnMore_Fwlink="https://go.microsoft.com/fwlink/?LinkId=786956";e.ProjectWorkhub_TeamSettings_Description="To select {0} for the team, go to ";e.AdminWorkHub_Area_ClassificationDialogTitle="Select area(s)";e.TeamFilter_PlaceholderText="Filter by team";e.DeleteIterationsSelectNewPathLabel="Choose a path for reassignment of affected items";e.TeamSettings_Iteration_ConfirmationDialogTitle="Change backlog iteration";e.DirectoryTeamColumnTitle="Team";e.Iteration_Grid_EndDate="End Date";e.ProjectWorkhub_TeamSettings_Description_Iteration="iterations";e.WorkAdminHubSelectDialog_LearnMoreLabel="Learn more about {0}";e.DeletedFavoriteInfoMessage="This team has been deleted";e.AdminBoards_Title="Boards";e.WorkIterations_LearnMore_FwLink="https://go.microsoft.com/fwlink/?LinkID=798824";e.ClassificationPicker_ErrorText_PathNotExist="\u0027{0}\u0027 does not exist";e.AdminAreas_Index_Description="Select the areas your team owns. Selected areas will determine what shows up on your team\u0027s backlog and what work items your team is responsible for.";e.ConfirmTestRemoval="Confirm remove test(s)?";e.Backlogs_DisplayName="Backlogs";e.AreaIterations_EditNodeTitle="Edit";e.ProgressPleaseWait="Please wait ...";e.Iterations_Column_Header="Iterations";e.AdminAreas_Title="Areas";e.Area_Owner_Column_Header="Teams";e.EditAreaNameRequired="You must specify a name for this area.";e.Location="Location";e.AreaIterations_AddChildNodeTitle="Add a new entry as a child of the selected item";e.BoardsHub_NavigateToBoardsDirectoryToFindBoard="Navigate to the Boards directory below to find a board.";e.DeleteIterationDialogTitle="Delete iteration";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});t.TfsSettingsScopeNames=t.TeamProjectCapabilitiesConstants=t.ProjectVisibilityConstants=t.ProjectState=t.Messages=t.LicenseFeatureIds=t.HubsConstants=t.FeatureMode=t.FeatureAvailabilityFlags=t.CoreConstants=void 0,function(n){n.AreaIdGuid="79134c72-4a58-4b42-976c-04e7115f32bf";n.ProjectCollectionsLocationId="8031090f-ef1d-4af6-85fc-698cd75d42bf";n.ProjectsLocationId="603fe2ac-9723-48b9-88ad-09305aa6c6e1";n.ProcessLocationId="93878975-88c5-4e6a-8abb-7ddd77a8a7d8";n.ProjectHistoryLocationId="6488a877-4749-4954-82ea-7340d36be9f2";n.ProjectAvatarLocationId="54b2a2a0-859b-4d05-827c-ec4c862f641a";n.TeamsLocationId="d30a3dd1-f8ba-442a-b86a-bd0c0c383e59";n.CollectionTeamsLocationId="7a4d9ee9-3433-4347-b47a-7a80f1cf307e";n.TeamMembersLocationId="294c494c-2600-4d7e-b76c-3dd50c3c95be";n.ConnectedServicesId="b4f70219-e18b-42c5-abe3-98b07d35525e";n.ProxyId="ec1f4311-f2b4-4c15-b2b8-8990b80d2908";n.PropertiesLocationId="4976a71a-4487-49aa-8aab-a1eda469037a";n.ProjectsPropertiesLocationId="0a3ffdfc-fe94-47a6-bb27-79bf3f762eac";n.AreaId="79134C72-4A58-4B42-976C-04E7115F32BF";n.AreaName="core";n.ProcessAreaName="process";n.ApiString="_apis";n.JsonPatchMediaType="application/json-patch+json";n.ProcessResource="processes";n.ProjectsResource="projects";n.ProjectHistoryResource="projectHistory";n.ProjectAvatarResource="avatar";n.ProjectCollectionsResource="projectCollections";n.TeamsResource="teams";n.TeamMembersResource="members";n.ConnectedServicesResource="connectedServices";n.ProxyResource="proxies";n.ProxyAuthorizationResource="proxyauthorization";n.PropertiesResource="properties";n.ProjectsPropertiesResource="projectsproperties";n.ProjectCollectionsRouteName="ProjectCollections";n.ProjectsRouteName="Projects";n.ProjectHistoryRouteName="ProjectHistory";n.ProjectAvatarRouteName="ProjectAvatar";n.ProcessesRouteName="Processes";n.TeamsRouteName="Teams";n.CollectionTeamsRouteName="CollectionTeams";n.TeamMembersRouteName="TeamMembers";n.ConnectedServicesRouteName="ConnectedServices";n.ProxyRouteName="Proxies";n.PropertiesRouteName="Properties";n.ProjectsPropertiesRouteName="ProjectsProperties";n.TeamsLocationIdString="D30A3DD1-F8BA-442A-B86A-BD0C0C383E59";n.CollectionTeamsLocationIdString="7A4D9EE9-3433-4347-B47A-7A80F1CF307E"}(i=t.CoreConstants||(t.CoreConstants={})),function(n){n.WebAccessDashboardsNewExperienceToggle="WebAccess.Dashboards.NewExperience.Toggle";n.WebAccessDisableTypeAhead="WebAccess.Profile.DisableTypeAhead";n.WebAccessDisableRecommendationService="WebAccess.DisableRecommendationService";n.RecommendationServiceUseAex="VisualStudio.Recommendation.UseAex";n.WebAccessQuickStart="WebAccess.QuickStart";n.WebAccessQuickStartJumpStart="WebAccess.QuickStart.JumpStart";n.WebAccessQuickStartJumpStartForExistingProjects="WebAccess.QuickStart.JumpStartForExistingProjects";n.WebAccessQuickStartKanban="WebAccess.QuickStart.Kanban";n.WebAccessQuickStartKanbanForExistingProjects="WebAccess.QuickStart.KanbanForExistingProjects";n.WebAccessQuickStartScrum="WebAccess.QuickStart.Scrum";n.WebAccessQuickStartMembers="WebAccess.QuickStart.Members";n.WebAccessQuickStartCodeSearchPromotion="WebAccess.QuickStart.CodeSearchPromotion";n.WebAccessQuickStartCodeSearchFileViewerCapabilities="WebAccess.QuickStart.CodeSearchFileViewerCapabilities";n.WebAccessQuickStartCodeSearchFeature="WebAccess.QuickStart.CodeSearchFeature";n.WebAccessSendASmileNavbar="WebAccess.SendASmile.Navbar";n.WebAccessSendASmileNewBehavior="WebAccess.SendASmile.NewBehavior";n.WebAccessAccountShowGettingStartedVideo="WebAccess.Account.GettingStartedVideo";n.WebAccessAccountShowGettingStartedVideoIframe="WebAccess.Account.GettingStartedVideoIframe";n.WebAccessAccountSoftDelete="WebAccess.Account.AccountSoftDelete";n.WebAccessAccountRegion="WebAccess.Account.AccountRegion";n.WebAccessServicePreviewBuild="WebAccess.Service.Preview.Build";n.WebAccessServicePreviewTest="WebAccess.Service.Preview.Test";n.WebAccessExtensions="WebAccess.Extensions";n.WebAccessExtensionsDeployment="WebAccess.Extensions.Deployment";n.WebAccessExtensionsApplication="WebAccess.Extensions.Application";n.WebAccessExtensionsProjectCollection="WebAccess.Extensions.ProjectCollection";n.WebAccessExtensionsPersonal="WebAccess.Extensions.Personal";n.WebAccessVersionControlShowSelectedBranchAdminView="WebAccess.VersionControl.ShowSelectedBranchAdminView";n.WebAccessServiceMetricsAnalytics="WebAccess.Service.MetricsAnalytics";n.WebAccessTrialModeNotification="WebAccess.TrialModeNotification";n.WebAccessEarlyAdopterNotification="WebAccess.EarlyAdopterNotification";n.WebAccessAllowEarlyAdopterAfterExpiration="WebAccess.AllowEarlyAdopterAfterExpiration";n.WebAccessAllowFpsFromScalarWidgets="WebAccess.Widgets.ScalarWidgetsFps.Enable";n.ReportingAnalyticsVisualMenu="WebAccess.Reporting.AnalyticsVisualMenu";n.ReportingBuildTestVisualExamples="WebAccess.Reporting.BuildTestVisualExamples";n.ServiceHooksTfsPublisher="ServiceHooks.TfsHooksPublisher";n.ServiceHooksGeneralAvailability="ServiceHooks.GeneralAvailability";n.OpenPlatformAnnouncement="OpenPlatform.Announcement";n.EnableAddAadUserWarning="WebAccess.EnableAddAadUserWarning";n.WebAccessAccountAadInformationNotification="WebAccess.AccountAadInformationNotification";n.WebAccessWelcomeHub="WebAccess.WelcomeHub";n.WebAccessProjectWelcomeHub="WebAccess.ProjectWelcome";n.WebAccessVersionControlGitPullRequestsWITIntegration="WebAccess.VersionControl.GitPullRequestsWITIntegration";n.WebAccessVersionControlGitReduceBranchComparisonDefaultCount="WebAccess.VersionControl.GitReduceBranchComparisonDefaultCount";n.WebAccessVersionControlGitSecretsScanning="WebAccess.VersionControl.GitSecretsScanning";n.GitOSCompat="Git.OSCompat";n.GitPushNewPushPolicies="Git.Push.NewPushPolicies";n.GitPushCommitAuthorPushPolicy="Git.Push.CommitAuthorPushPolicy";n.VisualStudioServicesPersistedNotification="VisualStudio.Services.PersistedNotification";n.ELSVSOIntegrationAnnouncement="ELS.VSO.IntegrationAnnouncement";n.BasicUserLimitedPortfolioAccessNotificationId="16676E24-8F6A-4EAA-9A9D-FCDF57E8BC8A";n.LoadTestFeatureFlag="ELS.VSO.LoadTesting";n.LoadTestEmailEnableFlag="ELS.VSO.EmailEnable";n.LoadTestUltimateEnableFlag="ELS.VSO.UltimateEnable";n.LoadTestGeoEnableFlag="ELS.VSO.GeoEnable";n.LoadTestFeatureEnableForNonUltimateFlag="ELS.VSO.LoadTestEnableForNonUltimate";n.LoadTestAverageResponseTimeThresholdValue="ELS.VSO.AverageResponseTimeThresholdValue";n.WebAccessSearchEnableNewRoute="WebAccess.Search.EnableNewRoute";n.WebAccessSearchShell="WebAccess.SearchShell";n.WebAccessSearchProject="WebAccess.Search.Project";n.WebAccessSearchWorkItemEnableListView="WebAccess.Search.WorkItem.EnableListView";n.WebAccessSearchWorkItem="WebAccess.Search.WorkItem";n.WebAccessSearchWorkItemClientSort="WebAccess.Search.WorkItem.ClientSort";n.WebAccessSearchWorkItemServerSort="WebAccess.Search.WorkItem.ServerSort";n.WebAccessSearchCodeServerSort="WebAccess.Search.Code.ServerSort";n.WebAccessSearchCodeClientSort="WebAccess.Search.Code.ClientSort";n.WebAccessSearchWikiConditionalFaultin="WebAccess.Search.Wiki.ConditionalFaultin";n.WebAccessSearchWorkItemConditionalFaultin="WebAccess.Search.WorkItem.ConditionalFaultin";n.WebAccessSearchWorkItemFeatureToggle="WebAccess.Search.WorkItem.Feature.Toggle";n.WebAccessSearchWorkItemFeatureDefault="WebAccess.Search.WorkItem.Feature.Default";n.WebAccessSearchCustomVC="WebAccess.Search.CustomVC";n.WebAccessSearchMultiAccount="WebAccess.Search.MultiAccount";n.WebAccessSearchMultiBranch="WebAccess.Search.MultiBranch";n.WebAccessSearchMultiBranchConfigurationUX="WebAccess.Search.MultiBranchConfigurationUX";n.WebAccessSearchUseContentHash="WebAccess.Search.UseContentHash";n.WebAccessSearchWorkItemWelcomeBanner="WebAccess.Search.WorkItem.WelcomeBanner";n.DisableWebAccessServerKanbanLogs="WebAccess.Server.DisableKanbanLogs";n.WebAccessVersionControlEditing="WebAccess.VersionControl.Editing";n.WebAccessVersionControlWikiLinkTransformation="WebAccess.VersionControl.WikiLinkTransformation";n.VersionControlAllowCreateReadMe="VisualStudio.VersionControl.AllowCreateReadMe";n.SourceControlPullRequestsAttachments="SourceControl.GitPullRequests.Attachments";n.WebAccessVersionControlPullRequestsCommentFeedback="WebAccess.VersionControl.PullRequests.CommentFeedback";n.WebAccessVersionControlPullRequestsDiscussionCollapseWidget="WebAccess.VersionControl.PullRequests.DiscussionCollapseWidget";n.WebAccessVersionControlPullRequestsDiscussionCommentLikes="WebAccess.VersionControl.PullRequests.DiscussionCommentLikes";n.WebAccessVersionControlPullRequestsAutoComplete="WebAccess.VersionControl.PullRequests.AutoComplete";n.WebAccessVersionControlPullRequestsFollows="WebAccess.VersionControl.PullRequests.Follows";n.WebAccessVersionControlPullRequestsCommitsTabReplaced="WebAccess.VersionControl.PullRequest.CommitsTabReplaced";n.WebAccessVersionControlPolicyAutomaticReviewersMinimumCount="WebAccess.VersionControl.Policy.AutomaticReviewers.MinimumCount";n.WebAccessVersionControlContributions="WebAccess.VersionControl.Contributions";n.WebAccessVersionControlIncludeForcePushDetails="WebAccess.VersionControl.Pushes.IncludeForcePushDetails";n.WebAccessVersionControlGitPushersExclusionFilter="WebAccess.VersionControl.GitPushersExclusionFilter";n.WebAccessVersionControlExplorerVanityBadges="WebAccess.VersionControl.ExplorerVanityBadges";n.WebAccessVersionControlGitCredentialManagerAvailable="WebAccess.VersionControl.GitCredentialManagerAvailable";n.WebAccessVersionControlDisableAlternateAuthInGitGettingStarted="WebAccess.VersionControl.DisableAlternateAuthInGitGettingStarted";n.WebAccessVersionControlNewBranches="WebAccess.VersionControl.NewBranches";n.WebAccessVersionControlStaleBranches="WebAccess.VersionControl.StaleBranches";n.WebAccessVersionControlDisableCommitItemCache="WebAccess.VersionControl.DisableCommitItemCache";n.ChartingHistorical="Charting.Historical";n.ChartingAggregation="Charting.Aggregation";n.WebAccessBuildCIWorkflowVariableGroups="WebAccess.Build.CIWorkflow.VariableGroups";n.MarketplaceExtensionSupport="WebAccess.Build.CIWorkflow.MarketplaceExtensionSupport";n.EnableIdentityNavigation="VisualStudio.Services.Framework.EnableIdentityNavigation";n.WebAccessBuildCIWorkflowYaml="WebAccess.Build.CIWorkflow.Yaml";n.WebAccessBuildDiagnosticLogs="WebAccess.Build.DiagnosticLog";n.WebAccessBuildCIWorkflowBuildCompletion="WebAccess.Build.CIWorkflow.BuildCompletion";n.WebAccessBuildCIWorkflowAgentDefinition="WebAccess.Build.CIWorkflow.AgentDefinition";n.WebAccessCIWorkflowEditableControlsWithoutPermission="WebAccess.CIWorkflow.EditableControlsWithoutPermission";n.BuildXaml="Build.Xaml";n.WebAccessBuildvNextGitHubRepository="WebAccess.BuildvNext.GitHubRepository";n.WebAccessBuildvNextSvnRepository="WebAccess.BuildvNext.SvnRepository";n.WebAccessBuildPhaseDependencies="WebAccess.Build2.PhaseDependencies";n.BuildvNextRetentionPolicy="Build.BuildvNext.RetentionPolicy";n.GitHubDiscoverYamlDefinition="Build2.GitHubDiscoverYamlDefinition";n.GitHubMarketplaceApp="Build2.GitHubMarketplaceApp";n.GitHubRequireCommentsForNonTeamAndNonContributors="Build2.GitHubRequireCommentsForNonTeamAndNonContributors";n.Build2BatchRealtimeUpdates="Build2.BatchRealtimeUpdates";n.Build2AllowOutOfScopeRepository="Build2.AllowOutOfScopeRepository";n.WebAccessBuild2ShowYamlView="WebAccess.Build2.ShowYamlView";n.WebAccessSearchCORS="WebAccess.SearchCORS";n.WebAccessSearchPrefetchFirstSearch="WebAccess.Search.PrefetchFirstSearch";n.UseUserDetailsArea="VisualStudio.Services.Identity.UseUserDetailArea";n.ReleaseManagementReleasesHub="WebAccess.ReleaseManagement.ReleasesHub";n.ReleaseManagementCDOptInToggle="WebAccess.ReleaseManagement.NewCDWorkflowOptInToggle";n.ReleaseManagementCDOptInDefault="WebAccess.ReleaseManagement.NewCDWorkflowOptInDefault";n.ReleaseManagementNewCDReleaseViewOptInToggle="WebAccess.ReleaseManagement.NewCDReleaseViewOptInToggle";n.ReleaseManagementNewCDReleaseViewOptInDefault="WebAccess.ReleaseManagement.NewCDReleaseViewOptInDefault";n.ReleaseManagementUseDataProviderForSetupRelease="WebAccess.ReleaseManagement.UseDataProviderForSetupRelease";n.WebAccessAgileBacklogForecastOnDemand="WebAccess.Agile.Backlog.ForecastOnDemand";n.WebAccessAgileTaskboardDelayloadStateTransitions="WebAccess.Agile.Taskboard.DelayloadStateTransitions";n.WebAccessAgileTaskboardExpandCollapseAll="WebAccess.Agile.Taskboard.ExpandCollapseAll";n.WebAccessAgileTaskboardPeopleSwitcher="WebAccess.Agile.Taskboard.PeopleSwitcher";n.WebAccessAgileTaskboardDisableCustomColumns="WebAccess.Agile.Taskboard.DisableCustomColumn";n.WebAccessAgileTaskboardDisableLiveUpdates="WebAccess.Agile.Taskboard.DisableLiveUpdates";n.WebAccessAgileTaskboardLiveUpdatesDisableThrottling="WebAccess.Agile.Taskboard.LiveUpdates.DisableThrottling";n.AgileServerTeamServiceAADGroupsBlockExpansion="Agile.Server.TeamService.AADGroupsBlockExpansion";n.WebAccessVSTSBranding="WebAccess.VSTSBranding";n.WebAccessAgileBehaviorProvisioningRESTAPI="WebAccess.Agile.BehaviorProvisioningRESTAPI";n.BacklogsOfficeFabricContextMenu="WebAccess.Agile.Backlog.OfficeFabContextMenu";n.BacklogsChangeParentContextMenu="WebAccess.Agile.Backlog.ChangeParentMenuItem";n.WebAccessWorkItemTrackingIndexedDBCaching="WebAccess.WorkItemTracking.IndexedDBCaching";n.WebAccessVersionControlNewVersionDropdown="WebAccess.VersionControl.NewVersionDropdown";n.WebAccessVersionControlPullRequestsNoDefaultTitle="WebAccess.VersionControl.PullRequests.NoDefaultTitle";n.WebAccessVersionControlPullRequestsLabels="WebAccess.VersionControl.PullRequests.Labels";n.WebAccessVersionControlPullRequestsMentions="WebAccess.VersionControl.PullRequests.Mentions";n.WebAccessVersionControlPullRequestListHideGroupReviewers="WebAccess.VersionControl.PullRequestList.HideGroupReviewers";n.WebAccessVersionControlEnablePermissions="WebAccess.VersionControl.EnablePermissions";n.WebAccessVersionControlDisableWITValidationWarning="WebAccess.VersionControl.DisableWITValidationWarning";n.WebAccessVersionControlFilesMoreBlame="WebAccess.VersionControl.Files.MoreBlame";n.WebAccessVersionControlContributedEmptyRepository="WebAccess.VersionControl.ContributedEmptyRepository";n.WebAccessWorkItemTrackingAddLinksByToolType="WebAccess.WorkItemTracking.AddLinksByToolType";n.WebAccessVersionControlPullRequestsTemplates="WebAccess.VersionControl.PullRequests.Templates";n.WebAccessVersionControlPullRequestsViewedStatus="WebAccess.VersionControl.PullRequests.ViewedStatus";n.WebAccessWorkItemTrackingDisableCommentCount="WebAccess.WorkItemTracking.WorkItemsHub.DisableCommentCount";n.ShareEndpointsAcrossProjects="WebAccess.ServiceEndpoints.ShareAcrossProjects";n.AzureSubscriptionBasedDockerRegistry="ServiceEndpoints.AzureSubscriptionBasedDockerRegistry";n.WebAccessWorkItemTrackingEnableCSVExport="WebAccess.WorkItemTracking.EnableCSVExport";n.WebAccessWorkItemTrackingEnableCSVImport="WebAccess.WorkItemTracking.EnableCSVImport";n.EnableSovereignSupportInKubernetesEndpoint="ServiceEndpoints.EnableSovereignSupport";n.BitbucketAzurePipelinesOAuthClient="Build2.BitbucketAzurePipelinesOAuthClient";n.GetWorkItemHistoryFieldValue="WebAccess.WorkItemTracking.GetWorkItemHistoryFieldValue";n.TypeScriptRuleEngineStateTransitionFilteringDisabled="WebAccess.WorkItemTracking.TypeScriptRuleEngineStateTransitionFilteringDisabled";n.SourceControlGitPullRequestsMergeStrategyRebase="SourceControl.GitPullRequests.MergeStrategy.Rebase";n.GitCommitMessageWITTransition="VisualStudio.Mentions.GitCommitMessageWITTransition";n.WebAccessSkypeTeamsTabConfiguration="WebAccess.SkypeTeams.TabConfiguration";n.WebAccessScaledAgilePlansDeliveryTimelineDelayedDragDropCard="WebAccess.ScaledAgile.Plans.DeliveryTimeline.DelayedDragDropCard";n.WebAccessScaledAgilePlansDeliveryTimelineIsCardMovementAnimated="WebAccess.ScaledAgile.Plans.DeliveryTimeline.IsCardMovementAnimated";n.WebAccessDiscussionRendererHTMLRenderer="WebAccess.VersionControl.DiscussionRenderer.HTMLRendering";n.WebAccessAgileKanbanFlatQuery="WebAccess.Agile.Kanban.FlatQuery";n.WebAccessAgileKanbanBoardAutoRefreshThrottling="WebAccess.Agile.KanbanBoard.AutoRefresh.Throttling";n.WebAccessAgileCardAnnotations="WebAccess.Agile.Card.Annotations";n.WebAccessAgileCardRollup="WebAccess.Agile.Card.Rollup";n.WebAccessAgileUseBehaviorsForBacklogLevels="WebAccess.Agile.UseBehaviorsForBacklogLevels";n.WebAccessAgileBacklogOneClickOpen="WebAccess.Agile.Backlog.OneClickOpen";n.WebAccessAgileBacklogEnableRollupColumns="WebAccess.Agile.Backlog.EnableRollupColumns";n.WebAccessAccessibilityMonitor="WebAccess.AccessibilityMonitor";n.WebAccessAgileBacklogSafeguardPerformanceSampling="WebAccess.Agile.Backlog.Safeguard.PerformanceSampling";n.TeamServiceSafeguardBlockCreateTeamAndAdminOperations="TeamService.Safeguard.BlockCreateTeamAndAdminOperations";n.TeamConfigurationServiceLimitTeamAreaPathsAndIterations="TeamConfigurationService.SaveTeamFields.LimitAllowedTeamAreaPathsAndIterations";n.CodeAnalysisAdornmentProvider="WebAccess.VersionControl.CodeAnalysisAdornmentProvider";n.WebAccessProcessUpload="WebAccess.Process.ProcessUpload";n.WebAccessXmlTemplateProcess="WebAccess.Process.XmlTemplateProcess";n.WorkItemTrackingCloneHostedXmlToInheritedDisabled="WorkItemTracking.Server.CloneHostedXmlToInheritedDisabled";n.WorkItemTrackingNewFormMoreSpaceInHeader="WebAccess.WorkItemTracking.NewForm.MoreSpaceInHeader";n.WorkItemTrackingMove="WorkItemTracking.Server.MoveWorkItems";n.InvalidateClientTagCacheOnWorkItemSave="WebAccess.WorkItemTracking.InvalidateClientTagCacheOnWorkItemSave";n.WebAccessWorkItemTrackingFormChromeBorder="WebAccess.WorkItemTracking.Form.ChromeBorder";n.WebAccessWorkItemTrackingFindWiUseFavorites="WebAccess.WorkItemTracking.FindWorkItemUseFavorites";n.ShowTeamProfileCard="WebAccess.ShowTeamProfileCard";n.TeamAgnosticWorkItemTemplates="WebAccess.WorkItemTracking.TeamAgnosticWorkItemTemplates";n.WorkItemTemplatesLegacyUrl="WebAccess.WorkItemTracking.WorkItemTemplates.LegacyUrl";n.DisableWorkItemTrackingStateColors="WebAccess.WorkItemTracking.Safeguard.DisableWorkItemStateColors";n.WorkItemTrackingChangeWorkItemType="WorkItemTracking.Server.ChangeWorkItemType";n.DisableWorkItemStoreDataProviders="WorkItemTracking.Server.DisableWorkItemStoreDataProviders";n.DisableSendMailDataProvider="WorkItemTracking.Server.DisableSendMailDataProvider";n.DisableWorkItemColorDataProvider="WorkItemTracking.Server.DisableWorkItemColorDataProvider";n.ProjectChangeProcessDisabled="WorkItemTracking.Server.ProjectChangeProcessDisabled";n.CloneProcessCustomWITStatesNewMergeDisabled="WorkItemTracking.Server.CloneProcessCustomWITStatesNewMergeDisabled";n.EnableLiveReloadForWorkItemLinks="WebAccess.WorkItemTracking.EnableLiveReloadForWorkItemLinks";n.EnableClassificationNodeRestClients="WorkItemTracking.Server.EnableClassificationNodeRestClients";n.WebAccessWorkItemTrackingHistoryViewExtension="WebAccess.WorkItemTracking.HistoryViewExtension";n.WebAccessWorkItemTrackingEnableLinksOfDeletedAttachments="WebAccess.WorkItemTracking.EnableLinksOfDeletedAttachments";n.WebAccessWidgetsUseAnalyticsAgileChartingClient="WebAccess.Widgets.UseAnalyticsAgileChartingClient";n.WebAccessBuildvNextEmailBuildSummary="WebAccess.BuildvNext.EmailBuildSummary";n.WebAccessVersionControlQuickActions="WebAccess.VersionControl.QuickActions";n.WebaccessProcessHierarchy="WebAccess.Process.Hierarchy";n.WebaccessProcessSecurityPanel="WebAccess.Process.SecurityPanel.Enable";n.WebAccessServicePrincipal="WebAccess.ServicePrincipal";n.WebAccessHideServicePrincipal="WebAccess.HideServicePrincipal";n.WebAccessAutoCreateServicePrincipal="WebAccess.AutoCreateServicePrincipal";n.WebAccessAutoCreateServicePrincipalAcrossTenants="WebAccess.AutoCreateServicePrincipalAcrossTenants";n.WebAccessAutoCreateOAuthBasedServicePrincipalAcrossTenants="WebAccess.AutoCreateOAuthBasedServicePrincipalAcrossTenants";n.WebAccessAutoCreateServicePrincipalCompleteCallbackByAuthcode="WebAccess.AutoCreateServicePrincipalCompleteCallbackByAuthcode";n.WebAccessEnableNationalCloudForServicePrincipal="WebAccess.EnableNationalCloudForServicePrincipal";n.WebAccessEnableAzureStackForServicePrincipal="WebAccess.EnableAzureStackForServicePrincipal";n.WebAccessEnableResourceGroupScopedServicePrincipal="WebAccess.EnableResourceGroupScopedServicePrincipal";n.WebAccessSignalRSeparateAppPool="WebAccess.SignalR.AppPool";n.WebAccessWorkItemTrackingFormSignalR="WebAccess.WorkItemTracking.Form.SignalR.Enabled";n.AadGroupsAdminUi="VisualStudio.Services.AadGroupsAdminUi";n.MinControlNewAddDialog="VisualStudio.Services.Web.MinControlNewAddDialog";n.DoNotPopulateIdentityGrid="VisualStudio.Services.Web.DoNotPopulateIdentityGrid";n.CollectionAdminWebUi="VisualStudio.Services.Web.CollectionAdmin.UserExperience";n.OrgAdminWebUi="VisualStudio.Services.Web.OrgAdmin.UserExperience";n.TriPassPercentageCalculation="TestManagement.Server.TriPassPercentageCalculation";n.TriShowTestRunSummaryInContext="TestManagement.Server.TriShowTestRunSummaryInContext";n.TriTrendChartsForRM="TestManagement.Server.TriTrendChartsForRM";n.BuildSummaryCodeCoverage="TestManagement.Server.BuildSummaryCodeCoverage";n.ModuleDetailsUIForDotCoverage="TestManagement.Server.ModuleDetailsUIForDotCoverage";n.BuildSummaryCodeCoverageCharts="TestManagement.Server.BuildSummaryCodeCoverageCharts";n.FileContainerServiceBrowseItems="VisualStudio.FileContainerService.BrowseItems";n.TriReportCustomization="TestManagement.Server.TRIReportCustomization";n.ShowNotImpactedInTestResults="TestImpact.Server.ShowNotImpactedInTestResults";n.TriQuickStartTraceability="TestManagement.Server.TriQuickStartTraceability";n.TCMUseNewIdentityPicker="WebAccess.TestManagement.UseNewIdentityPicker";n.IdentityPickerClientPerformance="VisualStudio.Services.IdentityPicker.ClientPerformance";n.SSHPublicKeys="WebAccess.SshUI";n.WebAccessTCMTestPlanLiteHub="WebAccess.TestManagement.TestPlanLiteHub";n.WebAccessTCMMineTestPlanSkinnyProvider="WebAccess.TestManagement.MineTestPlanSkinnyProvider";n.WebAccessTCMAllTestPlanSkinnyProvider="WebAccess.TestManagement.AllTestPlanSkinnyProvider";n.WebAccessTCMAdvTestExtPermissionsProvider="WebAccess.TestManagement.AdvTestExtPermissionsProvider";n.WebAccessTCMManageTestPlansHubLWP="WebAccess.TestManagement.ManageTestPlansHubLWP";n.AddToExistingBugResultSummaryPage="WebAccess.TestManagement.AddToExistingBugResultSummaryPage";n.WebAccessUseNonWiqlPointCountQuery="WebAccess.TestManagement.UseNonWiqlPointCountQuery";n.WebAccessShowDTROptionForTestRunner="WebAccess.TestManagement.ShowDTROptionForTestRunner";n.WebAccessTCMEnableXtForEdge="WebAccess.TestManagement.EnableEdgeXt";n.GatedCheckInTrigger="Build2.GatedCheckInTrigger";n.MaxConcurrentBuildsPerBranchFeature="Build2.MaxConcurrentBuildsPerBranch";n.FilePathArtifactsAndSymbolsDeleteFeature="Build2.Retention.FilePathArtifactsAndSymbolsDelete";n.BuildAllDefinitionsTab="WebAccess.Build.Definitions.All";n.WebAccessAddInlineTest="WebAccess.TestManagement.InlineTest";n.ExcludeJQueryUI="VisualStudio.Services.Contributions.ExcludeCompleteJQueryUI";n.WebAccessTestManagementPointCountFeatureDisabled="WebAccess.TestManagement.PointCountFeature";n.WebAccessTestManagementEnableDesktopScreenShot="WebAccess.TestManagement.EnableDesktopScreenShot";n.WebAccessTestManagementEnableAudioWithVideo="WebAccess.TestManagement.EnableAudioWithVideo";n.WebAccessTestManagementRenderMarkDownComment="WebAccess.TestManagement.RenderMarkDownComment";n.WebAccessTestManagementUpdateRunComment="WebAccess.TestManagement.UpdateRunComment";n.WebAccessTestManagementReactBasedRunWithOptionsDialog="WebAccess.TestManagement.ReactBasedRunWithOptions";n.PreviewAttachments="WebAccess.TestManagement.PreviewAttachment";n.LogStoreAttachments="WebAccess.TestManagement.LogStore";n.WebAccessTestManagementAttachmentsGridView="WebAccess.TestManagement.AttachmentsGridView";n.WebAccessTestManagementBugsGridView="WebAccess.TestManagement.BugsGridView";n.WebAccessTestManagementLinkedItemsGridView="WebAccess.TestManagement.LinkedItemsGridView";n.WebAccessTestManagementRequirementsGridView="WebAccess.TestManagement.RequirementsGridView";n.WebAccessTestManagementFiltersForRerun="WebAccess.TestManagement.FiltersForRerun";n.WebAccessTestManagementTestCaseHistory="WebAccess.TestManagement.TestCaseHistory";n.WebAccessTestManagementLinkedStackTrace="WebAccess.TestManagement.LinkedStackTrace";n.TriAddRunResultAttachment="WebAccess.TestManagement.AddRunResultAttachment";n.TriTestResultsSearchAndFilter="WebAccess.TestManagement.TestResultsSearchAndFilter";n.AnalyticsTestResultsFilters="WebAccess.TestManagement.Analytics.TestResultsFilters";n.AnalyticsRouteAPIsToTestResultDaily="WebAccess.TestManagement.Analytics.RouteAPIsToTestResultDaily";n.AnalyticsSwitchToTestSKContextFilter="WebAccess.TestManagement.Analytics.SwitchToTestSKContextFilter";n.AnalyticsGroupByAndFilterOnTestSK="WebAccess.TestManagement.Analytics.GroupByAndFilterOnTestSK";n.TriReportingAbortedRuns="TestManagement.Server.ReportingAbortedRuns";n.TriInProgress="TestManagement.Server.ReportingInProgressRuns";n.TriSignalRIntegration="TestManagement.Server.SignalRReportingRuns";n.PublishOnTcmService="TestManagement.Server.EnablePublishOnTcmService";n.UseOnlyLongPolling="WebAccess.TestManagement.UseOnlyLongPolling";n.QueryFromTcmService="WebAccess.TestManagement.QueryFromTcmService";n.LWPTestTab="WebAccess.TestManagement.TestTabInNewWebPlatform";n.WebAccessTestManagementInProgressRunsInInProgressDefaultView="WebAccess.TestManagement.ShowInProgressRunsInInProgressDefaultView";n.WebAccessTestManagementHierarchicalViewForResults="WebAccess.TestManagement.HierarchicalViewForResults";n.WebAccessTestManagementShowSummaryForNotImpactedTests="WebAccess.TestManagement.ShowSummaryForNotImpactedTests";n.TcmChartWidget="WebAccess.Widgets.TcmChartWidget";n.WebAccessTestManagementAddRefLinksToRequirement="TestManagement.Server.AddTestCaseRefLinksToRequirement";n.WebAccessTestManagementTestTabExtensionBuild="WebAccess.TestManagement.TestTabExtension.Build";n.WebAccessTestManagementTestTabInNewWebPlatform="WebAccess.TestManagement.TestTabInNewWebPlatform";n.UpdateTestersOnSuiteUpdate="TestManagement.Server.SuitesApiIncludeTesters";n.EnableQueryFromTcmService="TestManagement.Server.EnableQueryFromTcmService";n.EnablePlannedResultsOnTcmService="TestManagement.Server.EnablePlannedResultsOnTcmService";n.WebAccessTestManagementNewTestPlanExperienceToggle="WebAccess.TestManagement.NewTestPlanExperience.Toggle";n.ShouldEnableFilterInInProgress="TestManagement.Server.ShouldEnableFilterInInProgress";n.AnalyticsHubForManualTest="WebAccess.TestManagement.EnableNewAnalyticsHubForManualTest";n.DisableAutoRefreshOfEntryPointTextForAnalyticsHubForManualTest="WebAccess.TestManagement.DisableAutoRefreshOfEntryPointTextForAnalyticsHubForManualTest";n.GalleryPromotion="Gallery.NewFeature.GalleryPromotion";n.AdminWorkHubDisplayAreaOwners="Admin.WorkHub.DisplayAreaOwners";n.BuildHostedImage="WebAccess.Build.HostedImageSelection";n.NewCIWorkflowOptIn="WebAccess.Build.NewCIWorkflowOptIn";n.NewCIWorkflowOptInDefault="WebAccess.Build.NewCIWorkflowOptInDefault";n.NewCIWorkflowOptInToggle="WebAccess.Build.NewCIWorkflowOptInToggle";n.TaskOutputVariables="DistributedTask.TaskOutputVariables";n.TaskValidateOutputVariables="DistributedTask.TaskValidateOutputVariables";n.BuildAndReleaseResourceLimits="WebAccess.BuildAndRelease.ResourceLimits";n.LimitHostedMaxParallelism="DistributedTask.LimitHostedMaxParallelism";n.PipelineBillingModel2SelfHostedInfiniteResourceLimits="DistributedTask.PipelineBillingModel2.SelfHosted.InfiniteResourceLimits";n.PipelineBillingModel2="DistributedTask.PipelineBillingModel2";n.PipelineBillingModel2PublicProjects="DistributedTask.PipelineBillingModel2.PublicProjects";n.OldTaskGroupHub="WebAccess.DistributedTask.EnableOldTaskGroupHub";n.SwitchToQueueAdminHubExtension="WebAccess.DistributedTask.Queue.Extension";n.DistributedTaskKSB="Webaccess.DistributedTask.KSB";n.ServiceEndpointInlineSPNDescriptor="DistributedTask.TaskEditor.ServiceEndpointInlineSPNDescriptor";n.DistributedTaskTaskPreview="DistributedTask.TaskPreview";n.WebAccessVersionControlCherryPick="WebAccess.VersionControl.CherryPick";n.SourceControlCherryPick="SourceControl.CherryPick";n.SourceControlRevert="SourceControl.Revert";n.SourceControlGitPullRequestsConflicts="SourceControl.GitPullRequests.Conflicts";n.SourceControlGitPullRequestsRetarget="SourceControl.GitPullRequests.Retarget";n.SourceControlGitPullRequestsSelectiveAutoComplete="SourceControl.GitPullRequests.SelectiveAutoComplete";n.SourceControlGitPullRequestsEnforceAdHocRequiredReviewers="SourceControl.GitPullRequests.EnforceAdHocRequiredReviewers";n.SourceControlGitPullRequestsAutoCompleteLegacyNonBlockingBehavior="SourceControl.GitPullRequests.AutoCompleteLegacyNonBlockingBehavior";n.WebAccessVersionControlConflictsDisplay="WebAccess.VersionControl.ConflictsDisplay";n.WebAccessNotificationsUI="Notifications.Web.NotificationsUI";n.NotificationsWebTileStatistic="Notifications.Web.TileStatistic";n.UsersAndRoomsHubs="WebAccess.ContributedHeader.UsersAndRoomsHubs";n.NewAccountLandingPageFavoriteDiscovery="WebAccess.Account.NewLandingPage.FavoriteDiscovery";n.NewUserHub="VisualStudio.UserManagement.Web.UserHub";n.WebAccessMyExperiencesNewProjectCreation="WebAccess.MyExperiences.NewProjectCreation";n.WebAccessMyExperiencesOrgAccountSelector="WebAccess.MyExperiences.OrgAccountSelector";n.WebAccessSearchSearchThisOrganization="WebAccess.Search.SearchThisOrganization";n.WebAccessNewEmptyRepoPage="WebAccess.VersionControl.NewEmptyRepoPage";n.QuickStartXTPromotion2="TestManagement.QuickStart.XTPromotion2";n.MyWorkShowRecentActivity="WebAccess.MyWork.ShowRecentActivity";n.MyWorkShowMentioned="WebAccess.MyWork.ShowMentioned";n.NewProjectOVerviewPageBuildReleaseMetrics="WebAccess.Project.NewOverviewPage.BuildReleaseMetrics";n.NewProjectOverviewPageLikes="WebAccess.Project.NewOverviewPage.Likes";n.NewProjectOverviewUseIsAnyServiceInitializedData="WebAccess.Project.Verticals.OverviewPage.UseIsAnyServiceInitializedData";n.ProcessSettingsValidatorAllowCustomTeamField="Agile.ProcessSettingsValidator.AllowCustomTeamField";n.WebAccessWikiImmersive="WebAccess.Wiki.Immersive";n.WebAccessWikiPageViewStats="WebAccess.Wiki.PageViewStats";n.WebAccessWikiProductDocumentation="WebAccess.Wiki.ProductDocumentation";n.WebAccessWikiUnpublishCodeWiki="WebAccess.Wiki.UnpublishCodeWiki";n.WebAccessWikiHandleBrokenLinks="WebAccess.WikiHandleBrokenLinks";n.WebAccessWikiTemplateSupport="WebAccess.Wiki.TemplateSupport";n.WebAccessWikiRichCodeWikiEditing="WebAccess.Wiki.RichCodeWikiEditing";n.WebAccessWikiRenameWiki="WebAccess.Wiki.RenameWiki";n.WikiTemplateEditing="Wiki.EnableTemplateEditing";n.WebAccessWikiEnableFuzzySearch="WebAccess.Wiki.EnableFuzzySearch";n.WebAccessWikiDetailedFilterTelemetry="WebAccess.Wiki.DetailedFilterTelemetry";n.CleanupDeleteBoardsForDeletedBacklogLevels="Agile.Cleanup.DeleteBoardsForDeletedBacklogLevels";n.WebAccessProjectTags="WebAccess.Project.Tags";n.WebAccessProjectLanguages="WebAccess.Project.Languages";n.WebAccessAgileDoneColumnSortNullsLast="WebAccess.Agile.DoneColumnSortNullsLast";n.UserManagementProjectDialog="VisualStudio.UserManagement.ProjectInviteDialog";n.AnalyticsRichWorkFieldFiltering="WebAccess.Widgets.AnalyticsRichWorkFieldFiltering";n.PATPaginationAndFiltering="VisualStudio.Services.Identity.PATPaginationAndFiltering";n.UseNotificationPipelineForMentions="VisualStudio.Mentions.UseNotificationPipeline";n.AllowGroupMentions="VisualStudio.Mentions.AllowGroupMentions";n.MaterializeAadGroupsInMentions="VisualStudio.Mentions.MaterializeAadGroupsInMentions";n.UseStorageKeyInMentions="VisualStudio.Mentions.UseStorageKeyInMentions";n.HideTypeAndTitleInWorkItemMentions="VisualStudio.Mentions.HideTypeAndTitleInWorkItemMentions";n.GroupLicensingRule="VisualStudio.Services.GroupLicensingRule";n.AnonymousAccessFeatureName="VisualStudio.Services.Identity.AnonymousAccess";n.WebAccessDashboardsUseFpsNavigation="WebAccess.Dashboards.UseFpsForSwitchingDashboards.Enable";n.WebAccessDashboardsMonitorResourceUtilizationHeaders="WebAccess.Dashboards.MonitorResourceUtilizationHeaders";n.WebAccessDashboardsSuppressAutoRefreshOnHighResourceUtilization="WebAccess.Dashboards.SuppressAutoRefreshOnHighResourceUtilization";n.WebAccessDashboardsSecurityDialog="WebAccess.Dashboards.SecurityDialog";n.WebAccessAllowFpsWidgets="WebAccess.Widgets.AllowFpsWidgets";n.UseNewBranding="VisualStudio.Services.WebPlatform.UseNewBranding";n.NetPromoterSurveyAnonymousAccess="WebAccess.Survey.NetPromoter.AnonymousAccess";n.ATREnableIALAndVideo="WebAccess.TestManagement.ATREnableIALAndVideo";n.ATREnableVideoWithAudio="WebAccess.TestManagement.ATREnableVideoWithAudio";n.GitHubLinkification="WorkItemTracking.Server.GitHubLinkification";n.ShareVariableGroups="WebAccess.DistributedTask.ShareVariableGroups";n.ResourceAuthorizationforVGEndpoint="WebAccess.DistributedTask.ResourceAuthorization.VGEndpoint";n.WebAccessWorkItemTrackingFormRoosterEnable="WebAccess.WorkItemTracking.Form.Rooster.Enable";n.WebAccessWorkItemTrackingFormCommentServiceEditAndDeleteEnable="WorkItemTracking.Server.CommentService.EnableEditAndDelete.F4";n.WebAccessWorkItemTrackingEnableCommentReactions="WorkItemTracking.Server.CommentService.EnableCommentReactions";n.NwpMentionWorkItem="NWP.Mention.WorkItem";n.NwpMentionPR="NWP.Mention.PR";n.NwpMentionPeople="NWP.Mention.People";n.ResourceAuthorizationExperience="WebAccess.DistributedTask.ResourceAuthorizationExperience";n.QueryMyWorkByExcludingDoneStates="WorkItemTracking.Server.QueryMyWorkByExcludingDoneStates";n.AnalyticsDashboardShadowTesting="WebAccess.Dashboards.AnalyticsShadowTesting";n.AnalyticsGAExperiences="Analytics.GA.Experiences";n.PipelinesSimplifiedRetention="Pipelines.SimplifiedRetention";n.EnableCustomFollows="WebAccess.WorkItemTracking.EnableCustomFollows";n.PipelinesExtendedRetention="Pipelines.ExtendedRetention";n.WebAccessWorkItemTrackingDisableTagsMRU="WebAccess.WorkItemTracking.DisableTagsMRU";n.EnableBranchesMenuSecurityDialog="WebAccess.VersionControl.Branches.SecurityDialog";n.IsSingletonTestPointGridToolbarInstanceEnabled="WebAccess.TestManagement.SingletonTestPointGridToolbarInstance";n.EnableExtensionFilterMethodUsageTelemetry="WebAccess.WorkItemTracking.EnableExtensionFilterMethodUsageTelemetry";n.EnableAreaIterationPathSecurityDialog="WebAccess.Agile.Admin.SecurityDialog";n.EnableRepositoriesSecurityView="WebAccess.VersionControl.Repositories.SecurityView";n.EnableSecurityPanelForAreasViaSecurityManager="WebAccess.Admin.SecurityPanelForAllThroughSecurityManager.Enabled";n.RequiredCheckboxFixDisabled="WebAccess.Admin.RequiredCheckboxFixDisabled";n.AllowMVCDownloadAttachment="WorkItemTracking.Server.AllowMVCDownloadAttachment";n.EnableBlockingLastPusherVote="SourceControl.Policy.LastPusherCannotBeApprover";n.EnableSourceControlPolicyLastIterationApproved="SourceControl.Policy.LastIterationApproved";n.AllowWasEverForComputed="WebAccess.WorkItemTracking.AllowWasEverForComputed";n.DistributedTaskViewYamlHasMoved="DistributedTask.ViewYamlHasMoved";n.GitProtectedRepos="Git.ProtectedRepos";n.LegacyBuildRetentionPolicyJobEnabled="Build2.LegacyBuildRetentionPolicyJobEnabled";n.LegacyRetentionPolicyUIEnabled="Build2.LegacyRetentionPolicyUIEnabled";n.DisableWorkItemTypesSplittedLoading="WebAccess.WorkItemTracking.DisableWorkItemTypesSplittedLoading";n.UseTokenFiltering="WebAccess.WorkItemTracking.UseTokenFiltering";n.DisableLinkFiltersFix="WebAccess.Agile.DisableLinkFiltersFix"}(r=t.FeatureAvailabilityFlags||(t.FeatureAvailabilityFlags={})),function(n){n[n.Off=0]="Off";n[n.Advertising=1]="Advertising";n[n.Trial=2]="Trial";n[n.Licensed=3]="Licensed"}(u=t.FeatureMode||(t.FeatureMode={})),function(n){n.MruHubPath="/WebAccess/MRU/Hub";n.MruCookieName="StickyHub";n.EmitHubMruViewDataKey="TFS-EmitHubMru"}(f=t.HubsConstants||(t.HubsConstants={})),function(n){n.Admin="65AC9DB3-BB0A-42fe-B584-A690FB0D817B";n.AdvancedBacklogManagement="CEDD6BE8-B717-4a0a-8BFD-C4E9B4CAA071";n.AdvancedHomePage="509B6940-9948-47e6-A392-99E0CA873F65";n.AdvancedPortfolioBacklogManagement="F1026762-C08D-4de3-9C17-7587296F3CFE";n.AgileBoards="181DDF83-AFAF-4982-97D9-870AE96BB8D3";n.BacklogManagement="EC7545A3-E5DB-40E8-B0D0-F64DF7619BBA";n.Build="D8BE799B-2716-4c4b-A939-E97C46A28CAA";n.ChartAuthoring="F01E607A-F55C-4038-8F4B-7956712DEA22";n.ChartViewing="A510D786-5E4B-432F-8C31-F9D7B42CF17E";n.Code="2FF0A29B-5679-44f6-8FAD-F5968AE3E32E";n.Feedback="BB000720-4CF7-466A-BA47-1AB40B7A8DFB";n.PortfolioBacklogManagement="68DFF179-850A-4F20-A489-E6BD6E6A17EC";n.ReleaseManagementStakeholder="F2CB3207-42D8-42CA-81F3-43F9C5182AF7";n.ReleaseManagement="321CEBB8-72F6-40E6-836D-47580566CCF4";n.Standard="D91355E2-2A55-4CBE-9636-4D73F70FBA7C";n.TestManagementForBasicUsers="2BAEE8C9-BB36-4DE1-B991-3C1B6B5CB2B5";n.TestManagementForExpressSku="2DD84BB6-7821-4FDE-85BA-A6CC4AB1B7E9";n.TestManagement="8D00EEB7-D5AD-4141-B601-FBB500F264BA";n.ViewMyWorkItems="4F5D9D44-EC3F-4AF1-921A-DEE2147C54DC"}(e=t.LicenseFeatureIds||(t.LicenseFeatureIds={})),function(n){n.DismissNotificationRegistryPath="/notification/dismiss/"}(o=t.Messages||(t.Messages={})),function(n){n[n.Deleting=2]="Deleting";n[n.New=0]="New";n[n.WellFormed=1]="WellFormed";n[n.CreatePending=3]="CreatePending";n[n.All=-1]="All";n[n.Unchanged=-2]="Unchanged";n[n.Deleted=4]="Deleted"}(s=t.ProjectState||(t.ProjectState={})),function(n){n.EveryoneInTenant="EveryoneInTenant";n.TeamMembers="TeamMembers";n.Everyone="Everyone"}(h=t.ProjectVisibilityConstants||(t.ProjectVisibilityConstants={})),function(n){n.FeaturesCapabilityName="features";n.FeaturesEnabled="featuresEnabled";n.VersionControlCapabilityName="versioncontrol";n.VersionControlCapabilityAttributeName="sourceControlType";n.VersionControlGitEnabledAttributeName="gitEnabled";n.VersionControlTfvcEnabledAttributeName="tfvcEnabled";n.ProcessTemplateCapabilityName="processTemplate";n.ProcessTemplateCapabilityTemplateNameAttributeName="templateName";n.ProcessTemplateCapabilityTemplateTypeIdAttributeName="templateTypeId"}(c=t.TeamProjectCapabilitiesConstants||(t.TeamProjectCapabilitiesConstants={})),function(n){n.Project="Project";n.Team="Team";n.WebTeam="WebTeam";n.Repository="Repository"}(l=t.TfsSettingsScopeNames||(t.TfsSettingsScopeNames={}))});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/WITDataSource",["require","exports","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Service","VSS/Contributions/Services","VSS/Context","VSS/Performance"],function(n,t,i,r,u,f,e,o){function h(n,t,u){var h=r.TfsContext.getDefault().getActionUrl(n.action||"",n.controller,$.extend({area:"api",team:"",project:""},n.routeData)),f=s.WorkItemMVCToDPMVCTelemetryFeature+"."+n.action,e=o.getScenarioManager().startScenario(s.WorkItemArea,f);return e.addSplitTiming(f+s.ScenarioStart),new Promise(function(n,r){i.getMSJSON(h,t,function(t,i,r){e.addSplitTiming(f+s.ScenarioEnd);e.end();var o={data:u?JSON.parse(t):t,textStatus:i,requestHeaders:r};n(o)},r)})}function c(n,t){var e=r.TfsContext.getDefault().getActionUrl(n.action||"",n.controller,$.extend({area:"api",team:"",project:""},n.routeData)),u=s.WorkItemMVCToDPMVCTelemetryFeature+"."+n.action,f=o.getScenarioManager().startScenario(s.WorkItemArea,u);return f.addSplitTiming(u+s.ScenarioStart),new Promise(function(n,r){i.postMSJSON(e,t,function(t,i,r){f.addSplitTiming(u+s.ScenarioEnd);f.end();var e={data:t,textStatus:i,requestHeaders:r};n(e)},r)})}function l(n,t,u,f){var c=r.TfsContext.getDefault().getActionUrl(n.action||"",n.controller,$.extend({area:"api",team:"",project:""},n.routeData)),e=s.WorkItemMVCToDPMVCTelemetryFeature+"."+n.action,h=o.getScenarioManager().startScenario(s.WorkItemArea,e);h.addSplitTiming(e+s.ScenarioStart);i.postMSJSON(c,t,function(n,t,i){h.addSplitTiming(e+s.ScenarioEnd);h.end();var r={data:n,textStatus:t,requestHeaders:i};u(r)},f)}function a(n,t,i){return new Promise(function(r,h){var c=s.WorkItemMVCToDPDpTelemetryFeature+"."+n.action,l=o.getScenarioManager().startScenario(s.WorkItemArea,c);l.addSplitTiming(c+s.ScenarioStart);u.getService(f.WebPageDataService,e.getDefaultWebContext()).getDataAsync(i,null,t).then(function(n){if(l.addSplitTiming(c+s.ScenarioEnd),l.end(),n.errorMessage&&n.errorMessage.length>0)h(n.errorMessage);else{var t={data:n.data,versionStamp:n.versionStamp};r(t)}},h)})}Object.defineProperty(t,"__esModule",{value:!0});t.getDataFromDataProviderAsync=t.postMVCDataWithCallback=t.postMVCDataAsync=t.getMVCDataAsync=t.WITDataSourceTelemetryConstants=void 0;var s=function(){function n(){}return n.WorkItemMVCToDPMVCTelemetryFeature="WorkItemMVCToDP.MVC",n.WorkItemMVCToDPDpTelemetryFeature="WorkItemMVCToDP.DP",n.WorkItemArea="WIT",n.ScenarioStart="Start",n.ScenarioEnd="End",n}();t.WITDataSourceTelemetryConstants=s;t.getMVCDataAsync=h;t.postMVCDataAsync=c;t.postMVCDataWithCallback=l;t.getDataFromDataProviderAsync=a});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace",["require","exports","VSS/Context","VSS/ClientTrace/Services","VSS/ClientTrace/Contracts"],function(n,t,i,r,u){function f(n,t,f,e){var o=i.getPageContext(),s=window.navigator.userAgent,h=o&&o.diagnostics&&o.diagnostics.sessionId||"",c={userAgent:s,sessionId:h},l={area:n,component:t,feature:f,exceptionType:null,level:u.Level.Info,message:e,method:null,properties:c};r.trace(l)}Object.defineProperty(t,"__esModule",{value:!0});t.traceMessage=void 0;t.traceMessage=f});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/IndexedDBCacheProvider",["require","exports","VSS/Diag","VSS/Telemetry/Services","VSS/Utils/Core","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Context"],function(n,t,i,r,u,f,e,o){var h;Object.defineProperty(t,"__esModule",{value:!0});t.IndexedDBCacheProvider=void 0;var c=6,l=3e3,s="/Service/WorkItemTracking/IndexedDbVersion",a=function(){function n(){var n=this,t;this._disposed=!1;this._store=new h;this._witIndexedDBRegistryVersion=null;t=o.getPageContext().webAccessConfiguration.registryItems;t&&t.hasOwnProperty(s)&&(this._witIndexedDBRegistryVersion=Number(t[s]));this._openPromise=this._store.open("wit","metaDataCache").then(function(){n._openPromise=null}).then(function(){return n._scheduleEviction()}).catch(function(t){f.traceMessage(e.WITCommonConstants.WorkItemTrackingArea,"Caching",e.WITCommonConstants.WitCacheProviderInit,"Could not open IndexedDB: ".concat(t.message||t));n._store=null;n._disposed=!0})}return n.isSupported=function(){try{var n=o.getPageContext().webAccessConfiguration.registryItems,t=!1;return n&&n.hasOwnProperty(s)&&(t=!0),window.indexedDB!=null&&t}catch(i){return!1}},n.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._store&&(this._openPromise=null,this._store.close(),this._store=null),this._eviction&&(this._eviction.cancel(),this._eviction=null))},n.prototype.store=function(n,t,i){var r=this;return this._ensureStore(function(){return r._store.set(r._getKey(n,t),i)})},n.prototype.delete=function(n,t){var i=this;return this._ensureStore(function(){return i._store.delete(i._getKey(n,t))})},n.prototype.read=function(n,t){var i=this;return this._ensureStore(function(){return i._store.get(i._getKey(n,t))})},n.prototype.update=function(n,t,i){var r=this;return this._ensureStore(function(){return r._store.getAndSet(r._getKey(n,t),i)})},n.prototype._ensureStore=function(n){var t=this;return!this._store||this._disposed?Promise.resolve(null):this._openPromise?this._openPromise.then(function(){if(t._store)return n()}):n()},n.prototype._getKey=function(n,t){return"wit/".concat(this._witIndexedDBRegistryVersion,"/").concat(n,"/").concat(t)},n.prototype._scheduleEviction=function(){this._eviction=u.delay(this,l,this._evictEntries)},n.prototype._evictEntries=function(){var n=this,t=c*864e5,i=Date.now()-t;this._ensureStore(function(){return n._store.getAll().then(function(n){return Object.keys(n).filter(function(t){return n[t].cachedAt<i})}).then(function(t){return t.length>0&&r.publishEvent(new r.TelemetryEventData(e.WITCommonConstants.WorkItemTrackingArea,"Caching",{numberOfEvictedItems:t.length})),t.reduce(function(t,i){return t.then(function(){return n._store.delete(i)})},Promise.resolve(null))})})},n}();t.IndexedDBCacheProvider=a;h=function(){function n(){}return n.prototype.open=function(n,t){var u=this,f,r;return this._dbName=n,this._storeName=t,f=1,r=window.indexedDB.open(n,f),new Promise(function(n,u){r.onsuccess=function(){return n(r.result)};r.onerror=function(){return u(r.error)};r.onupgradeneeded=function(n){if(i.logInfo("Upgrading from ".concat(n.oldVersion," to ").concat(n.newVersion)),n.oldVersion<1)try{r.result.createObjectStore(t)}catch(u){}}}).then(function(){u._db=r.result;u._sendQuotaInformation()})},n.prototype.close=function(){var n=this;return new Promise(function(){n._db&&(n._db.close(),n._db=null)})},n.prototype.getAll=function(){var n=this;return new Promise(function(t,i){var r={};n._usingTransaction("readonly",function(n){var i=n.openCursor();i.onsuccess=function(n){var i=n.target.result;i?(r[i.key]=i.value,i.continue()):t(r)}}).then(null,i)})},n.prototype.get=function(n){return this._usingTransaction("readonly",function(t){return t.get(n)})},n.prototype.set=function(n,t){return this._usingTransaction("readwrite",function(i){return i.put(t,n)})},n.prototype.getAndSet=function(n,t){return this._usingTransaction("readwrite",function(i){var r=i.get(n);r.onsuccess=function(){var u=r.result,f=t(u);return i.put(f,n)}})},n.prototype.delete=function(n){return this._usingTransaction("readwrite",function(t){return t.delete(n)})},n.prototype._usingTransaction=function(n,t){var i=this;return new Promise(function(r,u){var f,e,o,s;if(!i._db){u(new Error("KeyValueStore: DB not ready"));return}f=i._db.transaction(i._storeName,n);e=null;f.oncomplete=function(){r(e)};o=function(n){n&&n.target&&n.target.error?u(n.target.error):u(n)};f.onabort=o;f.onerror=o;s=f.objectStore(i._storeName);e=t(s)||null;e&&(e.onerror=function(n){u(n)})}).then(function(n){return n?n.result:null})},n.prototype._sendQuotaInformation=function(){try{var n=navigator;n&&n.webkitTemporaryStorage&&n.webkitTemporaryStorage.queryUsageAndQuota&&n.webkitTemporaryStorage.queryUsageAndQuota(function(n,t){r.publishEvent(new r.TelemetryEventData(e.WITCommonConstants.WorkItemTrackingArea,"IndexedDB",{usedQuota:n,availableQuota:t}))})}catch(t){}},n}()});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/NullCacheProvider",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.NullCacheProvider=void 0;var i=function(){function n(){}return n.prototype.delete=function(){return Promise.resolve(null)},n.prototype.store=function(){return Promise.resolve(null)},n.prototype.update=function(){return Promise.resolve(null)},n.prototype.read=function(){return Promise.resolve(null)},n}();t.NullCacheProvider=i});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/Cache",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/IndexedDBCacheProvider","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/NullCacheProvider","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace"],function(n,t,i,r,u,f){function e(){return r.IndexedDBCacheProvider.isSupported()?new r.IndexedDBCacheProvider:(f.traceMessage(i.WITCommonConstants.WorkItemTrackingArea,"Caching",i.WITCommonConstants.WitCacheProviderInit,"Could not find supported WIT cache provider"),new u.NullCacheProvider)}Object.defineProperty(t,"__esModule",{value:!0});t.constructCacheProvider=void 0;t.constructCacheProvider=e});

var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)};define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/WorkItemIndexDBCacheManager",["require","exports","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","VSS/Telemetry/Services","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/Cache","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemIndexDBCacheManager=void 0;var e="WITData",o=function(){function n(){this._cacheProvider=u.constructCacheProvider()}return n.prototype.getDataFromCache=function(n,t,r,u){return r=this._transformKey(r),u||i.traceMessage(f.WITCommonConstants.WorkItemTrackingArea,"GetMetadataCachestamp",f.WITCommonConstants.WitCacheProviderInit,"Could not get cache stamp for '".concat(t,"'")),this._tryGetDataFromCache(n,t,r,u).catch(function(n){return i.traceMessage(f.WITCommonConstants.WorkItemTrackingArea,"TryGetDataFromCache",f.WITCommonConstants.WitCacheProviderInit,n),null}).then(function(n){return n?n:null})},n.prototype._tryGetDataFromCache=function(t,i,r,u){var f=this;return!this._cacheProvider||!u?n._resolvedPromise:this._cacheProvider.read(t,i).then(function(n){return!n||!n.data[r]?(f._recordTelemetry(t,i,r,u,"CacheMiss"),null):n.cachestamp!==u?(f._recordTelemetry(t,i,r,u,"ClearedCachedStaleData"),f._cacheProvider.delete(t,i).then(function(){return null})):(f._recordTelemetry(t,i,r,u,"CacheHit",null),n.data[r])})},n.prototype.cacheData=function(t,i,r,u,f){if(!this._cacheProvider||!f)return n._resolvedPromise;r=this._transformKey(r);var e=null;return this._cacheProvider.update(t,i,function(n){var t,i;return n=n&&n.cachestamp===f?__assign(__assign({},n),{data:__assign(__assign({},n.data),(i={},i[r]=u,i))}):{cachedAt:Date.now(),cachestamp:f,data:(t={},t[r]=u,t)},e=Object.keys(n.data),n}).then(function(){return e})},n.prototype.deleteData=function(n,t){return this._cacheProvider.delete(n,t)},n.prototype._transformKey=function(n){return n.toLowerCase()},n.prototype._recordTelemetry=function(n,t,i,u,f,o){r.publishEvent(new r.TelemetryEventData("WIT",e,{scopeId:n,type:t,key:i,stamp:u,message:f,cachedData:o}))},n._resolvedPromise=Promise.resolve(null),n}();t.WorkItemIndexDBCacheManager=o});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource",["require","exports","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/MVCToDataProviderDataSources/WITDataSource","VSS/Utils/String","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/WorkItemIndexDBCacheManager","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Performance"],function(n,t,i,r,u,f,e,o,s,h,c){var l,a,v;Object.defineProperty(t,"__esModule",{value:!0});t.WebAccessBoardsWITDataSource=t.WorkItemStoreLevelWITDataSource=void 0;l=function(){function n(){this._workItemCacheManager=new o.WorkItemIndexDBCacheManager}return n.prototype.getDataAsync=function(n,t,i){return(i===void 0&&(i=!1),!this.isDataProviderEnabled(n))?u.getMVCDataAsync(n,t,i):u.getDataFromDataProviderAsync(n,t,this.getDataProviderId(n))},n.prototype.getDataFromCacheAsync=function(n,t,i,r,f,e){var o=this;return(e===void 0&&(e=!1),!this.isDataProviderEnabled(n))?u.getMVCDataAsync(n,t,e):this.getDataProviderDataUsingIndexDB(n,t,i,r,f,e).then(function(n){var e=n.resolvedFromCache,t=n.data,u;return t&&!e?(u=t,o.updateIndexDBCache(u,i,r,f).then(function(){return u})):t})},n.prototype.getDataProviderDataUsingIndexDB=function(n,t,i,r,f,e){var l=this;e===void 0&&(e=!1);var h=t!=null?t.stamp:null,s=u.WITDataSourceTelemetryConstants.WorkItemMVCToDPMVCTelemetryFeature+".Cache."+n.action,o=c.getScenarioManager().startScenario(u.WITDataSourceTelemetryConstants.WorkItemArea,s);return o.addSplitTiming(s+u.WITDataSourceTelemetryConstants.ScenarioStart),o.addData({routeParams:n,requestProperties:t,scopeId:i,type:r,key:f,parseData:e}),this._workItemCacheManager.getDataFromCache(i,r,f,h).then(function(i){if(!i)return o.addData({cacheHit:!1}),u.getDataFromDataProviderAsync(n,t,l.getDataProviderId(n)).then(function(n){return o.addSplitTiming(s+u.WITDataSourceTelemetryConstants.ScenarioEnd),o.end(),{resolvedFromCache:!1,data:n}});o.addData({cacheHit:!0});o.addSplitTiming(s+u.WITDataSourceTelemetryConstants.ScenarioEnd);o.end();var r={data:i,versionStamp:h};return{resolvedFromCache:!0,data:r}})},n.prototype.updateIndexDBCache=function(n,t,i,r){if(n&&n.versionStamp&&n.versionStamp.length>0)return this._workItemCacheManager.cacheData(t,i,r,n.data,n.versionStamp).catch(function(n){return s.traceMessage(h.WITCommonConstants.WorkItemTrackingArea,"CacheData",h.WITCommonConstants.WitCacheProviderInit,n),null})},n.prototype.postDataAsync=function(n,t){return this.isDataProviderEnabled(n)?u.getDataFromDataProviderAsync(n,t,this.getDataProviderId(n)):u.postMVCDataAsync(n,t)},n.prototype.getDataProviderId=function(n){if(n&&n.action&&this.MVCActionToDataproviderIdMapping[n.action])return this.MVCActionToDataproviderIdMapping[n.action];var t=c.getScenarioManager().startScenario(u.WITDataSourceTelemetryConstants.WorkItemArea,"MVCActionToDpIdMappingNotFoundError");t.addData({routeParams:n});t.end();throw new Error(f.format(e.MVCActionToDpIdMappingNotFoundError,n.action));},n}();a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.MVCActionToDataproviderIdMapping={fields:"ms.vss-work-web.fields-data-provider",allowedValues:"ms.vss-work-web.fields-allowed-values-provider",ResourceLinks:"ms.vss-work-web.resource-links-data-provider",workItemTypeExtensions:"ms.vss-work-web.work-item-type-extensions-data-provider",updateWorkItems:"ms.vss-work-web.update-work-items-data-provider",constantSets:"ms.vss-work-web.constant-sets-data-provider",getMetadataCacheStamps:"ms.vss-work-web.work-item-cache-data-provider",linkTypes:"ms.vss-work-web.work-item-link-types-data-provider",teamProjects:"ms.vss-work-web.work-item-team-projects-data-provider",workItemTypes:"ms.vss-work-web.work-item-types-data-provider",pageWorkItems:"ms.vss-work-web.page-work-items-data-provider",pageWorkItemsByIdRev:"ms.vss-work-web.page-work-items-by-id-rev-data-provider",AdHocQueries:"ms.vss-work-web.ad-hoc-queries-data-provider",query:"ms.vss-work-web.work-item-query-data-provider",updateAdHocQuery:"ms.vss-work-web.update-ad-hoc-query-data-provider",updateColumnOptions:"ms.vss-work-web.update-column-options-data-provider",search:"ms.vss-work-web.search-data-provider",queryFavorites:"ms.vss-work-web.query-favorites-data-provider",teamSettings:"ms.vss-work-web.team-settings-data-provider",workitems:"ms.vss-work-web.work-items-with-history-data-provider",workitemsnohistory:"ms.vss-work-web.work-items-no-history-data-provider",sendMail:"ms.vss-work-web.send-mail-data-provider",workitemcolor:"ms.vss-work-web.work-item-color-data-provider"},t.MVCActionToFeatureFlagMapping={sendMail:r.FeatureAvailabilityFlags.DisableSendMailDataProvider,workitemcolor:r.FeatureAvailabilityFlags.DisableWorkItemColorDataProvider},t}return __extends(t,n),t.prototype.isDataProviderEnabled=function(n){return n&&n.action&&this.MVCActionToFeatureFlagMapping[n.action]?!i.FeatureAvailabilityService.isFeatureEnabled(this.MVCActionToFeatureFlagMapping[n.action]):!i.FeatureAvailabilityService.isFeatureEnabled(r.FeatureAvailabilityFlags.DisableWorkItemStoreDataProviders)},t.prototype.useCallback=function(n){return!this.isDataProviderEnabled(n)},t.prototype.postDataWithCallback=function(n,t,i,r){this.useCallback(n)?u.postMVCDataWithCallback(n,t,i,r):this.postDataAsync(n,t).then(function(n){return i(n)},r)},t}(l);t.WorkItemStoreLevelWITDataSource=a;v=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.MVCActionToDataproviderIdMapping={getProcessSettings:"ms.vss-work-web.process-settings-data-provider",getProcessSettingsProperty:"ms.vss-work-web.process-settings-property-data-provider",GetProcessFieldUsages:"ms.vss-work-web.process-field-usage-data-provider",MigrateProjectsProcess:"ms.vss-work-web.migrate-projects-data-provider",GetJobProgress:"ms.vss-work-web.migrate-job-status-data-provider"},t}return __extends(t,n),t.prototype.isDataProviderEnabled=function(){return!i.FeatureAvailabilityService.isFeatureEnabled(r.FeatureAvailabilityFlags.DisableWorkItemStoreDataProviders)},t}(l);t.WebAccessBoardsWITDataSource=v});

define("Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon",["require","exports","VSS/VSS","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","Presentation/Scripts/TFS/TFS.Service","VSS/Diag","VSS/Events/Services","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource"],function(n,t,i,r,u,f,e,o,s,h,c){var v,w,l,a,b,y,p;Object.defineProperty(t,"__esModule",{value:!0});t.TeamService=t.ProjectProcessConfigurationService=t.BugsBehavior=t.ProjectProcessConfiguration=t.BacklogCategoryConfiguration=t.INodeStructureType=t.StateType=void 0,function(n){n[n.Proposed=1]="Proposed";n[n.InProgress=2]="InProgress";n[n.Complete=3]="Complete";n[n.Requested=4]="Requested";n[n.Received=5]="Received";n[n.Reviewed=6]="Reviewed";n[n.Declined=7]="Declined";n[n.Resolved=8]="Resolved"}(v=t.StateType||(t.StateType={})),function(n){n[n.Project=0]="Project";n[n.Area=1]="Area";n[n.Iteration=2]="Iteration"}(w=t.INodeStructureType||(t.INodeStructureType={}));l=function(){function n(n){this.plural=n.plural;this.singular=n.singular;this.category=n.category;this.parentCategory=n.parentCategory;this.workItemCountLimit=n.workItemCountLimit;this.states=n.states}return n.prototype.containsWorkItemType=function(n){return e.contains(this.workItemTypeNames,n,f.localeIgnoreCaseComparer)},n}();t.BacklogCategoryConfiguration=l;a=function(){function n(n){var t=this,i;this.taskBacklog=new l(n.taskBacklog);this.requirementBacklog=new l(n.requirementBacklog);this.portfolioBacklogs=$.map(n.portfolioBacklogs,function(n){return new l(n)});this.allBacklogs=this.portfolioBacklogs.concat([this.requirementBacklog,this.taskBacklog]);this._workItemTypeCategoryMap={};this._backlogCategoryNameMap={};this._workItemCategoryStateNameTypeMap={};this.workItemCategories=n.workItemCategories;i=null;$.each(this.allBacklogs,function(r,u){i!==null&&(i.child=u,u.parent=i);i=u;u.workItemTypeNames=n.workItemCategories[u.category];u.isRequirementCategory=u===t.requirementBacklog;u.defaultWorkItemType=n.defaultWorkItemTypes[u.category];$.each(u.workItemTypeNames||[],function(n,i){t._workItemTypeCategoryMap[i]=u.category});t._backlogCategoryNameMap[u.category]=u});this.bugWorkItems=n.bugWorkItems;this.bugWorkItems&&(this.bugWorkItems.workItemTypeNames=n.workItemCategories[this.bugWorkItems.category],$.each(this.bugWorkItems.workItemTypeNames,function(n,i){t._workItemTypeCategoryMap[i]||(t._workItemTypeCategoryMap[i]=t.bugWorkItems.category)}));this.typeFields=n.typeFields;this.weekends=n.weekends;n.workItemColors&&(this.workItemColors=$.map(n.workItemColors,function(n){return{primaryColor:n.primary,secondaryColor:n.secondary,workItemTypeName:n.name}}))}return n.prototype.getCategoryForWorkItemType=function(n){return this._workItemTypeCategoryMap[n]},n.prototype.getCategoryForCategoryRefName=function(n){return this._backlogCategoryNameMap[n]},n.prototype.getTypeField=function(n){return e.first(this.typeFields,function(t){return t.type===n})},n.prototype.isRequirementCategory=function(n){return this.requirementBacklog&&this.requirementBacklog.containsWorkItemType(n)},n.prototype.isTaskCategory=function(n){return this.taskBacklog&&this.taskBacklog.containsWorkItemType(n)},n.prototype.isBugCategory=function(n){return this.bugWorkItems&&this.bugWorkItems.workItemTypeNames&&e.contains(this.bugWorkItems.workItemTypeNames,n,f.localeIgnoreCaseComparer)},n.StateType=v,n.FieldType={Effort:1,Order:2,RemainingWork:3,Team:4,Activity:5,Requestor:6,ApplicationType:7,ApplicationStartInformation:8,ApplicationLaunchInstructions:9,FeedbackNotes:10,ClosedDate:11},n}();t.ProjectProcessConfiguration=a,function(n){n[n.Off=0]="Off";n[n.AsRequirements=1]="AsRequirements";n[n.AsTasks=2]="AsTasks"}(b=t.BugsBehavior||(t.BugsBehavior={}));y=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.beginGetProcessSettings=function(n,t,r){var u=this,o=function(t){u._processSettings||(u._processSettings=new a(t));n.apply(u,[u._processSettings])},e,f;this._checkDataIsland();e=this.getTfsContext().contextData.project.id;f={area:"api",project:e};r&&(f=$.extend(r,f));i.queueRequest(this,this,"_processSettingsInternal",o,t,function(n,t){function r(t){i._fireProcessSettingsLoaded(t);n.apply(this,arguments)}var i=u,e={controller:"processConfiguration",action:"getProcessSettings",routeData:f};(new c.WebAccessBoardsWITDataSource).getDataAsync(e,null,null).then(function(n){r(n.data)},t)})},t.prototype._checkDataIsland=function(){var n;this._checkedForDataIsland||(this._checkedForDataIsland=!0,n=$(".process-settings-data"),n.length>0&&(this._processSettingsInternal=u.parseMSJSON(n.eq(0).html(),!1),n.eq(0).empty(),this._fireProcessSettingsLoaded(this._processSettingsInternal)))},t.prototype.getProcessSettings=function(){return this._checkDataIsland(),!this._processSettings&&this._processSettingsInternal&&(this._processSettings=new a(this._processSettingsInternal)),this._processSettings},t.prototype._fireProcessSettingsLoaded=function(n){h.getService().fire(t.PROCESS_SETTINGS_LOADED_EVENT,n)},t.PROCESS_SETTINGS_LOADED_EVENT="ProcessConfigService.SettingsLoaded",t}(o.TfsService);t.ProjectProcessConfigurationService=y;p=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._teamMembers={},t}return __extends(t,n),t.prototype.beginGetTeamMembers=function(n,t,u,f,e){var h,o=this.getTfsContext();n||(n=o.currentTeam.identity.id);u=u||100;t=Boolean(t);h=n+"|"+u+"|"+t;i.queueRequest(this,this._teamMembers,h,f,e,function(i,f){var e=o.getActionUrl("members","teams",{area:"api"});r.getMSJSON(e,{teamId:n,maxResults:u,includeGroups:t},function(n){i(n.members)},f)})},t}(o.TfsService);t.TeamService=p});

define("Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService",["require","exports","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","VSS/Contributions/Services","VSS/Diag","VSS/Service","VSS/Utils/String"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.TeamAwarenessService=t.TeamSettingsContributionId=void 0;t.TeamSettingsContributionId="ms.vss-work-web.team-wit-settings-data-provider";var o=function(n){function o(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._teamSettingsById={},t}return __extends(o,n),o.contextSupports=function(n){return n&&n.currentTeam&&!!n.currentTeam.identity.id},o.prototype.beginGetTeamMembers=function(n,t,r){var e=this;return u.Debug.assertParamIsBool(t,"includeGroups"),u.Debug.assertParamIsNumber(r,"maxResults"),new Promise(function(u,o){return f.getService(i.TeamService,e.getWebContext()).beginGetTeamMembers(n,t,r,u,o)})},o.prototype.beginGetTeamSettings=function(n){var s=this,o=f.getService(r.WebPageDataService,this.getWebContext()),i=o.getPageData(t.TeamSettingsContributionId);return i&&e.equals(i.teamId,n,!0)?Promise.resolve(i):o.getDataAsync(t.TeamSettingsContributionId,null,{teamId:n}).then(function(t){return u.Debug.assert(e.equals(t&&t.teamId,n,!0),"Retrieved teamSettings teamId does not match what was requested"),s._teamSettingsById[t.teamId]=t,t})},o.prototype.getTeamSettings=function(n){var s=f.getService(r.WebPageDataService,this.getWebContext()),i=s.getPageData(t.TeamSettingsContributionId),o;if(i&&e.equals(i.teamId,n,!0))return this._teamSettingsById[i.teamId]=i,i;if(this._teamSettingsById[n])return this._teamSettingsById[n];o="Team settings for team ".concat(n," not found in JSON island");u.Debug.fail(o);throw new Error(o);},o}(f.VssService);t.TeamAwarenessService=o});

define("WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking",["require","exports"],function(require,exports){var e=exports;e.SucessfullySavedNWisButFailedToSave="Successfully saved {0} work item(s), but failed to save {1} work item(s).";e.StateTransitionGraphViewAllChangesTitle="View all state transitions";e.MoveWorkItemDiscussionLabel="Add a reason for moving the work item";e.InvalidWorkItemUrl="WorkItem url not valid: {0}";e.CustomRollupTotalOptionSubtitle="A total number of the linked descendants will be added at the parent level. Choose between sum of any numeric field or a simple count of items.";e.LinksControlTestResultText="Test Result";e.CommandBarTitle_CopyWorkItems="(Ctrl+C)";e.DirectLinksFlattenedMessage="Your direct links query results will be flattened to flat list format due to possible duplicate work items.";e.UnableToFindQueryDefinition="Unable to find query definition: {0}.";e.DeleteSingleAttachmentDialogConfirmationText="Are you sure you want to delete {0}?";e.TextFilterResultCountMessage="Filtering {0} out of {1} items. {2}";e.FormGroupCollapseAriaLabel="{0} section.";e.MultiFieldRemoveFieldTooltip="Remove this field";e.CreateCopyOfWorkItemProject="Project";e.ConfirmWorkItemRefresh="You have unsaved changes to this work item which will be lost. Are you sure you want to refresh this work item?";e.WorkItemLogControlLinksHeader="Links";e.LinkTopologyTreeReverseImageAltText="This is a directional link that creates a one-to-many relationship. Once this link is created, no more links of this type can be added to the linked items.";e.DefaultingCurrentIterationTeam="Use of the \u003ca href=\"https://go.microsoft.com/fwlink/?linkid=865408\"\u003e@CurrentIteration macro\u003c/a\u003e requires explicit specification of a team. You may want to update your query and save it with a team of your choice.";e.CustomFollowDialogAssignedToCheckbox="Assigned To Changed";e.WorkItemMethodSelectionText="Select one of the following methods to find available work items:";e.FilterValidWorkItems="Valid work items";e.ReactionTypeEmojiConfoundedFace="Upset";e.WorkItemDeleteError="Failed to delete work item: {0}. Error Details: {1}";e.ExportToCSVError="Not all work item results were exported.";e.ImporCsvNoTerminatingDoubleQuotesError="Non-terminating double-quotes at line {0}, column {1}.";e.WorkItemTemplateDoesNotExist="VS403203: No template was applied because the indicated template does not exist.";e.LinkTopologyDirectedNetworkImageAltText="This is a directional link that can be created between any set of work items.";e.AttachmentsOversizedDialogTitle="Attachment(s) over size limit";e.WorkItemDetailsRoleTitle="Work item details";e.LinkWorkItemTypeNotValid="Could not find the specified work item type.";e.EmptyTeamFavoriteGroupTextLink="Browse shared queries";e.BeginGetWorkItemArgumentNull="Cannot load work items. Array null or undefined.";e.HistoryControlSingleLinkAdornmentText="{0} was added";e.WorkItemDiscussionAdornmentOverLimitNumberDisplay="{0}+ comments";e.WorkItemLogControlAttachmentAdded="added an attachment";e.FieldCannotBeEdited="{0}, this field cannot be edited";e.SaveHotkeyWithControl="(Ctrl+S)";e.Backlog="Backlog";e.CreateCopyCopiedWithAllAttachmentsFrom="Copied with all attachments from {0}";e.SaveHotkeyWithCommand="(+S)";e.LinkTopologyDependencyImageAltText="This is a directional link that can be created between any set of work items, but can not create closed loops.";e.WorkItemArtifactLastUpdatedByLabel="Updated by {0} on {1}";e.HistoryControlAgoLastThirtyDays="Last thirty days";e.MoveWorkItemPermissionError="You have insufficient permissions to move a work item to another project.";e.ChangeTypeDiscussionLabel="Add a reason for changing the type";e.DateTimePicker_AMPMDownAriaLabel="Switch AM PM";e.WorkItemLogControlDeletedComment="deleted a comment";e.Edited="Edited";e.HistoryControlAssignmentAdornmentText="Assigned to {0}";e.FieldStatusInvalidUnknownError="There is an unknown problem with field \u0027{0}\u0027.";e.ColumnOptionsAllWorkItemTypes="All Work Item Types";e.AttachmentUploadSuccessNotification="Attachment(s) uploaded successfully.";e.WorkItemPaneFilter_OffAriaLabel="Work item panel off";e.BulkEditTagsAdd="Add";e.AddReaction="Add {0} reaction";e.WorkItemTemplates_CaptureTemplateMenuItem_Text="Capture...";e.FieldAlreadyAdded="This field has already been added";e.MVCActionToDpIdMappingNotFoundError="There is no dataprovider id mapped for the passed action {0}";e.ChildTestSuites=" Child Test Suites";e.RemoveColumn="Remove this column";e.FilterNoTypes="No types available";e.HistoryControlAssignmentDefaultAdornmentText="Assigned to edited";e.Picker_FilterWatermark="Search";e.WorkItemArtifactLinkGitHubCannotRender="GitHub link not found or no permission to access it.";e.NewFeatureViewBoardLinkTitle="View your board";e.DeleteWorkItemDialogConfirmationTextWithCleanUpScheduled="You can restore deleted work items from the Recycle Bin until they are permanently deleted based on auto-delete settings (enabled). {0}.";e.DiscardChanges="Discard changes";e.AttachmentAsLinkType="Attachment";e.FailedToSaveNWorkItems="Failed to save the following {0} work item(s).";e.AttachmentUploadFailDialogTitle="Attachment(s) failed to upload";e.TestWorkItemDeleteButtonText="Permanently delete";e.UnsavedWorkItemsQuery="Unsaved work items";e.DestroyWorkItemDialogConfirmationText="Are you sure you want to permanently delete the selected work item(s)? Permanently deleted work item(s) cannot be restored.";e.WorkItemTemplateDialog_Description="Description";e.DownloadAttachments="Download attachments";e.CustomFollowDialogIterationPathCheckbox="Iteration Changed";e.SavingWorkItems="Saving work items";e.FavoriteQueryFailed="Unable to favorite query \"{0}\"";e.PreviewAttachment="Preview attachment";e.Searching="Searching...";e.Updated="updated";e.KeyboardShortcutDescription_ReturnToQuery="Return to query";e.Wiql_MacroMe="Me";e.RemoteLinkDialogAddressTitleWatermark="Enter remote work item url";e.LinksControlTestText="Test";e.QueryReferencesFieldThatDoesNotExist="TF51005: The query references a field that does not exist.";e.RenameQuery="Rename";e.WorkItemEditorWindowTitle="{0}: {1}";e.BulkEditTagsRemove="Remove";e.FilterByTypes="Types";e.SendWorkItemsInEmailDialogTitle="Send work items in email";e.KeyboardShortcutDescription_Save="Save changes";e.AggregationFieldLabel="Select a field.";e.LinkValidationFailed="Link validation failed";e.Folder="Folder";e.DirectLinksQuery="Direct Links Query";e.LinkToolTypeRemoteWork="Remote Work";e.TriagePreviousWorkItemToolTip="Previous work item in the \"{0}\" query (Alt + P)";e.TagCountAriaLabel="{0} count: {1}";e.LinksControlChangesetText="Changeset";e.TagAriaLabel="Item {0} of {1}. Text {2}.";e.LinkToExistingDialogLinkTypeTitle="Link type";e.QueryHierarchyItemAriaLabel="{0}, {1}, Level {2}, ";e.QueryEditorTargetFilterGroupingText="Filters for linked work items";e.SaveResultsToolTip="Save results";e.NewQuery="New query";e.WorkItemTemplates_ContextMenuItem_Text="Templates";e.EmptyTeamFavoriteGroupTextSuffix="to add the ones important for your team.";e.Delete="Delete";e.WorkItemTemplateDialog_RemoveUnmodified="Remove unmodified fields";e.AddAttachmentFileNotFoundError="TF20004: Could not find the specified file \"{0}\". Check the file name and try again.";e.MobileDiscussionUnsaved="Remember to send your comment";e.LinksControlTagsText="Tag";e.Backlog_DisplayName="{0} backlog";e.ConfirmWorkItemDiscardNew="You have unsaved changes to this work item which will be lost. Are you sure you want to discard this work item?";e.HyperLinkText="Hyperlink";e.QueryEditorQueryTypeTree="Tree of work items";e.QueryEditorQueryTypeLink="Work items and direct links";e.LinksControlGitHubIssueText="GitHub Issue";e.BulkEdit_ApplyTemplateButton="Apply";e.WorkItemTemplateDialog_CopyLinkDisabledMessage="Save the template in order to enable Copy link.";e.AssignedToPrefix="Assigned to";e.WorkItemUnsavedDiscussionAriaLabel="Discussion: Remember to send your comment. Click here to view discussion.";e.QueryResultsGridLinkQueryStatusTextFormat="{0} work items ({1} top level, {2} linked and {3} selected)";e.NewLinkedWorkItemTitle="Title";e.AttachmentsNotSupported="Invalid link type, Attachments not supported";e.WorkItemFinderWorkItemTypes="Work Item Types";e.WorkItemLogControlOtherLinkAdded="added other link";e.AddARollupColumn="Add a rollup column";e.InvalidTestWorkItem="Invalid test work item type";e.ImporCsvEmptyDatasetError="Empty dataset found.";e.CustomFollowWorkItem="Notification Settings";e.AddTagText="Add tag";e.VisualizeYourWorkText="Kanban boards provide an interactive, customizable visualization of your backlog to help monitor the flow of your work items from idea to completion.";e.Cancel="Cancel";e.KeyboardShortcutGroup_WorkItemForm="Work Item Form";e.GitHubInputNotValid="The URL is not a valid {0} URL.";e.WorkItems="Work items";e.WorkItemChartsTreeQueryDisallowedMessage="You can create a chart for a flat list query, but not for a tree query or a direct links query.";e.ReasonField="Reason Field";e.KeyboardShortcutDescription_Previous_Item="Previous item";e.AddAttachment="Add attachment";e.ReasonLabel="Reason";e.QueryEditor="Query Editor";e.NameLabel="Name";e.GitHubZeroDataCommitLinkTypeText="commit";e.LinkText="Link";e.QueryEditorQueryModeLabel="Filter options";e.ImportFromCsv="Import from CSV";e.HistoryControlOldValueText="Old Value";e.MoveWorkItemDestinationLabel="Destination project";e.SearchResults="Search results";e.AggregationModeLabel="Select an aggregation mode.";e.DeleteWorkItemDialogTitle="Delete work item(s)";e.QueryFolder="Query folder";e.EmptyTeamFavoriteGroupTextPrefix="No team favorites yet!";e.FieldStatusInvalidValueInOtherFieldError="The field \u0027{0}\u0027 is unsupported because of a value in another field.";e.ColumnOptionsAllProjects="All Projects";e.WorkItemIDListString="Select items to add to the work item list";e.Import="Import";e.ConfirmDiscardCommentDraft="Are you sure you want to discard this draft?";e.QueryManageDialog_Validator_FolderSelfReferential="Folder cannot refer to self as a parent or ancestor.";e.ErrorSendingEmail="Error sending email";e.ColumnOptionsSorting="Sorting";e.ChangeTypeMessage="Learn more about changing the type";e.ConfirmDeleteComment="Are you sure you want to delete this comment?";e.NoData="[No data]";e.WorkItemPublicVisibilityLearnMoreLink="https://aka.ms/public-project-learn-more";e.LinksControlGitHubCommitText="GitHub Commit";e.LinksControlPullRequestText="Pull Request";e.DeleteAttachment="Delete attachment";e.LinkToExistingDialogFormNotFound="Form not found for link type {0}.";e.RollupTotalNumberOptionsHeadingText="Total number";e.LastVisitedGroupName="Continue where you left off";e.LinkDialog_SameTypeHierarchyError_LearnMore="Learn more";e.MoveWorkItemPathInvalid="The selected value does not exist.";e.CopyWorkItemToPublicProjectMessage="You are copying this work item into a public project.";e.SaveAll="Save all";e.WorkItemControlReadOnly="{0} is read-only.";e.WorkItemLogControlLinkAdded="added {0}link";e.QueriesView_FavoritesPivotName="Favorites";e.SaveQueryAs="Save as...";e.WorkItemCountDisplayStringPlural="{0} Work Items";e.FlatQuery="Flat Query";e.FilterByAreaPath="Area";e.StoryboardLinkInvalid="TF400063: You have entered an invalid storyboard link: {0}. You must provide a valid UNC path to a file or URL to a storyboard stored on a shared resource. Correct the link and try again.";e.WorkItemFinderQuery="Query";e.ProjectNameRequired="Project must be specified.";e.Update="Update";e.WorkItemFinderTypes="and type";e.DeleteAttachmentsDialogConfirmationText="Are you sure you want to delete the following?";e.ReactionTypeEmojiPartyPopper="Hooray";e.FieldStatusInvalidEmptyError="Field \u0027{0}\u0027 cannot be empty.";e.HistoryControlAgoLastSevenDays="Last seven days";e.DateTimePicker_ClearDate="Clear date and time";e.DestroyWorkItemsTooltip="Permanently delete selected work item(s)";e.DateTimePicker_MinuteDownAriaLabel="Decrease minute";e.CreateCopyCopiedWithAllLinksFrom="Copied with all links from {0}";e.LinkToolTypeRequirements="Requirements";e.CorrectWisAndTryAgain="Please correct the unsaved work item(s) and try again.";e.ColumnOptionsPanelKeyboardShortCutWithControl="Ctrl+Up or Ctrl+Down.";e.ImporCsvExcessFieldValuesError="Excess field value(s) at line {0}, column(s) {1}.";e.ColumnOptionsPanelKeyboardShortCutWithCommand="+Up or +Down.";e.ContributionBlockingWITSave="Saving the work item is blocked by the extension {0}.";e.EditTagsAriaLabel="Edit {0}";e.LinkingDialog_LoadingEnd="Link form loaded";e.NoQueryFolderChildren="No sub-folders.";e.WorkItemCountDisplayStringSingular="{0} Work Item";e.ImporCsvNonIntegerWorkItemIdError="{0} value should be numberic. Please correct the value at line {1}, column {2}.";e.LinkDialog_LinkMultipleWorkItemsAsParentsError="A work item can only have one link of this type. Remove the existing link and try again.";e.ErrorEmailEmptyQueryResults="TF242408: The query you selected does not return any work items. Select a query that contains at least one work item, and try again.";e.QueryFolderPicker_ErrorMessage_FolderRequired="Folder selection cannot be empty.";e.StateField="State Field";e.RollupColumn_TotalBy_WorkItemType="Count of {0}";e.AdditionalDisplayFieldFocusZoneLabel="{0}, press right arrow to choose a different field";e.WorkItemFinderSelectQueryText="\u003cSelect a Query\u003e";e.StateLabel="Stat\u0026e";e.WorkItemTemplates_NoTemplatesDisabledMenuItemTitle="Capture to add a template";e.ConfirmWorkItemRevert="You have unsaved changes to this work item which will be lost. Are you sure you want to revert your changes to the work item?";e.DeleteAttachmentsDialogTitle="Delete attachment(s)";e.MaxQuerySearchResultMessage="Showing the first {0} queries that match: {1}";e.NewChartText="New chart";e.CommentEditedFormat="commented {0} (edited)";e.LinksControlRelatedText="Related";e.WorkItemFinderDialogTitle="Choose Linked Work Items";e.NewMenuTitle="New";e.MobileDiscussionViewNumberOfCommentsSingle="View 1 comment";e.RollupColumn_TotalBy_FieldName="Sum of {0}";e.ReactionTypeEmojiSmilingFace="Laugh";e.WorkItemBulkSaveFailed="One or more work items could not be saved. You might have lost the connection to your server. Refresh your browser, and then try again. If the problem persists, you might not have the area path permissions required to edit work items.";e.EditComments="Edit comments";e.WorkItemsChartsTabTitle="Charts";e.KeyboardShortcutDescription_OpenBacklog="Open backlog";e.WorkItemFinderFindButtonText="Find";e.Queries="Queries";e.EmailQueryResult="Send query as an email";e.WorkItemTemplateDialog_Name="Name";e.ImportWorkItems="Import Work Items";e.ShowMoreWorkItemsMessage="Showing the first {0} items. {1}";e.DestroyWorkItemDialogTitle="Permanently delete work item(s)";e.HistoryControlAttachmentDeletedText="Attachment Deleted";e.LinkToExistingItemToolTip="Link to an existing item";e.ExportingCsvProgressButtonText="Exporting...";e.LinkToolTypeGitHub="GitHub";e.RefreshTooltip="Refresh";e.DevelopmentControlWorkHasntStartedMessage="Development hasn\u0027t started on this item.";e.SaveAndCloseWorkItemText="Save \u0026 Close";e.CreateCopyOfWorkItem_CopiedWorkItemSuffix=" - Copy";e.WorkItemLinkTypeDoesNotExists="Work item link type \u0027{0}\u0027 does not exist.";e.KeyboardShortcutDescription_LeftTab="Move to left tab";e.LinkDialog_ExistingWorkItem_SameTypeHierarchyError="The {1} you have selected is of the same type with work item {0}. Please change the link type or select a {1} work item that is not on the same hierarchy level to avoid a limited experience. ";e.FieldStatusInvalidPathError="The area or iteration provided for field \u0027{0}\u0027 could not be found.";e.LinksControlCommentColumnText="Comment";e.FullscreenEnterIconText="Enter full screen mode (Z)";e.DateTimePicker_HourUpAriaLabel="Increase hour";e.FilterByAssignedTo="Assigned to";e.AttachmentLoading="Loading attachment...";e.IdColonText=" ID: ";e.FiltersForLinkedWorkItems="Filters for linked work items";e.ProjectDoesNotExist="Project \u0027{0}\u0027 does not exist.";e.QueryEditorTreeTypeLabel="Type of tree";e.CommentedJustNow="just now";e.ColumnOptionsInvalidWidth="Column width must be a value between 0 and 65536.";e.DevelopmentControlCreateBranchTitle="Create a new branch";e.AddParentText1="Add an existing work item";e.AddParentText2=" as a parent";e.WorkItemTemplateDialog_SavingAnnouncerEnd="Template saved";e.ColumnOptionsAtLeastOneColumnIsRequired="At least one column is required";e.TagEdit_Separator="Suggested Tags";e.WorkItemsHubComments="Comments";e.LinkingDialog_LoadingStart="Loading link form";e.HistoryControlCommentDeletedAdornmentText="Comment deleted";e.FilterByKeyword="Filter by keyword";e.HistoryControlViaTextEnd=")";e.CustomizeWorkItemsNewFeatureTitle="Customize your work items";e.ProgressBarLoading="Loading";e.RemoteLinkStatusSuccess="Success";e.DialogClose="Close";e.CopyToClipboard="Copy to clipboard";e.QueryBreadcrumbAriaLabel="{0} breadcrumb item picker";e.NameLabel_Watermark="Enter name";e.ShowMoreComments="Show more";e.ErrorExpectingNumericValue="Expecting numeric value.";e.WorkItemBulkDestroyError="We were unable to destroy some work item(s). They are not present in the recycle bin or access is denied. Please refresh to see the failed items.";e.WorkItemPaneFilter_BottomAriaLabel="Work item panel bottom";e.GoToDiscussionShortcutWithControl="(Ctrl+Shift+D)";e.GoToDiscussionShortcutWithCommand="(+Shift+D)";e.ErrorDateTimeValueOutOfRange="The DateTime value is out of range.";e.WorkItemFinderResultStatusString="{0} work item(s) found.";e.QueriesHub_NewFolderCreated_MessageText="New folder \"{0}\" has been created.";e.ImportCSVPanelText="Import work items via CSV file import.";e.MobileDiscussionLoading="Loading";e.Picker_EmptyInput="Empty";e.WorkItemLogControlAttachmentsHeader="Attachments";e.KeyboardShortcutDescription_ToggleFullScreen="Toggle full screen mode";e.WorkItemTemplates_CaptureTemplateMenuItem_TooManyItemsTooltip="Templates can only be generated from individual work items";e.MoveWorkItemDialogTitle="Move work item";e.QueryEditorQueryModeMayHave="Return all top level items";e.FieldStatusInvalidOldValueError="The value for field \u0027{0}\u0027 must be updated, the current value is no longer supported.";e.HistoryControlLinkAddedText="Link Added";e.TestWorkItemDeletedItems="Deleted items";e.SaveAndCloseHotkeyWithCommand="(+Enter)";e.SaveAndCloseHotkeyWithControl="(Ctrl+Enter)";e.WorkItemFieldLabelTitleFormat="[Field Name: {0}]";e.ImportEmptyDataSet="Dataset is empty.";e.BulkEdit_ApplyTemplateTitle="Apply template";e.WorkItemIdOutOfRange="Cannot load work item. Id out of range.";e.LinkDialog_WorkItemNotFoundError="Work item {0} does not exist or you do not have permission to access it.";e.RenameQueryFolderTitle="Rename query folder";e.ImporCsvReadonlyFieldModifiedError="Value of a readonly field {0} was modified. Please revert the {0} values or remove the column from the input file and and try to import again.";e.WorkItemDeleteError_ClickHere="click here";e.ImportEmptyColumn="Empty columns at col(s): {0}.";e.AddTagPlusText="+";e.Unknown="\u003cunknown\u003e";e.ImportCSVPanelLoadingText="Please wait while we load your CSV changes.";e.ImportCSVErrorHeader="There were issues while importing this CSV file.";e.CustomizeWorkItemsText="Personalize your work items with custom fields, picklists and states or add your own custom work items to match your business process.";e.KeyboardShortcutDescription_Next_Item="Next item";e.RestoreWorkItemDialogConfirmationText="Are you sure you want to restore the selected work item(s)?";e.CopyNameTemplate="{0} ({1})";e.WorkItemDeleteError_MoreInfo="For more information on what might cause this error,";e.UnsavedWorkItemActionsMessage="You can save your changes, discard your changes, or cancel to continue editing.";e.LinksControlAddLinkDisabledTooltip="You cannot add a link to an item in read-only mode";e.WorkItemFinder_AriaLabel_FindResultsGrid="Work item search results";e.LoadingQueryResults="Loading query results...";e.ReturnLinksOfAnyType="Return links of any type";e.MobileDiscussionViewNumberOfComments="View {0} comments";e.MultiFieldInsertNewFieldTooltip="Insert new field";e.DateTimePicker_MinuteUpAriaLabel="Increase minute";e.FilterNoStatuses="No status available";e.InvalidQuerySyntax="{0} The error is caused by {1}.";e.DateTimePicker_GoToToday="Go to today";e.MoveWorkItemBulkTypeError="Work item type(s) {0} may not exist in {1}.  Change the type of all selected work items below, or exit the dialog and move work items separately.";e.ErrorExpectingTeam="Expecting team value.";e.RecycleBin="Recycle Bin";e.HistoryControlWorkItemTagAddedAdornmentText="Tag added";e.StartStoryboarding="Start storyboarding";e.InsertImageEditLabel="Image";e.TextFilterNextItemsMessage="Filter the next {0} items";e.WorkItemChartsPageNotReady="TF401194: The Work item charts page is in an unready state.";e.WorkItemFormIsReadonly="Work item form is readonly";e.WorkItemLogControlWorkItemTypeChange="changed type from {0} to {1}";e.HistoryControlMultipleLinksAdornmentText="Multiple links were added";e.TabErrorAriaLabel="{0} contains invalid fields.";e.LinksControlLinkTypeColumnText="Link Type";e.CannotResolveExternalLinkResource="The \u0027{0}\u0027 url cannot be resolved. Please check the url and try again.";e.CreateCopyCopiedFrom="Copied from {0}";e.FieldStatusInvalidListValueError="The field \u0027{0}\u0027 contains the value \u0027{1}\u0027 that is not in the list of supported values.";e.FilterByTags="Tags";e.EmptyQueryChartList="Choose \u0027New chart\u0027 to create the first chart for \u0027{0}\u0027 query.";e.ImportDuplicateNonRequiredHeaders="Duplicate non-required column headers: {0}.";e.WorkItemLogControlOtherLinkDeleted="deleted other link";e.GitHubZeroDataText3=" to see the status of your development. ";e.GitHubZeroDataText2=" or ";e.GitHubZeroDataText1="Link a GitHub ";e.HistoryControlMultipleAttachmentsAdornmentText="Multiple attachments were added";e.WorkItemLogControlLinkDeleted="deleted {0}link";e.DateTimePicker_PreviousMonthAriaLabel="Go to previous month";e.ExportToCSV="Export to CSV";e.GithubPRLinkDialogAddressTitleWatermark="Enter GitHub pull request url";e.ColumnOptionsColumns="Columns";e.CommentEditedTag="(edited)";e.ProgressBarTooltip="{0}/{1} {2} completed.";e.WorkItemFinderIds="IDs";e.WorkItemTemplateDialog_CopyLinkEnabledMessage="Copy the URL to add a work item using this template.";e.DeleteWorkItemDialogConfirmationTextLearnMoreLink="Learn more";e.RollupColumnFieldRowAriaLabel="Rollup column {0}";e.LinksControlSameHostRemoteLink="A remote work item cannot link to the same organization.";e.SaveResults="Save results";e.ChangeType="Change type...";e.HistoryControlLinkDeletedText="Link Deleted";e.Confirm="Confirm";e.WorkItemTemplateDialog_AddComment="Add a comment";e.ClosePanel="Close panel";e.CustomFollowDialogAllNotificationsRadioDescription="Receive all notifications from this work item.";e.DragFavoriteFailed="The query \u0027{0}\u0027 could not be added to favorites. The underlying error was: \u0027{1}\u0027";e.MoveWorkItemIterationPathLabel="Iteration path";e.QueryResultsGridRoleTitle="Query results grid";e.QueryManageDialog_Validator_FolderInvalid="Folder is invalid.";e.QueryFolderPicker_ErrorMessage_NameExceededLimit="Query name should be less than {0} characters, actual is {1}";e.TestSuites=" Test Suites";e.Customize="Customize";e.NoValueForMultiLineControl="No {0}";e.TriageSummary="{0} of {1}";e.FieldCannotBeEmpty="Field name cannot be empty";e.FilterNoArea="No areas available";e.FilterNoTags="No tags available";e.WorkItemChartsUnsavedQuery="Please save your query before creating a chart.";e.MobileDiscussionMessageSend="Send";e.WorkItemFinderAnyProject="Any Project";e.WorkItemDiscussionAddWithPRCommentHelpText="Add a comment. Use hash symbol to link a work item, exclamation mark to link a pull request, or at symbol to mention a person.";e.WorkItemFinderFavorites="Favorite Query";e.HistoryControlWorkItemTagRemovedAdornmentText="Tag removed";e.CreateCopyOfWorkItemTitle="Copy Work Item";e.WorkItemNotFoundClientException="TF401232: Work item {0} does not exist, or you do not have permissions to read it.";e.LinksControlResultAttachmentText="Result Attachment";e.DeleteWorkItemsToSeeMore="There are more items in the recycle bin.";e.ReadOnlyFieldIconLabel="Field {0} is readonly";e.TitleEmptyText="Enter Title";e.SaveChanges="Save changes";e.TagEdit_ZeroData="No tags have been added";e.WorkItemPaneFilter_FilterWorkItems="Filter work items";e.WorkItemTypeNameRequired="Work item type must be specified.";e.WorkItemLogControlEditedComment="edited a comment";e.ImporCsvMaxRowsExceededError="Max number of work items allowed on import is {0}.";e.ReadonlyWorkItemSaveButtonTooltip="You don\u0027t have permission to edit this work item.";e.WithUnsavedComment="{0} with unsaved comment";e.TestSuiteDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e and all its child Test Suites, Tests across all configurations and testers along with their Test Result History will be permanently deleted. {2}";e.MultiFieldAddNewField="Add new field";e.UnsavedWorkItemPrompt="You have modified this work item. You can save your changes, discard your changes, or cancel to continue editing.";e.LinksControlGitHubPullRequestText="GitHub Pull Request";e.TriageViewWorkItemSaveError="Work item {0}:";e.WorkItemFinderAllWorkItemTypes="All Work Item Types";e.UseWorkItemAsATemplate="Clone work item";e.ImporCsvInvalidWorkItemIdError="{0} value can\u0027t be 0. Please specify the correct value at line {1}, column {2}.";e.EnterDetails="Enter Details";e.DiscussionViewNumberOfComments="{0} comments";e.CommentEditedTooltip="Edited {0}";e.AddYourReaction="Add your reaction";e.WorkItemTemplates_CaptureTemplateDialogTitle="Capture Template";e.DeleteWorkItemDialogRefreshWarningMessage="After deleting selected work items, you need to refresh the page to reflect the changes.";e.DeleteAttachments="Delete attachments";e.CreateCopyCopiedWithAllLinksAndAttachmentsFrom="Copied with all attachments and links from {0}";e.MoveWorkItemProjectWatermark="Select a project";e.NoResultsFound="No results found";e.ColumnOptionsTooltip="Column options";e.QueryColumnLastModifiedBy="Last modified by";e.CommentedFormat="commented {0}";e.WorkItemTypeChangeInProgress="Change type is almost complete! Simply click Save.";e.HistoryControlCommentEditedAdornmentText="Comment edited";e.ColumnOptionsSortDescending="Sort descending";e.QueryAcrossProjects="Query across projects";e.RemoteLinkStatusPendingDelete="Deleting";e.LinkFormResultAttachmentMessage="To link an attachment from a test result to this work item, you must open the test result that contains the attachment and associate the work item with the test result.";e.DialogSave="Save";e.WorkItemDiscussionLabel="Discussion";e.TreeLinksQuery="Tree Links Query";e.DeleteSelectedWorkItems="Delete";e.EmailWorkItems_NoSelection="You have not selected any items to email";e.SaveAndClose="Save and close";e.NewFeatureCustomizeProcessLinkTitle="Customize process";e.ErrorExtensionService_CannotRevertWorkItem="You cannot revert a work item that is new or not dirty";e.QueryFolderPicker_ErrorMessage_FolderDoesNotExist="Specified folder does not exist.";e.BulkEditDialogFieldsRoleTitle="Fields";e.NoCommentsText="No Comments";e.ConfirmDeleteQuery="Are you sure you want to delete \u0027{0}\u0027?";e.RollupColumn_TotalBy_AllDescendants="Count of Work Items";e.MoveWorkItemToPublicProjectMessage="You are moving this work item into a public project.";e.CopyQueryURL="Copy query URL";e.DeletedAreaPath="(removed area path)";e.AttachmentUploadFailPermissionsMessage="You do not have permission to attach files to work items in the current area path.";e.LinkFormWorkItemNotFound="Work item not found or no permission to access it.";e.LinksControlIntegratedInBuildText="Integrated in build";e.TrackChangesNewFeatureTitle="Track changes to work items and code";e.UnsavedComment="Unsaved comment";e.LinksControlBranchText="Branch";e.ImporCsvInvalidFieldValueError="Invalid work item type {0} specified in column {1} at line {2}, column(s) {3}.";e.QueryItemAlreadyExist="Query item \u0027{0}\u0027 already exists.";e.ItemsPlural="{0} items";e.HistoryControlAgoYesterday="Yesterday";e.QueryEditorQueryModeMustHave="Only return items that have matching links";e.WorkItemLogControlProjectChange="changed project from {0} to {1}";e.LinkDialog_QueuedLinkDuplicateWorkItemsError="Work item {0} is already in the list of items to link.";e.KeyboardShortcutDescription_CopyWorkItemTitle="Copy work item title";e.WorkItemEditorDirtyCaption="{0}*";e.CustomRollupTotalOptionTitle="Rollup as Total";e.RollupColumn_TotalBy_Backlog="Count of {0}";e.TagEdit_FilterWatermark="Add tag";e.WorkItemLogControlAttachmentDeleted="deleted an attachment";e.WorkItemEditorCaption="{0} {1}";e.CopyQueryURLDataTooLargeException="VS402348: The query definition is too large to share. Please save the query as a Shared Query and share the link to the saved query.";e.QueryDirtyDocumentTitleFormat="Query: {0}";e.AttachmentDropMessageHeader="Upload files";e.BooleanFieldTrueValue="True";e.LinksControlAddLinkToExistingItem="Existing item";e.LinksControlZeroData="No links have been added";e.ColumnOptions="Column options";e.WorkItemTemplateDialog_CopyLink="Copy link";e.LinksControlGitHubHelpText_about="about GitHub integration with Azure Boards.";e.GithubIssueLinkDialogAddressTitleWatermark="Enter GitHub issue url";e.WorkItemDiscussionAddWithPRComment="Add a comment. Use # to link a work item, ! to link a pull request, or @ to mention a person.";e.WorkItemTemplateDialog_NoMemberTeamsError="You cannot capture this template because you are not a member of any team in this project";e.CustomRollupProgressOptionSubtitle="A percentage calculation of the linked descendant will be added at the parent level. Progress is calculated as completed work items out of all work items.";e.MoveWorkItemChangeTypeWatermark="Select a work item type";e.CustomFollowDialogNoNotificationRadio="Not Subscribed";e.TestWorkItemDeletePermissionError="You don\u0027t have sufficient permissions to delete this work item. You must have work item and test artifacts delete permissions.";e.QueryResultsGridNumSelectedSecondaryTextFormat="{0} selected";e.EmailQuery="Email query";e.WorkItemDiscussionMentionLinkComment="{0} mentioned work item #{1} in #{2} discussions";e.AreaLabel="\u0026Area";e.FollowingWisCouldNotBeSaved="The following work item(s) could not be saved:";e.WorkItemRevert="Revert changes";e.FieldStatusInvalidCharactersError="The value for field \u0027{0}\u0027 has unsupported characters.";e.CustomRollupTypeOptionLabel="Select rollup type";e.MoveWorkItemAreaPathLabel="Area path";e.VisualizeYourWorkNewFeatureTitle="Visualize Your Work";e.AttachmentUploadCancelledMessage="You have refreshed the work item or reverted changes. The file upload has been canceled.";e.WorkItemLogControlMadeOtherChanges="made other changes";e.ReturnSelectedLinkTypes="Return selected link types";e.LinksControlCommitText="Commit";e.Of="of";e.OK="OK";e.CustomFollowDialogTitle="Notification Settings";e.LinksControlDuplicateHyperlink="Duplicate hyperlink.";e.LinksControlHyperlinkText="Hyperlink";e.MoreSaveOptions="More save options";e.KeyboardShortcutDescription_SaveAndClose="Save and close";e.RollupColumn_ProgressBy_AllCompletedDescendants="Progress by all Work Items";e.RecentWorkItems="Recent work items";e.CannotGetRegisteredInstance="Cannot get registered instance for : {0}";e.LinkTopologyTreeForwardImageAltText="This is a directional link that creates a one-to-many relationship. Once this link is created, no more links of this type can be added to this work item.";e.WorkItemPaneFilter_Off="Off";e.LinksControlFoundInBuildText="Found in build";e.LinksControlBuildText="Build";e.FullscreenExitIconText="Exit full screen mode (Z)";e.QueriesView_FolderPivotName="Folder";e.ImportErrorMessageTitle="Found the following header errors:";e.HistoryControlAgoOlder="Older";e.ExportToCsvQueryResultTooBig="The number of work items returned exceeds the limit for export to CSV. Please change the query to return fewer than {0} items and try again.";e.KeyboardShortcutDescription_HistoryTab="Move to history tab";e.ReactionTypeEmojiThumbsDown="Dislike";e.ZeroDataImageAltText="Zero Data Image";e.EmailSelectedWorkItemToolTip="Email the selected work item";e.HistoryControlAgoToday="Today";e.LinkFormTestResultMessage="To link a test result to this work item, you must open the test result and associate the work item with the test result.";e.ErrorExpectingIntegerValue="Expecting integer value.";e.FileThrottleDialogTitle="Too many files";e.EmailWorkItem="Email work item";e.DateTimePicker_NextMonthAriaLabel="Go to next month";e.FieldErrorAriaLabel="Invalid {0}";e.ImporCsvExtraFieldsFoundError="Excess number of field values found at line {0}: expected {1} but read {0}.";e.BulkEditSelectedWorkItems="Edit...";e.LinkDialogCommentTitle="Comment";e.InvalidErrorParameter="Invalid Error Parameter";e.FieldCannotBeRemoved="This field cannot be removed.";e.ExternalLinkText="External link";e.AddAttachmentUnknownError="Unknown Attachment Error.";e.LinksControlDescriptionColumnText="Description";e.QueryFilterErrorEmptyValue="The value for row {0} is not filled correctly.";e.WorkItemLogControlCreatedWorkItem="created the {0}";e.WorkItemIdUndefined="Cannot load work item. Id undefined.";e.AzureReposZeroDataText1="Link an Azure Repos ";e.AzureReposZeroDataText2="You can also ";e.AzureReposZeroDataText3=" to get started.";e.ErrorExpectingBooleanValue="Expecting boolean value.";e.Bug="Bug #{0}";e.Sum="Sum";e.LinkDialog_CircularWorkItemRelationshipError="Adding a {0} link between work items {1} and {2} would result in a circular relationship. To create this link, evaluate the existing links, and remove one of the other links in the cycle.";e.TestResults=" Test Result History";e.Count="Count";e.Items="items";e.WorkItemBulkRestoreError="We were unable to restore some work item(s). They are not present in the recycle bin or access is denied. Please refresh to see the failed items.";e.WorkItemLinkText="Work item link";e.TitleField="Title Field";e.Query="Query";e.EditComment="Edit comment";e.Tests=" Tests";e.WorkItemIsReadOnlyError="This action does not apply because the work is read-only.";e.AssignedToEmptyText="Unassigned";e.RollupColumn_TotalBy_Filter_Field="Sum of {0} {1}";e.ImportNonConsecutiveTreeHeader="Non-consecutive tree column headers at col(s): {0}.";e.QueryEditorLinkTypeLabel="Types of links";e.QueryColumnTitle="Title";e.WorkItemChartsUnrecognizedQueryMessage="Query Type is unrecognized - You can create a chart for a flat list query.";e.StateEmptyText="Select State";e.FollowedWorkItemsQuery="Followed work items";e.LinksControlCreateNewLink="New item";e.RemoteLinkStatusPendingUpdate="Updating";e.ExportToCsvNoQueryResultsMessage="The query you selected does not return any work items. Select a query that contains at least one work item, and try again.";e.WorkItemsHubTruncatedCommentCount="{0}+";e.UpdatedDateByMessage="Updated {0} by {1}";e.CopyQueryURLExpirationMessage="Note: The query URL will expire in {0} days.";e.WorkItemMoveInProgress="Your move is almost complete! Simply click Save.";e.CreateaBranchText="create a branch";e.LinksControlAddLinkDisplayText="Add link";e.NoLicenseEmptyQueryChartList="To author charts, you must have the correct license and configuration. For more information, \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkId=256033\u0027 target=\u0027_blank\u0027\u003esee visualstudio.com\u003c/a\u003e.";e.LinksControlVersionedItemText="Versioned Item";e.WarningExportingDirectLinksTitle="Direct links export";e.WorkItemTypeDoesNotExist="Work item type \u0027{0}\u0027 does not exist.";e.AttachmentsGridViewIconAriaLabel="Click to toggle to Attachments Grid View";e.AdditionalSortFieldFocusZoneLabel="{0}, {1}, press right arrow to choose a different field";e.TabHeaderTooltip="{0}";e.QueryEditorQueryMatchTopLevelItems="Match top-level work items first";e.HistoryControlWorkItemRestoredAdornmentText="Work item restored";e.KeyboardShortcutDescription_NewQuery="New query";e.AttachmentDropMessage="Drag and drop your files here.";e.RichEditorMaximizeName="Maximize {0}";e.RestoreWorkItemsTooltip="Restore selected work item(s)";e.ErrorCannotCreateLegacyExtension="Cannot create work item control of type \"{0}\". Legacy extensions are no longer supported in new work item form.";e.CreateCopyOfWorkItem_Failed="Failed to copy work item: ";e.HistoryControlWorkItemDeletedAdornmentText="Work item deleted";e.HistoryOutdatedWithUnsavedChangesWarning="History details is outdated. Please save your changes, or discard them to see the latest details.";e.WorkItemPaneFilter_Bottom="Bottom";e.LinkDialogTypeNotValid="Could not find the specified link type.";e.AttachmentsGridCommentsColumn="Comments";e.KeyboardShortcutDescription_OpenTaskBoard="Open task board";e.RefreshHotkey="(Alt+R)";e.WorkItemTypeChangeInProgressWithErrors="Change type is almost complete! Fix the errors and click Save.";e.ChartEditor_Query_GroupingTooltip="The columns you have specified in your query will show up as grouping for the chart.";e.LinksControlIssueText="Issue";e.UnableToCreateBugOfType="Unable to create work item of type: {0}.";e.PreviewUnhandled="It looks like this file doesn\u0027t have a preview we can show you.";e.MobileGoBackAriaLabel="Go back";e.LinkWorkItemsNoFavorites="You do not have any favorite queries";e.InsertImageInvalidFileType="TF400116 Unsupported file type.  Valid file types are: {0}.";e.NewFolder="New folder";e.GithubCommitLinkDialogAddressTitleWatermark="Enter GitHub commit url";e.PickAColumn="Pick a Column";e.WorkItemArtifactLastUpdatedLabel="Updated {0}";e.MobileDiscussionZeroData="Be the first to add a comment";e.StateTransitionGraphViewAllChangesText="Show all";e.WorkItemDiscussionAdornmentTooltipSingular="Go to discussion. There is 1 comment available";e.AttachmentUploadingEnd="One or more attachments uploaded.";e.FolderLabel="Folder";e.ImporCsvDuplicateWorkItemIdColumnError="Duplicate {0} for work item id {1} at line {2}, column {3}.";e.ScopedIdentityTooltipWithSuffix="This field is scoped to: {0} and more.";e.NoLicenseHostedEmptyQueryChartList="No charts exist for this query.";e.InvalidCSVFileFormat="Only CSV files are accepted.";e.Wiql_MacroCurrentIteration="CurrentIteration";e.HistoryControlStateAdornmentText="Set to {0} state";e.LinkDialogErrorWorkItemTypesToAdd="The filter for the link control is defined so that no work items of any type can be added. Modify the filter definition and import it again.";e.WorkItemsHubEditorTabTitle="Editor";e.LinksControlZeroDataBranchText="branch";e.QueryColumnFolder="Folder";e.NewLinkedWorkItemTypeTitle="Work item type";e.Rollup_EffortFieldName="Effort";e.ErrorCannotCreateWorkItemControl="Cannot create work item control of type \"{0}\"";e.LoadingWorkItem="Loading work item";e.WorkItemLinkTypeEndDoesNotExist="Work item link type end \u0027{0}\u0027 does not exist.";e.WorkItemRestoreError="Failed to restore work item: {0}. Error Details: {1}";e.NewFeatureLearnMoreLinkTitle="Learn more";e.LinkDialogWorkItemIdsTitle="Work items to link";e.InsertImageUploadingDialogTitle="Uploading Image...";e.NewLinkedWorkItem="New linked work item";e.InternalServerError="Internal Server Error:";e.CustomFollowDialogCustomNotificationRadio="Custom";e.QueryEditorRoleTitle="Query editor";e.WorkItemPaneFilter_RightAriaLabel="Work item panel right";e.RollupColumnInfo="Add a Rollup column to display percentage of progress or sum of work items based on hierarchical parent/child relationships.";e.AdhocQueryDefaultName="Custom query";e.FollowingWorkItem="Following";e.QueryMyFavoriteLabel="My favorites";e.AssignedToMeQuery="Assigned to me";e.WorkItemIdDisplayStringSingular="Work Item {0}";e.MoveWorkItemTitle="Move to team project...";e.GroupErrorAriaLabel="{0} contains invalid fields.";e.WorkItemTypePicker_Label="Backlog level or work item type";e.GitHubLinkAlreadyExists="A {0} link with the same URL already exists.";e.RollupColumn_ProgressBy_WorkItemType="Progress by {0}";e.BulkEditDialogHistoryRoleTitle="History";e.RevertQueryChanges="Revert changes";e.AttachmentsGrid_PlaceholderPrefixText="Uploading ";e.GithubPRLinkDialogAddressTitle="GitHub pull request url";e.WorkItemTemplate_FailedToLoad="Failed to load template.";e.WorkItemTemplate_FailedToSave="Failed to save template.";e.LinksControlDuplicateRemoteLink="A remote work item link already exist.";e.LinksControlStoryboardText="Storyboard";e.WorkItemFinderProject="Project";e.LinkDialog_LinkSelfWorkItemError="You cannot link a work item to itself so work item {0} was not added to the list.";e.CopySelectedWorkItemsAsHtml="Copy as HTML";e.UnsavedCommentPrompt="You have an unsaved comment. Close and lose changes?";e.WorkItemTemplateDialog_ConfirmClosePrompt="You have modified this template. Close and lose changes?";e.LinksControlCircularRemoteLink="A remote work item link already exists in the other direction, circular link cannot be established.";e.WorkItemDiscussionCommentAriaLabel="Comment {0} of {1}.";e.QueryEditorQueryMatchLinkedItems="Match linked work items first";e.ColumnOptionsTitle="Column Options";e.Heading_SuggestedValues="Suggested Values";e.PrivacyStatement="Your privacy is important to us.";e.WorkItemLogControlDeletedWorkItem="deleted the work item";e.HistoryControlProjectAdornmentText="Work item moved to {0} project";e.RunQuery_PromptUnsavedWorkItemChanges_MessageTitle="Are you sure you want to run query?";e.MovingQueryLabel="{0} *";e.DiscardWorkItem="Discard";e.WorkItemDiscussionAdornmentTooltip="Go to discussion. There are {0} comments available";e.KeyboardShortcutDescription_AssignToMe="Assign work item to me";e.AddAttachmentDialogFieldComment="Comment";e.HistoryOutdatedFromUnsavedChangesWarning="History details is outdated. Please save your changes, revert them, or refresh to see the latest details.";e.BackToQuery="Back to query";e.WorkItemDelete_NoPermission="We were unable to delete the work item(s), you do not have sufficient permissions to delete.";e.FetchingImplications="Fetching implications...";e.EditQuery_PromptQueryRevert_MessageContentText="You have unsaved changes that will be lost:";e.DestroyWorkItemDeleteButtonText="Permanently delete";e.HtmlFieldPlaceholder="Click to add {0}";e.DeleteQueryFolder="Delete";e.LinkToExistingItem="Link to an existing item...";e.QueryResultsNewQueryGridStatusText="Run to see the query results.";e.QuerySaveDialog_FolderCombo_ExpandButtonAriaLabel="Expand";e.KeyboardShortcutDescription_Discussion="Go to discussion";e.LoadingTeamFavorites="Loading Team";e.DiscussionViewNumberOfCommentsSingle="1 comment";e.WorkItemDiscussionAddComment="Add a comment. Use # to link a work item or @ to mention a person";e.WorkItemChartsDisallowedAdhocQuery="TF401195: This generated query is not supported for use with Charting.";e.RecyclebinCleanupMessage="Recycle Bin items older than {0} days will be permanently deleted.";e.WorkItemHtmlFieldMentionLinkComment="{0} mentioned work item #{1} in #{2}";e.DeleteOrRestoreConfirmationMessage="Work items are still being deleted or restored. The operation may be canceled if you navigate away.";e.TagsLabelText="Tags";e.ImportEmptyColumnHeaders="Empty column headers at col(s): {0}.";e.MoveWorkItemMessage="Learn more about moving a work item";e.TriageNextWorkItemToolTip="Next work item in the \"{0}\" query (Alt + N)";e.QueriesView_PivotTitle="Queries";e.ExportingWorkItems="Exporting work items";e.RollupProgressBarOptionsHeadingText="Progress bar";e.InvalidArgumentExpectingArray="Invalid argument, expecting array of WorkItemRelations";e.DeletedIterationPath="(removed iteration path)";e.SelectedWorkItemsLabel="Selected Work Items";e.LinksControlDuplicateStoryboard="The current work item already contains a link to this storyboard: {0}";e.MoveWorkItemDialogCurrentProjLabel="(current project)";e.FieldValueIdentityPickerAriaLabel="Search users and groups for field {0}";e.RollupDataQualityException="Unable to get quality data.";e.HistoryControlTreeAriaLabel="History";e.GitHubPromoteZeroDataText1="We noticed that you\u0027ve used GitHub with Azure Pipelines in this project. ";e.GitHubPromoteZeroDataText2="Connect Azure Boards with GitHub";e.FieldStatusInvalidDateErrorError="The value for field \u0027{0}\u0027 is not a recognized date.";e.FilterNoAssignedTo="No users available";e.HistoryControlCommentAddedAdornmentText="Comment added";e.GithubCommitLinkDialogAddressTitle="GitHub commit url";e.RefreshCharts="Refresh charts";e.InsertImageName="Insert image";e.InformationIcon="Information Icon: {0}";e.ErrorExpectingDateTime="Expecting DateTime value.";e.FieldStatusInvalidValueNotInOtherFieldError="The field \u0027{0}\u0027 is unsupported because a value is missing in another field.";e.BooleanFieldFalseValue="False";e.ImportDuplicateRequiredHeaders="Duplicate required column headers: {0}.";e.LinksControlEnterStoryboardUrl="You must specify a link to the storyboard. A valid UNC path to a file or URL to a storyboard stored on a shared resource is required.";e.LinkDialog_LinkChildWorkItemWhichHasAParentError="Work item {0} already has a {1} link so a new one cannot be added.";e.DragQueryMoveFailed="Can\u0027t move query \u0027{0}\u0027 . The underlying error is: \u0027{1}\u0027";e.KeyboardShortcutDescription_RefreshQuery="Refresh query";e.GenericRollupError="Something went wrong while fetching rollup data.";e.QueryEditorQueryTypeLabel="Type of query";e.CreateCopyOfWorkItem_IncludeChildren="Include child work items";e.QueryEditorSourceFilterGroupingText="Filters for top level work items";e.ChangeTypeBlockedCase="Work item type {0} cannot be changed.";e.NoActiveWorkItem="Active work item document does not exist in the current context";e.FieldStatusInvalidComputedFieldError="The value for field \u0027{0}\u0027 is computed and cannot be changed.";e.DeleteWorkItemDialogConfirmationText="Are you sure you want to delete the selected work item(s)?";e.KeyboardShortcutDescription_RightTab="Move to right tab";e.BackToQueryResults="Return to the \"{0}\" query (Alt + Q)";e.DateTimePicker_AMPMUpAriaLabel="Switch AM PM";e.RestoreWorkItemDeleteButtonText="Restore";e.AttachmentsGridNameColumn="Name";e.CustomRollupPanelTitle="Custom rollup column";e.QueryEditorQueryTypeSimple="Flat list of work items";e.ImportMissingRequiredHeaders="Missing required column headers: {0}.";e.AttachmentsTitle="Attachments";e.WorkItemDiscussionAddCommentHelpText="Add a comment. Use hash symbol to link a work item or at symbol to mention a person";e.TestWorkItemAffectedItems="Affected items";e.WorkItemTemplates_UserDoesNotHaveTeamPermission="You do not have permission to edit templates for this team.";e.LinkDialog_LinkUnsupportWorkItemTypeError="A work item of type {0} cannot be used for the {1} link type.";e.QueryEditorNewQueryNameFormat="New Query {0}";e.AriaLabelForActions="Actions";e.LastUpdatedDateLabel="Updated";e.RunQuery_PromptUnsavedWorkItemChanges_MessageContentText="You have unsaved work item changes and they will be lost if you continue to run the query:";e.FileThrottleMessage="You have attempted to upload more files than the maximum allowed at once: {0}";e.ContributionNotFound="Contribution not found.";e.HistoryControlAttachmentAddedText="Attachment Added";e.TriageView="Triage View";e.ImporCsvIncorrectTreeStructureError="Field values that do not adhere to correct tree structure at line {0}, column(s) {1}.";e.AttachmentUploadFailMessage="You have attempted to upload files that either don\u0027t exist or are folders: {0}";e.CopySelectedWorkitemsOpenAsQuery="Open as query";e.CreateCopyOfWorkItem_IncludeLinks="Include existing links";e.WorkItemLogControlStateGraphTitle="State Graph";e.WorkItemFinderTitleContainsAndType="Title contains and type";e.FormGroupExpandAriaLabel="{0} section.";e.RunQuery_PromptUnsavedWorkItemChanges_ProceedButtonText="Continue";e.QueryEditorQueryModeDoesNotContain="Only return items that do not have matching links";e.DialogCloseButtonText="Close (ESC)";e.CopyQueryURLNotFoundException="VS402349: The custom query does not exist or is expired.";e.FieldStatusInvalidNotEmptyOrOldValueError="The value for field \u0027{0}\u0027 must be empty or the same as the original value.";e.FieldStatusInvalidNotOldValueError="The value for field \u0027{0}\u0027 must be the same as the original value.";e.FilterByStates="States";e.AggregationTypePickerLabel="Column Metric";e.ConfigureCustomRollupColumn="Configure custom rollup";e.EmailResolveIdentityFailed="We were unable to resolve one or more identities. Please try again.";e.AssignedToLabel="Assi\u0026gned To";e.AssignedToField="Assigned To Field";e.QuerySaveDialog_ErrorMessage_NameAlreadyExists="A query or folder with this name already exists in the specified folder.";e.CommandBarTitle_DeleteWorkItems="(Del)";e.WorkItemsHubResultsTabTitle="Results";e.CustomFollowDialogCustomNotificationRadioDescription="You will only be notified for the events selected from the list below or when you are @mentioned in this work item.";e.SuccessfulUnfollowFromEmail="You are no longer following this work item.";e.InvalidQuery="Invalid Query";e.ContributionTimedOut="\"Timed-out waiting for contribution source provider for contribution: {0}";e.QueryConfirmDragDropOperation="Are you sure you want to move the selected item from \u0027{0}\u0027 to \u0027{1}\u0027? Doing so prevents others from accessing it.";e.WorkItemLogControlUserViaUser="{0} (via {1})";e.SharedParameterDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e will be permanently deleted. {2}";e.QueryResultsGridStatusTextFormat="{0} work items ({1} selected)";e.CopySelectedWorkItemsIdColumnTitle="ID";e.WorkItemMoveInProgressWithErrors="Your move is almost complete! Fix the errors and click Save.";e.GithubIssueLinkDialogAddressTitle="GitHub issue url";e.SaveQueryAsTooltip="Save query as...";e.AddARollupColumnFromQuicklist="From quick list";e.LinksControlEnterUrl="Enter a URL.";e.LinkDialogWorkItemPickerInputWatermark="Enter ID or search for work items";e.QuerySaveDialog_ErrorMessage_NameInvalid="Name cannot contain the following characters: /\\\u003c\u003e*?\"|:";e.LinkToolTypeCode="Code";e.LinkToolTypeWork="Work";e.LinkToolTypeWiki="Wiki";e.LinkToolTypeTest="Test";e.ReactionUserListHeaderSingular="User with {0} reaction";e.LastUpdatedLabel="Updated by ";e.MissingUri="Missing uri property for contribution : {0}";e.FutureIterations="Future Iterations";e.FieldStatusInvalidEmptyOrOldValueError="Field \u0027{0}\u0027 cannot be empty, and must be different from the original value.";e.FieldStatusInvalidNotEmptyError="The value for field \u0027{0}\u0027 must be empty.";e.FieldValueComboAriaLabel="Value for field {0}";e.LoadingWorkItems="Loading work items";e.LiveReloadWorkItemDeleteNotificationMessage="The work item you are currently viewing has been deleted.";e.QueryingStatusText="Querying...";e.ColumnOptionsPanelText="Add or remove columns. To change the column order, drag and drop a field, or use the keyboard shortcuts, ";e.WorkItemTypeChangedNotificationMessage="The work item type has changed.";e.ImporCsvErrorsFound="Found field value error(s):\r\n{0}";e.FilterInvalidWorkItems="Invalid work items";e.CreateCopyOfWorkItemType="Work item type";e.WorkItemTemplates_ManageMenuItem_Text="Manage...";e.QueryFavoriteItemAriaLabel="{0}, Level 0, ";e.AttachmentsThumbnailViewIconAriaLabel="Click to toggle to Attachments Thumbnail View";e.QueryTeamFavoriteLabel="{0} favorites";e.LinkFormTestMessage="To link a test to this work item, you must open a test result for the test and associate the work item with the test result.";e.ShowMoreWorkItemsLinkMessage="Show all items";e.KeyboardShortcutGroup_Work="Work";e.DateTimePicker_SelectDateTime="Select date and time";e.ScopedIdentityTooltip="This field is scoped to: {0}.";e.Refresh="Refresh";e.MoveSourceWorkItemBlockedCase="Work item type {0} cannot be moved because it is disabled, hidden or not supported in the source project {1}.";e.HistoryControlTooltipAdditionalTextMessage="See history details for full text";e.RemoveReaction="Remove your {0} reaction";e.WorkItemsCreatedByMeQuery="Work items created by me";e.CreateCopyCopiedFromNewWorkItem="Copied from new work item";e.RollupColumn_ProgressBy_Filter_Field="Progress by {0} {1}";e.KeyboardShortcutDescription_FilterResults="Filter results";e.FilterByWorkItemStatus="Status";e.ReactionTypeEmojiThumbsUp="Like";e.DeleteWorkItemDeleteButtonText="Delete";e.TestCaseDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e across all configurations and testers along with their Test Result History will be permanently deleted. {2}";e.MissingRollupCalculationError="Rollup calculation for this field is missing. Please remove the field and try adding it back";e.RenameQueryFolder="Rename";e.AdditionalFieldEmptyFocusZoneLabel="Select a field";e.NoSuggestionsFound="No suggestions found";e.BulkEditWorkItemsNotesForHistoryLabel="Notes for History";e.IterationLabel="Ite\u0026ration";e.MoveWorkItem="Move to team project";e.QuerySaveDialog_ErrorMessage_NameRequired="Name cannot be empty.";e.ReactionUserListHeaderPlural="Users with {0} reaction";e.WorkItemChangedReproDescriptionMessage="Copied from {0} when changed from {1} to {2}";e.EmailWorkItemLimit="Only the first {0} work items are retrieved for the email.";e.WorkItemLogControlRestoredWorkItem="restored the work item";e.WorkItemPaneFilter_Right="Right";e.TriageViewSaveErrorTitle="Error saving work items";e.MoveWorkItemTypeError="Work item type {0} does not exist in {1}.";e.BulkUnfollowWorkItems="Unfollow";e.WorkItemTemplateDialog_TeamName="Team";e.HistoryControlNewValueText="New Value";e.CustomFollowDialogNoNotificationRadioDescription="Only receive notifications from this work item when you have been @mentioned.";e.TestWorkItemDeleteDialogInputLabel="Type {0} ID to confirm:";e.CustomFollowDialogAllNotificationsRadio="Subscribed";e.KeyboardShortcutDescription_AttachmentsTab="Move to attachments tab";e.InvalidRemoteWorkItemUrl="Remote workitem url is not valid.";e.ReactionTypeEmojiRedHeart="Heart";e.UnfavoriteQueryFailed="Unable to unfavorite query \"{0}\"";e.AttachmentsGridSizeColumn="Size";e.LinkDialog_LinkDuplicateWorkItemsError="A {0} link to work item {1} already exists.";e.WorkItemTemplates_LegacyCopyMenuItem_Title="Generate a URL that will create a new work item with the modified field values of this work item.";e.WorkItemIdNaN="Cannot load work item. Id not a number.";e.CustomRollupProgressOptionTitle="Rollup as Progress Bar";e.WorkItemsText="Work Items";e.WorkItemDestroyError="Failed to destroy work item: {0}. Error Details: {1}";e.CannotFindRollupData="Unable to find rollup data for this work item.";e.EmailSelectedWorkItem="Email selected work item...";e.MoveWorkItemKeepType="Keep current type(s)";e.AttachmentsZeroData="No attachments have been added";e.UpdatedDateMessage="Updated {0}";e.WorkItemZeroDataDiscussionAriaLabel="Discussion: Be the first to add a comment. Click here to view discussion.";e.ErrorEmailUnsavedQuery="You have unsaved changes made to the query \u0027{0}\u0027. Save the modified query before proceeding.";e.FormGridSectionLabel="Section {0}";e.UnfollowWorkItem="Unfollow";e.WorkItemFinderSelectFavoriteText="\u003cSelect a Favorite Query\u003e";e.LinksControlUnsafeUrl="The URL specified has a potentially unsafe URL protocol.  Please specify a different URL.";e.HistoryControlLinksTitle="Links";e.WorkItemTemplateNotApplied="VS403204: No template was applied.";e.CreateCopyOfWorkItem_IncludeAttachments="Include existing attachments";e.WorkItemMoveCopyPublicVisibilityLearnMoreLinkText="Learn more about public projects";e.TestWorkItemDeleteDialogTitle="Permanently delete test artifact(s)";e.WorkItemTemplateDialog_SavingAnnouncerStart="Saving template";e.KeyboardShortcutDescription_OpenWorkItems="Open work items";e.WorkItemTemplates_LegacyCopyMenuItem_Text="Copy template URL";e.AddAttachmentDialogTitle="Add Attachment(s)";e.ImportInvalidColumnHeaders="Invalid column headers: {0}.";e.WorkItemTemplateDialog_SavingAnnouncerError="Error saving template";e.WorkItemLogControlStateChange="changed state from {0} to {1}";e.EditQuery_PromptQueryRevert_MessageTitle="Are you sure you want to revert changes?";e.QueryTree_Loading="Loading";e.StateTransitionAriaLabel="Transition {0}: To state: {1}, reason for transition: {2}, changed by {3} on {4}.";e.WorkItemLogControlLinkRestored="restored link";e.TooManyChildItemsToCopy="Cannot copy a work item with more than {0} children.";e.LinksControlAddNewItemDisabledTooltip="You cannot link new work items to an item that has not been saved";e.WorkItemEditorCaptionNew="New {0} {1}";e.LinkToolTypeBuild="Build";e.WorkItemLogControlHistoryHeader="History";e.WorkItemLogControlAddedComment="added a comment";e.RemoteLinkStatusFailed="Failed";e.QueryFolderDoesNotExist="Parent folder \u0027{0}\u0027 does not exist, if you have renamed the folder please refresh before continuing.";e.KeyboardShortcutGroup_Queries="Queries";e.WorkItemFinderQueryInProgress="Query in progress...";e.CopyQueryURLNotifyMessage="The query URL is copied to the clipboard.";e.CreateWorkitemIVURLSuccess="Successfully copied the template URL to the clipboard.";e.ProgressPercentage="{0}%";e.FailedUnfollowFromEmail="Unfollow was not successful";e.RemoteLinkStatusPendingAdd="Adding";e.QueryFilterErrorUnrecognizedOperator="The operator for row {0} is not recognized.";e.MoveWorkItemIterationPathWatermark="Select an iteration path";e.MyFavoritesGroupName="My";e.HistoryControlChangesHeader="Change details";e.BrowseAllQueries="Browse all queries";e.NewQueryFolder="New subfolder";e.AttachmentUploadProgressNotification="Attachment(s) uploading...";e.WorkItemLogControlMadeChangeWithValue="changed {0} to {1}";e.QueryFilterErrorMissingOperator="The operator for row {0} is missing.";e.SaveQueryAsDialogTitle="Save query as";e.DeleteWorkItemDialogConfirmationTextWithoutCleanUpScheduled="You can restore deleted work items from the Recycle Bin.";e.ColumnOptionsSortAscending="Sort ascending";e.TrackChangesText="View your code artifacts right from the work item form. Creating a new branch or pull request for a bug fix is just a click away.";e.LinkDialogStoryboardLinkAddressTitle="Location";e.ExportingWorkItemsLoading="Exporting work items...";e.LinkDialogDescription="You are adding a link from:";e.QueryMoveOrRename_QueryItemAlreadyExists="A query or folder with the same name already exists in the target folder. Please resolve the name conflict before moving or renaming.";e.GenericHistoryRetrievalError="Error retrieving work item history";e.RollupColumn_LearnMore="Learn more about Rollup.";e.LinkDialog_NewWorkItem_SameTypeHierarchyError="The work item type you have selected is of the same type with work item {0}. Please change the link type or select a {1} work item that is not on the same hierarchy level to avoid a limited experience. ";e.FilterNoStates="No states available";e.NoTeamFavoriteQueries="Drag shared queries here to add them to your team favorites.";e.TestPlanDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e and all its child Test Suites, Tests across all configurations and testers along with their Test Result History will be permanently deleted. {2}";e.LinkSelectedItemsToNewWorkItem="Link to a new work item...";e.BrowserRefreshRequired="VS402831: Changes have been made to the process that require you to refresh your browser.";e.RollupColumn_ProgressBy_Backlog="Progress by {0}";e.BulkEdit_ApplyTemplateMessage="Are you sure you want to apply the template \u0027{0}\u0027? The selected work items will be automatically saved.";e.EmptyMyFavoriteGroupTextPrefix="No favorites yet! Favorite a query";e.FieldCannotBeEditedNorRemoved="{0}, this field cannot be edited nor removed";e.LinksControlUnknownLinkTypeText="Unknown link type to execute.";e.CopyWorkItemTitle="Copy work item title (Shift+Alt+C)";e.QueryResultsGridStatusNoResultsText="Query returned no results.";e.ImporCsvDoubleQuoteTerminatedEarlyError="Double-quoted value possibly terminated too early or missing delimiter at line {0}, column {1}.";e.WorkItemSaveLabel="Save";e.FilterStatusFieldName="work-item-status";e.WorkItemFinderResetButtonText="Reset";e.BulkUnfollowsFailed="One or more items could not be unfollowed. Refresh the query and try again.";e.MobileDiscussionAddComment="Add a comment";e.ChangeTypeTooltipDisabled="Not supported when querying across projects";e.QueriesHub_NewFolderCreated_LinkText="Click to open it.";e.EmptyMyFavoriteGroupTextSuffix="to quickly access it here.";e.CreateCopyOfWorkItemSourceFormat="Creating a copy of {0} {1}: {2}";e.HistoryControlViaText=" (via ";e.LoadingWorkItemsLoading="Loading work items...";e.FilesUploadedExceedMaxMb="The following file(s) can\u0027t be uploaded because they exceed our {0} MB file size limit: {1}";e.ErrorEmailUnsavedWorkItems="The selected work items cannot be emailed. You have new work items that have not yet been saved. To proceed, exclude the new work items from the selection.";e.QueriesView_AllPivotName="All";e.EmailSelectedWorkItems="Email...";e.SaveItems="Save items";e.WorkItemFinderTitleContains="Title contains";e.SaveQuery="Save query";e.MoveTargetWorkItemBlockedCase="Work item type {0} cannot be moved because it is disabled, hidden or not supported in the destination project {1}.";e.TagsDeleteButton_AriaLabel="Delete {0} tag";e.DownloadAttachment="Download attachment";e.DeleteQuery="Delete";e.FieldStatusInvalidTooLongError="The value for field \u0027{0}\u0027 is too long.";e.BulkEditWorkItemsTitle="Edit work items";e.OpenInNewTab="Open in new window";e.ChangeTypeDialogTitle="Change work item type";e.RichEditorRestoreName="Restore {0}";e.HistoryControlSingleAttachmentAdornmentText="{0} was added";e.LinksControlWikiPageText="Wiki page";e.WorkItemProjectChangedNotificationMessage="The work item now belongs to a different project.";e.NoMyFavoriteQueries="Drag queries here to add them to your favorites.";e.LinkTopologyNetworkImageAltText="This is a non-directional link that can be created between any set of work items";e.CreateCopyOfWorkItem="Create copy of work item...";e.GitHubZeroDataPullRequestTypeText="pull request";e.CustomFollowDialogStateCheckbox="State Changed";e.EditQuery="Edit";e.RemoteLinkDialogAddressTitle="Remote work item url";e.ErrorExtensionService_CannotRefreshWorkItem="You cannot refresh a work item that is new";e.RunQuery="Run query";e.RenameQueryTitle="Rename query";e.FollowWorkItem="Follow";e.DateTimePicker_HourDownAriaLabel="Decrease hour";e.ImporCsvEmptyFieldValuesError="Empty field value at line {0}, column(s) {1}.";e.AddAColumn="Add a column";e.FieldDoesNotExist="This field does not exist";e.ImporCsvDoubleQuoteNotEnclosedError="Double-quote not enclosed in double-quotes at line {0}, column {1}.";e.QueryFilterInvalidMacro="TF20036: The macro \u0027{0}\u0027 is not recognized. Available macros include @Me, @Project, @Today and @CurrentIteration. ";e.MoveWorkItemAreaPathWatermark="Select an area path";e.SavingWorkItemsLoading="Saving work items...";e.HistoryControlSummaryAssigned="Assigned";e.KeyboardShortcutDescription_LinksTab="Move to links tab";e.RestoreWorkItemDialogTitle="Restore work item(s)";e.StatusMessage_FatalError="An error has occurred while attempting to save your changes. Discard your changes and refresh the page. Error details: {0}";e.IdField="ID Field";e.WorkItemNotSaveable="Work item can not be saved in its current state. Its either not changed or has errors.";e.HistoryControlCommentAriaLabel="Comment";e.AttachmentsGridDateAttachedColumn="Date Attached";e.FieldStatusInvalidFormatError="The value for field \u0027{0}\u0027 is not in a recognized format.";e.AddAttachmentDialogFieldAttachment="Attachment(s)";e.WorkItemDiscussionPreviewAriaLabel="Discussion: Total comments {0}. Click here to view discussion.";e.ErrorCopyingChildItem="Error copying child item {0}: {1}";e.WorkItemBulkDeleteError="We were unable to delete some work item(s). They no longer exist or access is denied. Please refresh to see the failed items.";e.SaveAttachment="Save attachment";e.EditCommentDialogLabel="Comment:";e.RollupColumn_ProgressBy_EffortField="Progress by {0}";e.QuoteReply="Quote reply";e.UntitledQuery="Untitled query";e.RunQuery_PromptUnsavedWorkItemChanges_RejectButtonText="Cancel";e.LinkDialogHyperlinkAddressTitle="Address";e.Edit="Edit";e.Open="Open";e.Save="Save";e.KeyboardShortcutDescription_OpenCurrentIteration="Open sprint";e.WorkItemLogControlMadeChanges="made field changes";e.WorkItemCommentsRetrievalError="Unable to retrieve comments";e.AttachmentUploadingStart="One or more attachments are uploading.";e.RollupTotalByTooltip="{0} {1}";e.AttachmentUploadingError="Error happened when uploading one or more attachments.";e.NewQueryHotkey="(C Q)";e.SharedStepDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e will be permanently deleted. {2}";e.ReactionAdditionalUsersCount="+{0} users";e.FieldStatusInvalidTypeError="The value for field \u0027{0}\u0027 is not of the right type.";e.ChangeTypeLabel="Type";e.CopyQueryURLTitle="Copies the query URL to the clipboard.";e.QueryResultsGridLinkQueryStatusSecondaryTextFormat="{0} top level, {1} linked and {2} selected";e.WorkItemLogControlMadeChange="changed {0}";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.WorkItemTracking.Constants",["require","exports"],function(n,t){var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTrackingRestResources=t.WitConstants=t.QueryResultFormat=void 0,function(n){n[n.Json=0]="Json";n[n.Html=1]="Html"}(i=t.QueryResultFormat||(t.QueryResultFormat={})),function(n){n.WorkItemsLocationId="72C7DDF8-2CDC-4F60-90CD-AB71C14A399B";n.QueriesLocationId="A67D190C-C41F-424B-814D-0E906F659301";n.WorkItemTypeFieldsLocationId="BD293CE5-3D25-4192-8E67-E8092E879EFB";n.WorkItemRuleEngineLocationId="1A3A1536-DCA6-4509-B9C3-DD9BB2981506";n.AreaName="wit";n.DefaultPreviewApiVersion="1.0-Preview.2";n.DefaultReleaseApiVersion="1.0"}(r=t.WitConstants||(t.WitConstants={})),function(n){n.WorkItems="workItems"}(u=t.WorkItemTrackingRestResources||(t.WorkItemTrackingRestResources={}))});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking.WebApi",["require","exports","q","VSS/Diag","VSS/WebApi/RestClient","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.WorkItemTracking.Constants"],function(n,t,i,r,u,f){var e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTrackingHttpClient=t.AttachmentsLocationId=t.DefaultAttachmentChunkSize=t.AttachmentUploadType=void 0,function(n){n[n.Queries=0]="Queries";n[n.WorkItemTypeFields=1]="WorkItemTypeFields";n[n.WorkItemRuleEngine=2]="WorkItemRuleEngine";n[n.Attachments=3]="Attachments"}(e||(e={})),function(n){n.Simple="Simple";n.Chunked="Chunked"}(o=t.AttachmentUploadType||(t.AttachmentUploadType={}));t.DefaultAttachmentChunkSize=5e6;t.AttachmentsLocationId="E07B5FA4-1499-494D-A496-64B860FD64FF";s=function(n){function u(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._baseRootRequestPath=t,i}return __extends(u,n),u.prototype.beginGetRootQueries=function(n,t){var i=this._getQueryRequestOptions(n,t);return i.responseIsCollection=!0,this._beginRequest(i)},u.prototype.beginGetQueries=function(n,t,i){var u=this._getQueryRequestOptions(n,t,{query:i});return this._beginRequest(u)},u.prototype.beginGetQueriesByPath=function(n,t,i){var u=this._getQueryRequestOptions(n,t);return $.extend(u.data,{query:i}),this._beginRequest(u)},u.prototype.beginCreateQueryDefinition=function(n,t,i,u){return this._postQueryItem(n,{name:t,wiql:i,isFolder:!1},u)},u.prototype.beginCreateQueryFolder=function(n,t,i){return this._postQueryItem(n,{name:t,isFolder:!0},i)},u.prototype.beginMoveQueryItem=function(n,t,i){return this._postQueryItem(n,{id:t},i)},u.prototype.beginUpdateQueryDefinition=function(n,t,i){return this._patchQueryItem(n,{id:t,wiql:i})},u.prototype.beginRenameQueryItem=function(n,t,i){return this._patchQueryItem(n,{id:t,name:i})},u.prototype.beginDeleteQueryItem=function(n,t){var i=this._getRequestOptions(e.Queries,"DELETE",null,{query:t,project:n});return this._beginRequest(i)},u.prototype._beginGetLocation=function(n,t){var r=i.defer();switch(t){case u.WorkItemTypeFieldsLocation.id:r.resolve(u.WorkItemTypeFieldsLocation);break;case u.QueryLocation.id:r.resolve(u.QueryLocation);break;case u.AttachmentsLocation.id:r.resolve(u.AttachmentsLocation)}return r.promise},u.prototype._postQueryItem=function(n,t,i){var r=this._getRequestOptions(e.Queries,"POST",t,{query:i,project:n});return this._beginRequest(r)},u.prototype._patchQueryItem=function(n,t){var i=this._getRequestOptions(e.Queries,"PATCH",t,{query:t.id,project:n});return this._beginRequest(i)},u.prototype._getRequestOptions=function(n,i,r,u){switch(n){case e.Queries:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:f.WitConstants.QueriesLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1};case e.WorkItemTypeFields:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:f.WitConstants.WorkItemTypeFieldsLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1};case e.Attachments:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:t.AttachmentsLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1}}},u.prototype._getQueryRequestOptions=function(n,t,i){return this._getRequestOptions(e.Queries,"GET",{$depth:t,$expand:"minimal"},$.extend({project:n},i))},u.prototype.beginGetWorkItemTypeFields=function(n,t,i){var u=this._getRequestOptions(e.WorkItemTypeFields,"GET",null,{project:n,type:t,field:i});return this._beginRequest(u)},u.prototype.getAttachmentUrl=function(n,t,i,r){var e={id:t,project:n},f=u.AttachmentsLocation;return this.getRequestUrl(f.routeTemplate,f.area,f.resourceName,e,{fileName:i,download:r,"api-version":"5.0-preview.2"})},u.prototype.beginAttachmentUpload=function(n,i,u,f,e,o){var s=f?f:t.DefaultAttachmentChunkSize;return i.size>s?this.beginAttachmentUploadChunked(n,i,u,s,e,o):this.beginAttachmentUploadSimple(n,i,u,o)},u.prototype.beginAttachmentUploadChunked=function(n,t,i,u,f,e){var s=this,o;return o=jQuery.Deferred(),this._registerAttachment(n,t,i,e).then(function(r){s._uploadAttachment(n,r.id,t,u,f,e,i).then(function(){return o.resolve(r)},function(n){return o.reject(n)})}),o.promise()},u.prototype.beginAttachmentUploadSimple=function(n,t,i,u){var s=this;var e=jQuery.Deferred(),f=new FileReader,h=!1,c=function(n){h=!0;e.reject(n)};try{f.readAsArrayBuffer(t)}catch(l){c(l)}return f.onerror=function(n){c(n)},f.onloadend=function(){if(!h&&f.readyState===f.DONE){var t=new Uint8Array(f.result),r=$.extend(s._getAttachmentUploadRequestParams("POST",n,o.Simple,i,null,u),{data:t,isRawData:!0});s._beginRequest(r).then(function(n){return e.resolve(n)},function(n){return e.reject(n)})}},e.promise()},u.prototype._registerAttachment=function(n,t,i,r){var u=this._getAttachmentUploadRequestParams("POST",n,o.Chunked,i,null,r);return this._beginRequest(u)},u.prototype._uploadAttachment=function(n,i,u,f,e,s,h){function y(){var t;$.isFunction(u.slice)&&(!e||e())?t=u.slice(v,l+1):c.reject();var n=new FileReader,i=!1,r=function(n){i=!0;c.reject(n)};try{n.readAsArrayBuffer(t)}catch(o){r(o)}n.onerror=function(n){r(n)};n.onloadend=function(){if(!i&&n.readyState===n.DONE){var t=$.extend(p,{data:new Uint8Array(n.result),isRawData:!0,customHeaders:{"Content-Range":"bytes "+v+"-"+l+"/"+a}});w._beginRequest(t).then(function(){return l<a-1?(v+=f,l=Math.min(l+f,a-1),y()):c.resolve(),null},function(n){return c.reject(n)})}}}var c;c=jQuery.Deferred();(!f||f<=0)&&(f=t.DefaultAttachmentChunkSize);var a=u.size,v=0,l=Math.min(f,a)-1,p=this._getAttachmentUploadRequestParams("PUT",n,o.Chunked,h,i,s),w=this;return y(),c.promise()},u.prototype._getAttachmentUploadRequestParams=function(n,i,r,u,e,o){var s={area:f.WitConstants.AreaName,locationId:t.AttachmentsLocationId,queryParams:{uploadType:r,areaPath:u,fileName:o},routeValues:{project:i},httpMethod:n,apiVersion:f.WitConstants.DefaultReleaseApiVersion};return e?$.extend(s,{routeValues:{id:e,project:i}}):s},u.prototype._getDefaultParameters=function(){return{"api-version":f.WitConstants.DefaultReleaseApiVersion}},u.QueryLocation={id:f.WitConstants.QueriesLocationId,area:f.WitConstants.AreaName,maxVersion:"2.0",minVersion:"2.0",releasedVersion:"2.0",resourceName:"queries",resourceVersion:2,routeTemplate:"{project}/_apis/{area}/{resource}/{*query}"},u.WorkItemTypeFieldsLocation={id:f.WitConstants.WorkItemTypeFieldsLocationId,area:f.WitConstants.AreaName,maxVersion:"2.0",minVersion:"1.0",releasedVersion:"1.0",resourceName:"workItemTypesField",resourceVersion:1,routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}"},u.AttachmentsLocation={id:t.AttachmentsLocationId,area:f.WitConstants.AreaName,resourceName:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",resourceVersion:1,minVersion:"1.0",maxVersion:"2.0",releasedVersion:"1.0"},u}(u.VssHttpClient);t.WorkItemTrackingHttpClient=s});

define("TFS/WorkItemTracking/BatchRestClient",["require","exports","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u){"use strict";function e(){return i.getClient(f)}Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.WorkItemTrackingHttpBatchClient=void 0;var f=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._batchApiVersion="4.0-preview",i}return __extends(t,n),t.prototype.createWorkItemsBatch=function(n,t,i){for(var f,u=[],e="/".concat(t,"/_apis/wit/workitems/$").concat(i,"?api-version=").concat(this._batchApiVersion),r=0,o=n.length;r<o;r++)f={method:"PATCH",uri:e,headers:{"Content-Type":"application/json-patch+json"},body:n[r]},u.push(f);return this._beginBatchRequest(u)},t.prototype.updateWorkItemsBatch=function(n){var t=this,i=n.map(function(n){return t._createBatchRequest(n[0],"PATCH","workItems",n[1])});return this._beginBatchRequest(i)},t.prototype.destroyWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"DELETE","recyclebin");return this._beginBatchRequest(t)},t.prototype.restoreWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"PATCH","recyclebin",[{op:"replace",path:"/IsDeleted",value:!1}]);return this._beginBatchRequest(t)},t.prototype.deleteWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"DELETE","workItems");return this._beginBatchRequest(t)},t.prototype.getQueriesBatch=function(n){var t=this._createBatchRequests(n,"GET","queries");return this._beginQueryBatchRequest(t)},t.prototype._createBatchRequests=function(n,t,i,r){for(var e,f=[],u=0,o=n.length;u<o;u++)e=this._createBatchRequest(n[u],t,i,r),f.push(e);return f},t.prototype._createBatchRequest=function(n,t,i,r){return{method:t,uri:"/_apis/wit/".concat(i,"/").concat(n,"?api-version=").concat(this._batchApiVersion),headers:{"Content-Type":"application/json-patch+json"},body:r}},t.prototype._beginBatchRequest=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"A5AD93C8-56B7-4CB0-A9C0-8419DBD7FC71",resource:"batch",routeTemplate:"_apis/{area}/${resource}",data:n})},t.prototype._beginQueryBatchRequest=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"batch",routeTemplate:"_apis/{area}/${resource}",data:n})},t.serviceInstanceId=u.ServiceInstanceTypes.TFS,t}(r.VssHttpClient);t.WorkItemTrackingHttpBatchClient=f;t.getClient=e});

define("VSS/Utils/Html",["require","exports","VSS/Diag","VSS/Utils/Array","VSS/Utils/String","VSS/Utils/Url"],function(n,t,i,r,u,f){var e,c,a,p;Object.defineProperty(t,"__esModule",{value:!0});t.Utils=t.TemplateEngine=t.HtmlNormalizer=void 0,function(n){function h(n,t){var i,r,u,f,e;if(t){if(Array.isArray(t)){for(i=0;i<t.length;i++)n[t[i].toUpperCase()]=0;return}for(r=0,u=Object.keys(t);r<u.length;r++)f=u[r],e=t[f],n[f.toUpperCase()]=e?e:0}}function c(n){h(e,n)}function t(n,t,i,u){var f={attributes:{},eolBefore:t,eolAfter:i};r[n.toUpperCase()]=f;h(f.attributes,u)}function v(n){(n||[]).forEach(function(n){return t(n,!1,!1)})}function nt(n){(n||[]).forEach(function(n){return l[n.toUpperCase()]=0})}function y(){r||(r={},t("a",!1,!1,{charset:0,href:0,hreflang:0,name:0,rel:0,rev:0,shape:0,tabindex:0,target:{_BLANK:0},type:0}),t("blockquote",!0,!0,["cite"]),t("br",!1,!0,["clear"]),t("caption",!0,!0,["align"]),t("col",!0,!0,["align","char","charoff","span","valign","width"]),t("colgroup",!0,!0,["align","char","charoff","span","valign","width"]),t("del",!1,!1,["cite","datetime"]),t("dir",!0,!0,["compact"]),t("div",!0,!0,["align"]),t("dl",!0,!0,["compact"]),t("font",!1,!1,["color","face","size"]),t("h1",!0,!0,["align"]),t("h2",!0,!0,["align"]),t("h3",!0,!0,["align"]),t("h4",!0,!0,["align"]),t("h5",!0,!0,["align"]),t("h6",!0,!0,["align"]),t("hr",!0,!0,["align","size","width"]),t("img",!1,!1,["align","alt","border","height","hspace","ismap","longdesc","name","src","usemap","vspace","width","alt2","src2"]),t("video",!0,!0,["border","height","src","width","controls","poster","muted","loop"]),t("ins",!1,!1,["cite","datetime"]),t("li",!0,!0,["type","value"]),t("map",!1,!1,["name"]),t("menu",!0,!0,["compact"]),t("input",!0,!0,{checked:0,disabled:0,type:{CHECKBOX:0,TEXT:0}}),t("ol",!0,!0,["compact","start","type"]),t("p",!0,!0,["align"]),t("pre",!0,!0,["width"]),t("q",!1,!1,["cite"]),t("table",!0,!0,["align","border","cellpadding","cellspacing","frame","rules","summary","width","caption"]),t("tbody",!1,!1,["align","char","charoff","valign"]),t("td",!0,!0,["abbr","align","axis","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"]),t("tfoot",!0,!0,["align","char","charoff","valign"]),t("th",!0,!0,["abbr","align","axis","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"]),t("thead",!0,!0,["align","char","charoff","valign"]),t("tr",!0,!0,["align","char","charoff","valign"]),t("ul",!0,!0,["compact","type"]),t("dd",!0,!0,[]),t("dt",!0,!0,[]),t("details",!1,!1,["open"]),v(["abbr","acronym","address","b","bdo","big","center","cite","code","dfn","em","i","summary","figure","figcaption"]),v(["kbd","s","samp","small","span","strike","strong","sub","sup","tt","u","var","mark"]),v(["annotation","math","mfrac","mi","mn","mo","mover","mrel","mrow","mspace","msqrt","mstyle","msub","msubsup","msup","mtext","semantics"]))}function p(){var i,r,n,t,f,e;if(!u){for(u={},i=["b","i","u","em","small","strong","sub","sup","ins","del","mark","font","code","pre","h1","h2","h3","h4","h5","h6","strike","ul","ol","dl","table","tbody","colgroup","col","tfoot","thead"],r={li:{tagToReplace:"p"},dt:{tagToReplace:"p"},dd:{tagToReplace:"p"},tr:{tagToReplace:"div"},th:{tagToReplace:"span",afterTagText:" "},td:{tagToReplace:"span",afterTagText:" "}},n=0;n<i.length;n++)u[i[n].toUpperCase()]={tagToReplace:""};for(t=0,f=Object.keys(r);t<f.length;t++)e=f[t],u[e.toUpperCase()]=r[e]}}function tt(){l||(l={},nt(["script","style","option","select","textarea"]))}function it(){e||(e={},c(["dir","lang","title","style","id","class","contenteditable"]),c({role:{BUTTON:0,CHECKBOX:0,CELL:0,COLUMNHEADER:0,COMBOBOX:0,GRID:0,GRIDCELL:0,HEADING:0,LINK:0,LISTBOX:0,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:0,RADIOGROUP:0,ROW:0,ROWGROUP:0,ROWHEADER:0,SWITCH:0,TAB:0,TABLIST:0,TOOLTIP:0,TREE:0,TREEGRID:0,TREEITEM:0}}),c(["aria-label","aria-labelledby","aria-describedby"]),c({"aria-hidden":{TRUE:0,FALSE:0}}),c({"aria-disabled":{TRUE:0,FALSE:0}}))}function rt(){o||(o={},h(o,["src","href","cite","longdesc"]),h(o,["background-image","list-style-image"]))}function ut(){if(!s){s={};var n=function(n,t){return n&&n.toUpperCase()==="IMG"&&t&&t.toUpperCase()==="SRC"};s.BLOB=function(t,i,r){if(!n(t,i))return!1;var e=r.indexOf(":"),u=r.substr(e+1);return u.indexOf(":")>=0?f.isSafeProtocol(u):!0};s.DATA=function(t,i,r){return n(t,i)?r.toUpperCase().search("DATA:IMAGE/\\w+;")===0:!1}}}function ft(){a||(a={},h(a,["background","background-attachment","background-color","background-image","background-position","background-repeat","border","border-bottom","border-bottom-color","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-style","border-top-width","border-width","break-after","break-before","break-inside","caption-side","clear","color","float","font","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","table-layout","text-align","text-decoration","text-indent","text-transform","vertical-align","white-space","width","word-spacing"]))}function et(n,t){return n&&t?n.toUpperCase()===t.toUpperCase():!1}function ot(n){return n?(y(),n.toUpperCase()in r):!1}function st(n){return w(n,!0)}function ht(n){return w(n,!1)}function w(n,t){if(n){y();var i=n.toUpperCase();if(i in r)return t?r[i].eolBefore:r[i].eolAfter}return!1}function ct(n){if(n){p();var t=u[n.toUpperCase()];if(t!==undefined&&t.tagToReplace!=null&&t.tagToReplace.length===0)return!0}return!1}function lt(n){if(n){p();var t=u[n.toUpperCase()];if(t&&t.tagToReplace&&t.tagToReplace.length>0)return t}return null}function at(n){return n?(tt(),n.toUpperCase()in l):!1}function vt(n,t,i){var s;if(t){it();var u=t.toUpperCase(),f=i.invalidAttributes,o=i.validAttributes;if(f&&o&&u in f&&u in o)throw new Error("".concat(u," is specified in additionalInvalidAttributes and additionalValidAttributes. Attributes may only appear in either the whitelist or blacklist."));if(o&&u in o)return!0;if(u in e)return f&&u in f?!1:!0;if(n&&(y(),s=r[n.toUpperCase()],s))return u in s.attributes}return!1}function yt(n,t,i){var f=t.toUpperCase(),u=r[n.toUpperCase()].attributes[f];return u?i.toUpperCase()in u:(u=e[f],u)?i.toUpperCase()in u:!0}function b(n){return n&&(rt(),n.toUpperCase()in o)?!0:!1}function k(n,t,i,r){var u,e,o;return(e=i.indexOf(":"),e<0||f.isSafeProtocol(i))?!0:(o=i.substr(0,e),r.invalidProtocols&&o.toUpperCase()in r.invalidProtocols)?!1:(ut(),u=s[o.toUpperCase()],$.isFunction(u)&&u(n,t,i)===!0)?!0:!1}function pt(n,t){if(n){if(ft(),n=n.toUpperCase(),t.invalidStyles&&n in t.invalidStyles)return!1;if(t.validStyles&&n in t.validStyles||n in a)return!0}return!1}function d(n){var t=n;return t?(t=t.replace(/&/g,"&amp;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/>/g,"&gt;"),t.replace(/</g,"&lt;")):""}function g(n,t,i){i=i||'"';var r=$("<div bogusAttribute="+i+t+i+">");return r.attr("bogusAttribute")}function wt(n,t,i){var u=[],r;return(t.split(";")||[]).forEach(function(t){if(t=(t||"").trim(),t){var f=t.split(":",2),r=(f[0]||"").trim(),e=r.toUpperCase();f.length===2&&pt(r,i)&&(!b(r)||k(n,r,(f[1]||"").trim(),i))&&u.push(t)}}),r=u.join(";"),r?'style="'+d(r)+'"':""}function bt(n,t){var r,u;if(n&&t)try{return r=g(n,t,""),decodeURI(r),u=decodeURI(f.Uri.parse(encodeURI(r)).absoluteUri),n.replace(t,d(u))}catch(e){return n.replace(t,"Invalid uri value")}return n}function kt(n,t,i,r,u,f,e,o){var s=i.substr(r,u);if(b(t)){if(k(n,t,$.trim(g(t,s,f)),e))return bt(i,s)}else{if(t.toUpperCase()==="STYLE")return wt(n,s,e);if(yt(n,t,s))return o&&"A"===n.toUpperCase()&&"TARGET"===t.toUpperCase()&&"_BLANK"===s.toUpperCase()&&o.updateAttribute("rel","noopener noreferrer"),i}return""}var r,l,e,o,s,a,u;n.areTagsEqual=et;n.isAllowedTag=ot;n.shouldAddEolBeforeTag=st;n.shouldAddEolAfterTag=ht;n.isFormattingRemovalTag=ct;n.getFormattingReplacementTag=lt;n.isSpecialTag=at;n.isAllowedAttribute=vt;n.cleanAttribute=kt}(e||(e={})),function(n){function s(n){return n>="0"&&n<="9"||n>="A"&&n<="Z"||n>="a"&&n<="z"?!0:!1}function i(n,t){u.lastIndex=t;var i=u.exec(n);return i?i.index:n.length}function h(n,t){f.lastIndex=t;var i=f.exec(n);return i?i.index:n.length}function t(n,t,i){var r=n.indexOf(i,t);return r>=0?r+i.length:n.length}function r(n,t){o.lastIndex=t;var i=o.exec(n);return i?{offset:i.index,name:n.substr(t,i.index-t)}:{offset:n.length,name:n.substr(t,n.length-t)}}function c(n,u,f){for(var c=n.length,o=0,p,l,w,g,b,a,v,it,nt,k,tt,d,y;o<c;){if(l=o,o=n.indexOf("<",o),o<0&&(o=c),o>l){u.writeText(n,l,o-l);continue}if(l=o++,p=n.charAt(o),o<c&&p==="!"){if(o++,o+1<c&&n.substr(o,2)==="--"){o+=2;o=t(n,o,"-->");continue}if(o+6<c&&n.substr(o,7)==="[CDATA["){o+=7;o=t(n,o,"]\]>");continue}o=t(n,o,">");continue}if(o<c&&p==="?"){o++;o=t(n,o,">");continue}if(b=!1,o<c&&p==="/"&&(b=!0,o++),o=i(n,o),a=r(n,o),o=a.offset,v=a.name,e.isSpecialTag(v)){for(o=t(n,o,">");o<c;)if(o=t(n,o,"<"),o+2<c&&n.substr(o,3)==="!--")o=t(n,o,"-->");else if(o<c&&n.charAt(o)==="/"){if(o++,o=i(n,o),a=r(n,o),o=a.offset,it=a.name,e.areTagsEqual(v,it)){o=t(n,o,">");break}}else o<c&&o++;continue}if(!e.isAllowedTag(v)||f.removeFormatting&&e.isFormattingRemovalTag(v))if(f.encodeUnknownText){u.writeEncodedText(n,l,o-l);continue}else{o=t(n,o,">");continue}if(d=v,y=null,f.removeFormatting&&(y=e.getFormattingReplacementTag(v),y&&y.tagToReplace.length!==0)){d=y.tagToReplace;o=t(n,o,">");u.writeTag(n,l,d,b);b&&y.afterTagText!=null&&y.afterTagText.length>0&&u.writeText(y.afterTagText,0,y.afterTagText.length);continue}for(u.writeTag(n,l,d,b);o<c;){if(l=o,o=i(n,o),o<c&&n.charAt(o)==="/"&&o++,o<c&&n.charAt(o)===">"){o++;u.writeEndOfTag(n,l,o-l,d);break}if(o<c&&s(n.charAt(o))){if(a=r(n,o),o=a.offset,nt=a.name,o=i(n,o),w=0,g=0,o<c&&n.charAt(o)==="=")if(o++,o=i(n,o),w=o,p=n.charAt(o),k=null,o<c&&(p==="'"||p==='"')){for(k=p,o++,w=o;o<c&&n.charAt(o)!==k;)o++;g=o;o<c&&n.charAt(o)===k&&o++}else o=h(n,o),g=o;e.isAllowedAttribute(v,nt,f)&&(tt=e.cleanAttribute(v,nt,n.substr(l,o-l),w-l,g-w,k,f,u),tt&&u.writeAttribute(tt));continue}o<c&&n.charAt(o)!==">"&&o++}}}var u=/\S/g,f=/[\s|>]/g,o=/[^\w\:\-]/g;n.parse=c}(c||(c={}));var s=function(){function n(n){this.text=n}return n.prototype.render=function(n){n.append(this.text)},n}(),o=function(){function n(n,t){this.tag=n.toUpperCase();this.root=t===!0}return n._getEmptyTags=function(){if(!n._emptyTags){var t={};t.AREA=!0;t.BASE=!0;t.BASEFONT=!0;t.BGSOUND=!0;t.BR=!0;t.COL=!0;t.EMBED=!0;t.FRAME=!0;t.HR=!0;t.IMG=!0;t.INPUT=!0;t.ISINDEX=!0;t.LINK=!0;t.META=!0;t.PARAM=!0;t.WBR=!0;t.IFRAME=!1;t.MARQUEE=!1;n._emptyTags=t}return n._emptyTags},n.hasEndTag=function(n){var t=this._getEmptyTags(),i=!0;return n in t&&(i=!t[n]),i},n.canTagHaveChild=function(n){var t=this._getEmptyTags();return!(n in t)},n.prototype.getChildren=function(){return this._children||(this._children=[]),this._children},n.prototype.getAttributes=function(){return this._attributes||(this._attributes=[]),this._attributes},n.prototype.getHasClosingTag=function(){return this.empty===!0?!1:n.hasEndTag(this.tag)},n.prototype.getCanHaveChildren=function(){return this.tagClosed===!0?!1:n.canTagHaveChild(this.tag)},n.prototype.render=function(n){var t,r,i,u,e=!1,f;if(this.tag)for(n.append("<"),n.append(this.tag),i=this.getAttributes(),t=0,r=i.length;t<r;t++)n.append(" "),n.append($.trim(i[t]));if(u=this.getChildren(),u.length>0)for(e=!0,this.tag&&n.append(">"),t=0,r=u.length;t<r;t++)u[t].render(n);this.tag&&(e?(n.append("<\/"),n.append(this.tag),n.append(">")):this.getHasClosingTag()?(n.append("><\/"),n.append(this.tag),n.append(">")):(f=n.toString().slice(-1),f!=" "&&f!='"'&&f!="'"&&i&&i.length>0&&n.append(" "),n.append("/>")))},n}(),v=function(){function n(){this._strings=[]}return n.prototype.append=function(n){var t=this._strings;return n&&(t[t.length]=n),this},n.prototype.clear=function(){return this._strings=[],this},n.prototype.toString=function(){return this._strings.join("")},n}(),y=function(){function n(){this._textAccumulator="";this._lastWriteWasEol=!0}return n.prototype.writeText=function(n,t,i){this._textAccumulator+=n.substr(t,i);this._lastWriteWasEol=!1},n.prototype.writeEncodedText=function(n,t,i){this._textAccumulator+=u.htmlEncode(n.substr(t,i));this._lastWriteWasEol=!1},n.prototype.writeTag=function(n,t,i,r){var u=i.toUpperCase();(r?e.shouldAddEolAfterTag(i):e.shouldAddEolBeforeTag(i))&&this._writeEols()},n.prototype.writeEndOfTag=function(){},n.prototype.writeAttribute=function(){},n.prototype.updateAttribute=function(){},n.prototype.finish=function(){},n.prototype.toString=function(){return this._textAccumulator.replace("\u00a0\r\n","\r\n").trim()},n.prototype._writeEols=function(){this._lastWriteWasEol||(this._textAccumulator+="\r\n",this._lastWriteWasEol=!0)},n}(),h=function(){function n(){this.root=new o("",!0);this.elements=[]}return n.prototype.writeText=function(n,t,i){var r=this.elements;r[r.length]=new s(n.substr(t,i))},n.prototype.writeEncodedText=function(n,t,i){var r=this.elements;r[r.length]=new s(u.htmlEncode(n.substr(t,i)))},n.prototype.writeTag=function(n,t,i,r){var u,h,c=this.elements,e,f,l=i.toUpperCase();if(r===!0){for(f=[];c.length>0;)if(h=c.pop(),h instanceof s)f[f.length]=h;else if(u=h,u.tag!==l||u.tagClosed){if(u.getCanHaveChildren())for(e=h.getChildren();f.length>0;)e[e.length]=f.pop();f[f.length]=u;u=null}else break;for(u||(u=new o(i)),e=u.getChildren();f.length>0;)e[e.length]=f.pop()}else u=new o(i);u.tagClosed=r;c[c.length]=u},n.prototype.writeEndOfTag=function(n,t,i,r){var u,f,e=this.elements,s=r.toUpperCase();i>1&&(f=n.substr(t,i),f.charAt(f.length-2)==="/"&&e.length>0&&(u=e[e.length-1],u instanceof o&&u.tag===s&&(u.empty=!0,u.tagClosed=!0)))},n.prototype.writeAttribute=function(n){var t,i=this.elements;i.length>0&&(t=i[i.length-1],t instanceof o&&t.getAttributes().push(n))},n.prototype.updateAttribute=function(n,t){var f=this.elements,e=f[f.length-1];if(e instanceof o){var i=e.getAttributes(),s=r.findIndex(i,function(t){return u.startsWith(t.trim().toUpperCase(),n.toUpperCase())}),h=" ".concat(n,'="').concat(t,'"');s===-1?i.push(h):i[s]=h}},n.prototype.finish=function(){for(var t,u=this.elements,f=this.root,n=[],i,r;u.length>0;)if(t=u.pop(),t instanceof s)n[n.length]=t;else{if(t.getCanHaveChildren())for(i=t.getChildren();n.length>0;)i[i.length]=n.pop();n[n.length]=t}for(r=f.getChildren();n.length>0;)r[r.length]=n.pop()},n.prototype.toString=function(){var n=new v;return this.root.render(n),n.toString()},n}(),l;(function(n){function t(n){var i=null,t,r,u;if(n)for(i={},t=0,r=n;t<r.length;t++)u=r[t],i[u.toUpperCase()]=0;return i}function i(n){return n===void 0&&(n={}),{invalidAttributes:t(n.additionalInvalidAttributes),validAttributes:t(n.additionalValidAttributes),invalidStyles:t(n.additionalInvalidStyles),validStyles:t(n.additionalValidStyles),removeFormatting:n.removeFormatting||!1,encodeUnknownText:n.encodeUnknownText||!1,invalidProtocols:t(n.additionalInvalidProtocols)}}function u(n){var t=new h;return r(n,t,i())}function f(n,t,u,f,e,o,s){var c=new h;return r(n,c,i({additionalInvalidAttributes:t,additionalValidAttributes:u,additionalInvalidStyles:f,additionalValidStyles:e,encodeUnknownText:o,additionalInvalidProtocols:s}))}function e(n){var t=new h;return r(n,t,i({additionalInvalidAttributes:["CLASS","STYLE"],removeFormatting:!0}))}function o(n){var t=new h;return r(n,t,i({encodeUnknownText:!0}))}function s(n){var t=new y;return r(n,t,i({encodeUnknownText:!0}))}function r(n,t,i){return c.parse(n,t,i),t.finish(),t.toString()}n.normalize=u;n.normalizeStripAttributes=f;n.removeFormatting=e;n.sanitize=o;n.convertToPlainText=s})(l=t.HtmlNormalizer||(t.HtmlNormalizer={}));a=function(){function n(){}return n._replaceSimpleTemplateTokens=function(t,i){for(var r=t,e=/\$\{([^\$\}]+)\}/ig,u,o,f;(u=e.exec(r))!==null;)o=u[1],f=n._getEncodedTextPropertyValue(i,o),r=n._replaceMatch(r,u,f),e.lastIndex=u.index+f.length;return r},n._replaceUnencodedTemplateTokens=function(t,i){for(var r=t,e=/\{\{html ([^\$\}]+)\}\}/ig,u,o,f;(u=e.exec(r))!==null;)o=u[1],f=n._getTextPropertyValue(i,o),r=n._replaceMatch(r,u,f),e.lastIndex=u.index+f.length;return r},n._replaceForEachTemplateTokens=function(t,i){for(var f=t,a=/\{\{each \s*([^ \}]+)\}\}((?:.|\r|\n)*)\{\{\/each\}\}/ig,c=/\$\{\$value(?:\.([^\}]+))?\}/ig,r,v,y,e,o,s,p,l,u,h,w;(r=a.exec(f))!==null;){if(v=r[1],y=r[2],e="",o=n._getPropertyValue(i,v),$.isArray(o))for(h=0,w=o.length;h<w;h+=1){for(u=y,c.lastIndex=0;(s=c.exec(u))!==null;)p=s[1],l=n._getEncodedTextPropertyValue(o[h],p),u=n._replaceMatch(u,s,l),c.lastIndex=s.index+l.length;e+=u}f=n._replaceMatch(f,r,e);a.lastIndex=r.index+e.length}return f},n._replaceMatch=function(n,t,i){return n.substring(0,t.index)+i+n.substring(t.index+t[0].length)},n._getEncodedTextPropertyValue=function(t,i){var r=n._getPropertyValue(t,i);return r===undefined?"":u.htmlEncode(r.toString())},n._getTextPropertyValue=function(t,i){var r=n._getPropertyValue(t,i);return r===undefined?"":r.toString()},n._getPropertyValue=function(n,t){if(t===undefined||t.length===0)return n;for(var r=t.split("."),i=n;r.length>0&&i!==undefined;)i=i[r.shift()];return i},n.tmpl=function(t,i){var r=t;return r=n._replaceSimpleTemplateTokens(r,i),r=n._replaceUnencodedTemplateTokens(r,i),n._replaceForEachTemplateTokens(r,i)},n}();t.TemplateEngine=a,function(n){function t(t){if(t===null||t===undefined)return!0;if(t.length>=n.ISEMPTY_MINIMAL_CONTENT_LENGTH)return!1;var i=l.removeFormatting(t);return i===""||i==="<BR>"||i==="<BR/>"||i==="<P>&nbsp;<\/P>"||i==="<P><\/P>"||i==="<P><BR/><\/P>"||i==="<BR>\r\n"||i==="<BR>\r\n"||i==="<DIV><BR/><\/DIV>"||i==="<DIV><DIV><BR/><\/DIV><\/DIV>"}n.ISEMPTY_MINIMAL_CONTENT_LENGTH=500;n.isEmpty=t}(p=t.Utils||(t.Utils={}))});

define("WorkItemTracking/Scripts/CustomerIntelligence",["require","exports"],function(n,t){var i,r,u,f,e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.BUTTON_CLICKED=t.SHORTCUT_KEYDOWN=t.CustomerIntelligencePropertyValue=t.PerformanceEvents=t.WITUserScenarioActions=t.WITPerformanceScenarioEvent=t.WITPerformanceScenario=t.WITCustomerIntelligenceFeature=t.WITCustomerIntelligenceArea=void 0;i=function(){function n(){}return n.WORK_ITEM_TRACKING="WIT",n.WORK_ITEM_TRACKING_MOBILE="WIT_MOBILE",n.NEW_QUERIES_EXPERIENCE="NEW_QUERIES",n.WORK_ITEM_TRACKING_NEWNAV="WIT_NEWNAV",n}();t.WITCustomerIntelligenceArea=i;r=function(){function n(){}return n.CLIENTSIDEOPERATION_SEND_EMAIL="SendEmail",n.CLIENTSIDEOPERATION_OPEN_WORK_ITEM_IN_NEW_TAB="OpenWorkItemInNewTab",n.CLIENTSIDEOPERATION_PREFETCH_NEXT_WORKITEM="PrefetchNextWorkitemInTriageView",n.CLIENTSIDEOPERATION_BACK_TO_QUERY_RESULTS="BackToQueryResults",n.CLIENTSIDEOPERATION_MAXIMIZE_RICH_EDITOR="MaximizeRichEditor",n.CLIENTSIDEOPERATION_QUERY_SOFTCAP_LINK="QuerySoftCapLink",n.CLIENTSIDEOPERATION_COPY_SELECTION_AS_HTML="CopySelectionAsHtml",n.CLIENTSIDEOPERATION_WORK_ITEM_FINDER="WorkItemFinder",n.CLIENTSIDEOPERATION_QUERYACROSSPROJECTS="QueryAcrossProjects",n.CLIENTSIDEOPERATION_QUERY_WORK_ITEM="QueryWorkItem",n.CLIENTSIDEOPERATION_CREATE_QUERY="CreateQuery",n.CLIENTSIDEOPERATION_CHANGE_QUERY_COLUMNS="ChangeQueryColumns",n.CLIENTSIDEOPERATION_WIT_CLONE="CloneWorkItem",n.CLIENTSIDEOPERATION_QUERY_RESULTS_PROVIDER="QueryResultsProvider",n.CLIENTSIDEOPERATION_COPY_WORKITEM_LINK="WorkItem.CopyWorkItemLink",n.CLIENTSIDEOPERATION_INCLUDE_WORKITEM_LINKS_ATTACHMENTS="WorkItem.IncludeWorkItemLinksAndAttachments",n.CLIENTSIDEOPERATION_COPY_WITH_CHILDREN="WorkItem.CopyWithChildren",n.CLIENTSIDEOPERATION_TOOLBAR_CLICK="WorkItem.ToolbarButtonClicks",n.CLIENTSIDEOPERATION_WIT_TABSELECTION="WorkItem.TabSelection",n.CLIENTSIDEOPERATION_WIT_GROUPCOLLAPSED="WorkItem.GroupCollapsed",n.CLIENTSIDEOPERATION_WIT_SAVING="WorkItem.Saving",n.CLIENTSIDEOPERATION_WIT_CSSNODECACHEINVALIDATED="CSSNodes.CacheInvalidated",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONOPENED="WorkItem.DiscussionOpened",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONMESSAGESLOADED="WorkItem.DiscussionMessagesLoaded",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONCOMMENTSUBMITTED="WorkItem.DiscussionCommentSubmitted",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONUNSAVEDPREVIEW="WorkItem.DiscussionUnsavedPreview",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONRETURNTOUNSAVEDCOMMENT="WorkItem.DiscussionReturnToUnsavedComment",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONPREVIEWCLICKED="WorkItem.DiscussionPreviewClicked",n.RESULT_FILTER="ResultFilter",n.CLIENTSIDEOPERATION_VS_WORKITEM_NOT_IN_QUERY_RESULTS="VSOpenInWeb.WorkItemNotInQueryResult",n.WORKITEMPANECHANGED="WorkItemPaneChanged",n.WI_FORM_CONTRIBUTION="FormContribution",n.IMPORTCSV_IMPORT="ImportCsv.Import",n.IMPORTCSV_IMPORT_ERROR="ImportCsv.Import.Error",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL="WorkItemMove.CancelMove",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL_AFTER_HIDDEN_TYPE_FAILED="WorkItemMove.CancelAfterHiddenTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL_AFTER_TYPE_FAILED="WorkItemMove.CancelAfterTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_SUCCEED_AFTER_TYPE_FAILED="WorkItemMove.PassAfterTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_PERMISSIONS_ERROR="WorkItemMove.PermissionsError",n.CLIENTSIDEOPERATION_WIT_MOVE_REVERT="WorkItemMove.Revert",n.CLIENTSIDEOPERATION_WIT_MOVE_SUCCESS="WorkItemMove.Success",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_REVERT="WorkItemChangeType.Revert",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_CANCEL_AFTER_FAIL="WorkItemChangeType.CancelAfterFailed",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_CANCEL_AFTER_OPEN="WorkItemChangeType.CancelAfterOpen",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_SUCCESS="WorkItemChangeType.Success",n.BULK_EDIT_TAGS="BulkEditTags",n.TELEMETRY_ASSIGNTO_POPULATEMENU="AssignTo.PopulateMenu",n.TELEMETRY_OPENWORKITEM_CONTEXTMENU="OpenWorkItemConextMenu",n.WORKITEM_DISCUSSIONCONTROL="WorkItemDiscussion",n.WORKITEM_VIEWFOLLOWS="ViewWorkItemFollows",n.WORKITEM_BULKUNFOLLOWS="BulkUnfollows",n.CLIENTSIDEOPERATION_RELATEDWORKITEMS_CONTROL_OPENWORKITEM="RelatedWorkItemsControlOpenWorkItem",n.NEWQUERYEXPERIENCE_NAVIGATE_PIVOT="NewQueries.NavigatePivot",n.NEWQUERYEXPERIENCE_WORKITEMNAVIGATOR="NewQueries.WorkItemNavigator",n.NEWQUERYEXPERIENCE_TRIAGEVIEWHUB_PIVOTCOMMAND="NewQueries.TriageViewHub.PivotCommand",n.NEWQUERYEXPERIENCE_QUERY_ACTION="NewQueries.QueryAction",n.NEWQUERYEXPERIENCE_MOVE_QUERY="NewQueries.MoveQuery",n.NEWQUERYEXPERIENCE_LEAVE_DIRTY="NewQueries.LeaveDirty",n.NEWQUERYEXPERIENCE_ADHOCQUERY_REDIRECTION="NewQueries.AdhocQuery.Redirection",n.NEWQUERYEXPERIENCE_LASTVISITED_REDIRECTION="NewQueries.LastVisited.Redirection",n.NEWQUERYEXPERIENCE_NAVIGATE_QUERIESPIVOT="NewQueries.Navigate.QueriesPivot",n.NEWQUERYEXPERIENCE_BREADCRUMB_CLICKED="NewQueries.Breadcrumb.Clicked",n.CUSTOMIZE_WORKITEM="WorkItemToolbar.Customize",n.QUERYCHARTS_NAVIGATE="QueryCharts.Navigate",n.QUERY_SEARCH="Query.Search",n.CLIENTSIDEOPERATION_WIT_FIELDKEYBOARDSHORTCUT="WorkItemForm.FieldKeyboardShortcut",n.NODES_CACHE_MANAGER="NodesCacheManager",n.CLASSIFICATION_MRU_VALUE_CHANGED="ClassificationFieldsMruValueChanged",n.WIT_CACHE_PROVIDER_INIT="WorkItemTracking.CacheProvider.Initialize",n.WIT_CACHE_PROVIDER_OPEN="WorkItemTracking.CacheProvider.OpenCache",n.WIT_WATCHDOG_OPEN_FORM="WorkItemTracking.WatchDog.OpenForm",n.LINKSCONTROL_SAMECATEGORY_WARNING="LinksControl.SameCategory.Warning",n.FILTER_METHOD_USAGE="WorkItemTracking.ExtensionFilterMethodUsage",n}();t.WITCustomerIntelligenceFeature=r;u=function(){function n(){}return n.WORKITEM_OPEN_NEWFORMDIALOG="WorkItem.Open.NewFormDialog",n.WORKITEM_RELATED_LINKING="WorkItem.Related.Linking",n.WORKITEMFORM_FOLLOWS_ACTION_FOLLOW="WorkItemForm.Follows.Action.Follow",n.WORKITEMFORM_FOLLOWS_ACTION_UNFOLLOW="WorkItemForm.Follows.Action.Unfollow",n.WORKITEM_OPENFORM="WorkItem.OpenForm",n.WORKITEM_OPENFORM_NEWLAYOUT="WorkItem.OpenForm.NewLayout",n.WORKITEM_OPENFORM_CREATE_NEWLAYOUT="WorkItem.OpenForm.Create.NewLayout",n.WORKITEM_OPENDIALOG_NEWLAYOUT="WorkItem.OpenDialog.NewLayout",n.WORKITEM_OPENIDE_NEWLAYOUT="WorkItem.IDE.OpenForm.NewLayout",n.WORKITEM_SAVE="WorkItem.Save",n.WORKITEM_BULKSAVE="WorkItem.BulkSave",n.WORKITEM_CLOSED="WorkItem.Closed",n.WORKITEM_FIELDCHANGED="WorkItem.FieldChanged",n.QUERY_OPENRESULTS="Query.OpenResults",n.QUERY_SAVE="Query.Save",n.QUERY_SAVEAS="Query.SaveAs",n.QUERYHIERARCHY_LOAD="QueryHierarchy.Load",n.HISTORYVIEW_EXTENSION_LOAD="HistoryView.Extension.Load",n.WORKITEM_SIGNALR_REFRESHCOMPLETE="WorkItem.SignalR.RefreshComplete",n.WORKITEM_SIGNALR_REFRESHERROR="WorkItem.SignalR.RefreshError",n.WORKITEM_SIGNALR_ERROR="WorkItem.SignalR.Error",n.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS="QueriesHub.TriageView.OpenQueryResults",n.QUERIESHUB_TRIAGEVIEW_OPENBREADCRUMBQUERYRESULTS="QueriesHub.TriageView.OpenBreadcrumbQueryResults",n.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM="QueriesHub.TriageView.OpenWorkItem",n.QUERIESHUB_TRIAGEVIEW_SAVEEXISTINGQUERY="QueriesHub.TriageView.SaveExistingQuery",n.QUERIESHUB_QUERIESVIEW_OPENFAVORITESPIVOT="QueriesHub.QueriesView.OpenFavoritesPivot",n.QUERIESHUB_QUERIESVIEW_OPENALLQUERIESPIVOT="QueriesHub.QueriesView.OpenAllQueriesPivot",n}();t.WITPerformanceScenario=u;f=function(){function n(){}return n.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM_COMPLETE="QueriesHub.TriageView.OpenWorkItem.Complete",n.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS_COMPLETE="QueriesHub.TriageView.OpenQueryResults.Complete",n}();t.WITPerformanceScenarioEvent=f;e=function(){function n(){}return n.WORKITEM_CREATEOREDIT="WorkItem.CreateOrEdit",n}();t.WITUserScenarioActions=e;o=function(){function n(){}return n.WORKITEMRELATED_LINKING_COMPLETE="WorkItemRelated.Linking.Complete",n.WORKITEMDIALOG_CREATEWORKITEMFORM="WorkItemDialog.CreateWorkItemForm",n.WORKITEM_SAVE_COMPLETE="WorkItem.Save.Complete",n.WORKITEMFORM_INITIALIZE="WorkItemForm.Initialize",n.WORKITEMFORMBASE_INITIALIZE="WorkItemFormBase.Initialize",n.WORKITEMFORM_GETWORKITEM="WorkItemForm.GetWorkItems",n.WORKITEMFORM_BINDWORKITEM="WorkItemForm.BindWorkItem",n.WORKITEMFORM_UNBINDWORKITEM="WorkItemForm.UnBindWorkItem",n.WORKITEMTRACKING_GETPROJECTS_REQUEST="WorkItemTracking.GetProjects.Request",n.WORKITEMTRACKING_GETTYPES="WorkItemTracking.GetTypes",n.WORKITEMTRACKING_GETTYPES_REQUEST="WorkItemTracking.GetTypes.Request",n.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST="WorkItemTracking.GetTypeExtensions.Request",n.WORKITEMTRACKING_GETCONSTANTSETS="WorkItemTracking.GetConstantSets",n.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST="WorkItemTracking.GetConstantSets.Request",n.WORKITEMTRACKING_GETLINKTYPES_REQUEST="WorkItemTracking.GetLinkTypes.Request",n.WORKITEMTRACKING_GETREGISTEREDLINKFORMTYPES="WorkItemTracking.GetRegisteredLinkFormTypes",n.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMAPI="WorkItemTracking.GetMetadataCacheStamp.FromApi",n.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMPAGEDATA="WorkItemTracking.GetMetadataCacheStamp.FromPageData",n.WORKITEMTRACKING_GETNODES_REQUEST="WorkItemTracking.GetNodes.Request",n.WORKITEMTRACKING_GETFIELDS_REQUEST="WorkItemTracking.GetFields.Request",n.WORKITEMTRACKING_GETFIELDS_PROCESS="WorkItemTracking.GetFields.Process",n.WORKITEMTRACKING_GETLAYOUTUSERSETTINGS_REQUEST="WorkItemTracking.GetLayoutUserSettings.Request",n.WORKITEMTRACKING_UPDATE_AJAX="WorkItemTracking.Update.Ajax",n.WORKITEMTRACKING_TAKEUPDATERESULT="WorkItemTracking.TakeUpdateResult",n.WORKITEMTRACKING_EVALUATELINKUPDATES="WorkItemTracking.EvaluateLinkUpdates",n.WORKITEMTRACKING_RESETAFTERSAVE="WorkItemTracking.ResetAfterSave",n.WORKITEMTRACKING_CACHING="WorkItemTracking.Caching",n.WORKITEMSVIEW_INITIALIZE="WorkItemsView.Initialize",n.WORKITEMSVIEW_ENSUREVIEW="WorkItemsView.EnsureView",n.WORKITEMSVIEW_NAVIGATE="WorkItemsView.Navigate",n.WORKITEMSVIEW_GETQUERY="WorkItemsView.GetQuery",n.WORKITEMSVIEW_GETQUERYPROVIDER="WorkItemsView.GetQueryProvider",n.WORKITEMSVIEW_CREATELAYOUT="WorkItem.WorkItemView.CreateLayout",n.WORKITEMSVIEW_RENDERLAYOUT_CREATELABELANDTABS="WorkItem.WorkItemView.RenderLayout.CreateLabelAndTabs",n.WORKITEMSVIEW_RENDERLAYOUT_CREATECONTROLS="WorkItem.WorkItemView.RenderLayout.CreateControls",n.WORKITEMSVIEW_RENDERLAYOUT_TABIFYLAYOUT="WorkItem.WorkItemView.RenderLayout.TabifyLayout",n.WORKITEMSVIEW_APPENDELEMENT="WorkItem.WorkItemView.AppendElement",n.WORKITEMSVIEW_BIND="WorkItem.WorkItemView.Bind",n.WORKITEMSVIEW_BIND_CONTRIBUTIONS="WorkItem.WorkItemView.Bind.Contributions",n.WORKITEMSVIEW_BIND_EVENTS="WorkItem.WorkItemView.Bind.Events",n.WORKITEMSVIEW_ONRENDER="WorkItem.WorkItemView.OnRender",n.WORKITEMSVIEW_ATTACHLAYOUT="WorkItem.WorkItemView.AttachLayout",n.TRIAGEVIEW_QUERYRESULT="TriageView.QueryResult",n.TRIAGEVIEW_ENTER="TriageView.Enter",n.TRIAGEVIEW_AHOCREQUIRE_TRIAGEVIEW="TriageView.AdhocRequire.TriageView",n.TRIAGEVIEW_AHOCREQUIRE_QUERYRESULTINFOBAR="TriageView.AdhocRequire.QueryResultInfoBar",n.TRIAGEVIEW_ENSUREWORKITEMFORMMODULE="TriageView.EnsureWorkItemFormModule",n.QUERYHIERARCHY_POPULATE="QueryHierarchy.Populate",n.QUERYHIERARCHY_GETQUERYFAVORITES_REQUEST="QueryHierarchy.GetQueryFavorites.Request",n.QUERYHIERARCHY_POPULATEFOLDERTREE="QueryHierarchy.PopulateFolderTree",n.QUERYHIERARCHY_GETHIERARCHY_REQUEST="QueryHierarchy.GetHierarchy.Request",n.QUERYHIERARCHY_UPDATEFROMDATA="QueryHierarchy.UpdateFromData",n.QUERYHIERARCHY_ENSUREITEMINTREE="QueryHierarchy.EnsureItemInTree",n.QUERYHIERARCHY_BEGINGETQUERYBYPATHORID_REQUEST="QueryHierarchy.BeginGetQueryByIdOrPath.Request",n.QUERY_UPDATEADHOCQUERY_REQUEST="Query.UpdateAdHocQuery.Request",n.QUERY_UPDATEQUERY_REQUEST="Query.UpdateQuery.Request",n.QUERY_CREATEQUERY_REQUEST="Query.CreateQuery.Request",n.QUERY_GETQUERYTEXT="Query.GetQueryText",n.QUERIESHUB_INITIALIZE_QUERIESHUBCONTEXT="QueriesHub.Initialize.QueriesHubContext",n.QUERIESHUB_ACTIONS_GETALLQUERYITEMS_REQUEST="QueriesHub.Actions.GetAllQueryItems.Request",n.QUERIESHUB_ACTIONS_GETFAVORITEQUERYITEMS_REQUEST="QueriesHub.Actions.GetFavoriteQueryItems.Request",n.QUERIESHUB_ACTIONS_ENSUREROOTFOLDERS_REQUEST="QueriesHub.Actions.EnsureRootFolders.Request",n.QUERIESHUB_ACTIONS_ENSUREQUERYITEM_REQUEST="QueriesHub.Actions.EnsureQueryItem.Request",n.QUERIESHUB_ACTIONS_SEARCHQUERYITEMS_REQUEST="QueriesHub.Actions.SearchQueryItems.Request",n.QUERIESHUB_TRIAGEVIEW_COMPONENT_MOUNT="QueriesHub.TriageView.Component.Mount",n.QUERIESHUB_QUERYRESULTSPIVOT_COMPONENT_MOUNT="QueriesHub.QueryResultsPivot.Component.Mount",n.QUERIESHUB_QUERIESVIEW_COMPONENT_MOUNT="QueriesHub.QueriesView.Component.Mount",n.QUERIESHUB_QUERIESPIVOT_COMPONENT_MOUNT="QueriesHub.QueriesPivot.Component.Mount",n.QUERIESHUB_STORES_ACTIVEQUERYVIEWSTORE_CHANGEQUERYVIEW="QueriesHub.Stores.ActiveQueryViewStore.ChangeQueryView",n.QUERIESHUB_STORES_QUERYFAVORITEGROUPSTORE_INITIALIZEQUERYFAVORITEGROUPS="QueriesHub.Stores.QueryFavoriteGroupStore.InitializeQueryFavoriteGroups",n.QUERIESHUB_STORES_QUERYHIERARCHYITEMSTORE_INITIALIZEQUERYHIERARCHYITEM="QueriesHub.Stores.QueryHierarchyItemStore.InitializeQueryHierarchyItem",n.QUERIESHUB_STORES_QUERYHIERARCHYSTORE_INITIALIZEQUERYHIERARCHY="QueriesHub.Stores.QueryHierarchyStore.InitializeQueryHierarchy",n.QUERIESHUB_STORES_QUERYRESULTSPROVIDERSTORE_CHANGEQUERYRESULTSPROVIDER="QueriesHub.Stores.QueryResultsProviderStore.ChangeQueryResultsProvider",n}();t.PerformanceEvents=o;s=function(){function n(){}return n.VIEWTYPE_QUERY="Query",n}();t.CustomerIntelligencePropertyValue=s;t.SHORTCUT_KEYDOWN="keydown";t.BUTTON_CLICKED="buttonClick"});

define("WorkItemTracking/Scripts/Utils/NodeHelpers",["require","exports","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","TFS/WorkItemTracking/Contracts"],function(n,t,i,r){var f,u;Object.defineProperty(t,"__esModule",{value:!0});t.ClassificationNodeTypeConstants=t.NodeHelpers=void 0,function(n){function f(t){var i,r,u;if(t.children)for(i=0,r=t.children;i<r.length;i++)u=r[i],u.parent=t,n.link(u);return t}function e(n,t){var f=n.children,i,r,u;if(f)for(i=0,r=f;i<r.length;i++)if(u=r[i],u.structure===t)return u;return null}function o(t,i){var r,u,e,f;if(t){if(t.id===i)return t;if(t.children)for(r=0,u=t.children;r<u.length;r++)if(e=u[r],f=n.findById(e,i),f)return f}return null}function s(t,i){var r,u,e,f;if(t){if(t.guid===i)return t;if(t.children)for(r=0,u=t.children;r<u.length;r++)if(e=u[r],f=n.findByGuid(e,i),f)return f}return null}function h(n,t,i,r){var o=0,f,s,l=0,u,e,h,c;if(i!=null&&r==null)throw new Error("ArgumentNullError: stuctureType must be provided if structureLevel is provided");if(!n||!t)return null;for(t=t.replace(/^(\s|\u00A0|\\)+|(\s|\u00A0|\\)+$/g,""),c=t.toUpperCase().split("\\"),u=[n];u&&u.length>0&&o<c.length;){if(h=null,i!=null&&l++===i){for(e=[],f=0,s=u.length;f<s;f++)if(u[f].structure===r){e=u[f].children||[];break}u=e;continue}for(e=null,f=0,s=u.length;f<s;f++)if(u[f].name.toUpperCase()===c[o]){h=u[f];e=h.children;o++;break}u=e}return o===c.length?h:null}function c(n,t){for(var i=[];n;)i.unshift(n.name),n=n.parent;return typeof t=="number"&&i.splice(t,1),i}function l(n){var t=n.split("\\");return t.unshift(t[0]),t}function a(t,i){var r=n.getNodeSegments(t,i);return r.join("\\")}function v(n){return n.split("\\").slice(1).join("\\")}function t(n){var e=n.attributes?n.attributes.startDate:null,o=n.attributes?n.attributes.finishDate:null,f,s,h,c;if(e=typeof e=="string"?new Date(e):e,o=typeof o=="string"?new Date(o):o,f={id:n.id,structure:null,startDate:e,children:[],finishDate:o,guid:n.identifier,name:n.name,parent:null,type:null},n.structureType===r.TreeNodeStructureType.Area?(f.structure=i.INodeStructureType.Area,f.type=u.AreaType):n.structureType===r.TreeNodeStructureType.Iteration&&(f.structure=i.INodeStructureType.Iteration,f.type=u.IterationType),n.children)for(s=0,h=n.children;s<h.length;s++)c=h[s],f.children.push(t(c));return f}n.link=f;n.findChildByStructure=e;n.findById=o;n.findByGuid=s;n.findByPath=h;n.getNodeSegments=c;n.getReferencedNodeSegmenets=l;n.getPath=a;n.getRelativePath=v;n.mapClassificationNodesToLegacyNode=t}(f=t.NodeHelpers||(t.NodeHelpers={})),function(n){n[n.ProjectType=-42]="ProjectType";n[n.AreaType=-43]="AreaType";n[n.IterationType=-44]="IterationType"}(u=t.ClassificationNodeTypeConstants||(t.ClassificationNodeTypeConstants={}))});

define("WorkItemTracking/Scripts/Utils/WitControlMode",["require","exports","VSS/Diag","VSS/FeatureAvailability/Services","q","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/Service","VSS/Contributions/Services","VSS/WebApi/Constants"],function(n,t,i,r,u,f,e,o,s){function a(n){return n.configuration&&n.configuration.getMailSettings().enabled}function v(){return r.FeatureAvailabilityService.isFeatureEnabled("WebAccess.WorkItemTracking.MentionsReplyAll",!1)}function y(){return r.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.WebAccessWorkItemTrackingFormCommentServiceEditAndDeleteEnable,!1)}function p(){return r.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.WebAccessWorkItemTrackingEnableCommentReactions,!1)}function w(){return r.FeatureAvailabilityService.isFeatureEnabled("WebAccess.WorkItemTracking.Form.Comments.QuoteReply.Enabled",!1)}function b(){return r.FeatureAvailabilityService.isFeatureEnabled("WebAccess.WorkItemTracking.Form.CommentService.SharedUI.Enabled",!1)}function k(){return r.FeatureAvailabilityService.isFeatureEnabled("WebAccess.WorkItemTracking.EnableHtmlFieldsMentions",!1)}Object.defineProperty(t,"__esModule",{value:!0});t.isHtmlFieldsMentionsEnabled=t.useSharedCommentsUIEnabled=t.isQuoteReplyEnabled=t.isCommentReactionsEnabled=t.isNewCommentsServiceEditAndDeleteEnabled=t.isMentionsReplyAllEnabled=t.isFollowWorkItemEnabled=t.WitFormModeUtility=void 0;var h="ms.vss-work-web.work-item-layout-user-settings-data-provider",c="ms.vss-work-web.work-item-common-configuration-data-provider",l=function(){function n(){}return Object.defineProperty(n,"maxAttachmentSize",{get:function(){return n.settings.maxAttachmentSize},enumerable:!1,configurable:!0}),n.ensureWitFormModeLoaded=function(){if(n.loadLayoutPropertiesFromPageData(),n._shouldFetchData()){i.timeStamp("WorkItemOM.isNewFormEnabledCallback",i.StampEvent.Enter);var t=e.getService(o.WebPageDataService);return t.ensureDataProvidersResolved([{id:h,properties:{serviceInstanceType:s.ServiceInstanceTypes.TFS}},{id:c,properties:{serviceInstanceType:s.ServiceInstanceTypes.TFS}}]).then(function(){i.timeStamp("WorkItemOM.isNewFormEnabledCallback",i.StampEvent.Leave);n.loadLayoutPropertiesFromPageData()},function(){i.timeStamp("WorkItemOM.isNewFormEnabledCallback",i.StampEvent.Leave)})}return u(null)},n._shouldFetchData=function(){return!n.maxAttachmentSize},n.loadLayoutPropertiesFromPageData=function(){var t=e.getService(o.WebPageDataService),i=t.getPageData(h),r=t.getPageData(c);n.settings=__assign(__assign({},r),i)},n.settings={},n}();t.WitFormModeUtility=l;t.isFollowWorkItemEnabled=a;t.isMentionsReplyAllEnabled=v;t.isNewCommentsServiceEditAndDeleteEnabled=y;t.isCommentReactionsEnabled=p;t.isQuoteReplyEnabled=w;t.useSharedCommentsUIEnabled=b;t.isHtmlFieldsMentionsEnabled=k});

define("WorkItemTracking/Scripts/Utils/PerfScenarioManager",["require","exports","VSS/Diag","VSS/Events/Services","VSS/Performance","VSS/Utils/String","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Utils/WitControlMode"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.PerfScenarioManager=void 0;var s=function(){function n(){}return n.startScenario=function(t,i){return n.startScenarioWithOptions(t,{fromPageNavigation:i,isPageInteractive:i})},n.startScenarioWithOptions=function(t,i){t=n._appendSuffixIfMobile(t);n.abortScenario(t);var f=i.fromPageNavigation,s=f===void 0?!1:f,e=i.isPageInteractive,o=e===void 0?!1:e,r;return r=s?u.getScenarioManager().startScenarioFromNavigation(n._featureArea,t,o):u.getScenarioManager().startScenario(n._featureArea,t,undefined,o),n.addSplitTiming(r.getName(),!0),r},n.addSplitTiming=function(t,r,u,f){var e,o;u===void 0&&(u=!0);f===void 0&&(f=!0);e=r?"".concat(t,".Start"):"".concat(t,".Complete");n._addSplitTiming(e,f);u&&(o=r?i.StampEvent.Enter:i.StampEvent.Leave,i.timeStamp(t,o))},n.addSinglePointSplitTiming=function(t,r,u){r===void 0&&(r=!0);u===void 0&&(u=!0);n._addSplitTiming(t,u);r&&i.timeStamp(t,i.StampEvent.SinglePoint)},n._addSplitTiming=function(t,i){var o,r,f,e;if(i)for(o=n._getWitScenarios(),r=0,f=o;r<f.length;r++)e=f[r],e.isActive()&&e.addSplitTiming(t);else u.getScenarioManager().split(t)},n.addData=function(t){n._getWitScenarios().forEach(function(n){n.isActive()&&n.addData(t)})},n.abortScenario=function(t){for(var i,f=n._getScenarios(t),r=0,u=f;r<u.length;r++)i=u[r],i.isActive()&&(n.addSplitTiming(i.getName(),!1),i.abort())},n.endScenario=function(t,i){for(var f,e=n._getScenarios(t),o=function(t){if(t.isActive()){var r=t.getName();i&&t.addData(i);n.addSplitTiming(t.getName(),!1);t.end().then(function(){return n._fireScenarioCompletedEvents(r)})}},r=0,u=e;r<u.length;r++)f=u[r],o(f)},n.isScenarioActive=function(t){var i=n._getScenarios(t);return i&&i.some(function(n){return n&&n.isActive()})},n._getScenarios=function(t){t=n._appendSuffixIfMobile(t);var i=u.getScenarioManager().getScenarios(n._featureArea,t);return i.concat(u.getScenarioManager().getScenarios(n._featureArea,t))},n._getWitScenarios=function(){var t=[],r,i;for(r in e.WITPerformanceScenario)e.WITPerformanceScenario.hasOwnProperty(r)&&(i=e.WITPerformanceScenario[r],i=n._appendSuffixIfMobile(i),t=t.concat(u.getScenarioManager().getScenarios(n._featureArea,i)),t=t.concat(u.getScenarioManager().getScenarios(n._featureArea,i)));return t},n._appendSuffixIfMobile=function(t){return o.WitFormModeUtility.isMobileForm?"".concat(t).concat(n._mobileSuffix):t},n._fireScenarioCompletedEvents=function(n){f.startsWith(n,e.WITPerformanceScenario.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS)?r.getService().fire(e.WITPerformanceScenarioEvent.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS_COMPLETE,this):f.startsWith(n,e.WITPerformanceScenario.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM)&&r.getService().fire(e.WITPerformanceScenarioEvent.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM_COMPLETE,this)},n._featureArea=e.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,n._mobileSuffix=".Mobile",n}();t.PerfScenarioManager=s});

define("WorkItemTracking/Scripts/Utils/WorkItemRichTextHelper",["require","exports","VSS/Utils/String"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemRichTextHelper=void 0;var r;(function(n){function t(n,t,i){var u="<style>\nhtml, body\n{\n    height: 100%;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\nhtml {\n    overflow: hidden;\n}\nbody\n{\n    font-family: Segoe UI, Helvetica Neue, Helvetica, Arial, Verdana;\n    color: #222222;\n    background-color: #ffffff;\n    font-size: 14px;\n    word-break: break-word;\n    margin:0;\n    padding: 5px;\n    box-sizing: border-box;\n    overflow: auto;\n}\n\nbody.invalid\n{\n    background-color: #ffc;\n}\n\nP\n{\n    line-height: 1.5em;\n    margin: 0;\n}\n\nbody.watermark {\n    color: #999999;\n    font-style: italic;\n}\n\nimg \n{ \n    max-width: 100%; \n}\n\na, a:visited {\n    color: #007acc;\n}\n\n\na.mention-link {\n    text-decoration: none;\n}\n\n.mention-widget-workitem {\n    background: rgba(244, 244, 244, 1);\n    padding: 2px .333em;\n    display: inline;\n    word-break: break-word;\n    margin: 0 1px;\n    border-radius: 2px;\n    line-height: 24px;\n    font-style: normal;\n    font-weight: normal;\n    border-left: 2px solid transparent;\n}\n\n.mention-widget-workitem-no-access {\n    background: rgba(244, 244, 244, 1);\n    padding: 2px .333em;\n    display: inline;\n    word-break: break-word;\n    margin: 0 1px;\n    border-radius: 2px;\n    line-height: 24px;\n    font-style: normal;\n    font-weight: normal;\n}\n\n.mention-widget-workitem-typeid {\n    color: rgba(16, 110, 190, 1);\n}\n\n.mention-widget-workitem-title {\n    color: rgba(0, 0, 0, .9);\n    font-weight: 600;\n}\n\n.mention-widget-workitem-state {\n    border-left: 1px solid rgba(200, 200, 200, 1);\n    padding: 0px 8px 0px 4px;\n    display: inline-flex;\n    align-items: center;\n    margin: 4px 2px 4px 8px;\n    line-height: 14px;\n    vertical-align: bottom;\n    color: rgba(0, 0, 0, .9);\n    height: 16px;\n}\n\n.workitem-state-color {\n    border: 3px solid transparent;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    margin: 0px 4px;\n    background-clip: padding-box;\n}\n\n.mention-preview-person {\n    color: rgba(16, 110, 190, 1);\n    font-weight: bold;\n    background-color: rgba(244, 244, 244, 1);\n}\n\n.mention-preview-me {\n    color: rgba(218, 10, 0, 1);\n}\n\n.mention-preview-person-clickable {\n    cursor: pointer;\n}\n\n.mention-widget {\n    color: $communication-foreground;\n    cursor: pointer;\n}\n\n.mention-widget * {\n    cursor: pointer;\n}\n\n.mention-card {\n    box-shadow: 0 0 20px gray;\n}\n\n.work-item-type-icon-host {\n    display: inline-block;\n}\n\n.work-item-type-icon {\n    min-width: 14px;\n    display: inline;\n}\n\n.secondary-text {\n    color: rgba(0, 0, 0, .55)\n}\n\n.work-item-type-icon-no-tooltip {\n    margin-right: 5px;\n}\n\n.mention-widget-item {\n    background: rgba(244, 244, 244, 1);\n    padding: 0 .333em;\n    display: inline;\n    word-break: break-word;\n}\n\n.mention-widget-typeid {\n    color: rgba(16, 110, 190, 1);\n}\n\n.mention-widget-title {\n    color: rgba(0, 0, 0, .9)\n}\n\n".concat(i||"","\n<\/style>"),r="";return t&&(r+='<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">'),"<head>"+r+u+"<\/head>"}function r(n){var r=$.parseHTML(n),t=!0;return $.each(r,function(n,r){return t=r.textContent!==undefined&&r.textContent.trim()===i.empty&&(r.innerHTML===undefined||r.innerHTML!==undefined&&r.tagName!=="IMG"&&r.innerHTML.indexOf("img")===-1&&r.innerHTML.indexOf("li")===-1),t?void 0:t}),t}n.getPageHtml=t;n.isHtmlVisuallyBlank=r})(r=t.WorkItemRichTextHelper||(t.WorkItemRichTextHelper={}))});

define("VSS/Controls/Splitter",["require","exports","VSS/Controls","VSS/Diag","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Core","VSS/Utils/UI","VSS/LoaderPlugins/Css!Splitter"],function(n,t,i,r,u,f,e){var o;Object.defineProperty(t,"__esModule",{value:!0});t.Splitter=t.SplitterO=void 0;var s=f.delegate,h=e.domElem,c=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._screenXY="pageX",i._cssPosProp="left",i._cssSizeProp="width",i._leftFix=!0,i._deltaMultiplier=1,i._dragStart=!1,i._ignoreWindowResize=!1,t&&t.initialSize&&(i._fixedSidePixels=t.initialSize),i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"splitter",vertical:!0,fixedSide:"left"},t))},t.prototype._enhance=function(t){var i,r;n.prototype._enhance.call(this,t);this.leftPane=t.children(".leftPane");this.handleBar=t.children(".handleBar");this.rightPane=t.children(".rightPane");this.handleBar.append(h("div","handleBar-hitTarget"));i=this._options;t.hasClass(o.VERTICAL_CLASS)?i.vertical=!0:t.hasClass(o.HORIZONTAL_CLASS)?i.vertical=!1:i.vertical===!0?t.addClass(o.VERTICAL_CLASS):t.addClass(o.HORIZONTAL_CLASS);i.expandState?this.expandState=i.expandState:this.getElement().hasClass("left-expand")?this.expandState="left":this.getElement().hasClass("right-expand")&&(this.expandState="right");this.getElement().hasClass("right-fix")?i.fixedSide="right":i.fixedSide==="right"?t.addClass("right-fix"):i.fixedSide="left";r=i.collapsedLabel;r||(r=t.data().collapsedLabel);r&&this.setCollapsedLabel(r)},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._setupHandleBar();var t=this._options;this.setMaxWidth(t.maxWidth);this.setMinWidth(t.minWidth);this._configureCssProps();this._isCollapsed()||this._setInitialSize();this._attachEvents();(this._options.enableToggleButton||this._isToggleButtonEnabled())&&(this.getElement().addClass(o.TOGGLE_BUTTON_ENABLED_CLASS_NAME),this._ensureToggleButton(),this._isToggleButtonHotkeyEnabled()&&this._bind($(window.document),"keyup",s(this,this._onDocumentKeyup)));this.getElement().hasClass(o._noSplitCssClass)&&this._fixedSide.toggle(!1)},t.prototype._setupHandleBar=function(){var n=this.handleBar;n.attr({tabindex:this.isExpanded()?"0":"-1",role:"separator","aria-label":u.SplitterLabel});this._setAriaOrientation(this._options.vertical)},t.prototype._setInitialSize=function(){var n=0;this._options.initialSize>0&&(n=this._options.initialSize);n<=0&&(n=this.getElement().data().initialSize);n&&this.resize(n,!0,!1)},t.prototype.setMinWidth=function(n){this._minWidth=n;this.setAttribute("aria-valuemin",n,this.handleBar)},t.prototype.setMaxWidth=function(n){this._maxWidth=n;this.setAttribute("aria-valuemax",n,this.handleBar)},t.prototype._getAdjustedSize=function(n){var t=this._minWidth,i=this._maxWidth;return typeof t=="number"&&n<t&&(n=t),typeof i=="number"&&n>i&&(n=i),n},t.prototype.resize=function(n,t,i,r){var u,f,s,e,h;this.getElement().hasClass(o._noSplitCssClass)||this.getElement().is(":visible")&&(this.getElement().toggleClass(o.COLLAPSED_CLASS_NAME,!1),n!==null&&n!==undefined&&(n<0?n=0:(e=this.getElement()[this._cssSizeProp]()-this.handleBar[this._cssSizeProp](),n>e&&(h=this.leftPane[this._cssSizeProp](),e<h&&(e=h),n=e))),u=n===null||n===undefined?"":n,i?(s=this._options.animationSpeed||o.DEFAULT_ANIMATION_SPEED,f=this._createAnimationOption(this._cssSizeProp,u+"px"),this._fixedSide.animate(f,s),f=this._createAnimationOption(this._cssPosProp,u+"px"),this._fillSide.animate(f,s),this.handleBar.animate(f,s,r)):(this._fixedSide.css(this._cssSizeProp,u),this._fillSide.css(this._cssPosProp,u),this.handleBar.css(this._cssPosProp,u),r&&r()),this._fixedSidePixels=n,this._layoutToggleButton(i),this.setAttribute("aria-valuenow",n,this.handleBar),t||this._fireWindowResize())},t.prototype.toggleExpanded=function(n){if((n===undefined||n!==this.isExpanded())&&(this.expandState?(this.removeExpand(),this.handleBar.attr("tabindex","0")):(this._options.fixedSide==="left"?this._expandInternal("right"):this._expandInternal("left"),this.handleBar.attr("tabindex","-1")),this.getElement().toggleClass(o.COLLAPSED_CLASS_NAME,!this.isExpanded()),this._setToggleButtonTooltip(),this._fireWindowResize(),this._fire("changed",this),this._options.onToggle))this._options.onToggle(this.isExpanded())},t.prototype.expand=function(){this.toggleExpanded(!0)},t.prototype.collapse=function(){this.toggleExpanded(!1)},t.prototype.isExpanded=function(){return!this.expandState},t.prototype.removeExpand=function(n){this.getElement().removeClass("left-expand");this.getElement().removeClass("right-expand");this.expandState=null;n?(this._layoutToggleButton(),this._fireWindowResize()):this.resize(this._fixedSidePixels)},t.prototype._expandInternal=function(n){var t=this.getElement();n||(n="left");n==="left"?t.removeClass("right-expand").addClass("left-expand"):t.removeClass("left-expand").addClass("right-expand");this.expandState=n;this._fixedSide.css(this._cssSizeProp,"");this._fillSide.css(this._cssPosProp,"");this.handleBar.css(this._cssPosProp,"");this._layoutToggleButton();this.setAttribute("aria-valuenow",0,this.handleBar)},t.prototype.getFixedSidePixels=function(){return this._fixedSidePixels},t.prototype.toggleSplit=function(n,t,i){var r=this,u;n?(this.getElement().removeClass(o._noSplitCssClass),this._savedFixedSidePixels!==undefined&&(this._fixedSidePixels=this._savedFixedSidePixels,this._savedFixedSidePixels=undefined),this._fixedSide.css("display",""),this.expandState?(this._expandInternal(this.expandState),this.getElement().addClass(o.COLLAPSED_CLASS_NAME),this._setToggleButtonTooltip(),this._fireWindowResize()):t?(u=this._fixedSidePixels||i,this.resize(0,!0,!1),this.resize(u,!0,!0)):this.resize(this._fixedSidePixels||i)):(this._savedFixedSidePixels=this._fixedSidePixels,this.resize(0,!0,t,function(){r.getElement().addClass(o._noSplitCssClass);r.getElement().removeClass(o.COLLAPSED_CLASS_NAME);r._fixedSide.css(r._cssSizeProp,"").css("display","none");r._fillSide.css(r._cssPosProp,"");r.handleBar.css(r._cssPosProp,"");r._fireWindowResize()}))},t.prototype.noSplit=function(n){this.toggleSplit(!1,n)},t.prototype.split=function(n,t){this.toggleSplit(!0,n,t)},t.prototype.toggleOrientation=function(n,t){if(n=Boolean(n),this._options.vertical!==n){var i=this.getElement();i.removeClass("left-expand");i.removeClass("right-expand");this.expandState=null;this._fixedSide.css(this._cssSizeProp,"");this._fillSide.css(this._cssPosProp,"");this.handleBar.css(this._cssPosProp,"");this._options.vertical=n;i.toggleClass(o.VERTICAL_CLASS,n);i.toggleClass(o.HORIZONTAL_CLASS,!n);this._configureCssProps();this._setAriaOrientation(n);this.resize(t)}},t.prototype.vertical=function(){this.toggleOrientation(!0)},t.prototype.horizontal=function(){this.toggleOrientation(!1)},t.prototype._setAriaOrientation=function(n){this.setAttribute("aria-orientation",n===!1?"vertical":"horizontal",this.handleBar)},t.prototype.setCollapsedLabel=function(n){var i=this,t;this.handleBar.children(":not(.handleBar-hitTarget)").remove();n&&(t=$(h("div","handlebar-label")).prependTo(this.handleBar).attr("title",n).bind("mousedown",function(n){i.toggleExpanded(!0);n.preventDefault();n.stopPropagation()}),$(h("span","handlebar-label-text")).appendTo(t).text(n))},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._options.vertical===!1?this.getElement().addClass(o.HORIZONTAL_CLASS):this.getElement().addClass(o.VERTICAL_CLASS);this._options.expandState&&(this.expandState=this._options.expandState,this.getElement().addClass(this.expandState==="left"?"left-expand":"right-expand"));this._options.fixedSide==="right"&&this.getElement().addClass("right-fix");this.leftPane=$(h("div","leftPane")).appendTo(this.getElement());this.handleBar=$(h("div","handleBar")).appendTo(this.getElement());this.rightPane=$(h("div","rightPane")).appendTo(this.getElement());this.handleBar.append(h("div","handleBar-hitTarget"));this._options.collapsedLabel&&this.setCollapsedLabel(this._options.collapsedLabel)},t.prototype._configureCssProps=function(){var n=this._leftFix=this._options.fixedSide==="left";n?(this._deltaMultiplier=1,this._fixedSide=this.leftPane,this._fillSide=this.rightPane):(this._deltaMultiplier=-1,this._fixedSide=this.rightPane,this._fillSide=this.leftPane);this._options.vertical===!1?(this._screenXY="pageX",this._cssSizeProp="width",this._cssPosProp=n?"left":"right"):(this._screenXY="pageY",this._cssSizeProp="height",this._cssPosProp=n?"top":"bottom");this._isCollapsed()&&(this.expandState=this._options.fixedSide==="left"?"right":"left")},t.prototype._attachEvents=function(){var n=this;this._bind(this.handleBar,"mousedown",s(this,this._handleBarMouseDown));this._bind(this.handleBar,"dblclick",s(this,this._handleBarDoubleClick));this._bind(this.handleBar,"mouseover",function(){n.handleBar.addClass("hover")});this._bind(this.handleBar,"mouseout",function(){n.handleBar.removeClass("hover")});this._bind(this.handleBar,"selectstart",function(){return!1});this._bind(this.handleBar,"keydown",this._handleBarKeydown.bind(this));e.attachResize(this.getElement(),s(this,this._onWindowResize))},t.prototype._ensureToggleButton=function(){if(!this._$toggleButton){var t=this.getElement(),n=t.find(".toggle-button");n.length===0&&(this._$toggleButtonIcon=$("<span>").addClass("bowtie-icon"),n=$("<button>").addClass("toggle-button").append(this._$toggleButtonIcon),n.insertBefore(t.children(".handleBar")));this._$toggleButton=n;this._setToggleButtonTooltip();this._layoutToggleButton();this._$toggleButton.click(s(this,this._onToggleButtonClick))}},t.prototype._layoutToggleButton=function(n){var t,i,r=this.isExpanded();this._$toggleButton&&(r?(this._measureFixedSide(),t=this._fixedSidePixels-(o.TOGGLE_BUTTON_MARGIN+o.TOGGLE_BUTTON_LENGTH)):t=o.TOGGLE_BUTTON_MARGIN,this._$toggleButtonIcon&&this._setToggleButtonIconClass(r),n?(i=this._createAnimationOption(this._cssPosProp,t+"px"),this._$toggleButton.animate(i,this._options.animationSpeed||o.DEFAULT_ANIMATION_SPEED)):this._$toggleButton.css(this._cssPosProp,t))},t.prototype._setToggleButtonIconClass=function(n){var t=this._options.fixedSide==="left",i="bowtie-icon ";i+=this._options.vertical?n?t?"bowtie-chevron-up":"bowtie-chevron-down":t?"bowtie-chevron-down":"bowtie-chevron-up":n?t?"bowtie-chevron-left":"bowtie-chevron-right":t?"bowtie-chevron-right":"bowtie-chevron-left";this._$toggleButtonIcon.removeClass().addClass(i)},t.prototype._setToggleButtonTooltip=function(){var n=this._options,t=this._$toggleButton;t&&(this._isCollapsed()?t.attr({title:n.toggleButtonCollapsedTooltip?n.toggleButtonCollapsedTooltip:u.ExpandSplitterTooltip,"aria-expanded":"false"}):t.attr({title:n.toggleButtonExpandedTooltip?n.toggleButtonExpandedTooltip:u.CollapseSplitterTooltip,"aria-expanded":"true"}))},t.prototype.setOnToggle=function(n){this._options.onToggle=n},t.prototype._measureFixedSide=function(){this._fixedSidePixels=this._cssSizeProp==="width"?this._fixedSide.outerWidth():this._fixedSide.outerHeight()},t.prototype._handleBarMouseDown=function(n){n.preventDefault();this._dragStart={pointer:n[this._screenXY],originalSize:this._isCollapsed()?n[this._screenXY]:this._fixedSide[this._cssSizeProp]()};this.getElement().addClass("dragging");this._ensureHandleBarClone();this._setupDragEvents();this._ensureOverlay()},t.prototype._handleBarKeydown=function(n){var t=this._options.vertical!==!1,i=!this._isCollapsed();switch(n.keyCode){case e.KeyCode.LEFT:i&&!t&&this._moveSeparator("left");break;case e.KeyCode.RIGHT:i&&!t&&this._moveSeparator("right");break;case e.KeyCode.UP:i&&t&&this._moveSeparator("left");break;case e.KeyCode.DOWN:i&&t&&this._moveSeparator("right")}},t.prototype._moveSeparator=function(n){var t=25*(this._options.fixedSide===n?-1:1);typeof this._fixedSidePixels!="number"&&this._measureFixedSide();this.resize(this._getAdjustedSize(this._fixedSidePixels+t))},t.prototype._isToggleButtonEnabled=function(){return this.getElement().hasClass(o.TOGGLE_BUTTON_ENABLED_CLASS_NAME)},t.prototype._isToggleButtonHotkeyEnabled=function(){return this.getElement().hasClass(o.TOGGLE_BUTTON_HOTKEY_ENABLED_CLASS_NAME)},t.prototype._isCollapsed=function(){return this.getElement().hasClass(o.COLLAPSED_CLASS_NAME)},t.prototype._onDocumentKeyup=function(n){if(n.ctrlKey&&n.altKey&&n.keyCode===e.KeyCode.SPACE&&this._isToggleButtonHotkeyEnabled())return this.toggleExpanded(),!1},t.prototype._onToggleButtonClick=function(n){return this.toggleExpanded(),!1},t.prototype._ensureHandleBarClone=function(){this._$handleBarClone||(this._$handleBarClone=$("<div>").addClass("handleBar-clone").css(this._cssPosProp,this._dragStart.originalSize+"px").css(this._cssSizeProp,o.HANDLE_BAR_CLONE_SIZE).appendTo(this.getElement()))},t.prototype._removeHandleBarClone=function(){this._$handleBarClone&&(this._$handleBarClone.remove(),this._$handleBarClone=null)},t.prototype._setupDragEvents=function(){this._bind(window.document,"mousemove",s(this,this._documentMouseMove),!0);this._bind(window.document,"mouseup",s(this,this._documentMouseUp),!0)},t.prototype._ensureOverlay=function(){this._splitterOverlay||(this._splitterOverlay=$(h("div","overlay")),this.getElement().append(this._splitterOverlay),this._bind(this._splitterOverlay,"mousemove",s(this,this._documentMouseMove)),this._bind(this._splitterOverlay,"mouseup",s(this,this._documentMouseUp)),this._bind(this._splitterOverlay,"selectstart",function(){return!1}))},t.prototype._removeOverlay=function(){this._splitterOverlay&&(this._splitterOverlay.remove(),this._splitterOverlay=null)},t.prototype._clearDragEvents=function(){this._removeOverlay();this._unbind(window.document,"mousemove");this._unbind(window.document,"mouseup")},t.prototype._documentMouseMove=function(n){var t;if(this._dragStart)return t=n[this._screenXY]-this._dragStart.pointer,t&&this._ensureOverlay(),this._ensureHandleBarClone(),this._$handleBarClone.css(this._cssPosProp,+(this._dragStart.originalSize+this._deltaMultiplier*t)+"px"),!1},t.prototype._documentMouseUp=function(n){var i,r,t;if(this._dragStart)return i=n[this._screenXY]-this._dragStart.pointer,r=!1,Math.abs(i)>1&&(r=!0,t=this._dragStart.originalSize+this._deltaMultiplier*i,t=this._getAdjustedSize(t),this._isToggleButtonEnabled()&&t<=o.AUTO_COLLAPSE_THRESHOLD?this.toggleExpanded(!1):(this.expandState&&this.removeExpand(!0),this.resize(t))),this._dragStart=null,this.getElement().removeClass("dragging"),this._removeHandleBarClone(),this._clearDragEvents(),r&&this._fire("changed",this),!1},t.prototype._onWindowResize=function(){this._ignoreWindowResize||this.expandState||this.resize(this._fixedSidePixels,!0)},t.prototype._fireWindowResize=function(){try{this._ignoreWindowResize=!0;var n=document.createEvent("Event");n.initEvent("resize",!1,!0);window.dispatchEvent(n)}finally{this._ignoreWindowResize=!1}},t.prototype.attachResize=function(n){this._ignoreWindowResize=!1;n&&this._onWindowResize()},t.prototype.detachResize=function(){this._ignoreWindowResize=!0},t.prototype._createAnimationOption=function(n,t){var i={};return i[n]=t,i},t.prototype._handleBarDoubleClick=function(){this.toggleExpanded()},t.prototype._dispose=function(){n.prototype._dispose.call(this);this.unregisterEvents()},t.prototype.unregisterEvents=function(){e.detachResize(this.getElement())},t.enhancementTypeName="tfs.splitter",t._noSplitCssClass="no-split",t.CORE_CSS_CLASS="splitter",t.HORIZONTAL_CLASS="horizontal",t.VERTICAL_CLASS="vertical",t.TOGGLE_BUTTON_LENGTH=16,t.TOGGLE_BUTTON_MARGIN=2,t.COLLAPSED_CLASS_NAME="collapsed",t.TOGGLE_BUTTON_ENABLED_CLASS_NAME="toggle-button-enabled",t.TOGGLE_BUTTON_HOTKEY_ENABLED_CLASS_NAME="toggle-button-hotkey-enabled",t.AUTO_COLLAPSE_THRESHOLD=20,t.DEFAULT_ANIMATION_SPEED=800,t.HANDLE_BAR_CLONE_SIZE=5,t}(i.Control);t.SplitterO=c;o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(c);t.Splitter=o;i.Enhancement.registerJQueryWidget(o,o.CORE_CSS_CLASS);i.Enhancement.registerEnhancement(o,"."+o.CORE_CSS_CLASS)});

define("VSS/Controls/Navigation",["require","exports","VSS/Common/Constants/Platform","VSS/Context","VSS/Controls","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Diag","VSS/Events/Handlers","VSS/Controls/Menus","VSS/Navigation/Services","VSS/Controls/Notifications","q","VSS/Controls/PopupContent","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Controls/Splitter","VSS/Telemetry/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VSS/Utils/UI","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls","VSS/LoaderPlugins/Css!PivotView"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){function ct(n){var t;return n&&n.length===1&&(t=n.data("item"),t||(t={text:n.find("a:first").html(),title:n.data("title")||null,id:n.data("id"),link:n.find("a:first").attr("href"),selected:n.hasClass("selected"),encoded:n.data("encoded")||!1,disabled:n.hasClass("disabled")},n.data("item",t))),t}function wt(n,t){t=t||ct(n);t&&(t.disabled?(n.attr("disabled","disabled"),n.addClass("disabled"),n.removeClass("selected"),n.attr("aria-disabled","true")):(n.removeAttr("disabled"),n.removeClass("disabled"),n.toggleClass("selected",t.selected),n.removeAttr("aria-disabled")),t.selected?n.children("a").attr("aria-selected","true"):n.children("a").attr("aria-selected","false"))}var ht,ut,ft,lt,at,vt,ot,st,pt,dt;Object.defineProperty(t,"__esModule",{value:!0});t.FullScreenHelper=t.NavigationLink=t.TabbedNavigationView=t.NavigationViewTab=t.PivotView=t.PivotFilter=t.TriSplitNavigationView=t.NavigationView=void 0;var rt=k.delegate,it=nt.domElem,et=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onHistoryNavigate=function(n,t){i._onNavigate(t||{})},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({attachNavigate:!1,titleElementSelector:".hub-title",hubSplitterSelector:".hub-content > .splitter"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._options.attachNavigate===!0&&this._attachNavigate()},t.prototype.onNavigate=function(){},t.prototype._getViewTitle=function(){return this._element.find(".hub-title").eq(0)},t.prototype.setViewTitle=function(n,t){this._element.find(this._options.titleElementSelector).text(n||"").attr("title",t||n||"");this.setWindowTitle(n)},t.prototype.setViewTitleContent=function(n,t){this._element.find(this._options.titleElementSelector).html(t||"").attr("title",n||"");this.setWindowTitle(n)},t.prototype.setWindowTitle=function(n){document.title=d.format(this._getPageTitleString(),n||"")},t.prototype.setLeftHubPaneVisibility=function(n){var i=this._element.find(this._options.hubSplitterSelector),t=u.Enhancement.getInstance(w.Splitter,i);t&&n!==this._leftPaneVisible&&(this._leftPaneVisible=n,t.toggleSplit(n))},t.prototype.setFullScreenMode=function(n,t){t===void 0&&(t=!1);var i=$(document.body),r=$(".tfs-host-notifications");i.toggleClass("no-chrome",n);i.toggleClass("full-screen-mode",n);r.toggleClass("visible",r.css("display")!="none");this.setLeftHubPaneVisibility(!n||t)},t.prototype._setTitleMode=function(){},t.prototype._getPageTitleString=function(){return c.getDefaultPageTitleFormatString()},t.prototype._attachNavigate=function(){this._historyNavigated=!1;var n=c.getHistoryService();n.attachNavigate(this._onHistoryNavigate);this._historyNavigated||this._onNavigate(n.getCurrentState()||{});this._historyNavigated=!1},t.prototype._onNavigate=function(n){this._historyNavigated=!0;this.onNavigate(n)},t.prototype._dispose=function(){n.prototype._dispose.call(this);this._options.attachNavigate===!0&&c.getHistoryService().detachNavigate(this._onHistoryNavigate)},t.ACTION_CONTRIBUTION="contribution",t}(u.BaseControl);t.NavigationView=et;ht=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({leftPaneSelector:".hub-content > .splitter > .leftPane",rightPaneSelector:".hub-content > .splitter > .rightPane"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._leftPane=this.getElement().find(this._options.leftPaneSelector);this._rightPane=this.getElement().find(this._options.rightPaneSelector)},t.getInstance=function(){return t._instance||(t._instance=u.Enhancement.enhance(t,".hub-view",{})),t._instance},t.prototype.getLeftPane=function(){return this._leftPane},t.prototype.getRightPane=function(){return this._rightPane},t}(et);t.TriSplitNavigationView=ht;ut=function(){function n(n){this._options=n||{};this._items=this._options.items||[]}return n.toItem=function(n){var t;return n&&n.length===1&&(t=n.data("item"),t||(t={text:n.find("span.anchor:first").text(),title:n.data("title")||null,value:n.data("value"),selected:n.hasClass("selected"),encoded:n.data("encoded")||!1},n.data("item",t))),t},n.domToItems=function(t,i){var r=[];return t.children("li.pivot-filter-item"+(i||"")).each(function(){r.push(n.toItem($(this)))}),r},n.setElementContent=function(n,t){var i=t.selectedTitle||t.title,r=t.selectedText||t.text,c=t.encoded,h=t.icon,f,e,s;n.empty();n.removeData("title");i&&(f=n.data("tooltipControl"),f?f.setTextContent(i):(e={},i===r?e.onlyShowWhenOverflows=n:e.setAriaDescribedBy=!0,n.data("tooltipControl",v.RichContentTooltip.add(i,n,e))),n.data("title",i));h&&$("<span />").addClass(h).addClass("selected-icon").appendTo(n);r&&(s=$("<span />").attr("id",u.getHtmlId()),c?s.html(r):s.text(r),s.appendTo(n))},n.prototype.getTypeName=function(){var n=this.constructor;return n.typeName||"select"},n.prototype.getItems=function(t){return n.domToItems(this._element,t)},n.prototype._toItem=function(t){return n.toItem(t)},n.prototype._updateItem=function(n,t){t=t||this._toItem(n);t&&(t.disabled?(n.attr("disabled","disabled"),n.addClass("disabled"),n.removeClass("selected")):(n.removeAttr("disabled"),n.removeClass("disabled"),n.toggleClass("selected",t.selected)))},n.prototype._toggleItem=function(n,t){var i=this._toItem(n);return i&&(typeof t=="undefined"&&(t=!i.selected),i.selected=t,this._updateItem(n,i)),i},n.prototype._selectFirstEnabledItem=function(n){var t,i;return $.each(n,function(){if(!this.disabled&&(t||(t=this),this.selected))return i=this,!1}),!i&&t&&(t.selected=!0,i=t),i},n.prototype._fireChange=function(n,t){n.trigger("filter-changed",[t])},n.prototype._selectItem=function(n,t){var r,i=n.next("li:not([disabled])");return i.length===0&&(i=n.siblings("li:not([disabled])").first()),i.length>0&&(this._toggleItem(n,!1),r=this._toggleItem(i,!0),t&&i.find("span.anchor").focus()),r},n.prototype._onChange=function(n){var r=$(n.target),t,u,i;t=r.closest("li");u=r.closest("span.anchor");t.length>0&&(i=this._selectItem(t,!0),i&&this._fireChange(this._element,i));u.length>0&&n.preventDefault()},n.prototype.enhance=function(){this._element=this._options.filterContainer.find("ul.pivot-filter-items");this._items=this.getItems();this._attachChange(this._element);this.addAccessibility()},n.prototype.populate=function(){var t=this._items,i=this._ensureElement(),r=i.siblings("span.title"),n=r.attr("id");n||(r?(n=String(u.getHtmlId()),r.attr("id",n)):n="");i.children().remove();t&&t.length>0&&(this._selectFirstEnabledItem(t),$.each(t,function(){var t=$(it("li","pivot-filter-item")),r,f,e,o;t.data("item",this);this.disabled?(t.attr("disabled","disabled"),t.addClass("disabled")):this.selected&&t.addClass("selected");r=this.title;r||this.encoded||(r=this.text);r&&(v.RichContentTooltip.add(r,t,r===this.text?{onlyShowWhenOverflows:t}:undefined),t.data("title",r));this.value&&t.data("value",this.value);o=String(u.getHtmlId());f=$(it("span")).attr({id:o,role:"button","aria-labelledby":"".concat(n," ").concat(o),tabIndex:0}).addClass("anchor");e=f;this.icon&&($("<span />").addClass(this.icon).appendTo(f),e=$("<span />").appendTo(f));e.addClass("text");this.encoded?e.html(this.text):e.text(this.text);t.append(f);i.append(t)}),this._attachChange(i))},n.prototype.updateItems=function(n){this._items=n;this.populate()},n.prototype.getItem=function(n){var t,i=this._items;return typeof n=="number"?t=i[n]:$.each(i,function(){if(this.value==n||this.text==n)return t=this,!1}),t},n.prototype.getSelectedItems=function(){return this.getItems(".selected")},n.prototype.getSelectedItem=function(){var n=this.getItems(".selected");return n&&n[0]},n.prototype.setSelectedItem=function(n){var t=this,i=this._items;typeof n!="object"&&(n=this.getItem(n));n&&($.each(i,function(){this.selected=!1}),n.selected=!0,this._element.children("li").each(function(){t._updateItem($(this))}))},n.prototype.addAccessibility=function(){var r=this,t=this._options.filterContainer.children("span.title"),n,i;t.length===1&&(n=t.attr("id"),n||(n=String(u.getHtmlId()),t.attr("id",n)),i="span.anchor",this._element.is(i)&&this._attachAriaLabels(this._element,n),this._element.find(i).each(function(t,i){r._attachAriaLabels($(i),n)}))},n.prototype._attachAriaLabels=function(n,t){var i=n.attr("id")||String(u.getHtmlId());n.attr({id:i,"aria-labelledby":"".concat(t," ").concat(i)})},n.prototype._ensureElement=function(){return this._element||(this._element=$(it("ul","pivot-filter-items")),this._element.appendTo(this._options.filterContainer)),this._element},n.prototype._attachChange=function(n){n.children().bind("click",rt(this,this._onChange));n.children().bind("keydown",nt.buttonKeydownHandler)},n}();tt.initClassPrototype(ut,{_options:null,_items:null,_element:null});ft=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.registerBehavior=function(n){t._behaviors[n.typeName]=n},t.createBehavior=function(n,i){var r;return $.each(n||[],function(n,i){return r=t._behaviors[i],r?!1:void 0}),r||(r=ut),new r(i)},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"pivot-filter",behavior:"select"},t))},t.prototype._enhance=function(t){var r,i;n.prototype._enhance.call(this,t);i=t[0];r=i&&typeof i.className=="string"?i.className.split(" "):[];this._initBehavior(r);this._behavior.enhance()},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._attachEvents()},t.prototype.getSelectedItems=function(){return this._behavior.getSelectedItems()},t.prototype.getSelectedItem=function(){return this._behavior.getSelectedItem()},t.prototype.getItem=function(n){return this._behavior.getItem(n)},t.prototype.getItems=function(){return this._behavior.getItems()},t.prototype.setSelectedItem=function(n,t){t===void 0&&(t=!0);this._behavior.setSelectedItem(n,t)},t.prototype.updateItems=function(n,t){this._behavior.updateItems(n,t)},t.prototype._initBehavior=function(n){this._behavior=t.createBehavior(n,{align:this._options.align,items:this._options.items,filterContainer:this._element,useBowtieStyle:this._options.useBowtieStyle})},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._initBehavior([this._options.behavior]);this._buildDom()},t.prototype._buildDom=function(){var n=this._element,e=this._behavior,t=this._options,r,u,i,f;n.addClass(e.getTypeName());r=$(it("span","title"));i=t.text;u=t.useBowtieStyle;f=t.encoded;t.title&&(v.RichContentTooltip.add(t.title,n,t.title===i?{onlyShowWhenOverflows:n}:undefined),n.data("title",t.title));i&&(f?r.html(i):r.text(i));n.append(r);u&&(n.addClass("bowtie-pivot-filter"),$(it("span","drop-icon bowtie-icon bowtie-chevron-down")).appendTo(n));this._behavior.populate()},t.prototype._attachEvents=function(){this._bind(this._element,"filter-changed",rt(this,this._onFilterChanged))},t.prototype._onFilterChanged=function(n,t){return this._fire("changed",[t]),$.isFunction(this._options.change)?this._options.change.call(this,t):void 0},t.enhancementTypeName="tfs.ui.pivotFilter",t._behaviors={},t}(u.Control);t.PivotFilter=ft;tt.initClassPrototype(ft,{_behavior:null});lt=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype._selectFirstEnabledItem=function(){},t.prototype._selectItem=function(n){var i=this,t,r=this._toItem(n);return r.selected||(n.siblings("li").each(function(){i._toggleItem($(this),!1)}),t=this._toggleItem(n,!0)),t},t.typeName="radio",t}(ut);ft.registerBehavior(lt);at=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype._selectFirstEnabledItem=function(){},t.prototype._selectItem=function(n){return this._toggleItem(n,!0)},t.typeName="checkbox",t}(ut);ft.registerBehavior(at);vt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._showItemIcons=!1,i}return __extends(t,n),t.prototype.getItems=function(t){return this._addCommandIdToItems(n.prototype.getItems.call(this,t))},t.prototype.populate=function(){var t,i,r,u=this._selectFirstEnabledItem(this._items),n;u&&(this._element&&this._element.remove(),this._disposeExistingPopup(),n=void 0,n=((r=(i=(t=this._options.filterContainer)===null||t===void 0?void 0:t.context)===null||i===void 0?void 0:i.attributes["aria-labelledby"])===null||r===void 0?void 0:r.value)||"",n=n?" aria-labelledby='"+n+"'":"",this._element=$("<span tabIndex='0' class='selected anchor' role='combobox' aria-expanded='false'"+n+"/>").appendTo(this._options.filterContainer),ut.setElementContent(this._element,u),this._options.useBowtieStyle?(this._options.filterContainer.bind("click",rt(this,this._onDrop)),this._options.filterContainer.bind("keydown",nt.buttonKeydownHandler)):(this._element.bind("click",rt(this,this._onDrop)),this._element.bind("keydown",nt.buttonKeydownHandler)))},t.prototype.enhance=function(){this._element=this._options.filterContainer.find("ul.pivot-filter-items");this._items=this.getItems();this._element.remove();this.populate()},t.prototype.updateItems=function(t,i){this._showItemIcons=i&&i.showItemIcons;n.prototype.updateItems.call(this,this._addCommandIdToItems(t))},t.prototype.getSelectedItems=function(){return[this.getSelectedItem()]},t.prototype.getSelectedItem=function(){var n;return $.each(this._items,function(){if(this.selected===!0)return n=this,!1}),n},t.prototype.setSelectedItem=function(n,t){t===void 0&&(t=!0);var i=this._items;n&&n!==this.getSelectedItem()&&($.each(i,function(){this.selected=!1}),n.selected=!0,ut.setElementContent(this._element,n),t&&this._fireChange(this._element,n))},t.prototype._addCommandIdToItems=function(n){return $.map(n,function(n){return n.id||(n.id=n.text),n})},t.prototype._onDrop=function(n){var f=this,e=$(n.target),t=this._options.filterContainer,r=this._items,i;return this._disposeExistingPopup(),i=u.BaseControl.createIn(h.PopupMenu,t,{align:this._options.align||"left-bottom",showIcon:this._showItemIcons,items:[{childItems:r}],useBowtieStyle:this._options.useBowtieStyle,onDeactivate:function(){t.removeClass("active");f._element.attr("aria-expanded","false");t.children("ul.menu-popup").hide()},executeAction:rt(this,this._onExecute)}),k.delay(this,10,function(){var u,n,f;t.addClass("active");this._element.attr("aria-expanded","true");i.popup(e,t);u=g.first(r,function(n){return n.selected});n=i.getItems()[0].getSubMenu();u?(f=n.getItem(u.id),f?f.select():n.selectFirstItem()):n.selectFirstItem()}),this._popupMenu=i,this._element.attr("aria-controls",i.getElement().attr("id")),!1},t.prototype._onExecute=function(n){this._options.filterContainer.removeClass("active");this.setSelectedItem(n.get_commandSource()._item)},t.prototype._disposeExistingPopup=function(){this._popupMenu&&(this._popupMenu.dispose(),delete this._popupMenu)},t.typeName="dropdown",t}(ut);ft.registerBehavior(vt);u.Enhancement.registerEnhancement(ft,".pivot-filter.enhance");ot=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._contributionsInitialized=!1,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"pivot-view",tagName:"ul"},t))},t.prototype._enhance=function(t){n.prototype._enhance.call(this,t);this._options.items=this.getItems();var i=this._element.data("contribution-id");i&&(this._options.contributionId=i,this._options.getContributionContext&&typeof this._options.getContributionContext=="function"&&(this._contributionContext=this._options.getContributionContext()),this.refreshContributedItems())},t.prototype.getItems=function(n){var t=[];return this._element.children("li"+(n||"")).each(function(){t.push(ct($(this)))}),t},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.getElement().attr("role","tablist");this._attachEvents()},t.prototype.setExtensionContainer=function(n){this._extensionContainer=n},t.prototype.showExtensionTab=function(n,t){f.createContributedControl(this._extensionContainer,n,t)},t.prototype.setContributionContext=function(n){this._contributionContext=n},t.prototype._getTabFromContribution=function(n,t){var i=this,e,o,u,f,r=this._contributionContext,s,h;return e=t&&typeof t.isDisabled=="function"?t.isDisabled(r):a.resolve(!1),o=t&&typeof t.isInvisible=="function"?t.isInvisible(r):a.resolve(!1),t&&typeof t.name=="function"?(s=t.name,u=s(r)):u=t&&typeof t.name=="string"?a.resolve(t.name):a.resolve(n.properties.name),t&&typeof t.title=="function"?(h=t.title,f=h(r)):f=t&&typeof t.title=="string"?a.resolve(t.title):n.properties.title?a.resolve(n.properties.title):a.resolve(null),a.all([e,o,u,f]).then(function(t){var s=t[0],h=t[1],o=t[2],l=t[3],u,r,f,e;return h?null:(u=n.properties.action,r="",i._options.generateContributionLink&&typeof i._options.generateContributionLink=="function"?r=i._options.generateContributionLink(n.id):(f=c.getHistoryService().getCurrentState(),f.contributionId=n.id,r="#"+c.getHistoryService().getFragmentActionLink(u||et.ACTION_CONTRIBUTION,f)),e=!1,i._options.getEnabledState&&typeof i._options.getEnabledState=="function"&&(e=!0),{disabled:e&&!i._options.getEnabledState(n.id)?!0:s,encoded:!1,id:n.id,link:r,text:o,title:l||o,contributed:!0,action:u})})},t.prototype.refreshContributedItems=function(n){var t=this;return n===void 0&&(n=!1),(!this._contributionsInitialized||n)&&typeof this._options.contributionId=="string"?p.getService(e.ExtensionService).getContributionsForTargets([this._options.contributionId]).then(function(n){var i=[];return n.forEach(function(n){var u=a.resolve(null),r=n.properties.dynamic,e;r!==!0&&r!==!1&&(r=typeof n.properties.name!="string");r&&(u=f.getBackgroundInstance(n,n.properties.registeredObjectId||n.id));e=u.then(function(i){return t._getTabFromContribution(n,i)});i.push(e)}),a.allSettled(i).then(function(n){$.isArray(t._options.items)?(t._options.items=t._options.items.filter(function(n){return!n.contributed}),t._options.items=t._options.items.concat(n.filter(function(n){return n&&n.state==="fulfilled"&&!!n.value}).map(function(n){return n.value}))):t._options.items=n.filter(function(n){return n.state==="fulfilled"}).map(function(n){return n.value})}).then(function(){t._contributionsInitialized=!0;t.updateItems()})}):(this._contributionsInitialized=!0,a.resolve(null))},t.prototype.focusSelectedPivot=function(){this.getElement().find("li.selected a").focus()},t.prototype.updateItems=function(n){var r=this,u=n&&$.contains(this.getElement()[0],document.activeElement),i=this._element,t;i.empty();this._itemIdToSelect&&(t=g.first(this._options.items,function(n){return(n.action||n.id)==r._itemIdToSelect}),t&&(this._itemIdToSelect=null,t.disabled||(this._options.items.forEach(function(n){n.selected=!1}),t.selected=!0)));this._populateItems(i);u&&this.getElement().find("li.selected a").focus()},t.prototype.setViewLink=function(n,t){var i=this.getView(n);i&&(i.link=t,this._element.find("li").each(function(i,r){var u=$(r);if(u.data("id")===n)return u.find("a:first").attr("href",t),!1}))},t.prototype.getSelectedView=function(){var n=this.getItems(".selected");return n&&n[0]},t.prototype.setViewEnabled=function(n,t){var r=this,i;if(i=this.getView(n),i){if(!i.contributed||!t){i.disabled=!t;return}p.getService(e.ExtensionService).getContribution(n).then(function(n){var t=f.getBackgroundInstance(n,n.properties.registeredObjectId||n.id).then(function(n){var t=r._contributionContext;n&&typeof n.isDisabled=="function"?r._makeThennable(n.isDisabled(t)).then(function(n){i.disabled=n}):i.disabled=!1})})}},t.prototype._makeThennable=function(n){return n&&$.isFunction(n.then)?n:a.resolve(n)},t.prototype.getView=function(n,t){var i;return typeof n=="number"?i=this._options.items[n]:$.each(this._options.items,function(){if(this.id==n)return i=this,!1}),this._itemIdToSelect=!i&&t?t:null,i},t.prototype.setSelectedView=function(n){var t=this._options.items;if(typeof n!="object"&&(n=this.getView(n)),n){$.each(t,function(){this.selected=!1});n.selected=!0;this._element.find("li").each(function(){wt($(this),null)});this.onChanged(n);n.contributed&&n.id&&e.ExtensionHelper.publishTraceData(null,null,n.id)}},t.prototype.onChanged=function(n){this._fire("changed",[n])},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._buildDom()},t.prototype._buildDom=function(){this._populateItems(this._element)},t.prototype._populateItems=function(n){var t=this._options.items,i,r;if(t){$.each(t,function(){if(!this.disabled&&(i||(i=this),this.selected))return r=this,!1});!r&&i&&(i.selected=!0);var u=!0,e=0,f=0;t.forEach(function(n){n&&!n.disabled&&f++});$.each(t,function(){var i=$(it("li")),r,t;i.data("item",this);i.attr("role","presentation");this.disabled?(i.attr("disabled","disabled"),i.addClass("disabled")):this.selected&&i.addClass("selected");r=this.title;this.id&&(i.data("id",this.id),i.attr("data-id",this.id));t=$(it("a"));this.disabled||(t.attr("aria-posinset",++e),t.attr("aria-setsize",f));t.bind("keydown",nt.buttonKeydownHandler);!u||this.disabled||this.hidden?t.attr("tabindex","-1"):(t.attr("tabindex","0"),u=!1);t.attr("role","tab");this.disabled?(t.attr("aria-disabled","true"),t.attr("aria-selected","false")):this.selected?t.attr("aria-selected","true"):t.attr("aria-selected","false");this.link?t.attr("href",this.link):t.attr({href:"#"});this.encoded?t.html(this.text):t.text(this.text);r&&(v.RichContentTooltip.add(r,t,r===this.text?{onlyShowWhenOverflows:i}:undefined),i.data("title",r));i.append(t);n.append(i)})}},t.prototype._attachEvents=function(){this._bind("click",rt(this,this._onClick));this._bind("keydown",rt(this,this._onKeydown));this.getElement()[0].addEventListener("focus",this._onFocus.bind(this),!0)},t.prototype._onClick=function(n){if(!n||!(n.ctrlKey||n.metaKey||n.shiftKey||n.which===2)){var r=$(n.target),u=r.closest("li"),i=r.closest("a"),t;u.length>0&&(t=ct(u));i.length>0&&(d.caseInsensitiveContains(i.attr("href"),"#")||t&&t.disabled)&&(t&&!t.disabled&&this.setSelectedView(t),n.preventDefault(),i.attr("href")!=="#"&&(document.location.href=i.attr("href")))}},t.prototype._onFocus=function(n){var t=this.getElement(),i=n.target;t.find("a").attr("tabindex","-1");i.setAttribute("tabindex","0")},t.prototype._onKeydown=function(n){var t=n.originalEvent,r,u,i,f;if(!t.ctrlKey&&!t.altKey&&!t.metaKey){if(r=$(t.target),t.keyCode===nt.KeyCode.ENTER||t.keyCode===nt.KeyCode.SPACE){r.find("a").click();return}(t.keyCode===nt.KeyCode.LEFT||t.keyCode===nt.KeyCode.RIGHT)&&(u=r.closest("li"),i=void 0,t.keyCode===nt.KeyCode.RIGHT?(i=u.nextAll("li:visible").first(),i.length===0&&(i=this.getElement().children("li:visible").first())):(i=u.prevAll("li:visible").first(),i.length===0&&(i=this.getElement().children("li:visible").last())),f=i.children("a"),f.focus())}},t.enhancementTypeName="tfs.ui.pivotView",t}(u.Control);t.PivotView=ot;u.Enhancement.registerEnhancement(ot,".pivot-view.enhance");st=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.onNavigate=function(){},t.prototype.onNavigateAway=function(){},t}(u.BaseControl);t.NavigationViewTab=st;var bt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"error-tab"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._messageControl=u.BaseControl.createIn(l.MessageAreaControl,$("<div class='tabbed-navigation-error' />").appendTo(this._element),{closeable:!1})},t.prototype.setContent=function(n,t,i,r){this._messageControl.setMessage({type:i,header:n,content:t});this._messageControl.setErrorDetailsVisibility(r)},t.TAB_ID="error",t}(st),yt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"info-tab"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this)},t.prototype.setHeader=function(n,t){this._$description||(this._$description=$(it("div","information-summary")).prependTo(this._element));this._$title||(this._$title=$(it("div","information-title")).prependTo(this._element));this._$title.text(n);this._$description.html(t)},t.prototype.appendInformation=function(n,t){return u.BaseControl.createIn(l.InformationAreaControl,$(it("div")).appendTo(this._element),{caption:n,collapsed:t})},t.TAB_ID="info",t}(st),kt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._currentNavigationContextId=0,i._lastParsedNavigationContextId=0,i._showingError=!1,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({tabs:null,tabOptions:null,attachNavigate:!0,hubContentSelector:".right-hub-content .hub-pivot-content",pivotTabsSelector:".right-hub-content .hub-pivot .views .pivot-view",hubSplitterSelector:".hub-splitter"},t))},t.prototype.initialize=function(){this._hubContent=this._element.find(this._options.hubContentSelector);this._options.tabs&&(this._tabsControl=u.Enhancement.ensureEnhancement(ot,this._element.find(this._options.pivotTabsSelector)),this._tabsMap={},this._tabOptionsMap={},this.updateTabs(this._options.tabs),this._tabs={});n.prototype.initialize.call(this)},t.prototype.updateTabs=function(n){var t=this;Object.keys(n).forEach(function(i){t._tabsMap[(""+i).toUpperCase()]=n[i]});this._options.tabOptions&&Object.keys(this._options.tabOptions).forEach(function(n){t._tabOptionsMap[(""+n).toUpperCase()]=t._options.tabOptions[n]})},t.prototype.getTab=function(n){return n=(""+n).toUpperCase(),this._tabs[n]},t.prototype.showError=function(n){var i=tt.getErrorMessage(n),t="";n.stack&&(t=$("<div />").text(n.stack));this.showErrorContent(i,t,l.MessageAreaType.Error,!1)},t.prototype.showErrorContent=function(n,t,i,r){var f,e;if(this._tabs){this._showingError=!0;f=this._getErrorTab();f.setContent(n,t,i,r);this._showTab(f);this._hubContent.show();this.onNavigate(this.getState())}else e=u.BaseControl.createIn(l.MessageAreaControl,$(it("div","tabbed-navigation-error")).appendTo(this._hubContent),{closeable:!1}),e.setMessage({type:i,header:n,content:t}),e.setErrorDetailsVisibility(r)},t.prototype.showInformationTab=function(n,t){if(this._tabs){this._updateTabsControl(yt.TAB_ID,this.getRawState(),this._currentParsedState);this._showingInfo=!0;var i=this._getInfoTab();i.setHeader(n,t);this._showTab(i);this._hubContent.show();this.onNavigate(this.getState())}else this._$infoContent=$(it("div","information-section")).appendTo(this._hubContent),$(it("div","information-title")).appendTo(this._$infoContent).text(n||""),$(it("div","information-summary")).text(t||"").appendTo(this._$infoContent)},t.prototype.appendInformationContent=function(n,t){var i,r;return this._tabs?(r=this._getInfoTab(),i=r.appendInformation(n,t)):this._$infoContent&&(i=u.BaseControl.createIn(l.InformationAreaControl,this._$infoContent,{caption:n,collapsed:t})),i},t.prototype.appendSectionTitle=function(n){this._tabs?$(it("div","information-title")).appendTo(this._getInfoTab().getElement()).append(n):this._$infoContent&&$(it("div","information-title")).appendTo(this._$infoContent).append(n)},t.prototype.appendSectionSummary=function(n){this._tabs?$(it("div","information-summary")).appendTo(this._getInfoTab().getElement()).append(n):this._$infoContent&&$(it("div","information-summary")).appendTo(this._$infoContent).append(n)},t.prototype.appendElement=function(n){this._tabs?n.appendTo(this._getInfoTab().getElement()):this._$infoContent&&n.appendTo(this._$infoContent)},t.prototype.refreshCurrentTab=function(){this._onNavigate(this._currentRawState)},t.prototype.getCurrentAction=function(){return this._currentTabId},t.prototype.getState=function(){return this._currentParsedState||{}},t.prototype.setState=function(n){this._currentParsedState=n},t.prototype.getEmptyState=function(){var n={};return $.each(c.getHistoryService().getCurrentState(),function(t){n[t]=null}),n},t.prototype.getRawState=function(){return this._currentRawState||{}},t.prototype.parseStateInfo=function(n,t,i){i(n,t)},t.prototype.getTabVisibility=function(){return!0},t.prototype.getTabLabel=function(){},t.prototype.setHubPivotVisibility=function(n){this._tabsControl.getElement().parents(".hub-pivot:first").toggleClass("hidden",!n)},t.prototype._getErrorTab=function(){return this._errorTab||(this._errorTab=this._createTab(bt)),this._errorTab},t.prototype._getInfoTab=function(){return this._infoTab||(this._infoTab=this._createTab(yt)),this._infoTab},t.prototype._onNavigate=function(n){var i=this,t;this._currentRawState=n;t=++this._currentNavigationContextId;this.parseStateInfo(n.action,n,function(r,u){i._onParseStateInfoSuccess(r,n,u,t)});this._skipTabHideOnAsyncNavigate&&(this._lastParsedNavigationContextId===t||this._showingError||this._showingInfo||this._hubContent.hide(),this._skipTabHideOnAsyncNavigate=!1)},t.prototype._redirectNavigation=function(n,t,i){this._skipTabHideOnAsyncNavigate=!0;i?c.getHistoryService().replaceHistoryPoint(n,t):c.getHistoryService().addHistoryPoint(n,t)},t.prototype._onParseStateInfoSuccess=function(n,t,i,r){var u;if(this._currentParsedState=i||{},this._lastParsedNavigationContextId=r,this._hubContent.show(),this._tabs)if(this._updateTabsControl(n,t,i),u=this._getTab(n),u){if(this._showTab(u),this._showingError=!1,this._currentTabId=n,$.isFunction(u.onNavigate))u.onNavigate(t,i);this.onNavigate(i)}else this.showError(d.format(y.NavigationViewUnknownTabErrorFormat,n));else this.onNavigate(i)},t.prototype._updateTabsControl=function(n,t,i){var r=this;Object.keys(this._tabsMap).forEach(function(u){var o,e=(""+u).toLowerCase(),f=r._tabsControl.getView(e,n);f&&(f.link=c.getHistoryService().getFragmentActionLink(e,t),f.selected=u===(""+n).toUpperCase(),f.disabled=!r.getTabVisibility(e,n,t,i),o=r.getTabLabel(e,n,t,i),o&&(f.text=o))});this._tabsControl.updateItems(!0)},t.prototype._showTab=function(n){this._currentTab!==n&&(this._currentTab&&(this._currentTab.onNavigateAway(),this._currentTab.hideElement()),n&&n.showElement(),this._currentTab=n)},t.prototype._getTab=function(n){var t,i;return n=(""+n).toUpperCase(),t=this._tabs[n],t||(i=this._tabsMap[n],i&&(t=this._createTab(i,this._tabOptionsMap[n]),this._tabs[n]=t)),t},t.prototype._createTab=function(n,t){var i=$("<div />").addClass("navigation-view-tab").appendTo(this._hubContent);return u.Enhancement.enhance(n,i,$.extend({navigationView:this},t))},t}(et);t.TabbedNavigationView=kt;pt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._navigationLinkOptions=t||{},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({tagName:"a"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._navigateHandler=rt(this,this.onNavigate);var t=c.getHistoryService();t.attachNavigate(this._navigateHandler);this._navigationLinkOptions.text?this._element.text(this._navigationLinkOptions.text):this._navigationLinkOptions.$content&&this._navigationLinkOptions.$content.appendTo(this._element);this._navigationLinkOptions.target&&this._element.attr("target",this._navigationLinkOptions.target);this._navigationLinkOptions.title&&this._element.attr("title",this._navigationLinkOptions.title);this.updateLink(this._navigationLinkOptions.initialState||t.getCurrentState())},t.prototype.dispose=function(){n.prototype.dispose.call(this);c.getHistoryService().detachNavigate(this._navigateHandler)},t.prototype.onNavigate=function(n,t){this.updateLink(t)},t.prototype.updateLink=function(n){this._element.attr("href",this.getLocation(n))},t.prototype.getLocation=function(n){return this._navigationLinkOptions.getUrl?this._navigationLinkOptions.getUrl.call(this,n):(n=$.extend({},n,this._navigationLinkOptions.state),c.getHistoryService().getFragmentActionLink(null,n))},t}(u.BaseControl);t.NavigationLink=pt,function(n){function ft(n,t){u=t||{};e=n;k||(c.getHistoryService().attachNavigate(it),$(window).bind("keydown",at),k=!0);it()}function g(){return t}function h(n,i,r,s,h,l){if(i===void 0&&(i=!0),r===void 0&&(r=!1),s===void 0&&(s=!0),h===void 0&&(h=!1),l===void 0&&(l=!1),t=n,ht.getInstance().setFullScreenMode(t,r),e&&vt(),i&&c.getHistoryService().addHistoryPoint(undefined,p(),undefined,s,!0),h&&c.getHistoryService().replaceHistoryPoint(undefined,p(),undefined,s,!0),f&&f.invokeHandlers(v,this,null),u&&u.publishCIData!==!1&&yt(i),u&&u.setFullScreenCallback&&$.isFunction(u.setFullScreenCallback)&&u.setFullScreenCallback(),!l){var a=document.createEvent("Event");a.initEvent("resize",!1,!0);window.dispatchEvent(a)}}function p(i){var r={};return i=i===undefined?t:i,r[n.FULLSCREEN_HASH_PARAMETER]=i,r}function tt(){return"bowtie-icon "+(t?"bowtie-view-full-screen-exit":"bowtie-view-full-screen")}function et(){return t?y.ExitFullScreenModeTooltip:y.EnterFullScreenModeTooltip}function ot(n){l().subscribe(a,n)}function st(n){l().unsubscribe(a,n)}function ct(n){l().subscribe(v,n)}function lt(n){l().unsubscribe(v,n)}function at(n,t,i,r,u){var f=!0;return n instanceof jQuery.Event?f=n.isDefaultPrevented():n instanceof KeyboardEvent&&(f=n.defaultPrevented),t=n.keyCode||t,i=n.ctrlKey||i,r=n.shiftKey||r,u=n.altKey||u,!(i||r||u)&&!f&&t&&t===nt.KeyCode.ESCAPE?(g()&&h(!1),!1):void 0}function it(){var i=c.getHistoryService().getCurrentState(),r=i&&d.localeIgnoreCaseComparer(i[n.FULLSCREEN_HASH_PARAMETER],"true")===0;h(r,!1,u.showLeftLane===!0,!1,!1,!!r==!!t)}function ut(){return{id:w,title:t?y.ExitFullScreenModeTooltip:y.EnterFullScreenModeTooltip,icon:tt(),showText:!1,action:rt}}function vt(){var n=e.getItem(w),t;n?(n.update(ut()),n.removeHighlight()):(t=e.getItems(),t.push(ut()),e.updateItems(t))}function yt(n){var u={isToggle:n,isFullScreen:t,Url:window.location.pathname,HashUrl:window.location.hash,UserId:r.getDefaultWebContext().user.id,ScreenWidth:window.innerWidth,ScreenHeight:window.innerHeight};f&&f.invokeHandlers(a,this,u);b.publishEvent(new b.TelemetryEventData(i.WebAccessCustomerIntelligenceConstants.Area,i.WebAccessCustomerIntelligenceConstants.FullScreenModeFeature,u))}function l(){return f||(f=new s.NamedEventCollection),f}var rt;n.FULLSCREEN_HASH_PARAMETER="fullScreen";var w="fullscreen-toggle",a="fullscreen-ci",v="fullscreen-url-update-event",t,k,e,f,u;n.initialize=ft;n.getFullScreen=g;n.setFullScreen=h;n.getUrlData=p;n.getFullScreenIcon=tt;n.getFullScreenTooltip=et;n.attachFullScreenCI=ot;n.detachFullScreenCI=st;n.attachFullScreenUrlUpdateEvent=ct;n.detachFullScreenUrlUpdateEvent=lt;rt=function(){h(!t,u.addHistoryPoint!==!1,u.showLeftLane===!0)}}(dt=t.FullScreenHelper||(t.FullScreenHelper={}));tt.tfsModuleLoaded("VSS.UI.Controls.Navigation",t)});

define("WorkItemTracking/Scripts/Utils/WIFormCIDataHelper",["require","exports","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Controls/Navigation","WorkItemTracking/Scripts/Utils/WitControlMode","VSS/Events/Document"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.WIFormCIDataHelper=void 0;var o;(function(n){function t(){return f.WitFormModeUtility.isMobileForm?r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING_MOBILE:r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING}function o(){var n={OpenInNewTabClicked:"True",FullScreenWhenClicked:u.FullScreenHelper.getFullScreen()?"True":"False"};i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_OPEN_WORK_ITEM_IN_NEW_TAB,n))}function s(){i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.WORKITEM_DISCUSSIONCONTROL,{Action:"Discussion.CommentSave"}))}function h(n,u){var s=e.getService().getActiveDocument(),o,f;s&&(o=s.getWorkItem());f={Tab:n};o&&(f.workItemSessionId=o.sessionId);$.extend(f,u||{});i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_TABSELECTION,f))}function c(n,u){var f={isExpanded:n};$.extend(f,u||{});i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_GROUPCOLLAPSED,f))}function l(n){i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_FIELDKEYBOARDSHORTCUT,{shortcut:"alt + ".concat(n)}))}function a(n,u,f){i.publishEvent(new i.TelemetryEventData(t(),r.WITPerformanceScenario.WORKITEM_FIELDCHANGED,{workItemSessionId:n,fieldRefName:"[NonEmail:".concat(u,"]"),controlType:f},Date.now()))}function v(n){i.publishEvent(new i.TelemetryEventData(t(),r.WITPerformanceScenario.WORKITEM_CLOSED,{workItemSessionId:n,action:"Closing workitem"},Date.now()))}function y(n,u,f){i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLASSIFICATION_MRU_VALUE_CHANGED,{isSuggestedValue:u,fieldRefName:"[NonEmail:".concat(f,"]")},Date.now()))}n.getArea=t;n.workItemOpenInNewTabEvent=o;n.discussionControlCommentSaveEvent=s;n.workItemTabClick=h;n.groupPanelCollapsed=c;n.fieldKeyboardShortcutPressed=l;n.fieldValueChanged=a;n.workItemDisposed=v;n.classificationPickerValueChanged=y})(o=t.WIFormCIDataHelper||(t.WIFormCIDataHelper={}))});

define("WorkItemTracking/Scripts/OM/WorkItemConstants",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d;Object.defineProperty(t,"__esModule",{value:!0});t.CoreLinkTypes=t.LinkTypeName=t.WorkItemPaneMode=t.PageSizes=t.BugWITFieldReferenceNames=t.WorkItemUpdateResultState=t.RelatedDataKeys=t.Actions=t.WorkItemCategoryConstants=t.FieldFlags=t.FieldUsages=t.RuleEvaluatorExecutionPhase=t.FieldStatusFlags=t.FieldStatus=t.Exceptions=t.WorkItemChangeType=t.ServerDefaultValueType=t.ExtensionConstants=void 0,function(n){n.LayoutUserSettingsProvider="ms.vss-work-web.work-item-layout-user-settings-data-provider";n.UnfollowsDataProvider="ms.vss-work-web.work-item-unfollows-data-provider"}(i=t.ExtensionConstants||(t.ExtensionConstants={})),function(n){n[n.None=0]="None";n[n.ServerDateTime=1]="ServerDateTime";n[n.CallerIdentity=2]="CallerIdentity";n[n.RandomGuid=3]="RandomGuid"}(r=t.ServerDefaultValueType||(t.ServerDefaultValueType={})),function(n){n.FieldChange="field-change";n.FieldAllowedValuesChange="field-allowed-values-change";n.PreSave="pre-save";n.Saving="saving";n.SaveCompleted="save-completed";n.Validating="validating";n.ValidationCompleted="validation-completed";n.Saved="saved";n.Opened="opened";n.Created="created";n.Refresh="refresh";n.Reset="reset";n.ErrorChanged="error-changed";n.Discarded="discarded";n.Deleted="deleted";n.ProjectChanging="project-changing";n.ProjectChanged="project-changed";n.TypeChanging="type-changing";n.TypeChanged="type-changed";n.WorkItemLinkChangedOutside="workitem-link-updated-outside"}(u=t.WorkItemChangeType||(t.WorkItemChangeType={})),function(n){n.OperationCanceledException="VSS.WorkItemTracking.OperationCanceledException";n.WorkItemBulkSaveException="VSS.WorkItemTracking.WorkItemBulkSaveException";n.ProjectDoesNotExistException="VSS.WorkItemTracking.ProjectDoesNotExistException";n.FieldDoesNotExistException="VSS.WorkItemTracking.FieldDoesNotExistException";n.LinkTypeEndDoesNotExistException="VSS.WorkItemTracking.LinkTypeEndDoesNotExistException";n.LinkTypeDoesNotExistException="VSS.WorkItemTracking.LinkTypeDoesNotExistException";n.WorkItemSaveFailedDueToInvalidStatusException="VSS.WorkItemTracking.WorkItemSaveFailedDueToInvalidStatusException";n.InvalidQuerySyntaxException="VSS.WorkItemTracking.InvalidQuerySyntaxException";n.InvalidQueryFilterRowException="VSS.WorkItemTracking.InvalidQueryFilterRowException";n.QueryItemAlreadyExistException="VSS.WorkItemTracking.QueryItemAlreadyExistException";n.QueryFolderDoesNotExistException="VSS.WorkItemTracking.QueryFolderDoesNotExistException";n.InvalidOperationException="System.InvalidOperationException"}(f=t.Exceptions||(t.Exceptions={})),function(n){n[n.Valid=0]="Valid";n[n.InvalidEmpty=1]="InvalidEmpty";n[n.InvalidNotEmpty=2]="InvalidNotEmpty";n[n.InvalidFormat=3]="InvalidFormat";n[n.InvalidListValue=4]="InvalidListValue";n[n.InvalidOldValue=5]="InvalidOldValue";n[n.InvalidNotOldValue=6]="InvalidNotOldValue";n[n.InvalidEmptyOrOldValue=7]="InvalidEmptyOrOldValue";n[n.InvalidNotEmptyOrOldValue=8]="InvalidNotEmptyOrOldValue";n[n.InvalidValueInOtherField=9]="InvalidValueInOtherField";n[n.InvalidValueNotInOtherField=10]="InvalidValueNotInOtherField";n[n.InvalidDate=11]="InvalidDate";n[n.InvalidTooLong=12]="InvalidTooLong";n[n.InvalidType=13]="InvalidType";n[n.InvalidComputedField=14]="InvalidComputedField";n[n.InvalidPath=15]="InvalidPath";n[n.InvalidCharacters=16]="InvalidCharacters";n[n.InvalidIdentity=17]="InvalidIdentity";n[n.InvalidUnknown=18]="InvalidUnknown"}(e=t.FieldStatus||(t.FieldStatus={})),function(n){n[n.None=0]="None";n[n.AllowsOldValue=64]="AllowsOldValue";n[n.HasFormats=16]="HasFormats";n[n.HasValues=4]="HasValues";n[n.InvalidCharacters=131072]="InvalidCharacters";n[n.InvalidComputedField=536870912]="InvalidComputedField";n[n.InvalidDate=8192]="InvalidDate";n[n.InvalidEmpty=524288]="InvalidEmpty";n[n.InvalidEmptyOrOldValue=33554432]="InvalidEmptyOrOldValue";n[n.InvalidFormat=2097152]="InvalidFormat";n[n.InvalidID=16384]="InvalidID";n[n.InvalidListValue=4194304]="InvalidListValue";n[n.InvalidMask=2147479552]="InvalidMask";n[n.InvalidNotEmpty=1048576]="InvalidNotEmpty";n[n.InvalidNotEmptyOrOldValue=67108864]="InvalidNotEmptyOrOldValue";n[n.InvalidNotOldValue=16777216]="InvalidNotOldValue";n[n.InvalidOldValue=8388608]="InvalidOldValue";n[n.InvalidPath=32768]="InvalidPath";n[n.InvalidRule=262144]="InvalidRule";n[n.InvalidTooLong=65536]="InvalidTooLong";n[n.InvalidType=4096]="InvalidType";n[n.InvalidValueInOtherField=134217728]="InvalidValueInOtherField";n[n.InvalidValueNotInOtherField=268435456]="InvalidValueNotInOtherField";n[n.LimitedToFormats=32]="LimitedToFormats";n[n.LimitedToValues=8]="LimitedToValues";n[n.ReadOnly=2]="ReadOnly";n[n.Required=1]="Required";n[n.SetByRule=128]="SetByRule";n[n.SetByDefaultRule=256]="SetByDefaultRule";n[n.SetByComputedRule=512]="SetByComputedRule";n[n.InvalidIdentityField=1073741824]="InvalidIdentityField"}(o=t.FieldStatusFlags||(t.FieldStatusFlags={})),function(n){n[n.DefaultRules=1]="DefaultRules";n[n.CopyRules=2]="CopyRules";n[n.OtherRules=3]="OtherRules"}(s=t.RuleEvaluatorExecutionPhase||(t.RuleEvaluatorExecutionPhase={})),function(n){n[n.None=0]="None";n[n.WorkItem=1]="WorkItem";n[n.WorkItemLink=2]="WorkItemLink";n[n.Tree=4]="Tree";n[n.WorkItemTypeExtension=8]="WorkItemTypeExtension"}(h=t.FieldUsages||(t.FieldUsages={})),function(n){n[n.None=0]="None";n[n.Sortable=1]="Sortable";n[n.Computed=2]="Computed";n[n.Editable=4]="Editable";n[n.Ignored=8]="Ignored";n[n.Queryable=16]="Queryable";n[n.Reportable=32]="Reportable";n[n.PersonField=64]="PersonField";n[n.Cloneable=128]="Cloneable";n[n.LongText=256]="LongText";n[n.SupportsTextQuery=512]="SupportsTextQuery"}(c=t.FieldFlags||(t.FieldFlags={})),function(n){n.HIDDEN="Microsoft.HiddenCategory";n.TEST_CASE="Microsoft.TestCaseCategory";n.TEST_PLAN="Microsoft.TestPlanCategory";n.TEST_SUITE="Microsoft.TestSuiteCategory";n.TEST_SHAREDSTEP="Microsoft.SharedStepCategory";n.TEST_SHAREDPARAMETER="Microsoft.SharedParameterCategory"}(l=t.WorkItemCategoryConstants||(t.WorkItemCategoryConstants={})),function(n){n.NEW_PROJECT_DATA="new-project-data";n.DISCUSSION_ADDED="discussion-added";n.DISCUSSION_DELETED="discussion-deleted";n.DISCUSSION_UPDATED="discussion-updated";n.RESET_DISCUSSION="reset-discussion";n.RESET_HISTORY="reset-history";n.DISCUSSION_EDIT_DIRTY_CHANGED="discussion-dirty-changed";n.DISCUSSION_COMMENT_UPDATED="discussion-comment-updated";n.WORKITEM_DELETED="workitem-deleted";n.WORKITEM_RESTORED="workitem-restored";n.WORKITEM_DESTROYED="workitem-destroyed";n.WORKITEM_DISCARDED="workitem-discarded";n.WORKITEM_ID_UPDATED="workitem-id-updated";n.WORKITEM_COPIED="workitem-copied"}(a=t.Actions||(t.Actions={})),function(n){n.HISTORY_OUTDATED="history-outdated";n.WORKITEM_MANAGER_KEY="workitem-manager"}(v=t.RelatedDataKeys||(t.RelatedDataKeys={})),function(n){n.NoResult="NoResult";n.Error="Error";n.Success="Success"}(y=t.WorkItemUpdateResultState||(t.WorkItemUpdateResultState={})),function(n){n.ReproSteps="Microsoft.VSTS.TCM.ReproSteps"}(p=t.BugWITFieldReferenceNames||(t.BugWITFieldReferenceNames={})),function(n){n.QUERY=200;n.SAVE=200}(w=t.PageSizes||(t.PageSizes={})),function(n){n.Off="off";n.Right="right";n.Bottom="bottom"}(b=t.WorkItemPaneMode||(t.WorkItemPaneMode={})),function(n){n.Child_Link_Name="System.LinkTypes.Hierarchy-Forward";n.Parent_Link_Name="System.LinkTypes.Hierarchy-Reverse";n.Related_Link_Name="System.LinkTypes.Related-Forward"}(k=t.LinkTypeName||(t.LinkTypeName={})),function(n){n[n.Related=1]="Related";n[n.Parent=-2]="Parent";n[n.Child=2]="Child";n[n.Predecessor=-3]="Predecessor";n[n.Successor=3]="Successor"}(d=t.CoreLinkTypes||(t.CoreLinkTypes={}))});

define("WorkItemTracking/Scripts/LinkForm",["require","exports","VSS/Controls","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/VSS","VSS/Events/Services","VSS/Artifacts/Constants"],function(n,t,i,r,u,f,e){function l(n,t){c(n,function(n){n(t)})}function c(n,t){n=n.toUpperCase();o[n]=t}function a(n,t){var i;n=n.toUpperCase();i=o[n];i?i(t):t(null)}function v(n){return!!o[n.name.toUpperCase()]||n.toolId===e.ToolNames.GitHub}var o,h,s;Object.defineProperty(t,"__esModule",{value:!0});t.LinkForm=t.isLinkFormRegistered=t.beginGetLinkForm=t.registerLinkFormAsync=t.registerLinkForm=t.LEARNMORE_LINK=void 0;o={};h=f.getService();t.LEARNMORE_LINK="https://aka.ms/AA56xmh";t.registerLinkForm=l;t.registerLinkFormAsync=c;t.beginGetLinkForm=a;t.isLinkFormRegistered=v;s=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._workItem=t.workItem,i}return __extends(t,n),t.createTitleElement=function(n,t,i){var r=$("<label/>").addClass("dialog-linkform-label").text(n);return t&&r.attr("for",t),i&&r.addClass(i),r},t.createTitleElementWithIconClass=function(n,i,r,u,f){var e=$("<div/>").addClass("section-title");return $("<div/>").addClass(r).appendTo(e),t.createTitleElement(n,i,u).appendTo(e),f&&f.appendTo(e),e},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"link-dialog-form"},t))},t.prototype._createComment=function(){var n="comment";this._element!==null&&(this._element.append(t.createTitleElement(r.LinkDialogCommentTitle,n)),this._element.append($("<input>").attr("type","text").attr("id",n).addClass("link-dialog-width-100")))},t.prototype.getComment=function(){return $.trim(this._element.find("#comment").val())},t.prototype.LinkResult=function(){return null},t.prototype.unload=function(){this.dispose();this._workItem=null;this._validator=null},t.prototype.fireLinkFormValidationEvent=function(n){h.fire(t.LINKFORM_VALIDATED,this,{linkForm:n})},t.LINKFORM_VALIDATED="linkform-validated",t}(i.BaseControl);t.LinkForm=s;u.initClassPrototype(s,{_workItem:null,_validator:null})});

define("WorkItemTracking/Scripts/RegisteredLinkTypeNames",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.RegisteredLinkTypeNames=void 0;var i;(function(n){n.Related="Related Workitem";n.Hyperlink="Workitem Hyperlink";n.Changeset="Fixed in Changeset";n.VersionedItem="Source Code File";n.Commit="Fixed in Commit";n.Branch="Branch";n.Tag="Tag";n.PullRequest="Pull Request";n.ResultAttachment="Result Attachment";n.TestResult="Test Result";n.Test="Test";n.Storyboard="Storyboard";n.Build="Build";n.FoundInBuild="Found in build";n.IntegratedInBuild="Integrated in build";n.WikiPage="Wiki Page";n.WorkItemLink="WorkItemLink";n.RemoteWorkItemLink="RemoteWorkItemLink";n.GitHubPullRequestLinkType="GitHub Pull Request";n.GitHubCommitLinkType="GitHub Commit";n.GitHubIssueLinkType="GitHub Issue"})(i=t.RegisteredLinkTypeNames||(t.RegisteredLinkTypeNames={}))});

define("WorkItemTracking/Scripts/RegisterLinkForms",["require","exports","VSS/VSS","WorkItemTracking/Scripts/LinkForm","WorkItemTracking/Scripts/RegisteredLinkTypeNames"],function(n,t,i,r,u){function f(){e();o();s();h();c();l()}function e(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Changeset,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.ChangesetLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.VersionedItem,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.VersionedItemLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Commit,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.CommitLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Branch,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.GitBranchLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Tag,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.GitTagLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.PullRequest,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.PullRequestLinkForm)})})}function o(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Build,function(n){i.using(["Build/Scripts/WorkItemIntegration.Linking"],function(t){n(t.BuildLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.FoundInBuild,function(n){i.using(["Build/Scripts/WorkItemIntegration.Linking"],function(t){n(t.FoundInBuildLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.IntegratedInBuild,function(n){i.using(["Build/Scripts/WorkItemIntegration.Linking"],function(t){n(t.IntegratedInBuildLinkForm)})})}function s(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.TestResult,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms"],function(t){n(t.TestResultForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.ResultAttachment,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms"],function(t){n(t.TestResultAttachmentForm)})})}function h(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Hyperlink,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms"],function(t){n(t.HyperlinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Storyboard,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms"],function(t){n(t.StoryboardLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.WorkItemLink,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms.WorkItem"],function(t){n(t.WorkItemLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.RemoteWorkItemLink,function(n){i.using(["WorkItemTracking/Scripts/Controls/Links/RemoteLinkForm"],function(t){n(t.RemoteLinkForm)})})}function c(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.WikiPage,function(n){i.using(["Wiki/Scripts/WikiPageForm"],function(t){n(t.WikiPageForm)})})}function l(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.GitHubPullRequestLinkType,function(n){i.using(["WorkItemTracking/Scripts/Controls/Links/GitHubLinkForms"],function(t){n(t.GitHubPullRequestLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.GitHubCommitLinkType,function(n){i.using(["WorkItemTracking/Scripts/Controls/Links/GitHubLinkForms"],function(t){n(t.GitHubCommitLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.GitHubIssueLinkType,function(n){i.using(["WorkItemTracking/Scripts/Controls/Links/GitHubLinkForms"],function(t){n(t.GitHubIssueLinkForm)})})}Object.defineProperty(t,"__esModule",{value:!0});t.registerLinkForms=void 0;t.registerLinkForms=f});

define("WorkItemTracking/Scripts/OM/NodesCacheManager",["require","exports","VSS/VSS","VSS/Service","VSS/Navigation/Services","VSS/Diag","WorkItemTracking/Scripts/Utils/NodeHelpers","WorkItemTracking/Scripts/CustomerIntelligence","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Utils/PerfScenarioManager","Presentation/Scripts/TFS/TFS.Legacy.Ajax","q","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","TFS/WorkItemTracking/RestClient","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){Object.defineProperty(t,"__esModule",{value:!0});t.NodesCacheManager=void 0;var d=function(){function n(n){this._referencedNodes={byId:{},byAreaPath:{},byIterationPath:{}};this._project=n;var t={id:this._project.id,name:this._project.name,path:this._project.name};this._referencedNodes.byId[t.id]=this._referencedNodes.byAreaPath[t.path]=this._referencedNodes.byIterationPath[t.path]=t}return n.prototype.addReferencedNodes=function(n){var i,u,r,f,t;if(n){for(i=0,u=n.areaNodes;i<u.length;i++)t=u[i],this._referencedNodes.byId[t.id]=this._referencedNodes.byAreaPath[t.path]=t;for(r=0,f=n.iterationNodes;r<f.length;r++)t=f[r],this._referencedNodes.byId[t.id]=this._referencedNodes.byIterationPath[t.path]=t}},n.prototype.getReferencedNode=function(n){var t,u,o;if(typeof n=="number")t=n;else if(typeof n=="object")var e=n,i=e.path,r=e.nodeType;if(this.isNodesCacheAvailable()){if(typeof t=="number")return this.findNodeById(t);if(i&&r)return r===1?this.findAreaNodeByPath(i):this.findIterationNodeByPath(i)}return(r?(o=r===1?this._referencedNodes.byAreaPath:this._referencedNodes.byIterationPath,u=o[i]):u=this._referencedNodes.byId[t],u)?u:(f.Debug.logInfo("Could not find a node cache for ".concat(t?t:"".concat(i," (type: ").concat(r,")"))),null)},n.prototype.clearCache=function(){this._iterationNode=null;this._areaNode=null;this._nodes=null},n.prototype.getNodes=function(){if(this.isNodesCacheAvailable())return this._nodes;f.Debug.fail("Project nodes are not ready yet. Use beginGetNodes to download from the server.")},n.prototype.isNodesCacheAvailable=function(){return this._nodes&&!$.isFunction(this._nodes)},n.prototype.refreshCache=function(){var t=this,n;return this.clearCache(),n=b.TfsContext.getDefault().navigation.projectId,this._project.store.metadataCacheStampManager.ensureStampsForCurrentProject(n,!0).then(function(){return t.beginGetNodes()})},n.prototype.beginGetNodes=function(){var n=u.getHistoryService().getCurrentState().readonly,t=n||!y.FeatureAvailabilityService.isFeatureEnabled(p.FeatureAvailabilityFlags.DisableWorkItemStoreDataProviders);return t?this.beginGetNodesFromRestClient():this.beginGetNodesFromMvc()},n.prototype.beginGetNodesFromMvc=function(){var n=this,t=l.defer();return i.queueRequest(this,this,"_nodes",function(n){return t.resolve(n)},function(n){return t.reject(n)},function(t,i){n._project.store.metadataCacheStampManager.addStampToParams(s.WITCommonConstants.Nodes,null,function(r){h.PerfScenarioManager.addSplitTiming(o.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,!0);var u=function(f){c.getMSJSON(n._project.getApiLocation("nodes"),r,function(i,s,c){var l,y;if(i==null&&f){y={ErrorName:"NodesIsNullOrUndefined",projectName:n._project.name,urlParams:r};a.publishEvent(new a.TelemetryEventData(v.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,v.WITCustomerIntelligenceFeature.NODES_CACHE_MANAGER,y));r.forceInvalidateCache=(new Date).getTime().toString();u(!1);return}h.PerfScenarioManager.addData((l={},l["".concat(o.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,".ETAG")]=c.getResponseHeader("ETag"),l));h.PerfScenarioManager.addSplitTiming(o.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,!1);t(e.NodeHelpers.link(i))},i)};u(!0)})}),t.promise},n.prototype.beginGetNodesFromRestClient=function(){var n=this,t=l.defer();return i.queueRequest(this,this,"_nodes",function(n){return t.resolve(n)},function(n){return t.reject(n)},function(t,i){h.PerfScenarioManager.addSplitTiming(o.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,!0);var f=r.getClient(w.WorkItemTrackingHttpClient4),u={id:n._project.id,name:n._project.name,guid:n._project.guid,structure:0,type:e.ClassificationNodeTypeConstants.ProjectType,children:[]};f.getRootNodes(n._project.name,15).then(function(i){for(var r,f=0,o=i;f<o.length;f++)r=o[f],r.hasChildren&&(r.children=n.sortNodes(r.children)),u.children.push(e.NodeHelpers.mapClassificationNodesToLegacyNode(r));e.NodeHelpers.link(u);t(u)},function(n){i(n.message)})}),t.promise},n.prototype.sortNodes=function(n){for(var i,t=0,r=n;t<r.length;t++)i=r[t],i.hasChildren&&(i.children=this.sortNodes(i.children));return n.sort(this._compare)},n.prototype.findAreaNodeByPath=function(n){return e.NodeHelpers.findByPath(this.getNodes(),n,1,1)},n.prototype.findIterationNodeByPath=function(n){return e.NodeHelpers.findByPath(this.getNodes(),n,1,2)},n.prototype.findNodeById=function(n){return e.NodeHelpers.findById(this.getNodes(),n)},n.prototype.getAreaNode=function(n){return this._areaNode||(this._areaNode=e.NodeHelpers.findChildByStructure(this.getNodes(),1)),n?{id:this._project.id,name:this._project.name,guid:this._project.guid,structure:0,type:-42,children:this._areaNode.children}:this._areaNode},n.prototype.getIterationNode=function(n){return this._iterationNode||(this._iterationNode=e.NodeHelpers.findChildByStructure(this.getNodes(),2)),n?{id:this._project.id,name:this._project.name,guid:this._project.guid,structure:0,type:-42,children:this._iterationNode.children}:this._iterationNode},n.prototype._compare=function(n,t){var i=0,r=new Date(n.attributes?n.attributes.startDate:null),u=new Date(n.attributes?n.attributes.finishDate:null),f=new Date(t.attributes?t.attributes.startDate:null),e=new Date(t.attributes?t.attributes.finishDate:null);return i=(r.getTime()||Number.MAX_VALUE)-(f.getTime()||Number.MAX_VALUE),i===0&&(i=(u.getTime()||Number.MAX_VALUE)-(e.getTime()||Number.MAX_VALUE)),i===0&&(i=k.localeIgnoreCaseComparer(n.name||"",t.name||"")),i},n}();t.NodesCacheManager=d});

define("VSS/Identities/Picker/Common",["require","exports"],function(n,t){var r,i;Object.defineProperty(t,"__esModule",{value:!0});t.CommonHelpers=t.FilterByScope=void 0;r=function(){function n(n,t){this.filterByAncestorEntityIds=n||[];this.filterByEntityIds=t||[]}return n.GetHashCode=function(t){var r=i._hashSeed,e,u,f,o;if(t==null)return r;for(e=t.filterByAncestorEntityIds.sort().concat([n._hashSeparator],t.filterByEntityIds.sort()),u=0,f=e;u<f.length;u++)o=f[u],r=r*i._stringListHashPrime+i.GetStringHashCode(o),r=r&r;return r},n.isFilterByScopeEmpty=function(n){return n&&n.filterByAncestorEntityIds.length==0&&n.filterByEntityIds.length==0},n._hashSeparator="@",n}();t.FilterByScope=r;i=function(){function n(){}return n.GetStringHashCode=function(t){var i=n._hashSeed,r;if(t)for(t=t.trim().toLowerCase(),r=0;r<t.length;r++)i=i*n._stringHashPrime+t.charCodeAt(r),i=i&i;return i},n.GetStringListHashCode=function(t){var i=n._hashSeed,r;if(t)for(r in t)i=i*n._stringListHashPrime+n.GetStringHashCode(r),i=i&i;return i},n._hashSeed=0,n._stringListHashPrime=31,n._stringHashPrime=37,n}();t.CommonHelpers=i});

define("WorkItemTracking/Scripts/WorkItemMetadataCacheStampManager",["require","exports","q","VSS/Service","VSS/Utils/String","VSS/Contributions/Services","VSS/WebApi/Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/CustomerIntelligence","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource","VSS/Error"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemMetadataCacheStampManager=void 0;var a=function(){function n(n){this._cachedPromises={};this._workItemMetaDataCacheStamps={};this._tfsContext=n}return n.prototype.ensureStampsForCurrentProject=function(t,i){var s=this,o,u;return i===void 0&&(i=!1),o=t.toUpperCase(),u=r.getService(f.WebPageDataService),u.ensureDataProvidersResolved([{id:n.MetadataStampsKey,properties:{serviceInstanceType:e.ServiceInstanceTypes.TFS}}],i).then(function(){var t=u.getPageData(n.MetadataStampsKey);t&&t.data&&s._setCacheStamps(t.data,o)})},n.prototype.getMetadataCacheStamp=function(n,t){var f=this,e=o.TfsContext.getDefault().navigation.projectId,r=(t||e||"").toUpperCase(),u;return r?(u=function(){return f._workItemMetaDataCacheStamps[r]?f._workItemMetaDataCacheStamps[r][n]:null},!this._workItemMetaDataCacheStamps[r])?this._cachedPromises[r]?this._cachedPromises[r].then(function(){return u()},function(){return u()}):(this._cachedPromises[r]=this._ensureMetadataCacheStamps(r,e,t),this._cachedPromises[r].then(function(){return delete f._cachedPromises[r],u()},function(n){return delete f._cachedPromises[r],l.publishErrorToTelemetry(n),u()})):i(u()):i(null)},n.prototype._fetchMetadataCacheStamps=function(n){var t=i.defer(),r={controller:"wit",action:"getMetadataCacheStamps",routeData:{project:n}};return(new c.WorkItemStoreLevelWITDataSource).getDataAsync(r,{projectId:n},!0).then(function(n){t.resolve(n.data)},function(){t.resolve(null)}),t.promise},n.prototype._ensureMetadataCacheStamps=function(t,e,o){var c=this,a=!o||u.equals(o,e||"",!0),l=function(n){c._workItemMetaDataCacheStamps[t]=n?n.workItemMetadataCacheStamp:null;c.workItemTypesEtag=n?n.rawWorkItemTypesEtagForCI:null};return a?(s.PerfScenarioManager.addSplitTiming(h.PerformanceEvents.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMPAGEDATA,!0),r.getService(f.ExtensionService).getContribution(n.MetadataStampsKey).then(function(){s.PerfScenarioManager.addSplitTiming(h.PerformanceEvents.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMPAGEDATA,!1);var t=c.getPageData(n.MetadataStampsKey);return t&&t.data&&l(t.data),i(null)})):(s.PerfScenarioManager.addSplitTiming(h.PerformanceEvents.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMAPI,!0),this._fetchMetadataCacheStamps(o).then(function(n){return s.PerfScenarioManager.addSplitTiming(h.PerformanceEvents.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMAPI,!1),l(n),i(null)}))},n.prototype._setCacheStamps=function(n,t){this._workItemMetaDataCacheStamps[t]=n?n.workItemMetadataCacheStamp:null;this.workItemTypesEtag=n?n.rawWorkItemTypesEtagForCI:null},n.prototype.addStampToParams=function(n,t,i,r){var u=function(n){return n?t?(t.stamp=n,t):{stamp:n}:t};this.getMetadataCacheStamp(n,r).then(function(n){i(u(n))})},n.prototype.getPageData=function(n){return r.getService(f.WebPageDataService).getPageData(n)},n.prototype._getApiLocation=function(n,t){return this._tfsContext.getActionUrl(n||"","wit",$.extend({project:"",team:"",area:"api"},t))},n.MetadataStampsKey="ms.vss-work-web.work-item-cache-data-provider",n}();t.WorkItemMetadataCacheStampManager=a});

define("WorkItemTracking/Scripts/OM/DataSources/DataProviderDataSource",["require","exports","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Utils/Core","VSS/Contributions/Services","VSS/Service","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Context","VSS/Navigation/NavigationHistoryService","VSS/Context"],function(n,t,i,r,u,f,e,o,s,h,c){function l(n){return n.status===o.CacheStatus.UpToDate||typeof n.status=="string"&&n.status===o.CacheStatus[o.CacheStatus.UpToDate]}Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemDataProviderSource=t.WorkItemDataProviderId=void 0;t.WorkItemDataProviderId="ms.vss-work-web.work-item-data-provider";var a=function(){function n(n){this._cacheInformationManager=n}return n.prototype.getWorkItemData=function(n){if(!this._containsWorkItemData(n))return null;var t=this._getDataProviderData();return this._processWorkItemData(n,t)},n.prototype.beginGetWorkItemData=function(n,i,r,u,o){var a=this,l;if(i.length!==1)return Promise.resolve(null);if(l=i[0],!o&&this._containsWorkItemData(l))return Promise.resolve([this.getWorkItemData(l)]);var y=s.getPageContext(),p=h.getNavigationHistoryService(),v={id:i[0],"include-history":o,"include-in-recent-activity":u,"is-deleted":r,cookie:this._cacheInformationManager&&this._cacheInformationManager.readInformationForNonWITLocation()};return e.getService(f.WebPageDataService,c.getDefaultWebContext()).getDataAsync(t.WorkItemDataProviderId,null,v).then(function(n){return a._dataProviderData=n,[a._processWorkItemData(l,a._dataProviderData)]})},n.prototype._processWorkItemData=function(n,t,f){var e,o;if(f===void 0&&(f=!0),e=t&&t["work-item-data"],e||(o=t&&t["work-item-data-serialized"],o&&(e=u.parseMSJSON(o))),!e)throw i.format(r.WorkItemNotFoundClientException,n);return f&&(delete t["work-item-id"],delete t["work-item-data"],delete t["work-item-data-serialized"]),e},n.prototype.beginGetWorkItemTypeData=function(n,t){var e,f,r;if(t.length>1)return Promise.resolve(null);if(e=this._getDataProviderData(),f=e&&e["work-item-type-data"],f){if(l(f))return Promise.resolve(null);if(f.data)return(r=f.data,!i.equals(r.projectGuid,n,!0))?Promise.resolve(null):!i.equals(t[0],r.referenceName,!0)&&!i.equals(t[0],r.name,!0)?Promise.resolve(null):(this._canDeserializeRules(r)&&(r.rules.fieldRules=u.parseMSJSON(r.rules.fieldRules)),Promise.resolve([r]))}return Promise.resolve(null)},n.prototype.beginGetFields=function(){return null},n.prototype.beginGetFieldProjectData=function(n){var r=this._getDataProviderData(),t=r&&r["work-item-project-field-data"],u;if(t)return l(t)?Promise.resolve(null):t.data&&t.data.projects&&(u=t.data.projects.some(function(t){return i.equals(n,t.guid,!0)||i.equals(n,t.name,!0)}),!u)?Promise.resolve(null):Promise.resolve(t.data)},n.prototype.beginGetLinkTypes=function(){var t=this._getDataProviderData(),n=t&&t["work-item-link-data"];if(n)return l(n)?Promise.resolve(null):Promise.resolve(n.data)},n.prototype._canDeserializeRules=function(n){return n&&n.rules&&n.rules.fieldRules&&(typeof n.rules.fieldRules=="string"||n.rules.fieldRules instanceof String)},n.prototype._containsWorkItemData=function(n){var t=this._getDataProviderData();return t&&t["work-item-id"]===n&&t["work-item-data"]!==undefined},n.prototype._getDataProviderData=function(){if(!this._dataProviderData){var n=e.getService(f.WebPageDataService);this._dataProviderData=n.getPageData(t.WorkItemDataProviderId)}return this._dataProviderData},n}();t.WorkItemDataProviderSource=a});

define("WorkItemTracking/Scripts/OM/DataSources/QueryDataProviderDataSource",["require","exports","VSS/Contributions/Services","VSS/Service","VSS/Utils/Array","VSS/Utils/String"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.QueryDataProviderSource=void 0;var e="ms.vss-work-web.query-data-provider",o=function(){function n(){}return n.prototype.beginGetWorkItemData=function(){return null},n.prototype.beginGetWorkItemTypeData=function(){return null},n.prototype.beginGetLinkTypes=function(){return null},n.prototype.beginGetFields=function(){return null},n.prototype.beginGetFieldProjectData=function(n){var i=this._getDataProviderData(),t=i&&i.projectFieldData,r;return t&&(r=u.arrayContains(n,t.projects,function(n,t){return f.localeIgnoreCaseComparer(t.guid,n)===0||f.localeIgnoreCaseComparer(t.name,n)===0}),r)?Promise.resolve(t):null},n.prototype._getDataProviderData=function(){var n=r.getService(i.WebPageDataService);return n.getPageData(e)},n}();t.QueryDataProviderSource=o});

define("WorkItemTracking/Scripts/OM/DataSources/MvcDataSource",["require","exports","WorkItemTracking/Scripts/Utils/PerfScenarioManager","Presentation/Scripts/TFS/TFS.Legacy.Ajax","WorkItemTracking/Scripts/CustomerIntelligence","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemMvcClient=void 0;var s=function(){function n(n,t){this._tfsContext=n;this._cacheStampManager=t}return n.prototype.beginGetWorkItemData=function(n,t,i,r,u){var f=u?"workitems":"workitemsnohistory",o={controller:"wit",action:f};return(new e.WorkItemStoreLevelWITDataSource).postDataAsync(o,{ids:t,isDeleted:i,includeInRecentActivity:r,includeHistory:u}).then(function(n){return n.data})},n.prototype.beginGetLinkTypes=function(){var n=this;return new Promise(function(t,r){n._cacheStampManager.addStampToParams(f.WITCommonConstants.LinkTypes,null,function(f){(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync({controller:"wit",action:"linkTypes"},f,n._tfsContext.navigation.collection.instanceId,o.WITCommonConstants.LinkTypes,"_").then(function(n){var r;n.requestHeaders&&i.PerfScenarioManager.addData((r={},r["".concat(u.PerformanceEvents.WORKITEMTRACKING_GETLINKTYPES_REQUEST,".ETAG")]=n.requestHeaders.getResponseHeader("ETag"),r["".concat(u.PerformanceEvents.WORKITEMTRACKING_GETLINKTYPES_REQUEST,".DATE")]=n.requestHeaders.getResponseHeader("Date"),r));t(n.data)},r)})})},n.prototype.beginGetWorkItemTypeData=function(n,t){var r=this;return new Promise(function(o,s){r._cacheStampManager.addStampToParams(f.WITCommonConstants.WorkItemTypes,{typeNames:t,projectId:n},function(t){i.PerfScenarioManager.addSplitTiming(u.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,!0);var r={controller:"wit",action:"workItemTypes",routeData:{project:n}};(new e.WorkItemStoreLevelWITDataSource).getDataAsync(r,t).then(function(n){var t;n.requestHeaders&&i.PerfScenarioManager.addData((t={},t["".concat(u.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,".ETAG")]=n.requestHeaders.getResponseHeader("ETag"),t["".concat(u.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,".DATE")]=n.requestHeaders.getResponseHeader("Date"),t));i.PerfScenarioManager.addSplitTiming(u.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,!1);o(n.data)},s)},n)})},n.prototype.beginGetFieldProjectData=function(n){var t=this;return new Promise(function(i,r){t._cacheStampManager.addStampToParams(f.WITCommonConstants.TeamProjects,{includeFieldDefinitions:!0,namesOrIds:[n]},function(t){var u={controller:"wit",action:"teamProjects",routeData:{project:n}};(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync(u,t,n,o.WITCommonConstants.TeamProjects,n).then(function(n){i(n.data)},function(n){r(n)})})})},n.prototype.beginGetFields=function(){var n=this;return new Promise(function(t,i){n._cacheStampManager.addStampToParams(f.WITCommonConstants.Fields,null,function(u){r.getMSJSON(n._getApiLocation(undefined,"fields"),u,function(n){t(n)},function(n){i(n)})})})},n.prototype._getApiLocation=function(n,t,i){return this._tfsContext.getActionUrl(t||"","wit",$.extend({project:n,team:"",area:"api"},i))},n}();t.WorkItemMvcClient=s});

define("WorkItemTracking/Scripts/OM/DataSources/index",["require","exports","WorkItemTracking/Scripts/OM/DataSources/DataProviderDataSource","WorkItemTracking/Scripts/OM/DataSources/QueryDataProviderDataSource","WorkItemTracking/Scripts/OM/DataSources/MvcDataSource"],function(n,t,i,r,u){function f(n,t,f){var e=[];return window.LWL&&(e.push(new i.WorkItemDataProviderSource(f)),e.push(new r.QueryDataProviderSource)),e.push(new u.WorkItemMvcClient(n,t)),e}Object.defineProperty(t,"__esModule",{value:!0});t.getDataSources=void 0;t.getDataSources=f});

define("WorkItemTracking/Scripts/Utils/LayoutUserSettingsUtility",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Utils/Array","VSS/Utils/String","VSS/Diag"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.LayoutUserSettingsUtility=void 0;var e;(function(n){function t(n,t){f.Debug.assertIsNotNull(n,"layoutUserSettings");f.Debug.assertIsNotNull(t,"workItemType");var i,r=t.name;return t.processId&&!u.isEmptyGuid(t.processId)?i=e(n,t.processId):t.project&&t.project.guid&&(i=o(n,t.project.guid)),i&&r&&h(i,r)||null}function h(n,t){var i=r.first(n.workItemTypeSettings,function(n){return u.equals(n.refName,t,!0)});return i||(i={refName:t,collapsedGroups:[],mobileCollapsedGroups:[]},n.workItemTypeSettings.push(i)),i}function e(n,t){var i,r,e,o;if(f.Debug.assertIsNotNull(n,"layoutUserSettings"),f.Debug.assert(u.isGuid(t)),n)for(i=0,r=n.processSettings;i<r.length;i++)if(e=r[i],u.ignoreCaseComparer(e.processId,t)===0)return e;return o={processId:t,workItemTypeSettings:[]},n.processSettings.push(o),o}function o(n,t){var i,r,e,o;if(f.Debug.assertIsNotNull(n,"layoutUserSettings"),n)for(i=0,r=n.projectSettings;i<r.length;i++)if(e=r[i],u.ignoreCaseComparer(e.projectId,t)===0)return e;return o={projectId:t,workItemTypeSettings:[]},n.projectSettings.push(o),o}function c(n,r,u,e){e===void 0&&(e=i.FormLayoutType.Desktop);f.Debug.assertIsNotNull(n,"layoutUserSettings");var o=t(n,r);return s(o,u,e)}function s(n,t,r){r===void 0&&(r=i.FormLayoutType.Desktop);f.Debug.assertIsNotNull(n,"workItemTypeSettings");var e=r===i.FormLayoutType.Desktop?n.collapsedGroups:n.mobileCollapsedGroups;return e?e.filter(function(n){return u.equals(n,t,!0)}).length>0:!1}function l(n,e,o,s,h){var c,l,a;if(h===void 0&&(h=i.FormLayoutType.Desktop),f.Debug.assertIsNotNull(n,"layoutUserSettings"),f.Debug.assertIsNotNull(e,"workItemType"),!n)throw new Error("Invalid parameter: layoutUserSettings");if(!o)throw new Error("Invalid parameter: groupId");if(!e)throw new Error("Invalid parameter: workItemType");c=t(n,e);c.collapsedGroups=c.collapsedGroups||[];c.mobileCollapsedGroups=c.mobileCollapsedGroups||[];l=h===i.FormLayoutType.Desktop?c.collapsedGroups:c.mobileCollapsedGroups;a=r.findIndex(l,function(n){return u.equals(n,o,!0)});s&&a===-1?l.push(o):s||a===-1||l.splice(a,1)}n.getWorkItemTypeSettings=t;n.getProcessSettings=e;n.getProjectSettings=o;n.isGroupCollapsed=c;n.isGroupCollapsedForWorkItemType=s;n.setGroupExpansionState=l})(e=t.LayoutUserSettingsUtility||(t.LayoutUserSettingsUtility={}))});

define("WorkItemTracking/Scripts/Form/UserLayoutSettings",["require","exports","q","VSS/Service","VSS/Contributions/Services","WorkItemTracking/Scripts/Utils/LayoutUserSettingsUtility","VSS/Error","VSS/Diag","VSS/VSS","VSS/WebApi/Constants","VSS/Settings/Services"],function(n,t,i,r,u,f,e,o,s,h,c){var v;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemFormUserLayoutSettingsService=void 0;var y=500,l="ms.vss-work-web.work-item-layout-user-settings-data-provider",a={processSettings:[],projectSettings:[],isWitDialogFullScreen:!1},p=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._storage=new v,t}return __extends(t,n),t.prototype.ensureSettingsAreLoaded=function(){return this._storage.ensureSettingsLoaded()},Object.defineProperty(t.prototype,"isDialogFullscreen",{get:function(){return this._storage.layoutSettings&&this._storage.layoutSettings.isWitDialogFullScreen||!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fieldChromeBorder",{get:function(){return this._storage.fieldChromeBorder},enumerable:!1,configurable:!0}),t.prototype.getLayoutSettingsForWorkItemType=function(n){var t=this._storage.layoutSettings;return f.LayoutUserSettingsUtility.getWorkItemTypeSettings(t,n)},t.prototype.setGroupExpansionState=function(n,t,i,r){return this._storage.queueSettingsOperation(function(u){u&&f.LayoutUserSettingsUtility.setGroupExpansionState(u,n,t,i,r)})},t.prototype.setDialogFullscreenState=function(n){return this._storage.queueSettingsOperation(function(t){t.isWitDialogFullScreen=n})},t}(r.VssService);t.WorkItemFormUserLayoutSettingsService=p;v=function(){function n(){this._processing=!1;this._queue=[];this._initLayoutSettingsFromPageData()}return n.prototype.ensureSettingsLoaded=function(){var n=this;return this._layoutSettings?i(null):this._updateCurrentLayoutState().then(function(){if(!n._layoutSettings)return r.getService(u.WebPageDataService).ensureDataProvidersResolved([{id:l,properties:{serviceInstanceType:h.ServiceInstanceTypes.TFS}}]).then(function(){n._initLayoutSettingsFromPageData()},function(n){e.publishErrorToTelemetry(n)})})},Object.defineProperty(n.prototype,"layoutSettings",{get:function(){return this._layoutSettings||a},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fieldChromeBorder",{get:function(){return this._fieldChromeBorder},enumerable:!1,configurable:!0}),n.prototype.queueSettingsOperation=function(n){return this._queue.push(n),this._processQueue()},n.prototype._initLayoutSettingsFromPageData=function(){var n=r.getService(u.WebPageDataService).getPageData(l);this._layoutSettings=n&&n.layoutUserSettings;this._fieldChromeBorder=n&&n.fieldChromeBorder},n.prototype._processQueue=function(){var n=this;return this._processing?(this._waitingOperation||(this._waitingOperation=this._pendingOperation.then(function(){return n._waitingOperation=null,n._processQueue()})),this._waitingOperation):(this._pendingOperation=i.delay(y).then(function(){return n._processOperations()}).then(function(){n._pendingOperation=null;n._processing=!1}).then(null,function(t){e.publishErrorToTelemetry(t);n._pendingOperation=null;n._processing=!1}),this._pendingOperation)},n.prototype._processOperations=function(){if(this._processing=!0,this._queue&&this._queue.length>0){var n=[];return n=this._queue.slice(0),this._queue=[],this._updateSettings(n)}},n.prototype._updateSettings=function(n){var t=this;return this._updateCurrentLayoutState().then(function(){for(var u,f,i=0,r=n;i<r.length;i++)u=r[i],u(t._layoutSettings||a);return f=t._getService(),f.setEntries({"WorkItemTracking/LayoutUserSettings":t._layoutSettings},0)})},n.prototype._getService=function(){return c.getService()},n.prototype._updateCurrentLayoutState=function(){var n=this,t=this._getService();return t.getEntriesAsync("WorkItemTracking",0).then(function(t){var i=t.value;n._layoutSettings=i&&i.LayoutUserSettings}).then(null,function(n){e.publishErrorToTelemetry(n);o.logError(s.getErrorMessage(n))})},n}()});

define("WorkItemTracking/Scripts/OM/WorkItemMetadataCookie",["require","exports"],function(n,t){function f(n){for(var e,t,o=[],f=0,s=Object.keys(n);f<s.length;f++)e=s[f],t=n[e],o.push([e,t.scopeId,t.stamp,Array.isArray(t.keys)&&t.keys.join(u)||t.keys].join(r));return encodeURIComponent(o.join(i))}function e(n){var t={},f=decodeURIComponent(n||"").split(i);return f.forEach(function(n){var i=n.split(r);if(i.length>2){var e=i[0],o=i[1],s=i[2],f=i[3].split(u);t[e]={scopeId:o,stamp:s,keys:f.length>0&&f||"_"}}}),t}Object.defineProperty(t,"__esModule",{value:!0});t.deserialize=t.serialize=void 0;var i="|",r=":",u=",";t.serialize=f;t.deserialize=e});

define("WorkItemTracking/Scripts/OM/WorkItemMetadataCacheInformationManager",["require","exports","Presentation/Scripts/TFS/TFS.Core.Utils","WorkItemTracking/Scripts/OM/WorkItemMetadataCookie","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/Core","VSS/Utils/String","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Service","VSS/Settings"],function(n,t,i,r,u,f,e,o,s,h){var c;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemMetadataCacheInformationManager=void 0;var a=432e3,l="WIT-METADATA",v=(c={},c[o.WITCommonConstants.TeamProjects.toLowerCase()]=!0,c[o.WITCommonConstants.LinkTypes.toLowerCase()]=!0,c[o.WITCommonConstants.WorkItemTypes.toLowerCase()]=!0,c),y=function(){function n(){}return n.prototype.persist=function(n,t,u,c){var p,y,w,d;if(this._shouldSetCookieForType(t)){var b=e.format(o.WorkItemTrackingMetadataCacheConstants.CookieFormat,n),k=s.getLocalService(h.LocalSettingsService),v=i.getCookie(b);for(v||(v=k.read(l,null,h.LocalSettingsScope.Project)),p=r.deserialize(v),p[t]={scopeId:n,stamp:c,keys:u},v=r.serialize(p),y=0,w=this._getCookieLocations();y<w.length;y++)d=w[y],f.setCookie(b,v,d,undefined,a);k.write(l,v,h.LocalSettingsScope.Project)}},n.prototype.readInformationForNonWITLocation=function(){var n=s.getLocalService(h.LocalSettingsService);return n.read(l,null,h.LocalSettingsScope.Project)},n.prototype._shouldSetCookieForType=function(n){return v[n.toLowerCase()]},n.prototype._getCookieLocations=function(){return[u.TfsContext.getDefault().getActionUrl("","workitems")]},n}();t.WorkItemMetadataCacheInformationManager=y});

define("Presentation/Scripts/TFS/TFS.OM.Identities",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Artifacts/Services","VSS/Locations"],function(n,t,i,r,u,f){var c,e,o,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.IdentityHelper=t.IdentityImageSize=t.IdentitySearchFactor=t.IdentityImageMode=t.IdentityFilter=void 0,function(n){n[n.All=0]="All";n[n.Users=1]="Users";n[n.Groups=2]="Groups"}(c=t.IdentityFilter||(t.IdentityFilter={})),function(n){n[n.None=0]="None";n[n.ShowGenericImage=1]="ShowGenericImage"}(e=t.IdentityImageMode||(t.IdentityImageMode={})),function(n){n[n.AccountName=0]="AccountName";n[n.DisplayName=1]="DisplayName";n[n.AdministratorsGroup=2]="AdministratorsGroup";n[n.Identifier=3]="Identifier";n[n.MailAddress=4]="MailAddress";n[n.General=5]="General";n[n.Alias=6]="Alias"}(o=t.IdentitySearchFactor||(t.IdentitySearchFactor={})),function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large"}(s=t.IdentityImageSize||(t.IdentityImageSize={}));h=function(){function n(){}return n.preProcessIdentities=function(t,i){i===void 0&&(i=!1);$.each(t,function(t,i){i.isTfsGroup=n.isTfsGroup(i)})},n.getIdentityImageUrl=function(n,t,i){t===void 0&&(t=e.None);var u=r.TfsContext.getDefault();return n.isAadIdentity?u.getActionUrl("GetAadUserThumbnail","identity",{project:"",team:"",area:"api",userObjectId:n.id}):((i===undefined||i===null)&&(i=s.Medium),n.id)?u.getIdentityImageUrl(n.id,{size:i}):n.uniqueName?u.getIdentityImageUrl("",{identifier:n.uniqueName,resolveAmbiguous:!1,identifierType:o.AccountName,size:i}):n.isContainer?u.getIdentityImageUrl("",{identifier:n.displayName,resolveAmbiguous:!1,identifierType:o.General,size:i}):t===e.ShowGenericImage?u.configuration.getResourcesFile("notassigned-user.svg"):""},n.getIdentityImageUrlByIdentity=function(t){return t?n.getIdentityImageUrl(t,e.ShowGenericImage,s.Small):f.urlHelper.getVersionedContentUrl("notassigned-user.svg")},n.parseUniquefiedIdentityName=function(t){var a,v;if(!t)return null;var f=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START),o=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END),s=!1,y=!1,h=!1,e=t;f>=0&&o>f&&(h=!0,e=e.replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START).replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END));f=e.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START);o=e.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END);var c=e,l="",u="",p="",r="";return f>=0&&o>f&&(c=$.trim(e.substr(0,f)),h?(r=$.trim(e.substr(f+1,o-f-1)),r.indexOf(n.AAD_IDENTITY_USER_PREFIX)===0?r=r.substr(n.AAD_IDENTITY_USER_PREFIX.length):r.indexOf(n.AAD_IDENTITY_GROUP_PREFIX)===0&&(s=!0,r=r.substr(n.AAD_IDENTITY_GROUP_PREFIX.length)),a=r.lastIndexOf("\\"),a>0&&(u=$.trim(r.substr(a+1)),u.indexOf("@")!==-1?(l=u,r=$.trim(r.substr(0,a))):(c=t,r="",h=!1,s=!1))):(u=$.trim(e.substr(f+1,o-f-1)),v=n.getVsIdFromGroupUniqueName(u),p=n.getDescriptorFromUniqueName(u),u.indexOf("@")!==-1||u.indexOf("\\")!==-1||u.indexOf(n.DESCRIPTOR_PREFIX)!==-1||v||i.isGuid(u)?(l=u,v!=""&&(r=v,s=!0,y=!0,l="")):c=t)),{id:r,displayName:c,uniqueName:p||l,isAadIdentity:h,isContainer:s,isTfsGroup:y}},n.getUniquefiedIdentityName=function(t){if(t.isAadIdentity&&t.displayName&&t.id){var r=t.isContainer?n.AAD_IDENTITY_GROUP_PREFIX:n.AAD_IDENTITY_USER_PREFIX;return t.uniqueName&&!t.isContainer?i.format("{0} {1}{2}{3}\\{4}{5}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,r,t.id,t.uniqueName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):i.format("{0} {1}{2}{3}{4}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,r,t.id,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END)}return!t.isAadIdentity&&t.displayName&&t.isContainer&&t.isTfsGroup?t.id?i.format("{0} {1}{2}{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.TFS_GROUP_PREFIX,t.id.toUpperCase(),n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName:!t.isAadIdentity&&t.displayName&&t.uniqueName?i.format("{0} {1}{2}{3}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,t.uniqueName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName||""},n.getFriendlyDistinctDisplayName=function(t){return t.displayName&&t.uniqueName&&!t.isTfsGroup?n.getDistinctDisplayName(t.displayName,t.uniqueName):t.displayName||""},n.getDistinctDisplayName=function(t,r){return t&&r?i.format("{0} {1}{2}{3}",t,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,r,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):""},n.getFriendlyUniqueName=function(t){if(t.isContainer&&t.isTfsGroup&&t.displayName){var i=t.displayName.lastIndexOf(n.IDENTITY_UNIQUENAME_SEPARATOR);if(i!==-1)return t.displayName.substr(i+1)}return t.uniqueName},n.getVsIdFromGroupUniqueName=function(t){var r,u,f,e;return t?(u="",f=t.lastIndexOf(n.IDENTITY_UNIQUENAME_SEPARATOR),r=f===-1?t:t.substr(0,f),i.startsWith(r,n.TFS_GROUP_PREFIX)&&(e=$.trim(r.substr(3)),u=i.isGuid(e)?e:""),u):""},n.isTfsGroup=function(t){if(t.isContainer&&t.uniqueName)return n.getVsIdFromGroupUniqueName(t.uniqueName)!==i.empty||i.startsWith(t.uniqueName,u.LinkingUtilities.VSTFS,i.localeIgnoreCaseComparer)},n.union=function(t,i,r){r===void 0&&(r=!0);var u=t.slice(0),f={},e={},o={};return $.each(u,function(n,t){t.id&&(e[t.id.toLowerCase()]=t);t.uniqueName&&(o[t.uniqueName.toLowerCase()]=t);t.id||t.uniqueName||!t.displayName||(f[t.displayName.toLowerCase()]=t)}),$.each(i,function(n,t){t.id||t.uniqueName?e[(t.id||"").toLowerCase()]||o[(t.uniqueName||"").toLowerCase()]||u.push(t):f[t.displayName.toLowerCase()]||u.push(t)}),r&&n._sortListByName(u),u},n.subtract=function(t,i,r){r===void 0&&(r=!0);var u=t.slice(0);return $.each(i,function(t,i){for(var f=u.length,r=0;r<f;r++)n.areItemsEqual(i,u[r])&&(u.splice(r,1),f--)}),r&&n._sortListByName(u),u},n._sortListByName=function(n){n.sort(function(n,t){if(n.isTfsGroup&&!t.isTfsGroup)return 1;if(!n.isTfsGroup&&t.isTfsGroup)return-1;var r=$.trim(n.displayName.toLowerCase()),u=$.trim(t.displayName.toLowerCase());return i.localeIgnoreCaseComparer(r,u)})},n.areItemsEqual=function(n,t){var r,u;return n.id&&t.id?(r=$.trim(n.id.toLowerCase()),u=$.trim(t.id.toLowerCase())):n.uniqueName&&t.uniqueName?(r=$.trim(n.uniqueName.toLowerCase()),u=$.trim(t.uniqueName.toLowerCase())):(r=$.trim(n.displayName.toLowerCase()),u=$.trim(t.displayName.toLowerCase())),i.localeIgnoreCaseComparer(r,u)===0},n.getDescriptorFromUniqueName=function(t){return t?t.indexOf(n.DESCRIPTOR_PREFIX)!=0?"":t.replace(/desc:/i,""):""},n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<",n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<<",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">>",n.TFS_GROUP_PREFIX="id:",n.AAD_IDENTITY_USER_PREFIX="user:",n.AAD_IDENTITY_GROUP_PREFIX="group:",n.IDENTITY_UNIQUENAME_SEPARATOR="\\",n.DESCRIPTOR_PREFIX="desc:",n}();t.IdentityHelper=h});

define("VSS/Identities/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.ReadIdentitiesOptions=t.QueryMembership=t.GroupScopeType=t.FrameworkIdentityType=void 0,function(n){n[n.None=0]="None";n[n.ServiceIdentity=1]="ServiceIdentity";n[n.AggregateIdentity=2]="AggregateIdentity";n[n.ImportedIdentity=3]="ImportedIdentity"}(i=t.FrameworkIdentityType||(t.FrameworkIdentityType={})),function(n){n[n.Generic=0]="Generic";n[n.ServiceHost=1]="ServiceHost";n[n.TeamProject=2]="TeamProject"}(r=t.GroupScopeType||(t.GroupScopeType={})),function(n){n[n.None=0]="None";n[n.Direct=1]="Direct";n[n.Expanded=2]="Expanded";n[n.ExpandedUp=3]="ExpandedUp";n[n.ExpandedDown=4]="ExpandedDown"}(u=t.QueryMembership||(t.QueryMembership={})),function(n){n[n.None=0]="None";n[n.FilterIllegalMemberships=1]="FilterIllegalMemberships"}(f=t.ReadIdentitiesOptions||(t.ReadIdentitiesOptions={}));t.TypeInfo={CreateScopeInfo:{},FrameworkIdentityInfo:{},FrameworkIdentityType:{enumValues:{none:0,serviceIdentity:1,aggregateIdentity:2,importedIdentity:3}},GroupScopeType:{enumValues:{generic:0,serviceHost:1,teamProject:2}},IdentityBatchInfo:{},IdentityScope:{},IdentitySnapshot:{},QueryMembership:{enumValues:{none:0,direct:1,expanded:2,expandedUp:3,expandedDown:4}},ReadIdentitiesOptions:{enumValues:{none:0,filterIllegalMemberships:1}}};t.TypeInfo.CreateScopeInfo.fields={scopeType:{enumType:t.TypeInfo.GroupScopeType}};t.TypeInfo.FrameworkIdentityInfo.fields={identityType:{enumType:t.TypeInfo.FrameworkIdentityType}};t.TypeInfo.IdentityBatchInfo.fields={queryMembership:{enumType:t.TypeInfo.QueryMembership}};t.TypeInfo.IdentityScope.fields={scopeType:{enumType:t.TypeInfo.GroupScopeType}};t.TypeInfo.IdentitySnapshot.fields={scopes:{isArray:!0,typeInfo:t.TypeInfo.IdentityScope}}});

define("VSS/Graph/Contracts",["require","exports","VSS/Identities/Contracts"],function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.GraphTraversalDirection=void 0;var r;(function(n){n[n.Unknown=0]="Unknown";n[n.Down=1]="Down";n[n.Up=2]="Up"})(r=t.GraphTraversalDirection||(t.GraphTraversalDirection={}));t.TypeInfo={GraphScope:{},GraphScopeCreationContext:{},GraphTraversalDirection:{enumValues:{unknown:0,down:1,up:2}},GraphUser:{},PagedGraphUsers:{}};t.TypeInfo.GraphScope.fields={scopeType:{enumType:i.TypeInfo.GroupScopeType}};t.TypeInfo.GraphScopeCreationContext.fields={scopeType:{enumType:i.TypeInfo.GroupScopeType}};t.TypeInfo.GraphUser.fields={metadataUpdateDate:{isDate:!0}};t.TypeInfo.PagedGraphUsers.fields={graphUsers:{isArray:!0,typeInfo:t.TypeInfo.GraphUser}}});

define("VSS/Profile/Contracts",["require","exports"],function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.ProfileState=t.AvatarSize=void 0,function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large"}(i=t.AvatarSize||(t.AvatarSize={})),function(n){n[n.Custom=0]="Custom";n[n.CustomReadOnly=1]="CustomReadOnly";n[n.ReadOnly=2]="ReadOnly"}(r=t.ProfileState||(t.ProfileState={}));t.TypeInfo={AttributesContainer:{},Avatar:{},AvatarSize:{enumValues:{small:0,medium:1,large:2}},CoreProfileAttribute:{},CreateProfileContext:{},Profile:{},ProfileAttribute:{},ProfileAttributeBase:{},ProfileState:{enumValues:{custom:0,customReadOnly:1,readOnly:2}}};t.TypeInfo.AttributesContainer.fields={attributes:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.ProfileAttribute}};t.TypeInfo.Avatar.fields={size:{enumType:t.TypeInfo.AvatarSize},timeStamp:{isDate:!0}};t.TypeInfo.CoreProfileAttribute.fields={timeStamp:{isDate:!0}};t.TypeInfo.CreateProfileContext.fields={profileState:{enumType:t.TypeInfo.ProfileState}};t.TypeInfo.Profile.fields={applicationContainer:{typeInfo:t.TypeInfo.AttributesContainer},coreAttributes:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.CoreProfileAttribute},profileState:{enumType:t.TypeInfo.ProfileState},timeStamp:{isDate:!0}};t.TypeInfo.ProfileAttribute.fields={timeStamp:{isDate:!0}};t.TypeInfo.ProfileAttributeBase.fields={timeStamp:{isDate:!0}}});

define("VSS/Graph/RestClient",["require","exports","VSS/Graph/Contracts","VSS/Profile/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u,f){"use strict";function ut(n){return window.VSS&&window.VSS.VssSDKRestVersion&&it[window.VSS.VssSDKRestVersion]?u.getClient(it[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):u.getClient(v,undefined,undefined,undefined,n)}var h,c,o,l,s,e,a,v,y,p,w,b,k,d,g,nt,tt,rt,it;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.GraphHttpClient=t.GraphHttpClient3_1=t.GraphHttpClient3_2=t.GraphHttpClient4=t.GraphHttpClient4_1=t.GraphHttpClient5=t.GraphHttpClient5_1=t.GraphHttpClient5_2=t.GraphHttpClient6=t.GraphHttpClient6_1=t.GraphHttpClient7=t.GraphHttpClient7_1=t.CommonMethods6To7_1=t.CommonMethods5_1To7_1=t.CommonMethods5To7_1=t.CommonMethods4To7_1=t.CommonMethods3_2To7_1=t.CommonMethods3_1To7_1=void 0;h=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getDescriptor=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"048aee0a-7072-4cde-ab73-7af77b1e0b4e",resource:"Descriptors",routeTemplate:"_apis/{area}/{resource}/{storageKey}",routeValues:{storageKey:n},apiVersion:this.descriptorsApiVersion})},t}(f.VssHttpClient);t.CommonMethods3_1To7_1=h;c=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateUser=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,routeValues:{userDescriptor:t},apiVersion:this.usersApiVersion,data:n})},t.prototype.listUsers=function(n,t,r){var u={subjectTypes:n&&n.join(","),continuationToken:t,scopeDescriptor:r};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,responseIsCollection:!0,queryParams:u,apiVersion:this.usersApiVersion},!0).then(function(n){var i=n[0],u=n[1],r=n[2],t=r.getResponseHeader("X-MS-ContinuationToken");return{graphUsers:i,continuationToken:t?t.split(","):[]}})},t.prototype.getUser=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,routeValues:{userDescriptor:n},apiVersion:this.usersApiVersion})},t.prototype.deleteUser=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",routeValues:{userDescriptor:n},apiVersion:this.usersApiVersion})},t.prototype.createUser=function(n,t){var r={groupDescriptors:t&&t.join(",")};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,queryParams:r,apiVersion:this.usersApiVersion,data:n})},t.prototype.getSubject=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1d44a2ac-4f8a-459e-83c2-1c92626fb9c6",resource:"Subjects",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.subjectsApiVersion})},t.prototype.lookupSubjects=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"4dd4d168-11f2-48c4-83e8-756fa0de027c",resource:"SubjectLookup",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.subjectLookupApiVersion,data:n})},t.prototype.getStorageKey=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"eb85f8cc-f0f6-4264-a5b1-ffe2e4d4801f",resource:"StorageKeys",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.storageKeysApiVersion})},t.prototype.updateScope=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",routeValues:{scopeDescriptor:n},customHeaders:{"Content-Type":"application/json-patch+json"},apiVersion:this.scopesApiVersion,data:t})},t.prototype.getScope=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",responseType:i.TypeInfo.GraphScope,routeValues:{scopeDescriptor:n},apiVersion:this.scopesApiVersion})},t.prototype.deleteScope=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",routeValues:{scopeDescriptor:n},apiVersion:this.scopesApiVersion})},t.prototype.createScope=function(n,t){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",requestType:i.TypeInfo.GraphScopeCreationContext,responseType:i.TypeInfo.GraphScope,routeValues:{scopeDescriptor:t},apiVersion:this.scopesApiVersion,data:n})},t.prototype.traverseMemberships=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"5d59d874-746f-4f9b-9459-0e571f1ded8c",resource:"MembershipTraversals",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:this.membershipTraversalsApiVersion})},t.prototype.lookupMembershipTraversals=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"5d59d874-746f-4f9b-9459-0e571f1ded8c",resource:"MembershipTraversals",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",responseIsCollection:!0,queryParams:r,apiVersion:this.membershipTraversalsApiVersion,data:n})},t.prototype.getMembershipState=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1ffe5c94-1144-4191-907b-d0211cad36a8",resource:"MembershipStates",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.membershipStatesApiVersion})},t.prototype.listMemberships=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"e34b6394-6b30-4435-94a9-409a5eef3e31",resource:"MembershipsBatch",routeTemplate:"_apis/{area}/Memberships/{subjectDescriptor}",responseIsCollection:!0,routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:this.membershipsBatchApiVersion})},t.prototype.removeMembership=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.getMembership=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.checkMembershipExistence=function(n,t){return this._beginRequest({httpMethod:"HEAD",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion}).then(function(){return!0},function(n){if(n.status===404)return!1;throw n;})},t.prototype.addMembership=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.getMemberByDescriptor=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"b9af63a7-5db6-4af8-aae7-387f775ea9c6",resource:"Members",routeTemplate:"_apis/{area}/{resource}/{memberDescriptor}",routeValues:{memberDescriptor:n},apiVersion:this.membersApiVersion})},t.prototype.lookupMembers=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"3d74d524-ae3d-4d24-a9a7-f8a5cf82347a",resource:"MemberLookup",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.memberLookupApiVersion,data:n})},t.prototype.updateGroup=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},customHeaders:{"Content-Type":"application/json-patch+json"},apiVersion:this.groupsApiVersion,data:t})},t.prototype.listGroups=function(n,t,i){var r={scopeDescriptor:n,subjectTypes:t&&t.join(","),continuationToken:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",responseIsCollection:!0,queryParams:r,apiVersion:this.groupsApiVersion},!0).then(function(n){var i=n[0],u=n[1],r=n[2],t=r.getResponseHeader("X-MS-ContinuationToken");return{graphGroups:i,continuationToken:t?t.split(","):[]}})},t.prototype.getGroup=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},apiVersion:this.groupsApiVersion})},t.prototype.deleteGroup=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},apiVersion:this.groupsApiVersion})},t.prototype.createGroup=function(n,t,i){var r={scopeDescriptor:t,groupDescriptors:i&&i.join(",")};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",queryParams:r,apiVersion:this.groupsApiVersion,data:n})},t.prototype.getCachePolicies=function(){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"beb83272-b415-48e8-ac1e-a9b805760739",resource:"CachePolicies",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.cachePoliciesApiVersion})},t}(h);t.CommonMethods3_2To7_1=c;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getProviderInfo=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1e377995-6fa2-4588-bd64-930186abdcfa",resource:"ProviderInfo",routeTemplate:"_apis/{area}/Users/{userDescriptor}/{resource}",routeValues:{userDescriptor:n},apiVersion:this.providerInfoApiVersion})},t}(c);t.CommonMethods4To7_1=o;l=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getFederatedProviderData=function(n,t,i){var r={providerName:t,versionHint:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"5dcd28d6-632d-477f-ac6b-398ea9fc2f71",resource:"FederatedProviderData",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:this.federatedProviderDataApiVersion})},t}(o);t.CommonMethods5To7_1=l;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.querySubjects=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"05942c89-006a-48ce-bb79-baeb8abf99c6",resource:"SubjectQuery",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.subjectQueryApiVersion,data:n})},t.prototype.requestAccess=function(n){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"Graph",locationId:"8d54bf92-8c99-47f2-9972-b21341f1722e",resource:"RequestAccess",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.requestAccessApiVersion,data:n})},t.prototype.setAvatar=function(n,t){return this._beginRequest({httpMethod:"PUT",httpResponseType:"html",area:"Graph",locationId:"801eaf9c-0585-4be8-9cdb-b0efa074de91",resource:"Avatars",routeTemplate:"_apis/{area}/Subjects/{subjectDescriptor}/{resource}",requestType:r.TypeInfo.Avatar,routeValues:{subjectDescriptor:t},apiVersion:this.avatarsApiVersion,data:n})},t.prototype.getAvatar=function(n,t,i){var u={size:t,format:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"801eaf9c-0585-4be8-9cdb-b0efa074de91",resource:"Avatars",routeTemplate:"_apis/{area}/Subjects/{subjectDescriptor}/{resource}",responseType:r.TypeInfo.Avatar,routeValues:{subjectDescriptor:n},queryParams:u,apiVersion:this.avatarsApiVersion})},t.prototype.deleteAvatar=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"801eaf9c-0585-4be8-9cdb-b0efa074de91",resource:"Avatars",routeTemplate:"_apis/{area}/Subjects/{subjectDescriptor}/{resource}",routeValues:{subjectDescriptor:n},apiVersion:this.avatarsApiVersion})},t}(l);t.CommonMethods5_1To7_1=s;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.translate=function(n,t){var i={masterId:n,localId:t};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"9cacc4da-06e3-474a-a1fa-604dd34a2fa2",resource:"IdentityTranslation",routeTemplate:"_apis/{area}/{resource}",queryParams:i,apiVersion:this.identityTranslationApiVersion})},t}(s);t.CommonMethods6To7_1=e;a=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.cachePoliciesApiVersion=r.descriptorsApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.providerInfoApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.storageKeysApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="7.1-preview.1",r}return __extends(t,n),t}(e);t.GraphHttpClient7_1=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="7.0",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="7.0-preview.1",r}return __extends(t,n),t}(e);t.GraphHttpClient7=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="6.1",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="6.1-preview.1",r}return __extends(t,n),t}(e);t.GraphHttpClient6_1=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="6.0",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="6.0-preview.1",r}return __extends(t,n),t}(e);t.GraphHttpClient6=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="5.2",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="5.2-preview.1",r}return __extends(t,n),t}(s);t.GraphHttpClient5_2=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="5.1",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="5.1-preview.1",r}return __extends(t,n),t}(s);t.GraphHttpClient5_1=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="5.0",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="5.0-preview.1",r}return __extends(t,n),t}(l);t.GraphHttpClient5=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="4.1",r.cachePoliciesApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="4.1-preview.1",r}return __extends(t,n),t}(o);t.GraphHttpClient4_1=d;g=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="4.0",r.cachePoliciesApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="4.0-preview.1",r}return __extends(t,n),t}(o);t.GraphHttpClient4=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion=r.storageKeysApiVersion="3.2",r.cachePoliciesApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="3.2-preview.1",r}return __extends(t,n),t}(c);t.GraphHttpClient3_2=nt;tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion="3.1",r}return __extends(t,n),t}(h);t.GraphHttpClient3_1=tt;rt=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(a);t.GraphHttpClient=rt;it={"7.1":a,"7.0":v,"6.1":y,"6.0":p,"5.2":w,"5.1":b,"5.0":k,"4.1":d,"4.0":g,"3.2":nt,"3.1":tt};t.getClient=ut});

define("VSS/Identities/Picker/Constants",["require","exports"],function(n,t){var i,r,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.diacriticsRemovalMap=t.PromiseResultStatus=t.ConsumerId=t.PrefixType=t.TelemetryProperties=t.Telemetry=void 0;i=function(){function n(){}return n.Area="IdentityPicker",n.Scenario_GetMru_Rtt="IdentityPicker_MruService_GetMru_Rtt",n.Scenario_AddMru_Rtt="IdentityPicker_MruService_AddMru_Rtt",n.Scenario_RemoveMru_Rtt="IdentityPicker_MruService_RemoveMru_Rtt",n.Scenario_GetDirectory_Rtt="IdentityPicker_IdentityService_GetDirectory_Rtt",n.Scenario_GetConnections_Rtt="IdentityPicker_IdentityService_GetConnections_Rtt",n.Scenario_GetUserConnections_Rtt="IdentityPicker_IdentityService_GetUserConnections_Rtt",n.Scenario_PagingQuerySplit="IdentityPicker_PagingQuerySplit",n.Feature_DropdownControl="DropdownControl",n.Feature_SearchControl="SearchControl",n.Feature_IdCardDialogControl="IdCardDialogControl",n.Feature_DisplayControl="DisplayControl",n.Feature_TwoLayerCache="TwoLayerCache",n.Feature_RequestCache="RequestCache",n.Feature_Select_Mru_NoPrefix="Select_Mru_NoPrefix",n.Feature_Select_Mru_Prefix="Select_Mru_Prefix",n.Feature_Select_Mru_Dir="Select_Mru_Dir",n.Feature_Select_Dir="Select_Dir",n.Feature_Click_IdCard="Click_IdCard",n.Feature_Click_Remove_Mru="Click_Remove_Mru",n.Feature_ApiExceptions="Api_Exceptions",n}();t.Telemetry=i;r=function(){function n(){}return n.prefixType="p_prefixType",n.prefixLength="p_prefixLength",n.userId="p_userId",n.accountProjectCollectionTeam="p_accountProjectCollectionTeam",n.identityTypes="p_identityTypes",n.operationScopes="p_operationScopes",n.maxResults="p_maxResults",n.minResults="p_minResults",n.consumerId="p_consumerId",n.extensionId="p_extensionId",n.entityId="p_entityId",n.exceptionData="p_exceptionData",n.isMru="p_isMru",n.isNonMaterialized="p_isNonMaterialized",n.isTwoLayerCacheHit="p_isTwoLayerCacheHit",n.isDirSearchUid="p_isDirSearchUid",n}();t.TelemetryProperties=r;u=function(){function n(){}return n.SignInAddress="signInAddress",n.DomainSamAccountName="domainSamAccountName",n.EntityId="entityId",n.Vsid="vsid",n.ScopedPrefix="scopedPrefix",n.StringPrefix="stringPrefix",n}();t.PrefixType=u;f=function(){function n(){}return n.UnknownConsumer="UNKNOWN",n}();t.ConsumerId=f;e=function(){function n(){}return n.Fulfilled="fulfilled",n.Rejected="rejected",n}();t.PromiseResultStatus=e;t.diacriticsRemovalMap={A:"A","\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"A","\ua738":"AV","\ua73a":"AV","\ua73c":"AY",B:"B","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B",C:"C","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C",D:"D","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz",E:"E","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E",F:"F","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F",G:"G","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G",H:"H","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H",I:"I","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I",J:"J","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J",K:"K","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K",L:"L","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj",M:"M","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M",N:"N","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj",O:"O","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU",P:"P","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P",Q:"Q","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q",R:"R","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R",S:"S","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S",T:"T","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ",U:"U","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U",V:"V","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY",W:"W","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W",X:"X","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X",Y:"Y","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y",Z:"Z","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z",a:"a","\u24d0":"a","\uff41":"a","\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay",b:"b","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b",c:"c","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c",d:"d","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz",e:"e","\u24d4":"e","\uff45":"e","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e",f:"f","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f",g:"g","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g",h:"h","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv",i:"i","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i",j:"j","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j",k:"k","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k",l:"l","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj",m:"m","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m",n:"n","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj",o:"o","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo",p:"p","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p",q:"q","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q",r:"r","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r",s:"s","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",t:"t","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz",u:"u","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u",v:"v","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy",w:"w","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w",x:"x","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x",y:"y","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y",z:"z","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"}});

define("VSS/Identities/Picker/RestClient",["require","exports","VSS/WebApi/Constants","VSS/WebApi/RestClient"],function(n,t,i,r){var u,f;Object.defineProperty(t,"__esModule",{value:!0});t.CommonIdentityPickerHttpClient=t.AbstractIdentityPickerHttpClient=void 0;u=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.beginGetIdentities=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetIdentities"};},t.prototype.beginGetIdentityImageLocation=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetImageLocation"};},t.prototype.beginGetConnections=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetConnections"};},t.prototype.beginGetIdentityFeatureMru=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetMru"};},t.prototype.beginPatchIdentityFeatureMru=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginPatchMru"};},t}(r.VssHttpClient);t.AbstractIdentityPickerHttpClient=u;f=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.beginGetIdentities=function(n){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentitiesLocationId,httpMethod:"POST",data:n})},t.prototype.beginGetIdentityImageLocation=function(n){var r=this,u={objectId:n};return t._identityImageLocation||(t._identityImageLocation=this._beginGetLocation(i.CommonIdentityPickerResourceIds.ServiceArea,i.CommonIdentityPickerResourceIds.IdentityAvatarLocationId)),t._identityImageLocation.then(function(n){return r.getRequestUrl(n.routeTemplate,n.area,n.resourceName,u,{})})},t.prototype.beginGetConnections=function(n,t){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityConnectionsLocationId,httpMethod:"GET",routeValues:{objectId:n},data:t})},t.prototype.beginGetIdentityFeatureMru=function(n,t,r){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityFeatureMruLocationId,httpMethod:"GET",routeValues:{objectId:n,featureId:t},data:r})},t.prototype.beginPatchIdentityFeatureMru=function(n,t,r){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityFeatureMruLocationId,httpMethod:"PATCH",routeValues:{objectId:n,featureId:t},data:r})},t._identityImageLocation=null,t}(u);t.CommonIdentityPickerHttpClient=f});

define("VSS/Identities/Picker/Cache",["require","exports","VSS/Utils/Core","VSS/Utils/String","VSS/Identities/Picker/Constants","VSS/Telemetry/Services"],function(n,t,i,r,u,f){var s,e,o,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});t.TwoLayerCache=t.RequestCache=t.HashCache=t.CacheableTypes=void 0;s=function(){function n(){}return n.guessQueryTokenType=function(t){return r.isGuid(t)&&!r.isEmptyGuid(t)?e.Guid:n._isValidEmail(t)?e.Email:n._isPotentialEntityId(t)?e.UniqueIdentifier:e.Unknown},n._isPotentialEntityId=function(n){var t=n.split(".");return t.length==6&&r.isGuid(t[5])&&!r.isEmptyGuid(t[5])?!0:!1},n._isValidEmail=function(n){var t=n.split("@");return t.length===2&&t[0].length>=1&&t[1].length>=1?!0:!1},n}(),function(n){n[n.Unknown=0]="Unknown";n[n.UniqueIdentifier=1]="UniqueIdentifier";n[n.Guid=2]="Guid";n[n.Email=3]="Email"}(e=t.CacheableTypes||(t.CacheableTypes={}));o=function(){function n(){this._cache={};this._config={expirationIntervalS:86400}}return n.prototype.get=function(n){if(!n)throw{message:"invalid (null/undefined) key",parameter:"key",source:"HashCache add"};if(!this._cache.hasOwnProperty(n)||!this._cache[n])return null;var t=this._cache[n];return(new Date).getTime()/1e3>t.expiryTimeS?(delete this._cache[n],null):this._cache[n].item},n.prototype.set=function(n,t){if(!n)throw{message:"invalid (null/undefined) key",parameter:"key",source:"HashCache add"};var i={item:t,expiryTimeS:(new Date).getTime()/1e3+this._config.expirationIntervalS};this._cache[n]=i},n.prototype.clear=function(){var n=this._getKeys(),t;if(n&&n.length!=0)for(t in n)delete this._cache[t]},n.prototype.configure=function(n){this._config=n},n.prototype._getKeys=function(){return Object.keys(this._cache)},n}();t.HashCache=o;h=function(){function n(){this._config={delayIntervalMS:n._defaultDelayIntervalMS};this._cache=new o;this._cache.configure({expirationIntervalS:this._config.delayIntervalMS/1e3})}return n.prototype.getPromise=function(n){this._setOrResetTimer();var t=this._cache.get(n);return t?t:null},n.prototype.setPromise=function(n,t){this._setOrResetTimer();this._cache.set(n,t)},n.prototype.configure=function(n){this._config=n;this._cache.configure({expirationIntervalS:this._config.delayIntervalMS/1e3})},n.prototype._setOrResetTimer=function(){var n=this;this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null);this._timeoutHandle=window.setTimeout(i.delegate(this,function(){n._cache.clear()}),this._config.delayIntervalMS)},n._defaultDelayIntervalMS=6e4,n}();t.RequestCache=h;c=function(){function n(n){this._redirectors={};this.configure(n);this._objectCache=new o}return n.prototype.configure=function(n){if(!n||!n.getUniqueIdentifier)throw{source:"TwoLayerCache configure",message:"missing config or missing the required getUniqueIdentifier property",parameter:"config"};this._config=n},n.prototype.addRedirector=function(n){if(n===null||n===undefined)throw{source:"TwoLayerCache addRedirector",message:"invalid null/undefined cacheType",parameter:"cacheType"};if(this._redirectors.hasOwnProperty(n.toString()))throw{source:"TwoLayerCache addRedirector",message:"redirector with supplied cacheType already exists: currently at most one redirector supported for a CacheType",parameter:"cacheType"};this._redirectors[n.toString()]=new o},n.prototype.get=function(n,t){return this._queryCache(n,t)},n.prototype.set=function(n,t,i){var u,r,f;if(u=i?i:s.guessQueryTokenType(n).toString(),r=this._config.getUniqueIdentifier(t),!r)throw{source:"TwoLayerCache set",message:"could not retrieve a valid unique identifier from the value"};if(u==e.UniqueIdentifier.toString()||r==n||this._redirectors.hasOwnProperty(u.toString())){if(u==e.UniqueIdentifier.toString()||r==n){this._objectCache.set(n,t);return}f=this._redirectors[u];f.set(n,r);this._objectCache.set(r,t);return}},n.prototype._queryCache=function(n,t){var i,r;return i=t?t:s.guessQueryTokenType(n).toString(),i==e.UniqueIdentifier.toString()?this._objectCache.get(n):this._redirectors.hasOwnProperty(i.toString())?(r=this._redirectors[i].get(n),!r)?null:this._objectCache.get(r):this._objectCache.get(n)},n}();t.TwoLayerCache=c;l=function(){function n(){}return n.traceCacheHit=function(n,t){var r=n!=null,i={};i[u.TelemetryProperties.isTwoLayerCacheHit]=r;f.publishEvent(new f.TelemetryEventData(u.Telemetry.Area,t,i))},n}()});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};define("VSS/Identities/Picker/Services",["require","exports","VSS/Context","VSS/Locations","VSS/Performance","VSS/Service","VSS/Telemetry/Services","VSS/User/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Identities/Picker/RestClient","VSS/Identities/Picker/Cache","VSS/Identities/Picker/Common","VSS/Identities/Picker/Constants","q","VSS/LWP"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var b,w,k,d;Object.defineProperty(t,"__esModule",{value:!0});t.MruService=t.IdentityService=t.ServiceHelpers=void 0;b=s.delegate;w=function(){function n(){}return n.getOperationScopeList=function(n){var t=[];return n.IMS&&t.push("ims"),n.Source&&t.push("source"),n.AAD&&t.push("aad"),n.AD&&t.push("ad"),n.WMD&&t.push("wmd"),n.GHB&&t.push("ghb"),t},n.getQueryTypeHint=function(n){var t=void 0;return n?(n.UID&&(t="uid"),t):t},n.getIdentityTypeList=function(t){var i=[];return t.User&&i.push(n.UserEntity),t.Group&&i.push(n.GroupEntity),i},n.getConnectionTypeList=function(n){var t=[];return n.successors?t.push("successors"):n.successors&&t.push("predecessors"),n.managers&&t.push("managers"),n.directReports&&t.push("directReports"),t},n.getDefaultIdentityImage=function(t){return t.entityType.toLowerCase().trim()==n.GroupEntity?t.originDirectory.toLowerCase().trim()==n.VisualStudioDirectory?n.DefaultVsoGroupImage:n.DefaultRemoteGroupImage:n.DefaultUserImage},n.getDistinct=function(n){return n.filter(function(n,t,i){return i.indexOf(n)==t})},n.isAuthenticatedMember=function(){return o.getService().hasClaim(o.UserClaims.Member)},n.getPrefixTypeForTelemetry=function(n){var t,r;return h.isGuid(n)?v.PrefixType.Vsid:(t=n.indexOf("@"),t&&n.indexOf(".",t))?v.PrefixType.SignInAddress:(r=n.indexOf("\\"),r&&r==n.lastIndexOf("\\"))?i.getPageContext().webAccessConfiguration.isHosted?v.PrefixType.ScopedPrefix:v.PrefixType.DomainSamAccountName:n.startsWith("vss.ds.v1")?v.PrefixType.EntityId:v.PrefixType.StringPrefix},n.addScenarioProperties=function(t,i,r,u,f,e){return u&&(i[v.TelemetryProperties.identityTypes]=n.getIdentityTypeList(u)),r&&(i[v.TelemetryProperties.operationScopes]=n.getOperationScopeList(r)),f&&(i[v.TelemetryProperties.maxResults]=f.maxResults,i[v.TelemetryProperties.minResults]=f.minResults),i[v.TelemetryProperties.consumerId]=e?e.consumerId:v.ConsumerId.UnknownConsumer,i[v.TelemetryProperties.userId]=t&&t.getWebContext()&&t.getWebContext().user?t.getWebContext().user.id:"",i[v.TelemetryProperties.accountProjectCollectionTeam]=n._getHostMetadata(t),i},n._getHostMetadata=function(n){var t="",i="",r="",u="";return n&&n.getWebContext()&&(t=n.getWebContext().account?n.getWebContext().account.name:"",i=n.getWebContext().collection?n.getWebContext().collection.name:"",r=n.getWebContext().project?n.getWebContext().project.name:"",u=n.getWebContext().team?n.getWebContext().team.name:""),"account["+t+"]/collection["+i+"]/project["+r+"]/team["+u+"]"},n._defaultProperties=["DisplayName","IsMru","ScopeName","SamAccountName","Active","SubjectDescriptor"],n._defaultUserProperties=["Department","JobTitle","Mail","MailNickname","PhysicalDeliveryOfficeName","SignInAddress","Surname","Guest","TelephoneNumber"],n._defaultGroupProperties=["Description"],n.DefaultUserImage=r.urlHelper.getVersionedContentUrl("ip-content-user-default.png"),n.DefaultVsoGroupImage=r.urlHelper.getVersionedContentUrl("ip-content-vso-group-default.png"),n.DefaultRemoteGroupImage=r.urlHelper.getVersionedContentUrl("ip-content-aad-group-default.png"),n.VisualStudioDirectory="vsd",n.AzureActiveDirectory="aad",n.ActiveDirectory="ad",n.WindowsMachineDirectory="wmd",n.SourceDirectory="src",n.GitHubDirectory="ghb",n.UserEntity="user",n.GroupEntity="group",n.OptionsMinResultsKey="MinResults",n.OptionsMaxResultsKey="MaxResults",n.ExtensionData_ExtensionIdKey="ExtensionId",n.ExtensionData_ProjectScopeNameKey="ProjectScopeName",n.ExtensionData_CollectionScopeNameKey="CollectionScopeName",n.ExtensionData_ConstraintListKey="Constraints",n.ExtensionData_NoServiceIdentities="NoServiceIdentities",n.GetIdentities_Prefix_Separator=";",n}();t.ServiceHelpers=w;k=function(n){function t(){var i=__construct(this,n,[]),r,u,f;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return u={getUniqueIdentifier:function(n){return n&&n.identities&&n.identities.length==1?n.identities[0].entityId:null}},i._qtrCache=new l.TwoLayerCache(u),i._qtrCache.addRedirector(l.CacheableTypes.Email),i._qtrCache.addRedirector(l.CacheableTypes.Guid),i._qtrRequestAggregator=new l.RequestCache,i._entityImageRequestAggregator=new l.RequestCache,f=p.getLWPService("IVssContributionService"),i.identitySearchService=t.resolveIdentitySearchService(),i}return __extends(t,n),t.resolveIdentitySearchService=function(){return __awaiter(this,void 0,void 0,function(){var i,r,n,f,t,e,o,u,s,h;return __generator(this,function(c){switch(c.label){case 0:c.trys.push([0,7,,8]);i=p.getLWPService("IVssContributionService");r=i.getContributionsByType("ms.vss-features.preferred-identity-search-service-name");n=[];for(f in r)n.push(f);t=0;c.label=1;case 1:if(!(t<n.length))return[3,6];e=n[t];o=r[e];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,i.getService(o.serviceId)];case 3:return(u=c.sent(),u)?[2,u]:[3,5];case 4:return s=c.sent(),[3,5];case 5:return t++,[3,1];case 6:return[3,8];case 7:return h=c.sent(),[3,8];case 8:return[2,undefined]}})})},t.prototype.getIdentities=function(n,i,r,f,o,s){var tt=this,k,p,h,rt,ct,ft,lt,g,at,et,vt,yt,l,ut,it,st,bt,nt;if(!i){it={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw it;}if(!r){it={source:"IdentityService",parameter:"identityType",message:"identityType null or undefined"};throw it;}if(k=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_GetDirectory_Rtt),p={},p=w.addScenarioProperties(this,p,i,r,f,s),p[v.TelemetryProperties.prefixType]=w.getPrefixTypeForTelemetry(n),p[v.TelemetryProperties.prefixLength]=n.length,p[v.TelemetryProperties.isDirSearchUid]=Boolean(o&&o.UID),h={},rt={},!n)return rt;for(l=[],ct=n.split(w.GetIdentities_Prefix_Separator),ft=0;ft<ct.length;ft++)lt=ct[ft].trim(),lt&&l.push(lt);l=w.getDistinct(l);l.forEach(function(n){h[n.toLowerCase()]=y.defer();rt[n.toLowerCase()]=h[n.toLowerCase()].promise});for(g in h){if(at=t.getUniqueRequestString(g,i,r,f?f.extensionData:null,f?f.getFilterByScope():null),et=this._qtrCache.get(at),et){et.queryToken=g;h[g].resolve(et);l=t._removeQueryToken(g,l);continue}if(vt=this._qtrRequestAggregator.getPromise(at),vt){yt=b(this,function(n){vt.then(b(tt,function(t){h&&h[n]&&h[n].resolve(t)}),b(tt,function(t){h&&h[n]&&h[n].reject(t)}))});yt(g);l=t._removeQueryToken(g,l);continue}}if(l.length==0)return rt;for(ut=0;ut<l.length;ut++)this._qtrRequestAggregator.setPromise(t.getUniqueRequestString(l[ut],i,r,f?f.extensionData:null,f?f.getFilterByScope():null),h[l[ut].toLowerCase()].promise);n=l.join(w.GetIdentities_Prefix_Separator);var pt=w.getIdentityTypeList(r),wt=w.getOperationScopeList(i),ot=w.getQueryTypeHint(o);if(pt.length==0||wt.length==0){it={source:"IdentityService",parameter:"identityType or operationScope",message:"queried identityType or operationScope is/are unsupported"};throw it;}f&&f.httpClient?st=f.httpClient:(bt=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),st=bt);var kt=pt,dt=wt,d={};f&&f.minResults&&(d[w.OptionsMinResultsKey]=f.minResults);f&&f.maxResults&&(d[w.OptionsMaxResultsKey]=f.maxResults);f&&f.extensionData&&(d[w.ExtensionData_ExtensionIdKey]=f.extensionData.extensionId,d[w.ExtensionData_ProjectScopeNameKey]=f.extensionData.projectScopeName,d[w.ExtensionData_CollectionScopeNameKey]=f.extensionData.collectionScopeName,d[w.ExtensionData_ConstraintListKey]=f.extensionData.constraints);nt=w._defaultProperties;r.User&&(nt=nt.concat(w._defaultUserProperties));r.Group&&(nt=nt.concat(w._defaultGroupProperties));var ni=function(n){if(n.results.length<1)return u;var s=function(n){if(k&&k.addSplitTiming(v.Telemetry.Scenario_PagingQuerySplit+"_End_"+n&&n.results[0]?a.CommonHelpers.GetStringHashCode(n.results[0].queryToken).toString():""),n&&n.results.length!=0){n.results[0].identities.forEach(function(n){n.image||(n.image=w.getDefaultIdentityImage(n))});tt._cacheQueryTokenResult(n.results[0],t.getUniqueRequestString(n.results[0].queryToken.trim(),i,r,f?f.extensionData:null,f?f.getFilterByScope():null));var u=n.results[0].queryToken;u&&h[u.toLowerCase().trim()]&&h[u.toLowerCase().trim()].resolve(n.results[0])}},o=function(n){for(var i in h)h[i].reject(n);p[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,p))},u,c=function(n){var e,c,l;n.identities&&n.identities.length==0&&n.pagingToken?(e=f&&f.getFilterByScope(),c={query:n.queryToken,identityTypes:kt,operationScopes:dt,properties:nt,filterByAncestorEntityIds:e?e.filterByAncestorEntityIds:[],filterByEntityIds:e?e.filterByEntityIds:[],pagingToken:n.pagingToken,options:d},ot&&(c.queryTypeHint=ot),k.addSplitTiming(v.Telemetry.Scenario_PagingQuerySplit+"_Start_"+a.CommonHelpers.GetStringHashCode(n.queryToken).toString()),l=tt.fetchIdentitiesWithInjectionsAsync(st,c).then(s,o),u&&u.push(l)):n.identities&&n.identities.length>=0?(n.identities.forEach(function(n){n.image||(n.image=w.getDefaultIdentityImage(n))}),tt._cacheQueryTokenResult(n,t.getUniqueRequestString(n.queryToken.trim(),i,r,f?f.extensionData:null,f?f.getFilterByScope():null)),n.queryToken&&h[n.queryToken.toLowerCase().trim()]&&h[n.queryToken.toLowerCase().trim()].resolve(n)):o()};n.results.forEach(c,tt);u&&u.length>0?y.allSettled(u).then(function(){k.addData(p);k.end()},function(){k.addData(p);k.end()}):(k.addData(p),k.end())},ti=function(n){for(var i in h)h[i].reject(n);p[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,p));k.end()},ht=f&&f.getFilterByScope(),gt={query:n,identityTypes:kt,operationScopes:dt,properties:nt,filterByAncestorEntityIds:ht?ht.filterByAncestorEntityIds:[],filterByEntityIds:ht?ht.filterByEntityIds:[],options:d};return ot&&(gt.queryTypeHint=ot),this.fetchIdentitiesWithInjectionsAsync(st,gt).then(ni,ti),rt},t.prototype.fetchIdentitiesWithInjectionsAsync=function(n,t){return __awaiter(this,void 0,void 0,function(){var i,r,u;return __generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this.identitySearchService];case 1:return i=f.sent(),i&&(r=i.getScopeId(),r&&(t.operationScopes=["ims"],t.options=__assign({ScopeId:r},t.options))),[3,3];case 2:return u=f.sent(),[3,3];case 3:return[2,n.beginGetIdentities(t)]}})})},t.prototype.getIdentityImages=function(n,i){var h=this,l,r,e,o,a,f,s,v,u;if(!n||n.length<=0){l={source:"IdentityService",parameter:"identities",message:"identities null or undefined or empty list"};throw l;}r={};e={};i&&i.httpClient?o=i.httpClient:(a=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),o=a);u=t._getEntityIdsAsQueryTokens(n);u.forEach(function(n){r[n]=y.defer();e[n]=r[n].promise});for(f in r)if(s=this._entityImageRequestAggregator.getPromise(f),s){v=b(this,function(n){s.then(b(h,function(t){r&&r[n]&&r[n].resolve(t)}),b(h,function(t){r&&r[n]&&r[n].reject(t)}))});v(f);u=t._removeQueryToken(f,u);continue}else this._entityImageRequestAggregator.setPromise(f,r[f].promise);return u.length==0?e:(u.forEach(function(n){var t=function(t){var i;t&&t.trim()&&(i={},i[n]=t.trim(),r[n].resolve(i))};o.beginGetIdentityImageLocation(n).then(t)}),e)},t.prototype.getIdentityConnections=function(n,i,r,f,o,s,h){var l,p,a,b,tt,k,it;if(!w.isAuthenticatedMember())return null;if(!n){l={source:"IdentityService",parameter:"identity",message:"identity null or undefined or empty list"};throw l;}if(!i){l={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw l;}if(!r){l={source:"IdentityService",parameter:"identityType",message:"identityType null or undefined"};throw l;}if(!f){l={source:"IdentityService",parameter:"connectionType",message:"connectionType null or undefined"};throw l;}var rt=h?h:1,d=w.getIdentityTypeList(r),g=w.getOperationScopeList(i),nt=w.getConnectionTypeList(f);if(d.length==0||g.length==0||nt.length==0){l={source:"IdentityService",parameter:"identityType or operationScope or connectionType",message:"queried identityType or operationScope or connectionType is/are unsupported"};throw l;}p=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_GetConnections_Rtt);a={};a=w.addScenarioProperties(this,a,i,r,o,s);a[v.TelemetryProperties.entityId]=n.entityId;b=y.defer();tt=b.promise;o&&o.httpClient?k=o.httpClient:(it=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),k=it);var ut=w._defaultProperties.concat(w._defaultUserProperties).concat(w._defaultGroupProperties).concat("Manager"),ft={identityTypes:d,operationScopes:g,connectionTypes:nt,depth:rt,properties:ut},et=function(n){n&&n.successors&&n.successors.forEach(function(n){n.image||(n.image=w.getDefaultIdentityImage(n))});p.addData(a);p.end();b.resolve(n)},ot=function(n){a[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);p.addData(a);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,a));p.end();b.reject(n)};return k.beginGetConnections(n.entityId,ft).then(et,ot),tt},t._getEntityIdsAsQueryTokens=function(n){var t=[];return n.forEach(function(n){(n.entityType.trim().toLowerCase()==w.UserEntity||n.entityType.trim().toLowerCase()==w.GroupEntity)&&t.push(n.entityId)}),t},t.prototype._cacheQueryTokenResult=function(n,t){n.queryToken&&n.queryToken.trim()&&n.identities&&n.identities.length==1&&t&&this._qtrCache.set(t,n)},t._removeQueryToken=function(n,t){var i=-1;return t.some(function(t,r){if(n==t.toLowerCase())return i=r,!0}),i>=0&&t.splice(i,1),t},t._getExceptionData=function(n){return n?n.serverError?n.serverError.typeName:n.name:""},t.getUniqueRequestString=function(n,i,r,u,f){var e=w.getIdentityTypeList(r).join(","),o=w.getOperationScopeList(i).join(",");return(n+";"+o+";"+e+";"+t.getExtensionUniqueRequestString(u)+";"+a.FilterByScope.GetHashCode(f).toString()).trim().toLowerCase()},t.getExtensionUniqueRequestString=function(n){return n?a.CommonHelpers.GetStringHashCode(n.collectionScopeName).toString()+a.CommonHelpers.GetStringHashCode(n.projectScopeName).toString()+a.CommonHelpers.GetStringHashCode(n.extensionId).toString()+a.CommonHelpers.GetStringListHashCode(n.constraints).toString():""},t.MIN_RESULTS=40,t.MAX_RESULTS=40,t}(f.VssService);t.IdentityService=k;d=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getMruIdentities=function(n,i,r,f,o){var l,h,p,s,a,k,b,d;if(!w.isAuthenticatedMember())return null;if(!n){s={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw s;}if(i&&i.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){s={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw s;}if(i="me",r&&r.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){s={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw s;}if(r="common",l=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_GetMru_Rtt),h={},h=w.addScenarioProperties(this,h,null,null,f,o),p=w.getOperationScopeList(n),p.length==0){s={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw s;}a=y.defer();k=a.promise;f&&f.httpClient?b=f.httpClient:(d=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),b=d);var g=w._defaultProperties.concat(w._defaultUserProperties).concat(w._defaultGroupProperties),nt={operationScopes:p,properties:g,filterByAncestorEntityIds:f&&f.filterByScope?f.filterByScope.filterByAncestorEntityIds:[],filterByEntityIds:f&&f.filterByScope?f.filterByScope.filterByEntityIds:[]},tt=function(n){l.addData(h);l.end();a.resolve(n.mruIdentities)},it=function(n){h[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);l.addData(h);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,h));l.end();a.reject(n)};return b.beginGetIdentityFeatureMru(i,r,nt).then(tt,it),k},t.prototype.removeMruIdentities=function(n,i,r,f,o,s){var a,l,b,h,p,d,k,g;if(!w.isAuthenticatedMember())return null;if(!n||n.length==0){h={source:"IdentityService",parameter:"objectIds",message:"objectIds null or undefined or empty"};throw h;}if(!i){h={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw h;}if(r&&r.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){h={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw h;}if(r="me",f&&f.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){h={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw h;}if(f="common",a=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_RemoveMru_Rtt),l={},l=w.addScenarioProperties(this,l,null,null,o,s),b=w.getOperationScopeList(i),b.length==0){h={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw h;}p=y.defer();d=p.promise;o&&o.httpClient?k=o.httpClient:(g=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),k=g);var nt=[{op:"remove",value:n,operationScopes:b}],tt=function(n){a.addData(l);a.end();p.resolve(n.result)},it=function(n){l[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);a.addData(l);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,l));a.end();p.reject(n)};return k.beginPatchIdentityFeatureMru(r,f,nt).then(tt,it),d},t.prototype.addMruIdentities=function(n,i,r,f,o,s){var b,h,a,l,p,d,k,g;if(!w.isAuthenticatedMember())return null;if(!n||n.length==0){h={source:"IdentityService",parameter:"objectIds",message:"objectIds null or undefined or empty"};throw h;}if(!i){h={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw h;}if(r&&r.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){h={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw h;}if(r=t.DEFAULT_IDENTITY_ID,f&&f.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){h={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw h;}if(f=t.DEFAULT_FEATURE_ID,b=w.getOperationScopeList(i),b.length==0){h={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw h;}a=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_AddMru_Rtt);l={};l=w.addScenarioProperties(this,l,null,null,o,s);p=y.defer();d=p.promise;o&&o.httpClient?k=o.httpClient:(g=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),k=g);var nt=[{op:"add",value:n,operationScopes:b}],tt=function(n){a.addData(l);a.end();p.resolve(n.result)},it=function(n){l[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);a.addData(l);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,l));a.end();p.reject(n)};return k.beginPatchIdentityFeatureMru(r,f,nt).then(tt,it),d},t._getExceptionData=function(n){return n?n.serverError?n.serverError.typeName:n.name:""},t.DEFAULT_IDENTITY_ID="me",t.DEFAULT_FEATURE_ID="common",t}(f.VssService);t.MruService=d});

define("VSS/Identities/Picker/Controls",["require","exports","react","react-dom","VSS/Common/Constants/Platform","VSS/FeatureAvailability/Services","VSS/Context","VSS/Controls","VSS/Diag","VSS/Events/Services","VSS/Identities/Picker/Common","VSS/Identities/Picker/Constants","VSS/Identities/Picker/Services","VSS/Identities/Picker/Cache","VSS/Controls/Notifications","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Controls/StatusIndicator","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/Telemetry/Services","VSS/VSS","q","VSS/Controls/PopupContent","jQueryUI/core","jQueryUI/button","jQueryUI/dialog"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt){var lt,wt,dt,st,pt,kt,gt,ft,at,ni,bt,yt,ti,ii;Object.defineProperty(t,"__esModule",{value:!0});t.EntityOperationsFacade=t.SourceType=t.SourceId=t.EntityFactory=t.IdentityDisplayControl=t.EDisplayControlType=t.IdentityPickerControlSize=t.IdentityPickerSearchControl=t.IdCardDialog=t.IdentityPickerDropdownControl=void 0;var fi=g.domElem,ut=k.delegate,ot=g.KeyCode,ht;(function(n){n[n.SelectNone=-1]="SelectNone";n[n.SelectFirstItem=0]="SelectFirstItem"})(ht||(ht={}));lt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._numItemsDisplayed=0,i._scrollTimeout=100,i._loadOnCreate=!1,i._isFiltered=!0,i._isRepositioning=!1,"eventOptions"in t&&t.eventOptions||(t.eventOptions={uniqueId:ft.getRandomString()}),i.initializeOptionsInternal(t),i}return __extends(t,n),t.prototype.initializeOptionsInternal=function(n){this._identityType=n.identityType?n.identityType:{User:!0};this._operationScope=n.operationScope?n.operationScope:{IMS:!0};this._size=n.size!==null&&n.size!==undefined?n.size:st.Large;this._options.getFilterByScope||(this._options.getFilterByScope=function(){return null});this._showContactCard=this._options.showContactCard;this._displayedEntities=[];this._showOnlyMruIdentities=!1;this._enableDirectorySearch();this._options.showMru&&this._disableDirectorySearch();this._isSearchActive=!1;this._preDropdownRender=n.preDropdownRender?n.preDropdownRender:null;this._onDirectorySearchFinished=n.onDirectorySearchFinished?n.onDirectorySearchFinished:null;this._loadOnCreate=n.loadOnCreate?n.loadOnCreate:!1;this._elementAlign=this._options.alignment&&this._options.alignment.elementAlign?this._options.alignment.elementAlign:"left-top";this._baseAlign=this._options.alignment&&this._options.alignment.baseAlign?this._options.alignment.baseAlign:"left-bottom";this._positioningElement=this._options.alignment&&this._options.alignment.positioningElement?this._options.alignment.positioningElement:null;this._prefix="";a.ServiceHelpers.isAuthenticatedMember()||(this._showContactCard=!1,this._disableDirectorySearch(),this._options.showMru=!1,this._loadOnCreate=!1);this._controlLoaded=null;this._loadOnCreate&&this.load();n.eventOptions&&(this._eventOptions=n.eventOptions)},t.prototype.initializeOptions=function(i){var r=t.DROPDOWN_BASE_CLASS+" "+ft.FIXED_POSTIION_CLASS;n.prototype.initializeOptions.call(this,$.extend({coreCssClass:r,pageSize:i.pageSize?i.pageSize:10},i))},t.prototype.initialize=function(){var i=this,r,u,f;n.prototype.initialize.call(this);r=function(n){n.preventDefault()};this._element.on("mousedown.identityPickerDropdown",ut(this,r));u=function(){return i._scrollTimeout!==null&&(clearTimeout(i._scrollTimeout),i._scrollTimeout=null),i._scrollTimeout=window.setTimeout(ut(i,i._loadNextPage),100),!1};this._options.smallScreenRender&&(this._$suggestedPeople=$("<div>").addClass("search"),$("<span>").addClass("status-message").text(p.IdentityPicker_SuggestedPeople).appendTo(this._$suggestedPeople),this._$suggestedPeople.appendTo(this._element));f=this._options.useRemainingSpace?"":Math.min((ft.getSizePx(this._size)+t.IMAGE_MARGINS_PX)*this._options.pageSize-10,t.MAX_HEIGHT)+"px";this._$itemsContainer=$("<ul>").addClass("items").attr({role:"listbox",id:o.getId().toString(),"aria-label":p.IdentityPicker_AriaLabel}).css({"max-height":f});this._$liveStatus=$("<div>").addClass("visually-hidden").attr("aria-live","polite");this._element.append(this._$itemsContainer).append(this._$liveStatus);this._$itemsContainer.scroll(ut(this,u))},t.prototype.getItemsListId=function(){return this._$itemsContainer.length?this._$itemsContainer.attr("id"):""},t.prototype.load=function(){return this._getEntityOperationsFacade().load({loadMru:this._options.showMru,filterByScope:this._options.getFilterByScope()})},t.prototype.addIdentitiesToMru=function(n){var r=this,i;if(a.ServiceHelpers.isAuthenticatedMember())try{if(!n||n.length==0)return;if(i=n.filter(function(n){if(!at.isStringPrefixedLocalId(n))return!0}),!i||i.length==0)return;var u=function(n){r._element&&n==!0&&r._getEntityOperationsFacade().refreshUserMru(r._options.getFilterByScope())},f=function(){},e=w.getService(a.MruService);e.addMruIdentities(i,{IMS:!0},a.MruService.DEFAULT_IDENTITY_ID,a.MruService.DEFAULT_FEATURE_ID,{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(u,f);this._disableDirectorySearch()}catch(t){if(t!==Object(t)||!("source"in t)||t.source!="MruService")throw t;}},t.prototype.isVisible=function(){return this._isVisible},t.prototype.isFiltered=function(){return this._isVisible&&this._isFiltered},t.prototype.showAllMruIdentities=function(n){var t=this,i;if(n===void 0&&(n=!0),!this._options.showMru){i={source:"showAllMruIdentities",message:"The showMru option needs to be enabled to call showAllMruIdentities"};throw i;}return this.load().then(ut(this,function(){return t._getUserMruEntitiesPostLoad(n)}),ut(this,function(){return t._getUserMruEntitiesPostLoad(n)}))},t.prototype.getIdentities=function(n,t){var i=this;return t===void 0&&(t=!0),this.load().then(ut(this,function(){return i._getIdentitiesPostLoad(n,t)}),ut(this,function(){return i._getIdentitiesPostLoad(n,t)}))},t.prototype.show=function(){var n=this;this.load().then(ut(this,function(){n._showPostLoad()}),ut(this,function(){n._showPostLoad()}))},t.prototype.hide=function(n,i){var r=this,u;if(i===void 0&&(i=!1),this._isVisible=!1,this._element&&(this._element.hide(),this._element.parents().off(".identityPickerDropdown"),["scroll","resize"].map(function(n){document.removeEventListener(n,ut(r,r._handleScrollAndResize))}),this._isRepositioning=!1),!i&&this._options.onHide)this._options.onHide(n);u={uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};h.getService().fire(t.HIDE_DROPDOWN_EVENT_INTERNAL,u)},t.prototype.getSelectedIndex=function(){return this._selectedIndex==-1?null:this._selectedIndex<this._displayedEntities.length-1?this._selectedIndex:this._displayedEntities.length-1},t.prototype.getSelectedItem=function(){return this._selectedIndex==-1||this._selectedIndex>this._displayedEntities.length-1?null:this._displayedEntities[this._selectedIndex]},t.prototype.handleKeyEvent=function(n){if(!n||!n.keyCode)return!0;switch(n.keyCode){case ot.UP:return this.isVisible()?this._prevItem():!0;case ot.DOWN:return this.isVisible()?this._nextItem():(this.show(),!0);case ot.PAGE_UP:return this.isVisible()?this._prevPage():!0;case ot.PAGE_DOWN:return this.isVisible()?this._nextPage():!0;case ot.ENTER:return this.isVisible()&&this._searchButtonClickDelegate(),!0;case ot.ESCAPE:return this.isVisible()?(this.hide(n),n.stopPropagation(),!1):!0;case ot.RIGHT:return this.isVisible()&&this._showContactCard&&this._selectedIndex!=-1?(n.stopPropagation(),$(".identity-picker-contact-card-icon",this._indexedEntityMap[this._selectedIndex]).click(),!1):!0;case ot.DELETE:if(this.isVisible()&&this._options.showMru){var t=this.getSelectedItem();return t&&t.isMru&&et.isDirectoryEntityType(t)?(n.stopPropagation(),$(".identity-picker-delete-icon",this._indexedEntityMap[this._selectedIndex]).click(),!1):!0}return!0;default:return!0}},t.prototype.getPrefix=function(){return this._prefix},t.prototype.updatePrefix=function(n){this._prefix=n?n.toLowerCase().trim():"";this._prefix||(this._isSearchActive=!1,this._disableDirectorySearch())},t.prototype.dispose=function(){this._element&&(this._element.off(".identityPickerDropdown"),this._element.parents().off(".identityPickerDropdown"));n.prototype.dispose.call(this)},t.prototype.reset=function(){this._resetSearchStatuses();this._prefix="";this._enableDirectorySearch();this._displayedEntities=[];this._alterStateAndRender(!1,!1);this._disableDirectorySearch()},t.getClassSelector=function(n){return"."+n},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=w.getService(yt)),this._entityOperationsFacade},t.prototype._getUserMruEntitiesPostLoad=function(n){var t=this;return n===void 0&&(n=!0),this._isFiltered=!1,this._showOnlyMruIdentities=!0,this._isDropdownVisibleInitially=this._isVisible,this._getEntityOperationsFacade().isUserMruReady(this._options.getFilterByScope())||this._alterStateAndRender(!0,!1,n),this.load().then(ut(this,function(){return t.getIdentities(t._prefix,n)}))},t.prototype._enableDirectorySearch=function(){this._isDirectorySearchEnabled=!0},t.prototype._disableDirectorySearch=function(){this._isDirectorySearchEnabled=!1},t.prototype._resetSearchStatuses=function(){this._isSearchActive=!1;this._disableDirectorySearch()},t.prototype._getIdentitiesPostLoad=function(n,t){var i,r;return(t===void 0&&(t=!0),i=it.defer(),!this._element)?(i.reject(null),i.promise):(this._showLoading(),this._isDropdownVisibleInitially=this._isVisible,this._isSearchActive=!1,this._displayedEntities=[],this._options.showMru&&(this._mruEntities=this._getEntityOperationsFacade().getMruEntitiesUnchecked(this._options.getFilterByScope()),r=a.ServiceHelpers.getIdentityTypeList(this._identityType),this._mruEntities=this._mruEntities.filter(function(n){return r.indexOf(n.entityType.trim().toLowerCase())>=0})),(!n||n.trim().length===0)&&!this._options.smallScreenRender&&(this._resetSearchStatuses(),!this._showOnlyMruIdentities))?(this._prefix=n,this._enableDirectorySearch(),this._alterStateAndRender(!0,!0),this._disableDirectorySearch(),i.resolve([]),i.promise):(n=n.toLowerCase().trim(),this._prefix=n,this._showOnlyMruIdentities)?(this._displayedEntities=this._mruEntities?this._mruEntities:[],this._alterStateAndRender(!1,!1,t),this._showOnlyMruIdentities=!1,this._getImagesForDisplayedEntities(),i.resolve(this._displayedEntities),i.promise):(this._options.showMru&&(this._displayedEntities=yt.filterEntities(this._mruEntities,n)),this._isFiltered=!0,this._options.showMru&&!this._isDirectorySearchEnabled)?(this._alterStateAndRender(!0,!1,t),this._getImagesForDisplayedEntities(),i.resolve(this._displayedEntities),i.promise):this._getDirectoryEntitiesWithRender(n,i)},t.prototype._getDirectoryEntitiesWithRender=function(n,t){return this._isSearchActive=!0,this._alterStateAndRender(!0),this._getDirectoryEntities(n,t)},t.prototype._checkIfServerException=function(n){return!n||!("serverError"in n)||!n.serverError||!("typeKey"in n.serverError)?!1:!0},t.prototype._getMessageForIpsAuthorizationException=function(n){if(n.serverError.typeKey.trim()=="IdentityPickerAuthorizationException"&&n.serverError.customProperties!=null){var i=n.serverError.customProperties.identityPickerAuthorizationExceptionType,t=p.IdentityPicker_ErrorAuthorizationException;return i==kt.IsGuestUser&&(t=p.IdentityPicker_GuestUserException),t}return null},t.prototype._getDirectoryEntities=function(n,i,r){var u=this,h,a;r===void 0&&(r=!1);var f=function(t){u._element&&(u._isSearchActive=!1,n===u._prefix&&n.length>=1&&(u._displayedEntities=t?t.identities:[],u._alterStateAndRender(!0)),u._onDirectorySearchFinished&&u._onDirectorySearchFinished(u._displayedEntities,n),i.resolve(u._displayedEntities))},e=function(r){if(r&&s.logError("_getDirectoryEntities/getIdentitiesErrorCallback:"+JSON.stringify(r)),n===u._prefix)if(u._checkIfServerException(r)){var f=u._getMessageForIpsAuthorizationException(r);f&&u._showError($("<span>").text(f+" [").append($("<a><\/a>").attr("href",t.IP_AUTHORIZATION_EXCEPTION_DETAILS_LINK).text(p.IdentityPicker_ErrorMoreDetails).attr("target","_blank")).append($("<span>").text("]")))}else u._showError(p.IdentityPicker_ErrorLoadingIdentities);u._isSearchActive=!1;i.reject(r?r:null)},o=this._options.getFilterByScope();return c.FilterByScope.isFilterByScopeEmpty(o)?f(null):(h={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:l.ConsumerId.UnknownConsumer},prefix:n,sources:this._options.showMru?[ct.Directory,ct.Mru]:[ct.Directory],filterByScope:o},a=this._getEntityOperationsFacade().search(h).then(function(n){for(var t in n.queryTokenResponse)n.queryTokenResponse[t].then(ut(u,f),ut(u,e))},e)),i.promise},t.prototype._getImagesForDisplayedEntities=function(){var n=this,i=function(i){if(n._element){if(!i)return;n._displayedEntities.forEach(ut(n,function(r){i.hasOwnProperty(r.entityId)&&i[r.entityId]&&(r.image=i[r.entityId],$(t.getClassSelector(t.AVATAR_CLASS),n._$itemsContainer).each(function(n,t){t.hasAttribute("data-objectid")&&t.getAttribute("data-objectid")===r.entityId&&t.setAttribute("src",i[r.entityId])}))}))}},r=function(n){n&&s.logError("_getImagesForDisplayedEntities/getIdentityImagesErrorCallback:"+JSON.stringify(n))},u={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:l.ConsumerId.UnknownConsumer},sources:[ct.Directory]};this._getEntityOperationsFacade().getImagesForEntities(this._displayedEntities,u).then(i,r)},t.prototype._showPostLoad=function(){var n=this,i;if(this._element){this._isVisible=!0;this._element.show();this._setPosition();this._element.parents().on("scroll.identityPickerDropdown resize.identityPickerDropdown",ut(this,this._handleScrollAndResize));["scroll","resize"].map(function(t){document.addEventListener(t,ut(n,n._handleScrollAndResize))});this._isRepositioning=!1;i={uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};h.getService().fire(t.SHOW_DROPDOWN_EVENT_INTERNAL,i)}},t.prototype._handleScrollAndResize=function(){var n=this;this._isRepositioning||(this._isRepositioning=!0,k.delay(this,500,ut(this,function(){n._isRepositioning=!1;n._setPosition()})))},t.prototype._constructDropdown=function(n,t,i){n===void 0&&(n=!1);t===void 0&&(t=!0);i===void 0&&(i=!0);this._indexedEntityMap={};t&&this._setupDom();n?this._setSelectedIndex(this._selectedIndex<this._displayedEntities.length?this._selectedIndex:this._isSearchActive?this._displayedEntities.length-1:-1,!0,g.Positioning.VerticalScrollBehavior.Top):(this._selectedIndex=ht.SelectNone,i&&this._numItemsDisplayed>0?this._setSelectedIndex(ht.SelectFirstItem,!1):this._setSelectedIndex(ht.SelectNone,!1))},t.prototype._removeIdentityFromMru=function(n){var i=this;try{if(at.isStringPrefixedLocalId(n))return;var r=function(n){i._element&&n==!0&&i._getEntityOperationsFacade().refreshUserMru(i._options.getFilterByScope())},u=function(){},f=w.getService(a.MruService);f.removeMruIdentities([n],{IMS:!0},a.MruService.DEFAULT_IDENTITY_ID,a.MruService.DEFAULT_FEATURE_ID,{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(r,u);this._disableDirectorySearch()}catch(t){if(t!==Object(t)||!("source"in t)||t.source!="MruService")throw t;}},t.prototype._alterStateAndRender=function(n,t,i){if(t===void 0&&(t=!1),i===void 0&&(i=!0),this._element){if(n||this.hide(void 0,!0),this._prefix&&this._prefix.trim().length!=0||(this._isSearchActive=!1),this._displayedEntities=this._displayedEntities||[],this._preDropdownRender&&(this._displayedEntities=this._preDropdownRender(this._displayedEntities,this._isDirectorySearchEnabled)),this._constructDropdown(t,!0,i),!this._isSearchActive&&!this._prefix&&this._displayedEntities.length==0){this.hide();return}n&&(!this._isDropdownVisibleInitially||this._isVisible)&&this.show()}},t.prototype._fireActiveDescendantUpdate=function(n){var i={activeDescendantId:n,uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};h.getService().fire(t.UPDATE_ACTIVE_DESCENDANT_ID,i)},t.prototype._setSelectedIndex=function(n,t,i){i===void 0&&(i=g.Positioning.VerticalScrollBehavior.Bottom);var r=n!==null&&n!==undefined&&this._indexedEntityMap&&this._indexedEntityMap[n]&&(this._selectedIndex!==n||!this._indexedEntityMap[this._selectedIndex].hasClass("selected"));r?(this._selectedIndex=n,this._clearItemsSelection(this._element.find(".search")),this._clearItemsSelection(this._$itemsContainer.find("li")),this._selectItem(this._indexedEntityMap[this._selectedIndex]),t&&this._scrollItemIntoView(this._selectedIndex,i)):$.isNumeric(n)&&(this._selectedIndex=n)},t.prototype._scrollItemIntoView=function(n,t){n!==null&&n!==undefined&&g.Positioning.scrollIntoViewVertical(this._indexedEntityMap[n],t)},t.prototype._setPosition=function(){var n,i,r,u,e,f,o;this._element&&(n=this._getPositioningElement(),this._options.width?this._element.width(this._options.width):(i=n.outerWidth()-t.DROPDOWN_BORDER_PX,this._element.width(i<t.MIN_WIDTH?t.MIN_WIDTH:i)),n.is(":visible")&&g.Positioning.position(this.getElement(),n,{elementAlign:this._elementAlign,baseAlign:this._baseAlign,overflow:"fit-flip"}),r=$(window),u=this._element.offset().top+this._element.height()-r.height()-r.scrollTop(),u>0&&(e=parseInt(this._$itemsContainer.css("max-height")),this._$itemsContainer.css("max-height",e-u+"px")),this._options.useRemainingSpace&&(this._element.width(""),this._element.css("left",""),this._element.addClass("use-remaining-space"),f=this._element.position().top,o="calc(100% - "+f+"px)",this._element.css("max-height",o),this._element.css("top",f+"px")),this._options.smallScreenRender&&this._element.addClass("small-screen"))},t.prototype._getPositioningElement=function(){var n=this._positioningElement;return $.isFunction(n)&&(n=n()),n||(n=this.getElement().parent()),n},t.prototype._showLoading=function(){this._$liveStatus.detach();this._$itemsContainer.detach();this._element.empty();this._$liveStatus.appendTo(this._element);this._$liveStatus.text(p.IdentityPicker_LoadingIdentities);this._$itemsContainer.empty().attr("aria-busy","true").appendTo(this._element);var n=$("<div>").addClass("search").appendTo(this._element),t=o.BaseControl.createIn(b.StatusIndicator,n,{center:!1,message:p.IdentityPicker_LoadingIdentities});t.start()},t.prototype._showError=function(n){var t=typeof n=="string"||n instanceof String?$("<span>").text(n):n,i,r;this._$liveStatus.text(t.text());i=$(".search",this._element).empty().addClass("search-error");r=o.BaseControl.createIn(y.MessageAreaControl,i,{closeable:!1,message:{header:t,type:y.MessageAreaType.Error},showIcon:!1})},t.prototype._nextPage=function(){var n=-1;return this._loadNextPage(!0),this._selectedIndex<this._displayedEntities.length-1&&this._selectedIndex!==-1&&(n=this._selectedIndex+this._options.pageSize),this._setSelectedIndex(n<this._displayedEntities.length?n:this._displayedEntities.length-1,!0,g.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._prevPage=function(){var n=0;return this._selectedIndex===-1?n=this._displayedEntities.length-this._options.pageSize:this._selectedIndex>0&&(n=this._selectedIndex-this._options.pageSize),this._setSelectedIndex(n>=0?n:ht.SelectFirstItem,!0,g.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._nextItem=function(){if(this._selectedIndex===this._displayedEntities.length-1){var n=this._element.find(".search");n.is(":visible")?(this._selectedIndex=ht.SelectNone,this._clearItemsSelection(this._$itemsContainer.find("li")),this._selectItem(n)):this._setSelectedIndex(ht.SelectFirstItem,!0)}else this._selectedIndex<this._displayedEntities.length-1&&this._setSelectedIndex(this._selectedIndex+1,!0);return!1},t.prototype._prevItem=function(){return this._selectedIndex===-1&&this._displayedEntities&&this._displayedEntities.length?(this._clearItemsSelection(this._element.find(".search")),this._setSelectedIndex(this._displayedEntities.length-1,!0)):this._selectedIndex>0&&this._setSelectedIndex(this._selectedIndex-1,!0,g.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._selectItem=function(n){var t=n.attr("id")?n.attr("id"):o.getId().toString();n.addClass("selected").attr({id:t,"aria-selected":"true"});this._fireActiveDescendantUpdate(t)},t.prototype._clearItemsSelection=function(n){n.removeClass("selected").attr("aria-selected","false")},t.prototype._createItem=function(n){var t=this,r={deleteIconClickDelegate:ut(this,function(n,i){var r=t._mruEntities.indexOf(n);r>=0&&t._mruEntities.splice(r,1);r=t._displayedEntities.indexOf(n);r>=0&&t._displayedEntities.splice(r,1);i.remove();n.localId&&n.localId.trim()&&t._removeIdentityFromMru(n.localId);t._numItemsDisplayed=Math.min(t._displayedEntities.length,Math.max(t._options.pageSize,t._numItemsDisplayed));t._$searchResultStatus.remove();t._$searchResultStatus=t._constructSearchResultStatus();t._showAdditionalInformation()}),entityListItemClickDelegate:ut(this,function(n){if(t._logSelectedEntity(n),$.isFunction(t._options.onItemSelect))t._options.onItemSelect(n)})},u={operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null},f={consumerId:this._options.consumerId},e=this._displayedEntities[n],i=(new ui).withIdentityServiceOptions(u).withIdentityExtensionOptions(f).withPrefix(this._prefix&&this._prefix.trim()&&!this._showOnlyMruIdentities?this._prefix:"").withEntity(e).forControlOfSize(this._size).registerCallbacks(r).withContactCard(this._showContactCard,this._options.focusElementOnContactCardClose).withHoverSupport(!this._options.useRemainingSpace).withSmallScreenRender(this._options.smallScreenRender).withDialogAppendTo(this._options.dialogAppendTo).build();return this._indexedEntityMap[n]=i,i},t.prototype._logSelectedEntity=function(n){var r=!1,u=!1,i,t,f;try{i=l.Telemetry.Feature_DropdownControl;(n.originDirectory.toLowerCase().trim()==a.ServiceHelpers.VisualStudioDirectory||n.localDirectory.toLowerCase().trim()==a.ServiceHelpers.VisualStudioDirectory)&&(r=!0);n.isMru&&(u=!0);this._prefix?this._options.showMru?i=this._isDirectorySearchEnabled?l.Telemetry.Feature_Select_Mru_Dir:l.Telemetry.Feature_Select_Mru_Prefix:this._isDirectorySearchEnabled&&(i=l.Telemetry.Feature_Select_Dir):this._options.showMru&&(i=l.Telemetry.Feature_Select_Mru_NoPrefix);t={};t[l.TelemetryProperties.prefixType]=a.ServiceHelpers.getPrefixTypeForTelemetry(this._prefix);t[l.TelemetryProperties.prefixLength]=this._prefix.length;t[l.TelemetryProperties.consumerId]=this._options&&this._options.consumerId?this._options.consumerId:null;t[l.TelemetryProperties.extensionId]=this._options&&this._options.extensionData&&this._options.extensionData.extensionId?this._options.extensionData.extensionId:null;t[l.TelemetryProperties.identityTypes]=a.ServiceHelpers.getIdentityTypeList(this._options.identityType);t[l.TelemetryProperties.operationScopes]=a.ServiceHelpers.getOperationScopeList(this._options.operationScope);t[l.TelemetryProperties.isMru]=u;t[l.TelemetryProperties.isNonMaterialized]=!r;t[l.TelemetryProperties.maxResults]=this._options&&this._options.maxResults?this._options.maxResults:a.IdentityService.MAX_RESULTS;t[l.TelemetryProperties.minResults]=this._options&&this._options.minResults?this._options.minResults:a.IdentityService.MIN_RESULTS;t[l.TelemetryProperties.entityId]=n.entityType.toLowerCase().trim()==at.STRING_ENTITY_TYPE?at.STRING_ENTITY_TYPE:n.entityId;t[l.TelemetryProperties.consumerId]=this._options.consumerId;f=w.getService(a.IdentityService);t=a.ServiceHelpers.addScenarioProperties(w.getService(a.IdentityService),t);nt.publishEvent(new nt.TelemetryEventData(l.Telemetry.Area,i,t))}catch(e){}},t.prototype._setupDom=function(){var n,t,i;this._$liveStatus.text("").detach();this._$itemsContainer.empty().removeAttr("aria-busy").detach();this._element.empty();this._$liveStatus.appendTo(this._element);this._setupEntitiesInDom();n=!1;!this._isDirectorySearchEnabled&&this._options.showMru&&this._prefix&&!this._showOnlyMruIdentities&&(t=this._constructSearchButton().appendTo(this._element),this._$itemsContainer.attr("aria-owns",t.attr("id")),n=!0,this._displayedEntities&&this._displayedEntities.length||(this._selectedIndex=ht.SelectNone,this._selectItem(t)));this._displayedEntities&&this._displayedEntities.length>0&&(this._$searchResultStatus=this._constructSearchResultStatus());n&&(i=this._$liveStatus.text(),this._$liveStatus.text((i?i+". ":"")+p.IdentityPicker_SearchButtonShownInDropdown));this._showAdditionalInformation()},t.prototype._showAdditionalInformation=function(){this._displayedEntities.length===0&&(this._isSearchActive||this._options.showMru&&!this._getEntityOperationsFacade().isUserMruReady(this._options.getFilterByScope())?this._showLoading():(!this._options.showMru||this._isDirectorySearchEnabled&&this._prefix||this._showOnlyMruIdentities)&&(this._$liveStatus.text(p.IdentityPicker_NoResult),(this._options.showNoIdentitiesFound||this._options.showNoIdentitiesFound===undefined||this._options.showNoIdentitiesFound===null)&&this._constructInformativeMessage(p.IdentityPicker_NoResult).appendTo(this._element)));this._$suggestedPeople&&(this._displayedEntities.length>0?this._$suggestedPeople.show():this._$suggestedPeople.hide())},t.prototype._setupEntitiesInDom=function(){var n,i;if(this._options.smallScreenRender&&this._$suggestedPeople.appendTo(this._element),this._$itemsContainer.empty().appendTo(this._element),this._displayedEntities.length==0)this._numItemsDisplayed=0;else for(this._numItemsDisplayed=Math.min(this._displayedEntities.length,Math.max(this._options.pageSize,this._numItemsDisplayed)),n=0;n<this._numItemsDisplayed;n++)n>this._displayedEntities.length-1||(i=this._createItem(n),i&&(this._$itemsContainer.append(i),this._options.smallScreenRender||i.height(i.height()+t.IMAGE_MARGINS_PX)))},t.prototype._constructSearchResultStatus=function(){var n=$("<div>").addClass("search-result-status").appendTo(this._element),t,i;return this._displayedEntities.length==1&&this._numItemsDisplayed==this._displayedEntities.length?(t=d.format(p.IdentityPicker_SingleResultStatus,this._displayedEntities.length),this._$liveStatus.text(t),n.text(t)):this._displayedEntities.length>1&&this._numItemsDisplayed<=this._displayedEntities.length?(i=d.format(p.IdentityPicker_MultipleResultStatus,this._displayedEntities.length),this._$liveStatus.text(i),n.text(i)):n.hide(),n},t.prototype._constructSearchButton=function(){var n=$("<div>").addClass("search").attr({role:"button option","aria-label":p.IdentityPicker_SearchButtonLabel,tabindex:"0",id:o.getId().toString()}),t=$("<span>").addClass("bowtie-icon bowtie-search identity-picker-search-icon"),i=$("<span>").addClass("status-message").text(p.IdentityPicker_SearchButton);return n.append(t).append(i),n.click(ut(this,this._searchButtonClickDelegate)),n},t.prototype._constructInformativeMessage=function(n){return $("<div>").addClass("no-result").append($("<span>").addClass("status-message").text(n).attr("role","alert"))},t.prototype._loadNextPage=function(n){var u,r,i;if(n===void 0&&(n=!1),u=this._$itemsContainer.scrollTop()+this._$itemsContainer.outerHeight()>=this._$itemsContainer[0].scrollHeight-5,n||u){for(r=this._numItemsDisplayed;r<this._numItemsDisplayed+Math.min(this._displayedEntities.length-this._numItemsDisplayed,this._options.pageSize);r++)i=this._createItem(r),i&&(this._$itemsContainer.append(i),i.height(i.height()+t.IMAGE_MARGINS_PX));this._numItemsDisplayed+=Math.min(this._displayedEntities.length-this._numItemsDisplayed,this._options.pageSize);this._$searchResultStatus.remove();this._$searchResultStatus=this._constructSearchResultStatus()}this._scrollTimeout!==null&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null)},t.prototype._searchButtonClickDelegate=function(){this._enableDirectorySearch();this.getIdentities(this._prefix)},t.SHOW_DROPDOWN_EVENT_INTERNAL="identity-picker-dropdown-show",t.HIDE_DROPDOWN_EVENT_INTERNAL="identity-picker-dropdown-hide",t.UPDATE_ACTIVE_DESCENDANT_ID="identity-picker-dropdown-update-active-descendant-id",t.DROPDOWN_BASE_CLASS="identity-picker-dropdown",t.IMAGE_MARGINS_PX=8,t.MIN_WIDTH=300,t.MAX_HEIGHT=240,t.DROPDOWN_BORDER_PX=2,t.IP_AUTHORIZATION_EXCEPTION_DETAILS_LINK="https://aka.ms/c0eo4d",t.AVATAR_CLASS="identity-picture",t}(o.Control);t.IdentityPickerDropdownControl=lt;wt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._scrollTimeout=100,i._pageSize=10,i._selectedIndex=ht.SelectNone,i._identityType=t.identityType?t.identityType:{User:!0},i._operationScope=t.operationScope?t.operationScope:{IMS:!0},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:402,height:70,resizable:!1,modal:!1,draggable:!0,autoOpen:!0,closeOnEscape:!1,cssClass:"idcard-dialog-content",closeText:p.CloseButtonLabelText},t))},t.prototype.initialize=function(){var i,r,u;n.prototype.initialize.call(this);this._previousFocusedElement=$(document.activeElement);this._element.dialog(this._options);this._$idCardDialog=this._element.closest(t.JQUERY_UI_DIALOG_CLASS).addClass("idcard-dialog").attr("visibility","hidden");this._$idCardDialog.on("dialogclose.contactCard",ut(this,this._onIdCardClose));this._$idCardDialog.on("keydown.contactCard",ut(this,this._onKeyDown));if(this._$idCardDialog.css("z-index",t._getHigherZIndex("div"+t.JQUERY_UI_DIALOG_CLASS)),$(".ui-icon-closethick",this._$idCardDialog).addClass("bowtie-icon bowtie-navigate-close"),this._repositionDialog(),this._$idCardDialog.hide(),$(".ui-dialog-content",$(".idcard-dialog:visible")).dialog("close"),this._$idCardDialog.attr("id",t.ID_CARD_DIALOG_ID),this._options.identity){if(i=this._options.identity,!et.isDirectoryEntityType(i)){r={source:"IdCardDialog initialize",message:"The IdCardDialog can only be initialized with a user or group IEntity"};throw r;}u=et.getUniqueIdentifierForDisambiguation(i);this._$idCardDialog.attr("data-prefix",u.toLowerCase());this._getIdentitiesSuccess({queryToken:null,identities:[i]});!ft.isOnPremiseEnvironment()&&i.localDirectory&&i.localDirectory.toLowerCase().trim()==a.ServiceHelpers.VisualStudioDirectory&&this._operationScope&&(this._operationScope.AAD||this._operationScope.Source)&&this._getDirectoryEntities(i.entityId)}else this._$idCardDialog.attr("data-prefix",this._options.uniqueIdentifier.toLowerCase()),this._getDirectoryEntities(this._options.uniqueIdentifier)},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=w.getService(yt)),this._entityOperationsFacade},t._getHigherZIndex=function(n){var t,i=1001;return $(n).each(function(n,r){t=$(r).css("z-index");!isNaN(t)&&t>i&&(i=t)}),++i},t.prototype._repositionDialog=function(){var t={elementAlign:"left-top",baseAlign:"left-bottom",overflow:"none-none"},n,i,r;this._options.anchorContainer?(n=$(this._options.anchorContainer).offset(),t.leftOffsetPixels=n.left,t.topOffsetPixels=n.top,t.skipZIndexSetting=!0):n=this._options.anchor.offset();g.Positioning.position(this._$idCardDialog,this._options.anchor,t);i=this._options.leftValue&&this._options.leftValue>0?this._options.leftValue:n.left;i+this._$idCardDialog.outerWidth()<$(window).width()+$(window).scrollLeft()?this._$idCardDialog.css("left",i):this._$idCardDialog.css("left",i-this._$idCardDialog.outerWidth()+this._options.anchor.outerWidth());r=this._options.topValue&&this._options.topValue>0?this._options.topValue:n.top+this._options.anchor.outerHeight();r+this._$idCardDialog.outerHeight()<$(window).height()+$(window).scrollTop()?this._$idCardDialog.css("top",r):this._$idCardDialog.css("top",r-this._$idCardDialog.outerHeight()-this._options.anchor.outerHeight())},t.prototype._getDirectoryEntities=function(n){var t=this,i={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:l.ConsumerId.UnknownConsumer},prefix:n,queryTypeHint:{UID:!0},sources:[ct.Directory]},r=this._getEntityOperationsFacade().search(i).then(function(n){for(var i in n.queryTokenResponse)n.queryTokenResponse[i].then(ut(t,t._getIdentitiesSuccess),ut(t,t._getIdentitiesFailure))},this._getIdentitiesFailure)},t.prototype._getIdentitiesFailure=function(){h.getService().fire(t.IDCARD_LOADED_EVENT)},t.prototype._getIdentitiesSuccess=function(n){var r,e;if(!n||!n.identities||n.identities.length<1){this._getIdentitiesFailure(n);return}this._identity=n.identities[0];var o=f.FeatureAvailabilityService.isFeatureEnabled(u.WebPlatformFeatureFlags.ReactProfileCard),s=this._identity.entityType.trim().toLowerCase()==a.ServiceHelpers.UserEntity,i=this._identity.entityType.trim().toLowerCase()==a.ServiceHelpers.GroupEntity,c=window.top!==window.self,l=this._options.useOfficeFabricProfileCard!==null&&this._options.useOfficeFabricProfileCard!==undefined?this._options.useOfficeFabricProfileCard:!c;if(o&&l&&(s||i))this._displayReactIdCard(i);else{if(!a.ServiceHelpers.isAuthenticatedMember())return;r=et.getUniqueIdentifierForDisambiguation(this._identity);e=et.getSignInAddress(this._identity);(this._$idCardDialog.attr("data-prefix")&&r.toLowerCase().indexOf(this._$idCardDialog.attr("data-prefix").toLowerCase())===0||e.toLowerCase().indexOf(this._$idCardDialog.attr("data-prefix").toLowerCase())===0)&&this._element&&this._displayIdCard()}h.getService().fire(t.IDCARD_LOADED_EVENT)},t.prototype._displayReactIdCard=function(n){var t=this,s=$("body").eq(0),f=s.find(".cards-container"),u,e,o,h;if(f.length===0&&(f=$("<div class='cards-container' />").appendTo(s)),u=this._options.anchor,u&&u.attr("role")==="row"&&(u=u.children()),e=u[0],this._options.leftValue!==undefined&&this._options.topValue!==undefined&&this._options.leftValue!==null&&this._options.topValue!==null&&(e={x:this._options.leftValue,y:this._options.topValue}),o=function(){r.unmountComponentAtNode(f[0]);$(".ui-dialog-content",$(".idcard-dialog")).dialog("close")},n){var c=function(n){var i=w.getService(a.IdentityService);return i.getIdentityConnections(n,t._operationScope,{User:!0,Group:!0},{successors:!0},{httpClient:t._options.httpClient},{consumerId:t._options.consumerId})},v=function(n){var i={identityServiceOptions:{operationScope:t._operationScope,identityType:t._identityType,httpClient:null,extensionData:null},identityExtensionOptions:{consumerId:t._options?t._options.consumerId:l.ConsumerId.UnknownConsumer},prefix:n,queryTypeHint:{UID:!0},sources:["Directory"]};return t._getEntityOperationsFacade().search(i).then(function(n){var t=Object.keys(n.queryTokenResponse)[0];return n.queryTokenResponse[t].then(function(n){return n.identities[0]})})},y=u[0],p={getEntityFromUniqueAttribute:v,identity:this._identity,onDismissCallback:o,onRequestConnectionInformation:c,target:y};tt.using(["VSSUI/IdentityCard"],function(n){var t=i.createElement(n.IdentityCard,p);r.render(t,f[0])})}else h={identity:this._identity,target:e,entityOperationsFacade:this._getEntityOperationsFacade(),consumerId:this._options?this._options.consumerId:l.ConsumerId.UnknownConsumer,onDismissCallback:o},tt.using(["VSS/Identities/Picker/PersonaCard"],function(n){var t=i.createElement(n.PersonaCard,h);r.render(t,f[0])})},t.prototype._displayIdCard=function(){var n=this,t,e,o,f,s,v;this._$idCardDialog.attr("data-objectid",this._identity.entityId);$("body").on("mousedown.contactCard",ut(this,this._onIdCardBlur));$(".ui-dialog-buttonpane",this._$idCardDialog).hide();this._element.empty();$(".identity-picker-idcard-header").empty();var c=$("<div>").addClass("identity-picker-idcard-header").prependTo($(".ui-dialog-titlebar",this._$idCardDialog)),w=$("<div>").addClass("identity-picker-idcard-image").appendTo(c),l=$("<div>").addClass("identity-picker-idcard-basicinfo").appendTo(c),u=et.getDisplayName(this._identity),b=a.ServiceHelpers.getDefaultIdentityImage(this._identity),k=ft.createImgElement(b,this._identity.image?this._identity.image:"","user-picture-card");if(k.attr("alt",u).appendTo(w),t=et.getSignInAddress(this._identity),t.trim()||this._options.uniqueIdentifier&&ft.isValidEmail(this._options.uniqueIdentifier)&&(t=this._options.uniqueIdentifier),e=$("<div>").addClass("identity-picker-idcard-basicinfo-name").appendTo(l).text(u),rt.RichContentTooltip.addIfOverflow(u,e,{menuContainer:e}),o=$("<div>").addClass("identity-picker-idcard-ellipsis-overflow").appendTo(l),ft.isValidEmail(t)?$("<a>").attr({"aria-label":p.IdentityPicker_IdCardSendEmail,href:"mailto:"+t,tabindex:"0"}).text(t).appendTo(o):o.text(t),this._$liveStatus=$("<div>").addClass("visually-hidden").attr("aria-live","polite").appendTo(this._$idCardDialog),$(".ui-dialog-title",this._$idCardDialog).text(d.format(p.IdentityPicker_ContactCardInformation,u)),this._$idCardDialog.attr("name",u),f=(new ri).getIdentityAttributes(this._identity),this._identity.entityType.trim().toLowerCase()==a.ServiceHelpers.UserEntity){s=f.toRows();for(v in s)this._element.append(s[v])}else if(this._identity.entityType.trim().toLowerCase()==a.ServiceHelpers.GroupEntity){var y=$("<div>").addClass("identity-picker-idcard-row").attr("role","tablist").appendTo(this._element),i=$("<span>").addClass("identity-picker-idcard-tab").text(p.IdentityPicker_IdCardInfo).attr({tabindex:"0",id:"identity-picker-idcard-tab-info",role:"tab","aria-selected":"true"}).appendTo(y),r=$("<span>").addClass("identity-picker-idcard-tab identity-picker-idcard-unselected-tab").text(p.IdentityPicker_IdCardMembers).attr({tabindex:"0",id:"identity-picker-idcard-tab-members",role:"tab","aria-selected":"false"}).appendTo(y),h=f.toRows()[0].attr({role:"tabpanel","aria-labelledby":"identity-picker-idcard-tab-info"});this._element.append(h);this._constructMemberTabContent().appendTo(this._element);this._getDirectoryMemberEntities(this._identity);i.click(ut(this,function(){i.hasClass("identity-picker-idcard-unselected-tab")&&(i.removeClass("identity-picker-idcard-unselected-tab"),i.attr("aria-selected","true"),r.attr("aria-selected","false"),r.addClass("identity-picker-idcard-unselected-tab"),n._$groupMembersContainer.parent().hide(),h.show(),n._element.css("height","auto"),n._$idCardDialog.css("height","auto"))}));r.click(ut(this,function(){r.hasClass("identity-picker-idcard-unselected-tab")&&(r.removeClass("identity-picker-idcard-unselected-tab"),r.attr("aria-selected","true"),i.attr("aria-selected","false"),i.addClass("identity-picker-idcard-unselected-tab"),h.hide(),n._setSelectedIndex(ht.SelectFirstItem,g.Positioning.VerticalScrollBehavior.Top),n._$groupMembersContainer.parent().show(),n._element.css("height","auto"),n._$idCardDialog.css("height","auto"),n._groupMembers.length?n._groupMembers.length==1?n._$liveStatus.text(p.IdentityPicker_MembersSingleResultStatus):n._$liveStatus.text(d.format(p.IdentityPicker_MembersMultipleResultStatus,n._groupMembers.length)):n._$liveStatus.text(p.IdentityPicker_NoMembers))}))}f.isEmpty()?$(".ui-dialog-titlebar",this._$idCardDialog).addClass("no-content"):$(".ui-dialog-titlebar",this._$idCardDialog).removeClass("no-content");this._element.css("height","auto");this._repositionDialog();this._$idCardDialog.show();this._$idCardDialog.attr("visibility","");this._$idCardDialog.attr("tabindex","-1");this._$idCardDialog.focus()},t.prototype._constructMemberTabContent=function(){var n=$("<div>").addClass(t.ID_CARD_MEMBERS_DROPDOWN_CLASS+" "+t.ID_CARD_LIST_CLASS).attr({role:"tabpanel","aria-busy":"true","aria-labelledby":"identity-picker-idcard-tab-members"}).hide(),i;return this._$groupMembersContainer=$("<ul>").attr({role:"list","aria-labelledby":"identity-picker-idcard-tab-members",tabindex:"0"}).appendTo(n).css({"max-height":Math.min((ft.getSizePx(st.Large)+t.IMAGE_MARGINS_PX)*this._pageSize-10,t.MAX_HEIGHT)+"px"}),i=$("#identity-picker-idcard-tab-members-description.visually-hidden"),i.length||(i=$("<div>").text(p.IdentityPicker_IdCardMembersTabDescription).attr("id","identity-picker-idcard-tab-members-description").addClass("visually-hidden").appendTo("<body>")),this._$groupMembersContainer.attr("aria-describedby","identity-picker-idcard-tab-members-description"),this._$loading=$("<div>").addClass("identity-picker-idcard-word-wrap identity-picker-idcard-error").text(p.IdentityPicker_IdCardLoadingMembers).appendTo(n),n},t.prototype._getDirectoryMemberEntities=function(n){var t=this,r=w.getService(a.IdentityService),u=function(n){if(t._element){if(!n)return;t._groupMembers.forEach(ut(t,function(i){n.hasOwnProperty(i.entityId)&&n[i.entityId]&&(i.image=n[i.entityId],$(".identity-picture",t._$groupMembersContainer).each(function(t,r){r.hasAttribute("data-objectid")&&r.getAttribute("data-objectid")===i.entityId&&(r.setAttribute("src",n[i.entityId]),r.setAttribute("class","identity-picture small"))}))}))}},f=function(n){n&&s.logError("_getDirectoryMemberEntities/getIdentityImagesErrorCallback:"+JSON.stringify(n))},e=function(n){if(t._element){if(!n||!n.successors){ut(t,i)();return}if(t._groupMembers=n.successors,t._groupMembers&&t._groupMembers.length>0){t._groupMembers=ft.sortGroupMembersByName(t._groupMembers);t._groupMembers.forEach(function(n){(!n.image||n.image.trim())&&(n.image=a.ServiceHelpers.getDefaultIdentityImage(n))});var r={identityServiceOptions:{operationScope:t._operationScope,identityType:{User:!0,Group:!0},httpClient:t._options.httpClient,extensionData:t._options.extensionData},identityExtensionOptions:{consumerId:t._options.consumerId},sources:[ct.Directory]};t._getEntityOperationsFacade().getImagesForEntities(t._groupMembers,r).then(u,f);t._$loading.hide();t._renderMembersList()}else t._$loading.text(p.IdentityPicker_IdCardNoMembers);t._$groupMembersContainer.parent().removeAttr("aria-busy")}},i=function(n){t._element&&(t._$groupMembersContainer.parent().removeAttr("aria-busy"),t._$loading.text(p.IdentityPicker_IdCardErrorLoadingMembers));n&&s.logError("_displayIdCard/getConnectionsErrorCallback:".concat(JSON.stringify(n)))};r.getIdentityConnections(n,this._operationScope,{User:!0,Group:!0},{successors:!0},{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(ut(this,e),ut(this,i))},t.prototype._isMembersListVisible=function(){return this._$groupMembersContainer&&this._$groupMembersContainer.length&&this._$groupMembersContainer.parent()&&this._$groupMembersContainer.parent().is(":visible")},t.prototype._onIdCardBlur=function(n){this._element.hasClass("ui-dialog-content")&&n&&!$(n.target).closest("#"+t.ID_CARD_DIALOG_ID).length&&!$(n.target).is("#"+t.ID_CARD_DIALOG_ID)&&this._element.dialog("close")},t.prototype._onIdCardClose=function(){this._options.focusElementOnClose&&this._options.focusElementOnClose.is(":visible")?this._options.focusElementOnClose.focus():this._previousFocusedElement.focus();$("body").off("mousedown.contactCard");this._$idCardDialog.off(".contactCard");this._element.dialog("destroy")},t.prototype._onKeyDown=function(n){if(!n||!n.keyCode)return!0;switch(n.keyCode){case ot.UP:return this._isMembersListVisible()?this._prevItem():!0;case ot.DOWN:return this._isMembersListVisible()?this._nextItem():!0;case ot.PAGE_UP:return this._isMembersListVisible()?this._prevPage():!0;case ot.PAGE_DOWN:return this._isMembersListVisible()?this._nextPage():!0;case ot.ENTER:case ot.SPACE:return $(document.activeElement).hasClass("identity-picker-idcard-tab")&&$(document.activeElement).hasClass("identity-picker-idcard-unselected-tab")?(n.stopPropagation(),$(document.activeElement).click(),!1):$(document.activeElement).hasClass("ui-dialog-titlebar-close")?(n.stopPropagation(),this._element.dialog("close"),!1):this._isMembersListVisible()&&this._selectedIndex!=ht.SelectNone?(n.stopPropagation(),$("li",this._$groupMembersContainer).eq(this._selectedIndex).click(),!1):!0;case ot.ESCAPE:case ot.LEFT:return n.stopPropagation(),this._element.dialog("close"),!1;case ot.TAB:var r=$(":tabbable",this._$idCardDialog),t=r.filter(":first"),i=r.filter(":last");return i.length&&n.target===i[0]&&!n.shiftKey?(t.focus(),!1):t.length&&n.target===t[0]&&n.shiftKey?(i.focus(),!1):!0;default:return!0}},t.prototype._createItem=function(n){var i=this,f,s,e,u,r,h;return n?(s=a.ServiceHelpers.getDefaultIdentityImage(n),n.image&&(f=n.image),e=et.getDisplayName(n),u=et.getSignInAddress(n),u=d.isGuid(u)?"":u,r=$("<li>").attr("role","listitem").attr("id",o.getId().toString()).height(40),rt.RichContentTooltip.addIfOverflow(e,r,{menuContainer:r}),ft.createImgElement(s,f,"identity-picture small",n.entityId).addClass(f&&f.trim()?"":"hidden").appendTo(r),h=$("<div>").addClass("item-text-container").append($("<div>").addClass("title large").text(e)).append($("<div>").addClass("subtitle large").text(u)).appendTo(r),h.css("max-width",this._element.width()-t.MEMBERS_TAB_LEFT_PADDING_PX-t.IMAGE_MARGINS_PX-ft.getSizePx(st.Large)-ft.IDENTITY_ITEM_BUFFER_WIDTH_PX),r.click(ut(this,function(u){u.stopPropagation();var f={identity:n,anchor:r,leftValue:u.pageX!==undefined?u.pageX:r.offset().left,topValue:u.pageY!==undefined?u.pageY:r.offset().top,operationScope:i._operationScope,identityType:i._identityType,httpClient:i._options.httpClient?i._options.httpClient:null,focusElementOnClose:i._options.focusElementOnClose&&i._options.focusElementOnClose.is(":visible")?i._options.focusElementOnClose:i._previousFocusedElement,appendTo:i._options.appendTo,consumerId:i._options.consumerId};o.Enhancement.enhance(t,"<div/>",f)})),r):null},t.prototype._renderMembersList=function(){var n=this,r=function(){return n._scrollTimeout!==null&&(clearTimeout(n._scrollTimeout),n._scrollTimeout=null),n._scrollTimeout=window.setTimeout(ut(n,n._loadNextPage),100),!1},t,i;if(this._$groupMembersContainer.empty(),this._$groupMembersContainer.addClass("items"),this._$groupMembersContainer.scroll(ut(this,r)),this._groupMembers.length==0)this._numItemsDisplayed=0;else for(this._numItemsDisplayed=Math.min(this._groupMembers.length,this._pageSize),t=0;t<Math.min(this._groupMembers.length,this._pageSize);t++)i=this._createItem(this._groupMembers[t]),i&&this._$groupMembersContainer.append(i)},t.prototype._loadNextPage=function(){var t=this._$groupMembersContainer.scrollTop()+this._$groupMembersContainer.outerHeight()>=this._$groupMembersContainer[0].scrollHeight-5,n;if(t){for(n=this._numItemsDisplayed;n<this._numItemsDisplayed+Math.min(this._groupMembers.length-this._numItemsDisplayed,this._pageSize);n++)this._$groupMembersContainer.append(this._createItem(this._groupMembers[n]));this._numItemsDisplayed+=Math.min(this._groupMembers.length-this._numItemsDisplayed,this._pageSize)}this._scrollTimeout!==null&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null)},t.prototype._nextItem=function(){return this._selectedIndex===this._groupMembers.length-1?this._setSelectedIndex(ht.SelectFirstItem):this._selectedIndex<this._groupMembers.length-1&&this._setSelectedIndex(this._selectedIndex+1),!1},t.prototype._prevItem=function(){return this._selectedIndex===-1&&this._groupMembers&&this._groupMembers.length?this._setSelectedIndex(this._groupMembers.length-1):this._selectedIndex>0&&this._setSelectedIndex(this._selectedIndex-1,g.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._nextPage=function(){var n=-1;return this._loadNextPage(),this._selectedIndex<this._groupMembers.length-1&&this._selectedIndex!==-1&&(n=this._selectedIndex+this._pageSize),this._setSelectedIndex(n<this._groupMembers.length?n:this._groupMembers.length-1,g.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._prevPage=function(){var n=0;return this._selectedIndex===-1?n=this._groupMembers.length-this._pageSize:this._selectedIndex>0&&(n=this._selectedIndex-this._pageSize),this._setSelectedIndex(n>=0?n:ht.SelectFirstItem,g.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._setSelectedIndex=function(n,t){var i,u,r,f;t===void 0&&(t=g.Positioning.VerticalScrollBehavior.Bottom);i=$("li",this._$groupMembersContainer);u=n!==null&&n!==undefined&&i.length&&i.eq(n).length&&(this._selectedIndex!==n||!i.eq(this._selectedIndex).hasClass("selected"));u?(this._selectedIndex=n,i.removeClass("selected").attr("aria-selected","false").removeAttr("id"),r=i.eq(this._selectedIndex),f=r.attr("id")?r.attr("id"):o.getId().toString(),r.addClass("selected").attr({id:f,"aria-selected":"true"}),this._$liveStatus.text(d.format(p.IdentityPicker_SelectedMember,et.getDisplayName(this._groupMembers[n]))),g.Positioning.scrollIntoViewVertical(r,t)):$.isNumeric(n)&&(this._selectedIndex=n)},t.IDCARD_LOADED_EVENT="idcard-finished-loading",t.MAX_HEIGHT=240,t.IMAGE_MARGINS_PX=8,t.MEMBERS_TAB_LEFT_PADDING_PX=11,t.ID_CARD_LIST_CLASS="identity-picker-idcard-list",t.ID_CARD_MEMBERS_DROPDOWN_CLASS=lt.DROPDOWN_BASE_CLASS,t.JQUERY_UI_DIALOG_CLASS=".ui-dialog",t.ID_CARD_DIALOG_ID="idcard-dialog",t}(o.Control);t.IdCardDialog=wt;dt=function(n){function t(i,r){var u,f;return r===void 0&&(r=!1),u=n.call(this,i)||this,u._resolvedIEntity=null,u._loadOnCreate=!1,u._previousInput="",u._isSearchEverIssued=!1,u._readOnlyMode=!1,u._showMruExpander=!1,u._trackTabKeyDown=!1,u._queryTokensRequested={},u._onDocumentLoad=function(){u._$container.is(":visible")?u._recalculateInputWidth():setTimeout(u._onDocumentLoad,50)},u._recalculateInputWidth=function(){if(u._$input)if(u._controlWidth=Math.max(u._$container.width(),t.DEFAULT_WIDTH),u._$input.prev(".identity-picker-resolved")[0]){var n=u._$input.prev(".identity-picker-resolved"),f=u._$container[0].scrollHeight>u._$container.innerHeight(),i=u._$container.offset().left+Math.max(u._$container.outerWidth(),t.DEFAULT_WIDTH)-n.offset().left-n.outerWidth()-parseInt(n.css("margin-right"))-parseInt(u._$container.css("padding-right"))-parseInt(u._$container.css("border-right-width"))-(f?ft.SCROLL_BAR_WIDTH_PX:0)-(u._showMruExpander?t.TRIANGLE_WIDTH_PX:0)-1,r=u._$input.attr("placeholder").length;i>(r?r:15)*6?u._$input.outerWidth(i):u._$input.outerWidth(u._controlWidth-ft.SCROLL_BAR_WIDTH_PX-(u._showMruExpander?t.TRIANGLE_WIDTH_PX:0))}else u._$input.outerWidth(u._controlWidth-(u._showMruExpander?t.TRIANGLE_WIDTH_PX:0)-(u._options.smallScreenRender?u._$closeInput.outerWidth():0))},r||(f=i,f.dropdownContainer||(f.dropdownContainer=ut(u,function(){return $("body")})),u.initializeOptionsInternal(f)),u}return __extends(t,n),t.prototype.initializeOptionsInternal=function(n){if(this._identityType=n.identityType?n.identityType:{User:!0},this._operationScope=n.operationScope?n.operationScope:{IMS:!0},this._size=n.size!==null&&n.size!==undefined?n.size:st.Medium,this._dropdownContainerDelegate=n.dropdownContainer,this._preDropdownRender=this._options.callbacks&&n.callbacks.preDropdownRender?n.callbacks.preDropdownRender:null,this._onDirectorySearchFinished=this._options.callbacks&&n.callbacks.onDirectorySearchFinished?n.callbacks.onDirectorySearchFinished:null,this._loadOnCreate=n.loadOnCreate?n.loadOnCreate:!1,n.placeholderText&&n.placeholderText.trim())this._placeholderText=n.placeholderText;else{var t=a.ServiceHelpers.getIdentityTypeList(this._identityType);this._placeholderText=this._generatePlaceHolder(t)}this._controlLoaded=null;this._delaySearchTimeOutValue=n.delaySearchTimeoutValue||0},t.prototype.initialize=function(){var i=this,r,e,u,f,s,c;n.prototype.initialize.call(this);r=this._options.items;this._selectedItems=[];this._unresolvedItems=[];this._$currentlyFocusedItem=null;this._$container=this._element.parent();this._controlWidth=Math.max(this._$container.innerWidth(),t.DEFAULT_WIDTH);this._element.addClass("identity-picker-search-box");this._options.smallScreenRender&&this._element.addClass("small-screen");this._element.height(ft.getSizePx(this._size)+t.OUTER_PADDING_PX);e=function(n){$(n.target).hasClass("identity-picker-input")||$(n.target).hasClass("identity-picker-search-multiple-name")||$(n.target).hasClass(t.SEARCH_MRU_TRIANGLE_CLASS)||i.focusOnSearchInput()};this._element.on("click.identityPicker",ut(this,e));this._element.on("remove.identityPicker",ut(this,this.dispose));if(this._$input=$("<input>").attr("type","text").attr("spellcheck","false").attr("autocomplete","off").attr("placeholder",this._placeholderText).addClass("identity-picker-input").attr("role","combobox").attr("aria-autocomplete","list").attr("aria-expanded","false"),!this._options.required||this._$input.attr("required","true"),!this._options.ariaDescribedby||this._$input.attr("aria-describedby",this._getAriaDescribedby(this._options.ariaDescribedby)),this._options.excludeAriaLabel||this._$input.attr("aria-label",this._options.ariaLabel?this._options.ariaLabel:this._placeholderText),this._options.elementId&&this._$input.attr("id",this._options.elementId),this._$input.appendTo(this._element),ft.styleElementBySize(this._$input,this._size,!0),this._options.multiIdentitySearch&&(f=o.getId().toString(),u=$("<label>").addClass("visually-hidden").attr("id",f).appendTo(this._element),this._$input.attr("aria-describedby",this._getAriaDescribedby(f))),this._options.smallScreenRender&&(this._$closeInput=this._createCloseButton(),ft.styleElementBySize(this._$closeInput,this._size,!1),this._$closeInput.hide(),this._$closeInput.appendTo(this._element),this._$closeInput.mousedown(ut(this,function(n){i._setInputText("");i.focusOnSearchInput();i._recalculateInputWidth();n.preventDefault();i._$closeInput.hide()}))),this._options.showMruTriangle=this._options.forceOpen?!1:this._options.showMruTriangle,this._showMruExpander=this._options.showMruTriangle?!0:!1,this._isReadOnly()&&(this._showMruExpander=!1),this._showMruExpander){this._$mruTriangle=$("<span>").addClass(t.SEARCH_MRU_TRIANGLE_CLASS).addClass("bowtie-icon bowtie-triangle-down").appendTo(this._element);this._$mruTriangle.on("mousedown.identityPicker",ut(this,function(n){i._onMruTriangleMousedown(n)}));this._$mruTriangle.on("click.identityPicker",ut(this,function(n){i._onMruTriangleClick(n)}))}this._recalculateInputWidth();$(window).on("resize.identityPicker",ut(this,function(){i._recalculateInputWidth()}));this._$input.on("focus.identityPicker",ut(this,function(){i._$currentlyFocusedItem=null;i._options.multiIdentitySearch&&(i._selectedItems.length||i._unresolvedItems.length?u.text(d.format(p.IdentityPicker_SelectedIdentities,i._selectedItems.length+i._unresolvedItems.length)):u&&u.text(""));i._$container.triggerHandler("focus")}));if(this._options.showMruOnClick&&this._options.showMru)this._$input.on("mouseup.identityPicker",ut(this,function(n){i._identityPickerDropdown&&!i._identityPickerDropdown.isVisible()&&n.button===0&&i._showAllMruInDropdown(!1,!0)}));if(this._options.multiIdentitySearch&&(this._options.highlightResolved=!1,this._options.watermark=null),this._options.highlightResolved||(this._options.watermark=null),this._options.watermark&&this._showWatermark(),this._options.getFilterByScope||(this._options.getFilterByScope=function(){return null}),this._showContactCard=this._options.showContactCard==!1?!1:!0,a.ServiceHelpers.isAuthenticatedMember()){this._element.on("keydown.identityPicker",ut(this,this._onInputKeyDown));this._$input.on("keyup.identityPicker",ut(this,this._onInputKeyUp));this._$input.on("blur.identityPicker",ut(this,this._onInputBlur));this._$input.on("input.identityPicker",ut(this,this._onInputChange));this._$input.on("click.identityPicker",ut(this,this._onInputClick));this._externalEventDelegate=ut(this,this._onInputBlur);this._dropdownShowEventDelegate=ut(this,this._attachHandlersOnShowDropdown);this._dropdownHideEventDelegate=ut(this,this._detachHandlersOnHideDropdown);this._updateActiveDescendantIdEventDelegate=ut(this,this._updateActiveDescendantId);s=this._dropdownContainerDelegate();this._identityPickerDropdownUniqueId=ft.getRandomString();h.getService().attachEvent(lt.SHOW_DROPDOWN_EVENT_INTERNAL,this._dropdownShowEventDelegate);h.getService().attachEvent(lt.HIDE_DROPDOWN_EVENT_INTERNAL,this._dropdownHideEventDelegate);h.getService().attachEvent(lt.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantIdEventDelegate);c={pageSize:this._options.pageSize,useRemainingSpace:this._options.useRemainingSpace,smallScreenRender:this._options.smallScreenRender,dialogAppendTo:this._options.dialogAppendTo,onItemSelect:ut(this,function(n){if(i._resolveItem(n),i.focusOnSearchInput(),i._options.callbacks&&i._options.callbacks.onItemSelect)i._options.callbacks.onItemSelect(n)}),identityType:this._identityType,operationScope:this._operationScope,httpClient:this._options.httpClient?this._options.httpClient:null,showContactCard:this._showContactCard,showMru:this._isShowMruEnabledInDropdown(),showNoIdentitiesFound:this._options.showNoIdentitiesFound,getFilterByScope:this._options.getFilterByScope,preDropdownRender:this._preDropdownRender,onDirectorySearchFinished:this._onDirectorySearchFinished,loadOnCreate:this._loadOnCreate,extensionData:this._options.extensionData,size:this._options.dropdownSize!==null&&this._options.dropdownSize!==undefined?this._options.dropdownSize:st.Large,width:this._options.dropdownWidth,focusElementOnContactCardClose:this._$input,eventOptions:{uniqueId:this._identityPickerDropdownUniqueId},alignment:{positioningElement:this._$container},consumerId:this._options.consumerId};this._identityPickerDropdown=o.create(lt,s,c);this._attachHandlersOnShowDropdown({uniqueId:this._identityPickerDropdownUniqueId})}else this._showContactCard=!1,this._loadOnCreate=!1,this._options.showMru=!1,this._options.forceOpen=!1,this.enableReadOnlyMode();r&&((typeof r=="string"||r instanceof String)&&r?this.setEntities([],r.trim().split(";")):r instanceof Array&&r.length>0&&this.setEntities(r,[]));this._loadOnCreate&&this.load();this._options.forceOpen&&this._showAllMruInDropdownWithoutDefaultSelection();$(this._onDocumentLoad)},t.prototype.load=function(){var n=this;return this._controlLoaded?this._controlLoaded.promise:(this._controlLoaded=it.defer(),this._identityPickerDropdown.load().then(ut(this,function(){n._controlLoaded.resolve(!0)}),ut(this,function(){n._controlLoaded.resolve(!1)})))},t.prototype.getIdentitySearchResult=function(){return{resolvedEntities:this._selectedItems,unresolvedQueryTokens:this._unresolvedItems}},t.prototype.clear=function(){this._element&&(this._clearSearchControl(),!this._options.multiIdentitySearch&&this._options.watermark&&this._showWatermark())},t.prototype.isDropdownVisible=function(){return this._identityPickerDropdown&&this._identityPickerDropdown.isVisible()},t.prototype.isDropdownFiltered=function(){return this._identityPickerDropdown&&this._identityPickerDropdown.isFiltered()},t.prototype.addIdentitiesToMru=function(n){if(a.ServiceHelpers.isAuthenticatedMember()){var t=n.map(function(n){if(et.isDirectoryEntityType(n))return n.localId});this._identityPickerDropdown.addIdentitiesToMru(t)}},t.prototype.setEntities=function(n,t,i){var o=n?n.length:0,s=t?t.length:0,l,a,u,e,r,h,c,f;if(o+s!=0){if(!this._options.multiIdentitySearch&&o+s>1){l={source:"setEntities",message:"Can't set more than one entity for a single select control"};throw l;}if(a={UID:!0},s>0){if(u="",this._options.multiIdentitySearch||(u=t[0]?t[0].trim():u),this._options.showTemporaryDisplayName){this._options.watermark&&$(".identity-picker-resolved:has(> .identity-picker-watermark-name)",this._element).off(".identityPicker").remove();e=[];for(f in t)r=t[f].trim(),r.charAt(r.length-1)==">"&&r.indexOf("<")>=0?(h=r.substring(0,r.indexOf("<")-1).trim(),c=r.substring(r.indexOf("<")+1,r.length-1).trim(),e.push(c),this._createTemporaryItem(h,c.toLowerCase()),this._options.multiIdentitySearch||(u=h)):e.push(r);t=e}this._resolveInputToIdentities(t.join(";"),a,i,u)}if(o>0)for(f in n)n[f]&&this._resolveItem(n[f])}},t.prototype.getDropdownPrefix=function(){return this._identityPickerDropdown?this._identityPickerDropdown.getPrefix():""},t.prototype.showMruDropdown=function(){this._showMruExpander&&this._$mruTriangle.trigger("click")},t.prototype.focusOnSearchInput=function(){if(this._$currentlyFocusedItem=null,this._$input.is(":visible"))this._$input.focus();else{var n=$(".identity-picker-resolved:visible",this._element);n.length<=0?(this._$input.show(),this._$input.focus()):($(n[0]).focus(),this._$currentlyFocusedItem=$(n[0]))}this._$container.triggerHandler("focus")},t.prototype.enableReadOnlyMode=function(){this._readOnlyMode=!0;this._showMruExpander=!1;this._hideMruTriangle();this._$container.addClass("identity-picker-readonly");$(".identity-picker-resolved-name",this._element).removeAttr("tabindex");$(".identity-picker-watermark-name",this._element).removeAttr("tabindex");$(".identity-picker-resolved-close",this._element).hide();$(".identity-picker-resolved-name",this._element).attr("aria-label",d.format(p.ReadOnlyPrefix,this._options.ariaLabel?this._options.ariaLabel:this._placeholderText));this._element.removeAttr("aria-label");var n=$(".identity-picker-resolved",this._element);n.removeAttr("aria-describedby");n.attr("tabindex","-1");n.attr("aria-disabled","true");$("visually-hidden",n).remove();this._$input.attr("disabled","");this._$input.removeAttr("role");this._$input.removeAttr("aria-expanded")},t.prototype.disableReadOnlyMode=function(){this._readOnlyMode=!1;this._showMruExpander=this._options.showMruTriangle?!0:!1;this._showMruTriangle();this._$container.removeClass("identity-picker-readonly");this._element.attr("aria-label",this._options.ariaLabel?this._options.ariaLabel:this._placeholderText);$(".identity-picker-watermark-name",this._element).attr("tabindex","0");var t=$(".identity-picker-resolved",this._element),n=$(".identity-picker-resolved-name",this._element);n.length&&(this._options.highlightResolved&&n.attr("tabindex","0"),n.removeAttr("aria-label"),this._element.find(".identity-picker-resolved-close").show(),this._showContactCard&&!this._options.highlightResolved&&t.attr("aria-haspopup","true"));this._$input.removeAttr("disabled");this._$input.attr("role","combobox");this._$input.attr("aria-expanded","false");this._options.highlightResolved||t.attr("tabindex","0");this._setResolvedItemRole(t,n.text())},t.prototype.hasPendingRequests=function(){return this._queryTokensRequested&&Object.keys(this._queryTokensRequested).length>0},t.prototype.dispose=function(){this._detachHandlersOnHideDropdown({uniqueId:this._identityPickerDropdownUniqueId});this._dropdownShowEventDelegate&&h.getService().detachEvent(lt.SHOW_DROPDOWN_EVENT_INTERNAL,this._dropdownShowEventDelegate);this._dropdownHideEventDelegate&&h.getService().detachEvent(lt.HIDE_DROPDOWN_EVENT_INTERNAL,this._dropdownHideEventDelegate);this._updateActiveDescendantIdEventDelegate&&h.getService().detachEvent(lt.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantIdEventDelegate);this._identityPickerDropdown&&this._identityPickerDropdown.dispose();this._$input&&this._$input.off(".identityPicker");this._showMruExpander&&this._$mruTriangle&&this._$mruTriangle.off(".identityPicker");this._element&&this._element.off(".identityPicker");$(window).off("resize.identityPicker");n.prototype.dispose.call(this)},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=w.getService(yt)),this._entityOperationsFacade},t.prototype._isReadOnly=function(){return this._readOnlyMode||!a.ServiceHelpers.isAuthenticatedMember()},t.prototype._hideMruTriangle=function(){this._$mruTriangle&&this._$mruTriangle.addClass("identity-picker-element-hide")},t.prototype._showMruTriangle=function(){this._showMruExpander&&this._$mruTriangle&&this._$mruTriangle.removeClass("identity-picker-element-hide")},t.prototype._getAriaDescribedby=function(n){var t=this._$input.attr("aria-describedby");return t?t.concat(" "+n):n},t.prototype._resetSearchControl=function(n,t){n===void 0&&(n=!0);t===void 0&&(t=!0);this._options.watermark&&!this._options.forceOpen?n?this._showWatermark():this._clearWatermark():(this._$input.show(),this._recalculateInputWidth());this._showMruTriangle();t&&this.focusOnSearchInput()},t.prototype._clearSearchControl=function(){$(".identity-picker-resolved",this._element).off(".identityPicker").remove();this._queryTokensRequested={};this._options.multiIdentitySearch||this._resetSearchControl(!1,!1);this._selectedItems=[];this._unresolvedItems=[];this._$currentlyFocusedItem=null;this._resolvedIEntity=null;this._setInputText("");this._fireInvalidInput()},t.prototype._showAllMruInDropdownWithoutDefaultSelection=function(n){n===void 0&&(n=!0);this._showAllMruInDropdown(n,!1)},t.prototype._showAllMruInDropdown=function(n,t){var i=this,r;n===void 0&&(n=!0);t===void 0&&(t=!0);r=function(t){i._element&&((t&&t.length>0||n)&&i._showDropdown(),i._$input.off("input.identityPicker"),i.focusOnSearchInput(),k.delay(i,0,function(){i._$input.on("input.identityPicker",ut(i,i._onInputChange))}))};this._isSearchEverIssued=!0;this._identityPickerDropdown.showAllMruIdentities(t).then(r)},t.prototype._showProgressCursor=function(){this._fire(t.SEARCH_STARTED_EVENT,null);$(".identity-picker-input",this._element).css("cursor","progress")},t.prototype._stopProgressCursor=function(){this._fire(t.SEARCH_FINISHED_EVENT,null);$(".identity-picker-input",this._element).css("cursor","text")},t.prototype._fireInvalidInput=function(){this._fire(t.INVALID_INPUT_EVENT,null)},t.prototype._fireValidInput=function(){this._fire(t.VALID_INPUT_EVENT,null)},t.prototype._fireRemoveResolvedInput=function(n){this._fire(t.RESOLVED_INPUT_REMOVED_EVENT,n?!0:null)},t.prototype._updateActiveDescendantId=function(n){n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId&&this._$input.attr("aria-activedescendant",n.activeDescendantId)},t.prototype._isShowMruEnabledInDropdown=function(){return this._options.showMru||this._showMruExpander},t.prototype._attachHandlersOnShowDropdown=function(n){if(n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId){if(this._element)this._element.parents().on("scroll.identityPicker resize.identityPicker",ut(this,this._onInputBlur));this.isDropdownVisible()&&(this._$input.attr("aria-expanded","true"),this._$input.attr("aria-owns",this._identityPickerDropdown.getItemsListId()));h.getService().attachEvent(t.DIALOG_MOVE_EVENT,this._externalEventDelegate)}},t.prototype._detachHandlersOnHideDropdown=function(n){n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId&&(this._element&&this._element.parents().off("scroll.identityPicker resize.identityPicker"),this._$input.attr("aria-expanded","false"),this._$input.removeAttr("aria-activedescendant"),h.getService().detachEvent(t.DIALOG_MOVE_EVENT,this._externalEventDelegate))},t.prototype._hideDropdown=function(n){this._identityPickerDropdown&&!this._options.forceOpen&&(this._detachHandlersOnHideDropdown({uniqueId:this._identityPickerDropdownUniqueId}),this._identityPickerDropdown.hide(n),this._$input.removeAttr("aria-activedescendant"))},t.prototype._showDropdown=function(){this._attachHandlersOnShowDropdown({uniqueId:this._identityPickerDropdownUniqueId});this._identityPickerDropdown.show()},t.prototype._compareInputOnInputChangeEvent=function(n){return n=n?n:"",this._previousInput==n},t.prototype._setInputText=function(n){n=n?n:"";this._$input.val(n);this._previousInput=n;this._options.smallScreenRender&&n&&this._$closeInput.show()},t.prototype._resetPreviousInput=function(){this._previousInput=""},t.prototype._onInputChange=function(n){var i=this,t;this._delaySearchTimer||(t=function(){i._inputChangeActions(n)},this._delaySearchTimer=new k.DelayedFunction(this,this._delaySearchTimeOutValue,"inputFieldChanged",t));this._delaySearchTimer.reset()},t.prototype._inputChangeActions=function(n){var t=this.getInputText(),i,r,u,f;if(this._options.smallScreenRender&&(t?this._$closeInput.show():this._$closeInput.hide()),this._compareInputOnInputChangeEvent(t))return!0;if(t=t?t:"",this._previousInput=t,this._resolvedIEntity=null,this._recalculateInputWidth(),t&&t.indexOf(";")<=0?this._fireInvalidInput():this._fireInputValidityEvent(),!t||!this._options.multiIdentitySearch||t.indexOf(";")<0){if(this._isSearchEverIssued=!0,t&&!this._options.multiIdentitySearch){i=t.split(";");r="";for(u in i)if(f=i[u]?i[u].trim():"",f){r=f;break}t=r}return this._identityPickerDropdown.getIdentities(t),!0}this._resolveInputToIdentities(this.getInputText());n.stopPropagation()},t.prototype._onInputClick=function(n){var t=this.getInputText();t&&(this._isSearchEverIssued?this._showDropdown(n):this._options.showMru&&this._showAllMruInDropdown(!1))},t.prototype._onMruTriangleMousedown=function(n){n.preventDefault();n.stopPropagation()},t.prototype._onMruTriangleClick=function(n){if(this._isReadOnly())return!1;this.isDropdownVisible()?this._hideDropdown(n):this._showAllMruInDropdownWithoutDefaultSelection();this.focusOnSearchInput();n.stopPropagation()},t.prototype._isDropdownHovered=function(){return this._identityPickerDropdown.getElement()&&$(this._identityPickerDropdown.getElement()).filter(":hover").length>0},t.prototype._isContactCardHovered=function(){return $(".idcard-dialog").length>0&&$(".idcard-dialog").filter(":hover").length>0},t.prototype._onInputBlur=function(n){if(this._identityPickerDropdown&&!this._isDropdownHovered()&&!($(".idcard-dialog").length||$(".idcard-dialog-content").length)&&this._$input.is(":visible")){var t=!1;this._trackTabKeyDown&&(this.isDropdownVisible()&&this._identityPickerDropdown.getSelectedItem()&&(this._resolveSelectedItem(!0),t=!0),this._trackTabKeyDown=!1);this._options.highlightResolved&&!t&&(this._resolvedIEntity?this._resolveItem(this._resolvedIEntity):this._options.watermark&&!this.getInputText()&&(this._showWatermark(),this._showMruTriangle()));this.isDropdownVisible()&&this._hideDropdown(n);this._options.callbacks&&this._options.callbacks.onInputBlur&&this._options.callbacks.onInputBlur()}},t.prototype._focusOnResolvedItem=function(n){n.is(":visible")?(n.focus(),this._$container.triggerHandler("focus")):this.focusOnSearchInput()},t.prototype._onInputKeyDown=function(n){var i,t;if(!n||this._isReadOnly())return!0;if(n.keyCode===ot.ESCAPE&&this.isDropdownVisible()&&n.stopPropagation(),n.keyCode===ot.UP)return this.isDropdownVisible()&&this._identityPickerDropdown.handleKeyEvent(n),n.preventDefault(),!0;if(n.keyCode===ot.DOWN)return this._identityPickerDropdown&&(this._identityPickerDropdown.isVisible()?this._identityPickerDropdown.handleKeyEvent(n):this._isShowMruEnabledInDropdown()?this._showAllMruInDropdown():this._showDropdown(n)),n.preventDefault(),!0;if(n.keyCode===ot.TAB)return this._trackTabKeyDown=!0,!0;if(n.keyCode===ot.ENTER)return this.isDropdownVisible()?(this.focusOnSearchInput(),this._resolveSelectedItem(),!1):this._options.multiIdentitySearch&&this._$currentlyFocusedItem?(this._$currentlyFocusedItem.click(),!1):!0;if(n.keyCode===ot.RIGHT&&this._showContactCard&&this.isDropdownVisible()&&this._identityPickerDropdown.getSelectedItem()&&this._$input[0].selectionEnd==this._$input.val().length||n.keyCode===ot.DELETE&&this._isShowMruEnabledInDropdown()&&this.isDropdownVisible()&&(i=this._identityPickerDropdown.getSelectedItem(),i&&i.isMru&&et.isDirectoryEntityType(i)))return this._identityPickerDropdown.handleKeyEvent(n),n.preventDefault(),!1;if(!this._$currentlyFocusedItem&&this._$input[0]===document.activeElement&&this._$input[0].selectionStart>0)return!0;if(this._options.callbacks&&this._options.callbacks.onKeyPress)this._options.callbacks.onKeyPress(n.keyCode);switch(n.keyCode){case ot.LEFT:return this._options.multiIdentitySearch?this._$currentlyFocusedItem&&this._$currentlyFocusedItem.prev(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem.blur(),this._$currentlyFocusedItem=this._$currentlyFocusedItem.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem),!1):!this._$currentlyFocusedItem&&(this._selectedItems&&this._selectedItems.length>0||this._unresolvedItems&&this._unresolvedItems.length>0)&&this._$input[0]===document.activeElement&&!this._$input[0].selectionStart?(this._$currentlyFocusedItem=this._$input.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem),!1):!0:!0;case ot.RIGHT:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(this._$currentlyFocusedItem.blur(),this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),!1):!0:!0;case ot.BACKSPACE:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(t=this._$currentlyFocusedItem,this._$currentlyFocusedItem.prev(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),this._removeFromResolved(t.attr("data-signin")),this._removeFromUnresolved(t.attr("data-signin")),t.off(".identityPicker").remove(),this._recalculateInputWidth(),!1):(this._selectedItems&&this._selectedItems.length>0||this._unresolvedItems&&this._unresolvedItems.length>0)&&this._$input[0]===document.activeElement&&!this._$input[0].selectionStart?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._removeFromUnresolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").off(".identityPicker").remove(),this._recalculateInputWidth(),!1):!0:this._selectedItems&&this._selectedItems.length>0?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").off(".identityPicker").remove(),this._resetSearchControl(),!1):!0;case ot.DELETE:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(t=this._$currentlyFocusedItem,this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),this._removeFromResolved(t.attr("data-signin")),this._removeFromUnresolved(t.attr("data-signin")),t.off(".identityPicker").remove(),this._recalculateInputWidth(),!1):!0:this._selectedItems&&this._selectedItems.length>0?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").off(".identityPicker").remove(),this._resetSearchControl(),!1):!0;case ot.SPACE:return this._options.multiIdentitySearch&&this._$currentlyFocusedItem?(this._$currentlyFocusedItem.click(),!1):!0;default:return!0}},t.prototype._fireInputValidityEvent=function(){!this.getInputText().length&&this._selectedItems&&this._selectedItems.length>0&&(!this._unresolvedItems||!this._unresolvedItems.length)?this._fireValidInput():this._fireInvalidInput()},t.prototype._resolveSelectedItem=function(n){if(n===void 0&&(n=!1),this.isDropdownVisible()){var t=this._identityPickerDropdown.getSelectedItem();if(t&&(this._resolveItem(t,!0,null,n),this._options.callbacks&&this._options.callbacks.onItemSelect))this._options.callbacks.onItemSelect(t)}},t.prototype._onInputKeyUp=function(n){return n&&n.keyCode!==ot.DOWN&&n.keyCode!==ot.UP&&n.keyCode!==ot.RIGHT&&this._identityPickerDropdown&&this._identityPickerDropdown.handleKeyEvent(n),!0},t.prototype._removeFromUnresolved=function(n){for(var i=this._getSearchPrefix(n).toLowerCase(),t=this._unresolvedItems.indexOf(i);t>=0;)this._unresolvedItems.splice(t,1),t=this._unresolvedItems.indexOf(i);this._fireInputValidityEvent()},t.prototype._removeFromResolved=function(n,t){function r(t){var i=et.getUniqueIdentifierForDisambiguation(t);return i.toLowerCase()===n.toLowerCase()?($(".idcard-dialog").each(function(){if($(this).is(":visible")&&$(this).attr("data-prefix")&&n.toLowerCase().indexOf($(this).attr("data-prefix").toLowerCase())===0)return $(".ui-dialog-content",$(this)).dialog("close"),!1}),!1):!0}var i=this._selectedItems.filter(r);i.length!=this._selectedItems.length&&(this._selectedItems=i,this._fireInputValidityEvent(),this._fireRemoveResolvedInput(t))},t.prototype.getInputText=function(){return this._$input.val().trim()},t.prototype._resolveInputToIdentities=function(n,i,r,u){var f=this,b=function(n){if(f._element){if(!n||!n.queryToken||!n.identities){v();return}if(n.identities.length!=1)if(i&&i.UID){var e=d.htmlEncode(n.queryToken),r={entityId:t.INACTIVE_ENTITY_ID_PREFIX+"_"+e,entityType:t.INACTIVE_ENTITY_TYPE,originDirectory:ft.VisualStudioDirectory,originId:t.INACTIVE_ORIGIN_ID_PREFIX+"_"+e,isMru:!1,active:!1,displayName:u?u:n.queryToken,signInAddress:n.queryToken,samAccountName:ft.isOnPremiseEnvironment()&&n.queryToken.indexOf("\\")>=0?n.queryToken.split("\\",2)[1]:"",scopeName:ft.isOnPremiseEnvironment()&&n.queryToken.indexOf("\\")>=0?n.queryToken.split("\\",1)[0]:""};r.image=a.ServiceHelpers.getDefaultIdentityImage(r);f._resolveItem(r,!1,n.queryToken)}else f._fireInvalidInput();else n.queryToken.toLowerCase().trim()in f._queryTokensRequested&&f._resolveItem(n.identities[0],!1,n.queryToken);f._hideDropdown();f._stopProgressCursor()}},v=function(n){f._element&&(f._stopProgressCursor(),f._fireValidInput());n&&s.logError("_resolveInputToIdentities/getIdentitiesErrorCallback:"+JSON.stringify(n))},p=n.split(a.ServiceHelpers.GetIdentities_Prefix_Separator),o=[],y,h,w,k,e,g,nt,c;for(h in p)y=p[h]?p[h].trim():"",y.length>0&&(o.push(y),this._unresolveItem(y));this._options.multiIdentitySearch||(this._queryTokensRequested={});for(h in o)this._queryTokensRequested[o[h].toLowerCase().trim()]=!0;if(w=o.length,w)for(this._showProgressCursor(),k=function(){var n=o.slice(50*c,50*c+50);g={identityServiceOptions:{operationScope:r?r:e._operationScope,identityType:e._identityType,httpClient:e._options.httpClient,extensionData:e._options.extensionData},identityExtensionOptions:{consumerId:e._options?e._options.consumerId:l.ConsumerId.UnknownConsumer},prefix:n.join(";"),queryTypeHint:i,sources:[ct.Directory],filterByScope:e._options.getFilterByScope()};nt=e._getEntityOperationsFacade().search(g).then(function(t){if(f._options.retainInputIdentitiesSequenceWithinPage)f._resolveIdentityResponseInSequence(t,n,b,v);else for(var i in t.queryTokenResponse)t.queryTokenResponse[i].then(b,v)},v)},e=this,c=0;c<=w/50;c++)k()},t.prototype._resolveIdentityResponseInSequence=function(n,i,r,u){var o=this,f=[];for(var e in n.queryTokenResponse)n.queryTokenResponse.hasOwnProperty(e)&&f.push(n.queryTokenResponse[e]);it.allSettled(f).then(function(n){for(var a,e,v,k,f,s,y,d,p=[],w=[],c=0,b=n;c<b.length;c++)f=b[c],f.state===l.PromiseResultStatus.Fulfilled?p.push(f.value):f.state===l.PromiseResultStatus.Rejected&&w.push(f.reason);for(a={},p.forEach(function(n){return a[n.queryToken]=n}),e=0,v=i;e<v.length;e++)k=v[e],f=a[k],f&&r(f);for(s=0,y=w;s<y.length;s++)d=y[s],u(d);h.getService().fire(t.SEQUENCED_IDENTITIES_IN_PAGE_RESOLVED_EVENT_INTERNAL,o)},u)},t.prototype._replaceAndCleanup=function(n){for(var i=!1,t=new RegExp("(( *;+ *)+|^ *)("+n.replace(/[.^$*+?()[{\\|\]-]/g,"\\$&")+")(( *;+ *)+| *$)","gi");this.getInputText().search(t)>=0;)this._setInputText(this.getInputText().replace(t,";")),i=!0;return t=new RegExp("^( *;+ *)+$"),this.getInputText().search(t)||this._setInputText(""),i},t.prototype._findInSelectedItems=function(n){var i=-1,t,r;if(!n)return i;for(t=0,r=this._selectedItems.length;t<r;t++)if(this._selectedItems[t].entityId===n.entityId){i=t;break}return i},t.prototype._showIdCardDialog=function(n){if(this._showContactCard&&a.ServiceHelpers.isAuthenticatedMember()){var t={identity:n.identity,anchor:n.anchor,leftValue:n.leftValue,topValue:n.topValue,operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null,consumerId:this._options.consumerId,appendTo:this._options.dialogAppendTo,useOfficeFabricProfileCard:this._options.useOfficeFabricProfileCard};o.Enhancement.enhance(wt,"<div/>",t)}},t.prototype._clearWatermark=function(){this.isDropdownVisible()&&this._hideDropdown();!this._options.forceOpen&&this._identityPickerDropdown&&this._identityPickerDropdown.reset();this._$input.hide();this._options.smallScreenRender&&this._$closeInput.hide();this._setInputText("")},t.prototype._showWatermark=function(){var n=this,l=this._isControlInFocus(),r,i,f,o,s,h,u,e,c;this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH);this._clearWatermark();r=this._options.watermark;i=$("<span>").addClass("identity-picker-resolved").addClass("identity-picker-resolved-single-search");i.attr("tabindex","-1");i.blur(ut(this,function(t){n._identityPickerDropdown&&!n._isDropdownHovered()&&!n._isContactCardHovered()&&i.is(":visible")&&(n.isDropdownVisible()&&n._hideDropdown(t),n._options.callbacks&&n._options.callbacks.onInputBlur&&n._options.callbacks.onInputBlur())}));ft.styleElementBySize(i,this._size,!0);this._options.smallScreenRender?f=$("<span>").addClass("icon identity-picker-text-search-icon bowtie-icon bowtie-search"):(s=a.ServiceHelpers.getDefaultIdentityImage(r),r.image&&(o=r.image),f=ft.createImgElement(s,o,"user-picture-resolved",r.entityId));ft.styleElementBySize(f,this._size,!1);h=et.getDisplayName(r);u=$("<span>").addClass("identity-picker-watermark-name").addClass("text-cursor").text(h);i.append(f).append(u).insertBefore(this._$input);i.width(this._controlWidth-t.OUTER_PADDING_PX-(this._showMruExpander?t.TRIANGLE_WIDTH_PX:0));u.attr("tabindex","0");e=function(t){t.stopPropagation();i.off(".identityPicker").remove();n._$input.show();n._showMruTriangle();n._recalculateInputWidth();n.focusOnSearchInput();n._setInputText("")};u.on("focus.identityPicker",ut(this,function(t){if(n._isReadOnly())return!1;e(t)}));i.on("mousedown.identityPicker",ut(this,function(t){if(n._isReadOnly())return!1;t.preventDefault();e(t);n._showAllMruInDropdown(!1)}));l&&this.focusOnSearchInput();this._options.callbacks&&this._options.callbacks.getCustomTooltip&&(c=ft.createTooltip(r,this._options.callbacks.getCustomTooltip()),rt.RichContentTooltip.add(c,u,{showOnFocus:!this._options.smallScreenRender}))},t.prototype._createTemporaryItem=function(n,t){var i=$("<span>").addClass("identity-picker-resolved identity-picker-temp").attr("data-signin",ft.replaceBackslash(t)).attr("tabindex","-1"),u,r;ft.styleElementBySize(i,this._size,!0);u=ft.createImgElement(a.ServiceHelpers.DefaultUserImage,"","user-picture-resolved");ft.styleElementBySize(u,this._size,!1);r=$("<span>").addClass("identity-picker-resolved-name").text(n);this._options.multiIdentitySearch?(i.addClass("identity-picker-resolved-bg"),r.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([]))):(i.addClass("identity-picker-resolved-single-search"),this._options.highlightResolved||(i.attr("tabindex","0"),i.addClass("identity-picker-resolved-single-bg")),$(".identity-picker-resolved",this._element).off(".identityPicker").remove());this._options.highlightResolved&&r.addClass("text-cursor");i.append(u).append(r).insertBefore(this._$input);this._options.multiIdentitySearch?this._recalculateInputWidth():(this._$input.hide(),this._options.smallScreenRender&&this._$closeInput.hide());this._isControlInFocus()&&this.focusOnSearchInput();this._options.callbacks&&this._options.callbacks.getCustomTooltip&&rt.RichContentTooltip.add(n,r,{showOnFocus:!this._options.smallScreenRender})},t.prototype._isControlInFocus=function(){var n=$(document.activeElement);return n.length>0&&(this._element.is(n[0])||this._element.has(n[0]).length>0)},t.prototype._createResolvedItem=function(n){var t=$("<span>").addClass("identity-picker-resolved").attr("data-signin",ft.replaceBackslash(n));return this._isReadOnly()||t.attr("tabindex","-1"),this._options.multiIdentitySearch?t.addClass("identity-picker-resolved-bg"):(t.addClass("identity-picker-resolved-single-search"),this._showMruExpander&&this._options.highlightResolved&&t.addClass("identity-picker-drop-icon-padding"),this._options.highlightResolved||(t.attr("tabindex","0"),!this._options.ariaDescribedby||t.attr("aria-describedby",this._getAriaDescribedby(this._options.ariaDescribedby)),t.addClass("identity-picker-resolved-single-bg"))),t},t.prototype._setResolvedItemRole=function(n,t){n.attr("role","button").attr("aria-disabled","false").attr("aria-label",d.format(p.IdentityPicker_ButtonResolvedItemLabel,d.htmlEncodeJavascriptAttribute(t)));var i=o.getId().toString(),r=$("<div>").attr("id",i).addClass("visually-hidden").appendTo(n);n.attr("aria-describedby",this._getAriaDescribedby(i));this._options.highlightResolved?r.text(p.IdentityPicker_FocusChangeValue):r.text(d.format(p.IdentityPicker_ButtonResolvedItemDescription,d.htmlEncodeJavascriptAttribute(t))+". "+(this._showContactCard&&!this._options.highlightResolved?p.IdentityPicker_EnterSpaceMessage+". ":"")+p.IdentityPicker_DeleteBackspaceMessage)},t.prototype._resolveItem=function(n,i,r,u){var f=this,k,h,l,e,g,nt,v,c,o,s,b,y,w;if(i===void 0&&(i=!0),r===void 0&&(r=null),u===void 0&&(u=!1),this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH),n){if(k=this._isControlInFocus(),!this._options.multiIdentitySearch&&this._selectedItems&&this._selectedItems.length>0&&this._clearSearchControl(),this.isDropdownVisible()&&this._hideDropdown(),!this._options.forceOpen&&(this._options.multiIdentitySearch||!this._options.highlightResolved)&&this._identityPickerDropdown&&this._identityPickerDropdown.reset(),this._resetPreviousInput(),i&&this._setInputText(""),h=r?this._getSearchPrefix(r):"",h&&(this._replaceAndCleanup(h.toLowerCase()),this._removeFromUnresolved(h.toLowerCase()),this._element.find('.identity-picker-resolved[data-signin="'+ft.replaceBackslash(h.toLowerCase())+'"][data-unresolved="true"]').off(".identityPicker").remove()),this._options.showTemporaryDisplayName&&(this._options.multiIdentitySearch?this._element.find('.identity-picker-temp[data-signin="'+ft.replaceBackslash(h.toLowerCase())+'"]').remove():$(".identity-picker-temp",this._element).remove()),this._findInSelectedItems(n)!=-1){this._fireInputValidityEvent();return}if(this._selectedItems.push(n),$(".ui-dialog-content",$(".idcard-dialog:visible")).dialog("close"),l=et.getUniqueIdentifierForDisambiguation(n),this._$input.width(10),e=this._createResolvedItem(l.toLowerCase()),ft.styleElementBySize(e,this._size,!0),nt=a.ServiceHelpers.getDefaultIdentityImage(n),n.image&&(g=n.image),v=ft.createImgElement(nt,g,"user-picture-resolved",n.entityId),ft.styleElementBySize(v,this._size,!1),c=et.getDisplayName(n),this._options.smallScreenRender&&this._$closeInput.hide(),o=this._createCloseButton(),this._options.multiIdentitySearch&&o.addClass("identity-picker-resolved-bg"),this._options.highlightResolved||o.addClass("identity-picker-resolved-single-bg"),ft.styleElementBySize(o,this._size,!1),o.click(ut(this,function(n){if(f._removeFromResolved(l.toLowerCase(),!0),e.off(".identityPicker").remove(),f._identityPickerDropdown&&f._identityPickerDropdown.updatePrefix(""),f._resolvedIEntity=null,!f._options.multiIdentitySearch){f._resetSearchControl();return}f._recalculateInputWidth();f.focusOnSearchInput();n.stopPropagation()})),e.append(v).append(o).insertBefore(this._$input),s=$("<span>").addClass("identity-picker-resolved-name").text(c),this._readOnlyMode&&s.attr("aria-label",d.format(p.ReadOnlyPrefix,this._options.ariaLabel?this._options.ariaLabel:this._placeholderText)),this._options.multiIdentitySearch&&s.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([v,o])),this._options.highlightResolved?s.addClass("text-cursor"):et.isDirectoryEntityType(n)&&s.addClass("pointer-cursor"),n.active!==!1||et.isAadGroup(n)||s.addClass("identity-picker-inactive-name"),this._isReadOnly()?o.hide():this._setResolvedItemRole(e,c),e.append(s),this._options.multiIdentitySearch?this._recalculateInputWidth():(this._$input.hide(),this._options.smallScreenRender&&this._$closeInput.hide(),this._showMruExpander&&this._hideMruTriangle(),this._options.watermark&&$(".identity-picker-resolved:has(> .identity-picker-watermark-name)",this._element).off(".identityPicker").remove(),this._options.highlightResolved&&!this._isReadOnly()&&s.attr("tabindex","0")),b=function(t){t.stopPropagation();f._resolvedIEntity=n;f._removeFromResolved(l.toLowerCase());e.off(".identityPicker").remove();f._$input.show();f._showMruTriangle();f._recalculateInputWidth();f.focusOnSearchInput();f._setInputText(c);f._identityPickerDropdown&&f._identityPickerDropdown.updatePrefix(c);f._$input.select()},this._options.highlightResolved)s.on("focus.identityPicker",ut(this,function(n){if(f._isReadOnly())return!1;b(n)}));y=function(t){if($.contains(o[0],t.target)||o[0]===t.target)return!0;if(f._isReadOnly())return!1;if(w)return w=!1,!1;if(w=!0,t.preventDefault(),f._options.highlightResolved)b(t);else if(t.stopPropagation(),et.isDirectoryEntityType(n)){f._showIdCardDialog({anchor:e,identity:n,leftValue:0,consumerId:f._options.consumerId});var i=function(n){n.stopPropagation();e.off("click.identityPicker",i)};e.on("click.identityPicker",i)}f._options.highlightResolved&&f._showAllMruInDropdownWithoutDefaultSelection(!1)};w=!1;e.on("mousedown.identityPicker",ut(this,function(n){y(n)}));e.on("click.identityPicker",ut(this,function(n){y(n)}));if(!this._options.multiIdentitySearch&&!this._options.highlightResolved)e.on("keypress.identityPicker",ut(this,function(n){n&&n.keyCode===ot.ENTER&&y(n)}));e.blur(ut(this,function(n){f._identityPickerDropdown&&!f._isDropdownHovered()&&!f._isContactCardHovered()&&e.is(":visible")&&(f.isDropdownVisible()&&f._hideDropdown(n),f._options.callbacks&&f._options.callbacks.onInputBlur&&f._options.callbacks.onInputBlur())}));this._isReadOnly()||!this._showContactCard||this._options.highlightResolved||e.attr("aria-haspopup","true");this._fireInputValidityEvent();this._$container[0].scrollTop=this._$container[0].scrollHeight;k&&!u&&this.focusOnSearchInput();this._options.highlightResolved&&a.ServiceHelpers.isAuthenticatedMember()&&rt.RichContentTooltip.add(ft.createTooltip(n),s,{showOnFocus:!this._options.smallScreenRender})}},t.prototype._getItemNameContainerMaxWidth=function(n){var t=this._controlWidth-ft.SCROLL_BAR_WIDTH_PX;for(var i in n)n.hasOwnProperty(i)&&(t-=parseInt(n[i].css("width"),10));return t},t.prototype._createCloseButton=function(){var n=$("<span>").addClass("identity-picker-resolved-close-icon bowtie-icon");return n.addClass(this._options.smallScreenRender?"bowtie-edit-remove":"bowtie-edit-delete"),$("<span>").addClass("identity-picker-resolved-close").append(n)},t.prototype._getSearchPrefix=function(n){var t=/^.*[(<{\[]\s*([^\s]+@[^\s]+\.[^\s]+[^)>}\]])\s*[)>}\]]+\s*$/.exec(n);return t&&t[0]===n?t[1]:n},t.prototype._unresolveItem=function(n){var e=this,u,i,s,r,f,h,c;if(this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH),this._resetPreviousInput(),n){if(u=this._getSearchPrefix(n),this._unresolvedItems.indexOf(u.toLowerCase())!=-1){this._replaceAndCleanup(n.toLowerCase());return}if(!this._replaceAndCleanup(n.toLowerCase()))return;this._options.showTemporaryDisplayName&&(this._options.multiIdentitySearch?this._element.find('.identity-picker-temp[data-signin="'+ft.replaceBackslash(u.toLowerCase())+'"]').remove():$(".identity-picker-temp",this._element).remove());this._fireInvalidInput();this._unresolvedItems.push(u.toLowerCase());this._$input.width(10);i=this._createResolvedItem(u.toLowerCase()).attr("data-unresolved","true");ft.styleElementBySize(i,this._size,!0);s=$("<span>").addClass("identity-picker-resolved-close-icon bowtie-icon bowtie-edit-delete");s.addClass(this._options.smallScreenRender?"bowtie-edit-remove":"bowtie-edit-delete");r=$("<span>").addClass("identity-picker-resolved-close").append(s);this._options.multiIdentitySearch?r.addClass("identity-picker-resolved-bg"):this._options.highlightResolved||r.addClass("identity-picker-resolved-single-bg");ft.styleElementBySize(r,this._size,!1);r.click(ut(this,function(){e._removeFromUnresolved(n.toLowerCase());i.off(".identityPicker").remove();e._recalculateInputWidth();e.focusOnSearchInput()}));i.append(r).insertBefore(this._$input);f=$("<span>").addClass("identity-picker-unresolved-name").text(d.decodeHtmlSpecialChars(n));this._options.multiIdentitySearch&&f.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([r]));i.attr("role","button").attr("aria-label",d.format(p.IdentityPicker_ButtonUnresolvedItemLabel,n));h=o.getId().toString();c=$("<div>").attr("id",h).addClass("visually-hidden").appendTo(i);c.text(d.format(p.IdentityPicker_ButtonUnresolvedItemDescription,n)+". "+p.IdentityPicker_DeleteBackspaceMessage);i.attr("aria-describedby",h);i.append(f);this._recalculateInputWidth();this.focusOnSearchInput();this._$container[0].scrollTop=this._$container[0].scrollHeight;rt.RichContentTooltip.add(p.IdentityPicker_UnresolvedIdentity+": "+n,f,{showOnFocus:!this._options.smallScreenRender})}},t.prototype._generatePlaceHolder=function(n){return this._isInArray(a.ServiceHelpers.UserEntity,n)&&this._isInArray(a.ServiceHelpers.GroupEntity,n)?p.IdentityPicker_PlaceholderTextUserGroup:this._isInArray(a.ServiceHelpers.UserEntity,n)&&!this._isInArray(a.ServiceHelpers.GroupEntity,n)?p.IdentityPicker_PlaceholderTextUser:!this._isInArray(a.ServiceHelpers.UserEntity,n)&&this._isInArray(a.ServiceHelpers.GroupEntity,n)?p.IdentityPicker_PlaceholderTextGroup:p.IdentityPicker_PlaceholderTextPrefix},t.prototype._isInArray=function(n,t){return t.indexOf(n)>=0},t.INVALID_INPUT_EVENT="identity-picker-search-invalid-input",t.VALID_INPUT_EVENT="identity-picker-search-valid-input",t.RESOLVED_INPUT_REMOVED_EVENT="identity-picker-resolved-input-removed",t.SEARCH_STARTED_EVENT="identity-picker-search-started",t.SEARCH_FINISHED_EVENT="identity-picker-search-finished",t.DIALOG_MOVE_EVENT="dialog-move",t.SEQUENCED_IDENTITIES_IN_PAGE_RESOLVED_EVENT_INTERNAL="identity-picker-sequenced-identities-in-page-resolved-internal",t.SEARCH_MRU_TRIANGLE_CLASS="identity-picker-search-drop-icon",t.DEFAULT_WIDTH=140,t.OUTER_PADDING_PX=2,t.TRIANGLE_WIDTH_PX=19,t.NAME_PADDING_PX=8,t.INACTIVE_ENTITY_TYPE="inactive_entitytype",t.INACTIVE_ENTITY_ID_PREFIX="INACTIVE_ENTITY_ID",t.INACTIVE_ORIGIN_ID_PREFIX="INACTIVE_ORIGIN_ID",t}(o.Control);t.IdentityPickerSearchControl=dt,function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large"}(st=t.IdentityPickerControlSize||(t.IdentityPickerControlSize={})),function(n){n[n.AvatarText=0]="AvatarText";n[n.AvatarOnly=1]="AvatarOnly";n[n.TextOnly=2]="TextOnly"}(pt=t.EDisplayControlType||(t.EDisplayControlType={})),function(n){n[n.ExpiredAccessToken=0]="ExpiredAccessToken";n[n.IsGuestUser=1]="IsGuestUser"}(kt||(kt={}));gt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._displayedEntity=null,i._identityType=t.identityType?t.identityType:{User:!0},i._operationScope=t.operationScope?t.operationScope:{IMS:!0},i._size=t.size!==null&&t.size!==undefined?t.size:st.Medium,i._turnOffHover=t.turnOffHover?t.turnOffHover:!1,i}return __extends(t,n),t.prototype.initialize=function(){var t,i;if(n.prototype.initialize.call(this),a.ServiceHelpers.isAuthenticatedMember()||(this._turnOffHover=!0),t=this._options.item,!t||(typeof t=="string"||t instanceof String)&&!t.trim()){i={source:"IdentityDisplayControl.initialize()",message:"The item argument to the IdentityDisplayControl cannot be null or empty"};throw i;}this._displayType=this._options.displayType?this._options.displayType:pt.AvatarText;(typeof t=="string"||t instanceof String)&&t?(t=t.trim(),this._displayString(t),this._resolveStringToEntity(t)):this._displayEntity(t,"")},t.prototype.getDisplayedEntity=function(){if(this._displayedEntity)return this._displayedEntity;throw{source:"getResolvedEntity",message:"No resolved entity found."};},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=w.getService(yt)),this._entityOperationsFacade},t.prototype._resolveStringToEntity=function(n){var t=this,r=function(i){if(t._element){if(!i||!i.queryToken||!i.identities)return;if(i.identities.length!=1)return;t._getEntityOperationsFacade().queryTokenEntityImageCache.set(n,i.identities[0].image);t._displayEntity(i.identities[0],n)}},i=function(n){n&&s.logWarning("_resolveStringToEntity/getIdentitiesErrorCallback:"+JSON.stringify(n))},u={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:l.ConsumerId.UnknownConsumer},prefix:n,queryTypeHint:{UID:!0},sources:[ct.Directory]},f=this._getEntityOperationsFacade().search(u).then(function(n){for(var u in n.queryTokenResponse)n.queryTokenResponse[u].then(ut(t,r),ut(t,i))},i)},t.prototype._showIdCardDialog=function(n){a.ServiceHelpers.isAuthenticatedMember()&&o.Enhancement.enhance(wt,"<div/>",{identity:n.identity,anchor:n.anchor,leftValue:n.leftValue,operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null,consumerId:this._options.consumerId,appendTo:this._options.dialogAppendTo})},t.prototype._displayString=function(n){var t=$("<span>").addClass("identity-picker-display").attr("data-item",n).attr("tabindex","-1"),i,r,u,f;this._turnOffHover||rt.RichContentTooltip.add(this._options.friendlyDisplayName?this._options.friendlyDisplayName+" <"+n+">":n,t);ft.styleElementBySize(t,this._size,!0);i=null;this._displayType!=pt.TextOnly&&(r=this._getEntityOperationsFacade().queryTokenEntityImageCache.get(n),u=r?r:a.ServiceHelpers.DefaultUserImage,i=ft.createImgElement(u,"","user-picture-resolved"),ft.styleElementBySize(i,this._size,!1),t.append(i));this._displayType!=pt.AvatarOnly?(f=$("<span>").addClass("identity-picker-resolved-name").text(this._options.friendlyDisplayName?this._options.friendlyDisplayName:n),t.append(f)):i.attr("alt",this._options.friendlyDisplayName?this._options.friendlyDisplayName+" <"+n+">":n);t.appendTo(this._element)},t.prototype._displayEntity=function(n,i){var r=this,f,o,c,h,l,v;if(n){this._displayedEntity=n;var e=et.getDisplayName(this._displayedEntity),y=et.getUniqueIdentifierForDisambiguation(this._displayedEntity),u=$("<span>").addClass("identity-picker-display").attr("data-signin",ft.replaceBackslash(y.toLowerCase())).attr("tabindex","-1");ft.styleElementBySize(u,this._size,!0);f=null;o=null;this._displayType!=pt.TextOnly&&(c=a.ServiceHelpers.getDefaultIdentityImage(this._displayedEntity),f=ft.createImgElement(c,this._displayedEntity.image?this._displayedEntity.image:"","user-picture-resolved",this._displayedEntity.entityId),ft.styleElementBySize(f,this._size,!1),u.append(f));this._displayType!=pt.AvatarOnly?(o=$("<span>").addClass("identity-picker-resolved-name").text(e),$('.identity-picker-display[data-item="'+i+'"]',this._element).remove(),u.append(o)):(h=et.getSignInAddress(this._displayedEntity),f.attr("alt",e!==h?e+" <"+h+">":e));l=function(){var n=$('.idcard-dialog[data-objectid="'+r._displayedEntity.entityId+'"]');n.length&&$(".ui-dialog-content",n).dialog("close")};v=function(){r._hoverIdCardEnterTimer=new k.DelayedFunction(r,t.DEFAULT_HOVER_WAIT_ENTER_INTERVAL,"showDisplayControlContactCard",function(){r._element.parent().length>0&&r._element.is(":visible")&&r._showIdCardDialog({anchor:u,identity:r._displayedEntity,leftValue:0,consumerId:r._options.consumerId})})};!this._turnOffHover&&et.isDirectoryEntityType(this._displayedEntity)&&u.hover(function(){r._hoverIdCardEnterTimer?r._hoverIdCardEnterTimer.reset():(v(),r._hoverIdCardEnterTimer.start())},function(){r._hoverIdCardEnterTimer&&r._hoverIdCardEnterTimer.cancel();var n=$('.idcard-dialog[data-objectid="'+r._displayedEntity.entityId+'"]'),i=function(){r._hoverIdCardExitTimer?r._hoverIdCardExitTimer.reset():(r._hoverIdCardExitTimer=new k.DelayedFunction(r,t.DEFAULT_HOVER_WAIT_EXIT_INTERVAL,"closeDisplayControlContactCard",l),r._hoverIdCardExitTimer.start())};n&&n.length&&n.mouseenter(function(){r._hoverIdCardExitTimer.cancel();n.mouseleave(function(){i()})});i()});this._element.empty();u.appendTo(this._element)}},t.DEFAULT_HOVER_WAIT_ENTER_INTERVAL=800,t.DEFAULT_HOVER_WAIT_EXIT_INTERVAL=200,t.MIN_WIDTH=100,t.OUTER_PADDING_PX=2,t}(o.Control);t.IdentityDisplayControl=gt;ft=function(){function n(){}return n.styleElementBySize=function(n,t,i){i===void 0&&(i=!0);switch(t){case st.Small:i?n.addClass("element-height-small"):n.addClass("element-2d-small");n.hasClass("identity-picker-resolved-single-search")&&n.addClass("element-height-small-compensate-padding");break;case st.Medium:i?n.addClass("element-height-medium"):n.addClass("element-2d-medium");n.hasClass("identity-picker-resolved-single-search")&&n.addClass("element-height-medium-compensate-padding");break;case st.Large:i?n.addClass("element-height-large"):n.addClass("element-2d-large");n.hasClass("identity-picker-resolved-single-search")&&n.addClass("element-height-large-compensate-padding")}},n.createImgElement=function(n,t,i,r){t===void 0&&(t="");i===void 0&&(i="");r===void 0&&(r="");var u=$("<img>").css("background","url('".concat(n,"') no-repeat")).css("background-size","100%").attr("src",t?t:n).attr("alt","").attr("draggable","false").on("dragstart",function(){return!1});u.on("error",function(){u.attr("src")&&u.attr("src")===n?(u.off("error"),u.css("background-color","#7d7d7d").css("background-size","100%")):u.attr("src",n)});return u.load(function(){u.attr("src")&&u.attr("src")!==n&&u.css("background-image","none")}),i&&u.addClass(i),r&&u.attr("data-objectid",r),u},n.getRandomString=function(){return Math.random().toString(36).substring(5)},n.getSizePx=function(n){switch(n){case st.Small:return 16;case st.Medium:return 24;case st.Large:return 32}},n.isValidEmail=function(n){var t=n.split("@");return t.length===2&&t[0].length>=1&&t[1].length>=1?!0:!1},n.isOnPremiseEnvironment=function(){return!e.getPageContext().webAccessConfiguration.isHosted==!0},n.sortGroupMembersByName=function(n){return n.sort(function(n,t){return!n||!n.displayName?-1:!t||!t.displayName?1:n.displayName.toLocaleLowerCase().localeCompare(t.displayName.toLocaleLowerCase())})},n.createTooltip=function(t,i){var u,r,f;return i?i:t?(u=t.displayName&&t.displayName.trim()?t.displayName:"",r="",n.isOnPremiseEnvironment()?t.samAccountName&&t.samAccountName.trim()&&(r="("+(t.scopeName&&t.scopeName.trim()?t.scopeName+"\\":"")+t.samAccountName+")"):t.signInAddress&&t.signInAddress.trim()&&(r="<"+t.signInAddress+">"),f="",t.active!==!1||et.isAadGroup(t)||(f=" - "+(t.entityType.toLowerCase().trim()==a.ServiceHelpers.UserEntity?p.IdentityPicker_InactiveUser:t.entityType.toLowerCase().trim()==a.ServiceHelpers.GroupEntity?p.IdentityPicker_InactiveGroup:p.IdentityPicker_InactiveIdentity)),(u?u:"")+(r?" "+r:"")+f):""},n.replaceBackslash=function(n){return n.replace(/\\/g,"%")},n.UserEntityType=a.ServiceHelpers.UserEntity,n.GroupEntityType=a.ServiceHelpers.GroupEntity,n.VisualStudioDirectory=a.ServiceHelpers.VisualStudioDirectory,n.AzureActiveDirectory=a.ServiceHelpers.AzureActiveDirectory,n.SourceDirectory=a.ServiceHelpers.SourceDirectory,n.FIXED_POSTIION_CLASS="identity-picker-fixed-position",n.SCROLL_BAR_WIDTH_PX=20,n.IDENTITY_ITEM_BUFFER_WIDTH_PX=18,n}();at=function(){function n(){}return n.createStringEntity=function(t,i){var r=d.htmlEncode(t),u={entityId:n.STRING_ENTITY_ID_PREFIX+"_"+r,entityType:n.STRING_ENTITY_TYPE,originDirectory:n.STRING_DIRECTORY,originId:n.STRING_ORIGIN_ID_PREFIX+"_"+r,localDirectory:n.STRING_DIRECTORY,localId:n.STRING_LOCAL_ID_PREFIX+"_"+r,isMru:!1,displayName:r};return u.image=i||a.ServiceHelpers.getDefaultIdentityImage(u),u},n.isStringEntityId=function(t){return!t||!t.trim()?!1:t.indexOf(n.STRING_ENTITY_ID_PREFIX)==0?!0:!1},n.isStringPrefixedLocalId=function(t){return!t||!t.trim()?!1:t.indexOf(n.STRING_LOCAL_ID_PREFIX)==0},n.STRING_ENTITY_TYPE="string_entitytype",n.STRING_ENTITY_ID_PREFIX="STRING_ENTITYID",n.STRING_DIRECTORY="STRING_DIRECTORY",n.STRING_ORIGIN_ID_PREFIX="STRING_ORIGINID",n.STRING_LOCAL_ID_PREFIX="STRING_LOCALID",n}();t.EntityFactory=at;var et=function(){function n(){}return n.isDirectoryEntityType=function(n){return n.entityType?n.entityType.toLowerCase().trim()==a.ServiceHelpers.UserEntity||n.entityType.toLowerCase().trim()==a.ServiceHelpers.GroupEntity:!1},n.isAadGroup=function(n){return n.entityType&&n.entityType.toLowerCase().trim()==a.ServiceHelpers.GroupEntity&&n.originDirectory.toLowerCase().trim()==a.ServiceHelpers.AzureActiveDirectory},n.getUniqueIdentifierForDisambiguation=function(n){return ft.isOnPremiseEnvironment()||n.entityType.toLowerCase().trim()!=a.ServiceHelpers.UserEntity?n.entityId:n.signInAddress&&ft.isValidEmail(n.signInAddress)?n.signInAddress:n.entityId},n.getDisplayName=function(t){return t.displayName&&t.displayName.trim()?t.displayName:n.getSignInAddress(t,n.isGitHubIdentity(t))},n.isGitHubIdentity=function(n){return n.originDirectory&&n.originDirectory.toLowerCase().trim()==a.ServiceHelpers.GitHubDirectory},n.getNonDiacriticDisplayName=function(n){return this.replaceDiacriticCharacters(this.getDisplayName(n))},n.replaceDiacriticCharacters=function(n){var t,i,r;if(n){for(t=n,i=0;i<t.length;i++)r=t.charAt(i),r in l.diacriticsRemovalMap&&(t=t.replace(r,l.diacriticsRemovalMap[r]));return t}return n},n.getSignInAddress=function(n,t){return(t===void 0&&(t=!1),ft.isOnPremiseEnvironment()&&n.samAccountName&&n.samAccountName.trim())?(n.scopeName&&n.scopeName.trim()?n.scopeName+"\\":"")+n.samAccountName:!t&&n.signInAddress&&n.signInAddress.trim()?n.signInAddress:!t&&n.mail&&n.mail.trim()?n.mail:n.mailNickname&&n.mailNickname.trim()?n.mailNickname:""},n}(),ri=function(){function n(){}return n.prototype.getIdentityAttributes=function(n){if(n.entityType.trim().toLowerCase()==a.ServiceHelpers.UserEntity)return new ti(n);if(n.entityType.trim().toLowerCase()==a.ServiceHelpers.GroupEntity)return new ii(n);throw{source:"getIdentityAttributes",message:"identity entityType do not match existing type"};},n}(),vt=function(){function n(n,t,i){this._displayTitle=n;this._displayContent=t;this._needWordWrap=i?i:!1}return n.prototype.getDisplayTitle=function(){return this._displayTitle},n.prototype.getDisplayContent=function(){return this._displayContent},n.prototype.constructAttribute=function(n){var r=$("<div>").addClass("identity-picker-idcard-attribute-name").attr("id","identity-picker-idcard-attribute-name_"+n).text(this.getDisplayTitle()),i=this.getDisplayContent(),t=$("<div>").addClass("identity-picker-idcard-ellipsis-overflow"),u;return rt.RichContentTooltip.addIfOverflow(i,t,{menuContainer:t}),this._isValidSendEmailAttribute()?u=$("<a>").attr({"aria-labelledby":"identity-picker-idcard-attribute-name_"+n,href:"mailto:"+i,tabindex:"0"}).text(i).appendTo(t):t.text(this.getDisplayContent()),this._needWordWrap&&t.addClass("identity-picker-idcard-word-wrap"),[r,t]},n.prototype._isValidSendEmailAttribute=function(){return p.IdentityPicker_IdCardMail.toLowerCase()==this.getDisplayTitle().toLowerCase().trim()&&ft.isValidEmail(this.getDisplayContent())},n}(),ui=function(){function n(){this._withContactCard=!1;this._smallScreenRender=!1;this._withContactCard=!0;this._focusElementOnContactCardClose=null}return n.prototype.withPrefix=function(n){return this._prefix=n,this},n.prototype.withEntity=function(n){return this._entity=n,this},n.prototype.withContactCard=function(n,t){return this._withContactCard=n,this._withContactCard&&(this._focusElementOnContactCardClose=t),this},n.prototype.forControlOfSize=function(n){return this._size=n,this},n.prototype.withIdentityServiceOptions=function(n){return this._identityServiceOptions=n,this},n.prototype.withIdentityExtensionOptions=function(n){return this._identityExtensionOptions=n,this},n.prototype.withHoverSupport=function(n){return this._supportsHover=n,this},n.prototype.withSmallScreenRender=function(n){return this._smallScreenRender=n,this},n.prototype.withDialogAppendTo=function(n){return this._dialogAppendTo=n,this},n.prototype.registerCallbacks=function(n){return this._callbacks=n,this},n.prototype.build=function(){var i=this,t,h,u,f,e,o,r,c,s,a,v;return!this._entity||this._size===null||this._size===undefined||!this._identityServiceOptions||!this._identityServiceOptions.identityType||!this._identityServiceOptions.operationScope||!this._callbacks?null:(t=$("<li>").attr("role","option"),this._smallScreenRender&&(h=$("<i>").addClass("ms-Icon ms-Icon--CheckMark"),u=$("<span>").addClass("container"),h.appendTo(u),f=$("<span>").addClass("selected-fade"),u.appendTo(f),f.appendTo(t)),ft.styleElementBySize(t,this._size,!0),n._appendImage(this._entity,t,this._size),e=et.isGitHubIdentity(this._entity),o=!e&&this._withContactCard&&et.isDirectoryEntityType(this._entity),this._entity.isMru&&et.isDirectoryEntityType(this._entity)&&(r=$("<div>").addClass("bowtie-icon bowtie-edit-delete bowtie-icon-small identity-picker-delete-icon").attr("role","button").appendTo(t),rt.RichContentTooltip.add(p.IdentityPicker_RemoveFromMru,r,{menuContainer:r}),ft.styleElementBySize(r,this._size,!1),o&&r.addClass("with-idcard"),r.hide(),c=ut(this,function(){var n={};n[l.TelemetryProperties.entityId]=i._entity.entityId;n[l.TelemetryProperties.consumerId]=i._identityExtensionOptions?i._identityExtensionOptions.consumerId:l.ConsumerId.UnknownConsumer;nt.publishEvent(new nt.TelemetryEventData(l.Telemetry.Area,l.Telemetry.Feature_Click_Remove_Mru,n));i._callbacks.deleteIconClickDelegate(i._entity,t)}),this._callbacks.deleteIconClickDelegate&&r.click(c)),o&&!et.isGitHubIdentity(this._entity)&&n._appendIdCard(this._entity,t,this._size,this._identityServiceOptions,this._identityExtensionOptions,this._callbacks,this._focusElementOnContactCardClose,this._dialogAppendTo),s=n._appendTextContainer(this._entity,t,this._size,this._prefix,this._smallScreenRender),this._size==st.Small&&(a=this._entity.entityType.toLowerCase().trim()==at.STRING_ENTITY_TYPE?this._entity.displayName:et.getSignInAddress(this._entity,e),rt.RichContentTooltip.add(a,s,{menuContainer:s})),v=function(){var n,r;i._smallScreenRender&&(n=17,k.delay(null,n,function(){t.children(".selected-fade").attr("class","selected-fade-active")}),r=400,k.delay(null,n+r,function(){t.children(".selected-fade").attr("class","selected-fade")}));i._callbacks.entityListItemClickDelegate(i._entity)},this._callbacks.entityListItemClickDelegate&&t.click(v),this._entity.isMru&&this._supportsHover&&t.hover(ut(this,function(){t.children(".identity-picker-delete-icon").show()}),ut(this,function(){t.children(".identity-picker-delete-icon").hide()})),t)},n._appendTextContainer=function(t,i,r,u,f){var s,o,e;return f===void 0&&(f=!1),s=et.isGitHubIdentity(t)&&!(t.displayName&&t.displayName.trim()),s?o=$("<div>").addClass("item-text-container").append($("<div>").append($("<div>").addClass("bowtie-icon bowtie-brand-github list-icon")).addClass("title-only").addClass(r==st.Large?"large":"").append(n._highlightPrefix(et.getDisplayName(t),u,!0))):(o=$("<div>").addClass("item-text-container").append($("<div>").addClass("title").addClass(r==st.Large?"large":"").append(n._highlightPrefix(et.getDisplayName(t),u,!0))),e=et.getSignInAddress(t,et.isGitHubIdentity(t)),e=d.isGuid(e)?"":e,r!=st.Small&&e&&e.trim()&&o.append($("<div>").append($("<div>").addClass(et.isGitHubIdentity(t)?"bowtie-icon bowtie-brand-github list-icon":"")).addClass("subtitle").addClass(r==st.Large?"large":"").append(n._highlightPrefix(e,u)))),o.appendTo(i),f||o.height(ft.getSizePx(r)+lt.IMAGE_MARGINS_PX),o},n._appendImage=function(n,t,i){var f=a.ServiceHelpers.getDefaultIdentityImage(n),r,u;n.image&&(r=n.image);u=ft.createImgElement(f,r,r&&r.trim()?"identity-picture":"identity-picture hidden",n.entityId).appendTo(t);ft.styleElementBySize(u,i,!1)},n._appendIdCard=function(n,t,i,r,u,f,e,s){var h=$("<div>").addClass("bowtie-icon bowtie-contact-card identity-picker-contact-card-icon").attr("role","button").appendTo(t),c;rt.RichContentTooltip.add(p.IdentityPicker_ShowContactCardTitle,h,{menuContainer:h});ft.styleElementBySize(h,i,!1);c=ut(this,function(t){t.stopPropagation();var f={identity:n,anchor:h,operationScope:r.operationScope,identityType:r.identityType,httpClient:r.httpClient?r.httpClient:null,focusElementOnClose:e,leftValue:h.offset().left,topValue:h.offset().top+h.outerHeight(),consumerId:u.consumerId,appendTo:s},i={};i[l.TelemetryProperties.entityId]=n.entityId;i[l.TelemetryProperties.consumerId]=u?u.consumerId:l.ConsumerId.UnknownConsumer;nt.publishEvent(new nt.TelemetryEventData(l.Telemetry.Area,l.Telemetry.Feature_Click_IdCard,i));o.Enhancement.enhance(wt,"<div/>",f)});h.click(c)},n._highlightPrefix=function(n,t,i){var u;if(i===void 0&&(i=!1),!n)return null;var o=et.replaceDiacriticCharacters(n),s=et.replaceDiacriticCharacters(t),r=o.toLowerCase().indexOf(s.toLowerCase()),f=function(n,t,i){return $("<span>").append(d.htmlEncode(n.substring(0,i))).append($("<b>").text(n.substr(i,t))).append(d.htmlEncode(n.substr(i+t)))},e=function(n,t,i,r){for(var u=et.replaceDiacriticCharacters(n),e=et.replaceDiacriticCharacters(t);i>0&&u.charAt(i-1)!=r;)i=u.toLowerCase().indexOf(e.toLowerCase(),i+1);return i>0?f(n,t.length,i):null};if(r){if(r>0){if(i&&(u=e(n,t,r," "),u)||ft.isOnPremiseEnvironment()&&t.indexOf("\\")<0&&(u=e(n,t,r,"\\"),u))return u}else if(ft.isOnPremiseEnvironment()&&t.indexOf("\\")>0)if(t=t.substring(t.indexOf("\\")+1),r=o.toLowerCase().indexOf(s.toLowerCase()),r){if(i&&(u=e(n,t,r," "),u))return u}else return f(n,t.length,r)}else return f(n,t.length,r);return $("<span>").text(n)},n}(),ct=function(){function n(){}return n.Directory="Directory",n.Mru="Mru",n.Persistent="Persistent",n.String="String",n}();t.SourceId=ct,function(n){n[n.Sync=0]="Sync";n[n.Async=1]="Async"}(ni=t.SourceType||(t.SourceType={}));bt=function(){function n(){}return n.PreferFirst="preferfirst",n.PreferSecond="prefersecond",n}();yt=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._mruEntities={},t._syncSources={},t._requestStack=[],t._deferredStack=[],t._userMruReady={},t._entityRetrieverPrepComplete={},t._mruEntitiesPromise={},t._mruEntities={},t.registerSyncSource({id:ct.Mru,sourceType:ni.Sync,getEntities:t._mruSourceGetEntitiesHandler,sortRank:10}),t.queryTokenEntityImageCache=new v.HashCache,t}return __extends(t,n),t.prototype.registerSyncSource=function(n){if(!(n.id in this._syncSources)){for(var t in this._syncSources)if(this._syncSources[t].sortRank==n.sortRank)return;this._syncSources[n.id]=n}},t.prototype.search=function(n){var i=this,e,u,f;if(!n.sources||n.sources.length==0||!n.identityServiceOptions){e={source:"EntityOperationsFacade: search",message:"missing arguments"};throw e;}var o=it.defer(),s=o.promise,r=c.FilterByScope.GetHashCode(n.filterByScope);return typeof this._requestStack[r]=="undefined"&&(this._requestStack[r]=[]),this._requestStack[r].push(n),typeof this._deferredStack[r]=="undefined"&&(this._deferredStack[r]=[]),this._deferredStack[r].push(o),u=ut(this,function(){for(var e=function(){var e=i._requestStack[r].pop(),o=i._deferredStack[r].pop();n=[];f=i._getRegisteredSyncSourcesSorted().filter(function(n){return e.sources.indexOf(n)!=-1});f&&f.forEach(ut(i,function(r){var u=i._syncSources[r].getEntities.bind(i),f=u(n,e);n=t.mergeEntities(f,n)}));u={entityResponse:[],queryTokenResponse:{}};e.sources.indexOf(ct.Directory)!=-1&&(u.queryTokenResponse=i._directorySourceGetEntities(n,e));n.length>0?i.getImagesForEntities(n,e).then(function(t){n.forEach(ut(i,function(n){t.hasOwnProperty(n.entityId)&&(n.image=t[n.entityId])}));u.entityResponse=n;o.resolve(u)}):o.resolve(u)},n,f,u;i._requestStack[r].length>0;)e()}),f=this.load({loadMru:n.sources.indexOf(ct.Mru)!=-1,filterByScope:n.filterByScope}),f.isFulfilled()?u():f.then(u,u),s},t.prototype.isUserMruReady=function(n){return this._userMruReady[c.FilterByScope.GetHashCode(n)]},t.prototype.getMruEntitiesUnchecked=function(n){return this._mruEntities[c.FilterByScope.GetHashCode(n)]},t.prototype.refreshUserMru=function(n){return this._getUserMruEntities(null,null,n)},t.prototype.load=function(n){var i=this,t=c.FilterByScope.GetHashCode(n.filterByScope);return this._entityRetrieverPrepComplete[t]&&(!n.loadMru||this._userMruReady[t])?this._entityRetrieverPrepComplete[t].promise:(this._entityRetrieverPrepComplete[t]=it.defer(),n.loadMru?this._mruEntitiesPromise[t]?this._mruEntitiesPromise[t].then(ut(this,function(){i._entityRetrieverPrepComplete[t].resolve(!0)}),ut(this,function(){i._entityRetrieverPrepComplete[t].resolve(!1)})):(this._mruEntitiesPromise[t]=this._getUserMruEntities(null,null,n.filterByScope),this._mruEntitiesPromise[t].then(ut(this,function(){i._entityRetrieverPrepComplete[t].resolve(!0)}),ut(this,function(){i._entityRetrieverPrepComplete[t].resolve(!1)}))):this._entityRetrieverPrepComplete[t].resolve(!0),this._entityRetrieverPrepComplete[t].promise)},t.filterEntities=function(n,t){return!n||n.length==0?[]:n.filter(function(n){return n.displayName&&et.getNonDiacriticDisplayName(n).toLowerCase().indexOf(et.replaceDiacriticCharacters(t))==0?!0:ft.isOnPremiseEnvironment()&&n.samAccountName&&n.samAccountName.trim().toLowerCase().indexOf(t)==0||ft.isOnPremiseEnvironment()&&n.scopeName&&n.samAccountName&&(n.scopeName+"\\"+n.samAccountName).trim().toLowerCase().indexOf(t)==0||n.signInAddress&&n.signInAddress.trim().toLowerCase().indexOf(t)==0||!n.signInAddress&&n.mail&&n.mail.trim().toLowerCase().indexOf(t)==0||!n.signInAddress&&!n.mail&&n.mailNickname&&n.mailNickname.trim().toLowerCase().indexOf(t)==0?!0:!1})},t.mergeEntities=function(n,i,r){var u,f,e;if(r===void 0&&(r=bt.PreferFirst),u={},f=[],!n&&!i)return[];if(!i||i.length==0)return n?n:[];if(!n||n.length==0)return i?i:[];n.forEach(function(n){var i=t._getMergingKeyFromEntity(n);u[i]=u.hasOwnProperty(i)?t._mergeSimilarEntities(u[i],n,r):n});i.forEach(function(n){var i=t._getMergingKeyFromEntity(n),f;i in u?(f=t._mergeSimilarEntities(u[i],n,r),u[i]=f):u[i]=n});for(e in u)u[e].isMru?f.unshift(u[e]):f.push(u[e]);return f},t.prototype.getImagesForEntities=function(n,t){var r=it.defer(),h=r.promise,e={},c=w.getService(a.IdentityService),u,f,o;try{u=c.getIdentityImages(n,{httpClient:t&&t.identityServiceOptions&&t.identityServiceOptions.httpClient?t.identityServiceOptions.httpClient:null});f=[];for(o in u)f.push(u[o]);it.allSettled(f).then(function(n){n.forEach(function(n){if(n.state==l.PromiseResultStatus.Fulfilled){if(!n.value||Object.keys(n.value).length!=1||!Object.keys(n.value)[0]||!Object.keys(n.value)[0].trim())return;var i=Object.keys(n.value)[0],t=n.value[i];if(!t||!t.trim())return;e[i]=t}else n.state==l.PromiseResultStatus.Rejected&&n.reason&&s.logError("_getImagesForEntities/_getImagesForEntitiesErrorCallback:"+JSON.stringify(n.reason))});r.resolve(e)},function(n){n&&s.logError("_getImagesForEntities/_getImagesForEntitiesErrorCallback:"+JSON.stringify(n));r.reject(n)})}catch(i){if(i!==Object(i)||!("source"in i)||i.source!="IdentityService")throw i;}return h},t._getMergingKeyFromEntity=function(n){var t,i;return ft.isOnPremiseEnvironment()&&n&&n.entityType&&n.localId&&n.localDirectory.toLowerCase().trim()==a.ServiceHelpers.VisualStudioDirectory&&(n.entityType.toLowerCase().trim()==a.ServiceHelpers.UserEntity||n.entityType.toLowerCase().trim()==a.ServiceHelpers.GroupEntity)?n.localId:n.entityType.toLowerCase().trim()==a.ServiceHelpers.UserEntity?(t=et.getSignInAddress(n),i=t?t:n.entityId,i):n.entityType.toLowerCase().trim()==a.ServiceHelpers.GroupEntity?n.displayName&&n.displayName.trim()?n.mailNickname&&n.mailNickname.trim()?n.displayName+n.mailNickname:n.mail&&n.mail.trim()?n.displayName+n.mail:n.displayName:n.entityId:n.entityType.toLowerCase().trim()==at.STRING_ENTITY_TYPE?n.entityId:void 0},t._mergeSimilarEntities=function(n,i,r){var f,u,e;if(r===void 0&&(r=bt.PreferFirst),n==null)return i;if(i==null)return n;f={entityId:t._computeValue("entityId",n,i,r),entityType:t._computeValue("entityType",n,i,r),originDirectory:t._computeValue("originDirectory",n,i,r),originId:t._computeValue("originId",n,i,r),localDirectory:t._computeValue("localDirectory",n,i,r),localId:t._computeValue("localId",n,i,r)};u=["displayName","scopeName","department","jobTitle","mail","mailNickname","physicalDeliveryOfficeName","signInAddress","surname","guest","description","image","isMru","samAccountName","active","telephoneNumber"];for(e in u)f[u[e]]=t._computeValue(u[e],n,i,r);return f},t._computeValue=function(n,t,i,r){r===void 0&&(r=bt.PreferFirst);return r==bt.PreferFirst?t[n]?typeof t[n]=="string"||t[n]instanceof String?t[n].trim()?t[n]:i[n]:t[n]:i[n]:i[n]?typeof i[n]=="string"||i[n]instanceof String?i[n].trim()?i[n]:t[n]:i[n]:t[n]},t._filterMruEntitiesByIdentityType=function(n,t){if(!n.identityServiceOptions||!n.identityServiceOptions.identityType)return t;var i=a.ServiceHelpers.getIdentityTypeList(n.identityServiceOptions.identityType);return t.filter(function(n){return i.indexOf(n.entityType.trim().toLowerCase())>=0})},t.prototype._mruSourceGetEntitiesHandler=function(n,i){var r=t._filterMruEntitiesByIdentityType(i,this._mruEntities[c.FilterByScope.GetHashCode(i.filterByScope)]);return i.prefix&&(r=t.filterEntities(r,i.prefix)),r},t.prototype._directorySourceGetEntities=function(n,i){var e=this,c,o,u,l;if(!i||!i.prefix)return{};var r={},h={},v=w.getService(a.IdentityService);try{c={httpClient:i.identityServiceOptions.httpClient,minResults:i.identityServiceOptions.minResults?i.identityServiceOptions.minResults:n?n.length>a.IdentityService.MIN_RESULTS?0:a.IdentityService.MIN_RESULTS-n.length:a.IdentityService.MIN_RESULTS,maxResults:i.identityServiceOptions.minResults?i.identityServiceOptions.minResults:a.IdentityService.MAX_RESULTS,extensionData:i.identityServiceOptions.extensionData,getFilterByScope:function(){return i.filterByScope}};o=v.getIdentities(i.prefix,i.identityServiceOptions.operationScope,i.identityServiceOptions.identityType,c,i.queryTypeHint,i.identityExtensionOptions);for(u in o)l=ut(this,function(u){o[u].then(ut(e,function(f){i.prefix&&i.prefix.length>=1&&(f.identities=f&&f.identities?t.mergeEntities(f.identities,n):n);f.identities.length>0?e.getImagesForEntities(f.identities,i).then(function(n){f.identities.forEach(function(t){n.hasOwnProperty(t.entityId)&&(t.image=n[t.entityId])});r[u].resolve(f)}):r[u].resolve(f)}),ut(e,function(n){n&&s.logWarning("_directorySourceGetEntities/getIdentitiesErrorCallback:"+JSON.stringify(n));r[u].reject(n?n:null)}))}),l(u),r[u]=it.defer(),h[u]=r[u].promise}catch(f){if(f!==Object(f)||!("source"in f)||f.source!="IdentityService")throw f;}return h},t.prototype._getRegisteredSyncSourcesSorted=function(){var n=this,t=Object.keys(this._syncSources);return t.sort(function(t,i){return n._syncSources[t].sortRank>n._syncSources[i].sortRank?1:-1}),t},t.prototype._getUserMruEntities=function(n,t,i){var f=this,e=it.defer(),v=e.promise,r=c.FilterByScope.GetHashCode(i),o,s,h;try{return(this._userMruReady[r]=!1,o=ut(this,function(n){f._userMruReady[r]=!0;f._mruEntities[r]=n.filter(function(n){return n.active!==!1});f._mruEntities[r].forEach(function(n){n.image=a.ServiceHelpers.getDefaultIdentityImage(n)});e.resolve(!0)}),s=ut(this,function(){f._mruEntities[r]=[];e.resolve(!1)}),c.FilterByScope.isFilterByScopeEmpty(i))?it(o([])):(h=w.getService(a.MruService),h.getMruIdentities({IMS:!0},a.MruService.DEFAULT_IDENTITY_ID,a.MruService.DEFAULT_FEATURE_ID,{httpClient:n?n.httpClient:null,filterByScope:i},{consumerId:t?t.consumerId:l.ConsumerId.UnknownConsumer}).then(o,s))}catch(u){if(u!==Object(u)||!("source"in u)||u.source!="MruService")throw u;}return v},t}(w.VssService);t.EntityOperationsFacade=yt;ti=function(){function n(n){this._attributes=this._mapEntityPropertiesToAttributes(n)}return n.prototype._mapEntityPropertiesToAttributes=function(n){var t=[];return n.jobTitle&&t.push(new vt(p.IdentityPicker_IdCardJobTitle,n.jobTitle)),n.mailNickname&&!d.isGuid(n.mailNickname)&&t.push(new vt(p.IdentityPicker_IdCardAlias,n.mailNickname)),n.physicalDeliveryOfficeName&&t.push(new vt(p.IdentityPicker_IdCardOffice,n.physicalDeliveryOfficeName)),n.department&&t.push(new vt(p.IdentityPicker_IdCardDepartment,n.department)),t},n.prototype.isEmpty=function(){return!(this._attributes.length>0)},n.prototype._appendAttributeBlock=function(t,i){var r=this._attributes[t].constructAttribute(n._idCardEntityAttributeCounter++);for(var u in r)r[u].appendTo(i)},n.prototype.toRows=function(){var i=[],n,r,t,u,f;for(r in this._attributes)t=parseInt(r),this._isEven(t)?(n&&i.push(n),n=$("<div>").addClass("identity-picker-idcard-row"),u=$("<div>").addClass("identity-picker-idcard-left-attribute").appendTo(n),this._appendAttributeBlock(t,u)):(f=$("<div>").addClass("identity-picker-idcard-right-attribute").appendTo(n),this._appendAttributeBlock(t,f));return n&&i.push(n),i},n.prototype._isEven=function(n){return n%2==0},n._idCardEntityAttributeCounter=0,n}();ii=function(){function n(n){this._attributes=this._mapEntityPropertiesToAttributes(n)}return n.prototype._mapEntityPropertiesToAttributes=function(n){var t=[],i=new vt(p.IdentityPicker_IdCardDescription,n.description?n.description:"",!0);return t.push(i),n.scopeName&&t.push(new vt(p.IdentityPicker_IdCardGroupSource,this._getScopeNameByDirectoryType(n))),n.mail&&t.push(new vt(p.IdentityPicker_IdCardMail,n.mail)),n.mailNickname&&!d.isGuid(n.mailNickname)&&t.push(new vt(p.IdentityPicker_IdCardAlias,n.mailNickname)),t},n.prototype._getScopeNameByDirectoryType=function(n){var t=n.originDirectory.trim().toLowerCase()==a.ServiceHelpers.VisualStudioDirectory?p.IdentityPicker_IdCardImsGroupSource:p.IdentityPicker_IdCardAadGroupSource;return d.format(t,n.scopeName)},n.prototype.isEmpty=function(){return!(this._attributes.length>0)},n.prototype._appendAttributeBlock=function(t,i){var r=this._attributes[t].constructAttribute(n._idCardEntityAttributeCounter++);for(var u in r)r[u].appendTo(i)},n.prototype.toRows=function(){var t=$("<div>").addClass("identity-picker-idcard-info"),r,n,u,f,e,o,i;if(this._isValidIndex(1))for(r=$("<div>").addClass("identity-picker-idcard-column").appendTo(t),n=1;this._isValidIndex(n);)u=$("<div>").addClass("identity-picker-idcard-row").appendTo(r),f=$("<div>").addClass("identity-picker-idcard-left-attribute").appendTo(u),this._appendAttributeBlock(n,f),n++;return this._attributes[0].getDisplayContent()&&(e=$("<div>").addClass("identity-picker-idcard-column").appendTo(t),o=$("<div>").addClass("identity-picker-idcard-left-attribute").appendTo(e),this._appendAttributeBlock(0,o)),i=[],i.push(t),i},n.prototype._isValidIndex=function(n){return typeof this._attributes[n]!="undefined"},n._idCardEntityAttributeCounter=0,n}()});

define("TfsCommon/Scripts/WITIdentityHelpers",["require","exports","VSS/Locations","VSS/Identities/Picker/Controls","VSS/Utils/String","VSS/WebApi/Constants"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.WITIdentityHelpers=void 0;var e=function(){function n(){}return n.isAADIdentity=function(n){return u.equals(n.originDirectory,"aad",!0)&&n.originId&&!n.localId},n.isTfsGroup=function(n){var t=n.displayName.indexOf("\\");return u.equals(n.entityType,"Group",!0)&&u.startsWith(n.displayName,"[")&&t!==-1&&u.endsWith(n.displayName.substring(0,t),"]")},n.getVsIdFromGroupUniqueName=function(t){var i,r,f,e;return t?(r="",f=t.lastIndexOf(n.IDENTITY_UNIQUENAME_SEPARATOR),i=f===-1?t:t.substr(0,f),u.startsWith(i,n.TFS_GROUP_PREFIX)&&(e=$.trim(i.substr(3)),r=u.isGuid(e)?e:""),r):""},n.getDescriptorFromUniqueName=function(t){return t?t.indexOf(n.DESCRIPTOR_PREFIX)!==0?"":t.replace(/desc:/i,""):""},n.getUniquefiedIdentityName=function(t){var i,r,f;return t?(i=t.signInAddress||t.mail||t.samAccountName,n.isAADIdentity(t)?(r=u.equals(t.entityType,"Group",!0),f=r?n.AAD_IDENTITY_GROUP_PREFIX:n.AAD_IDENTITY_USER_PREFIX,(t.signInAddress||t.mail)&&!r?u.format("{0} {1}{2}{3}\\{4}{5}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,f,t.originId,t.signInAddress||t.mail,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):u.format("{0} {1}{2}{3}{4}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,f,t.originId,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END)):n.isTfsGroup(t)?t.localId?u.format("{0} {1}{2}{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.TFS_GROUP_PREFIX,t.localId.toUpperCase(),n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName:i?i.indexOf("@")===-1&&t.scopeName?u.format("{0} {1}{2}\\{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,t.scopeName,i,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):u.format("{0} {1}{2}{3}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,i,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.subjectDescriptor?u.format("{0} {1}{2}{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.DESCRIPTOR_PREFIX,t.subjectDescriptor,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName||""):""},n.getUniqueIdentityNameForContextIdentity=function(t,i){return t?u.format("{0} {1}{2}{3}",i,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,t,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):i||""},n.getFriendlyDistinctDisplayName=function(t,i){return i.displayName&&i.entityId&&!n.isTfsGroup(i)?t:i.displayName||""},n.parseUniquefiedIdentityName=function(t){var p,w;if(!t)return null;var o=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START),h=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END),v=!1,l=!1,s=t;o>=0&&h>o&&(l=!0,s=s.replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START).replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END));o=s.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START);h=s.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END);var a=s,c="",e="",y="",f="";return o>=0&&h>o&&h===s.length-1&&(a=$.trim(s.substr(0,o)),l?(f=$.trim(s.substr(o+1,h-o-1)),f.indexOf(n.AAD_IDENTITY_USER_PREFIX)===0?f=f.substr(n.AAD_IDENTITY_USER_PREFIX.length):f.indexOf(n.AAD_IDENTITY_GROUP_PREFIX)===0&&(v=!0,f=f.substr(n.AAD_IDENTITY_GROUP_PREFIX.length)),p=f.lastIndexOf("\\"),p>0&&(e=$.trim(f.substr(p+1)),e.indexOf("@")!==-1?(c=e,f=$.trim(f.substr(0,p))):(a=t,f="",v=!1))):(e=$.trim(s.substr(o+1,h-o-1)),w=n.getVsIdFromGroupUniqueName(e),y=n.getDescriptorFromUniqueName(e),e.indexOf("@")!==-1||e.indexOf("\\")!==-1||e.indexOf(n.DESCRIPTOR_PREFIX)!==-1||w||u.isGuid(e)?(c=e,w!==""&&(f=w,v=!0,c="")):a=t)),f||c||y?{localId:l?undefined:f,displayName:a,signInAddress:c,originDirectory:l?"aad":"vsd",entityId:y||f||c,entityType:v?"Group":"User",originId:l?f:undefined,subjectDescriptor:y}:r.EntityFactory.createStringEntity(a,i.urlHelper.getVersionedContentUrl("notassigned-user.svg"))},n.getEntityIdentifier=function(n,t,i){var e=u.equals(n.entityType||"",r.EntityFactory.STRING_ENTITY_TYPE,!0),f;return e?"":(f=n.subjectDescriptor||n.localId||n.signInAddress||n.mail,t)?f:i&&!f?"":f?"".concat(n.displayName," <").concat(f,">"):n.displayName},n.getDistinctDisplayNameFromGraphSubject=function(t,i){return t?this.isGraphGroup(t)&&(i||t.originId)&&t.principalName?u.format("{0} {1}{2}{3}{4}",t.principalName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.TFS_GROUP_PREFIX,(i||t.originId).toUpperCase(),n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):this.isGraphUser(t)&&t.mailAddress?"".concat(t.displayName," <").concat(t.mailAddress,">"):t.displayName:undefined},n.isGraphGroup=function(n){return u.equals(n.subjectKind,f.SubjectKind.Group,!0)},n.isGraphUser=function(n){return u.equals(n.subjectKind,f.SubjectKind.User,!0)},n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<",n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<<",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">>",n.TFS_GROUP_PREFIX="id:",n.AAD_IDENTITY_USER_PREFIX="user:",n.AAD_IDENTITY_GROUP_PREFIX="group:",n.IDENTITY_UNIQUENAME_SEPARATOR="\\",n.DESCRIPTOR_PREFIX="desc:",n}();t.WITIdentityHelpers=e});

var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};define("WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper",["require","exports","Presentation/Scripts/TFS/TFS.OM.Identities","VSS/Utils/String","VSS/Graph/RestClient","VSS/Service","VSS/WebApi/Constants","TfsCommon/Scripts/WITIdentityHelpers","VSS/Error","VSS/VSS","VSS/Events/Services","VSS/Navigation/HubsService","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function nt(n){w(n)&&n.identityRef&&n.identityRef.descriptor&&(b[n.identityRef.descriptor]=!0)}function k(n,t){var u=w(n),f=d(n),i,r;if(!t||u||f){if(u)return i=n,t?i.identityRef:i.distinctDisplayName||i.identityRef.displayName;if(f)return r=n,t?r:r.displayName}else return g(n);return n}function w(n){if(n&&n.identityRef!==undefined){var t=n;return t.distinctDisplayName&&!v[t.distinctDisplayName]&&(v[t.distinctDisplayName]=t),t.identityRef&&t.identityRef.descriptor&&!y[t.identityRef.descriptor]&&(y[t.identityRef.descriptor]=t),!0}return!1}function d(n){return!!(n&&n.displayName!==undefined)}function g(n){if(v[n])return v[n].identityRef;var t=i.IdentityHelper.parseUniquefiedIdentityName(n),r=i.IdentityHelper.getIdentityImageUrlByIdentity(t);return t&&t.isAadIdentity?{displayName:n}:t&&{displayName:t.displayName,uniqueName:t.uniqueName,imageUrl:r,_links:{avatar:{href:r}}}}function tt(n){if(n&&n.subjectDescriptor){var t={distinctDisplayName:o.WITIdentityHelpers.getUniquefiedIdentityName(n),identityRef:{displayName:n.displayName,descriptor:n.subjectDescriptor}};return y[n.subjectDescriptor]||(y[n.subjectDescriptor]=t),v[t.distinctDisplayName]||(v[t.distinctDisplayName]=t),t}return null}function it(n){if(w(n))return n;var t=k(n,!0);return t||(t={displayName:n}),{distinctDisplayName:n,identityRef:t}}function rt(n){var f=w(n),r=f?n.identityRef:n,t,u;return r?(t=r._links,u=r.imageUrl,t&&t.avatar&&t.avatar.href)?t.avatar.href:u?u:i.IdentityHelper.getIdentityImageUrlByIdentity(n):i.IdentityHelper.getIdentityImageUrlByIdentity(null)}function ut(n){var t,i;return!n||n.length===0?n:(t={},n.forEach(function(n){return t[n.distinctDisplayName]=n}),i=Object.keys(t).sort(r.localeIgnoreCaseComparer),i.map(function(n){return t[n]}))}function ft(n){return __awaiter(this,void 0,void 0,function(){var i,r,t,u,f,c;return __generator(this,function(l){switch(l.label){case 0:if(!(n&&n.descriptor))return[3,7];if(i=y[n.descriptor],i&&b[n.descriptor])return[2,Promise.resolve(i)];et();l.label=1;case 1:return l.trys.push([1,6,,7]),[4,p.lookupSubjects({lookupKeys:[n]})];case 2:return(r=l.sent(),r=r.value,!r[n.descriptor])?[3,5]:(t=r[n.descriptor],u=void 0,!(t.descriptor&&a.startsWith(t.descriptor,e.SubjectType.AadGroup,a.localeIgnoreCaseComparer)))?[3,4]:[4,p.getStorageKey(t.descriptor)];case 3:f=l.sent();f&&(u=f.value);l.label=4;case 4:return i={distinctDisplayName:o.WITIdentityHelpers.getDistinctDisplayNameFromGraphSubject(t,u),identityRef:{descriptor:t.descriptor,displayName:t.displayName,imageUrl:t._links&&t._links.avatar&&t._links.avatar.href,_links:t._links}},v[i.distinctDisplayName]=i,y[i.identityRef.descriptor]=i,b[i.identityRef.descriptor]=!0,[2,i];case 5:return[3,7];case 6:return c=l.sent(),s.publishErrorToTelemetry({name:"UnableToResolveWorkItemIdentityRef",message:h.getErrorMessage(c)}),[3,7];case 7:return[2,{distinctDisplayName:n&&n.displayName,identityRef:n}]}})})}function et(){p||(p=f.VssConnection.getConnection().getHttpClient(u.GraphHttpClient5,e.ServiceInstanceTypes.SPS))}Object.defineProperty(t,"__esModule",{value:!0});t.resolveIdentityRefToWorkItemIdentityRef=t.uniqueSortWorkItemIdentityRefObjects=t.getAvatarUrl=t.convertWorkItemIdentityRefFromFieldValue=t.createWorkItemIdentityRefFromEntity=t.createIdentityRefFromDistinctDisplayName=t.isIdentityRef=t.isWorkItemIdentityRef=t.convertPotentialIdentityRefFromFieldValue=t.setResolvedByDescriptorIfWorkItemIdentityRef=void 0;var v={},y={},b={},p;c.getService().attachEvent(l.HubEventNames.PreXHRNavigate,function(){v={};y={};b={};p=null});t.setResolvedByDescriptorIfWorkItemIdentityRef=nt;t.convertPotentialIdentityRefFromFieldValue=k;t.isWorkItemIdentityRef=w;t.isIdentityRef=d;t.createIdentityRefFromDistinctDisplayName=g;t.createWorkItemIdentityRefFromEntity=tt;t.convertWorkItemIdentityRefFromFieldValue=it;t.getAvatarUrl=rt;t.uniqueSortWorkItemIdentityRefObjects=ut;t.resolveIdentityRefToWorkItemIdentityRef=ft});

define("TFS/WorkItemTracking/ExtensionContracts",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.KnownColumns=t.ArtifactIconType=t.RemoteLinkStatus=void 0,function(n){n[n.PendingAdd=0]="PendingAdd";n[n.Success=1]="Success";n[n.Failed=2]="Failed";n[n.PendingUpdate=4]="PendingUpdate";n[n.PendingDelete=8]="PendingDelete"}(i=t.RemoteLinkStatus||(t.RemoteLinkStatus={})),function(n){n[n.icon=0]="icon";n[n.colorBar=1]="colorBar";n[n.colorCircle=2]="colorCircle";n[n.identity=3]="identity";n[n.fabricIcon=4]="fabricIcon"}(r=t.ArtifactIconType||(t.ArtifactIconType={}));t.KnownColumns={State:"State",LastUpdate:"LastUpdate"}});

define("WorkItemTracking/Scripts/Utils/RemoteWorkItemUtils",["require","exports","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Authentication/Services","VSS/Common/Contracts/Platform","VSS/Contributions/Services","VSS/Service","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","TFS/WorkItemTracking/ExtensionContracts","VSS/Utils/Url","VSS/Error"],function(n,t,i,r,u,f,e,o,s,h,c){function v(n,t){var r=i.TfsContext.getDefault();return t=t+"/",{account:{id:n,name:"",relativeUri:"",uri:t},collection:{id:n,name:"",relativeUri:"",uri:t},host:{authority:"",hostType:u.ContextHostType.ProjectCollection,id:n,name:"",scheme:r.contextData.host.scheme,relativeUri:"",uri:t,isAADAccount:r.contextData.host.isAADAccount},project:null,team:null,user:r.contextData.user}}function y(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){switch(t.label){case 0:return(l&&l.remoteWorkItemSessionToken&&l.remoteWorkItemSessionToken.validTo&&(new Date).getTime()>l.remoteWorkItemSessionToken.validTo.getTime()-6e4&&(l=null),!!l)?[3,2]:[4,p()];case 1:l=t.sent();t.label=2;case 2:return l&&l.remoteWorkItemSessionToken&&(n=new r.WebSessionTokenManager(l.remoteWorkItemSessionToken)),[2,n]}})})}function p(){return e.getService(f.WebPageDataService).getDataAsync(a)}function w(n){switch(n){case s.RemoteLinkStatus.PendingAdd:return o.RemoteLinkStatusPendingAdd;case s.RemoteLinkStatus.Success:return o.RemoteLinkStatusSuccess;case s.RemoteLinkStatus.Failed:return o.RemoteLinkStatusFailed;case s.RemoteLinkStatus.PendingUpdate:return o.RemoteLinkStatusPendingUpdate;case s.RemoteLinkStatus.PendingDelete:return o.RemoteLinkStatusPendingDelete}}function b(n){try{var t=h.Uri.parse(n),r=t.path.replace(/\/$/,"");return"".concat(t.scheme,"://").concat(t.host,"/").concat(r)}catch(i){return i&&c.publishErrorToTelemetry(i),""}}function k(n,t,i){return"".concat(n,"/").concat(t,"/_apis/wit/workItems/").concat(i)}var a,l;Object.defineProperty(t,"__esModule",{value:!0});t.getRemoteWorkItemRestUrl=t.sanitizeRemoteWorkItemUrl=t.getFriendlyRemoteLinkStatus=t.getRemoteWorkItemAuthSessionToken=t.getRemoteContext=void 0;a="ms.vss-work-web.remote-workitem-token-data-provider";t.getRemoteContext=v;t.getRemoteWorkItemAuthSessionToken=y;t.getFriendlyRemoteLinkStatus=w;t.sanitizeRemoteWorkItemUrl=b;t.getRemoteWorkItemRestUrl=k});

define("Presentation/Scripts/TFS/FeatureRef/CSSNodeEvents",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.CSSNodesInvalidated=void 0;t.CSSNodesInvalidated="CSSNode/Invalidated"});

define("WorkItemTracking/Scripts/OM/DataSources/WorkItemTypeCategoriesDataSource",["require","exports","Presentation/Scripts/TFS/TFS.Legacy.Ajax","q","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","TFS/WorkItemTracking/RestClient","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/WorkItemIndexDBCacheManager","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o,s,h,c){function l(n,t){return __awaiter(this,void 0,void 0,function(){var l,v,p,r,e,y,i,w,b,k;return __generator(this,function(d){switch(d.label){case 0:return u.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.DisableWorkItemStoreDataProviders)?[4,a(n,t)]:[3,2];case 1:return[2,d.sent()];case 2:return l=new s.WorkItemIndexDBCacheManager,[4,l.getDataFromCache(n,"workItemTypeCategories","_",t?t.stamp:null)];case 3:return(v=d.sent(),!v)?[3,4]:[2,v];case 4:return[4,o.getClient().getWorkItemTypeCategories(n)];case 5:for(p=d.sent(),r={},e=0,y=p;e<y.length;e++)i=y[e],w=i.workItemTypes.map(function(n){return n.name}),b={defaultWorkItemTypeName:i.defaultWorkItemType.name,name:i.name,referenceName:i.referenceName,workItemTypeNames:w},r[i.referenceName]=b;d.label=6;case 6:return d.trys.push([6,8,,9]),[4,l.cacheData(n,"workItemTypeCategories","_",r,t?t.stamp:null)];case 7:return d.sent(),[3,9];case 8:return k=d.sent(),h.traceMessage(c.WITCommonConstants.WorkItemTrackingArea,"CacheData",c.WITCommonConstants.WitCacheProviderInit,k),[3,9];case 9:return[2,r]}})})}function a(n,t){var f=e.TfsContext.getDefault().getActionUrl("workItemTypeCategories","wit",{project:n,area:"api",team:""}),u=r.defer(),o=function(n){u.resolve(n)};return i.getMSJSON(f,t,o,u.reject),u.promise}Object.defineProperty(t,"__esModule",{value:!0});t.beginGetWorkItemTypeCategories=void 0;t.beginGetWorkItemTypeCategories=l});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking",["require","exports","VSS/VSS","VSS/Error","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/Utils/Array","VSS/Utils/Number","VSS/Utils/File","VSS/Diag","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Events/Action","VSS/Events/Handlers","VSS/Events/Services","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","WorkItemTracking/Scripts/TFS.WorkItemTracking.WebApi","TFS/WorkItemTracking/BatchRestClient","VSS/Utils/Html","VSS/Telemetry/Services","q","VSS/Service","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Utils/NodeHelpers","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/Utils/WorkItemRichTextHelper","WorkItemTracking/Scripts/Utils/WIFormCIDataHelper","WorkItemTracking/Scripts/Utils/WitControlMode","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/LinkForm","WorkItemTracking/Scripts/RegisterLinkForms","WorkItemTracking/Scripts/OM/NodesCacheManager","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/Identities/Picker/Common","WorkItemTracking/Scripts/WorkItemMetadataCacheStampManager","VSS/Contributions/Services","WorkItemTracking/Scripts/OM/DataSources/index","VSS/Service","WorkItemTracking/Scripts/Form/UserLayoutSettings","WorkItemTracking/Scripts/OM/WorkItemMetadataCacheInformationManager","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper","Presentation/Scripts/TFS/TFS.OM.Identities","VSS/Contributions/Services","WorkItemTracking/Scripts/Utils/RemoteWorkItemUtils","VSS/Events/Services","Presentation/Scripts/TFS/FeatureRef/CSSNodeEvents","WorkItemTracking/Scripts/OM/DataSources/WorkItemTypeCategoriesDataSource","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource","Presentation/Scripts/TFS/MVCToDataProviderDataSources/WITDataSource","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/WorkItemIndexDBCacheManager","TFS/WorkItemTracking/RestClient"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi){function br(n){return n&&n.isIdentity}function tr(n,t){var i=new Error(n);return $.each(t,function(n,t){i[n]=t}),i}function kr(n){return tr(y.WorkItemBulkSaveFailed,{name:lt.Exceptions.WorkItemBulkSaveException,results:n})}function eu(n){return tr(s.format(y.ProjectDoesNotExist,n),{name:lt.Exceptions.ProjectDoesNotExistException,projectName:n})}function ou(n){return tr(s.format(y.WorkItemLinkTypeEndDoesNotExist,n),{name:lt.Exceptions.LinkTypeEndDoesNotExistException,linkTypeEnd:n})}function su(n){return tr(s.format(y.WorkItemLinkTypeDoesNotExists,n),{name:lt.Exceptions.LinkTypeDoesNotExistException,linkType:n})}function hu(n){var t=n.getInfoText().text;return tr(t,{name:lt.Exceptions.WorkItemSaveFailedDueToInvalidStatusException,detail:t,workItem:n})}var nr,cr,ur,dr,pi,fr,er,or,yi,ar,bi,ir,lr,wi,rr,di,gr,vr,ki,sr,yr,nu,pr;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemDataManager=t.WorkItemIdentityScope=t.FieldValidationKey=t.ServerDefaultValue=t.RuleEngine=t.RuleValueFrom=t.Attachment=t.WorkItemLink=t.Hyperlink=t.ExternalLink=t.Link=t.Field=t.WorkItem=t.FieldDefinition=t.WorkItemType=t.WorkItemStore=t.Project=t.createError=t.isIdentityPickerSupportedForField=void 0;var wr=i.queueCallbacks,hr=i.queueRequest,gi=i.handleError,tu=i.getErrorMessage,iu=/^\{?([\dA-F]{8})-?([\dA-F]{4})-?([\dA-F]{4})-?([\dA-F]{4})-?([\dA-F]{12})\}?$/i,ru=2,uu=/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F-\u009F]/g,fu=/(^[\uD800-\uDFFF]$)|[^\uD800-\uDBFF](?=[\uDC00-\uDFFF])|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/g;t.isIdentityPickerSupportedForField=br;t.createError=tr,function(n){n[n.WorkItemMissingOrUpdated=600122]="WorkItemMissingOrUpdated";n[n.ResourceLinkNotFoundException=600180]="ResourceLinkNotFoundException"}(cr||(cr={}));ur=function(){function n(n,t){var i=this;this._onCSSNodesInvalidated=function(){u.traceMessage(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"onCSSNodesInvalidated",ft.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_CSSNODECACHEINVALIDATED,"The CSS Node cache was invalidated");i.nodesCacheManager.clearCache()};this.store=n;this.id=t.id;this.name=t.name;this.guid=t.guid;this.workItemTypeNames=t.workItemTypes;this.fieldIds=t.fieldIds;this.extras=t.extras||{};this.process=t.process;this.visibility=t.visibility;this.relatedData={};$.isArray(this.workItemTypeNames)&&this.workItemTypeNames.sort(s.localeIgnoreCaseComparer);this.workItemTypes={};this.nodesCacheManager=new yt.NodesCacheManager(this);oi.getService().attachEvent(si.CSSNodesInvalidated,this._onCSSNodesInvalidated)}return n.prototype.getApiLocation=function(n,t){return this._getApiLocation(!1,n,t)},n.prototype.getApiLocationIncludingTeam=function(n,t){return this._getApiLocation(!0,n,t)},n.prototype.path=function(){return this.store.path()+"/"+this.name},n.prototype.beginGetWorkItemType=function(n,t,i){this.beginGetWorkItemTypes([n],function(n){return t(n[0])},i)},n.prototype.beginGetWorkItemTypes=function(n,t,i,r){var u=this,y,nt,p,l,o,w,b,tt,f,it,st;var e=0,k=!1,a=[],s=[],ht=this.store.fields&&this.store.fields.length>0,rt=pt.FeatureAvailabilityService.isFeatureEnabled(wt.FeatureAvailabilityFlags.DisableWorkItemTypesSplittedLoading);ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPES,!0);var h=function(){e--;k||e!==0||(a.length>0?u._constructWITsAsync(a).then(function(){et()},c):et())},ut=!1,et=function(){var o,y,k,e,h,p,c,w,l,b,i,f;for(ut,ut=!0,ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPES,!1),o=0,y=s;o<y.length;o++)k=y[o],k.finish();if(s=[],$.isFunction(t)){if(e=[],rt)for(h=0,p=n;h<p.length;h++)i=p[h],f=i.toUpperCase(),e.push(u.workItemTypes[f]);else if(r)for(c=0,w=a;c<w.length;c++)i=w[c],f=i.name.toUpperCase(),e.push(u.workItemTypes[f]);else for(l=0,b=n;l<b.length;l++)i=b[l],f=i.toUpperCase(),e.push(u.workItemTypes[f]);t(e)}},c=function(n){for(var f,t=0,r=s;t<r.length;t++)f=r[t],f.error();s=[];k||(k=!0,$.isFunction(i)&&i.apply(u,[n]))},d=function(n){var f=wr(u,$.noop,$.noop),t,r,e;for(s.push(f),t=0,r=n;t<r.length;t++)e=r[t],u.workItemTypes[e.toUpperCase()]=f.register;u.store.witDataManager.beginGetWorkItemTypeData(u.guid,n).then(function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],a.push(r);h()},i)},g=[];for(y=0,nt=n;y<nt.length;y++)f=nt[y],p=this.workItemTypes[f.toUpperCase()],p?$.isFunction(p)&&(e++,p(h,c)):g.push(f);for(g.sort(),o=[],w=0,b=0,tt=g;b<tt.length;b++)f=tt[b],it=f.length+11,w+it>1024&&(w=0,l=null),l?l.push(f):(l=[f],o.push(l),e++),w+=it;if(e++,ht?h():this.store.beginGetFields().then(h).catch(c),st=this.store.userSettingsLoaded===undefined,st&&(e++,ct.WitFormModeUtility.ensureWitFormModeLoaded().then(function(){u.store.userSettingsLoaded=!0;ni.getService(ti.WorkItemFormUserLayoutSettingsService).ensureSettingsAreLoaded().then(function(){h()},c)},c)),rt)while(o.length>0)d(o.pop());else if(r)d([]);else while(o.length>0)d(o.pop())},n.prototype.getWorkItemTypes=function(n,t){var i=this;return rt.Promise(function(r,u){return i.beginGetWorkItemTypes(n,r,u,t)})},n.prototype._constructWITsAsync=function(n){for(var r,v,u,o,s,h,t=this,i=rt.defer(),f={},c=[],l=[],y=function(){for(var r,u=!1,s=function(n){var i=new fr(t,n),r=n.name.toUpperCase();t.workItemTypes[r]=i},f=0,h=n;f<h.length;f++){var e=h[f],c=e.fields,o=void 0;for(r=0;r<c.length;r++)if(o=c[r],!t.store.fieldMap[o]&&!t.store.fieldMapById[o]){u=!0;break}u?l.push(e):s(e)}u?t.store.refreshFields().then(function(){for(var r,n=0,t=l;n<t.length;n++)r=t[n],s(r);i.resolve(null)},function(n){i.reject(n)}):i.resolve(null)},p=function(r){for(var e,u=0,f=n;u<f.length;u++)e=f[u].name,delete t.workItemTypes[e.toUpperCase()];i.reject(r)},e=0,a=n;e<a.length;e++)if(r=a[e],r.rules&&r.rules.globals&&r.rules.globals.length>0)for(v=r.rules.globals,u=0,o=v;u<o.length;u++)s=o[u],f[s]=s;for(h in f)f.hasOwnProperty(h)&&c.push(h);return this.store.beginEnsureConstantSets(c,y,p),i.promise},n.prototype.getWorkItemType=function(n){var i=n.toUpperCase(),t=this.workItemTypes[i];if(t&&!$.isFunction(t))return t},n.prototype.beginQuery=function(n,t,i,r){this.store.beginQuery(this.guid,n,t,i,r)},n.prototype.beginSearch=function(n,t,i,r){this.store.beginSearch(this,n,t,i,r)},n.prototype.beginUpdateColumnOptions=function(n,t,i,r){(new ci.WorkItemStoreLevelWITDataSource).postDataAsync({controller:"wit",action:"updateColumnOptions"},{persistenceId:n,fields:t}).then(function(){return i}).catch(r)},n.prototype.beginGetWorkItemCategories=function(n,t){this.store.beginGetWorkItemCategories(this,n,t)},n.prototype.beginGetVisibleWorkItemTypeNames=function(n,t){var i=[lt.WorkItemCategoryConstants.HIDDEN];this._beginGetWorkItemTypeNames(n,i,t)},n.prototype.beginGetValidWorkItemTypeNames=function(n,t){var i=[lt.WorkItemCategoryConstants.HIDDEN,lt.WorkItemCategoryConstants.TEST_CASE,lt.WorkItemCategoryConstants.TEST_PLAN,lt.WorkItemCategoryConstants.TEST_SUITE];this._beginGetWorkItemTypeNames(n,i,t)},n.prototype.beginGetValidWorkItemTypeNamesWithCategories=function(n,t){var i=[lt.WorkItemCategoryConstants.HIDDEN];this._beginGetWorkItemTypeNames(n,i,t)},n.prototype._beginGetWorkItemTypeNames=function(n,t,i){var r=this;this.beginGetWorkItemCategories(function(i){return __awaiter(r,void 0,void 0,function(){var f,r,u,e,o;return __generator(this,function(s){switch(s.label){case 0:return(f=[],r={},!!pt.FeatureAvailabilityService.isFeatureEnabled(wt.FeatureAvailabilityFlags.DisableWorkItemTypesSplittedLoading))?[3,2]:(u=[],!!this.workItemTypeNames)?[3,2]:($.each(i,function(n,t){t.workItemTypeNames.forEach(function(n){u.some(function(t){return t===n})||u.push(n)})}),[4,this.getWorkItemTypes(u,!0)]);case 1:e=s.sent();this.workItemTypeNames=e.map(function(n){return n.name});s.label=2;case 2:return t&&$.each(t,function(n,t){if(i&&i[t]){var u=i[t];$.each(u.workItemTypeNames,function(n,t){r[t]=!0})}}),$.each(this.workItemTypeNames,function(n,t){r.hasOwnProperty(t)||f.push(t)}),o=Object.keys(r),$.isFunction(n)&&n.call(this,f,o,i),[2]}})})},i)},n.prototype._getApiLocation=function(n,t,i){var r={};return n||(r.team=""),this.store.getTfsContext().getActionUrl(t||"","wit",$.extend({project:this.guid,area:"api"},r,i))},n}();t.Project=ur;dr=/^-(1|2|10|30)(\|.*)?$/;pi=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._ongoingDeleteOrRestoreOperationCt=0,t.constantSets={},t.allowedValues={},t.groups={},t.witCategories={},t.workItemTypeExtensions={},t.relatedData={},t._allProjectsLoaded=!1,t._allFieldsLoaded=!1,t._projectLoadingPromisesMap={},t._queryExecutingPromiseMap={},t}return __extends(t,n),t.prototype.dispose=function(){var n=this.relatedData[lt.RelatedDataKeys.WORKITEM_MANAGER_KEY];n&&n.dispose()},t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this.metadataCacheStampManager=new kt.WorkItemMetadataCacheStampManager(this.getTfsContext());this.witDataManager=new pr(this.getTfsContext(),this.metadataCacheStampManager)},t.prototype.isDeletingOrRestoring=function(){return this._ongoingDeleteOrRestoreOperationCt>0},t.prototype.path=function(){return a.combinePaths(this.getConnection().getHostUrl(),"WorkItemStore")},t.prototype.getApiLocation=function(n,t){return this.getTfsContext().getActionUrl(n||"","wit",$.extend({project:"",team:"",area:"api"},t))},t.prototype.getProjectApiLocationIncludingTeam=function(n,t,i){return this.getTfsContext().getActionUrl(t||"","wit",$.extend({project:n,area:"api"},i))},t.prototype.getWorkItemTypesEtagForCI=function(){return this.metadataCacheStampManager.workItemTypesEtag},t.prototype.getCurrentUserName=function(){return this.getCurrentUser().distinctDisplayName},t.prototype.getCurrentUser=function(){var n=this.getTfsContext().currentIdentity,t=n.displayName,i=n.uniqueName;return{distinctDisplayName:ui.IdentityHelper.getDistinctDisplayName(t,i),identityRef:{id:n.id,displayName:t,uniqueName:i}}},t.prototype._loadFieldsFromServer=function(){var n=this,t,i;return this._getFieldsPromise?this._getFieldsPromise:(t=function(t){return n._getFieldsPromise=null,n._allFieldsLoaded=!0,t},i=function(t){n._getFieldsPromise=null;throw t;},this._getFieldsPromise=new Promise(function(t,i){return n.witDataManager.beginGetFields().then(function(i){n._prepareFields(i);t(n.fields)},i)}).then(t,i),this._getFieldsPromise)},t.prototype.beginGetFields=function(n){return(n===void 0&&(n=!1),this.fields&&(!n||this._allFieldsLoaded))?Promise.resolve(this.fields):this._loadFieldsFromServer()},t.prototype.refreshFields=function(){var n=this;return rt.Promise(function(t,i){n._loadFieldsFromServer().then(function(){return t(null)}).catch(i)})},t.prototype.getFieldDefinition=function(n){var t=(""+n).toUpperCase();return this.fieldMap[t]||this.fieldMapById[t]},t.prototype.beginGetProjects=function(n,t){var i=this;this._allProjectsLoaded?n(this.projects):this._allProjectsLoadingPromise=this._allProjectsLoadingPromise&&this._allProjectsLoadingPromise.isPending()?this._allProjectsLoadingPromise.then(function(t){return n(i.projects),t},function(n){return $.isFunction(t)&&t(n),n}):this._loadProjects().then(function(t){var r,u,f;if(i.projects&&i.projects.length!==0)for(r=0,u=t.projects;r<u.length;r++)f=u[r],i.hasProject(f.guid)||i.projects.push(new ur(i,f));else i.projects=t.projects.map(function(n){return new ur(i,n)});return i._allProjectsLoaded=!0,n(i.projects),t},function(n){return $.isFunction(t)&&t(n),n})},t.prototype.beginGetContributedLinkTypes=function(){var t=this;if(this._beginGetContributedLinkTypesPromise)return this._beginGetContributedLinkTypesPromise;var n=rt.defer(),i={},r=ut.getService(dt.ExtensionService);return r.getContributionsForTargets(["ms.vss-work-web.workitem-artifact-links"]).then(function(r){$.each(r,function(n,t){var r=t.properties.toolId,u=t.properties.supportedArtifactTypes;$.each(u,function(n,u){var f=u.name,e=u.linkTypes;$.each(e,function(n,u){var e={linkType:u.id,tool:r,artifactName:f,linkTypeName:u.name,contributionId:t.id};i[u.id]=e})})});t.contributedLinkTypes=i;n.resolve(t.contributedLinkTypes)},function(t){n.reject(t)}),this._beginGetContributedLinkTypesPromise=n.promise,this._beginGetContributedLinkTypesPromise},t.prototype.getContributedLinkTypes=function(){if(this.contributedLinkTypes)return this.contributedLinkTypes},t.prototype._loadProjects=function(n){var t=this,r=function(n){b.getService().fire(lt.Actions.NEW_PROJECT_DATA,t,n.projects);t._prepareFields(n.fields,!0)},i,u;return n?rt.Promise(function(i,u){return t.witDataManager.beginGetFieldProjectData(n).then(function(n){r(n);i(n)},u)}):(i=rt.defer(),u=pt.FeatureAvailabilityService.isFeatureEnabled(wt.FeatureAvailabilityFlags.DisableWorkItemTypesSplittedLoading)?{includeFieldDefinitions:!0}:{includeFieldDefinitions:!1,includeProcessId:!1,includeProcessInfo:!1,includeWorkItemTypes:!1},this.metadataCacheStampManager.addStampToParams(f.WITCommonConstants.TeamProjects,u,function(u){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETPROJECTS_REQUEST,!0);n&&(u.namesOrIds=[n]);(new ci.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync({controller:"wit",action:"teamProjects"},u,t.getTfsContext().navigation.collection.instanceId,f.WITCommonConstants.TeamProjects,"_").then(function(n){var t;n.requestHeaders&&ot.PerfScenarioManager.addData((t={},t["".concat(ft.PerformanceEvents.WORKITEMTRACKING_GETPROJECTS_REQUEST,".ETAG")]=n.requestHeaders.getResponseHeader("ETag"),t));ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETPROJECTS_REQUEST,!1);r(n.data);i.resolve(n.data)},function(n){i.reject(n)})},null),i.promise)},t.prototype.getProjects=function(){if(this.projects&&!$.isFunction(this.projects))return this.projects},t.prototype.getProject=function(n,t){t===void 0&&(t=!0);var r=t?this.getProjects():this.projects,i=c.first(r||[],function(t){return s.equals(t.name,n,!0)||s.equals(t.guid,n,!0)});if(i)return i;if(t)throw eu(n);else return null},t.prototype.hasProject=function(n){return this.projects&&!$.isFunction(this.projects)?c.arrayContains(n,this.projects,function(n,t){return s.equals(t.name,n,!0)||s.equals(t.guid,n,!0)}):!1},t.prototype.beginGetProject=function(n,t,i){var r=this,u=this.getProject(n,!1),f=function(){try{u=r.getProject(n);t.call(r,u)}catch(f){gi(f,i,r)}};u?t.call(this,u):this._allProjectsLoadingPromise&&this._allProjectsLoadingPromise.isPending()?this._allProjectsLoadingPromise=this._allProjectsLoadingPromise.then(function(n){return f(),n},function(n){return $.isFunction(i)&&i(n),n}):this._projectLoadingPromisesMap[n]=this._projectLoadingPromisesMap[n]&&this._projectLoadingPromisesMap[n].isPending()?this._projectLoadingPromisesMap[n].then(function(n){return f(),n},function(n){return $.isFunction(i)&&i(n),n}):this._loadProjects(n).then(function(n){if(n.projects&&n.projects.length===1){var t=new ur(r,n.projects[0]);r.projects?r.hasProject(t.guid)||r.projects.push(t):r.projects=[t]}return f(),n},function(n){return $.isFunction(i)&&i(n),n})},t.prototype.beginGetTeamSettings=function(n){var r,t,i=rt.defer(),u=function(){r&&t&&(r.nodesCacheManager.addReferencedNodes(t.referencedNodes),i.resolve(t))},f;return this.beginGetProject(this.getTfsContext().navigation.projectId,function(n){r=n;u()},function(n){return i.reject(n)}),f=ut.getService(d.TeamAwarenessService),f.beginGetTeamSettings(n).then(function(n){t=n;u()},function(n){return i.reject(n)}),i.promise},t.prototype.beginGetWorkItemData=function(n,t,i,u,f,e){var h=this,o,c,s,l,a;if(n?$.isArray(n)?n.length===0&&(o=new Error(y.BeginGetWorkItemArgumentNull)):(c=+n,n=[c]):o=new Error(y.BeginGetWorkItemArgumentNull),n)for(s=0,l=n.length;s<l;++s)if(n[s]=+n[s],n[s]===undefined){o=new Error(y.WorkItemIdUndefined);break}else if(isNaN(n[s])){o=new Error(y.WorkItemIdNaN);break}else if(n[s]<=0){o=new Error(y.WorkItemIdOutOfRange);break}if(o){o.name="ArgumentException";gi(o,i,this);i&&r.publishErrorToTelemetry(o);return}a=function(n){$.isFunction(t)&&(n&&n.length===1?t.call(h,n[0],i):t.call(h,n,i))};this.witDataManager.beginGetWorkItemData(n,u,!e,f).then(a,i)},t.prototype.beginGetWorkItem=function(n,t,i,r,u){var f=this;this.beginGetWorkItems([n],function(n){$.isFunction(t)&&t.call(f,n&&n[0])},i,r,u)},t.prototype.getWorkItemsAsync=function(n,t,i,r){var u=this;return i===void 0&&(i=!1),r===void 0&&(r=!1),new Promise(function(f,e){return u.beginGetWorkItems(n,function(n){return f(n)},function(n){return e(n)},t,i,r)})},t.prototype.beginGetWorkItems=function(n,t,i,r,u,e){var s=this;u===void 0&&(u=!1);e===void 0&&(e=!1);this.beginGetWorkItemData(n,function(n){var e,l=0,h=[];n&&(e=$.isArray(n)?n:[n]);var a=function(){$.isFunction(t)&&t.call(s,h)},r=function(n){gi(n,i,s)},c=function(){var n,p;if(n=e&&e[l++],n){var t=null,i=null,y=!1,v=function(){if(t&&(!u||i)&&y)try{var f=t.create(n,i);f.extensionIds=f.extensionIds.concat(n.currentExtensions);h.push(f);o.delay(s,0,c)}catch(e){r(e)}};s.beginGetLinkTypes(function(){y=!0;v()},r);u&&s.beginGetWorkItemTypeExtensions(n.currentExtensions,function(n){i=n;v()},r);p=n.projectId||n.fields[f.CoreField.TeamProject];s.beginGetProject(p,function(i){var u=n.fields[f.CoreField.WorkItemType];i.beginGetWorkItemType(u,function(n){t=n;v()},r)},r)}else a()};c()},i,r,undefined,e)},t.prototype.beginQuery=function(n,t,i,r,u){var e=this,f;this._queryExecutingPromiseMap[t]?this._queryExecutingPromiseMap[t].then(function(n){delete e._queryExecutingPromiseMap[t];$.isFunction(i)&&i.call(e,n)},r):(f=function(i,r){var f=$.extend({wiql:t},u),e={controller:"wit",action:"query",routeData:{project:n||""}};(new ci.WorkItemStoreLevelWITDataSource).postDataAsync(e,f).then(function(n){var t=n.data;i(t)}).catch(r)},i===null?this._queryExecutingPromiseMap[t]=new Promise(f):f(i,r))},t.prototype._beginWorkItemsBatchHelper=function(n,t,i,r){var f=this,u=[],e=[];u.push(n);var h=function(n){$.isFunction(i)&&i.call(f,n)},c=function(n){gi(n,r,f)},s=function(){if(u.length>0){var n=u.pop();n.length>lt.PageSizes.SAVE&&u.push(n.splice(lt.PageSizes.SAVE));t(n).then(function(n){n&&n.count>0&&$.each(n.value,function(n,t){e.push(t)});o.delay(f,0,s)},function(n){c(n)})}else h(e)};s()},t.prototype._beginDeleteWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(nt.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.deleteWorkItemsBatch(n).then(function(i){var u,r,f,e;if(t._ongoingDeleteOrRestoreOperationCt--,i.count>0)for(u=i.value,r=0,f=u.length;r<f;r++)e=u[r],e.code===204&&b.getService().fire(lt.Actions.WORKITEM_DELETED,t,{workItemId:n[r]});return i},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginDeleteWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginDeleteWorkItems(n)},t,i)},t.prototype._beginRestoreWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(nt.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.restoreWorkItemsBatch(n).then(function(n){if(t._ongoingDeleteOrRestoreOperationCt--,n.count>0){var i=n.value;i.forEach(function(n){if(n.code===200){var i=$.parseJSON(n.body);b.getService().fire(lt.Actions.WORKITEM_RESTORED,t,{workItemId:i.id})}})}return n},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginRestoreWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginRestoreWorkItems(n)},t,i)},t.prototype._beginDestroyWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(nt.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.destroyWorkItemsBatch(n).then(function(i){var u,r,f,e;if(t._ongoingDeleteOrRestoreOperationCt--,i.count>0)for(u=i.value,r=0,f=u.length;r<f;r++)e=u[r],e.code===204&&b.getService().fire(lt.Actions.WORKITEM_DESTROYED,t,{workItemId:n[r]});return i},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginDestroyWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginDestroyWorkItems(n)},t,i)},t.prototype.beginSearch=function(n,t,i,r,u){var e=this,f;f={controller:"wit",action:"search",routeData:{project:n?n.guid:""}};(new ci.WorkItemStoreLevelWITDataSource).getDataAsync(f,$.extend({searchText:t},u)).then(function(n){var t=n.data;$.isFunction(i)&&i.call(e,t)}).catch(r)},t.prototype.beginGetLinkTypes=function(n,t){var i=this,r=function(){n&&n.call(i,i.linkTypes,i.registeredLinkTypes)};hr(this,this,"linkTypes",r,t,function(n,t){i.witDataManager.beginGetLinkTypes().then(function(t){i._bindLinkTypeEnds(t.witLinkTypes);i.registeredLinkTypes=t.registeredLinkTypes.filter(function(n){return at.isLinkFormRegistered(n)});n(t.witLinkTypes)},t)})},t.prototype.getRegisteredLinkTypes=function(){if(this.registeredLinkTypes&&!$.isFunction(this.registeredLinkTypes))return this.registeredLinkTypes},t.prototype.getLinkTypes=function(){if(this.linkTypes&&!$.isFunction(this.linkTypes))return this.linkTypes},t.prototype.getLinkTypesMap=function(){for(var n,t={},u=this.getLinkTypes(),i=0,r=u;i<r.length;i++)n=r[i],n.isDirectional&&(t[n.reverseEnd.name]=n),t[n.forwardEnd.name]=n;return t},t.prototype.getLinkTypeEnds=function(){var n=this.linkTypeEnds,u,t,r,i;if(n)return n;for(u=this.getLinkTypes(),n=[],t=0,r=u;t<r.length;t++)i=r[t],n.push(i.forwardEnd),i.isDirectional&&n.push(i.reverseEnd);return this.linkTypeEnds=n,n},t.prototype.findLinkType=function(n){for(var i,u=(""+n).toUpperCase(),f=this.getLinkTypes(),t=0,r=f;t<r.length;t++)if(i=r[t],i.referenceName.toUpperCase()===u)return i;throw su(n);},t.prototype.findLinkTypeEnd=function(n){for(var t,r=(""+n).toUpperCase(),f=this.getLinkTypeEnds(),i=0,u=f;i<u.length;i++)if((t=u[i],t.id===n)||t.name.toUpperCase()===r||t.immutableName.toUpperCase()===r)return t;throw ou(n);},t.prototype.beginGetAllowedValues=function(n,t,i,r,u){var s=this,o=this.getFieldDefinition(n),e=o.id.toString();e=t?e+"|"+t:e;e=i?e+"|"+i:e;hr(this,this.allowedValues,e,r,u,function(n,r){s.metadataCacheStampManager.addStampToParams(f.WITCommonConstants.AllowedValues,null,function(u){var h=$.extend({projectId:t,workItemTypeName:i,fieldRefName:o.referenceName,fieldId:o.id.toString()},u),f={controller:"wit",action:"allowedValues"},c=s.getTfsContext().navigation.collection.instanceId;(new ci.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync(f,h,c,f.action,e).then(function(t){var i=t.data;n(i)},r)})})},t.prototype.getAllowedValues=function(n,t,i){var r=this;return new Promise(function(u,f){r.beginGetAllowedValues(n,t,i,function(n){u(n)},function(n){f(n)})})},t.prototype.beginGetWorkItemCategories=function(n,t,i){var r=this,u=""+(n?n.id:0);hr(this,this.witCategories,u,t,i,function(t,i){r.metadataCacheStampManager.addStampToParams(f.WITCommonConstants.WorkItemTypeCategories,null,function(r){hi.beginGetWorkItemTypeCategories(n.guid,r).then(function(n){t(n)},i)})})},t.prototype.beginGetWorkItemTypeExtension=function(n,t,i){var r=this.workItemTypeExtensions[n];r?t(r):this.beginGetWorkItemTypeExtensions([n],function(n){t(n[0])},i)},t.prototype.beginGetWorkItemTypeExtensions=function(n,t,i){var r=this,e=[],u,o=0,s=0,f=[],h=function(){s===0&&t.call(r,f)},c=function(n){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST,!0);var t={controller:"wit",action:"workItemTypeExtensions"};(new ci.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync(t,{extensionIds:n},r.getTfsContext().navigation.collection.instanceId,t.action,"_").then(function(n){var e,t,u;n.requestHeaders&&ot.PerfScenarioManager.addData((e={},e["".concat(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST,".ETAG")]=n.requestHeaders.getResponseHeader("ETag"),e));ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST,!1);t=n.data;t.forEach(function(n){var t=n.fields.map(function(n){return n.field});r._prepareFields(t,!0)});u=[];t.forEach(function(n){r.workItemTypeExtensions[n.id]=n;n.globals&&(u=u.concat(n.globals))});r.beginEnsureConstantSets(u,function(){f=f.concat(t);s--;h()},i)},i)};if(n&&n.length>0)if(n.forEach(function(n){if(r.workItemTypeExtensions[n])f.push(r.workItemTypeExtensions[n]);else{var t=n.length+15;o+t>1024&&(o=0,u=null);u?u.push(n):(u=[n],e.push(u),s++);o+=t}}),e.length===0)h();else while(e.length>0)c(e.pop());else t.call(this,f)},t.prototype.beginEnsureConstantSets=function(n,t,i){var r=this,h=[],o,p=0,w=0,e=0,b=!1,l,a,d,v,y,g,u;ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS,!0);var nt=function(n){b||(b=!0,ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS,!1),$.isFunction(i)&&i.apply(r,n))},k=function(){e--;!b&&e<=0&&(ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS,!1),$.isFunction(t)&&t.apply(r))},tt=function(n){for(var e,t=wr(r,k,nt),i=0,u=n;i<u.length;i++)e=u[i],r.constantSets[e]=t.register;r.metadataCacheStampManager.addStampToParams(f.WITCommonConstants.ConstantSets,{ids:n},function(i){var u,e,o,h;ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST,!0);u={controller:"wit",action:"constantSets"};e="_";n!=null&&(e=n.sort().reduce(function(n,t){return n+t}));o=new ci.WorkItemStoreLevelWITDataSource;h=null;h=o.isDataProviderEnabled(u)?o.getDataProviderDataUsingIndexDB(u,i,r.getTfsContext().navigation.collection.instanceId,f.WITCommonConstants.ConstantSets,e).then(function(n){var s=n.resolvedFromCache,t=n.data,i,u;return t&&!s&&(i=t,u=$.extend(!0,{},i),o.updateIndexDBCache(u,r.getTfsContext().navigation.collection.instanceId,f.WITCommonConstants.ConstantSets,e)),t}):li.getMVCDataAsync(u,i,!1);h.then(function(i){var f,l,e,u,o,h;for(i.requestHeaders&&ot.PerfScenarioManager.addData((f={},f["".concat(ft.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST,".ETAG")]=i.requestHeaders.getResponseHeader("ETag"),f)),ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST,!1),l=i.data,u=0,o=n;u<o.length;u++)h=o[u],e=l[h],c.flagSorted(e,s.localeIgnoreCaseComparer),r.constantSets[h]=e;t.finish()},function(i){for(var e,u=0,f=n;u<f.length;u++)e=f[u],delete r.constantSets[e];t.error(i)})})};if(n){for(l=[],a=0,d=n;a<d.length;a++)u=d[a],v=this.constantSets[u],v?$.isFunction(v)&&(e++,v(k,nt)):l.push(u);for(l.sort(),y=0,g=l;y<g.length;y++)u=g[y],dr.test(u)?(h.push([u]),e++):(w=(u+"").length+5,p+w>1024&&(p=0,o=null),o?o.push(u):(o=[u],h.push(o),e++),p+=w)}while(h.length>0)tt(h.pop());e===0&&k()},t.prototype.invalidateExtensions=function(n){var t=this;Boolean(n)?$.each(n,function(n,i){delete t.workItemTypeExtensions[i]}):this.workItemTypeExtensions={}},t.prototype.getConstantSet=function(n){return this.constantSets[n]},t.prototype.beginPageWorkItems=function(n,t,i,r,u){var o=this,f,e;if(!$.isArray(n))throw new Error("Invalid argument type: ids must be an array.");if(!$.isArray(t))throw new Error("Invalid argument type: 'fields' must be an array.");f={workItemIds:n.join(","),fields:t.join(",")};u&&$.extend(f,u);e={controller:"wit",action:"pageWorkItems"};(new ci.WorkItemStoreLevelWITDataSource).postDataWithCallback(e,f,function(n){var t=n.data;$.isFunction(i)&&i.apply(o,[t])},r)},t.prototype.beginPageWorkItemsByIdRev=function(n,t,i,r,u){var f=this,e={workItemIds:n.join(","),workItemRevisions:t.join(","),fields:i.join(",")};(new ci.WorkItemStoreLevelWITDataSource).postDataAsync({controller:"wit",action:"pageWorkItemsByIdRev"},e).then(function(n){var t=n.data;$.isFunction(r)&&r.apply(f,[t])}).catch(u)},t.prototype.beginGetWorkItemResources=function(n,t,i){var r={ids:n};(new ci.WorkItemStoreLevelWITDataSource).getDataAsync({controller:"wit",action:"ResourceLinks"},r).then(function(n){t(n.data)},i)},t.prototype.beginSaveWorkItems=function(n,t,i,r){r===void 0&&(r=!0);this._beginSaveWorkItemsInternal(n,{},{},t,i,r)},t.prototype._beginSaveWorkItemsInternal=function(n,t,i,r,u,e){var d=this,s,a,c,y,nt,tt,k,it,h,l,rt,ut,et;e===void 0&&(e=!0);c=[];y={};v.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.start");var g=function(n,t){for(var r,f,u=0,e=n;u<e.length;u++)r=e[u],f=y[r.id]?y[r.id]:y[r.tempId],f&&i[r.id]&&$.extend(f.changedFields,i[r.id]),r._setSavingStatus(t,f),r._setValidatingStatus(!1)},p=function(){try{if(a)a=kr(c),gi(a,u,d);else if($.isFunction(r)){v.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.complete");v.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.completedCallback.start");var t={workItems:n};r.call(d,t);v.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.completedCallback.complete")}}finally{g(s,!1)}},w=function(n,t){a=new Error(t.message);e&&n.setError(a);c.push({workItem:n,error:t})},b=function(){var n,i,u,t,r,f;if(s&&s.length===c.length){for(n=0,i=s;n<i.length;n++)for(u=i[n],t=0,r=u.allLinks;t<r.length;t++)f=r[t],f.setState(!0);p()}},st=function(n,t){var i={},e,r,u;for(e in t)t.hasOwnProperty(e)&&(r=Number(e),u=n.fieldMapById[r],u&&(i[u.fieldDefinition.referenceName]=u,r===f.CoreField.IterationId?i[f.CoreFieldRefNames.IterationPath]=n.fieldMapById[f.CoreField.IterationPath]:r===f.CoreField.AreaId&&(i[f.CoreFieldRefNames.AreaPath]=n.fieldMapById[f.CoreField.AreaPath])));return i},ht=function(n,i){for(var u,f,s,r,e=[],o=0,h=i.deletedLinks;o<h.length;o++)u=h[o],u instanceof wi&&e.push({command:"remove",sourceId:n.id,targetId:u.getTargetId(),linkData:u.linkData});for(f=0,s=i.addedLinks;f<s.length;f++)r=s[f],r instanceof wi&&(t.hasOwnProperty(r.getTargetId())&&(r.linkData.ID=t[r.getTargetId()]),e.push({command:"add",sourceId:n.id,targetId:r.getTargetId(),linkData:r.linkData}));return{typeChanged:n.hasWorkItemTypeChanged(),projectChanged:n.hasTeamProjectChanged(),changedFields:st(n,i.payload.fields),changedWorkItemLinks:e,firstSave:n.id==0}};if(n&&n.length>0){for(nt=[],tt=[],s=[],k=0,it=n.length;k<it;k++)h=n[k],h.fireWorkItemPreSave(),h.isDirty()&&(l=h.getUpdateData(),l&&l.payload&&(tt.push(l),nt.push(l.payload),rt=h.id>0?h.id:h.tempId,y[rt]=ht(h,l),s.push(h)));if(s.length>0){g(s,!0);try{ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!0);ut={controller:"wit",action:"updateWorkItems"};et={updatePackage:o.stringifyMSJSON(nt)};(new ci.WorkItemStoreLevelWITDataSource).postDataWithCallback(ut,et,function(n){var i=n.data,r;ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!1);i.length===s.length?(r=!1,$.each(i,function(n,t){if(t.state!==lt.WorkItemUpdateResultState.Success)return r=!0,!1}),$.each(s,function(n,u){var f=i[n];f.state!==lt.WorkItemUpdateResultState.Success||r?f.state!==lt.WorkItemUpdateResultState.Success?(w(u,f.error),b()):(c.push({workItem:u}),b()):d.beginGetWorkItemTypeExtensions(f.currentExtensions,function(i){u._takeUpdateResult(f,tt[n],i);c.push({workItem:u});t[u.tempId]=u.id;b()},function(n){w(u,n);b()})})):($.each(s,function(n,t){w(t,{message:"Server data does not match with what client sent."})}),p())},function(n){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!1);$.each(s,function(t,i){w(i,n)});p()})}catch(ct){g(s,!1);throw ct;}}else p()}else p()},t.prototype.saveWorkItemsBatchAsync=function(n){var t=this;return new Promise(function(i,r){t.beginSaveWorkItemsBatch(n,function(n){return i(n)},function(n){return r(n)})})},t.prototype.beginSaveWorkItemsBatch=function(n,t,i,r){function l(){var h,p;f.length>0?(h=f.pop(),h.length>lt.PageSizes.SAVE&&(f.push(h.slice(lt.PageSizes.SAVE)),h=h.slice(0,lt.PageSizes.SAVE)),u._beginSaveWorkItemsInternal(h,y,c,function(){$.each(h,function(n,t){e.push({workItem:t})});r&&r.call(u,h.length);o.delay(u,0,l)},function(t){function w(n){if(v===0){if(h.length===1&&n)f.push(h);else if(h.length>1){var i=h.length/2;f.push(h.slice(i));f.push(h.slice(0,i))}else e.push(t.results[0]);o.delay(u,0,l)}}function nt(n,t){v-=1;c[n.id]=$.extend(t,c[n.id]);w(!0)}function tt(){v-=1;s=!0;w(!1)}var v=0,k=!1,d=!1,g,y,b,r,p;if(t&&t.name===lt.Exceptions.WorkItemBulkSaveException){for(g=t.results,y=0,b=g;y<b.length;y++)r=b[y],p=r.workItem,r.error&&(r.error.errorCode===cr.WorkItemMissingOrUpdated||r.error.errorCode===cr.ResourceLinkNotFoundException)&&!a.hasOwnProperty(p.id.toString())?(k=!0,a[p.id]=!0,v+=1,u._beginTryMergeWorkItem(p,nt,tt)):d=!0;!k&&d&&(s=!0);w(!1)}else $.each(n,function(n,i){i.setError(t)}),gi(t,i,u)},!1)):s?($.each(e,function(){this.error&&this.workItem.setError(this.error)}),gi(kr(e),i,u)):(v.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.complete"),v.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.completedCallback.start"),$.isFunction(t)&&(p={workItems:n},t.call(u,p)),v.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.completedCallback.complete"))}var u=this,h=[],f=[],c={},e=[],s=!1,a={},y={};v.logTracePoint("VSS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.start");$.each(n,function(n,t){t.isValid()?h.push(t):(s=!0,e.push({workItem:t,error:hu(t)}))});h.length>0&&f.push(h);l()},t.prototype._prepareFields=function(n,t){var f,i,r,u,e;if(t&&this.fields||(this.fields=[],this.fieldMap={},this.fieldMapById={}),n){for(ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETFIELDS_PROCESS,!0),f=function(n){var t=new er(i,n),u=!0,r;i.fieldMapById[t.id]||(u=!1);i.fieldMapById[t.id]=t;i.fieldMap[t.name.toUpperCase()]=t;i.fieldMap[t.referenceName.toUpperCase()]=t;u?(r=-1,$.each(i.fields,function(n,i){if(i.id===t.id)return r=n,!1}),r!==-1?i.fields[r]=t:i.fields.push(t)):i.fields.push(t)},i=this,r=0,u=n;r<u.length;r++)e=u[r],f(e);ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETFIELDS_PROCESS,!1)}return this.fields},t.prototype._reduceTagWorkitemAssociation=function(n){var t={},r={},i,u;return $.each(n,function(n,f){i=r[f.tagDefinition.name.toUpperCase()];i==null?(t[f.tagDefinition.name]=f.workitemIds,r[f.tagDefinition.name.toUpperCase()]=f.tagDefinition.name):(u=t[i],t[i]=c.union(u,f.workitemIds))}),t},t.prototype._beginTryMergeWorkItem=function(n,t,i){var u=this,r;r={};v.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.start");this.beginGetWorkItemData([n.id],function(f){var o,e;if(u._hasConflicts(n,f,r)){i(n);return}o=u._getChangedFieldsForMerge(n,f);u._mergeWorkItem(n,f,r);n.evaluate();for(e in r)r.hasOwnProperty(e)&&n.setFieldValue(e,r[e]);n.isValid()?(v.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.complete"),v.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.completedCallback.start"),t(n,o),v.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.completedCallback.complete")):i(n)},function(){i(n)},!1,!0)},t.prototype._getChangedFieldsForMerge=function(n,t){var u,f,r,i,e,o;u={};f=t.fields;for(r in f)f.hasOwnProperty(r)&&(i=n.getField(r),i&&(e=i.getValue(!0),o=yi.convertValueToExternal(n.store,t.fields[r],i.fieldDefinition.type),yi.compareValues(e,o,!1)||(u[i.fieldDefinition.referenceName]=i)));return u},t.prototype._hasConflicts=function(n,t,i){var l,o,u,s,e,h,c,r;h=n.getFieldUpdates();for(c in h)if(h.hasOwnProperty(c)&&(r=Number(c),u=n.getField(r),u&&(l=u.getValue(!0),o=yi.convertValueToExternal(n.store,t.fields[r],u.fieldDefinition.type),u.isUserChange())))if(s=u.getValue(),r==f.CoreField.History||yi.compareValues(l,o,!1))i[r]=s,r===f.CoreField.IterationId?(e=n.getField(f.CoreField.IterationPath),i[f.CoreField.IterationPath]=e.getValue()):r===f.CoreField.AreaId&&(e=n.getField(f.CoreField.AreaPath),i[f.CoreField.AreaPath]=e.getValue());else if(!yi.compareValues(s,o,!1))return!0;return!1},t.prototype._mergeWorkItem=function(n,t,i){var u,r;u=n.getLinkUpdates();n._load(t,!0);for(r in i)i.hasOwnProperty(r)&&n._setFieldValueById(Number(r),i[r],!1);n._restoreLinkUpdates(u)},t.prototype._bindLinkTypeEnds=function(n){for(var i,t,r=0,u=n;r<u.length;r++)i=u[r],t=i.forwardEnd,t&&(t.linkType=i,t.oppositeEnd=i.reverseEnd),t=i.reverseEnd,t&&(t.linkType=i,t.oppositeEnd=i.forwardEnd)},t.ServiceLifetime=ut.ServiceLifetime.ClearOnFPS,t.FutureDate=new Date(2533707648e5),t.LayoutUserSettingsKey="workItemTracking.LayoutUserSettings",t}(k.TfsService);t.WorkItemStore=pi;fr=function(){function n(n,t){var o,f,s,r,e;this.project=n;this.store=n.store;this.id=t.id;this.name=t.name;this.referenceName=t.referenceName;this.dependentFieldsMapByReferenceName={};this._httpClient=this.store.tfsConnection.getHttpClient(g.WorkItemTrackingHttpClient);o=t.fields;this.form=t.rules.form;this.processId=t.rules.processId;this.triggerList=t.rules.triggerList;this.transitions=t.rules.transitions;f=t.rules.fieldRules;s=t.rules.fieldHelpTexts;this.orderedStates=t.orderedStates;this.color=t.color;this._parseStateColors(t.rules.stateColors);var h=this.fieldMap={},l=this.fieldMapById={},c=this.fields=[],a=this.store.fieldMap,v=this.store.fieldMapById;for(r=0,e=o;r<e.length;r++){var u=e[r],y=v[u]||a[u],i=new er(this,y,f&&f[u],s[u]||"");l[i.id]=i;h[i.name.toUpperCase()]=i;h[i.referenceName.toUpperCase()]=i;c[c.length]=i}}return n.prototype.path=function(){return this.project.path()+"/wit/"+this.name},n.prototype.create=function(n,t){return new or(this,n,t)},n.prototype.getFieldDefinition=function(n){var t=(""+n).toUpperCase();return this.fieldMapById[t]||this.fieldMap[t]},n.prototype.getTriggerList=function(){var t=this,n=[];return this.triggerList&&$.each(this.triggerList,function(i,r){t.getFieldDefinition(r)&&n.push(r)}),n},n.prototype.getInitialState=function(){var n;return this.transitions&&this.transitions[""]&&(n=this.transitions[""][0]),n||""},n.prototype.getRestUrl=function(){if(!this.restUrl){var n=this.store.getTfsContext(),t=n.navigation.publicAccessPoint.scheme+"://"+n.navigation.publicAccessPoint.authority+n.getServiceHostUrl();return s.format("{0}{1}/_apis/wit/workItemTypes/{2}",t,this.project.guid,this.name)}return this.restUrl},n.prototype.beginGetDependentFields=function(n,t,i){var r=this,u=this.getFieldDefinition(n);if(!u){$.isFunction(i)&&i.apply(this,{message:s.format("Field {0} doesn't exist in work item type {1}",n,this.name)});return}hr(this,this.dependentFieldsMapByReferenceName,u.referenceName,t,i,function(n,t){r._httpClient.beginGetWorkItemTypeFields(r.project.guid,r.name,u.referenceName).then(function(t){var i=$.map(t.dependentFields||[],function(n){return r.getFieldDefinition(n.referenceName)});r.restUrl=t._links.parent.href;n(i)},t)})},n.prototype._parseStateColors=function(n){var t=this;n&&(this.stateColors={},$.each(n,function(n,i){t.stateColors[i.name]="#"+i.color}))},n}();t.WorkItemType=fr;i.initClassPrototype(fr,{project:null,store:null,id:null,name:null,fields:null,fieldMap:null,fieldMapById:null,form:null,triggerList:null});er=function(){function n(n,t,i,r){n instanceof pi?this.store=n:(this.workItemType=n,this.store=n.store);this.id=t.id;this.name=t.name;this.referenceName=t.referenceName;this.flags=t.flags;this.type=t.type;this.usages=t.usages;this.rules=i;this.helpText=r||"";this.isIdentity=t.isIdentity;this.isHistoryEnabled=t.isHistoryEnabled}return n.prototype.checkFlag=function(n){return(this.flags&+n)!==lt.FieldFlags.None},n.prototype.canSortBy=function(){return this.checkFlag(lt.FieldFlags.Sortable)},n.prototype.isQueryable=function(){return this.checkFlag(lt.FieldFlags.Queryable)},n.prototype.isIgnored=function(){return s.equals(this.referenceName,f.CoreFieldRefNames.AreaId,!0)||s.equals(this.referenceName,f.CoreFieldRefNames.IterationId,!0)?!0:this.checkFlag(lt.FieldFlags.Ignored)},n.prototype.isCloneable=function(){return this.checkFlag(lt.FieldFlags.Cloneable)},n.prototype.isComputed=function(){return this.checkFlag(lt.FieldFlags.Computed)},n.prototype.supportsTextQuery=function(){return this.checkFlag(lt.FieldFlags.SupportsTextQuery)},n.prototype.isEditable=function(){switch(this.id){case f.CoreField.AreaPath:case f.CoreField.IterationPath:return!0;case f.CoreField.Id:case f.CoreField.Rev:case f.CoreField.WorkItemType:case f.CoreField.CreatedBy:case f.CoreField.IsDeleted:return!1}return!this.isComputed()},n.prototype.isCoreField=function(){return this.referenceName.toLowerCase().indexOf("system.")===0},n.prototype.isoobfield=function(){return this.referenceName.toLowerCase().indexOf("microsoft.vsts.")===0},n.prototype.isCustomField=function(){return!this.isCoreField()&&!this.isoobfield()},n}();t.FieldDefinition=er;i.initClassPrototype(er,{store:null,workItemType:null,id:null,name:null,referenceName:null,type:null,usages:lt.FieldUsages.None,flags:lt.FieldFlags.None,rules:null,helpText:""});or=function(){function n(n,t,i){this._isCommentDirty=!1;this._saving=!1;this._isChangeProjectInProgress=!1;this.id=0;this.tempId=0;this.revision=0;this.workItemType=n;this._originalWorkItemType=this.workItemType;this.store=n.store;this.project=n.project;this.extensions=i||[];this._originalExtensions=this.extensions;this._httpClient=this.store.tfsConnection.getHttpClient(g.WorkItemTrackingHttpClient);this.events=new w.NamedEventCollection;this._eventsEnabled=!1;this._initializeFields();this._defineExtensionFields();this._load(t,!1);this._eventsEnabled=!0;this.relatedData={};this.extensionIds=[];this._contributionErrorMap={};this.sessionId=s.generateUID()}return n.getTempId=function(){return--n.tempIdSeed},n.getTempIdSeed=function(){return n.tempIdSeed},n.reserveTempId=function(t){n.tempIdSeed>t&&(n.tempIdSeed=t)},n.getResourceUrl=function(n,t){var i=n.navigation.publicAccessPoint.scheme+"://"+n.navigation.publicAccessPoint.authority+n.getServiceHostUrl();return s.format("{0}_apis/wit/workItems/{1}",i,t)},n.prototype._initializeFields=function(){this.fields=[];this.fieldMap={};this.fieldMapById={};this._fieldValidationMap={};this._defineWorkItemTypeFields()},n.prototype.setContributionErrorStatus=function(n,t,i){if(t&&this._contributionErrorMap.hasOwnProperty(n))delete this._contributionErrorMap[n],this.fireWorkItemErrorChanged();else if(!t){var r=this._contributionErrorMap[n];this._contributionErrorMap[n]=i||"";r!==this._contributionErrorMap[n]&&this.fireWorkItemErrorChanged()}},n.prototype.resetContributionErrorStatuses=function(){this._contributionErrorMap&&Object.keys(this._contributionErrorMap).length>0&&(this._contributionErrorMap={},this.fireWorkItemErrorChanged())},n.prototype.hasAttachmentsPendingUpload=function(){var n=!1;return this.allLinks.some(function(t){return t instanceof rr&&t.getPlaceholderStatus()&&(n=!0),n})},n.prototype.isReset=function(){return this._isReset},n.prototype.getWorkItemContract=function(){var i=this,t;return this.isNew()?null:(t={},this.fields.forEach(function(n){t[n.fieldDefinition.referenceName]=i.getFieldValue(n.fieldDefinition.referenceName)}),{id:this.id,rev:this.revision,relations:null,fields:t,_links:null,url:n.getResourceUrl(this.store.getTfsContext(),this.id)})},n.prototype.getWorkItemRelations=function(){var n=this.allLinks,t=n.filter(function(n){return!n.isRemoved()&&n.linkData.FldID!==f.DalFields.AttachedFiles});return t.map(function(n){return{attributes:n.getAttributes(),rel:n.getRelationLinkType(),url:n.getLinkUrl()}})},n.prototype.doesLinkAlreadyExist=function(n){for(var u,i=!1,t=0,r=this.allLinks;t<r.length;t++)if(u=r[t],i=u.isDuplicate(n),i)return!0;return!1},n.prototype.changeWorkItemType=function(n,t,i){var r,e,o,u,h,l,c;if(!this.isReadOnly()&&this.workItemType!==n){for(r=n.project!==this.project,this._isChangeProjectInProgress=r,i||(r?this.fireWorkItemProjectChanging():this.fireWorkItemTypeChanging()),e=this.workItemType,o=this._getFieldChangeOnBugTypeChanged(e,n),this.workItemType=n,this.ruleEngine=null,this._initializeFields(),u=0,h=Object.keys(this._fieldData);u<h.length;u++)l=h[u],this._defineField(l);if(this.extensions=t||[],this._defineExtensionFields(),this._setProject(n.project),!s.equals(n.name,e.name)){this.setFieldValue(f.CoreField.WorkItemType,n.name);for(c in o)this.setFieldValue(c,o[c])}this.evaluate();this._isChangeProjectInProgress=!1;i||(r?this.fireWorkItemProjectChanged():this.fireWorkItemTypeChanged())}},n.prototype.isChangeProjectInProgress=function(){return this._isChangeProjectInProgress},n.prototype._getFieldChangeOnBugTypeChanged=function(n,t){var e={},u="<b><u><br/><br/>".concat(s.format(y.WorkItemChangedReproDescriptionMessage,this.getField(this._isBugTypeChange(n)?lt.BugWITFieldReferenceNames.ReproSteps:f.CoreFieldRefNames.Description).fieldDefinition.name,n.name,t.name),"<\/u><\/b><br/>"),i,o,r,h;return this._isBugTypeChange(n)?(i=this.getFieldValue(lt.BugWITFieldReferenceNames.ReproSteps),o=this.getFieldValue(f.CoreFieldRefNames.Description),i&&!st.WorkItemRichTextHelper.isHtmlVisuallyBlank(i)&&(e[f.CoreFieldRefNames.Description]=o?o+u+i:u+i)):this._isBugTypeChange(t)&&(r=this.getFieldValue(f.CoreFieldRefNames.Description),h=this.getFieldValue(lt.BugWITFieldReferenceNames.ReproSteps),r&&!st.WorkItemRichTextHelper.isHtmlVisuallyBlank(r)&&(e[lt.BugWITFieldReferenceNames.ReproSteps]=h?h+u+r:u+r)),e},n.prototype._isBugTypeChange=function(n){return n.fields?n.fields.some(function(n){return s.equals(n.referenceName,lt.BugWITFieldReferenceNames.ReproSteps,!0)}):!1},n.prototype.getOriginalWorkItemType=function(){return this._originalWorkItemType},n.prototype._setProject=function(n){this.isReadOnly()||this.project!==n&&(this.project=n,this._setFieldValueById(f.CoreField.TeamProject,n.name))},n.prototype._defineField=function(n){var t,i;this.fieldMap.hasOwnProperty((""+n).toUpperCase())||(t=this.workItemType.getFieldDefinition(n),t||(t=this.store.getFieldDefinition(n)),t&&!Boolean(this.fieldMapById[t.id+""])&&(i=new yi(this,t),this.fieldMap[t.referenceName.toUpperCase()]=i,this.fieldMap[t.name.toUpperCase()]=i,this.fieldMapById[t.id+""]=i,this.fields.push(i)))},n.prototype._defineWorkItemTypeFields=function(){var n=this;$.each(this.workItemType.fields,function(t,i){n._defineField(i.referenceName)})},n.prototype._defineExtensionFields=function(){var n=this;this.extensions&&$.each(this.extensions,function(t,i){i.markerField&&n._defineField(i.markerField.field.referenceName);i.fields&&$.each(i.fields,function(t,i){n._defineField(i.field.referenceName)})})},n.prototype.discardIfNew=function(){this.isNew()&&(this.fireWorkItemDiscarded(),b.getService().fire(lt.Actions.WORKITEM_DISCARDED,this))},n.prototype.isNew=function(){return+this.id<1},n.prototype.isDeleted=function(){return this.getFieldValue(f.CoreFieldRefNames.IsDeleted)},n.prototype.resetManualFieldChanges=function(){this.manuallySetFields={}},n.prototype.setExtensions=function(n){this.extensions=n||[];this._originalExtensions=this.extensions;this._defineExtensionFields();this.ruleEngine=null},n.prototype.isDirty=function(n,t){var f,r,u,i;if(this.isReadOnly()||this.isDeleted())return!1;if(this._fieldsDirty(n,t))return!0;for(f=this.allLinks,r=0,u=f;r<u.length;r++)if((i=u[r],!i.isRemoved())&&(!i.isNew()||!(i instanceof wi)||!i.linkData.isAddedBySystem)&&(i.deleted!==i.isNew()||i.updated))return!0;return!1},n.prototype.isValid=function(){var n=this.getInvalidFields(!0);return(!n||n.length===0)&&Object.keys(this._contributionErrorMap).length===0},n.prototype.isReadOnly=function(){return this._isReadOnly||this.isDeleted()},n.prototype.isExtensionField=function(n){return(n.usages&lt.FieldUsages.WorkItemTypeExtension)===lt.FieldUsages.WorkItemTypeExtension},n.prototype.getRevisions=function(){return this._revisions},n.prototype.getUniqueId=function(){return this.id||this.tempId},n.prototype.setError=function(n){this._error=n;this.fireWorkItemErrorChanged()},n.prototype.clearError=function(){this._error&&(this._error=null,this.fireWorkItemErrorChanged())},n.prototype.getError=function(){return this._error},n.prototype.hasError=function(){return this._error?!0:!1},n.prototype.getInvalidFields=function(n){for(var i,r=[],f=this.fields,t=0,u=f;t<u.length;t++)if(i=u[t],!i.isValid()&&(r.push(i),n))break;return r},n.prototype.getDirtyFields=function(n){for(var t,u,i=[],r=0,f=this.fields;r<f.length;r++)t=f[r],u=t.fieldDefinition.id.toString(),n&&this.manuallySetFields&&this.manuallySetFields.hasOwnProperty(u)?i.push(t):!n&&this.fieldUpdates&&this.fieldUpdates.hasOwnProperty(u)&&i.push(t);return i},n.prototype.isFieldDirty=function(n){var t=this.getField(n);return t&&t.isDirty()},n.prototype.setFieldValue=function(n,t,i,r){if(this.isReadOnly())return!1;var u=this.getField(n);return u?(u.setValue(t,!1,r,i),!0):!1},n.prototype.setIsCommentDirty=function(n){this._isCommentDirty=n},n.prototype.getIsCommentDirty=function(){return this._isCommentDirty},n.prototype.getFieldValue=function(n,t,i){var r=this.getField(n);if(r)return r.getValue(t,i)},n.prototype.getIdentityFieldValue=function(n,t,i){var r=this.getField(n);if(r)return r.getIdentityValue(t,i)},n.prototype.getFriendlyFieldValue=function(n,t,i){var r=this.getField(n);if(r)return r.getFriendlyValue(t,i)},n.prototype._getFieldValueById=function(n,t,i,r){var o=this.fieldUpdates,u,e;switch(n){case f.CoreField.AttachedFileCount:return this._getLinkCount(rr,t);case f.CoreField.ExternalLinkCount:return this._getLinkCount(ir,t);case f.CoreField.HyperLinkCount:return this._getLinkCount(lr,t);case f.CoreField.RelatedLinkCount:return this._getLinkCount(wi,t);case f.CoreField.Parent:return this._getParentLinkId(t);case f.CoreField.CommentCount:return this._getCommentCount(t);case f.CoreField.TeamProject:if(this.isNew()&&this.project)return this.project.name}return(u=n+"",!t&&o.hasOwnProperty(u)&&(e=o[u],!e.setByRule||!i))?ri.convertPotentialIdentityRefFromFieldValue(e.value,r):n===f.CoreField.History&&!pt.FeatureAvailabilityService.isFeatureEnabled(wt.FeatureAvailabilityFlags.GetWorkItemHistoryFieldValue)?"":ri.convertPotentialIdentityRefFromFieldValue(this._fieldData[u],r)},n.prototype._setFieldValueById=function(n,t,i){var o,c;if(!this.isReadOnly()){switch(n){case f.CoreField.AttachedFileCount:case f.CoreField.ExternalLinkCount:case f.CoreField.HyperLinkCount:case f.CoreField.RelatedLinkCount:case f.CoreField.Parent:case f.CoreField.CommentCount:return;case f.CoreField.AreaId:case f.CoreField.IterationId:if(!this.project.nodesCacheManager.getReferencedNode(t))throw new Error("Invalid node id.");}var r=n+"",u=this.getField(n),e=!1;u&&u.fieldDefinition&&(e=u.fieldDefinition.isIdentity);o=this._fieldData[r];!i&&this.manuallySetFields&&(this.manuallySetFields[r]=t);var s=n===f.CoreField.History,h=s&&!yi.compareValues("",t),l=!s&&!yi.compareValues(o,t,undefined,e);h||l?(this.fieldUpdates[r]={value:t,setByRule:i},h&&(c=this.getFieldValue(f.CoreField.CommentCount),this.evaluateField(f.CoreField.CommentCount,!0,c))):(delete this.fieldUpdates[r],this.manuallySetFields&&delete this.manuallySetFields[r])}},n.prototype.getFieldValueByRevision=function(n,t){var i=this._revisions,u=n+"",e,o,s,r;if(t<0)return null;if(n===f.CoreField.History)return t<i.length?i[t][u]:this._fieldData[u];if(e=this.getComputedFieldValue(n,t),e&&e.success)return e.value;for(o=void 0,s=!1,r=t;r<i.length;r++)if(i[r].hasOwnProperty(u)){o=ri.convertPotentialIdentityRefFromFieldValue(i[r][u]);s=!0;break}return s||(o=this._getFieldValueById(n,!0)),o},n.prototype.getNonComputedFieldValueByRevisionWithDefaultValue=function(n,t,i,r){if(t<0)return null;var u=this._revisions[t],e=n+"";return u&&u.hasOwnProperty(e)?ri.convertPotentialIdentityRefFromFieldValue(u[e],r):i===undefined||t>=this._revisions.length?this._getFieldValueById(n,!0,!1,r):i},n.prototype.getComputedFieldValue=function(n,t){var u=n+"",i,r;if(t>=0&&(n===f.CoreField.TeamProject||n===f.CoreField.IterationPath||n===f.CoreField.AreaPath)&&(i=this._revisions[t],i&&i.hasOwnProperty(u)&&(r=i[u],r)))return{success:!0,value:r};switch(n){case f.CoreField.TeamProject:return this._getFieldValueById(n,!0);case f.CoreField.NodeName:return this.computeFieldValue(f.CoreField.NodeName,f.CoreField.AreaId,t);case f.CoreField.IterationPath:return this.computeFieldValue(f.CoreField.IterationPath,f.CoreField.IterationId,t);case f.CoreField.AreaPath:return this.computeFieldValue(f.CoreField.AreaPath,f.CoreField.AreaId,t);default:return null}},n.prototype.isSaving=function(){return this._saving},n.prototype.isValidating=function(n){if(n)return this._fieldValidationMap[n.toString()]||!1;for(var t in this._fieldValidationMap)if(this._fieldValidationMap[t])return!0;return!1},n.prototype.getTitle=function(){return this._getFieldValueById(f.CoreField.Title)||""},n.prototype.getCaption=function(n,t){var i,r;return this.isNew()?(r=t?"":-this.tempId,i=s.format(y.WorkItemEditorCaptionNew,this.workItemType.name,r)):i=s.format(y.WorkItemEditorCaption,this.workItemType.name,this.id),n&&this.isDirty(!0)&&(i=s.format(y.WorkItemEditorDirtyCaption,i)),i},n.prototype.getInfoText=function(){var n={},t=this.getInvalidFields(!0);return t&&t.length>0?(n.text=t[0].getErrorText(),n.invalid=!0):this.hasError()?(this._error.fieldReferenceName&&!this.fieldMap[this._error.fieldReferenceName.toUpperCase()]?(n.text=y.BrowserRefreshRequired,it.publishEvent(new it.TelemetryEventData(ht.WIFormCIDataHelper.getArea(),"WorkItem.BrowserRefreshRequired",{fieldReferenceName:this._error.fieldReferenceName}))):n.text=tu(this.getError()),n.invalid=!0):Object.keys(this._contributionErrorMap).length>0?(n.invalid=!0,n.text=this._contributionErrorMap[Object.keys(this._contributionErrorMap)[0]]||""):n.text=this.getTitle(),n},n.prototype.getState=function(){return this._getFieldValueById(f.CoreField.State)||""},n.prototype.getPerson=function(n){return this.referencedPersons[n]||this.store.getCurrentUser()},n.prototype.getIdentity=function(n){return ri.isWorkItemIdentityRef(n)?n.identityRef:ri.createIdentityRefFromDistinctDisplayName(n)},n.prototype.updateCachedIdOnSave=function(){b.getService().fire(lt.Actions.WORKITEM_ID_UPDATED,this)},n.prototype.attachEvent=function(n,t){this.events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this.events.unsubscribe(n,t)},n.prototype.fireEvent=function(n,t){this._eventsEnabled&&this.events.invokeHandlers(n,this,t)},n.prototype.attachWorkItemChanged=function(n){this.attachEvent("workitem-changed",n)},n.prototype.detachWorkItemChanged=function(n){this.detachEvent("workitem-changed",n)},n.prototype.fireWorkItemChanged=function(n){n&&n.change!==lt.WorkItemChangeType.ErrorChanged&&n.change!==lt.WorkItemChangeType.SaveCompleted&&this.clearError();this.fireEvent("workitem-changed",n)},n.prototype.fireWorkItemPreSave=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.PreSave},n))},n.prototype.fireWorkItemSaved=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.Saved},n))},n.prototype.fireWorkItemSaving=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.Saving},n))},n.prototype.fireWorkItemValidating=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.Validating},n))},n.prototype.fireWorkItemValidationComplete=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.ValidationCompleted},n))},n.prototype.fireWorkItemRefresh=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.Refresh},n))},n.prototype.fireWorkItemReset=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.Reset},n))},n.prototype.fireWorkItemDiscarded=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.Discarded},n))},n.prototype.fireWorkItemSaveComplete=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.SaveCompleted},n))},n.prototype.fireWorkItemDeleted=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.Deleted},n))},n.prototype.fireWorkItemTypeChanging=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.TypeChanging},n))},n.prototype.fireWorkItemTypeChanged=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.TypeChanged},n))},n.prototype.fireWorkItemProjectChanging=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.ProjectChanging},n))},n.prototype.fireWorkItemProjectChanged=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.ProjectChanged},n))},n.prototype.fireWorkItemErrorChanged=function(t){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.ErrorChanged},t));this.hasError()&&this._error.fieldReferenceName?this.fireEvent("field-error:"+this._error.fieldReferenceName):this.fireEvent(n.FIELD_ERRORS_CLEARED)},n.prototype.fireWorkItemLinksUpdatedByOtherWorkItem=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:lt.WorkItemChangeType.WorkItemLinkChangedOutside},n))},n.prototype.fireFieldAllowedValuesChange=function(n){var i=this.getField(n),t={};t[n]=i;this.fireWorkItemChanged({workItem:this,change:lt.WorkItemChangeType.FieldAllowedValuesChange,changedFields:t})},n.prototype.fireFieldChange=function(t){var h=this,r={},f,e,o,s,i,u;if(this._eventsEnabled&&t){for(f=0,e=t;f<e.length;f++)i=e[f],r.hasOwnProperty(i)||(u=this.getField(i),u?(o=u.fieldDefinition.id,s=n.FIELD_ID_TO_DEPENDENT_ID_MAP[o],r[o]=u,s&&s.forEach(function(n){var t=h.getField(n);t&&(r[n]=t)})):r[i]=null);t=[];for(i in r)r.hasOwnProperty(i)&&(u=r[i],t[t.length]=i,this.fireEvent("field-change:"+i,u))}this.fireWorkItemChanged({workItem:this,change:lt.WorkItemChangeType.FieldChange,changedFields:r})},n.prototype.attachFieldChange=function(n,t){var i=this.getField(n);i?this.attachEvent("field-change:"+i.fieldDefinition.id,t):this.attachEvent("field-change:"+n,t)},n.prototype.detachFieldChange=function(n,t){var i=this.getField(n);i?this.detachEvent("field-change:"+i.fieldDefinition.id,t):this.detachEvent("field-change:"+n,t)},n.prototype.getField=function(n){var t=(""+n).toUpperCase();return this.fieldMapById[t]||this.fieldMap[t]},n.prototype.computeFieldValue=function(n,t,i){function o(n){var t,i;e&&(t=l.project.nodesCacheManager.getReferencedNode(e),t&&(i=void 0,i=t.path?et.NodeHelpers.getReferencedNodeSegmenets(t.path):et.NodeHelpers.getNodeSegments(t),u.value=i[n],u.success=!0))}var l=this,s,e,u={success:!1},h,c,r;s=n instanceof yi?n.fieldDefinition.id:n;e=i>=0?this.getFieldValueByRevision(t,i):this._getFieldValueById(t);switch(s){case f.CoreField.AreaId:case f.CoreField.IterationId:e&&(r=this.project.nodesCacheManager.getReferencedNode({path:e,nodeType:s===f.CoreField.AreaId?1:2}),r&&(u.value=r.id,u.success=!0));break;case f.DalFields.AreaLevel1:case f.DalFields.IterationLevel1:o(0);break;case f.DalFields.AreaLevel2:case f.DalFields.IterationLevel2:o(2);break;case f.DalFields.AreaLevel3:case f.DalFields.IterationLevel3:o(3);break;case f.DalFields.AreaLevel4:case f.DalFields.IterationLevel4:o(4);break;case f.DalFields.AreaLevel5:case f.DalFields.IterationLevel5:o(5);break;case f.DalFields.AreaLevel6:case f.DalFields.IterationLevel6:o(6);break;case f.DalFields.AreaLevel7:case f.DalFields.IterationLevel7:o(7);break;case f.CoreField.AreaPath:case f.CoreField.IterationPath:if(e){if(r=this.project.nodesCacheManager.getReferencedNode(e),!r&&(h=this.getFieldValueByRevision(f.CoreField.TeamProject,i),h))try{c=this.store.getProject(h);c.nodesCacheManager.isNodesCacheAvailable()&&(r=c.nodesCacheManager.findNodeById(e))}catch(a){}r?(u.value=r.path||et.NodeHelpers.getPath(r,1),u.success=!0):(u.value=s===f.CoreField.AreaPath?y.DeletedAreaPath:y.DeletedIterationPath,u.success=!0)}break;case f.CoreField.NodeName:e&&(r=this.project.nodesCacheManager.getReferencedNode(e),r&&(u.value=r.name,u.success=!0))}return u},n.prototype.beginSilentSave=function(){var i=this,t,n;return this.isReadOnly()?rt.reject(new Error(y.WorkItemIsReadOnlyError)):(t=this._eventsEnabled,this._eventsEnabled=!1,n=rt.defer(),this.beginSave(function(){i._eventsEnabled=t;n.resolve(null)},function(r){i._eventsEnabled=t;n.reject(r)}),n.promise)},n.prototype.saveAsync=function(){var n=this;return new Promise(function(t,i){return n.beginSave(function(n){return t(n)},function(n){return i(n)})})},n.prototype.beginSave=function(n,t,i){var c=this,o,p,s,h,u;if(this.isReadOnly()){t(y.WorkItemIsReadOnlyError);return}var l=0,a=0,v=0,e=this.getLinkUpdates();e&&(l=e.addedLinks?e.addedLinks.length:0,a=e.updatedLinks?e.updatedLinks.length:0,v=e.deletedLinks?e.deletedLinks.length:0);try{s=this.getFieldValue(f.DalFields.Tags);o=this._splitTagNames(s).length;h=this.getFieldValue(f.DalFields.Tags,!0);h!==s&&(p=o-this._splitTagNames(h).length)}catch(w){r.publishErrorToTelemetry(w)}return ot.PerfScenarioManager.endScenario(ft.WITUserScenarioActions.WORKITEM_CREATEOREDIT,{isNew:this.isNew(),fieldsChangedCount:Object.keys(this.manuallySetFields).length,addedLinksCount:l,updatedLinksCount:a,deletedLinksCount:v,isMobile:ct.WitFormModeUtility.isMobileForm,project:this.project.name,workItemType:"[NonEmail: "+this.workItemType.referenceName+"]",workItemSessionId:this.sessionId,workItemId:this.id}),u=ot.PerfScenarioManager.startScenario(ft.WITPerformanceScenario.WORKITEM_SAVE,!1),u.addData({workItemType:"[NonEmail: "+this.workItemType.referenceName+"]",numberOfTags:o,numberOfTagsDelta:p}),i==null&&(i=window.location.pathname),u.addData({PathName:i}),this.store.beginSaveWorkItemsBatch([this],function(t){u&&u.addSplitTiming(ft.PerformanceEvents.WORKITEM_SAVE_COMPLETE);$.isFunction(n)&&n.call(c,t);u&&ot.PerfScenarioManager.endScenario(u.getName())},function(n){u&&ot.PerfScenarioManager.abortScenario(u.getName());n&&n.name===lt.Exceptions.WorkItemBulkSaveException&&(n=n.results[0].error);gi(n,t,c)})},n.prototype.beginValidate=function(n,t,r,u){var o=this,f,e;!this.isDirty()||this.isValidating(t)||this.isSaving()||(f=this.getUpdateData(),f&&f.payload&&(this._setValidatingStatus(!0,t),v.logTracePoint("VSS.WorkItemTracking.WorkItem.beginValidate.start"),e=this.getField(n),this.workItemType.beginGetDependentFields(n,function(n){return __awaiter(o,void 0,void 0,function(){var h,f,o,i,c,l,s=this;return __generator(this,function(a){switch(a.label){case 0:h=n.concat(e.fieldDefinition);f={};o={};$.each(h,function(n,t){f[t.referenceName]=s.getFieldValue(t.id,!0);s.fieldUpdates.hasOwnProperty(t.id+"")&&(o[t.referenceName]=s.getFieldValue(t.id))});a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,ni.getService(fi.WebPageDataService).getDataAsync("ms.vss-work-web.work-item-rule-engine-data-provider",null,{fieldsToEvaluate:{projectId:this.project.guid,workItemType:this.workItemType.name,fields:[e.fieldDefinition.referenceName],fieldValues:f,fieldUpdates:o}})];case 2:return i=a.sent(),i&&i.exception?$.isFunction(u)&&(c=i.exception.customProperties&&i.exception.customProperties.FieldReferenceName||i.exception.customProperties.ReferenceName,u(i.exception,c)):this.isValidating(t)&&!this.isSaving()&&$.isFunction(r)&&r(),[3,5];case 3:return l=a.sent(),$.isFunction(u)&&u(l),[3,5];case 4:return this._setValidatingStatus(!1,t),v.logTracePoint("VSS.WorkItemTracking.WorkItem.beginValidate.end"),[7];case 5:return[2]}})})},i.handleError)))},n.prototype.getFieldUpdates=function(){var u={},t,n,i,f,r=this.fieldUpdates,e=this.workItemType.fieldMap,o=this.workItemType.fieldMapById;for(n in r)if(r.hasOwnProperty(n)){if(i=o[n]||e[n],i&&i.checkFlag(lt.FieldFlags.Computed))continue;t=r[n].value;typeof t=="undefined"&&(t=null);u[n]=t;f=!0}return f?u:null},n.prototype.getTemplateFieldValues=function(){var i=this,n={},t=this.initialValues||{};return $.each(this.manuallySetFields,function(r,u){var e=+r,o=i.getField(e),h,c=e+"",s;e!==f.CoreField.AreaId&&e!==f.CoreField.IterationId&&((s=o.getValue(),s instanceof ki)||(h=t.hasOwnProperty(c)?!yi.compareValues(t[c].value,u):!yi.compareValues(o.getValue(!0),u),h&&(n[o.fieldDefinition.referenceName]=s)))}),n},n.prototype.getLinkUpdates=function(n){for(var t,i,r=[],u=[],f=[],e=0,o=this.allLinks;e<o.length;e++)(t=o[e],t.isRemoved())||(t.deleted?(r.push(t.linkData),n&&n.deletedLinks.push(t)):t.isNew()?(f.push(t.linkData),n&&n.addedLinks.push(t)):t.updated&&(u.push(t.linkData),n&&n.updatedLinks.push(t)));return i=null,r.length>0&&(i=i||{},i.deletedLinks=r),u.length>0&&(i=i||{},i.updatedLinks=u),f.length>0&&(i=i||{},i.addedLinks=f),i},n.prototype._restoreLinkUpdates=function(n){var o,i,f,s,u,e,r,t;if(n){if(n.addedLinks)for(o=n.addedLinks,i=0,f=o;i<f.length;i++)r=f[i],t=bi.createFromLinkData(this,r),this.addLink(t);if(n.deletedLinks)for(s=n.deletedLinks,u=0,e=s;u<e.length;u++)r=e[u],t=this.findLink(bi.createFromLinkData(this,r)),t&&this.removeLinks([t])}},n.prototype.getUpdateData=function(){var t=!1,i={uniqueId:this.getUniqueId(),id:this.id,tempId:this.tempId,rev:this.revision,projectId:this.project.guid,addedLinks:[],deletedLinks:[],updatedLinks:[]},n={id:this.id,rev:this.revision,projectId:this.project.guid,isDirty:this._fieldsDirty()},r,u;return this.isNew()&&(n.tempId=this.tempId),r=this.getFieldUpdates(),r&&(n.fields=r,this.hasTeamProjectChanged()&&(n.fields[f.CoreFieldRefNames.TeamProject]=this.project.name),t=!0),u=this.getLinkUpdates(i),u&&(n.links=u,t=!0),t&&(i.payload=n),i},n.prototype.setRevisions=function(n){this._revisions=n;this._revisionsPopulated=!0},n.prototype.getRevisionsArePopulated=function(){return this._revisionsPopulated},n.prototype._takeUpdateResult=function(n,t,i){var l,a,v,p,r,h,c,w,b;ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_TAKEUPDATERESULT,!0);l=[];a=this.id;try{if(this._loadTime=n.loadTime,this.ruleEngine=null,this.extensions=i,this._originalExtensions=this.extensions,this._defineExtensionFields(),v=n.rev!==this.revision,p=n.fields&&this._fieldData&&n.fields[f.CoreField.Watermark]!==this._fieldData[f.CoreField.Watermark],v||p){if(this._setFieldValueById(f.CoreField.Id,n.id),this.id=n.id,a===0&&this.updateCachedIdOnSave(),this._setFieldValueById(f.CoreField.Rev,n.rev),this.revision=n.rev,r=void 0,h=n.fields,h)for(r in h)h.hasOwnProperty(r)&&(this._setFieldValueById(+r,h[r]),l.push(+r));var e=this.fieldUpdates,u=this._fieldData,s=void 0,y=""+f.CoreField.ChangedBy,o=""+f.CoreField.History;if(n.rev===1){for(r in e)e.hasOwnProperty(r)&&(u[r]=e[r].value);u[o]&&this._addDiscussionForRevision(u[o],u)}else if(v){s={};u.hasOwnProperty(y)&&(s[y]=u[y]);for(r in e)e.hasOwnProperty(r)&&(s[r]=u[r],u[r]=e[r].value);u.hasOwnProperty(o)&&(s.hasOwnProperty(o)||(s[o]=u[o],delete u[o]));this._revisionsPopulated&&this._revisions.push(s);u[o]&&this._addDiscussionForRevision(u[o],u)}else for(r in e)e.hasOwnProperty(r)&&(u[r]=e[r].value);this.fieldUpdates={}}}finally{ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_TAKEUPDATERESULT,!1)}ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_EVALUATELINKUPDATES,!0);try{c=this._takeLinkUpdateResult(n,t);this.resetHistory();this.evaluate(c.changedFields,l);this.resetManualFieldChanges()}finally{ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_EVALUATELINKUPDATES,!1)}ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_RESETAFTERSAVE,!0);try{w=this.hasWorkItemTypeChanged();b=this.hasTeamProjectChanged();this._originalWorkItemType=this.workItemType;this.fireWorkItemSaved({changedWorkItemLinks:c.changedWorkItemLinks,externalLinkChanged:c.externalLinkChanged,firstSave:a!==this.id,typeChanged:w,projectChanged:b})}finally{ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_RESETAFTERSAVE,!1)}},n.prototype._takeLinkUpdateResult=function(n,t){var i=this,c=this.allLinks,r={},e=[],u=!1,l=function(n){return n.SourceID===i.id?{targetId:n.TargetID,linkType:n.LinkType,remoteHostId:n.RemoteHostId}:{targetId:n.SourceID,linkType:i.store.findLinkTypeEnd(n.LinkType).oppositeEnd.id,remoteHostId:n.RemoteHostId}},a=function(n,t,i){var r=null;return $.each(c,function(u,f){if(f instanceof wi&&!f.isRemoved()){var e=f;if(e.getTargetId()===n&&(!f.remoteHostId||f.remoteHostId===i)&&e.getLinkType()===t)return r=e,!1}}),r},v={},o,s,h;$.each(t.deletedLinks,function(n,t){t instanceof wi||(r[""+t.getFieldId()]=!0,t.linkData.RemovedDate=i._getFieldValueById(f.DalFields.LastChangedDateId),v[t.linkData.FilePath]=t)});$.each(n.deletedLinks,function(n,t){var o,f,s;t.ExtID?!u&&t.FilePath&&(s=v[t.FilePath],s instanceof ir&&(u=!0)):(o=l(t),f=a(o.targetId,o.linkType,o.remoteHostId),f&&(r[""+f.getFieldId()]=!0,f.linkData["Revised Date"]=t.ChangedDate,f.linkData["Revised By"]=t.ChangedBy,e.push({command:"remove",sourceId:i.id,targetId:f.getTargetId(),linkData:f.linkData})))});o={};$.each(t.addedLinks,function(n,t){t instanceof wi||(o[t.linkData.FilePath]=t)});$.each(n.addedLinks,function(n,t){var h,v,s;t.ExtID?(h=o[t.FilePath],h&&(r[""+h.getFieldId()]=!0,h.linkData.ExtID=t.ExtID,h.linkData.AddedDate=i._getFieldValueById(f.DalFields.LastChangedDateId),h instanceof ir&&(u=!0))):(v=l(t),s=a(v.targetId,v.linkType,v.remoteHostId),s||(s=wi.create(i,v.linkType,v.targetId,null),c.push(s)),r[""+s.getFieldId()]=!0,s.linkData["Changed Date"]=t.ChangedDate,s.linkData["Changed By"]=t.ChangedBy,e.push({command:"add",sourceId:i.id,targetId:s.getTargetId(),linkData:s.linkData}))});this.resetLinks();s=[];for(h in r)r.hasOwnProperty(h)&&s.push(+h);return{changedFields:s,changedWorkItemLinks:e,externalLinkChanged:u}},n.prototype._getRuleEngine=function(){if(!this.ruleEngine){var n=[];$.each(this.workItemType.fields,function(t,i){i.rules&&n.push({fieldId:i.id,rules:i.rules})});this.extensions&&$.each(this.extensions,function(t,i){i.fieldRules&&$.each(i.fieldRules,function(t,i){n.push({fieldId:t,rules:i})})});this.ruleEngine=new vr(this,n)}return this.ruleEngine},n.prototype._evaluateSilent=function(){var n=this._eventsEnabled;this._eventsEnabled=!1;try{this.evaluate()}finally{this._eventsEnabled=n}},n.prototype.evaluate=function(n,t){var r=[],i={},u;$.each(this.workItemType.getTriggerList(),function(n,t){var u=t+"";i.hasOwnProperty(u)||(r.push(t),i[u]=!0)});t?($.each(t,function(n,t){var u=t+"";i.hasOwnProperty(u)||(r.push(t),i[t]=!0)}),u=f.DalFields.HistoryId+"",i.hasOwnProperty(u)||(r.push(f.DalFields.HistoryId),i[u]=!0)):$.each(this.fields,function(n,t){var u=t.fieldDefinition.id,f=u+"";i.hasOwnProperty(f)||(r.push(u),i[f]=!0)});this.evaluateFields(r,n)},n.prototype.evaluateField=function(n,t,i){return this._getRuleEngine().evaluateField(n,t,i)},n.prototype.evaluateFields=function(n,t){var i={},r;t&&$.each(t,function(n,t){i[t+""]=!0});r=this._getRuleEngine().evaluateFields(n);r&&$.each(r,function(n,t){i[t+""]=!0});this.fireFieldChange(e.keys(i))},n.prototype.resetLinks=function(n){var r,i,t,u;if(this._links=null,n)for(i=this.allLinks,t=0,u=i.length;t<u;t++)r=i[t],r.deleted&&r.isNew()&&(i.splice(t--,1),u--)},n.prototype.getLinks=function(){var r,u,n,i,t;if(!this._links)for(this._links=r=[],u=this.allLinks,n=0,i=u;n<i.length;n++)t=i[n],t.deleted||t.isRemoved()||r.push(t);return this._links},n.prototype.findLink=function(n){var u,t,i,r;for(u=this.allLinks,t=0,i=u;t<i.length;t++)if(r=i[t],r.equals(n))return r;return undefined},n.prototype.addLink=function(n){this.addLinks([n])},n.prototype.addLinks=function(n){var i,e,c,r,u,o,f;if(!this.isReadOnly()){var t={},l=function(n){var r=!1,u=!1,i;if($.each(h.allLinks,function(t,i){if(!i.isRemoved()&&n.isDuplicate(i)){if(i.deleted)return s.equals(i.getComment(),n.getComment(),!1)||i.setComment(n.getComment()),r=!0,i.deleted=!1,!1;u=!0}}),u)return"continue";i=n.getFieldId();r?t[i]=0:(t[i]=(t[i]||0)+1,h.allLinks.push(n))},h=this;for(i=0,e=n;i<e.length;i++)c=e[i],l(c);if(n.length){this.resetLinks();r=[];u=void 0;for(o in t)t.hasOwnProperty(o)&&(f=+o,r.push(f),u=bi.getCountFieldId(f),this.evaluateField(u,!0,this.getFieldValue(u)-t[f]));this.evaluateFields(r,r)}}},n.prototype.removeLinks=function(n){var s,t,i,u,h,r,f,e,o;if(!this.isReadOnly()){for(s=0,t={},u=0,h=n;u<h.length;u++)r=h[u],r.getIsLocked()||(i=r.getFieldId(),r.remove({preventEvent:!0}),t[r.getFieldId()]=(t[i]||0)+1,s++);if(s){this.resetLinks(!0);f=[];e=void 0;for(o in t)t.hasOwnProperty(o)&&(i=+o,f.push(+o),e=bi.getCountFieldId(i),this.evaluateField(e,!0,this.getFieldValue(e)+t[i]));this.evaluateFields(f,f)}}},n.prototype.resetHistory=function(){b.getService().fire(lt.Actions.RESET_HISTORY,this,null)},n.prototype.getLoadTime=function(){return this._loadTime},n.prototype.getLinkUpdatedExternallyDate=function(){return this._linkUpdatedExternallyDate},n.prototype.linksUpdatedExternally=function(){this._linkUpdatedExternallyDate=new Date;this.resetHistory()},n.prototype._addDiscussionForRevision=function(n,t){var i=""+f.CoreField.CommentCount;this._fieldData[i]=this._getCommentCount();b.getService().fire(lt.Actions.DISCUSSION_ADDED,this,{historyText:n,revision:t})},n.prototype._resetDiscussion=function(){b.getService().fire(lt.Actions.RESET_DISCUSSION,this,null)},n.prototype.DiscussionCommentUpdated=function(n){b.getService().fire(lt.Actions.DISCUSSION_COMMENT_UPDATED,this,{workItemId:this.id,commentId:n})},n.prototype.beginResetExtension=function(n,t,i){var r=this;this.store.beginGetWorkItemTypeExtension(n,function(n){for(var i=0,u=r.extensions.length;i<u;i++)if(s.equals(r.extensions[i].id,n.id)){r.extensions[i]=n;r.ruleEngine=null;break}r.evaluate();$.isFunction(t)&&t(n)},i)},n.prototype.reset=function(){this.resetContributionErrorStatuses();this.resetChanges(!1);this.relatedData={};this._isReset=!0;var n=[f.DalFields.RelatedLinks,f.DalFields.BISURI,f.DalFields.LinkedFiles,f.DalFields.AttachedFiles,f.DalFields.Tags];this.fieldMap[f.CoreFieldRefNames.Parent]&&n.push(f.CoreField.Parent);this.fireFieldChange(n);this.fireWorkItemReset()},n.prototype.resetChanges=function(n){var t,r,i,u;for(this._isCommentDirty=!1,this._links=null,r=this.allLinks,i=0,u=r.length;i<u;i++)t=r[i],t.isNew()?(r.splice(i--,1),u--):(t.deleted=!1,t.linkData.CommentChanged&&(t.linkData.Comment=t.comment,t.linkData.CommentChanged=!1),t.linkData.LockChanged&&(t.linkData.Lock=t.isLocked,t.linkData.LockChanged=!1),t.setState());this.fieldUpdates={};n?this._evaluateSilent():this.evaluate();this.resetManualFieldChanges();this._resetWorkItemTypeChanges()},n.prototype.updateWorkItemPayload=function(n,t,i,r){var u=this,e=function(){u._load(n,!0,r);u.fireWorkItemRefresh();$.isFunction(t)&&t.call(u,u)},o=n.fields[f.CoreField.TeamProject],s=n.fields[f.CoreField.WorkItemType];this._evaluateWorkItemTypeChange(o,s,e,i)},n.prototype.beginRefresh=function(n,t,i,r){var u=this;if(this.isNew())try{this.reset();$.isFunction(n)&&n.call(this,this)}catch(f){gi(f,t,this)}else this._isReset=!0,this.store.beginGetWorkItemData([this.id],function(i){u.updateWorkItemPayload(i,n,t,r)},t,i)},n.prototype._resetWorkItemTypeChanges=function(){if(this.hasWorkItemTypeChanged()){var n={SourceType:this._originalWorkItemType.name,DestinationType:this.workItemType.name};this.workItemType.project!==this._originalWorkItemType.project?it.publishEvent(new it.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ft.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_MOVE_REVERT,n)):it.publishEvent(new it.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ft.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_REVERT,n));this.changeWorkItemType(this._originalWorkItemType,this._originalExtensions);this._originalWorkItemType=this.workItemType;this._originalExtensions=this.extensions}},n.prototype._evaluateWorkItemTypeChange=function(n,t,i,r){var u=this;s.equals(n,this._originalWorkItemType.project.name,!0)&&s.equals(t,this._originalWorkItemType.name,!0)?s.equals(n,this.workItemType.project.name,!0)&&s.equals(t,this.workItemType.name,!0)?i():(this._resetWorkItemTypeChanges(),i()):this.store.beginGetProject(n,function(n){n.beginGetWorkItemType(t,function(n){u.changeWorkItemType(n);u._originalWorkItemType=n;i()},r)},r)},n.prototype._copyField=function(n,t,i){var u,r;if(t&&t.isCloneable()&&(u=this.getField(t.id),u&&(r=u.getValue(),!yi.isEmpty(r)))){if((t.id===f.CoreField.AreaId||t.id===f.CoreField.IterationId)&&(typeof r!="number"||this.project.id!==i.project.id))return;n.setFieldValue(t.id,r)}},n.prototype.copy=function(n,t,i,r,u,e,o,h){var wt=this,rt=[],l=[],w={},at,vt,c,k,ut,et,d,g,ot,a,nt,yt,v,pt,tt,st,ht,p,ct;for(n=n instanceof fr?n:this.workItemType,t=typeof t!="boolean"?!0:t,i=typeof i!="boolean"?!0:i,r=typeof r!="boolean"?!0:r,u=typeof u!="boolean"?!0:u,o=typeof o!="boolean"?!0:o,at=new it.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ft.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_INCLUDE_WORKITEM_LINKS_ATTACHMENTS,{action:"Telemetry for Copy links and attachments checkbox",copyLinks:t,copyAttachments:i}),it.publishEvent(at),vt=[f.OobFieldRefNames.ResolvedBy,f.OobFieldRefNames.ResolvedDate,f.OobFieldRefNames.ClosedBy,f.OobFieldRefNames.ClosedDate,"Microsoft.Sync.ProjSrv.RequestedAssnGuid","Microsoft.Sync.ProjSrv.RequestedProjGuid","Microsoft.Sync.ProjSrv.ProjGuid","Microsoft.Sync.ProjSrv.TaskGuid"],e=e||[],vt.forEach(function(n){var t=wt.store.getFieldDefinition(n);t&&e.push(t.id.toString())}),$.each(e,function(n,t){w[t]=!0}),c=n.create(),b.getService().fire(lt.Actions.WORKITEM_COPIED,c),k=0,ut=n.triggerList;k<ut.length;k++)et=ut[k],d=et.toString(),w.hasOwnProperty(d)||(a=n.fieldMapById[d],a?this._copyField(c,a,n):it.publishEvent(new it.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"CloneWorkItem_FieldNotFound",{typeName:"[NonEmail:".concat(n.name,"]"),triggerList:"[NonEmail:".concat(n.triggerList.join(),"]"),fieldMap:"[NonEmail:"+JSON.stringify(Object.keys(n.fieldMapById).map(function(t){return{fieldId:t,fieldRefName:n.fieldMapById[t]?n.fieldMapById[t].referenceName:""}}))+"]",fieldId:et})),w[d]=!0);for(g=0,ot=n.fields;g<ot.length;g++)a=ot[g],w.hasOwnProperty(a.id.toString())||this._copyField(c,a,n);if(r&&(nt=void 0,this.isNew()?nt=y.CreateCopyCopiedFromNewWorkItem:(yt="<a href='x-mvwit:workitem/".concat(this.id,"'>").concat(this.workItemType.name," ").concat(this.id,"<\/a>"),v=y.CreateCopyCopiedFrom,t&&i?v=y.CreateCopyCopiedWithAllLinksAndAttachmentsFrom:t?v=y.CreateCopyCopiedWithAllLinksFrom:i&&(v=y.CreateCopyCopiedWithAllAttachmentsFrom),nt=s.format(v,yt)),c.setFieldValue(f.CoreField.History,nt)),t||i)for(pt=this.getLinks(),tt=0,st=pt;tt<st.length;tt++)ht=st[tt],p=ht.clone(c),p instanceof rr?i&&rt.push(p):t&&p&&(!h||h.indexOf(ht.linkData.LinkType)===-1)&&l.push(p);return!this.isNew()&&o&&l.push(wi.create(c,this.store.findLinkTypeEnd(lt.LinkTypeName.Related_Link_Name),this.id,"")),rt.length>0&&l.push.apply(l,rt),l.length>0&&c.addLinks(l),ct=[f.DalFields.RelatedLinks,f.DalFields.AttachedFiles,f.DalFields.BISURI,f.DalFields.LinkedFiles],this.fieldMap[f.CoreFieldRefNames.Parent]&&ct.push(f.CoreField.Parent),c.evaluate(ct),c},n.prototype.copyWithChildren=function(n,t,i,r,u,f,e){return __awaiter(this,void 0,void 0,function(){var o,a,h,c,v,p,l,w,b,k=this;return __generator(this,function(d){switch(d.label){case 0:if(o=this.copy(n,t,i,r,u,f,e,[lt.CoreLinkTypes.Child]),!o.isValid()){a=o.getInvalidFields()[0].getErrorText();throw Error(a);}if(h=this.getLinks().filter(function(n){return n.linkData.LinkType===lt.CoreLinkTypes.Child}).map(function(n){return n.linkData.ID}),c=100,h.length>c)throw Error(s.format(y.TooManyChildItemsToCopy,c));return(h.length>0)?[4,this.store.getWorkItemsAsync(h,!1,!0,!0)]:[3,3];case 1:return v=d.sent(),p=v.filter(function(n){return n.project.guid===o.project.guid}),l=p.map(function(n){var o=n.copy(n.workItemType,t,i,r,u,f,e,[lt.CoreLinkTypes.Parent]),h;if(!o.isValid()){h=o.getInvalidFields()[0].getErrorText();throw Error(s.format(y.ErrorCopyingChildItem,n.id,h));}return o}),[4,this.store.saveWorkItemsBatchAsync(l)];case 2:d.sent();w=l.map(function(n){return wi.create(o,k.store.findLinkTypeEnd(lt.LinkTypeName.Child_Link_Name),n.id,"")});o.addLinks(w);d.label=3;case 3:return b=new it.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ft.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_COPY_WITH_CHILDREN,{action:"Copy work item with children",copyLinks:t,copyAttachments:i,children:h.length}),it.publishEvent(b),[2,o]}})})},n.prototype.getTagNames=function(){return this._splitTagNames(this.getFieldValue(f.DalFields.Tags))},n.prototype._splitTagNames=function(n){return n?$.trim(n).split(/;\s*/):[]},n.prototype._load=function(t,i,r){var h,l,p=this,o,a,u,s,e,v,y;t=t||{};this._isReadOnly=t.isReadOnly||!1;this._loadTime=t.loadTime||new Date;this._fieldData=t.fields||{};for(u in this._fieldData)this._fieldData.hasOwnProperty(u)&&(s=this.workItemType.getFieldDefinition(u),s&&(yi.isLongTextField(s.type)?(e=this._fieldData[u],e&&(this._fieldData[u]=e.trim())):s.isIdentity&&(e=this._fieldData[u],e&&ri.setResolvedByDescriptorIfWorkItemIdentityRef(e))));this._revisions=t.revisions||[];this.fieldUpdates=r&&this.fieldUpdates.hasOwnProperty(f.CoreField.History)?(h={},h[f.CoreField.History]=this.fieldUpdates[f.CoreField.History],h):{};$.each(this._fieldData,function(n){p._defineField(n)});i&&($.each(this.fields,function(n,t){t._reset()}),this.resetContributionErrorStatuses());o=[];t.files&&c.addRange(o,t.files);t.relations&&c.addRange(o,t.relations);t.relationRevisions&&c.addRange(o,t.relationRevisions);this.allLinks=a=[];this._links=null;a.push.apply(a,o.map(function(n){return bi.createFromLinkData(p,n)}));this.relatedData={};this.referencedPersons=t.referencedPersons||{};this.project.nodesCacheManager.addReferencedNodes(t.referencedNodes);this.id=this._getFieldValueById(f.CoreField.Id)||0;this.id===0&&(t.tempId?(this.tempId=t.tempId,n.reserveTempId(this.tempId)):this.tempId=n.getTempId());this.revision=this._getFieldValueById(f.CoreField.Rev)||0;this.isNew()?(v=this.project.id,this._setFieldValueById(f.CoreField.AreaId,v,!0),this._setFieldValueById(f.CoreField.IterationId,v,!0),this._setFieldValueById(f.CoreField.WorkItemType,this.workItemType.name,!0),this._revisionsPopulated=!0):this._revisionsPopulated=t.revisions!=undefined&&t.revisions!=null&&t.revisions.length>0||t.relationRevisions!=undefined&&t.relationRevisions!=null&&t.relationRevisions.length>0;this.resetHistory();this._resetDiscussion();y=[f.DalFields.RelatedLinks,f.DalFields.AttachedFiles,f.DalFields.BISURI,f.DalFields.LinkedFiles];this.fieldMap[f.CoreFieldRefNames.Parent]&&y.push(f.CoreField.Parent);this.evaluate(y);this.isNew()&&(this.initialValues=$.extend({},this.fieldUpdates));this.manuallySetFields=r&&this.manuallySetFields.hasOwnProperty(f.CoreField.History)?(l={},l[f.CoreField.History]=this.manuallySetFields[f.CoreField.History],l):{}},n.prototype._fieldsDirty=function(n,t){var u,e,s,r,o,h,i,f;if(n){if(this.manuallySetFields){if(u=__assign({},this.manuallySetFields),t&&t.length>0)for(e=0,s=t;e<s.length;e++)i=s[e],delete u[i],delete u[i.toString()];for(f in u)if(u.hasOwnProperty(f))return!0}}else{if(this.isNew())return!0;if(r=__assign({},this.fieldUpdates),t&&t.length>0)for(o=0,h=t;o<h.length;o++)i=h[o],delete r[i],delete r[i.toString()];for(f in r)if(r.hasOwnProperty(f)&&!r[f].setByRule)return!0}return!1},n.prototype._setSavingStatus=function(n,t){this._saving!==n&&(this._saving=n,n?this.fireWorkItemSaving():this.fireWorkItemSaveComplete(t))},n.prototype._setValidatingStatus=function(n,t){var i=!1,r;if(t)this._fieldValidationMap[t.toString()]!==n&&(this._fieldValidationMap[t.toString()]=n,i=!0);else for(r in this._fieldValidationMap)this._fieldValidationMap[r]!==n&&(this._fieldValidationMap[r]=n,i=!0);i&&(n?this.fireWorkItemValidating():this.fireWorkItemValidationComplete())},n.prototype._getLinkCount=function(n,t){var i=0,r=this.getLinks();return $.each(r,function(r,u){t&&u.isNew()||(n?u instanceof n&&i++:i++)}),i},n.prototype._getParentLinkId=function(n){for(var t,r,f=this.getLinks(),i=0,u=f;i<u.length;i++)if((t=u[i],!n||!t.isNew())&&t instanceof wi&&(r=t,r.getLinkType()===lt.CoreLinkTypes.Parent))return r.getTargetId();return undefined},n.prototype._getCommentCount=function(n){var t=this._fieldData[f.CoreField.CommentCount]||0;return!n&&this.fieldUpdates.hasOwnProperty(f.CoreField.History)&&(t+=1),t},n.prototype.hasWorkItemTypeChanged=function(){return this._originalWorkItemType!==this.workItemType},n.prototype.hasTeamProjectChanged=function(){return this._originalWorkItemType.project!==this.project},n.tempIdSeed=0,n.FIELD_ID_TO_DEPENDENT_ID_MAP=(nr={},nr[f.DalFields.AttachedFiles]=[f.CoreField.AttachedFileCount],nr[f.DalFields.RelatedLinks]=[f.CoreField.RelatedLinkCount,f.CoreField.Parent],nr[f.DalFields.LinkedFiles]=[f.CoreField.HyperLinkCount],nr[f.DalFields.BISURI]=[f.CoreField.ExternalLinkCount],nr[f.DalFields.HistoryId]=[f.CoreField.CommentCount],nr),n.MAX_TITLE_LENGTH=255,n.FIELD_ERRORS_CLEARED="field-errors-cleared",n}();t.WorkItem=or;yi=function(){function n(n,t){this.workItem=n;this.fieldDefinition=t}return n.isEmpty=function(n){return n===null||typeof n=="undefined"||typeof n=="string"&&$.trim(n).length===0},n.compareValues=function(t,i,r,u){var f,e,o;return t instanceof ki?i instanceof ki&&t.type===i.type?n.compareValues(t.value,i.value,r):!1:i instanceof ki?!1:(t=ri.convertPotentialIdentityRefFromFieldValue(t,!1),i=ri.convertPotentialIdentityRefFromFieldValue(i,!1),(t===null||typeof t=="undefined")&&(t=""),(i===null||typeof i=="undefined")&&(i=""),t=""+t,i=""+i,f=!1,f=r?s.localeIgnoreCaseComparer(t,i)===0:s.localeComparer(t,i)===0,!f&&u&&(e=ui.IdentityHelper.parseUniquefiedIdentityName(t),o=ui.IdentityHelper.parseUniquefiedIdentityName(i),e&&o&&e.uniqueName&&o.uniqueName&&(f=s.localeIgnoreCaseComparer(e.uniqueName,o.uniqueName)===0)),f)},n.isMatch=function(n,t){return n?(n=n.replace(/[.*+?|()\[\]\^\${}\\]/g,"\\$&"),n=n.replace(/n/gi,"\\d").replace(/a/gi,"[a-zA-Z]").replace(/x/gi,"[a-zA-Z0-9]"),n="^"+n+"$",new RegExp(n,"i").test(t)):!0},n.hashset=function(n,t){var r={},u,e,f,o,i;if(t){if(n.__hashSetCaseInsensitive)return n.__hashSetCaseInsensitive;for(u=0,e=n;u<e.length;u++)i=e[u],r[i.toLocaleUpperCase()]=i;n.__hashSetCaseInsensitive=r}else{if(n.__hashSet)return n.__hashSet;for(f=0,o=n;f<o.length;f++)i=o[f],r[i]=i;n.__hashSet=r}return r},n.contains=function(t,i,r){if(r){var u=n.hashset(t,!0);return u.hasOwnProperty(i.toLocaleUpperCase())}return $.inArray(i,t)>=0},n.normalize=function(t,i){if(i){var r=n.hashset(t,!0);return r[i.toLocaleUpperCase()]||i}return i},n.intersect=function(t,i,r){var e,u,o,h,s,l,f;if(!i)return t;if(i.length===0)return[];if(t.length<i.length?e=n.hashset(t,r):(e=n.hashset(i,r),i=t),u=[],c.copySortFlag(u,i),r)for(o=0,h=i;o<h.length;o++)f=h[o],e.hasOwnProperty(f.toLocaleUpperCase())&&(u[u.length]=f);else for(s=0,l=i;s<l.length;s++)f=l[s],e.hasOwnProperty(f)&&(u[u.length]=f);return u},n.union=function(n,t,i){var e=i?s.localeIgnoreCaseComparer:s.localeComparer,r;if(!t||t.length===0)return n;if(!n||n.length===0)return t;c.sortIfNotSorted(n,e);c.sortIfNotSorted(t,e);r=[];c.flagSorted(r,e);for(var u=0,a=n.length,f=0,v=t.length,o,h,l;u<a&&f<v;)o=n[u],h=t[f],l=e(o,h),l===0?(r[r.length]=o,u++,f++):l>0?(r[r.length]=h,f++):(r[r.length]=o,u++);while(u<a)r[r.length]=n[u],u++;while(f<v)r[r.length]=t[f],f++;return r},n.subtract=function(t,i,r){var s,u,e,h,o,l,f;if(!i||i.length===0)return t;if(u=[],c.copySortFlag(u,t),s=n.hashset(i,r),r)for(e=0,h=t;e<h.length;e++)f=h[e],s.hasOwnProperty(f.toLocaleUpperCase())||(u[u.length]=f);else for(o=0,l=t;o<l.length;o++)f=l[o],s.hasOwnProperty(f)||(u[u.length]=f);return u},n.inList=function(t,i,r,u,f){var o,e,h,c;if(r&&n.contains(r,i,f))return!0;if(u)for(e=0,h=u;e<h.length;e++)if(c=h[e],o=t.getConstantSet(c),!o,n.contains(o,i,f))return!0;return!1},n.unionLists=function(t,i,r){var u,e,f,o,h;if(r){for(i?(u=i.slice(0),c.copySortFlag(u,i)):(u=[],c.flagSorted(u,s.localeIgnoreCaseComparer)),f=0,o=r;f<o.length;f++)h=o[f],e=t.getConstantSet(h),!e,u=n.union(u,e,!0);return u}return i},n.isLongTextField=function(n){switch(n){case f.FieldType.PlainText:case f.FieldType.Html:case f.FieldType.History:return!0;default:return!1}},n.isNumericField=function(n){switch(n){case f.FieldType.Integer:case f.FieldType.Double:return!0;default:return!1}},n.isStringField=function(n){switch(n){case f.FieldType.PlainText:case f.FieldType.Html:case f.FieldType.History:case f.FieldType.String:return!0;default:return!1}},n.convertValueToDisplayString=function(n){return n!==null&&typeof n!="undefined"&&n instanceof ki&&(n=n.value),o.convertValueToDisplayString(n)},n.isValidStringFieldValue=function(n,t){return!t&&s.containsControlChars(n)?!1:!s.containsMismatchedSurrogateChars(n)},n.normalizeStringValue=function(n,t){return t||(n=n.replace(uu," ")),n.replace(fu," ")},n.normalizeHtmlValue=function(n,t,i){var r="class",u=[];return(!t||t.indexOf(r)<0)&&u.push(r),tt.HtmlNormalizer.normalizeStripAttributes(n,u,t,i)},n.convertValueToInternal=function(t,i,r){var s=0,u,c,o;if(i===null||typeof i=="undefined")u=null;else if(typeof i=="string"&&i.length===0)u=null;else if(i instanceof ki)u=i;else try{switch(r){case f.FieldType.Boolean:if(typeof i=="boolean")u=i?1:0;else if(typeof i=="number")u=i!==0?1:0;else if(typeof i=="string")u=/^\d+$/.test(i)?l.parseLocale(i)!==0?1:0:e.BoolUtils.parse(i)?1:0;else throw new Error("Invalid Boolean field value.");break;case f.FieldType.Integer:if(typeof i=="number"?u=Math.round(i):typeof i=="boolean"?u=i?0:1:typeof i=="string"&&/^[\-+]?\d+$/.test(i.trim())&&(u=l.parseLocale(i)),typeof u=="undefined"||isNaN(u)||!isFinite(u)||u>n.SqlIntMaxValue-1||u<-n.SqlIntMaxValue)throw new Error("Invalid Integer field value,  ".concat(i));break;case f.FieldType.Double:if(typeof i=="number"?u=i:typeof i=="boolean"?u=i?0:1:typeof i=="string"&&(u=l.parseLocale(i)),typeof u=="undefined"||isNaN(u)||!isFinite(u))throw new Error("Invalid Double field value,  ".concat(i));break;case f.FieldType.DateTime:if(u=i instanceof Date?i:typeof i=="string"?h.parseDateString(i):null,u===null||isNaN(u))throw new Error("Invalid DateTime field value.");c=u.getFullYear();(c<1753||c>9999)&&(s=lt.FieldStatusFlags.InvalidDate);break;case f.FieldType.Guid:if(typeof i=="string"){if(o=iu.exec(i),!o)throw new Error("Invalid GUID field value.");u=o[1]+"-"+o[2]+"-"+o[3]+"-"+o[4]+"-"+o[5]}else throw new Error("Invalid GUID field value.");break;default:if(typeof i=="string")u=i;else if(typeof i=="number")u=l.localeFormat(i,"N");else if(typeof i=="boolean")u=i?"True":"False";else if(i instanceof Date)u=h.localeFormat(i,"F");else throw new Error("Invalid String field type.");typeof u=="undefined"&&(u=null);u!==null&&((r==f.FieldType.PlainText||r==f.FieldType.Html)&&(u=$.trim(u)),u.length===0&&(u=null));u!==null&&(r===f.FieldType.String&&u.length>or.MAX_TITLE_LENGTH&&(s=lt.FieldStatusFlags.InvalidTooLong),n.isValidStringFieldValue(u,n.isLongTextField(r))||(s=lt.FieldStatusFlags.InvalidCharacters))}}catch(a){return{value:i,error:a,status:lt.FieldStatusFlags.InvalidType}}return{value:u,status:s}},n.convertValueToExternal=function(t,i,r){return typeof i=="undefined"&&(i=null),i===null&&n.isStringField(r)?i="":r===f.FieldType.Boolean&&(i=i?!0:!1),i},n.getFieldErrorText=function(n,t,i,r){switch(t){case lt.FieldStatus.InvalidEmpty:return s.format(y.FieldStatusInvalidEmptyError,n);case lt.FieldStatus.InvalidNotEmpty:return s.format(y.FieldStatusInvalidNotEmptyError,n);case lt.FieldStatus.InvalidFormat:return s.format(y.FieldStatusInvalidFormatError,n);case lt.FieldStatus.InvalidListValue:return s.format(y.FieldStatusInvalidListValueError,n,i);case lt.FieldStatus.InvalidOldValue:return s.format(y.FieldStatusInvalidOldValueError,n);case lt.FieldStatus.InvalidNotOldValue:return s.format(y.FieldStatusInvalidNotOldValueError,n);case lt.FieldStatus.InvalidEmptyOrOldValue:return s.format(y.FieldStatusInvalidEmptyOrOldValueError,n);case lt.FieldStatus.InvalidNotEmptyOrOldValue:return s.format(y.FieldStatusInvalidNotEmptyOrOldValueError,n);case lt.FieldStatus.InvalidValueInOtherField:return s.format(y.FieldStatusInvalidValueInOtherFieldError,n);case lt.FieldStatus.InvalidValueNotInOtherField:return s.format(y.FieldStatusInvalidValueNotInOtherFieldError,n);case lt.FieldStatus.InvalidDate:return s.format(y.FieldStatusInvalidDateErrorError,n);case lt.FieldStatus.InvalidTooLong:return s.format(y.FieldStatusInvalidTooLongError,n);case lt.FieldStatus.InvalidType:return s.format(y.FieldStatusInvalidTypeError,n);case lt.FieldStatus.InvalidComputedField:return s.format(y.FieldStatusInvalidComputedFieldError,n);case lt.FieldStatus.InvalidPath:return s.format(y.FieldStatusInvalidPathError,n);case lt.FieldStatus.InvalidCharacters:return s.format(y.FieldStatusInvalidCharactersError,n);case lt.FieldStatus.InvalidIdentity:return r||s.format(y.FieldStatusInvalidListValueError,n,i);default:return s.format(y.FieldStatusInvalidUnknownError,n)}},n.getFieldStatus=function(n){if((n&lt.FieldStatusFlags.InvalidMask)!==lt.FieldStatusFlags.None){for(var t=1,i=ar.length;t<i;t++)if((n&ar[t])!==lt.FieldStatusFlags.None)return t;return lt.FieldStatus.InvalidUnknown}return lt.FieldStatus.Valid},n.prototype.resetUpdate=function(){delete this.workItem.fieldUpdates[this.fieldDefinition.id+""]},n.prototype.getValue=function(t,i){return n.convertValueToExternal(this.workItem.store,this._getValue(t,i,!1),this.fieldDefinition.type)},n.prototype.getIdentityValue=function(n,t){return this._getValue(n,t,!0)},n.prototype.getFriendlyValue=function(n,t){var i=this.getValue(n,t);return this.fieldDefinition.isIdentity&&i?ui.IdentityHelper.parseUniquefiedIdentityName(i).displayName:i},n.prototype.getDisplayText=function(t,i){return n.convertValueToDisplayString(this.getValue(t,i))},n.prototype.setValue=function(t,i,r,u){var o,f,s,e,h;i===void 0&&(i=!1);r===void 0&&(r=!1);u===void 0&&(u=!1);o={preventFire:!1,fireIdentityEagerValidation:!1,setByRule:!1,forceEvaluate:!1};ri.isWorkItemIdentityRef(t)&&(t=t.distinctDisplayName);f=typeof i!="object"?$.extend({},o,{preventFire:i,fireIdentityEagerValidation:r,setByRule:u}):$.extend({},o,i);s=this.workItem._getFieldValueById(this.fieldDefinition.id);e=n.convertValueToInternal(this.workItem.store,this._tryNormalizeValue(t),this.fieldDefinition.type);this._setValue(e.value,f.setByRule);(!n.compareValues(s,e.value)||f.forceEvaluate)&&(h=this.workItem.evaluateField(this.fieldDefinition.id,!0,s),this.status|=e.status,f.fireIdentityEagerValidation&&this.validateIdentityFieldValue(),f.preventFire||this.workItem.fireFieldChange(h))},n.prototype.validateIdentityFieldValue=function(){var n=this,i=this.getValue(),t=new sr(this.fieldDefinition.id,i,this.filterByScope);!br(this.fieldDefinition)||!this.isValid()||i instanceof ki||this.workItem.beginValidate(this.fieldDefinition.id,t,function(){new sr(n.fieldDefinition.id,n.getValue(),n.filterByScope).equals(t)&&(n._error="")},function(i,r){var u=n;r&&(u=n.workItem.getField(r));u.isValid()&&new sr(n.fieldDefinition.id,n.getValue(),n.filterByScope).equals(t)&&(u._error=i.message,u.status=lt.FieldStatusFlags.InvalidIdentityField,n.workItem.fireFieldChange([u.fieldDefinition.id]))})},n.prototype.isDirty=function(){var t=this.fieldDefinition.id,n=this.workItem.fieldUpdates.hasOwnProperty(t+"");if(!n)switch(t){case f.CoreField.IterationPath:n=this.workItem.fieldUpdates.hasOwnProperty(f.CoreField.IterationId+"");break;case f.CoreField.AreaPath:n=this.workItem.fieldUpdates.hasOwnProperty(f.CoreField.AreaId+"")}return n},n.prototype.isUserChange=function(){var n=this.workItem.fieldUpdates[this.fieldDefinition.id+""];return n?n.setByRule?(this.status&lt.FieldStatusFlags.SetByComputedRule)!==lt.FieldStatusFlags.None?!0:!1:!0:!1},n.prototype.isValid=function(){return(this.status&lt.FieldStatusFlags.InvalidMask)===lt.FieldStatusFlags.None},n.prototype.isValidValueOrEmpty=function(){return(this.status&lt.FieldStatusFlags.InvalidMask&~lt.FieldStatusFlags.InvalidEmpty)===lt.FieldStatusFlags.None},n.prototype.isHistoricalRevision=function(){return this.workItem.isReadOnly()},n.prototype.isEditable=function(){if(this.isHistoricalRevision()||!this.fieldDefinition.isEditable())return!1;var n=this.fieldDefinition.id;switch(n){case f.CoreField.Rev:case f.CoreField.WorkItemType:case f.CoreField.CreatedBy:case f.CoreField.IsDeleted:return!1;case f.CoreField.AreaPath:n=f.CoreField.AreaId;break;case f.CoreField.IterationPath:n=f.CoreField.IterationId;break;default:return(this.status&lt.FieldStatusFlags.ReadOnly)===lt.FieldStatusFlags.None}return this.workItem.getField(n).isEditable()},n.prototype.isReadOnly=function(){return!this.isEditable()},n.prototype.isRequired=function(){var n=this.fieldDefinition.id;switch(n){case f.CoreField.IterationPath:n=f.CoreField.IterationId;break;case f.CoreField.AreaPath:n=f.CoreField.AreaId;break;default:return(this.status&lt.FieldStatusFlags.Required)!==lt.FieldStatusFlags.None}return this.workItem.getField(n).isRequired()},n.prototype.getErrorText=function(){return n.getFieldErrorText(this.fieldDefinition.name,this.getStatus(),this.getDisplayText(),this._error)},n.prototype.getStatus=function(){return n.getFieldStatus(this.status)},n.prototype.validate=function(n){this.customValidators=this.customValidators||[];this.customValidators.push(n)},n.prototype.hasList=function(){return(this.status&lt.FieldStatusFlags.HasValues)!==lt.FieldStatusFlags.None},n.prototype.isLimitedToAllowedValues=function(){return(this.status&lt.FieldStatusFlags.LimitedToValues)!==lt.FieldStatusFlags.None},n.prototype.setAllowedValues=function(n){this.hasList()&&!this.fieldDefinition.isIdentity&&(this.allowedValues=n)},n.prototype.getAllowedValues=function(){var t=this.allowedValues,i,r,e,v,y,u,o,p,w,h,a,b,k;if(!t){if(this.hasList()){if(i=this.lists,r=this.workItem.store,i.allowedValues&&i.allowedValues.length>0)for(t=n.unionLists(r,i.allowedValues[0].items,i.allowedValues[0].globals),e=0,v=i.allowedValues;e<v.length;e++)y=v[e],t=n.intersect(t,n.unionLists(r,y.items,y.globals),!0);if(i.suggestedValues&&i.suggestedValues.length>0){for(u=[],o=0,p=i.suggestedValues;o<p.length;o++)w=p[o],u=n.union(u,n.unionLists(r,w.items,w.globals),!0);t=t?n.intersect(t,u):u}if(i.allowExistingValue&&(h=this._getValue(!0),n.isEmpty(h)||(t=t?n.union(t,[n.convertValueToDisplayString(h)],!0):[n.convertValueToDisplayString(h)])),t&&i.prohibitedValues&&i.prohibitedValues.length>0)for(a=0,b=i.prohibitedValues;a<b.length;a++)k=b[a],t=n.subtract(t,n.unionLists(r,k.items,k.globals),!0)}t=t||[];n.isNumericField(this.fieldDefinition.type)?c.sortIfNotSorted(t,l.defaultComparer):this.fieldDefinition.id===f.CoreField.State&&this.fieldDefinition.workItemType&&this.fieldDefinition.workItemType.orderedStates?t=this.fieldDefinition.workItemType.orderedStates.filter(function(n){return t.indexOf(n)!==-1}):c.sortIfNotSorted(t,s.localeIgnoreCaseComparer);this.allowedValues=t}return t},n.prototype.isChangedInRevision=function(n){var t=this.fieldDefinition.id,i,r,e,u;switch(t){case f.CoreField.AreaPath:case f.CoreField.NodeName:case f.DalFields.AreaLevel1:case f.DalFields.AreaLevel2:case f.DalFields.AreaLevel3:case f.DalFields.AreaLevel4:case f.DalFields.AreaLevel5:case f.DalFields.AreaLevel6:case f.DalFields.AreaLevel7:t=f.CoreField.AreaId;break;case f.CoreField.IterationPath:case f.DalFields.IterationLevel1:case f.DalFields.IterationLevel2:case f.DalFields.IterationLevel3:case f.DalFields.IterationLevel4:case f.DalFields.IterationLevel5:case f.DalFields.IterationLevel6:case f.DalFields.IterationLevel7:t=f.CoreField.IterationId;break;case f.CoreField.AuthorizedAs:t=f.DalFields.PersonID;break;case f.CoreField.IsDeleted:if(n===0)return!1;break;case f.CoreField.AttachedFileCount:case f.CoreField.HyperLinkCount:case f.CoreField.ExternalLinkCount:case f.CoreField.RelatedLinkCount:case f.CoreField.Parent:return null}return n===0?this.workItem.getFieldValueByRevision(t,n)!==null:this.workItem.getRevisions()[n-1]&&(i=this.workItem.getRevisions(),r=t+"",i[n-1].hasOwnProperty(r))?t!==f.CoreField.TeamProject?!0:(e=i[n-1][r],u=n<i.length?i[n][r]:this.workItem.getFieldValue(f.CoreField.TeamProject,!0),u!=undefined&&e!==u):!1},n.prototype._reset=function(){this.status=lt.FieldStatusFlags.None;this.allowedValues=null;this.lists=null},n.prototype._getValue=function(n,t,i){return this.workItem._getFieldValueById(this.fieldDefinition.id,n,t,i)},n.prototype._setValue=function(n,t){this.workItem._setFieldValueById(this.fieldDefinition.id,n,t)},n.prototype._tryNormalizeValue=function(t){if(t&&typeof t=="string"&&this.hasList()){var i=this.getAllowedValues();t=n.normalize(i,t)}return t},n.SqlIntMaxValue=2147483648,n}();t.Field=yi;i.initClassPrototype(yi,{workItem:null,fieldDefinition:null,status:lt.FieldStatusFlags.None,_allowedValues:null,_lists:null,customValidators:null});ar=[lt.FieldStatusFlags.None,lt.FieldStatusFlags.InvalidEmpty,lt.FieldStatusFlags.InvalidNotEmpty,lt.FieldStatusFlags.InvalidFormat,lt.FieldStatusFlags.InvalidListValue,lt.FieldStatusFlags.InvalidOldValue,lt.FieldStatusFlags.InvalidNotOldValue,lt.FieldStatusFlags.InvalidEmptyOrOldValue,lt.FieldStatusFlags.InvalidNotEmptyOrOldValue,lt.FieldStatusFlags.InvalidValueInOtherField,lt.FieldStatusFlags.InvalidValueNotInOtherField,lt.FieldStatusFlags.InvalidDate,lt.FieldStatusFlags.InvalidTooLong,lt.FieldStatusFlags.InvalidType,lt.FieldStatusFlags.InvalidComputedField,lt.FieldStatusFlags.InvalidPath,lt.FieldStatusFlags.InvalidCharacters,lt.FieldStatusFlags.InvalidIdentityField];bi=function(){function n(n,t){this.workItem=n;this.linkData=t;this.updated=!1;this.deleted=!1;this.baseLinkType="Link";this.comment=this.linkData.Comment;this.isLocked=this.linkData.Lock;this.remoteHostId=this.linkData.RemoteHostId;this.remoteProjectId=this.linkData.RemoteProjectId;this.remoteStatus=this.linkData.RemoteStatus;this.remoteHostUrl=this.linkData.RemoteHostUrl;this.remoteHostName=this.linkData.RemoteHostName;this.remoteStatusMessage=this.linkData.RemoteStatusMessage}return n.createFromLinkData=function(t,i){i=i||{};i.FldID||(i.FldID=f.DalFields.RelatedLinks);var r=i.FldID;switch(r){case f.DalFields.AttachedFiles:return new rr(t,i);case f.DalFields.LinkedFiles:return new lr(t,i);case f.DalFields.BISURI:return new ir(t,i);case f.DalFields.RelatedLinks:return new wi(t,i);default:return new n(t,i)}},n.prototype.setState=function(n){n?(this.comment=this.getComment(),this.isLocked=this.getIsLocked(),this.updated=!1,this.linkData.CommentChanged=!1,this.linkData.LockChanged=!1):this.updated=this.linkData.CommentChanged||this.linkData.LockChanged},n.prototype._fireChanged=function(){this.workItem.fireFieldChange([this.getFieldId()])},n.prototype.isNew=function(){return h.equals(pi.FutureDate,this.getAddedDate())},n.prototype.isRemoved=function(){return!h.equals(pi.FutureDate,this.getRemovedDate())},n.prototype.getComment=function(){return this.linkData.Comment},n.prototype.setComment=function(n,t){this.linkData.Comment=n;this.linkData.CommentChanged=!0;this.setState();t||this._fireChanged()},n.prototype.remove=function(n){var t=n&&n.preventEvent===!0;this.deleted=!0;t||(this.workItem.resetLinks(!0),this._fireChanged())},n.prototype.clone=function(){return null},n.prototype.getFieldId=function(){return this.linkData.FldID},n.prototype.getIsLocked=function(){return this.linkData.Lock||!1},n.prototype.setIsLocked=function(n){this.linkData.Lock=n;this.linkData.LockChanged=!0;this.setState();this._fireChanged()},n.prototype.getAddedDate=function(){return this.linkData.AddedDate},n.prototype.getRemovedDate=function(){return this.linkData.RemovedDate},n.prototype.setRemovedDate=function(n){this.linkData.RemovedDate=n},n.prototype.equals=function(n){var t,i,r;if(n&&this.baseLinkType===n.baseLinkType){for(t in this)if(t.substr(0,3)==="get"&&$.isFunction(this[t])&&(i=this[t].call(this),r=n[t].call(n),!yi.compareValues(i,r,!1)))return!1}else return!1;return!0},n.prototype.isDuplicate=function(n){return this.equals(n)},n.prototype.getArtifactLinkType=function(){return""},n.prototype.getAttributes=function(){var n={isDeleted:this.deleted,isNew:this.isNew()};return this._isResourceLinkType(this.linkData.FldID)?(n[f.WorkItemLinkConstants.ATTRIBUTES_AUTHORIZEDDATE]=this.linkData.AddedDate,n[f.WorkItemLinkConstants.ATTRIBUTES_ID]=this.linkData.ExtID,n[f.WorkItemLinkConstants.ATTRIBUTES_RESOURCECREATEDDATE]=this.linkData.CreationDate,n[f.WorkItemLinkConstants.ATTRIBUTES_RESOURCEMODIFIEDDATE]=this.linkData.LastWriteDate,n[f.WorkItemLinkConstants.ATTRIBUTES_REVISEDDATE]=this.linkData.RemovedDate,this.linkData.Length>0&&(n[f.WorkItemLinkConstants.ATTRIBUTES_RESOURCESIZE]=this.linkData.Length),this.linkData.Comment&&(n[f.WorkItemLinkConstants.ATTRIBUTES_COMMENT]=this.linkData.Comment),this.linkData.OriginalName&&(n[f.WorkItemLinkConstants.ATTRIBUTES_NAME]=this.linkData.OriginalName),n):this.linkData.FldID===f.DalFields.RelatedLinks?(n[f.WorkItemLinkConstants.ATTRIBUTES_ISLOCKED]=this.linkData.Lock,this.linkData.Comment&&(n[f.WorkItemLinkConstants.ATTRIBUTES_COMMENT]=this.linkData.Comment),n):null},n.prototype.getLinkUrl=function(){return this._isResourceLinkType(this.linkData.FldID)?this.linkData.FilePath:this.remoteHostId?ei.getRemoteWorkItemRestUrl(this.remoteHostUrl,this.remoteProjectId,this.linkData.ID):or.getResourceUrl(this.workItem.store.getTfsContext(),this.linkData.ID)},n.prototype.getRelationLinkType=function(){switch(this.linkData.FldID){case f.DalFields.BISURI:return f.WorkItemLinkConstants.ARTIFACTLINKTYPE;case f.DalFields.AttachedFiles:return f.WorkItemLinkConstants.ATTACHEDLINKTYPE;case f.DalFields.LinkedFiles:return f.WorkItemLinkConstants.HYPERLINKLINKTYPE;default:return this instanceof wi?this.getLinkTypeEnd().immutableName:""}},n.prototype._isResourceLinkType=function(n){switch(n){case f.DalFields.BISURI:case f.DalFields.AttachedFiles:case f.DalFields.LinkedFiles:return!0;default:return!1}},n.getCountFieldId=function(n){var t;switch(n){case f.DalFields.AttachedFiles:t=f.CoreField.AttachedFileCount;break;case f.DalFields.RelatedLinks:t=f.CoreField.RelatedLinkCount;break;case f.DalFields.LinkedFiles:t=f.CoreField.HyperLinkCount;break;case f.DalFields.BISURI:t=f.CoreField.ExternalLinkCount}return t},n}();t.Link=bi;ir=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.baseLinkType="ExternalLink",r}return __extends(t,n),t.create=function(n,i,r,u,e){return new t(n,{OriginalName:i,FilePath:r,Comment:u||"",FldID:f.DalFields.BISURI,AddedDate:pi.FutureDate,RemovedDate:pi.FutureDate,externalLinkContext:e})},t.prototype.getArtifactLinkType=function(){return this.linkData.OriginalName},t.prototype.getLinkedArtifactUri=function(){return this.linkData.FilePath},t.prototype.clone=function(n){return t.create(n,this.getArtifactLinkType(),this.getLinkedArtifactUri(),this.getComment())},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&s.equals(this.getLinkedArtifactUri(),i.getLinkedArtifactUri(),!0)&&s.equals(this.getArtifactLinkType(),i.getArtifactLinkType(),!0)}return!1},t}(bi);t.ExternalLink=ir;lr=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.baseLinkType="HyperLink",r}return __extends(t,n),t.create=function(n,i,r){return new t(n,{OriginalName:"",FilePath:i,Comment:r||"",FldID:f.DalFields.LinkedFiles,AddedDate:pi.FutureDate,RemovedDate:pi.FutureDate})},t.prototype.getArtifactLinkType=function(){return"Workitem Hyperlink"},t.prototype.getLocation=function(){return this.linkData.FilePath},t.prototype.clone=function(n){return t.create(n,this.getLocation(),this.getComment())},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&s.equals(this.getLocation(),i.getLocation(),!0)}return!1},t}(bi);t.Hyperlink=lr;wi=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.baseLinkType="WorkItemLink",r}return __extends(t,n),t.create=function(n,i,r,u,e,o){var s,h;return typeof i=="object"?s=i.id:(h=n.store.findLinkTypeEnd(i),s=h.id),new t(n,{ID:r,LinkType:s,Comment:u||"",FldID:f.DalFields.RelatedLinks,"Changed Date":pi.FutureDate,"Revised Date":pi.FutureDate,isAddedBySystem:e,RemoteHostUrl:o&&o.remoteHostUrl,RemoteProjectId:o&&o.remoteProjectId,RemoteHostId:o&&o.remoteHostId,RemoteHostName:o&&o.remoteHostName})},t.prototype.getSourceId=function(){return this.workItem.id},t.prototype.getTargetId=function(){return this.linkData.ID},t.prototype.getAddedDate=function(){return this.linkData["Changed Date"]},t.prototype.getAddedBy=function(){return this.linkData["Changed By"]},t.prototype.getRemovedDate=function(){return this.linkData["Revised Date"]},t.prototype.setRemovedDate=function(n){this.linkData["Revised Date"]=n},t.prototype.getRemovedBy=function(){return this.linkData["Revised By"]||-1},t.prototype.getLinkType=function(){return this.linkData.LinkType},t.prototype.getLinkTypeEnd=function(){return this.linkTypeEnd||(this.linkTypeEnd=this.workItem.store.findLinkTypeEnd(this.getLinkType())),this.linkTypeEnd},t.prototype.clone=function(n){var r=this.getLinkTypeEnd(),i=r.linkType,u;if(i&&i.isActive&&i.topology!=="Unknown"&&!(i.isOneToMany&&r.isForwardLink))return u={remoteHostId:this.remoteHostId,remoteHostName:this.remoteHostName,remoteHostUrl:this.remoteHostUrl,remoteProjectId:this.remoteProjectId},t.create(n,r,this.getTargetId(),this.getComment(),!1,u)},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&this.getLinkType()===i.getLinkType()&&this.getTargetId()===i.getTargetId()&&this.getSourceId()===i.getSourceId()&&this.remoteHostId===i.remoteHostId&&this.remoteProjectId===i.remoteProjectId}return!1},t}(bi);t.WorkItemLink=wi;rr=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.baseLinkType="Attachment",r.uploaded=!0,r}return __extends(t,n),t.prototype.getPlaceholderStatus=function(){return this.isPlaceholder},t.create=function(n,i,r,u,e,o,s,h){var c;return h?(c=new t(n,{OriginalName:i,Comment:"",ExtID:0,FldID:f.DalFields.AttachedFiles,Length:e,CreationDate:new Date,LastWriteDate:new Date,AddedDate:pi.FutureDate,RemovedDate:pi.FutureDate}),c.isPlaceholder=!0):(c=new t(n,{OriginalName:i,FilePath:r,Comment:u||"",ExtID:0,FldID:f.DalFields.AttachedFiles,Length:e,CreationDate:o||new Date,LastWriteDate:s||new Date,AddedDate:pi.FutureDate,RemovedDate:pi.FutureDate}),c.isPlaceholder=!1),c},t.prototype.clone=function(n){return t.create(n,this.linkData.OriginalName,this.linkData.FilePath,this.linkData.Comment,this.linkData.Length,this.linkData.CreationDate,this.linkData.LastWriteDate)},t.prototype.resolvePlaceholder=function(n,t,i){this.isPlaceholder=!1;this.linkData.FilePath=n;t!=null&&(this.linkData.CreationDate=t);i!=null&&(this.linkData.LastWriteDate=i);this._fireChanged()},t.prototype.getName=function(){return this.linkData.OriginalName},t.prototype.setName=function(n){this.linkData.OriginalName=n;this._fireChanged()},t.prototype.getLength=function(){return this.linkData.Length},t.prototype.setLength=function(n){this.linkData.Length=n;this._fireChanged()},t.prototype.getFilePath=function(){return this.linkData.FilePath},t.prototype.setFilePath=function(n){this.linkData.FilePath=n;this._fireChanged()},t.prototype.getUri=function(n){var t=this.workItem.project.store.tfsConnection.getHttpClient(g.WorkItemTrackingHttpClient),i=this.workItem.project.guid,r=this.getName();return t.getAttachmentUrl(i,this.getFilePath(),r,n)},t.prototype.getContent=function(){var n=vi.getClient(),t=this.workItem.project.guid,i=this.getName();return n.getAttachmentContent(this.getFilePath(),i,t,!0)},t.prototype.open=function(){p.getService().performAction(p.CommonActions.ACTION_WINDOW_OPEN,{url:this.getUri(!1),target:"_blank"})},t.prototype.save=function(){p.getService().performAction(p.CommonActions.ACTION_WINDOW_OPEN,{url:this.getUri(!0),target:"_blank"})},t.prototype._uploadComplete=function(n,t,i){this.uploaded=!0;this.linkData.OriginalName=n;this.linkData.FilePath=t;this.linkData.Length=i;this._fireChanged()},t.prototype.isDuplicate=function(){return!1},t}(bi);t.Attachment=rr,function(n){n[n.Value=1]="Value";n[n.CurrentValue=2]="CurrentValue";n[n.OriginalValue=4]="OriginalValue";n[n.OtherFieldCurrentValue=8]="OtherFieldCurrentValue";n[n.OtherFieldOriginalValue=16]="OtherFieldOriginalValue";n[n.CurrentUser=32]="CurrentUser";n[n.Clock=64]="Clock"}(di=t.RuleValueFrom||(t.RuleValueFrom={}));gr=function(){function n(n,t,i,r,u,f,e){this.executionPhase=lt.RuleEvaluatorExecutionPhase.DefaultRules;this.userChange=!1;this.valueLocked=!1;this.setByRule=!1;this.valueChanged=!1;this.setByDefaultRule=!1;this.setByComputedRule=!1;this.readOnly=!1;this.empty=!1;this.required=!1;this.frozen=!1;this.cannotLoseValue=!1;this.otherFields={};this.allowExistingValue=!1;this.validUser=!1;this.serverDefault=!1;this.isIdentityField=!1;this.whenCount=0;this.fieldId=n;this.workItem=t;this.field=i;this.value=r;this.originalValue=u;this.valueLocked=f;this.userChange=f;this.evalState=e;this.isIdentityField=i.fieldDefinition.isIdentity}return n.compareLists=function(n,t){var r,i;if(n!==t){if(!n||!t||(r=n.length,r!==t.length))return!1;for(i=0;i<r;i++)if(n[i].items!==t[i].items||n[i].globals!==t[i].globals)return!1}return!0},n.compareFieldLists=function(t,i){return t!==i&&(!t||!i||t.allowExistingValue!==i.allowExistingValue||!n.compareLists(t.allowedValues,i.allowedValues)||!n.compareLists(t.suggestedValues,i.suggestedValues)||!n.compareLists(t.prohibitedValues,i.prohibitedValues))?!1:!0},n.prototype.setExecutionPhase=function(n){this.executionPhase=n},n.prototype.evaluate=function(n){try{n&&(this.setExecutionPhase(lt.RuleEvaluatorExecutionPhase.CopyRules),this.Block(n),this.setExecutionPhase(lt.RuleEvaluatorExecutionPhase.DefaultRules),this.Block(n),this.setExecutionPhase(lt.RuleEvaluatorExecutionPhase.OtherRules),this.Block(n));this.validate()}catch(t){var i="Error occured in Rule Engine Evaluate. Name: ".concat(t.Name," Message: ").concat(t.message," Rules.length: ").concat(n.length," Rules.Information: ").concat(n.toString()," Stack: ").concat(t.stack);r.publishErrorToTelemetry(new Error(i))}},n.prototype.Block=function(n){for(var t,i=0,f=n.length,r,u;i<f;)r=n[i++],u=n[i++]||[],(t=this[r])===null||t===void 0?void 0:t.apply(this,u)},n.prototype.BlockWhenChangedProhibitedValuesOnly=function(n,t){for(var r=0,e=t.length,u,i,f;r<e;)u=t[r++],i=t[r++]||[],u==="ProhibitedValues"&&i[0]&&(f=i[0].filter(function(t){return t!==n}),this.ProhibitedValues(f,i[1]))},n.prototype.When=function(n,t,i,r,u){i=this._getValueFrom(r,i);var f=this._isIdentityField(t),e=r==di.Value&&f;(this._areValuesEqual(t,this._getFieldValue(t,!1),i,!0,e)?!n:n)&&(this.whenCount++,this.Block(u),this.whenCount--)},n.prototype.WhenWas=function(n,t,i,r,u){i=this._getValueFrom(r,i);var f=this._isIdentityField(t),e=r==di.Value&&f;(this._areValuesEqual(t,this._getFieldValue(t,!0),i,!0,e)?!n:n)&&(this.whenCount++,this.Block(u),this.whenCount--)},n.prototype.WhenChanged=function(n,t,i){var r=this._areValuesEqual(t,this._getFieldValue(t,!1),this._getFieldValue(t,!0),!0);(r?n:!n)?(this.whenCount++,this.Block(i),this.whenCount--):t!=ru||!r||n||pt.FeatureAvailabilityService.isFeatureEnabled(wt.FeatureAvailabilityFlags.TypeScriptRuleEngineStateTransitionFilteringDisabled)||(this.whenCount++,this.BlockWhenChangedProhibitedValuesOnly(this._getFieldValue(t,!0),i),this.whenCount--)},n.prototype.WhenBecameNonEmpty=function(n,t,i){(this._areValuesEqual(t,this._getFieldValue(t,!0),null,!0)&&!this._areValuesEqual(t,this._getFieldValue(t,!1),null,!0)?!n:n)&&(this.whenCount++,this.Block(i),this.whenCount--)},n.prototype.WhenRemainedNonEmpty=function(n,t,i){(this._areValuesEqual(t,this._getFieldValue(t,!0),null,!0)||this._areValuesEqual(t,this._getFieldValue(t,!1),null,!0)?n:!n)&&(this.whenCount++,this.Block(i),this.whenCount--)},n.prototype.OtherField=function(n,t,i){if(this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules){var r=this._getFieldValue(n,i);this.otherFields[n]=r;this.otherFieldCheck=t;t==="same-as"&&!this.userChange&&i&&(this.value=r,this.setByRule=!0,this.valueChanged=!0)}},n.prototype.Map=function(n,t,i,r){var e=this,h,u,l,f,s,a,o;this.executionPhase===lt.RuleEvaluatorExecutionPhase.CopyRules&&(h=this._getFieldValue(n,!1),t?(s=this.evalState[n+""],a=s&&s.prevValue!==undefined?s.prevValue:this._getFieldValue(n,!1),this._areValuesEqual(n,this._getFieldValue(n,!1),a,!0)||this.userChange||(i!=null&&$.each(i,function(t,i){return i.values&&$.each(i.values,function(t,r){if(e._areValuesEqual(n,h,r,!0))return o=i.case,!1}),o?!1:void 0}),o===undefined||this._areValuesEqual(n,o,this.value,!0)||(this.value=o,this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0))):(this.userChange||(i!=null&&$.each(i,function(t,i){if(e._areValuesEqual(n,h,i.case,!0))return u=i,!1}),u||(u=r),u&&(l=!1,u.values&&$.each(u.values,function(t,i){if(e._areValuesEqual(n,i,e.value,!0))return l=!0,!1}),l||(u.default?c.contains(u.values,this.originalValue)?(this.value=this.originalValue,this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0):this._areValuesEqual(n,u.default,this.value,!0)||(this.value=u.default,this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0):(this.value=u.values&&u.values[0],this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0)))),this.allowedValues||(this.allowedValues=[]),f=[],i!=null&&$.each(this._getAllowedValues(n),function(t,r){var u;$.each(i,function(t,i){if(e._areValuesEqual(n,r,i.case,!0))return u=i,!1});u&&(f=yi.union(f,u.values,!0))}),r&&(f=yi.union(f,r.values,!0)),this.allowedValues.push({items:f})))},n.prototype.AllowExistingValue=function(){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.allowExistingValue=!0)},n.prototype.ReadOnly=function(){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.readOnly=!0,this.userChange||(this.value=this.originalValue,this.setByRule=!0,this.valueChanged=!0))},n.prototype.Empty=function(){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.empty=!0,this.userChange||(this.value=undefined,this.setByRule=!0,this.valueChanged=!0))},n.prototype.Required=function(){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.required=!0)},n.prototype.Frozen=function(){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.frozen=!0,!this.userChange&&this.originalValue&&(this.value=this.originalValue,this.setByRule=!0,this.valueChanged=!0))},n.prototype.CannotLoseValue=function(){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.cannotLoseValue=!0)},n.prototype.ValidUser=function(){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.validUser=!0)},n.prototype.Copy=function(n,t){this.executionPhase===lt.RuleEvaluatorExecutionPhase.CopyRules&&(this.valueLocked||(this.value=this._getValueFrom(n,t),this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0))},n.prototype.Default=function(n,t){this.executionPhase===lt.RuleEvaluatorExecutionPhase.DefaultRules&&(this.valueLocked||yi.isEmpty(this.value)&&(this.value=this._getValueFrom(n,t),this.valueLocked=!0,this.setByRule=!0,this.setByDefaultRule=!0,this.valueChanged=!0))},n.prototype.AllowedValues=function(n,t){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.allowedValues||(this.allowedValues=[]),n&&c.flagSorted(n,s.localeIgnoreCaseComparer),this.allowedValues.push({items:n,globals:t}))},n.prototype.SuggestedValues=function(n,t){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.suggestedValues||(this.suggestedValues=[]),n&&c.flagSorted(n,s.localeIgnoreCaseComparer),this.suggestedValues.push({items:n,globals:t}))},n.prototype.ProhibitedValues=function(n,t){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.prohibitedValues||(this.prohibitedValues=[]),n&&c.flagSorted(n,s.localeIgnoreCaseComparer),this.prohibitedValues.push({items:n,globals:t}))},n.prototype.Match=function(n,t){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.patterns||(this.patterns=[]),n&&c.flagSorted(n,s.localeIgnoreCaseComparer),this.patterns.push({items:n,globals:t}))},n.prototype.ServerDefault=function(n){this.executionPhase===lt.RuleEvaluatorExecutionPhase.CopyRules&&(this.value=new ki(n,this.originalValue),this.serverDefault=!0,this.valueLocked=!0,this.setByRule=!0,this.setByDefaultRule=!0,this.valueChanged=!0)},n.prototype.Computed=function(n){if(this.executionPhase===lt.RuleEvaluatorExecutionPhase.DefaultRules&&!this.valueLocked){var t=this.workItem.computeFieldValue(this.field,n);t&&t.success&&(this.value=t.value,this.valueLocked=!0,this.setByRule=!0,this.setByComputedRule=!0,this.valueChanged=!0)}},n.prototype.Trigger=function(n){var t=this;this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&n&&(this.triggerFields||(this.triggerFieldMap={},this.triggerFields=[]),$.each(n,function(n,i){var r=i+"";t.triggerFieldMap.hasOwnProperty(r)||(t.triggerFieldMap[r]=!0,t.triggerFields.push(i))}))},n.prototype.ScopedIdentity=function(n,t,i,r,u){this.executionPhase===lt.RuleEvaluatorExecutionPhase.OtherRules&&(this.whenCount>0||!this.filterByScope)&&(this.filterByScope=new yr(i,t,n,r,u))},n.prototype.validate=function(){var i,t=this.field,r,o,h,p,c,it,l,w,a,b,s,v,k,d,y,g,nt;this.originalFieldStatus=t.status;t.status=lt.FieldStatusFlags.None;var u=t.workItem.store,e=yi.convertValueToInternal(u,this.originalValue,t.fieldDefinition.type),tt=yi.convertValueToInternal(u,this.value,t.fieldDefinition.type);if(i=tt.value,t.status|=tt.status,this.setByRule&&(t._setValue(i,this.setByRule),t.status|=lt.FieldStatusFlags.SetByRule),this.setByDefaultRule&&(t.status|=lt.FieldStatusFlags.SetByDefaultRule),this.setByComputedRule&&(t.status|=lt.FieldStatusFlags.SetByComputedRule),(this.readOnly||this.serverDefault||this.empty)&&(t.status|=lt.FieldStatusFlags.ReadOnly),this.cannotLoseValue&&(yi.isEmpty(this.originalValue)||(this.required=!0)),this.required&&(t.status|=lt.FieldStatusFlags.Required),r={},r.allowedValues=this.allowedValues,this.allowedValues&&this.allowedValues.length>0&&(t.status|=lt.FieldStatusFlags.HasValues,t.status|=lt.FieldStatusFlags.LimitedToValues),r.suggestedValues=this.suggestedValues,this.suggestedValues&&this.suggestedValues.length>0&&(t.status|=lt.FieldStatusFlags.HasValues,t.status&=~lt.FieldStatusFlags.LimitedToValues),r.prohibitedValues=this.prohibitedValues,r.allowExistingValue=this.allowExistingValue,n.compareFieldLists(t.lists,r)||(t.lists=r,t.allowedValues=null),this.allowExistingValue&&(t.status|=lt.FieldStatusFlags.AllowsOldValue),this.patterns&&this.patterns.length>0)for(o=yi.unionLists(u,this.patterns[0].items,this.patterns[0].globals),h=0,p=this.patterns;h<p.length;h++)s=p[h],o=yi.intersect(o,yi.unionLists(u,s.items,s.globals),!0);if(t.fieldDefinition.isIdentity&&(t.filterByScope=this.filterByScope),t.patterns=o,o&&(t.status|=lt.FieldStatusFlags.HasFormats),yi.isEmpty(i)){if(!this.empty){if(t.isRequired()){t.status|=lt.FieldStatusFlags.Required;t.status|=lt.FieldStatusFlags.InvalidEmpty;return}if(typeof this.otherFieldCheck!="undefined")for(c in this.otherFields)if(yi.isEmpty(this.otherFields[c])){if(this.otherFieldCheck==="not-same-as"){t.status|=lt.FieldStatusFlags.Required;t.status|=lt.FieldStatusFlags.InvalidValueNotInOtherField;return}}else if(this.otherFieldCheck==="same-as"){t.status|=lt.FieldStatusFlags.Required;t.status|=lt.FieldStatusFlags.InvalidValueInOtherField;return}}return}if(this.empty){t.status&=~lt.FieldStatusFlags.ReadOnly;t.status|=lt.FieldStatusFlags.InvalidNotEmpty;return}if(this.readOnly&&!this.serverDefault&&!this.setByDefaultRule&&!this._areValuesEqual(t.fieldDefinition.id,i,e.value)){t.status|=lt.FieldStatusFlags.InvalidNotOldValue;return}if(typeof this.otherFieldCheck!="undefined")for(c in this.otherFields)if(this._areValuesEqual(t.fieldDefinition.id,i,this.otherFields[c])){if(this.otherFieldCheck==="not-same-as"){t.status|=lt.FieldStatusFlags.InvalidValueInOtherField;return}}else if(this.otherFieldCheck==="same-as"){t.status|=lt.FieldStatusFlags.InvalidValueNotInOtherField;return}if(this.frozen&&!yi.isEmpty(e.value)&&!this._areValuesEqual(t.fieldDefinition.id,i,e.value)){t.status|=lt.FieldStatusFlags.InvalidNotEmptyOrOldValue;return}if(t.fieldDefinition.type===f.FieldType.TreePath&&!this.workItem.isChangeProjectInProgress()&&(it=this.workItem.project.nodesCacheManager.getReferencedNode({path:i,nodeType:t.fieldDefinition.id===f.CoreField.AreaPath?1:2}),!it)){this.workItem.project.nodesCacheManager.isNodesCacheAvailable()?t.status|=lt.FieldStatusFlags.InvalidPath:this.workItem.project.nodesCacheManager.beginGetNodes().then(function(){t.setValue(i,{forceEvaluate:!0})});return}if(!(this.serverDefault||i instanceof ki)){if(l=i===undefined||i===null?"":""+i,t.patterns){for(w=!1,a=0,b=t.patterns;a<b.length;a++)if(s=b[a],yi.isMatch(s,l)){w=!0;break}if(!w){t.status|=lt.FieldStatusFlags.InvalidFormat;return}}if(r.prohibitedValues)for(v=0,k=r.prohibitedValues;v<k.length;v++)if(d=k[v],yi.inList(u,l,d.items,d.globals,!0)){t.status|=lt.FieldStatusFlags.InvalidListValue;return}if(this.allowExistingValue&&!yi.isEmpty(e.value)&&this._areValuesEqual(t.fieldDefinition.id,i,e.value))return;if(r.allowedValues)for(y=0,g=r.allowedValues;y<g.length;y++)if(nt=g[y],!yi.inList(u,l,nt.items,nt.globals,!0)){t.status|=lt.FieldStatusFlags.InvalidListValue;return}}},n.prototype._isIdentityField=function(n){var t=this.workItem.getField(n);return t&&t.fieldDefinition.isIdentity},n.prototype._getFieldValue=function(n,t){return n===this.fieldId?t?this.originalValue:this.value:this.workItem._getFieldValueById(n,t)},n.prototype._getValueFrom=function(n,t){switch(n){case di.Clock:return new Date;case di.CurrentUser:return this.workItem.store.getCurrentUserName();case di.OtherFieldOriginalValue:return this._getFieldValue(t,!0);case di.OtherFieldCurrentValue:return this._getFieldValue(t,!1);case di.Value:return t;case di.CurrentValue:return this.value;case di.OriginalValue:return this.originalValue;default:return t}},n.prototype._areValuesEqual=function(n,t,i,r,u){return this.workItem.fieldMapById[n]&&this.workItem.fieldMapById[n].fieldDefinition.type==f.FieldType.Boolean&&(t=this._translateToBoolData(t),i=this._translateToBoolData(i)),yi.compareValues(t,i,r,u)},n.prototype._translateToBoolData=function(n){return n&&(n==1||String(n).toLowerCase()==="true")?1:0},n.prototype._getAllowedValues=function(n){return this.workItem.getField(n).getAllowedValues()},n}();vr=function(){function n(n,t){var i,u;if(this.workItem=n,this.fieldRules={},t)for(i=0,u=t;i<u.length;i++){var f=u[i],e=f.fieldId+"",r=this.fieldRules[e];r||(this.fieldRules[e]=r=[]);r.push("Block");r.push([f.rules])}}return n.prototype.evaluateFields=function(n){var r={},t,i,u;if(n)for(t=0,i=n;t<i.length;t++)u=i[t],this._evaluateFieldRule(u,r,!1);return this._evalStateToChangedFields(r)},n.prototype.evaluateField=function(n,t,i){var r={};return this._evaluateFieldRule(n,r,t,i),this._evalStateToChangedFields(r)},n.prototype._evalStateToChangedFields=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(+i);return t},n.prototype._evaluateFieldRule=function(n,t,i,r){var c=this,f=this.workItem.getField(n),e,o;if(f){var u=n+"",s=f._getValue(),h=!1;t[u]&&t[u].requiresControlUpdate&&(h=!0);t[u]={state:!0,prevValue:r===undefined?s:r,requiresControlUpdate:!1||h};e=new gr(n,this.workItem,f,s,f._getValue(!0),i||!1,t);e.evaluate(this.fieldRules[u]);o=void 0;o=i?!0:!yi.compareValues(s,f._getValue());o&&(t[u].requiresControlUpdate=!0);o&&e.triggerFields&&$.each(e.triggerFields,function(n,i){var r=t[i+""];r&&r.state||c._evaluateFieldRule(i,t,!1)});t[u].state=!1}},n}();t.RuleEngine=vr;ki=function(){function n(n,t){this.type=lt.ServerDefaultValueType.None;this.type=n;this.value=t}return n.prototype.toString=function(){return""+this.value},n.prototype.valueOf=function(){return this.value},n}();t.ServerDefaultValue=ki;sr=function(){function n(n,t,i){this.fieldId=n;this.fieldValue=t;this.scope=i}return n.prototype.toString=function(){return JSON.stringify({fieldId:this.fieldId,fieldValue:this.fieldValue,scope:{filterByScope:bt.FilterByScope.GetHashCode(this.scope),nonIdentities:this.scope&&this.scope.nonIdentities,excludeGroups:this.scope&&this.scope.excludeGroups}})},n.prototype.equals=function(n){return n.toString()===this.toString()},n}();t.FieldValidationKey=sr;yr=function(n){function t(t,i,r,u,f){var e=__construct(this,n,[t,i]);for(var o in e)e.hasOwnProperty(o)&&(this[o]=e[o]);return e.nonIdentities=r||[],e.displayNames=u||[],e.excludeGroups=f||!1,e}return __extends(t,n),t.equals=function(n,t){var i,r,u,f;return n==null&&t==null?!0:bt.FilterByScope.GetHashCode(n)!==bt.FilterByScope.GetHashCode(t)?!1:(i=n.nonIdentities==null?0:n.nonIdentities.length,r=t.nonIdentities==null?0:t.nonIdentities.length,i!=r)?!1:(u=n.nonIdentities==null?"":n.nonIdentities.sort().join(","),f=t.nonIdentities==null?"":t.nonIdentities.sort().join(","),s.equals(u,f,!0))},t}(bt.FilterByScope);t.WorkItemIdentityScope=yr;nu="WITData";pr=function(){function n(n,t){this._tfsContext=n;this._cacheStampManager=t;this._workItemIndexDBCacheManager=new ai.WorkItemIndexDBCacheManager;this._cacheInformationManager=new ii.WorkItemMetadataCacheInformationManager;this._dataSources=gt.getDataSources(n,t,this._cacheInformationManager)}return n.prototype.beginGetWorkItemData=function(n,t,i,r){var u=this;return this._getDataFromSource(function(f){return f.beginGetWorkItemData(u._tfsContext.navigation.projectId,n,t,i,r)})},n.prototype.beginGetLinkTypes=function(){return this._getDataWithCache(this._tfsContext.navigation.collection.instanceId,f.WITCommonConstants.LinkTypes,"_",function(n){return n.beginGetLinkTypes()})},n.prototype.beginGetFieldProjectData=function(n){return this._getDataWithCache(n,f.WITCommonConstants.TeamProjects,n,function(t){return t.beginGetFieldProjectData(n)})},n.prototype.beginGetFields=function(){return(new ci.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync({action:"fields",controller:"wit"},null,this._tfsContext.navigation.collection.instanceId,f.WITCommonConstants.Fields,"_").then(function(n){return n.data})},n.prototype.beginGetWorkItemTypeData=function(n,t){var i=this;return pt.FeatureAvailabilityService.isFeatureEnabled(wt.FeatureAvailabilityFlags.DisableWorkItemTypesSplittedLoading)?t.length===1?this._getDataWithCache(n,f.WITCommonConstants.WorkItemTypes,t[0],function(i){return i.beginGetWorkItemTypeData(n,t)}):this._getDataFromSource(function(i){return i.beginGetWorkItemTypeData(n,t)}).then(function(t){return i._cacheStampManager.getMetadataCacheStamp(f.WITCommonConstants.WorkItemTypes).then(function(r){return Promise.all(t.map(function(t){return i._workItemIndexDBCacheManager.cacheData(n,f.WITCommonConstants.WorkItemTypes,i._transformKey(t.name),[t],r).then(function(t){t&&i._cacheInformationManager&&i._cacheInformationManager.persist(n,f.WITCommonConstants.WorkItemTypes,t,r)}).catch(function(n){u.traceMessage(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"CacheData",ft.WITCustomerIntelligenceFeature.WIT_CACHE_PROVIDER_INIT,n)})})).then(function(){return t})})}):(new ci.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync({action:"workItemTypes",controller:"wit"},{projectId:n,typeNames:t},n,f.WITCommonConstants.WorkItemTypes,"_").then(function(n){return n.data})},n.prototype._getDataWithCache=function(n,t,i,r){var f=this;return i=this._transformKey(i),this._cacheStampManager.getMetadataCacheStamp(t).then(function(e){return f._workItemIndexDBCacheManager.getDataFromCache(n,t,i,e).then(function(n){return n?{resolvedFromCache:!0,data:n}:f._getDataFromSource(r).then(function(n){return{resolvedFromCache:!1,data:n}})}).then(function(r){var s=r.resolvedFromCache,o=r.data;return o&&!s?f._workItemIndexDBCacheManager.cacheData(n,t,i,o,e).then(function(i){return i&&f._cacheInformationManager&&f._cacheInformationManager.persist(n,t,i,e),o}).catch(function(n){return u.traceMessage(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"CacheData",ft.WITCustomerIntelligenceFeature.WIT_CACHE_PROVIDER_INIT,n),o}):o})})},n.prototype._getDataFromSource=function(n,t){return t===void 0&&(t=0),__awaiter(this,void 0,void 0,function(){var i,r,u,f=this;return __generator(this,function(e){switch(e.label){case 0:return(i=function(){return t+1<f._dataSources.length?f._getDataFromSource(n,t+1):null},r=n(this._dataSources[t]),!!r)?[3,1]:[2,i()];case 1:return[4,r];case 2:return(u=e.sent(),!u)?[2,i()]:[2,u]}})})},n.prototype._transformKey=function(n){return n.toLowerCase()},n.prototype._recordTelemetry=function(n,t,i,r,u,f){it.publishEvent(new it.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,nu,{scopeId:n,type:t,key:i,stamp:r,message:u,cachedData:f}))},n._resolvedPromise=Promise.resolve(null),n}();t.WorkItemDataManager=pr;vt.registerLinkForms();i.tfsModuleLoaded("TFS.WorkItemTracking",t)});

define("VSS/Flux/Store",["require","exports","VSS/Events/Handlers"],function(n,t,i){var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.RemoteStore=t.DefaultStore=t.Store=void 0;r=function(){function n(){this._changedHandlers=new i.EventHandlerList;this._namedEventCollection=new i.NamedEventCollection}return n.prototype.addChangedListener=function(n){this._changedHandlers.subscribe(n)},n.prototype.removeChangedListener=function(n){this._changedHandlers.unsubscribe(n)},n.prototype.emitChanged=function(){this._changedHandlers.invokeHandlers(this)},n.prototype.emit=function(n,t,i){this._namedEventCollection.invokeHandlers(n,t,i)},n.prototype.addListener=function(n,t){this._namedEventCollection.subscribe(n,t)},n.prototype.removeListener=function(n,t){this._namedEventCollection.unsubscribe(n,t)},n}();t.Store=r;u=function(n){function t(){var t=__construct(this,n,[]),i,r;for(i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return r=t.getAction(),r!==null&&r.addListener(t.onChange,t),t}return __extends(t,n),t.prototype.getAction=function(){return null},t.prototype.onChange=function(n){this._value=n;this.emitChanged()},t.prototype.getValue=function(){return this._value},t}(r);t.DefaultStore=u;f=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._loading=!0,t._error=null,t}return __extends(t,n),t.prototype.isLoading=function(){return this._loading},t.prototype.hasError=function(){return this._error!==null},t.prototype.getError=function(){return this._error},t.prototype.onError=function(n){this._error=n;this.emitChanged()},t}(r);t.RemoteStore=f});

define("VSSPreview/Utilities/PromiseUtils",["require","exports"],function(n,t){function r(n,t,i){return new Promise(function(r,u){var f=setTimeout(function(){u(i==null?"Timed out after ".concat(t," ms."):i)},t);n.then(function(n){r(n);clearTimeout(f)},function(n){u(n);clearTimeout(f)})})}function i(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(t){setTimeout(t,n)})]})})}function u(n,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,Promise.all([n,i(t)])];case 1:return[2,r.sent()[0]]}})})}function f(n){var t=new Array(n.length);return new Promise(function(i){for(var u=0,f=function(r){var f=n[r];f.then(function(n){t[r]={state:"fulfilled",value:n}},function(n){t[r]={state:"rejected",reason:n}}).then(function(){++u===n.length&&i(t)})},r=0;r<n.length;++r)f(r)})}function e(n){return n instanceof Promise?n:new Promise(function(t,i){n.then(t,i)})}function o(){var n,t,i=new Promise(function(i,r){n=i;t=r});return{resolve:n,reject:t,promise:i}}Object.defineProperty(t,"__esModule",{value:!0});t.defer=t.toNativePromise=t.allSettled=t.delay=t.wait=t.timeout=void 0;t.timeout=r;t.wait=i;t.delay=u;t.allSettled=f;t.toNativePromise=e;t.defer=o});

define("WorkItemTracking/Scripts/MruClassificationPicker/Actions/ClassificationFieldsMruSettingsUtils",["require","exports","VSS/Settings/Services","VSS/Utils/Array","VSSPreview/Utilities/PromiseUtils"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.ClassificationFieldsMruSettingsUtils=void 0,function(n){n.SettingsKey="ClassificationFieldsMru";n.AreaPathMruKey="AreaPath";n.IterationPathMruKey="IterationPath";n.MruLength=5}(f||(f={}));e=function(){function n(){this._settingsService=i.getService()}return n.prototype.readMru=function(n){return u.toNativePromise(this._settingsService.getEntriesAsync(f.SettingsKey,0,"project",n))},n.prototype.parseMru=function(n,t){return{projectId:n,areaPathMru:t&&t.value&&t.value[f.AreaPathMruKey]||[],iterationPathMru:t&&t.value&&t.value[f.IterationPathMruKey]||[]}},n.prototype.getMru=function(n){var t=this;return this.readMru(n).then(function(i){return t.parseMru(n,i)})},n.prototype.updateAreaPathMru=function(n,t){var i=this;return this.getMru(n).then(function(r){var e=i._buildNewMru(r.areaPathMru,t),o={};return o["".concat(f.SettingsKey,"/").concat(f.AreaPathMruKey)]=e,u.toNativePromise(i._settingsService.setEntries(o,0,"project",n).then(function(){return e}))})},n.prototype.updateIterationPathMru=function(n,t){var i=this;return this.getMru(n).then(function(r){var e=i._buildNewMru(r.iterationPathMru,t),o={};return o["".concat(f.SettingsKey,"/").concat(f.IterationPathMruKey)]=e,u.toNativePromise(i._settingsService.setEntries(o,0,"project",n).then(function(){return e}))})},n.prototype._buildNewMru=function(n,t){if(!t||t.length===0)return n;var u=r.unique(t),e=r.subtract(n,u),i=u.concat(e);return i.splice(f.MruLength,i.length-f.MruLength),i},n}();t.ClassificationFieldsMruSettingsUtils=e});

define("WorkItemTracking/Scripts/MruClassificationPicker/Actions/ClassificationFieldsMruActionsCreator",["require","exports","VSS/Error","VSS/Flux/Action","WorkItemTracking/Scripts/MruClassificationPicker/Actions/ClassificationFieldsMruSettingsUtils"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.ClassificationFieldsMruActionsCreator=t.ActionsHub=void 0;f=function(){function n(){this.InitializeClassificationFieldsMru=new r.Action;this.SetAreaPathMru=new r.Action;this.SetIterationPathMru=new r.Action}return n}();t.ActionsHub=f;e=function(){function n(n,t){this._actionsHub=n;this._classificationFieldsMruDataProvider=t;this._mruSettingsUtils=new u.ClassificationFieldsMruSettingsUtils}return n.prototype.initializeClassificationFieldsMru=function(n){var t=this;this._classificationFieldsMruDataProvider.isLoaded(n)?this._actionsHub.InitializeClassificationFieldsMru.invoke(null):this._classificationFieldsMruDataProvider.isLoading(n)||(this._classificationFieldsMruDataProvider.setLoading(n,!0),this._mruSettingsUtils.readMru(n).then(function(i){t._classificationFieldsMruDataProvider.setLoading(n,!1);var r=t._mruSettingsUtils.parseMru(n,i);t._actionsHub.InitializeClassificationFieldsMru.invoke(r)},this._logError))},n.prototype.addToAreaPathMru=function(n,t){var i=this;this._mruSettingsUtils.updateAreaPathMru(n,t).then(function(t){i._actionsHub.SetAreaPathMru.invoke({projectId:n,values:t})},this._logError)},n.prototype.addToIterationPathMru=function(n,t){var i=this;this._mruSettingsUtils.updateIterationPathMru(n,t).then(function(t){i._actionsHub.SetIterationPathMru.invoke({projectId:n,values:t})},this._logError)},n.prototype._logError=function(n){i.publishErrorToTelemetry(n)},n}();t.ClassificationFieldsMruActionsCreator=e});

define("WorkItemTracking/Scripts/MruClassificationPicker/Stores/ClassificationFieldsMruStore",["require","exports","VSS/Flux/Store","WorkItemTracking/Scripts/MruClassificationPicker/Actions/ClassificationFieldsMruActionsCreator"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.ClassificationFieldsMruStore=void 0;var u=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._items={},i._isLoadingMap={},t.InitializeClassificationFieldsMru.addListener(function(n){n&&(i._items[n.projectId.toLowerCase()]=n,i.emitChanged())}),t.SetAreaPathMru.addListener(function(n){i.isLoaded(n.projectId)&&n.values&&(i._items[n.projectId.toLowerCase()].areaPathMru=n.values);i.emitChanged()}),t.SetIterationPathMru.addListener(function(n){i.isLoaded(n.projectId)&&n.values&&(i._items[n.projectId.toLowerCase()].iterationPathMru=n.values);i.emitChanged()}),i}return __extends(t,n),t.getDefaultFluxContext=function(){if(!this._defaultFluxContext){var n=new r.ActionsHub,i=new t(n),u=new r.ClassificationFieldsMruActionsCreator(n,i);this._defaultFluxContext={store:i,actionsCreator:u}}return this._defaultFluxContext},t.prototype.setLoading=function(n,t){this._isLoadingMap[n.toLowerCase()]=t},t.prototype.isLoading=function(n){return this._isLoadingMap[n.toLowerCase()]},t.prototype.isLoaded=function(n){return this._items[n.toLowerCase()]!=null},t.prototype.getAreaPathMru=function(n){return this.isLoaded(n)?this._items[n.toLowerCase()].areaPathMru:null},t.prototype.getIterationPathMru=function(n){return this.isLoaded(n)?this._items[n.toLowerCase()].iterationPathMru:null},t}(i.Store);t.ClassificationFieldsMruStore=u});

define("WorkItemTracking/Scripts/TFS.UI.Tags.Constants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.TAG_ELLIPSIS=t.TAG_SPLITTING_SEPARATOR=t.TAG_FORMATTING_SEPARATOR=t.TAG_CHARACTER_LIMIT=void 0;t.TAG_CHARACTER_LIMIT=30;t.TAG_FORMATTING_SEPARATOR="; ";t.TAG_SPLITTING_SEPARATOR=/[,;]/;t.TAG_ELLIPSIS="..."});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};define("Presentation/Scripts/TFS/FeatureRef/TFS.TagService",["require","exports","Presentation/Scripts/TFS/TFS.Service","VSS/Context","VSS/Contributions/Services","VSS/Diag","VSS/Service","VSS/Settings/Services","VSSPreview/Utilities/PromiseUtils","VSS/Utils/Array"],function(n,t,i,r,u,f,e,o,s,h){var c,l;Object.defineProperty(t,"__esModule",{value:!0});t.TagService=t.TagsKind=void 0,function(n){n[n.WorkItem=0]="WorkItem";n[n.PullRequest=1]="PullRequest"}(c=t.TagsKind||(t.TagsKind={}));l=function(n){function t(){var t=n.call(this)||this;return t._tagNamesCache={},t}return __extends(t,n),t.prototype.beginQueryTagNames=function(n,i,o,s){var v=this,y,h,l,a;if(f.Debug.assertParamIsFunction(o,"callback"),f.Debug.assertParamIsStringNotEmpty(i,"projectScope"),y=n===c.WorkItem?t.WORK_ITEM_ARTIFACT_KIND:t.PULL_REQUEST_LABELS_ARTIFACT_KIND,h=this._getCacheKey(n,i),this._tagNamesCache.hasOwnProperty(h)){f.logTracePoint("TagService.queryTagNamesCached.start");l=this._tagNamesCache[h];f.logTracePoint("TagService.queryTagNamesCached.completed");o(l);return}f.logTracePoint("TagService.tagNamesDataProvider.start");a=n===c.WorkItem?t.WORK_ITEM_TAGS_DATA_PROVIDER_ID:t.PULL_REQUEST_LABELS_DATA_PROVIDER_ID;e.getService(u.WebPageDataService,r.getDefaultWebContext()).getDataAsync(a,null,{projectScope:i}).then(function(n){var t=n||[];v._tagNamesCache[h]=t;f.logTracePoint("TagService.tagNamesDataProvider.completed");o(t)},s)},t.prototype.invalidateCacheForArtifactKinds=function(n,t){var i=this._getCacheKey(n,t);this._tagNamesCache.hasOwnProperty(i)&&delete this._tagNamesCache[i]},t.prototype.addTagsToCacheForArtifactKinds=function(n,t,i){var o=this._getCacheKey(t,i),u,r,f,e;if(this._tagNamesCache.hasOwnProperty(o))for(u=this._tagNamesCache[o],r=0,f=n;r<f.length;r++)e=f[r],u.indexOf(e)===-1&&u.push(e)},t.prototype._getCacheKey=function(n,t){return"".concat(t.toLowerCase(),"-").concat(n)},t.prototype.getTagsMru=function(){var n=this;return this._tagsMruCache?Promise.resolve(this._tagsMruCache.slice()):s.toNativePromise(o.getService().getEntriesAsync(t.TAGS_MRU_SETTINGS_KEY,0).then(function(i){var r=i&&i.value&&i.value[t.TAGS_MRU_TAGS_KEY]||[];return n._tagsMruCache=h.subtract(r,[";;;;;",";SUGGESTIONS;"]),n._tagsMruCache.slice()}))},t.prototype.addTagsMru=function(n){return __awaiter(this,void 0,void 0,function(){var u,f,i,e,r;return __generator(this,function(c){switch(c.label){case 0:return[4,this.getTagsMru()];case 1:return u=c.sent(),f=h.subtract(u,n),i=n.concat(f),i.splice(t.TAGS_MRU_MAX_LENGTH),this._tagsMruCache=i,e="".concat(t.TAGS_MRU_SETTINGS_KEY,"/").concat(t.TAGS_MRU_TAGS_KEY),r={},r[e]=i,[2,s.toNativePromise(o.getService().setEntries(r,0))]}})})},t.prototype.dispose=function(){},t.ServiceLifetime=e.ServiceLifetime.ClearOnFPS,t.WORK_ITEM_ARTIFACT_KIND="E7626DBD-6075-416C-A31E-DFD48FE3CFDE",t.PULL_REQUEST_LABELS_ARTIFACT_KIND="F22387E3-984E-4C52-9C6D-FBB8F14C812D",t.WORK_ITEM_TAGS_DATA_PROVIDER_ID="ms.vss-work-web.work-item-tag-suggestions-data-provider",t.PULL_REQUEST_LABELS_DATA_PROVIDER_ID="ms.vss-code-web.pull-request-label-suggestions-data-provider",t.TAGS_MRU_SETTINGS_KEY="TagsMru",t.TAGS_MRU_TAGS_KEY="Tags",t.TAGS_MRU_MAX_LENGTH=5,t}(i.TfsService);t.TagService=l});

define("WorkItemTracking/Scripts/Utils/TagUtils",["require","exports","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Utils/Array","VSS/Utils/String","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/TFS.UI.Tags.Constants","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/FeatureRef/TFS.TagService","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.TagUtils=void 0;var a;(function(n){function a(t,i){var e=t.getField(f.CoreField.Tags);if(e&&!e.isReadOnly()&&e.isEditable()){if(u.equals(i.fieldName+"",n.getTagsAddPseudoFieldName(e.fieldDefinition.name),!0)||u.equals(i.fieldName+"",n.AddTagsPseudoRefName,!0)){var o=n.splitAndTrimTags(e.getValue()),s=n.splitAndTrimTags(i.value),h=r.union(o,s,u.localeIgnoreCaseComparer);return e.setValue(n.formatTags(h)),s.length}if(u.equals(i.fieldName+"",n.getTagsRemovePseudoFieldName(e.fieldDefinition.name),!0)||u.equals(i.fieldName+"",n.RemoveTagsPseudoRefName,!0)){var o=n.splitAndTrimTags(e.getValue()),c=n.splitAndTrimTags(i.value),h=r.subtract(o,c,u.localeIgnoreCaseComparer);return e.setValue(n.formatTags(h)),-c.length}}return 0}function v(i){var s={},h=[],a=i.getFieldValue(f.CoreField.Tags,!0),r,e,o,c,l,v;for(a&&(h=n.splitAndTrimTags(a).sort(u.localeIgnoreCaseComparer)),r=h,i.isFieldDirty(f.CoreField.Tags)&&(r=n.splitAndTrimTags(i.getFieldValue(f.CoreField.Tags)).sort(u.localeIgnoreCaseComparer)),e=[],o=0,c=h;o<c.length;o++)l=c[o],v=r.indexOf(l),v===-1&&e.push(l);return e.length>0&&(s[n.RemoveTagsPseudoRefName]=t(e)),r.length>0&&(s[n.AddTagsPseudoRefName]=t(r)),s}function y(t){var o={added:!1,removed:!1},i=[],s=t.getFieldValue(f.CoreField.Tags,!0),e,h,c;return s&&(i=n.splitAndTrimTags(s).sort(u.localeIgnoreCaseComparer)),e=i,t.isFieldDirty(f.CoreField.Tags)&&(e=n.splitAndTrimTags(t.getFieldValue(f.CoreField.Tags)).sort(u.localeIgnoreCaseComparer)),h=r.first(e,function(n){return!r.contains(i,n)}),c=r.first(i,function(n){return!r.contains(e,n)}),o.added=!!h,o.removed=!!c,o}function p(t){var u=[],e=t.getFieldValue(f.CoreField.Tags,!0),i;return e&&(u=n.splitAndTrimTags(e)),i=[],t.isFieldDirty(f.CoreField.Tags)&&(i=n.splitAndTrimTags(t.getFieldValue(f.CoreField.Tags))),r.subtract(i,u)}function w(t){var i,r,u;o.FeatureAvailabilityService.isFeatureEnabled(s.FeatureAvailabilityFlags.WebAccessWorkItemTrackingDisableTagsMRU)||(i=n.getWorkItemAddedTags(t),i.length>0&&(r=c.TfsContext.getDefault(),u=l.ProjectCollection.getConnection(r).getService(h.TagService),u.addTagsMru(i)))}function b(n){return"".concat(n," (").concat(i.BulkEditTagsAdd,")")}function k(n){return"".concat(n," (").concat(i.BulkEditTagsRemove,")")}function d(n){var f,i,t,r,o,u;if(!n)return[];for(f=n.split(e.TAG_SPLITTING_SEPARATOR),i=[],t=0,r=f;t<r.length;t++)o=r[t],u=o.trim(),u&&i.push(u);return i}function t(n){return n.join("; ")}n.tryProcessTagsChanges=a;n.AddTagsPseudoRefName="System.Tags-Add";n.RemoveTagsPseudoRefName="System.Tags-Remove";n.getTagPseudoFieldValues=v;n.areTagsAddedRemoved=y;n.getWorkItemAddedTags=p;n.updateTagsMru=w;n.getTagsAddPseudoFieldName=b;n.getTagsRemovePseudoFieldName=k;n.splitAndTrimTags=d;n.formatTags=t})(a=t.TagUtils||(t.TagUtils={}))});

define("WorkItemTracking/Scripts/OM/WorkItemManager",["require","exports","q","VSS/LWP","VSS/VSS","VSS/Diag","VSS/Events/Document","VSS/Events/Handlers","VSS/Events/Services","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Utils/Core","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WorkItemConstants","VSS/Navigation/HubsService","WorkItemTracking/Scripts/MruClassificationPicker/Stores/ClassificationFieldsMruStore","VSS/Utils/String","VSS/Events/Action","VSS/Resources/VSS.Resources.Platform","VSS/LWP","WorkItemTracking/Scripts/Utils/TagUtils","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){function ut(){return a.createError("Operation Canceled.",{name:v.Exceptions.OperationCanceledException})}var it,rt,tt;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemManager=void 0;it=d.getLWPModule("VSS/Platform/FPS");rt=function(){function n(n){this.workItemManager=n}return n.prototype.workItemsChanged=function(n){if(n.change===v.WorkItemChangeType.Saved&&n.changedWorkItemLinks){var t=n.changedWorkItemLinks.filter(function(n){return!n.linkData.RemoteHostId});this.updateWorkItemLinkTargets(t);this._fireEventsForWorkItemLinkTargets(t)}},n.prototype.updateWorkItemLinkTargets=function(n){for(var t,i,u=this.workItemManager,r=0,f=n.length;r<f;r++)t=n[r],i=u.getWorkItem(t.targetId),i&&(t.command==="add"?this.addWorkItemLink(i,t):t.command==="remove"&&this.deleteWorkItemLink(i,t))},n.prototype.addWorkItemLink=function(n,t){var r=t.linkData,f=n.store.findLinkTypeEnd(r.LinkType).oppositeEnd,e=f.id,o=this.findWorkItemLink(n,t.sourceId,e),i,u;o?o.linkData["Changed Date"]=r["Changed Date"]:(i=$.extend({},r),i.ID=t.sourceId,i.LinkType=e,n.allLinks.push(new a.WorkItemLink(n,i)));n.linksUpdatedExternally();n.resetLinks();u=[l.DalFields.RelatedLinks,l.DalFields.HistoryId];n.getField(l.DalFields.Parent)&&f.id===v.CoreLinkTypes.Parent&&u.push(l.DalFields.Parent);n.fireFieldChange(u)},n.prototype.deleteWorkItemLink=function(n,t){var i,r=t.linkData,f=n.store.findLinkTypeEnd(r.LinkType).oppositeEnd,e=f.id,u;i=this.findWorkItemLink(n,t.sourceId,e);i&&(i.linkData["Revised Date"]=r["Revised Date"],i.linkData["Revised By"]=r["Revised By"]);n.linksUpdatedExternally();n.resetLinks();u=[l.DalFields.RelatedLinks,l.DalFields.HistoryId];n.getField(l.DalFields.Parent)&&f.id===v.CoreLinkTypes.Parent&&u.push(l.DalFields.Parent);n.fireFieldChange(u)},n.prototype.findWorkItemLink=function(n,t,i){for(var f=n.getLinks(),r,u=0,e=f.length;u<e;u++)if(r=f[u],r instanceof a.WorkItemLink&&r.getTargetId()===t&&r.getLinkType()===i)return r},n.prototype._fireEventsForWorkItemLinkTargets=function(n){var u=this,t={},i,r;n.forEach(function(n){var i=n.targetId,r=u.workItemManager.getWorkItem(i);r&&(t[i]||(t[i]=[]),t[i].push(n))});for(i in t)r=this.workItemManager.getWorkItem(Number(i)),r.fireWorkItemLinksUpdatedByOtherWorkItem({changedWorkItemLinks:t[i]})},n}();tt=function(){function n(t){var r=this;this.hasDirtyManager=!1;this._downloading=!1;this._postXHRNavigate=function(){r.resetDirtyWorkItems();i.fcall(function(){return r.registerRunningDocumentEntry()})};this._deletingOrRestoringMessageDelegate=function(){if(!e.getRunningDocumentsTable().isModified()&&r.store.isDeletingOrRestoring())return h.DeleteOrRestoreConfirmationMessage};this._showDirtyConfirmationDialog=function(n){var i=n.unloadText,t=n.detail;u.requireModules(["VSS/Controls/Dialogs"]).spread(function(n){var f={dialogClass:"dirty-workitem-confirmation-dialog",defaultButton:"save",escapeButton:n.MessageDialog.buttons.cancel,noDefaultButton:!0,noAutoCta:!0,buttons:[n.MessageDialog.buttons.cancel,{id:"discard",text:h.DiscardChanges,reject:!1},{id:"save",text:h.SaveChanges,reject:!1,style:"cta savebtn"}],title:k.UnsavedChangesMessageTitle},u=function(){t.data.skipUnloadText=!0;it.FastPageSwitch(t.pageContext,t.href,t.recordHistoryEntry,t.data)},e=i+"\n"+h.UnsavedWorkItemActionsMessage,o=$("<div>").css("white-space","pre-wrap").html(e);n.showMessageDialog(o,f).then(function(n){n.button.id==="save"?r.beginSaveDirtyWorkItems(u,function(){}):(r.resetDirtyWorkItems(),u())});$(".dirty-workitem-confirmation-dialog .savebtn").focus()})};this.store=t;this._cache={};this._pinCounts={};this._pendingWorkitems={};this._workItemChangedDelegate=c.delegate(this,this.onWorkItemChanged);this._events=new o.NamedEventCollection;this._linkManager=new rt(this);this._updateClassificationMruThrottledDelegate=c.throttledDelegate(this,100,this._updateClassificationMru);this._cleanerTimer=window.setInterval(function(){r.cleanCache()},n.cacheCleanupTimeout);b.getService().registerActionWorker(b.CommonActions.SHOW_DIRTY_CONFIRMATION_DIALOG,this._showDirtyConfirmationDialog);s.getService().attachEvent(y.HubEventNames.PostXHRNavigate,this._postXHRNavigate);this.registerRunningDocumentEntry()}return n._initialize=function(){s.getService().attachEvent(v.Actions.WORKITEM_DELETED,n._onWorkItemDeleted);s.getService().attachEvent(v.Actions.WORKITEM_RESTORED,n._onWorkItemRestored);s.getService().attachEvent(v.Actions.WORKITEM_DESTROYED,n._onWorkItemDestroyed);s.getService().attachEvent(v.Actions.WORKITEM_DISCARDED,n._onWorkItemDiscarded);s.getService().attachEvent(v.Actions.WORKITEM_ID_UPDATED,n._onWorkItemIdUpdated);s.getService().attachEvent(v.Actions.WORKITEM_COPIED,n._onWorkItemCopied)},n.get=function(t){var i=t&&t.relatedData&&t.relatedData[v.RelatedDataKeys.WORKITEM_MANAGER_KEY];return i||(i=new n(t),t.relatedData[v.RelatedDataKeys.WORKITEM_MANAGER_KEY]=i),i},n._onWorkItemDeleted=function(t,i){var o=n.get(t),r=o.getWorkItem(i.workItemId),h,e,u,s;if(r){h=r.getField(l.CoreField.IsDeleted);h.setValue(!0,!0);r.fireWorkItemDeleted();var c=[i.workItemId],v=[],y=r.getLinks(),f=void 0;for(e=0;e<y.length;e++)f=y[e],f instanceof a.WorkItemLink&&(u=f.getTargetId(),s=f.getSourceId(),v.push(u===r.id?s:u),c.push(u===r.id?s:u));o.removeWorkItems(c);o.beginGetWorkItems(v,$.noop)}},n._onWorkItemRestored=function(t,i){n._removeWorkItemFromManager(t,i.workItemId)},n._onWorkItemDestroyed=function(t,i){n._removeWorkItemFromManager(t,i.workItemId)},n._removeWorkItemFromManager=function(t,i){var r=n.get(t),u=r.getWorkItem(i);u&&r.removeWorkItem(u)},n._onWorkItemDiscarded=function(t){var i=n.get(t.store);i.removeWorkItem(t)},n._onWorkItemIdUpdated=function(t){var i=n.get(t.store);i.updatePinWithSavedId(t)},n._onWorkItemCopied=function(t){var i=n.get(t.store);i.onWorkItemChanged(i,{workItem:t,change:v.WorkItemChangeType.Created});i.setWorkItem(t)},n.prototype.registerRunningDocumentEntry=function(){var n=this;this._runningDocumentEntry&&(e.getRunningDocumentsTable().remove(this._runningDocumentEntry),$(window).unbind("beforeunload",this._deletingOrRestoringMessageDelegate));this._runningCommentDocumentEntry&&e.getRunningDocumentsTable().remove(this._runningCommentDocumentEntry);this._runningDocumentEntry=e.getRunningDocumentsTable().add(this.store.path()+"/WorkItemManager",{isDirty:function(){return n.isDirty(!0)},beginSave:function(t,i){return n.beginSaveDirtyWorkItems(t,i)},getDirtyDocumentTitles:function(t){return n.getDirtyWorkItemTitles(t)}});this._runningCommentDocumentEntry=e.getRunningDocumentsTable().add(this.store.path()+"/WorkItemManager/CommentManager",{isDirty:function(){return n.isCommentDirty()},getDirtyDocumentTitles:function(){return n.getDirtyCommentTitles()}});$(window).bind("beforeunload",this._deletingOrRestoringMessageDelegate)},n.prototype.getDirtyCommentTitles=function(){for(var i,n=0,t=this.getManagedWorkItems();n<t.length;n++)if(i=t[n],i.getIsCommentDirty()&&!i.isDirty())return[h.UnsavedComment];return[]},n.prototype.getDirtyWorkItemTitles=function(n){for(var t,i=[],u=this.getDirtyWorkItems(),r=0,f=Math.min(n,u.length);r<f;r++)t=u[r],t.getIsCommentDirty()?i.push(w.format(h.WithUnsavedComment,t.getCaption(!1))):i.push(t.getCaption(!1));return i},n.prototype.resetDirtyWorkItems=function(){for(var n,r=this.getDirtyWorkItems(),t=0,i=r;t<i.length;t++)n=i[t],n.reset(),n.isNew()&&this.removeWorkItem(n)},n.prototype.dispose=function(){s.getService().detachEvent(y.HubEventNames.PostXHRNavigate,this._postXHRNavigate);b.getService().unregisterActionWorker(b.CommonActions.SHOW_DIRTY_CONFIRMATION_DIALOG,this._showDirtyConfirmationDialog);this._runningDocumentEntry&&(e.getRunningDocumentsTable().remove(this._runningDocumentEntry),$(window).unbind("beforeunload",this._deletingOrRestoringMessageDelegate));this._runningCommentDocumentEntry&&e.getRunningDocumentsTable().remove(this._runningCommentDocumentEntry);this._cleanerTimer&&(window.clearInterval(this._cleanerTimer),this._cleanerTimer=null)},n.prototype.invalidateCache=function(n){for(var t,r,i=0,u=n.length;i<u;i+=1)r=n[i],t=this._cache[r],t&&(this.isPinned(r)||t.workItem.isDirty()||this.removeWorkItem(t.workItem))},n.prototype.cleanCache=function(){var i,u=(new Date).getTime(),r=this._cache;for(var t in r)r.hasOwnProperty(t)&&(i=this._cache[t],u-i.timeStamp>n.cacheCleanupTimeout&&!this.isPinned(Number(t))&&(i.workItem.isDirty()||delete r[t]))},n.prototype.resetCache=function(){this._pinCounts={};this._cache={};this._pendingWorkitems={}},n.prototype.getLastRetrievedWorkitemCIData=function(){return this._lastRetrievedWorkitemCIData},n.prototype.updatePinWithSavedId=function(n){if(n.tempId<0){var r=n.tempId,t=n.id||0,i=this._pinCounts[r]||0;i>0&&t>0&&(this._pinCounts[t]=i)}},n.prototype.pin=function(n){if(!(n instanceof a.WorkItem))throw new Error("Invalid argument type: 'workItem'");n.id>0&&(this._touchCache(n.id,n),this._incrementPinCount(n.id));n.tempId<0&&(this._touchCache(n.tempId,n),this._incrementPinCount(n.tempId))},n.prototype.unpin=function(n){if(!(n instanceof a.WorkItem))throw new Error("Invalid argument type: 'workItem'.");n.id>0&&(this._touchCache(n.id,n),this._decrementPinCount(n.id));n.tempId<0&&(this._touchCache(n.tempId,n),this._decrementPinCount(n.tempId))},n.prototype.isPinned=function(n){return(this._pinCounts[n]||0)>0},n.prototype.createWorkItem=function(n,t,i){try{var r=n.create(t,i);this.onWorkItemChanged(this,{workItem:r,change:v.WorkItemChangeType.Created});return this.setWorkItem(r),r}catch(u){n instanceof a.WorkItemType||nt.traceMessage(l.WITCommonConstants.WorkItemTrackingArea,"WorkItemManager",l.WITCommonConstants.WorkItemTypes,"passed object is of type ".concat(typeof n," ").concat(u.message));throw u;}},n.prototype.logWorkItemTypesData=function(n){var i=function(){var n=new WeakSet;return function(t,i){if(typeof i=="object"&&i!==null){if(n.has(i))return;n.add(i)}return i}},t;try{t=JSON.stringify(n,i());nt.traceMessage(l.WITCommonConstants.WorkItemTrackingArea,"WorkItemManager",l.WITCommonConstants.WorkItemTypes,"object: ".concat(t))}catch(r){nt.traceMessage(l.WITCommonConstants.WorkItemTrackingArea,"WorkItemManager",l.WITCommonConstants.WorkItemTypes,"".concat(r.message))}},n.prototype.beginGetWorkItem=function(n,t,i,r,u,f){var s=this,e,o;this.getManagedWorkItems().length>0&&(this._cache[n]?u&&(u>this._cache[n].workItem.revision||u===-1)?this.invalidateCache([n]):(e=(new Date).getTime()-this._cache[n].timeStamp,this._lastRetrievedWorkitemCIData={CacheHit:"true",TimeInCache:e.toString()}):this._lastRetrievedWorkitemCIData={CacheHit:"false"});o={isDeleted:r,includeExtensionFields:f};this.beginGetWorkItems([n],function(n){$.isFunction(t)&&t.call(s,n&&n[0])},i,o)},n.prototype.beginGetWorkItems=function(n,t,i,r){var o=this,c=[],h={},e={},f=0,l=v.PageSizes.SAVE,s;r=r||{};r.pageSize&&Number(r.pageSize)>0&&(l=r.pageSize);var a=function(){!s&&f<=0&&(s=!0,$.isFunction(t)&&t.call(o,$.map(n,function(n){return h[n]})))},p=function(n,t){f--;delete e[n];h[n]=t;a()},w=function(){$.each(e,function(n,t){e.hasOwnProperty(n)&&o._cancelPendingGetWorkItem(n,t)});f=0;e={}},y=function(n){s||(s=!0,w(),u.handleError(n,i,o))},b=function(n,t){f--;delete e[n];y(t)},k=function(){s||y(ut())};$.each(n,function(n,t){var i=o.getWorkItem(t);i?(c.push(t),h[t]=i):(f++,e[t]=o._pendWorkItem(t,p,b))});r.cancelable&&r.cancelable.register(k);$.isFunction(r.pageOperationCallback)&&c.length>0&&r.pageOperationCallback($.map(c,function(n){return h[n]}),f===0);f?this._downloadPendingWorkItems(r.pageOperationCallback,l,r.isDeleted,r.includeExtensionFields,r.retryOnExceedingJsonLimit,r.excludeFromUserRecentActivity):a()},n.prototype.getWorkItem=function(n){var i,t=this._cache[n];return t&&(t.timeStamp=(new Date).getTime(),i=t.workItem),i},n.prototype.bind=function(n){if(!(n instanceof a.WorkItem))throw new Error("Invalid argument type: 'workItem'.");n.attachWorkItemChanged(this._workItemChangedDelegate)},n.prototype.unbind=function(n){if(!(n instanceof a.WorkItem))throw new Error("Invalid argument type: 'workItem'.");n.detachWorkItemChanged(this._workItemChangedDelegate)},n.prototype.setWorkItem=function(n){var t;if(!(n instanceof a.WorkItem))throw new Error("Invalid argument type: 'workItem'.");this._setManager(n);t={workItem:n,timeStamp:(new Date).getTime()};n.id>0&&(this._cache[n.id]=t);n.tempId<0&&(this._cache[n.tempId]=t)},n.prototype.removeWorkItem=function(n){if(!(n instanceof a.WorkItem))throw new Error("Invalid argument type: 'workItem'.");n.id>0&&(delete this._cache[n.id],delete this._pinCounts[n.id]);n.tempId<0&&(delete this._cache[n.tempId],delete this._pinCounts[n.tempId]);this._clearManager(n)},n.prototype.removeWorkItems=function(n){var t=this;n.forEach(function(n){var i=t.getWorkItem(n);i&&t.removeWorkItem(i)})},n.prototype.getManagedWorkItems=function(){var r=[],n=this._cache,t;for(var i in n)if(n.hasOwnProperty(i)){if(t=n[i].workItem,Number(i)<0&&t.id!==0)continue;r.push(t)}return r},n.prototype.getUnmanagedWorkItems=function(){var r=[],n=this._cache;for(var t in n)if(n.hasOwnProperty(t)){if(Number(t)>=0)continue;var i=n[t].workItem,u=i.id,f=i.tempId;u>0&&f<0&&r.push(i)}return r},n.prototype.getDirtyWorkItems=function(){for(var i=[],t=this.getManagedWorkItems(),n=0,r=t.length;n<r;n++)t[n].isDirty()&&i.push(t[n]);return i},n.prototype.beginSaveDirtyWorkItems=function(n,t){return this.store.beginSaveWorkItemsBatch(this.getDirtyWorkItems(),n,t)},n.prototype.onWorkItemChanged=function(n,t){var i,u;t.change===v.WorkItemChangeType.PreSave&&(i=t.workItem,i&&i.isDirty()&&(this._populateWorkItemClassificationNodes(i),this._updateClassificationMruThrottledDelegate(),this._updateTagsMru(i)));t.change===v.WorkItemChangeType.Saved&&this.setWorkItem(t.workItem);this._linkManager.workItemsChanged(t);this._events.invokeHandlers("work-item-changed",this,t);(t.change===v.WorkItemChangeType.Opened||t.change===v.WorkItemChangeType.Refresh||t.change===v.WorkItemChangeType.SaveCompleted||t.change===v.WorkItemChangeType.Deleted)&&(u=r.getLWPService("IVssContributionEventService"),u&&u.fireEvent("workitem-activity-updated"))},n.prototype.attachWorkItemChanged=function(n){this._events.subscribe("work-item-changed",n)},n.prototype.detachWorkItemChanged=function(n){this._events.unsubscribe("work-item-changed",n)},n.prototype.isDirty=function(n){for(var i=this.getManagedWorkItems(),t=0,r=i.length;t<r;t++)if(i[t].isDirty(n))return!0;return!1},n.prototype.isCommentDirty=function(){for(var t=this.getManagedWorkItems(),n=0,i=t.length;n<i;n++)if(t[n].getIsCommentDirty()&&!t[n].isDirty())return!0;return!1},n.prototype._populateWorkItemClassificationNodes=function(n){var i=n.getUpdateData(),r=i&&i.payload&&i.payload.fields;if(r){var u=this.store.getFieldDefinition(l.CoreFieldRefNames.AreaId),f=this.store.getFieldDefinition(l.CoreFieldRefNames.IterationId),t=n.project.guid,e=r[u.id],o=r[f.id];u&&e&&(this._areaIdsMap||(this._areaIdsMap={}),this._areaIdsMap[t]||(this._areaIdsMap[t]=[]),this._areaIdsMap[t].push(e));f&&o&&(this._iterationIdsMap||(this._iterationIdsMap={}),this._iterationIdsMap[t]||(this._iterationIdsMap[t]=[]),this._iterationIdsMap[t].push(o))}},n.prototype._updateClassificationMru=function(){var f=p.ClassificationFieldsMruStore.getDefaultFluxContext(),t,r,i,u,n;if(this._areaIdsMap){for(t=0,r=Object.keys(this._areaIdsMap);t<r.length;t++)n=r[t],this._areaIdsMap[n]&&this._areaIdsMap[n].length>0&&f.actionsCreator.addToAreaPathMru(n,this._areaIdsMap[n]);this._areaIdsMap=null}if(this._iterationIdsMap){for(i=0,u=Object.keys(this._iterationIdsMap);i<u.length;i++)n=u[i],this._iterationIdsMap[n]&&this._iterationIdsMap[n].length>0&&f.actionsCreator.addToIterationPathMru(n,this._iterationIdsMap[n]);this._iterationIdsMap=null}},n.prototype._updateTagsMru=function(n){g.TagUtils.updateTagsMru(n)},n.prototype._setManager=function(n){var t=n.relatedData[v.RelatedDataKeys.WORKITEM_MANAGER_KEY];t!==this&&(t&&t.unbind(n),n.relatedData[v.RelatedDataKeys.WORKITEM_MANAGER_KEY]=this,this.bind(n))},n.prototype._clearManager=function(n){var t=n.relatedData[v.RelatedDataKeys.WORKITEM_MANAGER_KEY];t===this&&(n.relatedData[v.RelatedDataKeys.WORKITEM_MANAGER_KEY]=null,this.unbind(n))},n.prototype._touchCache=function(n,t){var i=this._cache[n];i&&i.workItem===t&&(i.timeStamp=(new Date).getTime())},n.prototype._decrementPinCount=function(n){var t=this._pinCounts[n]||0;t--;t<=0?delete this._pinCounts[n]:this._pinCounts[n]=t},n.prototype._incrementPinCount=function(n){var t=this._pinCounts[n]||0;t++;this._pinCounts[n]=t},n.prototype._pendWorkItem=function(n,t,i){var r=this,f=this._pendingWorkitems[n],e=function(n,i){if(delete r._pendingWorkitems[n],!r.getWorkItem(n)){r.setWorkItem(i);r.onWorkItemChanged(r,{workItem:i,change:v.WorkItemChangeType.Opened})}t.call(r,n,i)},o=function(n,t){delete r._pendingWorkitems[n];i.call(r,n,t)};return f?f.cbQueue.register(e,o):(f={id:n,cbQueue:u.queueCallbacks(this,e,o)},this._pendingWorkitems[n]=f,f.cookie)},n.prototype._cancelPendingGetWorkItem=function(n,t){var i=this._pendingWorkitems[n];i&&(i.cbQueue.unregister(t),i.cbQueue.count()===0&&delete this._pendingWorkitems[n])},n.prototype._downloadPendingWorkItems=function(t,i,r,u,f,e){var s=this,o=[],h;this._downloading||($.each(this._pendingWorkitems,function(n,t){if(s._pendingWorkitems.hasOwnProperty(n)&&(o.push(t),o.length>i))return!1}),o.length&&(this._downloading=!0,h=this,this.store.beginGetWorkItems($.map(o,function(n){return n.id}),function(n){var c={},l;try{$.each(n,function(n,t){c[t.id]=t});$.each(o,function(n,t){t.cbQueue.finish(t.id,c[t.id])});t&&$.isFunction(t)&&(l=Object.keys(h._pendingWorkitems).length,t(n,l===0))}finally{s._downloading=!1;s._downloadPendingWorkItems(t,i,r,u,f,e)}},function(h){try{f===!0&&i>=2*n.MINIMUM_PAGE_SIZE&&h.type===v.Exceptions.InvalidOperationException?i/=2:$.each(o,function(n,t){t.cbQueue.error(t.id,h)})}finally{s._downloading=!1;s._downloadPendingWorkItems(t,i,r,u,f,e)}},r,u,e)))},n.cacheCleanupTimeout=6e5,n.MINIMUM_PAGE_SIZE=10,n}();t.WorkItemManager=tt;tt._initialize()});

define("VSS/Common/Contracts/System",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.DayOfWeek=void 0;var i;(function(n){n[n.Sunday=0]="Sunday";n[n.Monday=1]="Monday";n[n.Tuesday=2]="Tuesday";n[n.Wednesday=3]="Wednesday";n[n.Thursday=4]="Thursday";n[n.Friday=5]="Friday";n[n.Saturday=6]="Saturday"})(i=t.DayOfWeek||(t.DayOfWeek={}));t.TypeInfo={DayOfWeek:{enumValues:{sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}}}});

define("TFS/Work/Contracts",["require","exports","VSS/Common/Contracts/System"],function(n,t,i){"use strict";var r,u,f,e,o,s,h,c,l,a,v,y;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.TimelineTeamStatusCode=t.TimelineIterationStatusCode=t.TimelineCriteriaStatusCode=t.TimeFrame=t.PlanUserPermissions=t.PlanType=t.IdentityDisplayFormat=t.FieldType=t.BugsBehavior=t.BoardColumnType=t.BoardBadgeColumnOptions=t.BacklogType=void 0,function(n){n[n.Portfolio=0]="Portfolio";n[n.Requirement=1]="Requirement";n[n.Task=2]="Task"}(r=t.BacklogType||(t.BacklogType={})),function(n){n[n.InProgressColumns=0]="InProgressColumns";n[n.AllColumns=1]="AllColumns";n[n.CustomColumns=2]="CustomColumns"}(u=t.BoardBadgeColumnOptions||(t.BoardBadgeColumnOptions={})),function(n){n[n.Incoming=0]="Incoming";n[n.InProgress=1]="InProgress";n[n.Outgoing=2]="Outgoing"}(f=t.BoardColumnType||(t.BoardColumnType={})),function(n){n[n.Off=0]="Off";n[n.AsRequirements=1]="AsRequirements";n[n.AsTasks=2]="AsTasks"}(e=t.BugsBehavior||(t.BugsBehavior={})),function(n){n[n.String=0]="String";n[n.PlainText=1]="PlainText";n[n.Integer=2]="Integer";n[n.DateTime=3]="DateTime";n[n.TreePath=4]="TreePath";n[n.Boolean=5]="Boolean";n[n.Double=6]="Double"}(o=t.FieldType||(t.FieldType={})),function(n){n[n.AvatarOnly=0]="AvatarOnly";n[n.FullName=1]="FullName";n[n.AvatarAndFullName=2]="AvatarAndFullName"}(s=t.IdentityDisplayFormat||(t.IdentityDisplayFormat={})),function(n){n[n.DeliveryTimelineView=0]="DeliveryTimelineView"}(h=t.PlanType||(t.PlanType={})),function(n){n[n.None=0]="None";n[n.View=1]="View";n[n.Edit=2]="Edit";n[n.Delete=4]="Delete";n[n.Manage=8]="Manage";n[n.AllPermissions=15]="AllPermissions"}(c=t.PlanUserPermissions||(t.PlanUserPermissions={})),function(n){n[n.Past=0]="Past";n[n.Current=1]="Current";n[n.Future=2]="Future"}(l=t.TimeFrame||(t.TimeFrame={})),function(n){n[n.OK=0]="OK";n[n.InvalidFilterClause=1]="InvalidFilterClause";n[n.Unknown=2]="Unknown"}(a=t.TimelineCriteriaStatusCode||(t.TimelineCriteriaStatusCode={})),function(n){n[n.OK=0]="OK";n[n.IsOverlapping=1]="IsOverlapping"}(v=t.TimelineIterationStatusCode||(t.TimelineIterationStatusCode={})),function(n){n[n.OK=0]="OK";n[n.DoesntExistOrAccessDenied=1]="DoesntExistOrAccessDenied";n[n.MaxTeamsExceeded=2]="MaxTeamsExceeded";n[n.MaxTeamFieldsExceeded=3]="MaxTeamFieldsExceeded";n[n.BacklogInError=4]="BacklogInError";n[n.MissingTeamFieldValue=5]="MissingTeamFieldValue";n[n.NoIterationsExist=6]="NoIterationsExist"}(y=t.TimelineTeamStatusCode||(t.TimelineTeamStatusCode={}));t.TypeInfo={BacklogConfiguration:{},BacklogLevelConfiguration:{},BacklogType:{enumValues:{portfolio:0,requirement:1,task:2}},Board:{},BoardBadgeColumnOptions:{enumValues:{inProgressColumns:0,allColumns:1,customColumns:2}},BoardColumn:{},BoardColumnType:{enumValues:{incoming:0,inProgress:1,outgoing:2}},BugsBehavior:{enumValues:{off:0,asRequirements:1,asTasks:2}},CapacityContractBase:{},CapacityPatch:{},CardFieldSettings:{},CardSettings:{},CreatePlan:{},DateRange:{},DeliveryViewData:{},DeliveryViewPropertyCollection:{},FieldInfo:{},FieldType:{enumValues:{string:0,plainText:1,integer:2,dateTime:3,treePath:4,boolean:5,double:6}},IdentityDisplayFormat:{enumValues:{avatarOnly:0,fullName:1,avatarAndFullName:2}},Marker:{},Plan:{},PlanMetadata:{},PlanType:{enumValues:{deliveryTimelineView:0}},PlanUserPermissions:{enumValues:{none:0,view:1,edit:2,"delete":4,manage:8,allPermissions:15}},TeamCapacity:{},TeamIterationAttributes:{},TeamMemberCapacity:{},TeamMemberCapacityIdentityRef:{},TeamSetting:{},TeamSettingsDaysOff:{},TeamSettingsDaysOffPatch:{},TeamSettingsIteration:{},TeamSettingsPatch:{},TimeFrame:{enumValues:{past:0,current:1,future:2}},TimelineCriteriaStatus:{},TimelineCriteriaStatusCode:{enumValues:{ok:0,invalidFilterClause:1,unknown:2}},TimelineIterationStatus:{},TimelineIterationStatusCode:{enumValues:{ok:0,isOverlapping:1}},TimelineTeamData:{},TimelineTeamIteration:{},TimelineTeamStatus:{},TimelineTeamStatusCode:{enumValues:{ok:0,doesntExistOrAccessDenied:1,maxTeamsExceeded:2,maxTeamFieldsExceeded:3,backlogInError:4,missingTeamFieldValue:5,noIterationsExist:6}},UpdatePlan:{}};t.TypeInfo.BacklogConfiguration.fields={bugsBehavior:{enumType:t.TypeInfo.BugsBehavior},portfolioBacklogs:{isArray:!0,typeInfo:t.TypeInfo.BacklogLevelConfiguration},requirementBacklog:{typeInfo:t.TypeInfo.BacklogLevelConfiguration},taskBacklog:{typeInfo:t.TypeInfo.BacklogLevelConfiguration}};t.TypeInfo.BacklogLevelConfiguration.fields={type:{enumType:t.TypeInfo.BacklogType}};t.TypeInfo.Board.fields={columns:{isArray:!0,typeInfo:t.TypeInfo.BoardColumn}};t.TypeInfo.BoardColumn.fields={columnType:{enumType:t.TypeInfo.BoardColumnType}};t.TypeInfo.CapacityContractBase.fields={daysOff:{isArray:!0,typeInfo:t.TypeInfo.DateRange}};t.TypeInfo.CapacityPatch.fields={daysOff:{isArray:!0,typeInfo:t.TypeInfo.DateRange}};t.TypeInfo.CardFieldSettings.fields={additionalFields:{isArray:!0,typeInfo:t.TypeInfo.FieldInfo},assignedToDisplayFormat:{enumType:t.TypeInfo.IdentityDisplayFormat},coreFields:{isArray:!0,typeInfo:t.TypeInfo.FieldInfo}};t.TypeInfo.CardSettings.fields={fields:{typeInfo:t.TypeInfo.CardFieldSettings}};t.TypeInfo.CreatePlan.fields={type:{enumType:t.TypeInfo.PlanType}};t.TypeInfo.DateRange.fields={end:{isDate:!0},start:{isDate:!0}};t.TypeInfo.DeliveryViewData.fields={criteriaStatus:{typeInfo:t.TypeInfo.TimelineCriteriaStatus},endDate:{isDate:!0},startDate:{isDate:!0},teams:{isArray:!0,typeInfo:t.TypeInfo.TimelineTeamData}};t.TypeInfo.DeliveryViewPropertyCollection.fields={cardSettings:{typeInfo:t.TypeInfo.CardSettings},markers:{isArray:!0,typeInfo:t.TypeInfo.Marker}};t.TypeInfo.FieldInfo.fields={fieldType:{enumType:t.TypeInfo.FieldType}};t.TypeInfo.Marker.fields={date:{isDate:!0}};t.TypeInfo.Plan.fields={createdDate:{isDate:!0},modifiedDate:{isDate:!0},type:{enumType:t.TypeInfo.PlanType},userPermissions:{enumType:t.TypeInfo.PlanUserPermissions}};t.TypeInfo.PlanMetadata.fields={modifiedDate:{isDate:!0},userPermissions:{enumType:t.TypeInfo.PlanUserPermissions}};t.TypeInfo.TeamCapacity.fields={teamMembers:{isArray:!0,typeInfo:t.TypeInfo.TeamMemberCapacityIdentityRef}};t.TypeInfo.TeamIterationAttributes.fields={finishDate:{isDate:!0},startDate:{isDate:!0},timeFrame:{enumType:t.TypeInfo.TimeFrame}};t.TypeInfo.TeamMemberCapacity.fields={daysOff:{isArray:!0,typeInfo:t.TypeInfo.DateRange}};t.TypeInfo.TeamMemberCapacityIdentityRef.fields={daysOff:{isArray:!0,typeInfo:t.TypeInfo.DateRange}};t.TypeInfo.TeamSetting.fields={backlogIteration:{typeInfo:t.TypeInfo.TeamSettingsIteration},bugsBehavior:{enumType:t.TypeInfo.BugsBehavior},defaultIteration:{typeInfo:t.TypeInfo.TeamSettingsIteration},workingDays:{isArray:!0,enumType:i.TypeInfo.DayOfWeek}};t.TypeInfo.TeamSettingsDaysOff.fields={daysOff:{isArray:!0,typeInfo:t.TypeInfo.DateRange}};t.TypeInfo.TeamSettingsDaysOffPatch.fields={daysOff:{isArray:!0,typeInfo:t.TypeInfo.DateRange}};t.TypeInfo.TeamSettingsIteration.fields={attributes:{typeInfo:t.TypeInfo.TeamIterationAttributes}};t.TypeInfo.TeamSettingsPatch.fields={bugsBehavior:{enumType:t.TypeInfo.BugsBehavior},workingDays:{isArray:!0,enumType:i.TypeInfo.DayOfWeek}};t.TypeInfo.TimelineCriteriaStatus.fields={type:{enumType:t.TypeInfo.TimelineCriteriaStatusCode}};t.TypeInfo.TimelineIterationStatus.fields={type:{enumType:t.TypeInfo.TimelineIterationStatusCode}};t.TypeInfo.TimelineTeamData.fields={iterations:{isArray:!0,typeInfo:t.TypeInfo.TimelineTeamIteration},status:{typeInfo:t.TypeInfo.TimelineTeamStatus}};t.TypeInfo.TimelineTeamIteration.fields={finishDate:{isDate:!0},startDate:{isDate:!0},status:{typeInfo:t.TypeInfo.TimelineIterationStatus}};t.TypeInfo.TimelineTeamStatus.fields={type:{enumType:t.TypeInfo.TimelineTeamStatusCode}};t.TypeInfo.UpdatePlan.fields={type:{enumType:t.TypeInfo.PlanType}}});

define("TFS/Work/RestClient",["require","exports","TFS/Work/Contracts","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f){"use strict";function ht(n){return window.VSS&&window.VSS.VssSDKRestVersion&&ot[window.VSS.VssSDKRestVersion]?r.getClient(ot[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(v,undefined,undefined,undefined,n)}var e,o,s,l,h,c,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,st,ot;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.WorkHttpClient=t.WorkHttpClient2=t.WorkHttpClient2_1=t.WorkHttpClient2_2=t.WorkHttpClient2_3=t.WorkHttpClient3=t.WorkHttpClient3_1=t.WorkHttpClient3_2=t.WorkHttpClient4=t.WorkHttpClient4_1=t.WorkHttpClient5=t.WorkHttpClient5_1=t.WorkHttpClient5_2=t.WorkHttpClient6=t.WorkHttpClient6_1=t.WorkHttpClient7=t.WorkHttpClient7_1=t.CommonMethods6_1To7_1=t.CommonMethods5_2To7_1=t.CommonMethods5_1To7_1=t.CommonMethods4_1To7_1=t.CommonMethods3To7_1=t.CommonMethods2To7_1=void 0;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateTeamSettings=function(n,t){var r=t.projectId||t.project,u=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"c3c1012b-bea7-49d7-b45e-1664e566f84c",resource:"teamsettings",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",requestType:i.TypeInfo.TeamSettingsPatch,responseType:i.TypeInfo.TeamSetting,routeValues:{project:r,team:u},apiVersion:this.teamsettingsApiVersion,data:n})},t.prototype.getTeamSettings=function(n){var t=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"c3c1012b-bea7-49d7-b45e-1664e566f84c",resource:"teamsettings",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseType:i.TypeInfo.TeamSetting,routeValues:{project:t,team:r},apiVersion:this.teamsettingsApiVersion})},t.prototype.updateTeamFieldValues=function(n,t){var i=t.projectId||t.project,r=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"07ced576-58ed-49e6-9c1e-5cb53ab8bf2a",resource:"teamfieldvalues",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/{resource}",routeValues:{project:i,team:r},apiVersion:this.teamfieldvaluesApiVersion,data:n})},t.prototype.getTeamFieldValues=function(n){var t=n.projectId||n.project,i=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"07ced576-58ed-49e6-9c1e-5cb53ab8bf2a",resource:"teamfieldvalues",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/{resource}",routeValues:{project:t,team:i},apiVersion:this.teamfieldvaluesApiVersion})},t.prototype.updateTeamDaysOff=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"2d4faa2e-9150-4cbf-a47a-932b1b4a0773",resource:"teamdaysoff",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}",requestType:i.TypeInfo.TeamSettingsDaysOffPatch,responseType:i.TypeInfo.TeamSettingsDaysOff,routeValues:{project:u,team:f,iterationId:r},apiVersion:this.teamdaysoffApiVersion,data:n})},t.prototype.getTeamDaysOff=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"2d4faa2e-9150-4cbf-a47a-932b1b4a0773",resource:"teamdaysoff",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}",responseType:i.TypeInfo.TeamSettingsDaysOff,routeValues:{project:r,team:u,iterationId:t},apiVersion:this.teamdaysoffApiVersion})},t.prototype.updateBoardRows=function(n,t,i){var r=t.projectId||t.project,u=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"0863355d-aefd-4d63-8669-984c9b7b0e78",resource:"rows",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:r,team:u,board:i},apiVersion:this.rowsApiVersion,data:n})},t.prototype.getBoardRows=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"0863355d-aefd-4d63-8669-984c9b7b0e78",resource:"rows",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:i,team:r,board:t},apiVersion:this.rowsApiVersion})},t.prototype.getProcessConfiguration=function(n){return this._beginRequest({httpMethod:"GET",area:"work",locationId:"f901ba42-86d2-4b0c-89c1-3f86d06daa84",resource:"processconfiguration",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:n},apiVersion:this.processconfigurationApiVersion})},t.prototype.postTeamIteration=function(n,t){var r=t.projectId||t.project,u=t.teamId||t.team;return this._beginRequest({httpMethod:"POST",area:"work",locationId:"c9175577-28a1-4b06-9197-8636af9f64ad",resource:"iterations",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/{resource}/{id}",requestType:i.TypeInfo.TeamSettingsIteration,responseType:i.TypeInfo.TeamSettingsIteration,routeValues:{project:r,team:u},apiVersion:this.iterationsApiVersion,data:n})},t.prototype.getTeamIterations=function(n,t){var r={$timeframe:t},u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"c9175577-28a1-4b06-9197-8636af9f64ad",resource:"iterations",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/{resource}/{id}",responseType:i.TypeInfo.TeamSettingsIteration,responseIsCollection:!0,routeValues:{project:u,team:f},queryParams:r,apiVersion:this.iterationsApiVersion})},t.prototype.getTeamIteration=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"c9175577-28a1-4b06-9197-8636af9f64ad",resource:"iterations",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/{resource}/{id}",responseType:i.TypeInfo.TeamSettingsIteration,routeValues:{project:r,team:u,id:t},apiVersion:this.iterationsApiVersion})},t.prototype.deleteTeamIteration=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"work",locationId:"c9175577-28a1-4b06-9197-8636af9f64ad",resource:"iterations",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/{resource}/{id}",routeValues:{project:i,team:r,id:t},apiVersion:this.iterationsApiVersion})},t.prototype.updateBoardColumns=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"c555d7ff-84e1-47df-9923-a3fe0cd8751b",resource:"columns",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}/{id}",requestType:i.TypeInfo.BoardColumn,responseType:i.TypeInfo.BoardColumn,responseIsCollection:!0,routeValues:{project:u,team:f,board:r},apiVersion:this.columnsApiVersion,data:n})},t.prototype.getBoardColumns=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"c555d7ff-84e1-47df-9923-a3fe0cd8751b",resource:"columns",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}/{id}",responseType:i.TypeInfo.BoardColumn,responseIsCollection:!0,routeValues:{project:r,team:u,board:t},apiVersion:this.columnsApiVersion})},t.prototype.updateBoardChart=function(n,t,i,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"45fe888c-239e-49fd-958c-df1a1ab21d97",resource:"charts",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}/{name}",routeValues:{project:u,team:f,board:i,name:r},apiVersion:this.chartsApiVersion,data:n})},t.prototype.getBoardCharts=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"45fe888c-239e-49fd-958c-df1a1ab21d97",resource:"charts",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}/{name}",responseIsCollection:!0,routeValues:{project:i,team:r,board:t},apiVersion:this.chartsApiVersion})},t.prototype.getBoardChart=function(n,t,i){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"45fe888c-239e-49fd-958c-df1a1ab21d97",resource:"charts",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}/{name}",routeValues:{project:r,team:u,board:t,name:i},apiVersion:this.chartsApiVersion})},t.prototype.updateBoardCardSettings=function(n,t,i){var r=t.projectId||t.project,u=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"07c3b467-bc60-4f05-8e34-599ce288fafc",resource:"cardsettings",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}",routeValues:{project:r,team:u,board:i},apiVersion:this.cardsettingsApiVersion,data:n})},t.prototype.getBoardCardSettings=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"07c3b467-bc60-4f05-8e34-599ce288fafc",resource:"cardsettings",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}",routeValues:{project:i,team:r,board:t},apiVersion:this.cardsettingsApiVersion})},t.prototype.updateBoardCardRuleSettings=function(n,t,i){var r=t.projectId||t.project,u=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"b044a3d9-02ea-49c7-91a1-b730949cc896",resource:"cardrulesettings",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}",routeValues:{project:r,team:u,board:i},apiVersion:this.cardrulesettingsApiVersion,data:n})},t.prototype.getBoardCardRuleSettings=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"b044a3d9-02ea-49c7-91a1-b730949cc896",resource:"cardrulesettings",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}",routeValues:{project:i,team:r,board:t},apiVersion:this.cardrulesettingsApiVersion})},t.prototype.setBoardOptions=function(n,t,i){var r=t.projectId||t.project,u=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"23ad19fc-3b8e-4877-8462-b3f92bc06b40",resource:"boards",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:r,team:u,id:i},apiVersion:this.boardsApiVersion,data:n})},t.prototype.getBoards=function(n){var t=n.projectId||n.project,i=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"23ad19fc-3b8e-4877-8462-b3f92bc06b40",resource:"boards",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:t,team:i},apiVersion:this.boardsApiVersion})},t.prototype.getBoard=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"23ad19fc-3b8e-4877-8462-b3f92bc06b40",resource:"boards",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",responseType:i.TypeInfo.Board,routeValues:{project:r,team:u,id:t},apiVersion:this.boardsApiVersion})},t.prototype.getRowSuggestedValues=function(n){return this._beginRequest({httpMethod:"GET",area:"work",locationId:"bb494cc6-a0f5-4c6c-8dca-ea6912e79eb9",resource:"boardrows",routeTemplate:"{project}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.boardrowsApiVersion})},t.prototype.getColumnSuggestedValues=function(n){return this._beginRequest({httpMethod:"GET",area:"work",locationId:"eb7ec5a3-1ba3-4fd1-b834-49a5a387e57d",resource:"boardcolumns",routeTemplate:"{project}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.boardcolumnsApiVersion})},t.prototype.getBacklogConfigurations=function(n){var t=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"7799f497-3cb5-4f16-ad4f-5cd06012db64",resource:"backlogconfiguration",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseType:i.TypeInfo.BacklogConfiguration,routeValues:{project:t,team:r},apiVersion:this.backlogconfigurationApiVersion})},t.serviceInstanceId=f.ServiceInstanceTypes.TFS,t}(u.VssHttpClient);t.CommonMethods2To7_1=e;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updatePlan=function(n,t,r){return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"0b42cb47-cd73-4810-ac90-19c9ba147453",resource:"plans",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",requestType:i.TypeInfo.UpdatePlan,responseType:i.TypeInfo.Plan,routeValues:{project:t,id:r},apiVersion:this.plansApiVersion,data:n})},t.prototype.getPlans=function(n){return this._beginRequest({httpMethod:"GET",area:"work",locationId:"0b42cb47-cd73-4810-ac90-19c9ba147453",resource:"plans",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseType:i.TypeInfo.Plan,responseIsCollection:!0,routeValues:{project:n},apiVersion:this.plansApiVersion})},t.prototype.getPlan=function(n,t){return this._beginRequest({httpMethod:"GET",area:"work",locationId:"0b42cb47-cd73-4810-ac90-19c9ba147453",resource:"plans",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseType:i.TypeInfo.Plan,routeValues:{project:n,id:t},apiVersion:this.plansApiVersion})},t.prototype.deletePlan=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"work",locationId:"0b42cb47-cd73-4810-ac90-19c9ba147453",resource:"plans",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:n,id:t},apiVersion:this.plansApiVersion})},t.prototype.createPlan=function(n,t){return this._beginRequest({httpMethod:"POST",area:"work",locationId:"0b42cb47-cd73-4810-ac90-19c9ba147453",resource:"plans",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",requestType:i.TypeInfo.CreatePlan,responseType:i.TypeInfo.Plan,routeValues:{project:t},apiVersion:this.plansApiVersion,data:n})},t.prototype.getDeliveryTimelineData=function(n,t,r,u,f){var e={revision:r,startDate:u,endDate:f};return this._beginRequest({httpMethod:"GET",area:"work",locationId:"bdd0834e-101f-49f0-a6ae-509f384a12b4",resource:"deliverytimeline",routeTemplate:"{project}/_apis/{area}/plans/{id}/{resource}",responseType:i.TypeInfo.DeliveryViewData,routeValues:{project:n,id:t},queryParams:e,apiVersion:this.deliverytimelineApiVersion})},t.prototype.updateBoardUserSettings=function(n,t,i){var r=t.projectId||t.project,u=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"b30d9f58-1891-4b0a-b168-c46408f919b0",resource:"boardusersettings",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}",routeValues:{project:r,team:u,board:i},apiVersion:this.boardusersettingsApiVersion,data:n})},t.prototype.getBoardUserSettings=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"b30d9f58-1891-4b0a-b168-c46408f919b0",resource:"boardusersettings",routeTemplate:"{project}/{team}/_apis/{area}/boards/{board}/{resource}",routeValues:{project:i,team:r,board:t},apiVersion:this.boardusersettingsApiVersion})},t.prototype.getBoardMappingParentItems=function(n,t,i){var r={childBacklogContextCategoryRefName:t,workitemIds:i&&i.join(",")},u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"186abea3-5c35-432f-9e28-7a15b4312a0e",resource:"boardparents",routeTemplate:"{project}/{team}/_apis/{area}/boards/{resource}",responseIsCollection:!0,routeValues:{project:u,team:f},queryParams:r,apiVersion:this.boardparentsApiVersion})},t}(e);t.CommonMethods3To7_1=o;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getIterationWorkItems=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"5b3ef1a6-d3ab-44cd-bafd-c7f45db850fa",resource:"workitems",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}",routeValues:{project:i,team:r,iterationId:t},apiVersion:this.workitemsApiVersion})},t.prototype.getBacklogs=function(n){var t=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"a93726f9-7867-4e38-b4f2-0bfafc2f6a94",resource:"backlogs",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",responseType:i.TypeInfo.BacklogLevelConfiguration,responseIsCollection:!0,routeValues:{project:t,team:r},apiVersion:this.backlogsApiVersion})},t.prototype.getBacklog=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"a93726f9-7867-4e38-b4f2-0bfafc2f6a94",resource:"backlogs",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",responseType:i.TypeInfo.BacklogLevelConfiguration,routeValues:{project:r,team:u,id:t},apiVersion:this.backlogsApiVersion})},t.prototype.getBacklogLevelWorkItems=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"7c468d96-ab1d-4294-a360-92f07e9ccd98",resource:"backlogs",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{backlogId}/workItems",routeValues:{project:i,team:r,backlogId:t},apiVersion:this.backlogsApiVersion_7c468d96})},t}(o);t.CommonMethods4_1To7_1=s;l=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.reorderIterationWorkItems=function(n,t,i){var r=t.projectId||t.project,u=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"47755db2-d7eb-405a-8c25-675401525fc9",resource:"workitemsorder",routeTemplate:"{project}/{team}/_apis/{area}/iterations/{iterationId}/{resource}",responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:i},apiVersion:this.workitemsorderApiVersion,data:n})},t.prototype.reorderBacklogWorkItems=function(n,t){var i=t.projectId||t.project,r=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"1c22b714-e7e4-41b9-85e0-56ee13ef55ed",resource:"workitemsorder",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:i,team:r},apiVersion:this.workitemsorderApiVersion_1c22b714,data:n})},t.prototype.updateTaskboardCardSettings=function(n,t){var i=t.projectId||t.project,r=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",httpResponseType:"html",area:"work",locationId:"0d63745f-31f3-4cf3-9056-2a064e567637",resource:"cardsettings",routeTemplate:"{project}/{team}/_apis/{area}/taskboard/{resource}",routeValues:{project:i,team:r},apiVersion:this.cardsettingsApiVersion_0d63745f,data:n})},t.prototype.updateTaskboardCardRuleSettings=function(n,t){var i=t.projectId||t.project,r=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"work",locationId:"3f84a8d1-1aab-423e-a94b-6dcbdcca511f",resource:"cardrulesettings",routeTemplate:"{project}/{team}/_apis/{area}/taskboard/{resource}",routeValues:{project:i,team:r},apiVersion:this.cardrulesettingsApiVersion_3f84a8d1,data:n})},t.prototype.updateCapacityWithIdentityRef=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacityIdentityRef,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:this.capacitiesApiVersion,data:n})},t.prototype.replaceCapacitiesWithIdentityRef=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacityIdentityRef,responseType:i.TypeInfo.TeamMemberCapacityIdentityRef,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:this.capacitiesApiVersion,data:n})},t.prototype.getCapacityWithIdentityRef=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacityIdentityRef,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:this.capacitiesApiVersion})},t.prototype.getBoardBadgeData=function(n,t,i,r){var u={columnOptions:i,columns:r&&r.join(",")},f=n.projectId||n.project,e=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"0120b002-ab6c-4ca0-98cf-a8d7492f865c",resource:"boardbadge",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",routeValues:{project:f,team:e,id:t},queryParams:u,apiVersion:this.boardbadgeApiVersion})},t.prototype.getBoardBadge=function(n,t,i,r){var u={columnOptions:i,columns:r&&r.join(",")},f=n.projectId||n.project,e=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"0120b002-ab6c-4ca0-98cf-a8d7492f865c",resource:"boardbadge",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",routeValues:{project:f,team:e,id:t},queryParams:u,apiVersion:this.boardbadgeApiVersion})},t}(s);t.CommonMethods5_1To7_1=l;h=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateWorkItemColumn=function(n,t,i,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"work",locationId:"1be23c36-8872-4abc-b57d-402cd6c669d9",resource:"taskboardWorkItems",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{iterationId}/{workItemId}",routeValues:{project:u,team:f,iterationId:i,workItemId:r},apiVersion:this.taskboardWorkItemsApiVersion,data:n})},t.prototype.getWorkItemColumns=function(n,t){var i=n.projectId||n.project,r=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"1be23c36-8872-4abc-b57d-402cd6c669d9",resource:"taskboardWorkItems",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{iterationId}/{workItemId}",responseIsCollection:!0,routeValues:{project:i,team:r,iterationId:t},apiVersion:this.taskboardWorkItemsApiVersion})},t.prototype.updateColumns=function(n,t){var i=t.projectId||t.project,r=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"c6815dbe-8e7e-4ffe-9a79-e83ee712aa92",resource:"taskboardColumns",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",routeValues:{project:i,team:r},apiVersion:this.taskboardColumnsApiVersion,data:n})},t.prototype.getColumns=function(n){var t=n.projectId||n.project,i=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"c6815dbe-8e7e-4ffe-9a79-e83ee712aa92",resource:"taskboardColumns",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",routeValues:{project:t,team:i},apiVersion:this.taskboardColumnsApiVersion})},t}(l);t.CommonMethods5_2To7_1=h;c=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getTotalIterationCapacities=function(n,t){return this._beginRequest({httpMethod:"GET",area:"work",locationId:"1e385ce0-396b-4273-8171-d64562c18d37",resource:"iterationcapacities",routeTemplate:"{project}/_apis/{area}/iterations/{iterationId}/{resource}",routeValues:{project:n,iterationId:t},apiVersion:this.iterationcapacitiesApiVersion})},t.prototype.getCapacitiesWithIdentityRefAndTotals=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamCapacity,routeValues:{project:r,team:u,iterationId:t},apiVersion:this.capacitiesApiVersion})},t}(h);t.CommonMethods6_1To7_1=c;a=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.backlogsApiVersion=r.backlogsApiVersion_7c468d96=r.boardbadgeApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationcapacitiesApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.taskboardColumnsApiVersion=r.taskboardWorkItemsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion=r.workitemsApiVersion=r.workitemsorderApiVersion=r.workitemsorderApiVersion_1c22b714="7.1-preview.1",r.cardrulesettingsApiVersion=r.cardrulesettingsApiVersion_3f84a8d1=r.cardsettingsApiVersion=r.cardsettingsApiVersion_0d63745f="7.1-preview.2",r.capacitiesApiVersion="7.1-preview.3",r}return __extends(t,n),t}(c);t.WorkHttpClient7_1=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.backlogsApiVersion=r.backlogsApiVersion_7c468d96=r.boardbadgeApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.capacitiesApiVersion=r.cardrulesettingsApiVersion=r.cardrulesettingsApiVersion_3f84a8d1=r.cardsettingsApiVersion=r.cardsettingsApiVersion_0d63745f=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationcapacitiesApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.taskboardColumnsApiVersion=r.taskboardWorkItemsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion=r.workitemsApiVersion=r.workitemsorderApiVersion=r.workitemsorderApiVersion_1c22b714="7.0",r}return __extends(t,n),t}(c);t.WorkHttpClient7=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.backlogsApiVersion=r.backlogsApiVersion_7c468d96=r.boardbadgeApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.capacitiesApiVersion=r.cardrulesettingsApiVersion=r.cardrulesettingsApiVersion_3f84a8d1=r.cardsettingsApiVersion=r.cardsettingsApiVersion_0d63745f=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationcapacitiesApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.taskboardColumnsApiVersion=r.taskboardWorkItemsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion=r.workitemsApiVersion=r.workitemsorderApiVersion=r.workitemsorderApiVersion_1c22b714="6.1",r}return __extends(t,n),t}(c);t.WorkHttpClient6_1=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.backlogsApiVersion=r.backlogsApiVersion_7c468d96=r.boardbadgeApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.capacitiesApiVersion=r.cardrulesettingsApiVersion=r.cardrulesettingsApiVersion_3f84a8d1=r.cardsettingsApiVersion=r.cardsettingsApiVersion_0d63745f=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.taskboardColumnsApiVersion=r.taskboardWorkItemsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion=r.workitemsApiVersion=r.workitemsorderApiVersion=r.workitemsorderApiVersion_1c22b714="6.0",r}return __extends(t,n),t.prototype.getCapacitiesWithIdentityRef=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacityIdentityRef,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"6.0"})},t}(h);t.WorkHttpClient6=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.backlogsApiVersion=r.backlogsApiVersion_7c468d96=r.boardbadgeApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.capacitiesApiVersion=r.cardrulesettingsApiVersion=r.cardrulesettingsApiVersion_3f84a8d1=r.cardsettingsApiVersion=r.cardsettingsApiVersion_0d63745f=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.taskboardColumnsApiVersion=r.taskboardWorkItemsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion=r.workitemsApiVersion=r.workitemsorderApiVersion=r.workitemsorderApiVersion_1c22b714="5.2",r}return __extends(t,n),t.prototype.getCapacitiesWithIdentityRef=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacityIdentityRef,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"5.2"})},t}(h);t.WorkHttpClient5_2=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.backlogsApiVersion=r.backlogsApiVersion_7c468d96=r.boardbadgeApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.capacitiesApiVersion=r.cardrulesettingsApiVersion=r.cardrulesettingsApiVersion_3f84a8d1=r.cardsettingsApiVersion=r.cardsettingsApiVersion_0d63745f=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion=r.workitemsApiVersion=r.workitemsorderApiVersion=r.workitemsorderApiVersion_1c22b714="5.1",r}return __extends(t,n),t.prototype.getCapacitiesWithIdentityRef=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacityIdentityRef,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"5.1"})},t}(l);t.WorkHttpClient5_1=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.backlogsApiVersion=r.backlogsApiVersion_7c468d96=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion=r.workitemsApiVersion="5.0",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"5.0"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"5.0"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"5.0",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"5.0",data:n})},t}(s);t.WorkHttpClient5=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.backlogsApiVersion=r.backlogsApiVersion_7c468d96=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion=r.workitemsApiVersion="4.1",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"4.1"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"4.1"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"4.1",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"4.1",data:n})},t}(s);t.WorkHttpClient4_1=d;g=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion="4.0",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"4.0"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"4.0"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"4.0",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"4.0",data:n})},t}(o);t.WorkHttpClient4=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion="3.2",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"3.2"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"3.2"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"3.2",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"3.2",data:n})},t}(o);t.WorkHttpClient3_2=nt;tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion="3.1",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"3.1"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"3.1"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"3.1",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"3.1",data:n})},t}(o);t.WorkHttpClient3_1=tt;it=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.boardcolumnsApiVersion=r.boardparentsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.boardusersettingsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.deliverytimelineApiVersion=r.iterationsApiVersion=r.plansApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion="3.0",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"3.0"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"3.0"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"3.0",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"3.0",data:n})},t}(o);t.WorkHttpClient3=it;rt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.boardcolumnsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.iterationsApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion="2.3",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"2.3"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"2.3"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"2.3",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"2.3",data:n})},t}(e);t.WorkHttpClient2_3=rt;ut=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.boardcolumnsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.iterationsApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion="2.2",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"2.2"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"2.2"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"2.2",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"2.2",data:n})},t}(e);t.WorkHttpClient2_2=ut;ft=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.boardcolumnsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.iterationsApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion="2.1",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"2.1"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"2.1"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"2.1",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"2.1",data:n})},t}(e);t.WorkHttpClient2_1=ft;et=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.backlogconfigurationApiVersion=r.boardcolumnsApiVersion=r.boardrowsApiVersion=r.boardsApiVersion=r.cardrulesettingsApiVersion=r.cardsettingsApiVersion=r.chartsApiVersion=r.columnsApiVersion=r.iterationsApiVersion=r.processconfigurationApiVersion=r.rowsApiVersion=r.teamdaysoffApiVersion=r.teamfieldvaluesApiVersion=r.teamsettingsApiVersion="2.0",r}return __extends(t,n),t.prototype.getCapacities=function(n,t){var r=n.projectId||n.project,u=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:r,team:u,iterationId:t},apiVersion:"2.0"})},t.prototype.getCapacity=function(n,t,r){var u=n.projectId||n.project,f=n.teamId||n.team;return this._beginRequest({httpMethod:"GET",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:u,team:f,iterationId:t,teamMemberId:r},apiVersion:"2.0"})},t.prototype.replaceCapacities=function(n,t,r){var u=t.projectId||t.project,f=t.teamId||t.team;return this._beginRequest({httpMethod:"PUT",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.TeamMemberCapacity,responseType:i.TypeInfo.TeamMemberCapacity,responseIsCollection:!0,routeValues:{project:u,team:f,iterationId:r},apiVersion:"2.0",data:n})},t.prototype.updateCapacity=function(n,t,r,u){var f=t.projectId||t.project,e=t.teamId||t.team;return this._beginRequest({httpMethod:"PATCH",area:"work",locationId:"74412d15-8c1a-4352-a48d-ef1ed5587d57",resource:"capacities",routeTemplate:"{project}/{team}/_apis/{area}/teamsettings/iterations/{iterationId}/{resource}/{teamMemberId}",requestType:i.TypeInfo.CapacityPatch,responseType:i.TypeInfo.TeamMemberCapacity,routeValues:{project:f,team:e,iterationId:r,teamMemberId:u},apiVersion:"2.0",data:n})},t}(e);t.WorkHttpClient2=et;st=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(a);t.WorkHttpClient=st;ot={"7.1":a,"7.0":v,"6.1":y,"6.0":p,"5.2":w,"5.1":b,"5.0":k,"4.1":d,"4.0":g,"3.2":nt,"3.1":tt,"3.0":it,"2.3":rt,"2.2":ut,"2.1":ft,"2.0":et};t.getClient=ht});

define("Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Models",["require","exports","VSS/Utils/String","VSS/Utils/Array"],function(n,t,i,r){var f,e,u;Object.defineProperty(t,"__esModule",{value:!0});t.BacklogConfiguration=t.BacklogFieldTypes=t.WorkItemStateCategory=void 0,function(n){n[n.Proposed=1e3]="Proposed";n[n.InProgress=2e3]="InProgress";n[n.Resolved=3e3]="Resolved";n[n.Completed=4e3]="Completed";n[n.Removed=5e3]="Removed"}(f=t.WorkItemStateCategory||(t.WorkItemStateCategory={})),function(n){n[n.Effort=1]="Effort";n[n.Order=2]="Order";n[n.RemainingWork=3]="RemainingWork";n[n.Team=4]="Team";n[n.Activity=5]="Activity";n[n.Requestor=6]="Requestor";n[n.ApplicationType=7]="ApplicationType";n[n.ApplicationStartInformation=8]="ApplicationStartInformation";n[n.ApplicationLaunchInstructions=9]="ApplicationLaunchInstructions";n[n.FeedbackNotes=10]="FeedbackNotes";n[n.ClosedDate=11]="ClosedDate"}(e=t.BacklogFieldTypes||(t.BacklogFieldTypes={}));u=function(){function n(n,t,i,r,u,f,e,o,s){this.projectId=n;this.workItemTypeMappedStates=t;this.backlogFields=i;this.taskBacklog=r;this.requirementBacklog=u;this.portfolioBacklogs=f;this.hiddenBacklogs=e;this.teamId=o;this.isBugsBehaviorConfigValid=s}return n.prototype.getAllBacklogLevels=function(){if(!this._allBacklogs){this._allBacklogs=[];var n=this.portfolioBacklogs||[],t=this.requirementBacklog?[this.requirementBacklog]:[],i=this.taskBacklog?[this.taskBacklog]:[];this._allBacklogs=n.concat(t).concat(i);this._allBacklogs=this._allBacklogs.sort(function(n,t){return t.rank-n.rank})}return this._allBacklogs.slice()},n.prototype.getAllProductBacklogLevels=function(){var n=this;return this.getAllBacklogLevels().filter(function(t){return i.ignoreCaseComparer(t.id,n.taskBacklog.id)!==0})},n.prototype.getVisibleProductBacklogLevels=function(){var n=this;return this.getAllProductBacklogLevels().filter(function(t){return n.isBacklogLevelVisible(t.id)})},n.prototype.isBacklogLevelVisible=function(n){return!r.contains(this.hiddenBacklogs,n,i.ignoreCaseComparer)},n.prototype.isRootLevelBacklog=function(n){var t=this.getAllBacklogLevels()[0];return i.equals(t.id,n,!0)},n.prototype.getBacklogByDisplayName=function(n){for(var u,t=0,r=this.getAllBacklogLevels();t<r.length;t++)if(u=r[t],i.equals(u.name,n,!0))return u;return null},n.prototype.getBacklogByWorkItemTypeName=function(n){for(var f,t=0,u=this.getAllBacklogLevels();t<u.length;t++)if(f=u[t],r.contains(f.workItemTypes,n,i.ignoreCaseComparer))return f;return null},n.prototype.getWorkItemStatesForStateCategory=function(n,t){var h=[],r,e,u,f,o,s;if(this.workItemTypeMappedStates)for(r=0,e=this.workItemTypeMappedStates;r<e.length;r++)if(u=e[r],i.equals(u.workItemTypeName,n,!0))for(f=0,o=Object.keys(u.states);f<o.length;f++)s=o[f],u.states[s]===t&&h.push(s);return h.slice()},n.prototype.getWorkItemStateCategory=function(n,t){var r,e,u,f,o,s;if(this.workItemTypeMappedStates)for(r=0,e=this.workItemTypeMappedStates;r<e.length;r++)if(u=e[r],i.equals(u.workItemTypeName,n,!0))for(f=0,o=Object.keys(u.states);f<o.length;f++)if(s=o[f],i.equals(s,t,!0))return u.states[s];return null},n.prototype.getStatesForWorkItems=function(n){var f=[],t,e,u;if(this.workItemTypeMappedStates)for(t=0,e=this.workItemTypeMappedStates;t<e.length;t++)u=e[t],u.states&&r.contains(n,u.workItemTypeName,i.ignoreCaseComparer)&&f.push.apply(f,Object.keys(u.states));return r.unique(f,i.ignoreCaseComparer)},n.prototype.isWorkItemTypeInRequirementBacklog=function(n){var t=this.requirementBacklog;return t&&t.workItemTypes?r.contains(t.workItemTypes,n,i.ignoreCaseComparer):!1},n.prototype.isWorkItemTypeInTaskBacklog=function(n){if(this.isWorkItemTypeInRequirementBacklog(n))return!0;var t=this.taskBacklog;return t&&t.workItemTypes?r.contains(t.workItemTypes,n,i.ignoreCaseComparer):!1},n.BACKLOG_LEVEL_DEFAULT_COLOR="#00FFCC",n}();t.BacklogConfiguration=u});

define("Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service",["require","exports","q","VSS/Service","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Service","TFS/Work/RestClient","VSS/Contributions/Services","VSS/Error","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Models","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogConfigurationService=t.BacklogFieldTypes=t.BacklogConfiguration=t.WorkItemStateCategory=void 0;Object.defineProperty(t,"BacklogConfiguration",{enumerable:!0,get:function(){return c.BacklogConfiguration}});Object.defineProperty(t,"WorkItemStateCategory",{enumerable:!0,get:function(){return c.WorkItemStateCategory}});Object.defineProperty(t,"BacklogFieldTypes",{enumerable:!0,get:function(){return c.BacklogFieldTypes}});var a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.getService=function(n){return n||(n=u.TfsContext.getDefault()),f.ProjectCollection.getConnection(n).getService(t)},t.getBacklogConfiguration=function(n,i){n=n||u.TfsContext.getDefault();var r=t.getService(n);return r._getBacklogConfiguration(i)},t.getBacklogFieldName=function(n){var i=t.getBacklogConfiguration();return i?i.backlogFields.typeFields[n]:null},t.beginGetBacklogConfiguration=function(n,i){i=i||u.TfsContext.getDefault();var r=t.getService(i);return r._beginGetBacklogConfiguration(n)},t.prototype._getBacklogConfiguration=function(n){return this._backlogConfiguration&&(!n||l.equals(this._backlogConfiguration.teamId,n,!0))||this._getFromDataProvider(n),this._backlogConfiguration},t.prototype._beginGetBacklogConfiguration=function(n){var t=this,u=this._getBacklogConfiguration(n),f,r;return u&&l.equals(u.teamId,n,!0)?i(u):(f=this.tfsConnection.getHttpClient(o.WorkHttpClient),r={projectId:this.getTfsContext().contextData.project.id,teamId:n},f.getBacklogConfigurations(r).then(function(n){var i=t._updateWorkItemTypeStateValuesToEnums(n),u=n.portfolioBacklogs.map(function(n){return t._processBacklogLevelConfiguration(n)});return t._backlogConfiguration=new c.BacklogConfiguration(r.projectId,i,t._mapFieldTypes(n.backlogFields),t._processBacklogLevelConfiguration(n.taskBacklog),t._processBacklogLevelConfiguration(n.requirementBacklog),u,n.hiddenBacklogs,r.teamId,n.isBugsBehaviorConfigured),t._backlogConfiguration},function(n){h.publishErrorToTelemetry(n);throw n;}))},t.prototype._processBacklogLevelConfiguration=function(n){var i=[],t;return n.workItemTypes&&n.workItemTypes.length>0&&(i=n.workItemTypes.slice().map(function(n){return n.name})),t=[],n.columnFields&&n.columnFields.length>0&&(t=n.columnFields.slice().map(function(n){return{columnFieldReference:n.columnFieldReference.referenceName,width:n.width}})),{addPanelFields:n.addPanelFields.slice().map(function(n){return n.referenceName}),color:n.color,columnFields:t,defaultWorkItemType:n.defaultWorkItemType?n.defaultWorkItemType.name:null,id:n.id,name:n.name,rank:n.rank,workItemCountLimit:n.workItemCountLimit,workItemTypes:i}},t.prototype._getStateCategoryEnumValue=function(n){switch(n.toLowerCase()){case"proposed":return c.WorkItemStateCategory.Proposed;case"inprogress":return c.WorkItemStateCategory.InProgress;case"resolved":return c.WorkItemStateCategory.Resolved;case"completed":return c.WorkItemStateCategory.Completed;case"removed":return c.WorkItemStateCategory.Removed}return null},t.prototype._getFromDataProvider=function(n){var i=r.getService(s.WebPageDataService),t=i.getPageData("ms.vss-work-web.agile-backlog-configuration-data-provider");if(t){if(n&&!l.equals(t.teamId,n,!0))throw new Error("The provided team id does not match that of the data provider");return this._backlogConfiguration=new c.BacklogConfiguration(t.projectId,this._updateWorkItemTypeStateValuesToEnums(t),this._mapFieldTypes(t.backlogFields),t.taskBacklog,t.requirementBacklog,t.portfolioBacklogs,t.hiddenBacklogs,t.teamId,t.isBugsBehaviorConfigValid),this._backlogConfiguration}},t.prototype._updateWorkItemTypeStateValuesToEnums=function(n){for(var t,u,i,f=[],r=0,e=n.workItemTypeMappedStates;r<e.length;r++){t=e[r];u={};for(i in t.states)u[i]=typeof t.states[i]=="number"?t.states[i]:this._getStateCategoryEnumValue(t.states[i]);f.push({workItemTypeName:t.workItemTypeName,states:u})}return f},t.prototype._mapFieldTypes=function(n){var i={typeFields:[]};for(var t in n.typeFields)isNaN(Number(t))?i.typeFields[c.BacklogFieldTypes[t]]=n.typeFields[t]:i.typeFields[t]=n.typeFields[t];return i},t}(e.TfsService);t.BacklogConfigurationService=a});

define("Agile/Scripts/Common/ReorderHelper",["require","exports","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","TFS/Work/RestClient","VSS/Service","VSS/FeatureAvailability/Services"],function(n,t,i,r,u,f,e,o){function h(n,t,f,e){if(o.FeatureAvailabilityService.isFeatureEnabled("WebAccess.Agile.Backlog.ReorderWorkItemsRest",!1))s(n,t).then(f,e);else{var h=i.TfsContext.getDefault().getActionUrl("Reorder","ReorderWorkItems",{area:"api",teamId:n});r.postMSJSON(h,{operations:u.stringifyMSJSON(t)},f,e)}}function c(n,t,f,e,h){if(o.FeatureAvailabilityService.isFeatureEnabled("WebAccess.Agile.Backlog.ReorderWorkItemsRest",!1))s(n,t,h).then(f,e);else{var c=i.TfsContext.getDefault().getActionUrl("Reorder","ReorderWorkItems",{area:"api",teamId:n});r.postMSJSON(c,{operations:u.stringifyMSJSON(t)},f,e)}}function s(n,t,r){return __awaiter(this,void 0,void 0,function(){var h,p,c,a,u,o,v,w,y,s;return __generator(this,function(b){switch(b.label){case 0:h=i.TfsContext.getDefault();p=new e.VssConnection(h.contextData);c=p.getHttpClient(f.WorkHttpClient);a={projectId:h.contextData.project.id,teamId:n};u={success:!0,updatedWorkItemIds:[],updatedWorkItemOrders:[]};o=0;v=t;b.label=1;case 1:return(o<v.length)?(w=v[o],y=l(w),s=void 0,!r)?[3,3]:[4,c.reorderIterationWorkItems(y,a,r)]:[3,7];case 2:return s=b.sent(),[3,5];case 3:return[4,c.reorderBacklogWorkItems(y,a)];case 4:s=b.sent();b.label=5;case 5:s.forEach(function(n){u.updatedWorkItemIds.push(n.id);u.updatedWorkItemOrders.push(n.order)});b.label=6;case 6:return o++,[3,1];case 7:return[2,u]}})})}function l(n){return{ids:n.Ids,nextId:n.NextId,parentId:n.ParentId,previousId:n.PreviousId,iterationPath:n.IterationPath}}function a(n,t){return new Promise(function(i,r){h(n,t,i,r)})}Object.defineProperty(t,"__esModule",{value:!0});t.reorderWorkItemsAsync=t.reorderWorkItemsHelper=t.reorderIterationWorkItems=t.reorderProductBackLogWorkItems=void 0;t.reorderProductBackLogWorkItems=h;t.reorderIterationWorkItems=c;t.reorderWorkItemsHelper=s;t.reorderWorkItemsAsync=a});

/*!
 * jQuery UI Effects 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */
(function(n){typeof define=="function"&&define.amd?define("jQueryUI/effect",["jquery"],n):n(jQuery)})(function(n){var t="ui-effects-",i=n;n.effects={effect:{}};
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
return function(n,t){function e(n,t,i){var r=s[t.type]||{};return n==null?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n))?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:r.max<n?r.max:n}function l(t){var e=i(),o=e._rgba=[];return(t=t.toLowerCase(),r(v,function(n,i){var r,s=i.re.exec(t),h=s&&i.parse(s),f=i.space||"rgba";if(h)return r=e[f](h),e[u[f].cache]=r[u[f].cache],o=e._rgba=r._rgba,!1}),o.length)?(o.join()==="0,0,0,0"&&n.extend(o,f.transparent),e):f[t]}function o(n,t,i){return(i=(i+1)%1,i*6<1)?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n}var a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1]*2.55,n[2]*2.55,n[3]*2.55,n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=i.support={},c=n("<p>")[0],f,r=n.each;c.style.cssText="background-color:rgba(1,1,1,.5)";h.rgba=c.style.backgroundColor.indexOf("rgba")>-1;r(u,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});i.fn=n.extend(i.prototype,{parse:function(o,s,h,c){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(s),s=t);var a=this,v=n.type(o),y=this._rgba=[];return(s!==t&&(o=[o,s,h,c],v="array"),v==="string")?this.parse(l(o)||f._default):v==="array"?(r(u.rgba.props,function(n,t){y[t.idx]=e(o[t.idx],t)}),this):v==="object"?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if(n==="alpha"||o[n]==null)return;a[u]=i.to(a._rgba)}a[u][t.idx]=e(o[n],t,!0)});a[u]&&n.inArray(null,a[u].slice(0,3))<0&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):void 0},is:function(n){var e=i(n),t=!0,f=this;return r(u,function(n,i){var o,u=e[i.cache];return u&&(o=f[i.cache]||i.to&&i.to(f._rgba)||[],r(i.props,function(n,i){if(u[i.idx]!=null)return t=u[i.idx]===o[i.idx]})),t}),t},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var f=i(n),c=f._space(),o=u[c],l=this.alpha()===0?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),h=a.slice();return f=f[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=f[c],o=s[i.type]||{};u!==null&&(r===null?h[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),h[c]=e((u-r)*t+r,i)))}),this[c](h)},blend:function(t){if(this._rgba[3]===1)return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return n==null?t>2?1:0:n});return t[3]===1&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return n==null&&(n=t>2?1:0),t&&t<3&&(n=Math.round(n*100)+"%"),n});return t[3]===1&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(r*255)),"#"+n.map(i,function(n){return n=(n||0).toString(16),n.length===1?"0"+n:n}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;u.hsla.to=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var i=n[0]/255,r=n[1]/255,f=n[2]/255,s=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,h=o*.5,c,l;return c=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,l=t===0?0:h<=.5?t/o:t/(2-o),[Math.round(c)%360,l,h,s==null?1:s]};u.hsla.from=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=t<=.5?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(o(f,i,r+1/3)*255),Math.round(o(f,i,r)*255),Math.round(o(f,i,r-1/3)*255),e]};r(u,function(u,f){var s=f.props,o=f.cache,h=f.to,c=f.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v=a==="array"||a==="object"?u:arguments,f=this[o].slice();return r(s,function(n,t){var i=v[a==="object"?n:t.idx];i==null&&(i=f[t.idx]);f[t.idx]=e(i,t)}),c?(l=i(c(f)),l[o]=f,l):i(f)};r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f=n.type(i),h=t==="alpha"?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx],e;return f==="undefined"?s:(f==="function"&&(i=i.call(this,s),f=n.type(i)),i==null&&r.empty)?this:(f==="string"&&(e=a.exec(i),e&&(i=s+parseFloat(e[2])*(e[1]==="+"?1:-1))),o[r.idx]=i,this[h](o))})})});i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if(u!=="transparent"&&(n.type(u)!=="string"||(o=l(u)))){if(u=i(o||u),!h.rgba&&u._rgba[3]!==1){for(f=r==="backgroundColor"?t.parentNode:t;(e===""||e==="transparent")&&f&&f.style;)try{e=n.css(f,"backgroundColor");f=f.parentNode}catch(s){}u=u.blend(e&&e!=="transparent"?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(s){}}};n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0);n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})};i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};f=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(i),function(){function t(t){var r,u,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,f={};if(i&&i.length&&i[0]&&i[i[0]])for(u=i.length;u--;)r=i[u],typeof i[r]=="string"&&(f[n.camelCase(r)]=i[r]);else for(r in i)typeof i[r]=="string"&&(f[r]=i[r]);return f}function f(t,i){var e={},r,f;for(r in i)f=i[r],t[r]!==f&&(u[r]||(n.fx.step[r]||!isNaN(parseFloat(f)))&&(e[r]=f));return e}var r=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,r){n.fx.step[r]=function(n){(n.end==="none"||n.setAttr)&&(n.pos!==1||n.setAttr)||(i.style(n.elem,r,n.end),n.setAttr=!0)}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n.effects.animateClass=function(i,u,e,o){var s=n.speed(u,e,o);return this.queue(function(){var e=n(this),h=e.attr("class")||"",o,u=s.children?e.find("*").addBack():e;u=u.map(function(){var i=n(this);return{el:i,start:t(this)}});o=function(){n.each(r,function(n,t){i[t]&&e[t+"Class"](i[t])})};o();u=u.map(function(){return this.end=t(this.el[0]),this.diff=f(this.start,this.end),this});e.attr("class",h);u=u.map(function(){var i=this,t=n.Deferred(),r=n.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()});n.when.apply(n,u.get()).done(function(){o();n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})});s.complete.call(e[0])})})};n.fn.extend({addClass:function(t){return function(i,r,u,f){return r?n.effects.animateClass.call(this,{add:i},r,u,f):t.apply(this,arguments)}}(n.fn.addClass),removeClass:function(t){return function(i,r,u,f){return arguments.length>1?n.effects.animateClass.call(this,{remove:i},r,u,f):t.apply(this,arguments)}}(n.fn.removeClass),toggleClass:function(t){return function(i,r,u,f,e){return typeof r=="boolean"||r===undefined?u?n.effects.animateClass.call(this,r?{add:i}:{remove:i},u,f,e):t.apply(this,arguments):n.effects.animateClass.call(this,{toggle:i},r,u,f)}}(n.fn.toggleClass),switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function i(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},i==null&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),(typeof i=="number"||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:typeof r=="number"?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function r(t){return!t||typeof t=="number"||n.fx.speeds[t]?!0:typeof t=="string"&&!n.effects.effect[t]?!0:n.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}n.extend(n.effects,{version:"1.11.4",save:function(n,i){for(var r=0;r<i.length;r++)i[r]!==null&&n.data(t+i[r],n[0].style[i[r]])},restore:function(n,i){for(var u,r=0;r<i.length;r++)i[r]!==null&&(u=n.data(t+i[r]),u===undefined&&(u=""),n.css(i[r],u))},setMode:function(n,t){return t==="toggle"&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).focus(),u=t.parent(),t.css("position")==="static"?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).focus()),t},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}});n.fn.extend({effect:function(){function e(i){function o(){n.isFunction(e)&&e.call(r[0]);n.isFunction(i)&&i()}var r=n(this),e=t.complete,u=t.mode;(r.is(":hidden")?u==="hide":u==="show")?(r[u](),o()):f.call(r[0],t,o)}var t=i.apply(this,arguments),r=t.mode,u=t.queue,f=n.effects.effect[t.effect];return n.fx.off||!f?r?this[r](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):u===!1?this.each(e):this.queue(u||"fx",e)},show:function(n){return function(t){if(r(t))return n.apply(this,arguments);var u=i.apply(this,arguments);return u.mode="show",this.effect.call(this,u)}}(n.fn.show),hide:function(n){return function(t){if(r(t))return n.apply(this,arguments);var u=i.apply(this,arguments);return u.mode="hide",this.effect.call(this,u)}}(n.fn.hide),toggle:function(n){return function(t){if(r(t)||typeof t=="boolean")return n.apply(this,arguments);var u=i.apply(this,arguments);return u.mode="toggle",this.effect.call(this,u)}}(n.fn.toggle),cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}})}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}});n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return n===0||n===1?n:-Math.pow(2,8*(n-1))*Math.sin(((n-1)*80-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;n<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-n,2)}});n.each(t,function(t,i){n.easing["easeIn"+t]=i;n.easing["easeOut"+t]=function(n){return 1-i(1-n)};n.easing["easeInOut"+t]=function(n){return n<.5?i(n*2)/2:1-i(n*-2+2)/2}})}(),n.effects});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Agile/Scripts/Common/Agile",["require","exports","Agile/Scripts/Resources/TFS.Resources.Agile","Agile/Scripts/Resources/TFS.Resources.AgileControls","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Diag","VSS/Service","VSS/Events/Action","VSS/Events/Handlers","VSS/Events/Services","VSS/Navigation/Services","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/VSS","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/OM/WorkItemConstants","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","VSS/VSS","Agile/Scripts/Common/ReorderHelper","VSS/Contributions/Services","VSS/Context","Agile/Scripts/Generated/HubConstants","jQueryUI/effect"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et){function ei(){var t=st.navigation,i=t.currentController,n=t.currentAction;return i.toLowerCase()==="backlogs"&&(n.toLowerCase()==="backlog"||n.toLowerCase()==="index"||n.toLowerCase()==="iteration")}var ht,bt,kt,yt,dt,at,ct,vt,pt,wt,oi,si,hi,ci,gt,li,ni,ai,ti,ii,ri,ot,ui;Object.defineProperty(t,"__esModule",{value:!0});t.BacklogSettings=t.TouchEventsHelper=t.IdentityControlConsumerIds=t.AgileCustomerIntelligenceConstants=t.TabControlsRegistrationConstants=t.CapacityDateUtils=t.ReorderItemHandler=t.NotificationGuids=t.ReorderManager=t.WorkItemReorderHelpers=t.LinkHelpers=t.BacklogHelpers=t.BacklogQueryManager=t.ClassificationPathUtils=t.BaseBacklogMembershipEvaluator=t.BacklogContext=t.AgileProjectMapping=t.AgileContext=t.MembershipTracker=t.Notifications=t.DataKeys=t.DragDropScopes=t.Actions=t.IsWebAccessAsyncEnabled=void 0;var fi=e.TeamAwarenessService,st=f.TfsContext.getDefault(),lt=c.getService();t.IsWebAccessAsyncEnabled=ei;ht=function(){function n(){}return n.BACKLOG_NAVIGATE="VSS.Agile.Backlogs.Navigate",n.EVALUATE_MEMBERSHIP="VSS.Agile.Backlogs.EvaluateMembership",n.CHANGE_TEAM_WORK_IN_PROGRESS_LIMIT="VSS.Agile.Boards.ChangeWipLimit",n.BACKLOG_BULK_EDIT_EVALUATE_MEMBERSHIP="VSS.Agile.Backlogs.BulkEdit.EvaluateMembership",n.BACKLOG_MOVE_TO_ITERATION="VSS.Agile.Backlogs.MoveToIteration",n.VERIFY_MEMBERSHIP_EXPLICIT="verify-membership",n.BACKLOG_SHOW_ERROR_MESSAGE="backlog-show-error-message",n.BACKLOG_FILTER_SELECTION="backlog-filter-selection",n.LAUNCH_FILTER_CONTROL="launch-filter-control",n.MAPPING_PANE_REPARENT="mapping-pane-reparent",n.BACKLOG_ERROR="backlog-error",n}();t.Actions=ht;lt.registerActionWorker(ht.BACKLOG_NAVIGATE,function(n){window.location.href=n.uri},1e3);bt=function(){function n(){}return n.WorkItem="work-item",n.IterationBacklog="work-item",n.ProductBacklog="work-item",n}();t.DragDropScopes=bt;kt=function(){function n(){}return n.DataKeyId="item-id",n.DataKeyType="item-type",n}();t.DataKeys=kt;yt=function(){function n(){}return n.MEMBERSHIP_EVALUATED="VSS.Agile.Backlog.MembershipEvaluated",n.BACKLOG_QUERY_SAVE_COMPLETED="VSS.Agile.Backlog.BacklogQuerySaveCompleted",n.BACKLOG_ITEM_ADDED="VSS.Agile.Backlog.BacklogItemAdded",n}();t.Notifications=yt;dt=function(){function n(n){var t=this;this.verifyMembership=function(n,i,r){var f,u,e;f=i.change;f===nt.WorkItemChangeType.SaveCompleted&&(u=i.workItem,e={workItem:u,sendResult:function(f){$.isFunction(r)&&r(f);t._eventHelper&&t._eventHelper.fire(yt.MEMBERSHIP_EVALUATED,n,{workItem:u,isMember:f,changedFields:i.changedFields})}},lt.performAction(ht.EVALUATE_MEMBERSHIP,e))};this._eventHelper=n;this._setupMembershipTracking()}return n.prototype.dispose=function(){lt.unregisterActionWorker(ht.EVALUATE_MEMBERSHIP,this._alwaysAMember);g.WorkItemManager.get(o.ProjectCollection.getDefaultConnection().getService(d.WorkItemStore)).detachWorkItemChanged(this.verifyMembership);this._eventHelper=null},n.prototype._setupMembershipTracking=function(){lt.registerActionWorker(ht.EVALUATE_MEMBERSHIP,this._alwaysAMember,c.ActionService.MaxOrder);g.WorkItemManager.get(o.ProjectCollection.getDefaultConnection().getService(d.WorkItemStore)).attachWorkItemChanged(this.verifyMembership)},n.prototype._alwaysAMember=function(n){n.sendResult(!0)},n}();t.MembershipTracker=dt;at=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.prototype.getContext=function(){return t._context||(t._context=p.parseJsonIsland($(document),".agile-context")),t._context},t.prototype.setContext=function(n){t._context=n},t}(h.VssService);t.AgileContext=at;ct=function(){function n(){this._projectMapping={};a.getService().attachEvent(nt.Actions.NEW_PROJECT_DATA,p.delegate(this,this._buildProjectMapping))}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.ensureCreated=function(){n.getInstance()},n.prototype.getProjectNames=function(n){return this._projectMapping[n]||[]},n.prototype._buildProjectMapping=function(n,t){var r,u,i;if(t)for(r=0,u=t;r<u.length;r++)i=u[r],this._projectMapping[i.guid]||(this._projectMapping[i.guid]=[]),this._projectMapping[i.guid].push(i.name)},n}();t.AgileProjectMapping=ct;ct.ensureCreated();vt=function(){function n(){this._setupConfigurationData()}return n.getInstance=function(){return n._backlogContext||(n._backlogContext=new n),n._backlogContext},n.resetInstance=function(){n._backlogContext&&(n._backlogContext=null)},n.prototype.setBacklogContextData=function(n){this._setupConfigurationData(n)},n.prototype.isHubContext=function(n){return w.ignoreCaseComparer(this.level.name,n.name)===0},n.prototype.isInPortfolios=function(n){return $.inArray(n,this.portfolios)!==-1},n.prototype.isPortfolioInContext=function(){return this._isPortfolioInContext},n.prototype.backlogContainsWorkItemType=function(n){return this.level&&this.level.workItemTypes?y.contains(this.level.workItemTypes,n,w.localeIgnoreCaseComparer):!1},n.prototype._setupConfigurationData=function(t){var r=this,i;t||(i=$(n.JSON_ISLAND_SELECTOR),i.length>0&&(t=p.parseMSJSON(i.html(),!1).backlogContext,i.empty()));t&&(this.level=tt.BacklogConfigurationService.getBacklogConfiguration(null,t.team.id).getBacklogByDisplayName(t.levelName),this.team=t.team,this.isRequirement=w.equals(tt.BacklogConfigurationService.getBacklogConfiguration(null,t.team.id).requirementBacklog.name,t.levelName,!0),this._isPortfolioInContext=tt.BacklogConfigurationService.getBacklogConfiguration(null,t.team.id).portfolioBacklogs.some(function(n){return w.equals(n.id,r.level.id,!0)}),this.includeParents=t.includeParents,this.portfolios=t.portfolios,this.showInProgress=t.showInProgress,this.updateUrlActionAndParameter=t.updateUrlActionAndParameter,this.actionNameFromMru=t.actionNameFromMru)},n.JSON_ISLAND_SELECTOR=".backlog-context",n}();t.BacklogContext=vt;pt=function(){function n(n){this._teamId=n}return n.prototype._beginGetSettings=function(n){var i=this,t;if(t=function(){vt.getInstance()&&i._teamSettings&&n()},this._teamSettings)n();else{var f=o.ProjectCollection.getConnection(st),r=f.getService(fi),u=r.getTeamSettings(this._teamId);u?(this._teamSettings=u,t()):r.beginGetTeamSettings(this._teamId).then(function(n){i._teamSettings=n;t()},it.handleError)}},n.prototype.evaluate=function(n,t){var i=this;this._beginGetSettings(function(){i._isValid(n)?t(!0):t(!1)})},n.prototype._isTeamFieldValid=function(n){if(!n)return!1;var t=ct.getInstance().getProjectNames(this._teamSettings.projectId),i=this._teamSettings.teamFieldValues;return i.some(function(i){return wt.isClassificationPathEqualOrUnderRelative(t,n,i.value,i.includeChildren)})},n.prototype._isBacklogIterationPathValid=function(n){return this._isIterationPathValid(n,this._teamSettings.backlogIteration.friendlyPath)},n.prototype._isIterationPathValid=function(n,t){var i=ct.getInstance().getProjectNames(this._teamSettings.projectId);return wt.isClassificationPathEqualOrUnderRelative(i,n,t,!0)},n}();t.BaseBacklogMembershipEvaluator=pt;k.initClassPrototype(pt,{_processSettings:null,_backlogContext:null,_teamSettings:null}),function(n){function i(i,r,u,f){var e=t(r,u,f);return e?e:i.some(function(i){return t(r,n.replaceClassificationRoot(u,i),f)})}function t(n,t,i){var r=!1,u=t+"\\";return r=d.Field.compareValues(t,n,!0),!r&&i&&n&&(r=w.startsWith(n,u,w.localeIgnoreCaseComparer)),r}function r(n,t){return n.replace(/^[^\\]+\s*/,t)}n.isClassificationPathEqualOrUnderRelative=i;n.replaceClassificationRoot=r}(wt=t.ClassificationPathUtils||(t.ClassificationPathUtils={})),function(n){function t(t){return st.getActionUrl(t,n.CONTROLLER_NAME,{area:"api"})}function r(n,t){return!n||!t||t.length===0?null:w.format(i.ProductBacklogQueryName_Backlog,t,n.level.name)}n._getActionUrl=t;n.CONTROLLER_NAME="Backlog";n.getProductBacklogQueryName=r}(oi=t.BacklogQueryManager||(t.BacklogQueryManager={})),function(n){function t(n,t,i,r,u){h.getService(ut.WebPageDataService,ft.getDefaultWebContext()).getDataAsync(et.BacklogsHubConstants.PRODUCTBACKLOG_DATAPROVIDER_ID,null,null).then(function(n){n.exceptionInfo&&n.exceptionInfo.exceptionMessage?u({message:n.exceptionInfo.exceptionMessage,stack:n.exceptionInfo.stackTrace}):r(n.backlogPayload)},u)}n.beginGetBacklogPayload=t}(si=t.BacklogHelpers||(t.BacklogHelpers={})),function(n){function r(n,r,u){return r=r.replace(u,""),r=r.replace(/^\\/,""),r?i(n,r.split("\\")):w.ignoreCaseComparer(n,"board")===0||w.ignoreCaseComparer(n,"taskboard")===0?t("board"):t("backlog")}function u(n,t,i){var r,u,f;return r={},t&&(t.level&&(r.level=t.level),t.showParents!=null&&(r.showParents=t.showParents)),n&&(r._a=n),u=v.HistoryService.serializeState(r),f=st.getActionUrl(null,"backlogs",i)+"?"+u,f}function t(n){var t=vt.getInstance(),r=[];return t&&t.level&&t.level.name&&r.push(t.level.name),i(n,r)}function i(n,t){return t&&t.length>0?st.getActionUrl(n,"backlogs",{parameters:t}):st.getActionUrl(n,"backlogs")}n.generateIterationLink=r;n.getAsyncBacklogLink=u;n.generateBacklogLink=t}(hi=t.LinkHelpers||(t.LinkHelpers={})),function(n){function t(n,t,i,r,u,f,e,o){var h,c={ParentId:r,Ids:i,PreviousId:u,NextId:f,preProcessNotCompleted:!0,blockQueue:!0,completedCallback:function(n,t){$.isFunction(o)&&o();t.success&&h()}};t.queueReorder(c);n.queueOperation(function(n){h=n;var r=function(n,i){if(n&&i&&i.length===n.length)for(var r=0;r<n.length;r++)t.changeReorderId(n[r],i[r]);delete c.preProcessNotCompleted;t.unblockReadyOperations()},u=function(){t.dequeueReorder(i);n()};$.isFunction(e)?e(r,u):r(null,null)})}n.queueReorderOperation=t}(ci=t.WorkItemReorderHelpers||(t.WorkItemReorderHelpers={}));gt=function(){function n(n){var t=this;this._onRequestComplete=function(n){var i={success:!0,processedIds:t._getProcessedIds(),processedOperations:t._pendingChanges,clientError:!1,updatedWorkItemIds:n.updatedWorkItemIds,updatedWorkItemOrders:n.updatedWorkItemOrders};t._raiseRequestComplete(i);s.logTracePoint("ProductBacklog.ReorderManager.prototype._onRequestComplete.completed")};this._onRequestFail=function(n){var f={success:!1,error:n,processedIds:t._getProcessedIds(),processedOperations:t._pendingChanges,clientError:n.name===u.Exceptions.AjaxException||n.name===u.Exceptions.AjaxTimeoutException},r;n.serverError.typeKey==="SameTypeHierarchyException"&&(r=$("<a>").attr("href","https://aka.ms/AA56xmh").attr("target","_blank").text(i.FWLink_LearnMore),$(".message-header").append(r));t._raiseRequestComplete(f)};this._teamId=n;this._queuedChanges=[];this._pendingChanges=null;this._queuedIdsLookup={};this._events=new l.NamedEventCollection}return Object.defineProperty(n.prototype,"teamId",{get:function(){return this._teamId},enumerable:!1,configurable:!0}),n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1;this._flush()},n.prototype.isPaused=function(){return this._paused},n.prototype.numberOfUncommittedChanges=function(){return(this._queuedChanges?this._queuedChanges.length:0)+(this._pendingChanges?this._pendingChanges.length:0)},n.prototype.dequeueReorder=function(n){var r,u,i,f,e,t,o;for(r=this._queuedIdsLookup,u=this._queuedChanges,i=0,f=n;i<f.length;i++)e=f[i],t=r[e],t&&(o=u.indexOf(t),t.Ids.forEach(function(n){return delete r[n]}),u.splice(o,1))},n.prototype.unblockReadyOperations=function(){for(var t,r=!1,i=0,u=this._queuedChanges;i<u.length;i++)t=u[i],t.blockQueue&&n._canOperationBeUnblocked(t)&&(delete t.blockQueue,r=!0);r&&this._flush()},n.prototype.changeReorderId=function(n,t){var f,r,i,e,u;for(f=this._queuedChanges,r=this._queuedIdsLookup,r[n]&&(i=r[n],r[t]=i,delete r[n],e=$.inArray(n,i.Ids),e>=0&&i.Ids.splice(e,1,t)),u=0;u<f.length;u+=1)i=f[u],i.PreviousId===n&&(i.PreviousId=t),i.NextId===n&&(i.NextId=t)},n.prototype.queueReorder=function(n){var f=this,t,r,u,i;if(!n.Ids.some(function(n){return!!f._queuedIdsLookup[n]})){for(t=0,r=n.Ids;t<r.length;t++)u=r[t],u<0&&(n.blockQueue=!0),this._queuedIdsLookup[u]=n;n.ParentId<0&&(n.ParentId=0);n.IterationPath||(i=o.ProjectCollection.getDefaultConnection().getService(at).getContext(),n.IterationPath=i&&i.iteration?i.iteration.path:null);n.preProcessNotCompleted&&(n.blockQueue=!0);this._queuedChanges.push(n);this._flush()}},n.prototype.attachRequestComplete=function(t){this._events.subscribe(n.EVENT_REQUEST_COMPLETE,t)},n.prototype.detachRequestComplete=function(t){this._events.unsubscribe(n.EVENT_REQUEST_COMPLETE,t)},n.prototype.dispose=function(){this._events&&(this._events.unsubscribeAll(),this._events=null);this._queuedChanges=null;this._pendingChanges=null;this._queuedIdsLookup=null},n._canOperationBeUnblocked=function(t){var i,r,u;if(t.preProcessNotCompleted)return!1;for(i=0,r=t.Ids;i<r.length;i++)if(u=r[i],u<=0)return!1;var f=t.NextId>0||t.NextId===n.ReorderEndOfList,e=t.PreviousId>0||t.PreviousId===n.ReorderEndOfList,o=t.NextId===n.ReorderIdUnspecified&&t.PreviousId===n.ReorderIdUnspecified;return f||e||o},n.prototype._postRequest=function(){var n=o.ProjectCollection.getDefaultConnection().getService(at).getContext();n&&n.iteration?rt.reorderIterationWorkItems(this._teamId,this._pendingChanges,this._onRequestComplete,this._onRequestFail,n.iteration.id):rt.reorderProductBackLogWorkItems(this._teamId,this._pendingChanges,this._onRequestComplete,this._onRequestFail)},n.prototype._flush=function(){var r=this._queuedChanges,e=this._queuedIdsLookup,u=[],t,f=r.length,i;if(this._pendingChanges===null&&f>0&&!this._paused){for(i=0;i<f;i++){if(t=r[i],t.blockQueue)break;t.NextId===undefined&&(t.NextId=n.ReorderIdUnspecified);t.PreviousId===undefined&&(t.PreviousId=n.ReorderIdUnspecified);u.push(t);$.each(t.Ids,function(n,t){delete e[t]})}u.length>0&&(this._pendingChanges=u,r.splice(0,i),this._postRequest())}},n.prototype._getProcessedIds=function(){for(var n,i,r,u=[],f=this._pendingChanges,e=this._queuedIdsLookup,t=0;t<f.length;t++)for(n=0,i=f[t].Ids;n<i.length;n++)r=i[n],e[r]||u.push(r);return u},n.prototype._raiseRequestComplete=function(t){var r=this._pendingChanges,c=this._queuedIdsLookup,l=this._queuedChanges,u,a=f.TfsContext.getDefault(),v=o.ProjectCollection.getConnection(a).getService(d.WorkItemStore),y=g.WorkItemManager.get(v),i,e,h,s;if(t.success)this._pendingChanges=null,this._flush(),y.invalidateCache(t.updatedWorkItemIds);else{for(this.pause(),i=0;i<r.length;i++)u=r[i],u.continueOnFailure||$.each(u.Ids,function(n,t){c[t]=u});this._queuedChanges=r.filter(function(n){return!n.continueOnFailure}).concat(l);this._pendingChanges=null}if(this._events.invokeHandlers(n.EVENT_REQUEST_COMPLETE,this,t),!t.success&&r.some(function(n){return n.continueOnFailure})){for(e=0,h=r;e<h.length;e++)s=h[e],s.continueOnFailure&&$.isFunction(s.completedCallback)&&s.completedCallback(this,t);this.resume()}else for(i=0;i<r.length;i++)u=r[i],$.isFunction(u.completedCallback)&&u.completedCallback(this,t)},n.EVENT_REQUEST_COMPLETE="request-complete",n.ReorderEndOfList=0,n.ReorderIdUnspecified=null,n}();t.ReorderManager=gt,function(n){n.LimitedPortfolioAccess="16676E24-8F6A-4EAA-9A9D-FCDF57E8BC8A";n.ProposedStateNotMappedForBugsWarning="02ADFCA6-1633-483A-972D-E0192AB07A0D";n.NewBacklogLevelVisibilityNotSet="F6070FC4-EF8E-48B8-B0E5-1E9A99979981"}(li=t.NotificationGuids||(t.NotificationGuids={}));ni=function(){function n(){}return n.attachSortableItemHandler=function(t){var i=t.originalItem,tt=t.getIdDelegate,o="."+t.itemClass,r=i.parent(),u=n._getItemIndex(i,tt,r,o),l;if(!(u<0)){var p=!1,h=t.draggableHelper,a=t.unSortableClass,it="."+t.hoverClass,e=u,v=-1,s=r,c=i.clone().addClass("clone").addClass(n.DRAGGED_ITEM_CLASS).attr("id","cloneid"),w=Number.MAX_VALUE,b=Number.MAX_VALUE;i.addClass(n.DRAGGED_ITEM_CLASS);var f=r,k,d,g,y=function(t,r,u,f,o){var c=u[0]===s[0],h;c?r<e?i.insertBefore(t):i.insertAfter(t):(h=n._isPointAboveContainer(o,t.offset().top,t.outerHeight()),h?i.insertBefore(t):(i.insertAfter(t),r++));v=e;e=r;s=u},nt=function(f,h,c){var w=!1,st=t.blockSortable&&r!==f,b,k,p,it,g,nt,rt,tt,l,d;if(r.hasClass(a)&&f.hasClass(a)){n._replaceOriginalItem(i,u,r,o,t.dropOnEmptyClass);e=u;s=f;return}if(f.hasClass(a)||st){f.prepend(i);i.addClass(n.SORTABLE_HIDDEN);e=0;s=f;return}if(i.removeClass(n.SORTABLE_HIDDEN),b=o?f.find(o).toArray():f.children().toArray(),k=b.length,k<=0){n._insertOnEmpty(i,f,t.dropOnEmptyClass);e=0;s=f;return}for(l=0,d=k;l<d;l++)if(p=$(b[l]),it=p.offset(),n._isPointInContainer(h,c,it.left,it.top,p.outerWidth(),p.outerHeight())){if(l===v){w=!0;continue}y(p,l,f,h,c);w=!0;return}if(!w&&(g=$(b[k-1]),nt=g.offset(),h>=nt.left&&c>=nt.top||c>nt.top+g.outerHeight())){y(g,k-1,f,h,c);w=!0;return}if(!w){for(rt=Number.POSITIVE_INFINITY,tt=0,l=0,d=k;l<d;l++){var p=$(b[l]),ut=p.offset(),ft=h-(ut.left+p.outerWidth()/2),et=c-(ut.top+p.outerHeight()/2),ot=ft*ft+et*et;ot<=rt&&(rt=ot,tt=l)}y($(b[tt]),tt,f,h,c);w=!0;return}};i.on("touchmove",k=function(n){ot.simulateMouseEvent(n,h[0]);n.preventDefault()});i.on("touchstart",d=function(n){ot.simulateMouseEvent(n,h[0])});i.on("touchend",g=function(n){ot.simulateMouseEvent(n,h[0])});l=function(e){var d;if(!p){var h=e.pageX,l=e.pageY,a,y=function(t){var i=Math.abs(w-h),r=Math.abs(b-l),u=n._isDragSufficient(i,r);u&&(w=h,b=l,nt(t,h,l))},k=r.offset(),g=r.outerWidth(),tt=r.outerHeight();n._isPointInContainer(h,l,k.left,k.top,g,tt)?(f=r,$(".clone").remove(),y(r)):(f=$(it),f[0]!==s[0]&&(v=-1),d=f.hasClass(t.droppableHeaderClass),f.length>0&&!d?y(f):(i.detach(),s=f),a=o?r.find(o).toArray():r.children().toArray(),u===0?c.insertBefore($(a[0])):c.insertAfter($(a[u-1])))}};h.mousemove(l);$(document.body).mousemove(l);i.on("dragstop",function(s,a){p=!0;i.unbind("dragstop");i.off("touchstart",d);i.off("touchmove",k);i.off("touchend",g);h.unbind("mousemove",l);$(document.body).unbind("mousemove",l);i.removeClass(n.SORTABLE_HIDDEN);i.removeClass(n.DRAGGED_ITEM_CLASS);var v=function(){$.isFunction(t.revertCallback)&&t.revertCallback(a)},y=f.hasClass(t.droppableHeaderClass);if(y)c.remove(),v();else if(f.length<=0)c.remove(),n._replaceOriginalItem(i,u,r,o,t.dropOnEmptyClass),e=u,v();else{if(i.parent().length<=0&&nt(f,s.pageX,s.pageY),i.parent()[0]!==r[0])c.remove();else if(u===e){v();return}t.completedCallback(s,a,i,u,e,y)}})}},n.attachReorderItemHandler=function(t,i,r,u,f,e,o,s,h){var ut=this,k,d,g,nt=!1,l=-1,a=-1,v,w=Number.MAX_VALUE,b=Number.MAX_VALUE,c=t.parent(),p,tt,y,it,rt;for(o&&(c=t.closest(o),v=$("<div>"),v.height(c.height()).css({visibility:"hidden",float:"left"}),c.append(v)),p=f?c.find(f).toArray():c.children().toArray(),tt=u(t),h&&h(p),y=0,it=p.length;y<it;y++)if(rt=$(p[y]),u(rt)===tt){l=y;break}if(!(l<0)){a=l;t.addClass(n.DRAGGED_ITEM_CLASS);t.on("touchmove",k=function(n){ot.simulateMouseEvent(n,i[0]);n.preventDefault()});t.on("touchstart",d=function(n){ot.simulateMouseEvent(n,i[0])});t.on("touchend",g=function(n){ot.simulateMouseEvent(n,i[0])});i.mousemove(function(i){var st,ht,y,p,o,rt,d,g,ft,tt,u,k;if(!nt){var v=i.pageX,e=i.pageY,r,et=function(n,t,i,r,u,f){return n>i&&n<i+u&&t>r&&t<r+f},it=function(n,i){i!==a&&(s?s(t,r,i):i<a?t.insertBefore(n):t.insertAfter(n),a=i)},ot=c.offset(),yt=c.outerWidth(),pt=c.outerHeight();if(et(v,e,ot.left,ot.top,yt,pt)){if(t.removeClass(n.DRAGGED_ITEM_OUTSIDE_CONTAINER),st=Math.abs(w-v),ht=Math.abs(b-e),ut._isDragSufficient(st,ht)){for(w=v,b=e,y=!1,r=f?c.find(f).toArray():c.children().toArray(),p=r.length,h&&h(r),u=0,k=p;u<k;u++)if(o=$(r[u]),rt=o.offset(),et(v,e,rt.left,rt.top,o.outerWidth(),o.outerHeight())){it(o,u);y=!0;break}if(y||(d=$(r[p-1]),g=d.offset(),(v>=g.left&&e>=g.top||e>g.top+d.outerHeight())&&(it(d,p-1),y=!0)),!y){for(ft=Number.POSITIVE_INFINITY,tt=0,u=0,k=p;u<k;u++){var o=$(r[u]),ct=o.offset(),lt=v-(ct.left+o.outerWidth()/2),at=e-(ct.top+o.outerHeight()/2),vt=lt*lt+at*at;vt<=ft&&(ft=vt,tt=u)}it($(r[tt]),tt)}}}else t.addClass(n.DRAGGED_ITEM_OUTSIDE_CONTAINER),a!==l&&(s||t.detach(),r=f?c.find(f).toArray():c.children().toArray(),h&&h(r),s?s(t,r,l):l===0?t.insertBefore($(r[0])):t.insertAfter($(r[l-1])),a=l,w=v,b=e)}});t.on("dragstop",function(u,f){nt=!0;t.removeClass(n.DRAGGED_ITEM_OUTSIDE_CONTAINER);t.removeClass(n.DRAGGED_ITEM_CLASS);t.unbind("dragstop");t.off("touchstart",d);t.off("touchmove",k);t.off("touchend",g);i.unbind("mousemove");v&&v.empty().remove();l!==a?r(u,f,t,l,a):l===a&&$.isFunction(e)&&e(t)})}},n._isDragSufficient=function(t,i){return t<n.SUFFICIENT_DRAG_DISTANCE&&i<n.SUFFICIENT_DRAG_DISTANCE?!1:!0},n._isPointInContainer=function(n,t,i,r,u,f){return n>i&&n<i+u&&t>r&&t<r+f},n._isPointAboveContainer=function(n,t,i){var r=t+i/2;return n<r},n._getItemIndex=function(n,t,i,r){for(var e,f=r?i.find(r).toArray():i.children().toArray(),o=t(n),u=0,s=f.length;u<s;u++)if(e=$(f[u]),t(e)===o)return u;return-1},n._insertOnEmpty=function(n,t,i){var r=t.find("."+i);r.length>0?n.insertAfter(r[0]):t.prepend(n)},n._replaceOriginalItem=function(t,i,r,u,f){var e=u?r.find(u).toArray():r.children().toArray();e.length===0&&n._insertOnEmpty(t,r,f);i===0?t.insertBefore($(e[0])):t.insertAfter($(e[i-1]))},n.DRAGGED_ITEM_CLASS="reorderDragStarted",n.DRAGGED_ITEM_OUTSIDE_CONTAINER="reorderDragOutside",n.SORTABLE_HIDDEN="sortable-helper-hidden",n.SUFFICIENT_DRAG_DISTANCE=10,n}();t.ReorderItemHandler=ni,function(n){function u(n){n.forEach(function(n){t(n)})}function f(n){n.forEach(function(n){i(n)})}function t(n){n.end=b.shiftToLocal(n.end);n.start=b.shiftToLocal(n.start)}function i(n){n.end=b.shiftToUTC(n.end);n.start=b.shiftToUTC(n.start)}function r(n,t){return n.start.getTime()===t.start.getTime()&&n.end.getTime()===t.end.getTime()}function e(n,t){var i,f,u=!0;if(n.length!==t.length)u=!1;else for(i=0,f=n.length;i<f;i+=1)if(!r(n[i],t[i])){u=!1;break}return u}function o(n,t,i){var r,e;var u,f=0,o=n.getDay(),h=t.getDay();for(r=0,e=i.length;r<e;r+=1)u=i[r],o<=u&&h>=u&&(f+=1);return f}function h(t,i,r,u){var f,h,e,o,c;for(f=n.getWorkingDaysInfo(t,i,u),e=0,o=0,c=r.length;o<c;o+=1)h=r[o],e+=n.getWorkingDaysInfo(h.start,h.end,u).totalWorkingDays;return f.totalExcludedDays=e,f.workingDays=f.totalWorkingDays-e,f}function c(){return{totalDays:0,weekendDays:0,totalWorkingDays:0,totalExcludedDays:0,workingDays:0}}function l(n,t,i,r){for(var c=0,a=n.length,l=0,v=t.length,u,f,h=[],o=n[c],e=t[l];c<a||l<v;)o&&e&&o.start<=e.start||!e?(u=o,c+=1,o=n[c]):(u=e,l+=1,e=t[l]),u=this.normalizeForDateRange(u,i,r),u.start>=i&&u.start<=r&&u.end>=i&&u.end<=r&&(f&&(f.start<=u.start&&f.end>=u.start||f.start<=u.end&&f.end>=u.end)?(u={start:f.start<u.start?f.start:u.start,end:f.end>u.end?f.end:u.end},h[h.length-1]=u):h[h.length]=u,f=u);return h}function a(n,t,i){return n.start<t&&n.end>i?{start:t,end:i}:n.start<t&&n.end>=t&&n.end<=i?{start:t,end:n.end}:n.end>i&&n.start>=t&&n.start<=i?{start:n.start,end:i}:n}function v(t,i,r){var o,p,a,v;var u=b.MILLISECONDS_IN_DAY,k=b.MILLISECONDS_IN_WEEK,y=0,f;if(t>i)return{totalDays:0,totalWorkingDays:0,weekendDays:0};var e=Math.round((i.getTime()-t.getTime())/u)+1,h=t.getDay(),c=i.getDay();if(e<=7&&h<=c)f=e-n._getWeekendsBetweenDaysOfWeek(t,i,r);else{o=7-h;p=this.getDSTAgnosticDate(t.getTime()+u*(o-1));o-=n._getWeekendsBetweenDaysOfWeek(t,p,r);var w=this.getDSTAgnosticDate(t.getTime()+u*(7-h)),l=c+1,d=this.getDSTAgnosticDate(i.getTime()-u*(l-1));l-=n._getWeekendsBetweenDaysOfWeek(d,i,r);a=this.getDSTAgnosticDate(i.getTime()-u*(c+1));w<a&&(v=Math.round((a.getTime()-w.getTime()+u)/k),y=v*7-v*r.length);f=o+y+l}return{totalDays:e,totalWorkingDays:f,weekendDays:e-f}}function y(n){var t=new Date(n),i=t.getHours();return i>=12?t.setHours(24,0,0,0):i<12&&t.setHours(0,0,0,0),t}n.shiftDateRangesToLocal=u;n.shiftDateRangesToUTC=f;n.shiftDateRangeToLocal=t;n.shiftDateRangeToUTC=i;n.areDateRangeEqual=r;n.areDateRangesEqual=e;n._getWeekendsBetweenDaysOfWeek=o;n.getDateBreakdown=h;n.getEmptyDateBreakdown=c;n.getMergedDateRangeList=l;n.normalizeForDateRange=a;n.getWorkingDaysInfo=v;n.getDSTAgnosticDate=y}(ai=t.CapacityDateUtils||(t.CapacityDateUtils={}));ti=function(){function n(){}return n.COMMON_CONFIG_SETTING_INSTANCE_ID="af585f7e-3a58-4826-b1c6-b080bd1eaea2",n.BOARDS_GROUP_ID="7acc5438-9254-4b93-9c66-900a0b214989",n.BOARD_GROUP_TITLE=r.CSC_BOARD_GROUP_TITLE,n.CARDS_GROUP_ID="a857de31-d327-47ce-86bc-7e2d82d8713e",n.CARDS_GROUP_TITLE=r.CSC_CARDS_GROUP_TITLE,n.CHARTS_GROUP_ID="92F5854F-6C88-4C37-A055-23306A73D525",n.CHARTS_GROUP_TITLE=r.CSC_CHARTS_GROUP_TITLE,n.GENERAL_GROUP_ID="7c548ed6-1cea-4ba3-a167-b093da447f4f",n.GENERAL_GROUP_TITLE=r.CSC_GENERAL_GROUP_TITLE,n.FIELDS_TAB_ID="4d737028-f57e-4728-9b4e-5d94ffe7dac1",n.FIELDS_TAB_TITLE=r.CSC_FIELDS_TAB_TITLE,n.CARDS_ANNOTATION_TAB_ID="53FB3DAF-7900-46BC-96E2-4D60882D2822",n.CARDS_ANNOTATION_TAB_TITLE=r.CSC_CARDS_ANNOTATION_TAB_TITLE,n.CARDS_TESTS_TAB_ID="3A6EF72F-6AC1-4414-A634-59ED0222BD89",n.CARDS_TESTS_TAB_TITLE=r.CSC_TESTS_TAB_TITLE,n.CARDS_STYLES_TAB_ID="C1463A1D-28CF-4B22-8355-7C0045D0B1A8",n.CARDS_STYLES_TAB_TITLE=r.CSC_CARDS_STYLES_TAB_TITLE,n.CARDS_TAGCOLOR_TAB_ID="39276C4E-4285-46E1-A2C5-4D7DBB06535D",n.CARDS_TAGCOLOR_TAB_TITLE=r.CSC_CARDS_TAGCOLOR_TAB_TITLE,n.SWIMLANES_TAB_ID="0245BB3E-63A6-4B4E-9444-5FAD220D4E69",n.COLUMNS_TAB_ID="B5CD2EA4-D622-4CAC-A26E-12509324A896",n.KANBAN_DRAG_BEHAVIOR_ID="3CB1429B-28E9-408E-AC6E-6A6AA2F43B9E",n.BOARD_BADGE_TAB_ID="d2d04aa7-a63d-4d62-b75b-cab51253ab33",n.BACKLOGS_TAB_ID="85b81c61-9c1c-4e79-8e17-ddb4960544a6",n.WORKINGDAYS_TAB_ID="9608a9c1-6ae8-45e9-b28e-1e3d57f3da3a",n.BUGBEHAVIOR_TAB_ID="bc589740-4a0c-4f61-9f5c-c4f0bad7b628",n.CFD_TAB_ID="1C784703-A1EF-4EB3-83A7-4576268E5A90",n}();t.TabControlsRegistrationConstants=ti;ii=function(){function n(){}return n.KANBAN_VIEW="Kanban",n.PRODUCT_BACKLOG_VIEW="ProductBacklog",n.ITERATION_BACKLOG_VIEW="IterationBacklog",n.ITERATION_BOARD_VIEW="Taskboard",n.CAPACITY_VIEW="Capacity",n.CFD_VIEW="CFD",n}();t.AgileCustomerIntelligenceConstants=ii;ri=function(){function n(){}return n.CardFieldSearchControl="1f0c09e1-cd5d-4618-b7c6-75561d63166e",n.CardFieldDisplayControl="3223bcb2-df35-4a1b-a8fa-41483b5a37e4",n.CardStylingSearchControl="fece9ad0-925d-41b9-a1d5-7eda696bc518",n.TaskBoardFilterDisplayControl="bd967d1e-bd03-4520-a882-d43104703ddb",n.TaskBoardRowHeaderDisplayControl="a2beec8c-5c11-4a24-9361-3183250614fc",n.CapacitySearchControl="aeb42d33-cca6-4530-ae42-7e3a64f1efd1",n.CapacityDisplayControl="a8c5bc60-dad1-47dd-ad74-a6ac9e151c79",n.KanbanFilterDisplayControl="32c71465-1023-48bb-bdb3-40da063293bb",n.SprintPlanningDisplayControl="fc2df75a-e408-4110-ad99-a1d35240d5a7",n}();t.IdentityControlConsumerIds=ri;ot=function(){function n(){}return n.simulateMouseEvent=function(n,t){var r=n.originalEvent,i=r&&r.changedTouches[0],u;i&&(u={touchstart:["mousedown"],touchmove:["mousedown","mousemove"],touchend:["mouseup"]}[n.type],u.forEach(function(n){var r=document.createEvent("MouseEvent");r.initMouseEvent(n,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);t.dispatchEvent(r)}))},n}();t.TouchEventsHelper=ot;ui=function(){function n(){}return n.getBacklogContextWorkItemTypeNames=function(){if(!n._backlogContextWitNames){var t=$(".backlog-context-work-item-type-names");n._backlogContextWitNames=p.parseMSJSON(t.eq(0).html(),!1);t.remove()}return n._backlogContextWitNames},n.setBacklogContextWorkItemTypeNames=function(n){this._backlogContextWitNames=n},n}();t.BacklogSettings=ui});

define("Agile/Scripts/Common/IterationDateUtil",["require","exports","VSS/Diag","VSS/Utils/String","VSS/Utils/Date","VSS/Utils/Array","Agile/Scripts/Resources/TFS.Resources.AgileControls","VSS/Common/Contracts/System"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.IterationDateUtil=void 0;var s;(function(n){function h(n,t){var i="";return n&&t&&(i=r.format(e.IterationDateRange,u.localeFormat(n,"M",!0),u.localeFormat(t,"M",!0))),i}function c(n,t){var i=u.parseLocale(n,t,!0);return u.shiftToLocal(i)}function l(n,t,i){var r=this.getColumnValue(n,t,i),f="";return r&&(r=u.shiftToUTC(r),f=u.localeFormat(r,"d",!0)),f}function a(t,i,r){var f=u.shiftToUTC(i);f=n.getNextWorkingDay(f,r);var e=n.getNumberOfWorkingDays(u.shiftToUTC(t),u.shiftToUTC(i),r,[]),o=n.addWorkingDays(f,e,r),s=u.daysBetweenDates(o,f,!0);return{suggestedStartDate:u.shiftToLocal(f),workingDaysOffset:s}}function v(n,t){n;var r=null;if(n){r=new Date(n.getTime());do r.setDate(r.getDate()+1);while(f.contains(t,r.getDay()))}return r}function y(n,r,u){return this.getNumberOfWorkingDays(t(),n,r,u)}function p(n,t,r,u){for(var o=0,e=new Date(n.getTime());e<=t;)f.contains(r,e.getDay())||s(e,u)||(o+=1),e.setDate(e.getDate()+1);return o}function s(n,t){for(var f,r=0,u=t;r<u.length;r++)if(f=u[r],n>=f.start&&n<=f.end)return!0;return!1}function w(n,t,r){for(var e=t,u=new Date(n.getTime());e>0;)f.contains(r,u.getDay())||(e-=1),e>0&&u.setDate(u.getDate()+1);return u}function b(n){for(var i=[],t=o.DayOfWeek.Sunday;t<=o.DayOfWeek.Saturday;t++)(!n||n.indexOf(t)<0)&&i.push(t);return i}function k(n,i){var r=t();return n<=r&&i>=r}function t(){var n=new Date(Date.now());return u.stripTimeFromDate(n)}n.getSprintDatesDisplay=h;n.parseLocaleUTC=c;n.getIterationDateColumnValue=l;n.getIterationDateDefaultInformation=a;n.getNextWorkingDay=v;n.getNumberWorkingDaysLeft=y;n.getNumberOfWorkingDays=p;n.hasOverlapWithTeamDaysOff=s;n.addWorkingDays=w;n.getWeekendsFromWorkingDays=b;n.isTodayInSprint=k;n.getTodayInLocalTimeWithNoHours=t})(s=t.IterationDateUtil||(t.IterationDateUtil={}))});

define("Agile/Scripts/Common/CustomerIntelligence",["require","exports"],function(n,t){var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.PORTFOLIOBACKLOG_MAPPING_PANE_REPARENT_PROPERTY=t.PROPERTYVALUE_WITHUNSAVEDWORK=t.PROPERTYNAME_SWITCH=t.CustomerIntelligencePropertyValue=t.AgileCustomerIntelligenceFeature=t.AgileCustomerIntelligenceArea=void 0;i=function(){function n(){}return n.AGILE="Agile",n}();t.AgileCustomerIntelligenceArea=i;r=function(){function n(){}return n.PAGELOAD="PageLoad",n.PRODUCTBACKLOG="ProductBacklog",n.PORTFOLIOBACKLOG="PortfolioBacklog",n.CLIENTSIDEOPERATION_REPARENT="Reparent",n.CLIENTSIDEOPERATION_MULTISELECT_REPARENT="MultiSelectReparent",n.CLIENTSIDEOPERATION_MAPPINGPANEREPARENT="MappingPaneReparent",n.CLIENTSIDEOPERATION_MULTISELECT_MAPPINGPANEREPARENT="MultiSelectMappingPaneReparent",n.CLIENTSIDEOPERATION_ITERATIONASSIGNMENT="IterationAssignmentDragDrop",n.CLIENTSIDEOPERATION_MULTISELECT_ITERATIONASSIGNMENT="MultiSelectIterationAssignmentDragDrop",n.CLIENTSIDEOPERATION_ADDBACKLOGITEM="AddBacklogItem",n.CLIENTSIDEOPERATION_BACKLOGS_EXPAND_COLLAPSE_ONE_LEVEL="ExpandCollapseHierarchyOneLevel",n.CLIENTSIDEOPERATION_INDENT_CHANGE_PARENT="Indent_ChangeParent",n.CLIENTSIDEOPERATION_ITERATIONEXPANDALL="ExpandAllIterationView",n.CLIENTSIDEOPERATION_EXPANDWARNING="ExpandItemWithWarning",n.CLIENTSIDEOPERATION_BACKLOG_REORDER="BacklogReorder",n.CLIENTSIDEOPERATION_ITERATION_TASKBOARD_REORDER="IterationTaskboardReorder",n.CLIENTSIDEOPERATION_ITERATION_TASKBOARD_REPARENT="IterationTaskboardReparent",n.CLIENTSIDEOPERATION_ITERATION_TASKBOARD_CHANGE_STATE="IterationTaskboardChngState",n.CLIENTSIDEOPERATION_ITERATION_TASKBOARD_ADDNEWITEM="IterationTaskboardAddNewItem",n.CLIENTSIDEOPERATION_ITERATION_TASKBOARD_FILTER="IterationTaskboardFilter",n.CLIENTSIDEOPERATION_ITERATION_COLLAPSE_FUTURE_LIST="IterationCollapseFutureList",n.CLIENTSIDEOPERATION_ITERATION_CLICK_PREVIOUS_ITERATION="IterationOpenPreviousIteration",n.CLIENTSIDEOPERATION_ITERATION_CLICK_NEXT_ITERATION="IterationOpenNextIteration",n.CLIENTSIDEOPERATION_CARD_CUSTOMIZATION_DIALOG_OPENED="CardCustomizationDialogOpened",n.CLIENTSIDEOPERATION_CARD_CUSTOMIZATION_DIALOG_CHANGED="CardCustomizationDialogChanged",n.CLIENTSIDEOPERATION_COMMON_CONFIG_DIALOG_OPENED="CommonConfigDialogOpened",n.CLIENTSIDEOPERATION_CFD_UPDATE_SETTINGS="CfdUpdateSettings",n.CLIENTSIDEOPERATION_SHOW_LARGE_LEGACY_CHART="ShowLargeLegacyChart",n.CLIENTSIDEOPERATION_CRITERIA_FILTER_ICON="KanbanBoardCriteriaFilterIcon",n.KANBANBOARD_AUTOREFRESH="KanbanBoardAutoRefresh",n.TASKBOARD_AUTOREFRESH="TaskboardAutoRefresh",n.MULTISELECT_CONTEXTMENU="MultiSelectContextMenu",n.SINGLESELECT_CONTEXTMENU="SingleSelectContextMenu",n.TELEMETRY_PRODUCTBACKLOG_GETPAYLOAD="ProductBacklog.GetPayloadComplete",n.TELEMETRY_MAPPINGPANEL_INITIALIZED="MappingPanel.Initialized",n.TELEMETRY_TASKBOARD_INIT="IterationTaskboard.Init",n.TELEMETRY_TASKBOARD_TREECONTROLS_INIT="IterationTaskboard.TreeCtrlsInit",n.TELEMETRY_TASKBOARD_CUSTOMLAYOUT="IterationTaskboard.CustomLayout",n.TELEMETRY_TASKBOARD_ITEMCOUNT="IterationTaskboard.ItemCount",n.TELEMETRY_TASKBOARD_TOP_CELLITEM_COUNT="IterationTaskboard.TopCellItemCount",n.TELEMETRY_TASKBOARD_DISPLAYEDROWSDATA="IterationTaskboard.DisplayedRowsData",n.TELEMETRY_TASKBOARD_STYLERULES="IterationTaskboard.StyleRules",n.TELEMETRY_CAPACITY_VIEW_ADDREMOVECAPACITYUSER="CapacityView.AddRemoveCapacityUser",n.TELEMETRY_CAPACITY_VIEW_CAPACITYPLANNING="CapacityView.CapacityPlanning",n.TELEMETRY_PRODUCTBACKLOG_COLUMNSCHANGE="ProductBacklog.ColumnsChange",n.TELEMETRY_PRODUCTBACKLOG_RENDERFORECASTLINES="ProductBacklog.RenderForecastLines",n.TELEMETRY_CARD_CONTEXT_MENU_CLICK="CardContextMenuClick",n.TELEMETRY_CARD_CHECKLIST_CONTEXT_MENU_CLICK="CardChecklistContextMenuClick",n.TELEMETRY_BACKLOGS_PANEL="Agile.BacklogsPanel",n.TELEMETRY_BACKLOGS_CREATEQUERY="CreateQuery",n.TELEMETRY_BACKLOGS_EMAILBACKLOG="EmailBacklog",n.TELEMETRY_BACKLOGS_COLUMNOPTIONS="BacklogsCommand.column-options",n.TELEMETRY_BACKLOGS_TOOLBAR_FORECASTING="Forecasting",n.TELEMETRY_BACKLOGS_TOOLBAR_SHOWPARENTS="ShowParents",n.TELEMETRY_BACKLOGS_TOOLBAR_INPROGRESS="ShowInProgress",n.TELEMETRY_BACKLOGS_DISPLAYEDROLLUPCOLUMN="RollupColumnsDisplayed",n}();t.AgileCustomerIntelligenceFeature=r;u=function(){function n(){}return n.VIEWTYPE_PRODUCTBACKLOG="Product Backlog",n.VIEWTYPE_PORTFOLIOBACKLOG="Portfolio Backlog",n.VIEWTYPE_ITERATIONBACKLOG="Iteration Backlog",n.VIEWTYPE_TASKBOARD="Taskboard",n.VIEWTYPE_KANBAN="Kanban",n.ADDBACKLOGITEM_ADDEDFROM_ADDPANEL="AddPanel",n.ADDBACKLOGITEM_ADDEDFROM_GRID="Grid",n}();t.CustomerIntelligencePropertyValue=u;t.PROPERTYNAME_SWITCH="Switch";t.PROPERTYVALUE_WITHUNSAVEDWORK="WithUnsavedWork";t.PORTFOLIOBACKLOG_MAPPING_PANE_REPARENT_PROPERTY="MappingPaneReparent"});

define("Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog",["require","exports"],function(require,exports){var e=exports;e.Rollup_SuccessColumnTooltip="Rollup is up to date";e.ChangeParentDialogWorkItemPickerDisabledText="There are no possible parents in this team.";e.ContextMenu_AddChildItems="Add...";e.Tooltip_Backlog_InProgress="Show or hide {0} in the state(s): {1}";e.AddPanel_Add="Add";e.BulkEdit_ErrorMessageHeader="One or more items could not be saved. ";e.GroupRow_OrphanProductBacklogItem="Unparented {0}";e.ToolPanel_Capacity="Work details";e.CreateQuery_ClickHere="Click here to view it.";e.ContextMenu_AriaLabel="Backlog Item Actions";e.ForecastingSprintStartsWithLabel="{0} starts with";e.AddPanel_Close="Close";e.Rollup_FailureColumnTooltip="Failed to process data into Analytics. Last update was {0}.";e.BacklogInfo_WorkItemRemoved_Footer_LinkText="Edit now";e.SprintHeader_Past="Past";e.Forecast_MessageDisabledWhileFiltering="Forecasting disabled while filtering";e.Forecast_NoSprints="Forecast lines cannot be drawn. There are no remaining iterations in your schedule.";e.CreateQuery_Error="An error occurred while creating the backlog query. The query could not be saved. The server might be offline or unresponsive. Wait a few minutes, and then try again.";e.BacklogInfo_RefreshRequired="You have modified the work item(s) in a way that affects how it appears on the backlog. You must refresh the backlog to reflect the latest changes. ";e.AddPanel_CloseAltText="Close";e.LoadParentErrorMessage="Uh-oh, we hit a snag. Unable to show this parent. Please try refreshing.";e.Rollup_FailureColumnTooltip_NoDate="We are still processing data into Analytics.";e.IterationBacklog="Iteration backlog";e.KeyboardShortcutDescription_Open_New_Item_Panel="Open New Item Panel";e.RollupColumn_TotalBy_WorkItemType="Count of {0}";e.KeyboardShortcutDescription_Move_Item_To_Current_Iteration="Move item to current iteration";e.BacklogsChangeParentDialogTitle="Change parent";e.Add_WorkItems_Error="The following error occurred while attempting to add a new work item: {0}.";e.RollupColumn_TotalBy_FieldName="Sum of {0}";e.ProductBacklogLoading_ForecastEnd="Forecast content loaded";e.AddPanel_Type="Type";e.TooManyItemsOnBacklog_ShowingOneHop="There are too many items on the backlog. Only two levels of the tree can be shown. Delete items or {0} for this team.";e.KeyboardShortcutDescription_Move_Item_Up="Move item up";e.ProductBacklog_Reparent_Toast_Multiple="You successfully mapped {0} work items to \"{1}\".";e.ContextMenu_AddLink="Add link";e.ChangeParentDialogWorkItemPickerHelpText="Select a work item";e.MappingPane_On="On";e.Add_WorkItems="Add: {0}";e.ProductBacklog="Product backlog";e.ProductBacklogLoading_MappingPaneStart="Mapping pane is loading";e.Forecast_ItemTooBig="Forecast lines cannot be drawn. Based on the velocity you have entered, the first item on your backlog cannot be completed in the remaining iterations.";e.ToolPanel_Off="Off";e.UnownedItemTooltip="This item cannot be reordered because it is owned by another team.";e.ChangeParentDialogTeamPickerLabel="Team";e.Tooltip_Backlog_Parents="Show or hide the parents of {0} owned by {1}.";e.TooManyItemsOnBacklog="There are too many items on this backlog to show the full work item tree. Delete items or {0} for this team.";e.KeyboardShortcutDescription_Move_Item_Down="Move item down";e.ProductBacklogLoading_RightPaneExtesionStart="Right pane extension menu is loading";e.BacklogsChangeParentDialogFooterOk="OK";e.SprintHeader_Future="Future";e.MoveUserStory_TasksUpdateIterationFailed="You moved a work item to a sprint or a backlog, but an error occurred while attempting to update the iteration path of one or more children associated with this work item to reflect this change. You must manually update the children with the correct iteration.";e.ChangeParentInvalidSelectionLearnMoreLink="https://go.microsoft.com/fwlink/?linkid=845482";e.ChangeParentErrorLoadingParentWorkItemsMessage="Error loading parent work items: {0}";e.ProductBacklog_LevelRedirectToDefaultLevel="The backlog you requested is either hidden for your team or cannot be found. We\u0027re showing you the default backlog instead. If you navigated here from a bookmark, you will need to update your bookmark.";e.ContextMenu_MoveToTop="Move to top";e.Backlog_Toolbar_AriaLabel="Backlog toolbar";e.ChangeParentInvalidSelectionLearnMore="Learn more about reparenting.";e.KeyboardShortcutDescription_Assign_To="Assign to";e.RollupColumn_TotalBy_AllDescendants="Count of Work Items";e.ContextMenu_MoveToPosition="Move to position...";e.ContextMenu_LinkToNewItem="New item...";e.CreateQuery_Toolbar_Text="Create Query";e.ToolPanel_Mapping="Mapping";e.ProductBacklogLoading_RightPaneError="Error loading right pane";e.ProductBacklogLoading_AddPanelEnd="Add panel loaded";e.Add_WorkItems_Seperator=", ";e.ContextMenu_LinkToExistingItem="Existing item...";e.Forecast_VelocityLabel="Forecasting based on velocity of";e.RollupColumn_ProgressBy_AllCompletedDescendants="Progress by all Work Items";e.BacklogAction_EmailQueryResult="Email";e.ProductBacklogLoading_ForecastError="Error loading forecast content";e.ProductBacklogLoading_ForecastStart="Forecast content is loading";e.MoveUserStory_UserStoryUpdateIterationFailed="The work item could not be moved to the sprint or backlog because an error occurred when attempting to update the iteration path of the parent work item. You might not have the necessary permissions to edit the work item, the work item might have been modified by another user, or you might have lost connection to your server. Refresh your browser, and then try again.";e.MappingPane_Off="Off";e.ProductBacklogContextMenu_Loading="Loading...";e.BacklogsChangeParentDialogFooterCancel="Cancel";e.KeyboardShortcutGroup_Backlog="Backlogs";e.SprintHeader_Current="Current";e.BulkEdit_Backlog_OrderFieldRefresh="You changed the field used for backlog ordering. You must refresh your backlog to see the items in the new location. ";e.AddPanel_Loading="Loading ...";e.ChangeParentDialogWorkItemPickerLabel="New parent";e.RollupColumn_ComputeError="An error occurred while fetching available rollup columns.";e.ChangeParentErrorLoadingTeamsMessage="Error loading teams: {0}";e.KeyboardShortcutDescription_Move_Item_To_Backlog="Move item to backlog";e.GroupRow_OrphanTasks="Unparented";e.Rollup_EffortFieldName="Effort";e.BacklogsChangeParentDialogDescription="This will replace any existing parent of the {0} selected item(s).";e.BacklogInfo_WorkItemRemoved_ListHeader="The following changes removed the item:";e.StatusMessage_RecoverableError="An error has occurred while attempting to save your changes. Click here to try saving your changes again. Error details: {0}";e.BacklogInfo_OrderFieldRefresh="You changed the field used for backlog ordering. You must refresh your backlog to see the item in the new location. ";e.RollupColumn_ProgressBy_WorkItemType="Progress by {0}";e.Forecast_Column_Title="Forecast";e.ProductBacklog_MappingPane_Error="The work item could not be mapped because an error occurred when attempting to update the link to the parent work item. You might not have the necessary permissions to edit the work item, the work item might have been modified by another user, or you might have lost connection to your server. Refresh your browser, and then try again.";e.ContextMenu_ChangePosition="Change position...";e.ProductBacklogLoading_MappingPaneEnd="Mapping pane loaded";e.BulkEdit_Backlog_RefreshRequired="You have modified the work items in a way that affects how it appears on the backlog. You must refresh the backlog to reflect the latest changes. ";e.BacklogInfo_WorkItemRemoved_ListItem="{0} was set to: {1}";e.MissingProposedStateMapping="Items added to the backlog may disappear on a refresh because your team project marks them as \"in progress\". Those items will appear when you change the \"In progress\" filter to Show.";e.ChangeParentSelectionCannotReparentMessage="You cannot change the parent because these are top-level items.";e.ReorderDialogMessage="Enter a value between 1 and {0}:";e.ReorderDialogError_Message="Your input is invalid. Please enter an integer value between 1 and {0}.";e.ProductBacklog_ParentColumnTitle="Parent";e.Forecast_NoBacklog="Forecast lines cannot be drawn. There are no proposed items in your backlog.";e.MultipleItemTypesDragHelperText="Items";e.Columns_ErrorSaving="Error saving column options. Click here to discard your changes and refresh your view of the backlog.";e.ForecastingSprintEndsWithLabel="{0} ends with";e.ProductBacklog_OrderColumnTitle="Order";e.BulkEdit_WorkItemRemovedFromBacklog_ListHeader="The following changes removed the items:";e.ChangeParentSelectionLimitExceededMessage="You cannot change the parent of these because there are more than 200 items selected.";e.ProductBacklogLoading_RightPaneExtesionEnd="Right pane extension menu loaded";e.MappingPane_Refresh="Refresh";e.ProductBacklogLoading_AddPanelError="Error loading add panel";e.ToolPanel_FilterTitle="Panel";e.ProductBacklogLoading_AddPanelStart="Add panel is loading";e.ReduceAreaOfOwnershipLinkText="reduce the area of ownership";e.ContextMenu_ChangeParent="Change parent...";e.BulkEdit_ErrorListHeader="The following errors appear on one or more items:";e.BacklogInfo_RefreshRequired_LinkText="Refresh now";e.CreateQuery_Created="Your backlog query has been created. ";e.AddPanel_AriaDescription="Set {0} for new work item";e.KeyboardShortcutDescription_Move_Item_To_Next_Iteration="Move item to next iteration";e.BacklogInfo_WorkItemRemoved_Footer="If you did not want to remove this item, you may edit it to undo your changes. ";e.ChangeParentInvalidSelectionMessage="You cannot change the parent of these items because of which items are selected. If items of multiple levels are selected, they must all have a selected ancestor. ";e.KeyboardShortcutDescription_Move_Item_To_Top="Move item to top";e.EmailBacklogQueryResult="Send backlog query as an email";e.BacklogInfo_WorkItemRemoved_Header="\"{0}\" was removed because of your recent changes.";e.KeyboardShortcutDescription_Show_Hide_Parents="Show / Hide Parents";e.KeyboardShortcutDescription_Add_Child="Add child";e.ProductBacklog_Error_UnsavedChanges="You have unsaved changes. You can retry after all changes are saved, or refresh the page to discard the changes.";e.BulkEdit_WorkItemRemovedFromBacklog_Header="One or more items were removed because of your recent changes.";e.ProductBacklog_Reparent_Toast_1="You successfully mapped \"{0}\" to \"{1}\".";e.MappingPane_FilterTitle="Mapping";e.StatusMessage_FatalError="An error has occurred while attempting to save your changes. Click here to discard your changes and refresh your view of the backlog. Error details: {0}";e.Unparented="Unparented";e.RollupColumn_ProgressBy_EffortField="Progress by {0}";e.AddPanel_TitleDisabledWhileFiltering="Adding items has been disabled while filtering";e.RollupColumn="Rollup Column";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/Utils/TelemetryUtils",["require","exports","VSS/Telemetry/Services","WorkItemTracking/Scripts/TFS.WorkItemTracking"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.TelemetryUtils=void 0;var u;(function(n){function t(n,t,r){if(r.column||r.lane||r.done){var u={};r.column&&$.extend(u,{column:r.column});r.lane&&$.extend(u,{lane:r.lane});r.done&&$.extend(u,{done:r.done});i.publishEvent(new i.TelemetryEventData(n,t,u))}}function f(n){var o,i,u,f,t,e;if(n&&n.allLinks){for(o=n.allLinks,i={workItemLinkCount:0,attachmentCount:0,hyperLinkCount:0,externalLinkCount:0,externalLinkDetails:{}},u=0,f=o;u<f.length;u++)t=f[u],t instanceof r.Attachment?i.attachmentCount++:t instanceof r.ExternalLink?(t.linkData&&t.linkData.OriginalName&&(e=i.externalLinkDetails[t.linkData.OriginalName],i.externalLinkDetails[t.linkData.OriginalName]=e?e+1:1),i.externalLinkCount++):t instanceof r.WorkItemLink?i.workItemLinkCount++:t instanceof r.Hyperlink&&i.hyperLinkCount++;return i}return null}n.recordBoardFieldsUsageChange=t;var u=function(){function n(){this.column=!1;this.lane=!1;this.done=!1}return n}();n.BoardFieldUsageData=u;n.getWorkItemLinkTelemetryDetails=f})(u=t.TelemetryUtils||(t.TelemetryUtils={}))});

define("WorkItemTracking/Scripts/Utils/WorkItemTeamUtil",["require","exports","WorkItemTracking/Scripts/TFS.WorkItemTracking","VSS/Diag","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f){function e(n,t,e){return e===void 0&&(e=!0),__awaiter(this,void 0,void 0,function(){var o,s,h,c;return __generator(this,function(){r.Debug.assertParamIsType(t,i.WorkItem,"workItem");try{h=t.store.getTfsContext();c=u.ProjectCollection.getConnection(h);o=c.getWebContext().project.id.toLowerCase();s=t.project.guid.toLowerCase()}catch(l){o="";s=""}return o!==s?[2,Promise.resolve(null)]:[2,t.store.beginGetTeamSettings(n).then(function(n){var r,i,u,o,s,h;if(n)for(r=[],i=undefined,e&&(n.defaultIteration?i=n.defaultIteration.friendlyPath:n.currentIteration&&(i=n.currentIteration.friendlyPath)),!i&&n.backlogIteration&&(i=n.backlogIteration.friendlyPath),i&&r.push({fieldName:f.CoreFieldRefNames.IterationPath,value:i}),n.teamFieldName&&r.push({fieldName:n.teamFieldName,value:n.teamFieldDefaultValue}),u=0,o=r;u<o.length;u++)s=o[u],h=t.getField(s.fieldName),h&&h.setValue(s.value)},function(){})]})})}Object.defineProperty(t,"__esModule",{value:!0});t.beginTrySetWorkItemTeamDefaults=void 0;t.beginTrySetWorkItemTeamDefaults=e});

define("VSS/FeatureManagement/Contracts",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.ContributedFeatureEnabledValue=void 0;var i;(function(n){n[n.Undefined=-1]="Undefined";n[n.Disabled=0]="Disabled";n[n.Enabled=1]="Enabled"})(i=t.ContributedFeatureEnabledValue||(t.ContributedFeatureEnabledValue={}));t.TypeInfo={ContributedFeatureEnabledValue:{enumValues:{undefined:-1,disabled:0,enabled:1}},ContributedFeatureState:{},ContributedFeatureStateQuery:{}};t.TypeInfo.ContributedFeatureState.fields={state:{enumType:t.TypeInfo.ContributedFeatureEnabledValue}};t.TypeInfo.ContributedFeatureStateQuery.fields={featureStates:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.ContributedFeatureState}}});

define("VSS/FeatureManagement/RestClient",["require","exports","VSS/FeatureManagement/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function nt(n){return window.VSS&&window.VSS.VssSDKRestVersion&&d[window.VSS.VssSDKRestVersion]?r.getClient(d[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(s,undefined,undefined,undefined,n)}var e,f,o,s,h,c,l,a,v,y,p,w,b,k,g,d;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.FeatureManagementHttpClient=t.FeatureManagementHttpClient3=t.FeatureManagementHttpClient3_1=t.FeatureManagementHttpClient3_2=t.FeatureManagementHttpClient4=t.FeatureManagementHttpClient4_1=t.FeatureManagementHttpClient5=t.FeatureManagementHttpClient5_1=t.FeatureManagementHttpClient5_2=t.FeatureManagementHttpClient6=t.FeatureManagementHttpClient6_1=t.FeatureManagementHttpClient7=t.FeatureManagementHttpClient7_1=t.CommonMethods3_1To7_1=t.CommonMethods3To7_1=void 0;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.setFeatureStateForScope=function(n,t,r,u,f,e,o){var s={reason:e,reasonCode:o};return this._beginRequest({httpMethod:"PATCH",area:"FeatureManagement",locationId:"dd291e43-aa9f-4cee-8465-a93c78e414a4",resource:"FeatureStates",routeTemplate:"_apis/{area}/{resource}/{userScope}/{scopeName}/{scopeValue}/{featureId}",requestType:i.TypeInfo.ContributedFeatureState,responseType:i.TypeInfo.ContributedFeatureState,routeValues:{featureId:t,userScope:r,scopeName:u,scopeValue:f},queryParams:s,apiVersion:this.featureStatesApiVersion,data:n})},t.prototype.getFeatureStateForScope=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"FeatureManagement",locationId:"dd291e43-aa9f-4cee-8465-a93c78e414a4",resource:"FeatureStates",routeTemplate:"_apis/{area}/{resource}/{userScope}/{scopeName}/{scopeValue}/{featureId}",responseType:i.TypeInfo.ContributedFeatureState,routeValues:{featureId:n,userScope:t,scopeName:r,scopeValue:u},apiVersion:this.featureStatesApiVersion})},t.prototype.setFeatureState=function(n,t,r,u,f){var e={reason:u,reasonCode:f};return this._beginRequest({httpMethod:"PATCH",area:"FeatureManagement",locationId:"98911314-3f9b-4eaf-80e8-83900d8e85d9",resource:"FeatureStates",routeTemplate:"_apis/{area}/{resource}/{userScope}/{featureId}",requestType:i.TypeInfo.ContributedFeatureState,responseType:i.TypeInfo.ContributedFeatureState,routeValues:{featureId:t,userScope:r},queryParams:e,apiVersion:this.featureStatesApiVersion_98911314,data:n})},t.prototype.getFeatureState=function(n,t){return this._beginRequest({httpMethod:"GET",area:"FeatureManagement",locationId:"98911314-3f9b-4eaf-80e8-83900d8e85d9",resource:"FeatureStates",routeTemplate:"_apis/{area}/{resource}/{userScope}/{featureId}",responseType:i.TypeInfo.ContributedFeatureState,routeValues:{featureId:n,userScope:t},apiVersion:this.featureStatesApiVersion_98911314})},t.prototype.getFeatures=function(n){var t={targetContributionId:n};return this._beginRequest({httpMethod:"GET",area:"FeatureManagement",locationId:"c4209f25-7a27-41dd-9f04-06080c7b6afd",resource:"Features",routeTemplate:"_apis/{area}/{resource}/{featureId}",responseIsCollection:!0,queryParams:t,apiVersion:this.featuresApiVersion})},t.prototype.getFeature=function(n){return this._beginRequest({httpMethod:"GET",area:"FeatureManagement",locationId:"c4209f25-7a27-41dd-9f04-06080c7b6afd",resource:"Features",routeTemplate:"_apis/{area}/{resource}/{featureId}",routeValues:{featureId:n},apiVersion:this.featuresApiVersion})},t}(u.VssHttpClient);t.CommonMethods3To7_1=e;f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.queryFeatureStatesForNamedScope=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"FeatureManagement",locationId:"f29e997b-c2da-4d15-8380-765788a1a74c",resource:"FeatureStatesQuery",routeTemplate:"_apis/{area}/{resource}/{userScope}/{scopeName}/{scopeValue}",requestType:i.TypeInfo.ContributedFeatureStateQuery,responseType:i.TypeInfo.ContributedFeatureStateQuery,routeValues:{userScope:t,scopeName:r,scopeValue:u},apiVersion:this.featureStatesQueryApiVersion,data:n})},t.prototype.queryFeatureStatesForDefaultScope=function(n,t){return this._beginRequest({httpMethod:"POST",area:"FeatureManagement",locationId:"3f810f28-03e2-4239-b0bc-788add3005e5",resource:"FeatureStatesQuery",routeTemplate:"_apis/{area}/{resource}/{userScope}",requestType:i.TypeInfo.ContributedFeatureStateQuery,responseType:i.TypeInfo.ContributedFeatureStateQuery,routeValues:{userScope:t},apiVersion:this.featureStatesQueryApiVersion_3f810f28,data:n})},t.prototype.queryFeatureStates=function(n){return this._beginRequest({httpMethod:"POST",area:"FeatureManagement",locationId:"2b4486ad-122b-400c-ae65-17b6672c1f9d",resource:"FeatureStatesQuery",routeTemplate:"_apis/{area}/{resource}",requestType:i.TypeInfo.ContributedFeatureStateQuery,responseType:i.TypeInfo.ContributedFeatureStateQuery,apiVersion:this.featureStatesQueryApiVersion_2b4486ad,data:n})},t}(e);t.CommonMethods3_1To7_1=f;o=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="7.1-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient7_1=o;s=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="7.0-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient7=s;h=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="6.1-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient6_1=h;c=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="6.0-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient6=c;l=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="5.2-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient5_2=l;a=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="5.1-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient5_1=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="5.0-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient5=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="4.1-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient4_1=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="4.0-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient4=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="3.2-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient3_2=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314=r.featureStatesQueryApiVersion=r.featureStatesQueryApiVersion_3f810f28=r.featureStatesQueryApiVersion_2b4486ad="3.1-preview.1",r}return __extends(t,n),t}(f);t.FeatureManagementHttpClient3_1=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.featuresApiVersion=r.featureStatesApiVersion=r.featureStatesApiVersion_98911314="3.0-preview.1",r}return __extends(t,n),t}(e);t.FeatureManagementHttpClient3=k;g=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(o);t.FeatureManagementHttpClient=g;d={"7.1":o,"7.0":s,"6.1":h,"6.0":c,"5.2":l,"5.1":a,"5.0":v,"4.1":y,"4.0":p,"3.2":w,"3.1":b,"3.0":k};t.getClient=nt});

define("VSSPreview/Flux/Components/LWP",["require","exports","react","VSS/LWP"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.LWPComponent=void 0;var u=r.getLWPModule("VSS/Platform/Layout"),f=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n,t,f;return u&&u.WrappedComponent&&u.ReactRootComponent?(n=r.getLWPModule("VSS/Legacy/Legacy"),n||console&&console.warn("`LWPComponent` requires the `VSS/Legacy/Legacy` module"),t=n.getLWPComponentProps(),f=this.props.pageContext,f&&(t.pageContext=f),i.createElement(u.ReactRootComponent,__assign({},t),i.createElement(u.WrappedComponent,__assign({},this.props)))):(console&&console.warn("`LWPComponent` requires the `VSS/Platform/Layout` module"),null)},t}(i.Component);t.LWPComponent=f});

define("WorkItemTracking/Scripts/ActionUrls",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.ActionParameters=t.ActionUrl=void 0,function(n){n.ACTION="action";n.ACTION_NEW="new";n.ACTION_EDIT="edit";n.ACTION_CREATE="create";n.ACTION_QUERYRESULTSBYID="resultsById";n.ACTION_QUERYRESULTSBYPATH="results";n.ACTION_ADHOCQUERY="adHocQuery";n.ACTION_VSOPEN="vsopen";n.ACTION_QUERY="query";n.ACTION_QUERY_EDIT="query-edit";n.ACTION_QUERY_CHARTS="query-charts";n.ACTION_CONTRIBUTION="contribution";n.ACTION_SEARCH="search"}(i=t.ActionUrl||(t.ActionUrl={})),function(n){n.ACTION="_a";n.ID="id";n.WITD="witd";n.WORKITEMID="workItemId";n.TRIAGE="triage";n.TEMPQUERYID="tempQueryId";n.TEMPLATEID="templateId";n.PATH="path";n.WIQL="wiql";n.NEW_QUERY="newQuery";n.SEARCHTEXT="searchText";n.PARENTID="parentId";n.FULLSCREEN="fullScreen";n.VIEW="view";n.ISVSOPEN="isVSOpen";n.QUERYID="queryId";n.CONTEXT="context";n.NAME="name";n.IMPORTDATA="importData"}(r=t.ActionParameters||(t.ActionParameters={}))});

define("WorkItemTracking/Scripts/Utils/WorkItemControlsActions",["require","exports","VSS/Diag","VSS/Controls/Navigation","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/Utils/WIFormCIDataHelper","WorkItemTracking/Scripts/ActionUrls"],function(n,t,i,r,u,f,e){function s(n){var o,t,s;o=n.tfsContext||u.TfsContext.getDefault();t=r.FullScreenHelper.getUrlData(!0);t.parameters=n.id;s=o.getPublicActionUrl(e.ActionUrl.ACTION_EDIT,"workitems",t);window.open(s);f.WIFormCIDataHelper.workItemOpenInNewTabEvent()}Object.defineProperty(t,"__esModule",{value:!0});t.openWorkItemInNewTabActionWorker=t.WorkItemActions=void 0;var o;(function(n){n.ACTION_WORKITEM_OPEN="open-work-item";n.ACTION_WORKITEM_OPEN_DIALOG="open-work-item-dialog";n.ACTION_WORKITEM_OPEN_IN_NEW_TAB="open-work-item-in-new-tab";n.ACTION_WORKITEM_NEW="work-item-new";n.ACTION_WORKITEM_NEW_DIALOG="work-item-new-dialog";n.ACTION_WORKITEM_NEW_LINKED="work-item-new-linked";n.ACTION_WORKITEM_LINK="work-item-link";n.ACTION_WORKITEM_NEW_COPY="work-item-new-copy";n.ACTION_WORKITEM_NEW_CLONE="work-item-new-clone";n.ACTION_WORKITEM_DISCARD_IF_NEW="work-item-discard-if-new";n.ACTION_SHOW_WORKITEM_FORM_BUSY="show-work-item-form-busy-overlay";n.ACTION_HIDE_WORKITEM_FORM_BUSY="hide-work-item-form-busy-overlay";n.WORKITEM_DELETE_ERROR="work-item-delete-error";n.WORKITEM_MAXIMIZE_STATE_CHANGED="work-item-maximize-state-changed"})(o=t.WorkItemActions||(t.WorkItemActions={}));t.openWorkItemInNewTabActionWorker=s});

define("WorkItemTracking/SharedScripts/WorkItemDialogShim",["require","exports","react","react-dom","VSS/FeatureManagement/RestClient","VSS/LWP","VSS/VSS","VSSPreview/Flux/Components/LWP","WorkItemTracking/Scripts/ActionUrls","WorkItemTracking/Scripts/Utils/WitControlMode","WorkItemTracking/Scripts/Utils/WorkItemControlsActions","VSS/VSS","VSS/Performance","VSS/Events/Action","Presentation/Scripts/TFS/TFS.Host.TfsContext"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function rt(n,t){return __awaiter(this,void 0,void 0,function(){var s,u,i,f,e,o,r;return __generator(this,function(h){switch(h.label){case 0:return[4,p];case 1:if(h.sent()){for(s=n.id<1?n.workItemType.name:n.id,u={},i=0,f=Object.keys(n.fieldUpdates);i<f.length;i++)e=f[i],o=n.getField(Number(e)),r=n.fieldUpdates[e],o.fieldDefinition.referenceName&&r.value&&!r.setByRule&&(u[o.fieldDefinition.referenceName]=r.value);return k(s,t,u),[2]}return b(function(i){i.WorkItemFormDialog.showWorkItem(n,t)}),[2]}})})}function ut(n,t,i){return __awaiter(this,void 0,void 0,function(){var r,u;return __generator(this,function(f){switch(f.label){case 0:return[4,p];case 1:return f.sent()?(k(n,i),[2]):(i!==undefined?(r=t||y.TfsContext.getDefault(),u=i):(r=y.TfsContext.getDefault(),u=t),b(function(){v.getService().performAction(c.WorkItemActions.ACTION_WORKITEM_OPEN,{id:n,tfsContext:r,options:u})}),[2])}})})}function nt(n,t,i,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(u){switch(u.label){case 0:return[4,p];case 1:return u.sent()?(k(n,i),[2]):(b(function(){v.getService().performAction(c.WorkItemActions.ACTION_WORKITEM_OPEN_DIALOG,{id:n,tfsContext:t||y.TfsContext.getDefault(),options:i,tryGetLatest:r})}),[2])}})})}function tt(n,t,i,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(u){switch(u.label){case 0:return[4,p];case 1:return u.sent()?(k(n,r,t),[2]):(b(function(){v.getService().performAction(c.WorkItemActions.ACTION_WORKITEM_NEW_DIALOG,{workItemTypeName:n,tfsContext:i||y.TfsContext.getDefault(),initialValues:t,options:r})}),[2])}})})}function ft(n,t){t=t||y.TfsContext.getDefault();var i=t.getPublicActionUrl(s.ActionUrl.ACTION_EDIT,"workitems",{parameters:n});window.open(i)}function et(n,t,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,p];case 1:return r.sent()?(k(n,undefined,i),[2]):(t=t||y.TfsContext.getDefault(),b(function(){v.getService().performAction(c.WorkItemActions.ACTION_WORKITEM_NEW,{workItemTypeName:n,tfsContext:t,initialValues:i})}),[2])}})})}function ot(n){return n===void 0&&(n=y.TfsContext.getDefault()),it().then(function(n){return l.requireModules(n)})}function b(n){var t,i;w?(i=a.getScenarioManager().startScenario("WIT","FormShim"),n(w),i.end()):(t=a.getScenarioManager().startScenario("WIT","FormShim.LoadModules"),it().then(function(i){return l.requireModules(i).spread(function(i){w=i;n(w);t.end()})},e.handleError))}function it(){return h.WitFormModeUtility.ensureWitFormModeLoaded().then(function(){return["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls"]})}function k(n,t,u){var f=document.createElement("div"),e,s;document.body.appendChild(f);e=function(){f!==null&&(r.unmountComponentAtNode(f),document.body.removeChild(f),f=null)};s=typeof n=="number"?{workItemId:n,onDismiss:e,onLegacyDismiss:t===null||t===void 0?void 0:t.close,onLegacySave:t===null||t===void 0?void 0:t.save,onLegacyDelete:t===null||t===void 0?void 0:t.deleteItem,readOnly:t===null||t===void 0?void 0:t.readOnly}:{workItemTypeName:n,initialValues:u,onDismiss:e,onLegacyDismiss:t===null||t===void 0?void 0:t.close,onLegacySave:t===null||t===void 0?void 0:t.save,onLegacyDelete:t===null||t===void 0?void 0:t.deleteItem,readOnly:t===null||t===void 0?void 0:t.readOnly};r.render(i.createElement(o.LWPComponent,__assign({wrappedType:"work-item-form-dialog",dependencies:["ms.vss-work-web.work-item-dialogs"]},s)),f)}var w,p,d,g;Object.defineProperty(t,"__esModule",{value:!0});t.prefetchFormModules=t.createNewWorkItem=t.showWorkItemByIdInNewTab=t.showNewWorkItemDialog=t.showWorkItemDialogById=t.showWorkItemById=t.showWorkItem=void 0;w=null;p=u.getClient().getFeatureState("ms.vss-work-web.new-boards-hub-feature","me").then(function(n){return n.state===1});t.showWorkItem=rt;t.showWorkItemById=ut;t.showWorkItemDialogById=nt;t.showNewWorkItemDialog=tt;t.showWorkItemByIdInNewTab=ft;t.createNewWorkItem=et;d=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){return null},t.prototype.componentDidMount=function(){var n=this.props,i=n.workItemTypeName,r=n.onDismiss,u=n.initialValues,t=this.props.options||{};tt(i,u,null,__assign(__assign({},t),{close:function(n){t.close&&t.close(n);r()}}))},t.componentType="createNewWorkItemDialog",t}(i.Component);f.registerLWPComponent(d.componentType,d);g=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){return null},t.prototype.componentDidMount=function(){var t=this.props,i=t.workItemId,r=t.onDismiss,n=this.props.options||{};nt(i,null,__assign(__assign({},n),{close:function(t){n.close&&n.close(t);r()}}),this.props.tryGetLatest)},t.componentType="WorkItemDialog",t}(i.Component);f.registerLWPComponent(g.componentType,g);t.prefetchFormModules=ot});

define("TFSUI/Common/Utils",["require","exports","VSS/VSS","VSS/Diag","VSS/Error"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.ErrorUtils=void 0;var f;(function(n){function t(n,t,e,o,s,h){var c=f(n),l="".concat(e,". Source:").concat(o," "),a=s?"".concat(s,". Inner error name:").concat(c.name||""):c.name||"",v=h?"".concat(h,". Inner error message:").concat(c.message||""):c.message||"";c.name=l+a;c.message=v;u.publishErrorToTelemetry(c,t)}function f(n){var t=new Error,r=i.getErrorMessage(n);return t.name=n.name?n.name:n.description?n.description:r,n.message&&(t.message=n.message),n.stack&&(t.stack=n.stack),t}n.PublishError=t})(f=t.ErrorUtils||(t.ErrorUtils={}))});

define("Agile/Scripts/Common/Utils",["require","exports","Agile/Scripts/Common/Agile","Agile/Scripts/Common/CustomerIntelligence","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/Components/WorkItemTypeIcon","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.WebSettingsService","q","TFS/Work/Contracts","TFS/Work/RestClient","VSS/Diag","VSS/Service","VSS/Telemetry/Services","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/String","VSS/Utils/UI","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Utils/TelemetryUtils","WorkItemTracking/Scripts/Utils/WorkItemTeamUtil","WorkItemTracking/SharedScripts/WorkItemDialogShim","TFSUI/Common/Utils","VSS/Service","jQueryUI/droppable"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st){function lt(){var t=$.ui.droppable.prototype._drop,n;$.ui.droppable.prototype._drop=function(){var i=$(".ui-draggable-dragging").data("isDropCancelled"),n;return typeof i=="undefined"?t.apply(this):(n=this.options.cancelDrop,this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),n)?n.apply(this.element):!1};n=$.ui.droppable.prototype._over;$.ui.droppable.prototype._over=function(){return $(".ui-draggable-dragging").removeData("isDropCancelled"),n.apply(this)};$(document).keyup(function(n){n.keyCode===tt.KeyCode.ESCAPE&&($(".ui-draggable-dragging").data("isDropCancelled",!0),$(".ui-draggable-dragging").trigger("mouseup"))})}function dt(){return!0}function gt(n,t){var i;return i=new Date(n.getTime()+n.getTimezoneOffset()*6e4),g.localeFormat(i,t,!0)}function ni(n,t){var i=t;return nt.equals(n,"all",!0)?i="all":nt.equals(n,"mine",!0)&&(i="mine"),i}var at,vt,ct,ht,yt,pt,wt,bt,kt,ti,ii;Object.defineProperty(t,"__esModule",{value:!0});t.ServiceUtils=t.TfsContextUtils=t.directoryPivotTypeFromString=t.localeFormatUTC=t.isUseNewIdentityControlsEnabled=t.TelemetryUtils=t.BacklogLevelUtils=t.TeamSettingsUtils=t.WorkItemCategoriesUtils=t.ControlUtils=t.WorkItemUtils=t.MoveToIterationHelper=t.BoardType=t.DatabaseCoreFieldRefName=t.enableDragCancelling=void 0;t.enableDragCancelling=lt,function(n){n.AssignedTo="System.AssignedTo";n.Id="System.Id";n.IterationPath="System.IterationPath";n.AreaPath="System.AreaPath";n.State="System.State";n.Title="System.Title";n.WorkItemType="System.WorkItemType";n.Tags="System.Tags";n.CreatedDate="System.CreatedDate";n.ChangedBy="System.ChangedBy";n.Parent="System.Parent"}(at=t.DatabaseCoreFieldRefName||(t.DatabaseCoreFieldRefName={})),function(n){n.Kanban="KANBAN";n.Taskboard="TASKBOARD"}(vt=t.BoardType||(t.BoardType={}));ct=function(){function n(){}return n.prototype.canMoveToIteration=function(n,t){return t?!n||n.every(function(n){return!n})?!1:!0:!1},n.prototype.canMoveToBacklog=function(n,t,i){var r,u,f,o;if(!t||!n||n.length===0||(r=e.BacklogConfigurationService.getBacklogConfiguration().getBacklogByDisplayName(i),!r||k.contains(e.BacklogConfigurationService.getBacklogConfiguration().hiddenBacklogs,r.id,nt.ignoreCaseComparer)))return!1;for(u=0,f=n;u<f.length;u++)if(o=f[u],!k.contains(r.workItemTypes,o,nt.ignoreCaseComparer)&&(!nt.equals(e.BacklogConfigurationService.getBacklogConfiguration().requirementBacklog.name,i,!0)||!k.contains(e.BacklogConfigurationService.getBacklogConfiguration().taskBacklog.workItemTypes,o,nt.ignoreCaseComparer)))return!1;return!0},n.prototype.moveToIteration=function(n,t,i){var f=this,o=Date.now(),r=null;return this._getWorkItems(n).then(function(n){return a.all(n.map(function(n){var i=function(){var i=n.getField(s.CoreField.IterationPath),u,f;return(r=i.getValue(),u=function(n){return e.BacklogConfigurationService.getBacklogConfiguration().isWorkItemTypeInRequirementBacklog(n.workItemType.name)},u(n))?ht.beginUpdateChildWorkItemsNoSave(n,!0,s.CoreField.IterationPath,t,u,ht.getShouldUpdateMethodForIterationAssignment(n,t)):(ht.setFieldValueRelative(i,t),f=i.isDirty()||nt.localeIgnoreCaseComparer(t,r)!==0,f)?a([n]):a([])};return n.project.nodesCacheManager.isNodesCacheAvailable()?i():n.project.nodesCacheManager.beginGetNodes().then(function(){return i()})}))}).then(function(e){var h=[].concat.apply([],e),s,c;return h=k.unique(h,function(n,t){return n.id-t.id}),s=a.defer(),c=f._getWorkItemStore(),c.beginSaveWorkItemsBatch(h,function(n){s.resolve(n.workItems.map(function(n){return n.id}));var u=n.workItems?k.unique(n.workItems.map(function(n){return n.workItemType.name}),nt.ignoreCaseComparer):[];f._logIterationAssignCIData(r,t,o,i,n.workItems.length,u)},function(t){var i=t.results.some(function(t){return t.error&&!k.contains(n,t.workItem.id)});i?s.reject(u.MoveUserStory_TasksUpdateIterationFailed):s.reject(u.MoveUserStory_UserStoryUpdateIterationFailed)}),s.promise})},n.prototype._logIterationAssignCIData=function(n,t,u,f,e,o){var s,h=i.BacklogContext.getInstance(),c;h&&(s=h.includeParents);c={showParents:s,PreviousIteration:n,NewIteration:t,SourcePage:f,UpdatedItems:e,UpdatedTypes:o};b.publishEvent(new b.TelemetryEventData(r.AgileCustomerIntelligenceArea.AGILE,e>1?r.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_MULTISELECT_ITERATIONASSIGNMENT:r.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_ITERATIONASSIGNMENT,c,u))},n.prototype._getWorkItems=function(n){var t=a.defer(),i=this._getWorkItemStore();return it.WorkItemManager.get(i).beginGetWorkItems(n,function(n){t.resolve(n||[])},function(n){t.reject(n)}),t.promise},n.prototype._getWorkItemStore=function(){return c.ProjectCollection.getDefaultConnection().getService(rt.WorkItemStore)},n}();t.MoveToIterationHelper=ct,function(n){function t(n,t){if(n.fieldDefinition.id===s.CoreField.AreaPath||n.fieldDefinition.id===s.CoreField.IterationPath){var r=n.workItem.project.name;n.setValue(i.ClassificationPathUtils.replaceClassificationRoot(t,r))}else n.setValue(t)}function y(n,t,i){var r=e.BacklogConfigurationService.getBacklogConfiguration().getWorkItemStateCategory(i,t);return r===e.WorkItemStateCategory.Completed?!0:!1}function w(n,t){var i=e.BacklogConfigurationService.getBacklogConfiguration().getWorkItemStatesForStateCategory(t,n);return i[0]}function b(t){for(var f=t.getLinks(),r,e,i=0,u=f.length;i<u;i+=1)if(r=f[i],$.isFunction(r.getLinkTypeEnd)&&r.getLinkTypeEnd().immutableName===n.PARENT_LINK_NAME){e=r;break}return e}function l(n){return n.toUpperCase()}function d(n,t,i){var f=c.ProjectCollection.getDefaultConnection().getService(rt.WorkItemStore),r={},e=function(n){$.each(n,function(n,t){r[l(t.name)]=t});t(r)},u=function(n){$.isFunction(i)&&i(n)};f.beginGetProject(h.TfsContext.getDefault().navigation.projectId,function(t){t.beginGetWorkItemTypes(n,e,u)},u)}function g(i,u,f,e,o,s,h,c,l){c===void 0&&(c=function(){return!0});r(i,n.CHILD_LINK_NAME,!0,o,function(n){var r=[],o;u&&c(i)&&(o=i.getField(f),t(o,e),r.push(i));n.forEach(function(n){var i=n.getField(f);i&&c(n)&&(t(i,e),r.push(n))});$.isFunction(l)&&l(r);i.store.beginSaveWorkItemsBatch(r,s,h)},h)}function tt(i,u,f,e,o,s,h){s===void 0&&(s=function(){return!0});var c=a.defer();return r(i,n.CHILD_LINK_NAME,!0,o,function(n){var r=[],o;u&&s(i)&&(o=i.getField(f),t(o,e),r.push(i));n.forEach(function(n){var i=n.getField(f);i&&s(n)&&(t(i,e),r.push(n))});$.isFunction(h)&&h(r);c.resolve(r)},function(n){c.reject(n)}),c.promise}function ut(n,t){return function(i){for(var h,f=e.BacklogConfigurationService.getBacklogConfiguration().taskBacklog.workItemTypes,r=[],u=0,o=f;u<o.length;u++)h=o[u],r=r.concat(e.BacklogConfigurationService.getBacklogConfiguration().getWorkItemStatesForStateCategory(h,e.WorkItemStateCategory.Completed));var c=i.workItemType.name.toUpperCase(),l=k.contains(f,c,nt.ignoreCaseComparer),a=l&&!k.contains(r,i.getState(),nt.localeIgnoreCaseComparer);return(a||i.id===n.id)&&nt.localeIgnoreCaseComparer(t,i.getFieldValue(s.CoreField.IterationPath))!==0}}function r(n,t,i,r,u,f){function h(n){var c=function(n){var t=$.isFunction(r)&&r(n);t||(o.push(n),i&&h(n));e-=1;e===0&&u(o)};e++;n.getLinks().filter(function(n){return n instanceof rt.WorkItemLink}).forEach(function(n){n.getLinkTypeEnd().immutableName===t&&(e+=1,it.WorkItemManager.get(s).beginGetWorkItem(n.getTargetId(),c,f))});e--;e===0&&u(o)}var s=n.store,o=[],e=0;s.beginGetLinkTypes(function(){h(n)},f)}function v(t,i,r){return new Promise(function(e,o){var b=c.ProjectCollection.getDefaultConnection().getService(rt.WorkItemStore),w=it.WorkItemManager.get(b),h,l=0,v=!0,a=null,y;r&&(r.parenting&&(l=r.parenting.id,a=r.parenting.fields),r.useDefaultIteration!==null&&r.useDefaultIteration!==undefined&&(v=r.useDefaultIteration));y=function(i){var c,r,y;if(!h){h=i;l||(r=h,ft.beginTrySetWorkItemTeamDefaults(t,r,v).then(function(){return e(r)},o));return}if(h.id===l?(c=h,r=i):(c=i,r=h),l){if(r.addLinks([rt.WorkItemLink.create(r,n.PARENT_LINK_NAME,c.id,"",!0)]),y=r.project.id!==c.project.id,y){ft.beginTrySetWorkItemTeamDefaults(t,r,v).then(function(){var n=f(t),i=a?a.filter(function(t){var i=c.getField(t);return!(i.fieldDefinition.id===s.CoreField.AreaId||i.fieldDefinition.id===s.CoreField.IterationId||i.fieldDefinition.referenceName===n)}):[];u(c,r,i);e(r)},o);return}u(c,r,a)}e(r)};l&&w.beginGetWorkItem(l,y,function(n){o(n)},!1,null,!0);y(w.createWorkItem(i))})}function ot(n){return new Promise(function(t,i){var r=c.ProjectCollection.getDefaultConnection().getService(rt.WorkItemStore);r.beginGetProject(h.TfsContext.getDefault().navigation.projectId,function(r){r.beginGetWorkItemType(n,function(n){t(n)},function(n){i(n)})},function(n){i(n)})})}function ht(n){var t=c.ProjectCollection.getDefaultConnection().getService(i.AgileContext).getContext();t&&t.iteration&&n.setFieldValue(s.CoreField.IterationPath,t.iteration.path)}function ct(t,i,r,u,f,e,o){n.beginGetWorkItemType(i).then(function(n){v(t,n,r).then(function(n){$.isFunction(e)&&e(n);n.resetManualFieldChanges();et.showWorkItem(n,{save:u,close:o})},function(n){f(n)})},function(n){f(n)})}function u(n,t,i){for(var r,f,u=0;u<i.length;u+=1)r=t.getField(i[u]),r&&(f=n.getFieldValue(r.fieldDefinition.id),r.setValue(f))}function lt(n,t){var i,r=n.getField(t);return r&&(i=r.getValue()),i}function at(t,i){var r=!1,u=n.getWorkItemParentLink(t);if(u){if(u.linkData.ID===i)return!1;t.removeLinks([u]);r=!0}return i>0&&(t.addLinks([rt.WorkItemLink.create(t,n.PARENT_LINK_NAME,i,"")]),r=!0),r}function vt(t,i){var r=a.defer(),u=it.WorkItemManager.get(c.ProjectCollection.getDefaultConnection().getService(rt.WorkItemStore));return u.beginGetWorkItems(t,function(t){for(var f=0,e=t.length;f<e;f++)n.reparentWorkItem(t[f],i);u.store.beginSaveWorkItemsBatch(t,function(n){r.resolve(n.workItems.map(function(n){return n.id}))},function(n){r.reject(n)})},function(n){r.reject(n)}),r.promise}function yt(n){return[s.CoreFieldRefNames.IterationId,s.CoreFieldRefNames.AreaId,f(n)]}function f(n){var t=st.getService(o.TeamAwarenessService);return t.getTeamSettings(n).teamFieldName}n.CHILD_LINK_NAME="System.LinkTypes.Hierarchy-Forward";n.PARENT_LINK_NAME="System.LinkTypes.Hierarchy-Reverse";n.PARENT_LINKTYPE_ID=-2;n.CHILD_LINKTYPE_ID=2;n.setFieldValueRelative=t;n.isStateComplete=y;n.getStateValueForMetaState=w;n.getWorkItemParentLink=b;n.getKeyFromWorkItemTypeName=l;n.beginGetWorkItemTypeMap=d;n.beginUpdateChildWorkItems=g;n.beginUpdateChildWorkItemsNoSave=tt;n.getShouldUpdateMethodForIterationAssignment=ut;n.beginGetLinkedWorkItems=r;n.beginCreateWorkItem=v;n.beginGetWorkItemType=ot;n.setWorkItemIterationUsingAgileContext=ht;n.beginCreateWorkItemWithForm=ct;n.copyWorkItemFields=u;n.getFieldValueByName=lt;n.reparentWorkItem=at;n.beginReparentWorkItems=vt;n.getParentOptionFields=yt;n.getTeamFieldRefName=f}(ht=t.WorkItemUtils||(t.WorkItemUtils={})),function(n){function u(n){n.keypress(function(n){return n.keyCode>=48&&n.keyCode<=57?!0:!1});n.bind("paste",function(){var n=this.value;d.delay(this,0,function(){/^[0-9]+$/m.test(this.value)||(this.value=n)})})}function e(n,t){var u=$("<div/>").addClass("combo"),r=$("<div/>").addClass("wrap"),i=$("<input />").attr("type","text").css("width","100%");return t.id&&i.attr("id",t.id),t.disabled&&i.prop("disabled",!!t.disabled),t.className&&i.addClass(t.className),r.append(i),t.label&&r.append($("<label/>").text(t.label).addClass("hidden").attr("For",t.id)),u.append(r),n.append(u),i}function o(n){var t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=$(window).height()&&t.right<=$(window).width()}function c(){var n,t,i,r=200;return n=$("<div>").css({position:"absolute",left:-2e3,top:-2e3,width:r,overflow:"scroll"}).appendTo("body"),t=$("<div>").css({width:"100%"}).appendTo(n),i=t.outerWidth(),n.remove(),r-i}function t(n){return nt.startsWith(n,"WEF",nt.ignoreCaseComparer)&&nt.endsWith(n,"Kanban.Column.Done",nt.ignoreCaseComparer)}function i(n){return nt.startsWith(n,"WEF",nt.ignoreCaseComparer)&&nt.endsWith(n,"Kanban.Column",nt.ignoreCaseComparer)}function r(n){return nt.startsWith(n,"WEF",nt.ignoreCaseComparer)&&nt.endsWith(n,"Kanban.Lane",nt.ignoreCaseComparer)}function l(n){var u;return i(n)?u=s.CoreFieldRefNames.BoardColumn:r(n)?u=s.CoreFieldRefNames.BoardLane:t(n)&&(u=s.CoreFieldRefNames.BoardColumnDone),u}function a(n,t){var i=$("<div>"),r=h.TfsContext.getDefault().navigation.project;return f.renderWorkItemTypeIcon(i[0],n,r,{ariaAttributes:t,suppressTooltip:!0}),$(i[0].firstChild)}function v(n){n&&n.parentElement&&f.unmountWorkItemTypeIcon(n.parentElement)}function y(n,t){var i=$("<div/>").css("display","none").addClass(n),r;return $("body").append(i),r=i.css(t),i.remove(),r}n.restrictTextInputToIntegers=u;n.createTextbox=e;n.isElementInView=o;n.widthOfScrollBar=c;n.checkIfFieldReferenceNameIsForDoingDone=t;n.checkIfFieldReferenceNameIsForColumn=i;n.checkIfFieldReferenceNameIsForSwimlane=r;n.getParentFieldReferenceName=l;n.buildColorElement=a;n.disposeColorElement=v;n.getCSSPropertyValue=y}(yt=t.ControlUtils||(t.ControlUtils={})),function(n){function t(n){var t=a.defer(),i=c.ProjectCollection.getDefaultConnection().getService(rt.WorkItemStore);return i.beginGetProject(h.TfsContext.getDefault().navigation.projectId,function(i){i.beginGetVisibleWorkItemTypeNames(function(i){var r=n.filter(function(n){return k.contains(i,n,nt.localeIgnoreCaseComparer)});t.resolve(r)},function(){t.resolve(n)})},function(){t.resolve(n)}),t.promise}n.removeHiddenWorkItemTypeNames=t}(pt=t.WorkItemCategoriesUtils||(t.WorkItemCategoriesUtils={})),function(n){function i(n){var t=function(n){};try{var u=new w.VssConnection(n.contextData),i=u.getHttpClient(y.WorkHttpClient),r={projectId:n.contextData.project.id,teamId:n.currentTeam.identity.id,project:undefined,team:undefined};i.getTeamSettings(r).then(function(n){var u={backlogVisibilities:n.backlogVisibilities};i.updateTeamSettings(u,r).then(function(){},function(n){t(n)})},function(n){t(n)})}catch(f){t(f)}}function r(n){var r=[],u=c.ProjectCollection.getConnection(n).getService(o.TeamAwarenessService),i=u.getTeamSettings(n.currentTeam.identity.id);return i.previousIterations&&i.previousIterations.length>0&&(r=r.concat(t(i.previousIterations,v.TimeFrame.Past))),i.currentIteration&&(r=r.concat(t([i.currentIteration],v.TimeFrame.Current))),i.futureIterations&&i.futureIterations.length>0&&(r=r.concat(t(i.futureIterations,v.TimeFrame.Future))),r}function t(n,t){var i=[];return n.forEach(function(n){var r={attributes:{startDate:new Date(n.startDate),finishDate:new Date(n.finishDate),timeFrame:t},id:n.id,name:n.name,path:n.path,_links:null,url:null};i.push(r)}),i}function u(n){var i=c.ProjectCollection.getConnection(n).getService(o.TeamAwarenessService),t=i.getTeamSettings(n.currentTeam.identity.id);return t.weekends?t.weekends.days:[]}n.tryRefreshTeamBacklogVisibilities=i;n.getTeamIterations=r;n.getTeamWeekends=u}(wt=t.TeamSettingsUtils||(t.TeamSettingsUtils={})),function(n){function i(n){var i=e.BacklogConfigurationService.getBacklogConfiguration().getBacklogByDisplayName(n);return i?t(i.rank):null}function r(n){var i=e.BacklogConfigurationService.getBacklogConfiguration().getBacklogByWorkItemTypeName(n);return i?t(i.rank):null}function t(n){var i=e.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels(),t,r,u;if(!i||!i.length)return null;for(t=0,r=i;t<r.length;t++)if(u=r[t],u.rank<n)return u;return null}n.getDescendentBacklogLevelConfigurationForLevelName=i;n.getDescendentBacklogLevelConfigurationForWorkItemType=r}(bt=t.BacklogLevelUtils||(t.BacklogLevelUtils={})),function(n){function t(n){window.performance&&window.performance.timing&&b.publishEvent(new b.TelemetryEventData(r.AgileCustomerIntelligenceArea.AGILE,n+".Index",{},window.performance.timing.navigationStart))}function i(n,t){ut.TelemetryUtils.recordBoardFieldsUsageChange(r.AgileCustomerIntelligenceArea.AGILE,n,u(t))}function u(n){var t=new ut.TelemetryUtils.BoardFieldUsageData;return n.forEach(function(n){switch(n.id){case s.CoreField.BoardColumn:t.column=!0;break;case s.CoreField.BoardColumnDone:t.done=!0;break;case s.CoreField.BoardLane:t.lane=!0}}),t}function f(n,t,i){b.publishEvent(new b.TelemetryEventData(r.AgileCustomerIntelligenceArea.AGILE,"AnnotationSettingChanges",__assign(__assign({},t),{boardId:i,annotationRules:n})))}n.recordPageLoad=t;n.recordBoardFieldsUsageChange=i;n.recordAnnotationSettingChanges=f}(kt=t.TelemetryUtils||(t.TelemetryUtils={}));t.isUseNewIdentityControlsEnabled=dt;t.localeFormatUTC=gt;t.directoryPivotTypeFromString=ni,function(n){function t(){return h.TfsContext.getDefault().contextData.project.id}n.getProjectId=t}(ti=t.TfsContextUtils||(t.TfsContextUtils={})),function(n){function t(){var n=null,i=h.TfsContext.getDefault(),t;try{t=c.ProjectCollection.getConnection(i);n=t.getService(l.WebSettingsService)}catch(r){ot.ErrorUtils.PublishError(r,!1,"ServiceUtils","ServiceUtils.getWebSettingsSvc")}return n}n.getWebSettingsSvc=t}(ii=t.ServiceUtils||(t.ServiceUtils={}))});

define("Presentation/Scripts/TFS/TFS.FeatureLicenseService",["require","exports","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Diag","VSS/Service","VSS/Utils/Core"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.FeatureLicenseService=void 0;var s=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._licenses=o.parseJsonIsland($(document),".feature-licenses",!1),t}return __extends(t,n),t.getDefaultService=function(){return e.getApplicationService(t)},t.isFeatureActive=function(n){return this.getDefaultService(u.TfsContext.getDefault()).getFeatureState(n)>=r.FeatureMode.Trial},t.prototype.getFeatureState=function(n){return this._licenses&&this._licenses[n.toLowerCase()]},t}(i.TfsService);t.FeatureLicenseService=s});

define("Presentation/Scripts/TFS/TFS.Configurations.Constants",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.RegistrationIds=t.Actions=void 0;i=function(){function n(){}return n.LAUNCH_COMMON_CONFIGURATION="launch-common-configuration",n.CLOSE_COMMON_CONFIGURATION="close-common-configuration",n}();t.Actions=i;r=function(){function n(){}return n.COMMON_CONFIG_SETTING_INSTANCE_ID="af585f7e-3a58-4826-b1c6-b080bd1eaea2",n}();t.RegistrationIds=r});

define("WorkItemTracking/Scripts/WorkShortcutGroup",["require","exports","TfsCommon/Scripts/KeyboardShortcuts","VSS/Controls/Navigation","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSSUI/Utilities/HubViewState"],function(n,t,i,r,u,f,e){var s,h,o;Object.defineProperty(t,"__esModule",{value:!0});t.KeyboardShortcuts=t.WorkHubShortcutGroup=t.WorkShortcutGroup=void 0;s=function(n){function t(t){var r=n.call(this,f.KeyboardShortcutGroup_Work)||this;return r.registerPageNavigationShortcut(o.OpenWorkItems,{description:f.KeyboardShortcutDescription_OpenWorkItems,action:function(){r.navigateToAction("","workitems")}},i.ShortcutVisibility.Member),r.registerPageNavigationShortcut(o.OpenBacklog,{description:f.KeyboardShortcutDescription_OpenBacklog,action:function(){r._navigateToBacklog()}},i.ShortcutVisibility.Member),r.registerPageNavigationShortcut(o.OpenBoard,{description:u.KeyboardShortcutDescription_OpenBoard,action:function(){r._navigateToBoard()}},i.ShortcutVisibility.Member),r.registerPageNavigationShortcut(o.OpenCurrentIteration,{description:f.KeyboardShortcutDescription_OpenCurrentIteration,action:function(){r._navigateToIteration()}},i.ShortcutVisibility.Member),r.registerPageNavigationShortcut(o.OpenTaskboard,{description:f.KeyboardShortcutDescription_OpenTaskBoard,action:function(){return r.navigateToAction("taskboard","backlogs")}},i.ShortcutVisibility.Member),r.registerPageNavigationShortcut(o.OpenQueries,{description:u.KeyboardShortcutDescription_OpenQueries,action:function(){return r.navigateToAction("","queries")}},i.ShortcutVisibility.Member),t||r.registerShortcut(o.ToggleFullScreen,{description:f.KeyboardShortcutDescription_ToggleFullScreen,action:function(){return r._toggleFullScreen()}}),r}return __extends(t,n),t.prototype._navigateToIteration=function(){this.navigateToAction("iteration","backlogs")},t.prototype._toggleFullScreen=function(){r.FullScreenHelper.setFullScreen(!r.FullScreenHelper.getFullScreen())},t.prototype._navigateToBacklog=function(){this.navigateToAction("backlog","backlogs")},t.prototype._navigateToBoard=function(){this.navigateToAction("board","backlogs")},t}(i.ShortcutGroupDefinition);t.WorkShortcutGroup=s;h=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.viewState=t,i}return __extends(t,n),t.prototype._toggleFullScreen=function(){var n=this.viewState.viewOptions.getViewOption(e.HubViewOptionKeys.fullScreen);this.viewState.viewOptions.setViewOption(e.HubViewOptionKeys.fullScreen,!n)},t}(s);t.WorkHubShortcutGroup=h,function(n){n.OpenWorkItems="w";n.OpenBacklog="l";n.OpenBoard="b";n.OpenCurrentIteration="i";n.OpenTaskboard="t";n.OpenQueries="q";n.ToggleFullScreen="z"}(o=t.KeyboardShortcuts||(t.KeyboardShortcuts={}))});

define("Agile/Scripts/SprintsHub/Common/SprintsNavigationSettingsService",["require","exports","Agile/Scripts/Generated/HubConstants","VSS/Error","VSS/Service","VSS/Settings/Services","Presentation/Scripts/TFS/Generated/TFS.WebApi.Constants","VSSPreview/Utilities/PromiseUtils"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.SprintsNavigationSettingsService=void 0;var s=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._pendingOperations={},i._navigationSettings=t?t:i._getInitialSettings(),i}return __extends(t,n),Object.defineProperty(t.prototype,"directoryPivot",{get:function(){return this._getNavigationSetting("directoryPivot")},set:function(n){this._setEntryForUser("directoryPivot",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentPivot",{get:function(){return this._getNavigationSetting("contentPivot")},set:function(n){this._setEntryForUser("contentPivot",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iterationId",{get:function(){return this._getNavigationSetting("iterationId")},set:function(n){this._setEntryForUser("iterationId",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentPivotSettings",{get:function(){var n=this._getDefaultPivotSettings(),t=this._getNavigationSetting("pivotSettings"),i=t?t[this.contentPivot]:n;return i||n},set:function(n){var t,i=this._getNavigationSetting("pivotSettings");this._setEntryForUser("pivotSettings",__assign(__assign({},i),(t={},t[this.contentPivot]=n,t)))},enumerable:!1,configurable:!0}),t.prototype.setValues=function(n){return this._navigationSettings=__assign(__assign({},this._navigationSettings),n),this._storeSettings(n)},t.prototype._getInitialSettings=function(){return{contentPivot:this._readSetting(this._getSettingsKey("contentPivot")),directoryPivot:this._readSetting(this._getSettingsKey("directoryPivot")),iterationId:this._readSetting(this._getSettingsKey("iterationId")),pivotSettings:this._readSetting(this._getSettingsKey("pivotSettings"))}},t.prototype._getNavigationSetting=function(n){return this._navigationSettings[n]},t.prototype._setEntryForUser=function(n,t){var i;return this._navigationSettings[n]=t,this._storeSettings((i={},i[n]=t,i))},t.prototype._readSetting=function(n){var t=f.getService();return t.getEntry(n,0,e.TfsSettingsScopeNames.Project)},t.prototype._storeSettings=function(n){var t=this,i=Object.keys(n),u=function(){var s={},u;return i.forEach(function(i){s[t._getSettingsKey(i)]=n[i]}),u=o.toNativePromise(f.getService().setEntries(s,0,e.TfsSettingsScopeNames.Project,t.getWebContext().project.id)).then(null,function(n){r.publishErrorToTelemetry(new Error("Could not store settings for SprintsHub '".concat(n,"'")))}).then(function(){t._setCompleted(i)}),t._setPending(i,u),u};return this._getPendingPromise(i).then(u)},t.prototype._setPending=function(n,t){var i=this;n.forEach(function(n){i._pendingOperations[n]=t})},t.prototype._setCompleted=function(n){var t=this;n.forEach(function(n){delete t._pendingOperations[n]})},t.prototype._getPendingPromise=function(n){for(var r,t=0,i=n;t<i.length;t++)if(r=i[t],this._pendingOperations[r])return this._pendingOperations[r];return Promise.resolve()},t.prototype._getDefaultPivotSettings=function(){return{rightPanelContributionSettings:{contributionId:null,size:i.SprintsHubConstants.RIGHT_PANEL_DEFAULT_SIZE_PX}}},t.prototype._getSettingsKey=function(n){switch(n){case"contentPivot":return i.SprintsHubConstants.ContentPivotSetting;case"directoryPivot":return i.SprintsHubConstants.DirectoryPivotSetting;case"iterationId":return i.SprintsHubConstants.IterationSetting;case"pivotSettings":return i.SprintsHubConstants.PivotSettings}},t}(u.VssService);t.SprintsNavigationSettingsService=s});

define("Agile/Scripts/Common/HubUrlUtilities",["require","exports","Agile/Scripts/Generated/HubConstants","Agile/Scripts/SprintsHub/Common/SprintsNavigationSettingsService","VSS/Context","VSS/Navigation/HubsService","VSS/Navigation/NavigationHistoryService","VSS/Service","VSS/Utils/File","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h){var l,a,v,c,y;Object.defineProperty(t,"__esModule",{value:!0});t.TeamSettingUrls=t.UrlUtilities=t.BoardsUrls=t.SprintsUrls=t.BacklogsUrls=void 0,function(n){function t(n){c.navigateToHubUrl(n,i.BacklogsHubConstants.HUB_CONTRIBUTION_ID)}function r(n,t,r){var f,s=u.getDefaultWebContext(),o=(f={},f[i.AgileRouteParameters.TeamName]=n,f[i.AgileRouteParameters.Pivot]=i.BacklogsHubConstants.BacklogPivot,f[i.AgileRouteParameters.Project]=r||s.project.name,f);return t&&(o[i.AgileRouteParameters.BacklogLevel]=t),e.getNavigationHistoryService().generateUrlForRoute(i.BacklogsHubConstants.ContentRouteContributionId,o,0)}function f(n){var t,a=u.getDefaultWebContext(),h=e.getNavigationHistoryService(),c=h.getCurrentRouteValues(),l=h.getState(),o=(t={},t[i.AgileRouteParameters.Project]=a.project.name,t[i.AgileRouteParameters.TeamName]=n.teamIdOrName,t[i.AgileRouteParameters.Pivot]=n.pivot||c[i.AgileRouteParameters.Pivot],t),f,s,r;if(n.backlogLevel&&(o[i.AgileRouteParameters.BacklogLevel]=n.backlogLevel),n.preserveQueryParameters)for(f=0,s=Object.keys(l);f<s.length;f++)r=s[f],c[r]||r.toLocaleLowerCase()==="workitem"||(o[r]=l[r]);return e.getNavigationHistoryService().generateUrlForRoute(i.BacklogsHubConstants.ContentRouteContributionId,o,0)}function o(){var n,t=u.getDefaultWebContext(),r=(n={},n[i.AgileRouteParameters.Project]=t.project.name,n);return e.getNavigationHistoryService().generateUrlForRoute(i.BacklogsHubConstants.DirectoryRouteContributionId,r,0)}function s(n,t,r,f){var o,s=u.getDefaultWebContext(),h=(o={},o[i.AgileRouteParameters.Project]=s.project.name,o[i.AgileRouteParameters.TeamName]=n,o[i.AgileRouteParameters.Pivot]=t,o[i.AgileRouteParameters.BacklogLevel]=r,o[i.BacklogsHubConstants.RightPaneQueryParameter]=f,o);return e.getNavigationHistoryService().generateUrlForRoute(i.BacklogsHubConstants.ContentRouteContributionId,h,0)}n.navigateToBacklogsHubUrl=t;n.getExternalBacklogContentUrl=r;n.getBacklogContentUrl=f;n.getBacklogDirectoryUrl=o;n.getBacklogContentUrlWithRightPaneOption=s}(l=t.BacklogsUrls||(t.BacklogsUrls={})),function(n){function t(n){c.navigateToHubUrl(n,i.SprintsHubConstants.HUB_CONTRIBUTION_ID)}function f(){var n;return e.getNavigationHistoryService().generateUrlForRoute(i.SprintsHubServerConstants.DirectoryContributionRouteId,(n={},n[i.AgileRouteParameters.Project]=u.getDefaultWebContext().project.name,n),0)}function h(n,t,u){var f,h,c;return u=u||o.getService(r.SprintsNavigationSettingsService).contentPivot||i.SprintsHubRoutingConstants.TaskboardPivot,h=e.getNavigationHistoryService(),c=h.getState(),e.getNavigationHistoryService().generateUrlForRoute(i.SprintsHubServerConstants.ContributionRouteId,(f={},f[i.AgileRouteParameters.Pivot]=u,f[i.AgileRouteParameters.TeamName]=n,f[i.AgileRouteParameters.Iteration]=t?s.normalizePath(t):undefined,f[i.AgileRouteParameters.Project]=c[i.AgileRouteParameters.Project],f),0)}n.navigateToSprintsHubUrl=t;n.getSprintDirectoryUrl=f;n.getExternalSprintContentUrl=h}(a=t.SprintsUrls||(t.SprintsUrls={})),function(n){function t(n){c.navigateToHubUrl(n,i.BoardsHubConstants.HUB_CONTRIBUTION_ID)}function r(n,t,r){var u={},f;return u[i.AgileRouteParameters.TeamName]=n,u[i.AgileRouteParameters.BacklogLevel]=t,u[i.AgileRouteParameters.Pivot]=r||i.BoardsHubRoutingConstants.BoardPivot,f=e.getNavigationHistoryService().getState(),f.workitem&&(delete f.workitem,e.getNavigationHistoryService().replaceState(f)),e.getNavigationHistoryService().generateUrlForRoute(i.BoardsHubConstants.TEAM_BOARD_CONTENT_ROUTE_CONTRIBUTION_ID,u)}function f(){var n,t=u.getDefaultWebContext(),r=(n={},n[i.AgileRouteParameters.Project]=t.project.name,n);return e.getNavigationHistoryService().generateUrlForRoute(i.BoardsHubConstants.DIRECTORY_ROUTE_CONTRIBUTION_ID,r,0)}function o(n){var t,r=u.getDefaultWebContext();return e.getNavigationHistoryService().generateUrlForRoute(i.BoardsHubConstants.TEAM_BOARD_CONTENT_ROUTE_CONTRIBUTION_ID,(t={},t[i.AgileRouteParameters.Pivot]=i.BoardsHubRoutingConstants.BoardPivot,t[i.AgileRouteParameters.Project]=r.project.name,t[i.AgileRouteParameters.TeamName]=n,t),0)}n.navigateToBoardsHubUrl=t;n.getBoardsContentUrl=r;n.getBoardsDirectoryUrl=f;n.getExternalBoardContentUrl=o}(v=t.BoardsUrls||(t.BoardsUrls={})),function(n){function t(n){return h.equals(n[i.AgileRouteParameters.Pivot],"all",!0)||h.equals(n[i.AgileRouteParameters.Pivot],"mine",!0)}function r(n,t){var i=o.getLocalService(f.HubsService);i.navigateToHub(t,n)}function s(n){var t,r=u.getDefaultWebContext().project,f=(t={},t[i.AgileRouteParameters.Project]=r.name,t[i.WorkItemsConstants.WorkItemFormRouteIdParam]="".concat(n),t);return e.getNavigationHistoryService().generateUrlForRoute(i.WorkItemsConstants.WorkItemsFormContributionId,f,0)}n.isDirectoryView=t;n.navigateToHubUrl=r;n.getWorkItemEditUrl=s}(c=t.UrlUtilities||(t.UrlUtilities={})),function(n){function i(n,i,r,u){return t(i,r,u)}function r(n,t,i,r){return n.getActionUrl("","work",{area:"admin",project:t,team:i,_a:r})}function t(n,t,i){return e.getNavigationHistoryService().generateUrlForRoute("ms.vss-admin-web.project-admin-hub-route",{project:n,teamId:t,adminPivot:"work-team",_a:i})}n.getTeamIterationSettingURL=i;n.getTeamAdminURL=r;n.getTeamSettingConfigLandingURL=t}(y=t.TeamSettingUrls||(t.TeamSettingUrls={}))});

define("Agile/Scripts/Common/Controls",["require","exports","q","VSS/Contributions/Services","VSS/Controls","VSS/Controls/CheckboxList","VSS/Controls/Combos","VSS/Controls/Dialogs","VSS/Controls/Notifications","VSS/Controls/PopupContent","VSS/Controls/Validation","VSS/Diag","VSS/Controls/Menus","VSS/Controls/TreeView","VSS/Events/Action","VSS/Events/Services","VSS/Performance","VSS/Service","VSS/Telemetry/Services","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/String","VSS/Utils/UI","VSS/Utils/Url","VSS/VSS","VSS/FeatureAvailability/Services","VSS/Navigation/Location","TfsCommon/Scripts/KeyboardShortcuts","Agile/Scripts/Backlog/ProductBacklogMru","Agile/Scripts/Common/Agile","Agile/Scripts/Common/IterationDateUtil","Agile/Scripts/Common/Utils","Agile/Scripts/Common/CustomerIntelligence","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Agile/Scripts/Resources/TFS.Resources.AgileControls","Agile/Scripts/Generated/HubConstants","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.FeatureLicenseService","Presentation/Scripts/TFS/TFS.Configurations.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/WorkShortcutGroup","VSSUI/Utilities/HubViewState","VSS/Context","TFS/Work/RestClient","../Common/HubUrlUtilities"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci){var ur,ki,fr,er,ai,di,gi,nr,tr,or,vi,pi,wi,ir,sr,hr,bi;Object.defineProperty(t,"__esModule",{value:!0});t.ContributableTabConstants=t.FilterControls=t.CommonSettingsConfigurationControl=t.BacklogViewControl=t.BacklogTreeNode=t.SprintTreeNode=t.BacklogViewControlModel=t.CumulativeFlowSettingsControl=t.CumulativeFlowStartDateValidator=t.CumulativeFlowChartControl=t.VelocityChartControl=t.BurndownChartControl=t.ChartControl=t.AddNewItemControl=t.SprintViewControl=t.AgileHubShortcutGroup=t.AgileShortcutGroup=void 0;var yi=g.delegate,li=it.domElem,rr=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype._navigateToBacklog=function(){var n=ht.BacklogContext.getInstance(),t={level:n.level.name,showParents:st.ShowParents.getMRUState()};this.navigateToUrl(ht.LinkHelpers.getAsyncBacklogLink(vi.backlogPageAction,t))},t.prototype._navigateToBoard=function(){this.navigateToUrl(ht.LinkHelpers.generateBacklogLink(vi.boardPageAction))},t}(ei.WorkShortcutGroup);t.AgileShortcutGroup=rr;ur=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._viewOptions=t,i._unregisterShortcutsNotSupportedinXHR(),i}return __extends(t,n),t.prototype._navigateToBacklog=function(){ci.BacklogsUrls.navigateToBacklogsHubUrl(ci.BacklogsUrls.getExternalBacklogContentUrl(this._viewOptions.getViewOption(pt.AgileRouteParameters.TeamName)))},t.prototype._navigateToBoard=function(){ci.BoardsUrls.navigateToBoardsHubUrl(ci.BoardsUrls.getBoardsContentUrl(this._viewOptions.getViewOption(pt.AgileRouteParameters.TeamName)))},t.prototype._navigateToIteration=function(){ci.SprintsUrls.navigateToSprintsHubUrl(ci.SprintsUrls.getExternalSprintContentUrl(this._viewOptions.getViewOption(pt.AgileRouteParameters.TeamName)))},t.prototype._toggleFullScreen=function(){var n=this._viewOptions.getViewOption(oi.HubViewOptionKeys.fullScreen);this._viewOptions.setViewOption(oi.HubViewOptionKeys.fullScreen,!n)},t.prototype._unregisterShortcutsNotSupportedinXHR=function(){var n=this,t=[ei.KeyboardShortcuts.OpenTaskboard];t.map(function(t){return n.unRegisterShortcut(t)})},t}(ei.WorkShortcutGroup);t.AgileHubShortcutGroup=ur;ki=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._sentCollapseFutureSprintCI=!1,i}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;t.droppable=$.extend({accept:function(n){return i._acceptDroppableHandler(this,n)}},t.droppable);n.prototype.initializeOptions.call(this,$.extend({useBowtieStyle:!0,clickToggles:!0,useArrowKeysForNavigation:!0,onItemToggle:this.onClickTreeNodeCollectCI},t))},t.prototype.isValidDropTargetForWorkItemTypes=function(n,t,i){var r=this.getNodeFromElement(n),u,f;return r?(u=new lt.MoveToIterationHelper,r instanceof pi)?u.canMoveToIteration(t,i):r instanceof wi?(f=r.backlogNodeInfo,u.canMoveToBacklog(t,i,f.name)):!1:!1},t.prototype._acceptDroppableHandler=function(n,t){var i=t.data(ht.DataKeys.DataKeyId),r=t.data(ht.DataKeys.DataKeyType);return i<=0?!1:this.isValidDropTargetForWorkItemTypes($(n),[r],!0)},t.prototype.initialize=function(){var t=this,i=this._options.tfsContext,u=g.parseMSJSON($(".sprint-data",this._element).html(),!1),f=ii.ProjectCollection.getConnection(i).getService(bt.TeamAwarenessService);this.populate(f.getTeamSettings(i.currentTeam.identity.id),u.selectedIteration,u.actionName);n.prototype.initialize.call(this);g.delay(this,0,function(){t._fixHeight()});this._bind(window,"resize",yi(this,this._fixHeight));p.getService().attachEvent(s.MessageAreaControl.EVENT_DISPLAY_CLEARED,function(){t._fixHeight()});p.getService().attachEvent(bi.EVENT_AGILE_CONTRIBUTED_TAB_SELECTED,function(n){var u=b.getService(r.ExtensionService);u.getContribution(n.contributionId).then(function(r){r.targets.some(function(n){return n==="ms.vss-work-web.iteration-backlog-tabs"})&&(t._updateLinkToIncludeContribution(i,t.rootNode,n),t._draw())})});new rr},t.prototype._updateLinkToIncludeContribution=function(n,t,i){var r,u,f;if(t.hasChildren()||t.isEmptyFolderChildNode||t.root||(r=n.getActionUrl("iterationcontributions","backlogs",{parameters:t.iterationPath}),r=rt.replaceUrlParam(r,"contributionId",i.contributionId),r=rt.replaceUrlParam(r,"_a","contribution"),t.link=rt.replaceUrlParam(r,"spv",""+i.selectedPivot)),t.hasChildren())for(u=0,f=t.children.length;u<f;++u)this._updateLinkToIncludeContribution(n,t.children[u],i)},t.prototype.reconfigure=function(){this._draw()},t.prototype.populate=function(n,t,i){function o(n){var f=tt.format(yt.IterationPathTooltip,n.friendlyPath);if(n.startDate&&n.finishDate){var s=nt.shiftToUTC(new Date(n.startDate)),h=nt.shiftToUTC(new Date(n.finishDate)),c=ct.IterationDateUtil.getSprintDatesDisplay(s,h);f=f+tt.newLine+c}var o=n.friendlyPath.split("\\"),l=o[o.length-1],u=new pi(l);return u.droppable=!0,u.iterationPath=n.friendlyPath,u.link=ht.LinkHelpers.generateIterationLink(i,n.friendlyPath,e),u.title=f,t===n.friendlyPath&&(u.selected=!0,r._selectedNode=u,r._expandNodeParents(u),r._updateSelections()),u}function u(n,t,i){var f,s,e,u=v.TreeNode.create(n);if(t.length!==0){for(f=0,s=t.length;f<s;f+=1)e=o(t[f]),u.add(e),i=i||e.selected;u.expanded=i;u.config.unselectable=!0;u.folder=!0;r.rootNode.add(u)}}var r=this,e=n.backlogIteration.friendlyPath,f=[];this.rootNode.clear();n.currentIteration&&f.push(n.currentIteration);u(vt.SprintHeader_Past,n.previousIterations||[],!1);u(vt.SprintHeader_Current,f,!0);u(vt.SprintHeader_Future,n.futureIterations||[],!0)},t.prototype.onItemClick=function(t,i,r){this.onClickTreeNodeCollectCI(t);var u=n.prototype.onItemClick.call(this,t,i,r);return t&&t.folder&&r.preventDefault(),u},t.prototype.setSelectedNode=function(){},t.prototype._fixHeight=function(){var n=this.getElement(),t=0,i=n.parent().height();n.siblings(":visible").each(function(){t+=$(this).outerHeight(!0)});n.height(i-t)},t.prototype.onClickTreeNodeCollectCI=function(n){n&&(n.folder?n.text!==vt.SprintHeader_Future||n.expanded!==!0||this._sentCollapseFutureSprintCI||(this._sentCollapseFutureSprintCI=!0,k.publishEvent(new k.TelemetryEventData(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_ITERATION_COLLAPSE_FUTURE_LIST,{}))):n.parent&&n.parent.children&&n.parent.children.length>0&&(n.parent.text===vt.SprintHeader_Past&&n.parent.children[n.parent.children.length-1]===n&&k.publishEvent(new k.TelemetryEventData(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_ITERATION_CLICK_PREVIOUS_ITERATION,{})),n.parent.text===vt.SprintHeader_Future&&n.parent.children[0]===n&&k.publishEvent(new k.TelemetryEventData(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_ITERATION_CLICK_NEXT_ITERATION,{}))))},t}(v.TreeView);t.SprintViewControl=ki;ut.classExtend(ki,ti.TfsContext.ControlExtensions);fr=function(n){function t(t,i,r){var u=__construct(this,n,[i]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u.registerShortcut("n",{description:yt.KeyboardShortcutkeyDescription_AddNewItem,action:function(){t.expandPopupAndSelectDefaultMenuItem();$.isFunction(r)&&r()}}),u}return __extends(t,n),t}(ot.ShortcutGroupDefinition);er=function(n){function t(t){var i=this,r;i=__construct(this,n,[t]);for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._itemTypes=t.itemTypes,i._addNewItem=t.addNewItem,i._debounceTime=t.debounceTime,i._displayText=t.displayText,i._iconRenderer=t.iconRenderer,i._addIconCssClass=t.addIconCssClass||"bowtie-icon bowtie-math-plus-box-light",i._options.popupMenuAlign=i._options.popupMenuAlign||"left-bottom",i._disableAddNewHandler=t.disableAddNewHandler,i._enableKeyboardShortcut=t.enableKeyboardShortcut,i._groupName=t.groupName,i._callback=t.callback,i._firstItemType=t.itemTypes.length>0?t.itemTypes[0]:null,i}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass,tagName:t.tagName},i))},t.prototype.initialize=function(){var i=this,n=this.getElement();n.attr({tabindex:0,role:"button"});n.append($(li("div",this._addIconCssClass)));n.append($(li("span",t.displayTextCssClass)).text(this._displayText));$.isFunction(this._options.itemTypesFilterCallback)?this._options.itemTypesFilterCallback(this._itemTypes).then(function(t){i._itemTypes=t;i._createTooltipAndMenuItems(n,t)}):this._createTooltipAndMenuItems(n,this._itemTypes);this._enableKeyboardShortcut===!0&&(this._addNewItemShortcutGroup=new fr(this,this._groupName,this._callback))},t.prototype.expandPopupAndSelectDefaultMenuItem=function(){this.getElement().click();this._focusDefaultMenuItem()},t.prototype._focusDefaultMenuItem=function(){if(this._menuItem){var n=".menu-item";this._firstItemType&&(n+=" li[id*='".concat(this._firstItemType,"']"));this._menuItem.getElement().find(n).focus()}},t.prototype._createTooltipAndMenuItems=function(n,t){var i=this;t.length>1&&n.attr("aria-haspopup","true");n.bind("click.TFS.Agile",function(n){i._clickHandler(n)}).bind("keydown.TFS.Agile",function(n){if(n.keyCode===it.KeyCode.ENTER||n.keyCode===it.KeyCode.SPACE)return $(n.currentTarget).click(),i._focusDefaultMenuItem(),!1})},t.prototype.dispose=function(){this._addNewItemShortcutGroup&&this._addNewItemShortcutGroup.removeShortcutGroup();this._menuItem&&this._menuItem.dispose();n.prototype.dispose.call(this)},t.prototype._clickHandler=function(n){var t=this._itemTypes;$.isFunction(this._disableAddNewHandler)&&this._disableAddNewHandler()||(t.length>1?(this._menuItem||(this._menuItem=this._createPopupMenu(t)),this._menuItem.popup($(n.currentTarget),$(n.currentTarget))):this._debounceAddNewItem(t[0]))},t.prototype._debounceAddNewItem=function(n){var t=this;this._addNewItemTimeout||(this._debounceTime&&(this._addNewItemTimeout=setTimeout(function(){clearTimeout(t._addNewItemTimeout);t._addNewItemTimeout=null},this._debounceTime)),this._addNewItem(n))},t.prototype._createMenuItems=function(n,i){var r=this;return $.map(n,function(n){var u={id:"add-"+n,text:n,arguments:{itemType:n},action:i};return r._iconRenderer&&$.isFunction(r._iconRenderer)&&$.extend(u,{icon:function(i){var f=r._iconRenderer(n,{labelledby:u.id});return f&&f.addClass(t.iconCssClass),i&&i.addClass(t.iconElementCssClass),f}}),u})},t.prototype._createPopupMenu=function(n){var t=this,i=function(n){return t._addNewItem(n.itemType)},r=this._createMenuItems(n,i),f={align:this._options.popupMenuAlign,items:[{childItems:r}],onHide:this._onHide};return this._menuItem=u.BaseControl.createIn(a.PopupMenu,$(document.body),f),this._menuItem},t.coreCssClass="add-new-item",t.iconCssClass="add-item-icon",t.iconElementCssClass="add-item-icon-element",t.tagName="div",t.displayTextCssClass="text",t}(u.Control);t.AddNewItemControl=er;ai=function(n){function t(t){var i=__construct(this,n,[t]),r,u;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._workItemChangedDelegate=yi(i,i._workItemChanged),u=si.getDefaultWebContext(),i._projectId=u.project.id,i._teamId=t.teamId,i}return __extends(t,n),t.prototype.initialize=function(){l.logTracePoint("ChatBurndown.initialize.start");var t=this._options.errors,i=t&&t.length>0;i?this._drawErrorLayout(t):this._drawLayout();n.prototype.initialize.call(this);l.logTracePoint("ChatBurndown.initialize.complete")},t.prototype.refresh=function(n){var t,i;if(n===void 0&&(n=!1),this._requestInProgress?this._requestPending=!0:(l.logTracePoint("Chart_"+this._options.action+".refresh.start"),t=Math.round(this.getElement().width()),i=Math.round(this.getElement().height()-this._titleHeight),this._requestInProgress=!0,this._requestPending=!1,this._$image.attr("src",this._buildUrl(t,i,!1,!1))),n&&this._$largeImage){var r=$(window),u=r.width(),f=r.height(),e=Math.floor(u*65/100),o=Math.floor(f*65/100);this._$largeImage.attr("src",this._buildUrl(e,o,!0,!0))}},t.prototype.showLarge=function(){var n=this,e,c;l.logTracePoint("Chart_"+this._options.action+"._showLarge.start");var i=$("<div />"),y=$("<div />").appendTo(i),r=$("<div />"),p=$(window),w=p.width(),b=p.height(),f=Math.floor(w*65/100),a=Math.floor(b*65/100),k=this._buildUrl(f,a,!0,!0),t=this._createImageElement(a,f);if(t.attr("src",k),t.attr("alt",this._getAltText()),t.hide().bind("load",function(){r.removeClass("in-progress-container");t.show();l.logTracePoint("Chart_"+n._options.action+".largeImageLoad.complete")}).bind("error",function(){r.removeClass("in-progress-container");y.text(n._getGenericErrorMessage())}),r.height(a).width(f).addClass("large-chart-container").addClass("in-progress-container"),e=$("<div/>"),c=$("<span/>").addClass("large-chart-bubble-container large-chart-bubble-target"),c.text(yt.HowToReadThisChart),h.RichContentTooltip.add(this.getHoverElement(),c,{openCloseOnHover:!1,elementAlign:"left-top"}),e.append(c),this._options.showEllipsisMenuBar){var v=$("<button />").addClass("edit-large-chart-button").css("position","absolute").css("padding-top","2px").attr("aria-label",yt.EditButtonText).bind("click",function(){return n._options.onEditClick()}),d=$("<span/>").addClass("edit-large-chart-icon icon clickable bowtie-icon bowtie-edit"),g=$("<span/>").append(yt.EditButtonText).addClass("edit-large-chart-link");v.append(d);v.append(g);e.append(v)}i.append(e);r.append(t);i.append(r);this._$largeImage=t;this._largeChart=o.show(o.ModalDialog,{content:i,width:f+52+"px",height:"auto",resizable:!1,buttons:[],title:this._options.title,useBowtieStyle:!0,bowtieVersion:2,close:function(){n._largeChart=null;$(document).unbind("click.tfs.agile.chart")},open:function(){i.parent().click(function(){return!1});$(document).bind("click.tfs.agile.chart",function(t){t.which===1&&n._largeChart&&n._allowClose()&&n._largeChart.close()})}});u.BaseControl.createIn(s.MessageAreaControl,y,{closeable:!1});this._largeChart.getElement().parent().focus();this._publishLargeChartView()},t.prototype.skipRefreshOnSave=function(){return!1},t.prototype._$getErrorImageClassName=function(){return""},t.prototype._allowClose=function(){return!0},t.prototype._publishLargeChartView=function(){k.publishEvent(new k.TelemetryEventData(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_SHOW_LARGE_LEGACY_CHART,{chartType:this._chartType}))},t.prototype._drawErrorLayout=function(n){this._options.showTitle&&$("<div/>").addClass("sprint-summary-tile-sprint-name").addClass("burndown-tile-sprint-name").text(this._options.showTitle).appendTo(this._element);this._$image=this._getErrorImage(n);this._element.append(this._$image)},t.prototype._drawLayout=function(){var n=this,t;l.logTracePoint("Chart_"+this._options.action+"._drawLayout.start");this._options.showTitle&&(t=$("<div/>").addClass("sprint-summary-tile-sprint-name").addClass("burndown-tile-sprint-name").addClass("clickable").attr("role","button").text(this._options.showTitle).appendTo(this._element).click(function(){return n.showLarge(),!1}),this._titleHeight=t.outerHeight(!0));this._$image=this._createImageElement(this._element.height()-this._titleHeight,this._element.width());this._$image.attr("tabIndex",0);this._$image.attr("alt",this._getAltText());this._$image.addClass("clickable").attr("role","button").click(function(){return n.showLarge(),!1}).hide().keypress(function(t){if(t.result!==!1&&(t.keyCode===it.KeyCode.ENTER||t.keyCode===it.KeyCode.SPACE))return n.showLarge(),!1}).bind("error",function(){var i=n._getGenericErrorMessage(),t;n._$image=n._getErrorImage(i).addClass("clickable").click(function(){return n.showLarge(),!1});t=n.getElement();t.append(n._$image);t.attr("title","")}).load(function(){var t,i,r;n._$image.show();n._requestInProgress=!1;n._requestPending&&n.refresh();t=n.getElement();i=t.attr("title");i&&(h.RichContentTooltip.add(i,t,{setAriaDescribedBy:!0}),t.attr("title",""));r=si.getPageContext();r&&r.diagnostics&&!!r.diagnostics.debugMode&&console.log("Chart: ".concat(i," Loaded."));l.logTracePoint("Chart_"+n._options.action+".smallImageLoad.complete")});this._element.append(this._$image);this.refresh();this.attachEvents()},t.prototype._getErrorImage=function(n){var t=$("<img/>").attr("src",this._options.tfsContext.configuration.getResourcesFile("empty-chart-placeholder.png")).attr("alt",n).addClass(this._$getErrorImageClassName());return h.RichContentTooltip.add(n,t,{setAriaDescribedBy:!0}),t},t.prototype._workItemChanged=function(n,t){t.change!==ri.WorkItemChangeType.Saved||this.skipRefreshOnSave(t.workItem)||this.refresh()},t.prototype.attachEvents=function(){var n=ii.ProjectCollection.getConnection(this._options.tfsContext).getService(fi.WorkItemStore);ui.WorkItemManager.get(n).attachWorkItemChanged(this._workItemChangedDelegate)},t.prototype.detachEvents=function(){var n=ii.ProjectCollection.getConnection(this._options.tfsContext).getService(fi.WorkItemStore);ui.WorkItemManager.get(n).detachWorkItemChanged(this._workItemChangedDelegate)},t.prototype._buildUrl=function(n,t,i,r){return((n<=0||t<=0)&&(n<=0,t<=0),this._counter+=1,ft.FeatureAvailabilityService.isFeatureEnabled("WebAccess.Agile.DisableBoardChartImagesRestApi"))?this._buildMVCUrl(n,t,i,r,this._counter):this._buildRESTUrl(n,t,i,this._counter)},t.prototype._buildMVCUrl=function(n,t,i,r,u){var e={Width:n,Height:t,ShowDetails:i,Title:""},f=null;return f=$.extend({area:"api",chartOptions:g.stringifyMSJSON(e),counter:u,includeVersion:!0,teamId:this._options.teamId},this._$getParameters(r)),this._options.tfsContext.getActionUrl(this._options.action,"teamChart",f)},t.prototype._createImageElement=function(n,t){return $("<img/>").attr("width",t).attr("height",n)},t.prototype.dispose=function(){this.detachEvents();n.prototype.dispose.call(this);this._$largeImage=null;this._largeChart=null},t.prototype.generateHoverContent=function(n,t){var i=$("<div />").addClass("large-chart-bubble-container"),r=$("<p />").addClass("large-chart-bubble-header"),u=$("<p />");return r.text(yt.HowToReadThisChart),u.text(n),i.append(r),i.append(u),$.each(t,function(n,t){var r=$("<p />").addClass("large-chart-bubble-entry");r.text(t);i.append(r)}),i},t.enhancementTypeName="tfs.agile.chart",t}(u.BaseControl);t.ChartControl=ai;ut.classExtend(ai,ti.TfsContext.ControlExtensions);ut.initClassPrototype(ai,{_$image:null,_counter:0,_largeChart:null,_requestInProgress:!1,_requestPending:!1,_titleHeight:0});di=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.iterationChartImageRouteContributionId="ms.vss-work-web.iteration-chart-image-route",i.burndownChartName="burndown",i._iterationId=t.iterationId,i._chartType=i.burndownChartName,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({action:"Burndown"},t))},t.prototype._$getParameters=function(){return{iterationPath:this._options.iterationPath}},t.prototype._getAltText=function(){return yt.Burndownchart_AltText},t.prototype._$getErrorImageClassName=function(){return"burndown-chart-error-image"},t.prototype.skipRefreshOnSave=function(n){var t,i,r;if(n.revision===1)if(t=wt.BacklogConfigurationService.getBacklogFieldName(wt.BacklogFieldTypes.RemainingWork),t){if(i=n.getField(t),i&&(r=i.getValue(),!r||r<=0))return!0}else return!0;return!1},t.prototype._getGenericErrorMessage=function(){return yt.GenericBurndownErrorMessage},t.prototype.getHoverElement=function(){return n.prototype.generateHoverContent.call(this,yt.BurndownChartConent,[yt.BurndownChartOnTrack,yt.BurndownChartScopeCreep])},t.prototype._buildRESTUrl=function(n,t,i,r){return b.getLocalService(et.LocationService).routeUrl(this.iterationChartImageRouteContributionId,{project:this._projectId,team:this._teamId,iterationId:this._iterationId,name:this.burndownChartName,width:n.toString(),height:t.toString(),showDetails:i.toString(),counter:r.toString()})},t.enhancementTypeName="tfs.agile.chart.burndown",t}(ai);t.BurndownChartControl=di;gi=function(n){function t(t){var i=__construct(this,n,[t]),r,u,f;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.iterationsChartImageRouteContributionId="ms.vss-work-web.iterations-chart-image-route",i.velocityChartName="velocity",i._iterationsNumber=t.iterationsNumber,u=ii.ProjectCollection.getDefaultConnection().getService(bt.TeamAwarenessService),f=u.getTeamSettings(t.teamId),i._backlogIterationPath=f.backlogIteration.friendlyPath,i._chartType=i.velocityChartName,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({action:"Velocity"},t))},t.prototype.setIterationsNumber=function(n){this._iterationsNumber=n},t.prototype.skipRefreshOnSave=function(n){var t,i;return n.revision===1&&(t=n.getField(lt.DatabaseCoreFieldRefName.IterationPath),t&&((i=t.getValue(),!i)||tt.ignoreCaseComparer(i.valueOf(),this._backlogIterationPath)===0))?!0:!1},t.prototype._getGenericErrorMessage=function(){return yt.GenericVelocityErrorMessage},t.prototype._$getParameters=function(){return{iterationsNumber:this._iterationsNumber}},t.prototype._getAltText=function(){return yt.Velocitychart_AltText},t.prototype._$getErrorImageClassName=function(){return"velocity-chart-error-image"},t.prototype.getHoverElement=function(){return n.prototype.generateHoverContent.call(this,yt.VelocityChartConent,[yt.VelocityChartAverage,yt.VelocityChartDelivery])},t.prototype._buildRESTUrl=function(n,t,i,r){return b.getLocalService(et.LocationService).routeUrl(this.iterationsChartImageRouteContributionId,{project:this._projectId,team:this._teamId,name:this.velocityChartName,iterationsNumber:this._iterationsNumber.toString(),width:n.toString(),height:t.toString(),showDetails:i.toString(),counter:r.toString()})},t.enhancementTypeName="tfs.agile.chart.velocity",t}(ai);t.VelocityChartControl=gi;nr=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.boardChartImageRouteContributionId="ms.vss-work-web.board-chart-image-route",i.cumulativeFlowChartName="cumulativeflow",i._isSettingsDialog=!1,i._backlogLevelId=t.backlogLevelId,i._showIncoming=!t.hideIncoming,i._chartType=i.cumulativeFlowChartName,i}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({action:"CumulativeFlow",showEllipsisMenuBar:!0,onEditClick:function(){return i._onEditClick()}},t))},t.prototype.setShowIncoming=function(n){this._showIncoming=n},t.prototype.setBacklogLevelId=function(n){this._backlogLevelId=n},t.prototype.skipRefreshOnSave=function(n){return n.revision===1&&!this._showIncoming?!0:!1},t.prototype._$getParameters=function(){return{hubCategoryRefName:this._backlogLevelId}},t.prototype._getAltText=function(){return yt.Cumulativechart_AltText},t.prototype._getGenericErrorMessage=function(){return yt.GenericCumulativeErrorMessage},t.prototype._$getErrorImageClassName=function(){return"cumulative-flow-chart-error-image"},t.prototype._allowClose=function(){return!this._isSettingsDialog},t.prototype._onEditClick=function(){var n=this;this._isSettingsDialog=!0;y.getService().performAction(ni.Actions.LAUNCH_COMMON_CONFIGURATION,{defaultTabId:ht.TabControlsRegistrationConstants.CFD_TAB_ID,close:function(){g.delay(n,0,function(){n._isSettingsDialog=!1})}});this._recordCommonConfigDialogTelemetry()},t.prototype._recordCommonConfigDialogTelemetry=function(){k.publishEvent(new k.TelemetryEventData(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_COMMON_CONFIG_DIALOG_OPENED,{Page:ht.AgileCustomerIntelligenceConstants.CFD_VIEW}))},t.prototype.getHoverElement=function(){return n.prototype.generateHoverContent.call(this,yt.CfdChartConent,[yt.CfdChartBottleneck,yt.CfdChartDelivery])},t.prototype._buildRESTUrl=function(n,t,i,r){return b.getLocalService(et.LocationService).routeUrl(this.boardChartImageRouteContributionId,{project:this._projectId,team:this._teamId,board:this._backlogLevelId,name:this.cumulativeFlowChartName,width:n.toString(),height:t.toString(),showDetails:i.toString(),counter:r.toString()})},t.enhancementTypeName="tfs.agile.chart.cumulativeflow",t}(ai);t.CumulativeFlowChartControl=nr;tr=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t)},t.prototype.isValid=function(){var i,t,n,r;if(this._message=null,i=$.trim(this.getValue()),i){if(t=nt.parseLocale(i),!(t instanceof Date)||isNaN(t))return this._message=tt.format(yt.CumulativeFlowSettingsInvalidDate,nt.localeFormat(new Date((new Date).getFullYear(),11,31),"d",!0)),!1;if(n=new Date,n.setHours(0,0,0,0),n.setDate(n.getDate()-217),n.getTime()-t.getTime()>0)return this._message=tt.format(yt.CumulativeFlowSettingsEarlyDate,nt.localeFormat(n,"d",!0)),!1;if(r=new Date,r.setHours(0,0,0,0),r.getTime()-t.getTime()<0)return this._message=yt.CumulativeFlowSettingsFutureDate,!1}return!0},t.prototype.getMessage=function(){return this._message},t}(c.BaseValidator);t.CumulativeFlowStartDateValidator=tr;or=function(n){function t(t){return n.call(this,$.extend(t,{cssClass:"cumulative-flow-edit-settings"}))||this}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._cfdChartControl=this._options.cfdChartControl;this._canEdit=this._options.isEditable;this._updateCfdChartControl();var i=this.getElement(),r=$(li("div",t.DESCRIPTION_AREA_CONTAINER_CLASS)),u=$(li("div",t.SECTIONS_AREA_CONTAINER_CLASS));this._createMessageArea(r);this._createDescriptionTextArea(r);this._createSectionTextArea(u);i.append(r);i.append(u);this._$dateInputCombo=i.find(".cfd-datePicker-container .combo");this._$dateInput=i.find(".cfd-datePicker-container input");this._canEdit||(this._showWarning(yt.CumulativeFlowSettingsNoPermission),i.find(".section-checkbox #cfd-showIncoming input").attr("disabled","disabled"),i.find(".section-checkbox #cfd-showOutgoing input").attr("disabled","disabled"),this._$dateInputCombo.attr("disabled","disabled"),this._$dateInputCombo.attr("aria-disabled","true"));this._originalSettings={startDate:$.trim(this._$startDate.val()),showIncoming:this._showIncomingChecked,showOutgoing:this._showOutgoingChecked};this._validate()},t.prototype.registerStateChangedEvents=function(n,t){this._onDirtyStateChanged=n;this._onValidStateChanged=t},t.prototype.isValid=function(){return this._isValid},t.prototype.isDirty=function(){return this._isDirty},t.prototype.beginLoad=function(n){var t=this,r=i.defer();return this._getBoardCumulativeChartApi().then(function(i){t._showIncomingChecked=!i.settings.hideIncomingColumn;t._showOutgoingChecked=!i.settings.hideOutgoingColumn;t._startDate=t._shiftToLocale(i.settings.startDate);t.createIn(n);r.resolve(null)},function(n){r.reject(n)}),r.promise},t.prototype.beginSave=function(){var n=this,t,r;if(this.isValid())return t=i.defer(),r=Date.now(),this._setBoardCumulativeChartApi().then(function(i){n._recordCfdSettingsTelemetry(r);n._isDirty=!1;$.isFunction(n._onDirtyStateChanged)&&n._onDirtyStateChanged();n._showIncomingChecked=!i.settings.hideIncomingColumn;n._showOutgoingChecked=!i.settings.hideOutgoingColumn;n._startDate=n._shiftToLocale(i.settings.startDate);n._updateCfdChartControl();n._cfdChartControl&&n._cfdChartControl.refresh(!0);n._originalSettings={startDate:n._startDate,showIncoming:n._showIncomingChecked,showOutgoing:n._showOutgoingChecked};t.resolve(!1)},function(n){t.reject(n)}),t.promise},t.prototype._updateCfdChartControl=function(){this._cfdChartControl&&this._cfdChartControl.setShowIncoming(this._showIncomingChecked)},t.prototype._getCumulativeFlowSettings=function(){return{settings:{startDate:this._shiftToUTC($.trim(this._$startDate.val())),hideIncomingColumn:!this._showIncomingChecked,hideOutgoingColumn:!this._showOutgoingChecked}}},t.prototype._shiftToUTC=function(n){return n?nt.shiftToUTC(nt.parseDateString(n,null,!0)):null},t.prototype._shiftToLocale=function(n){return n?nt.localeFormat(nt.parseDateString(n,null,!0),"d"):null},t.prototype.dispose=function(){this._messageArea&&this._messageArea.dispose();this._cumulativeFlowStartDateValidator&&this._cumulativeFlowStartDateValidator.dispose();n.prototype.dispose.call(this)},t.prototype._getBoardCumulativeChartApi=function(){var n=si.getDefaultWebContext(),t=this._getClient(n),i={projectId:n.project.id,teamId:this._options.teamId};return t.getBoardChart(i,this._options.boardIdentity,"cumulativeflow")},t.prototype._setBoardCumulativeChartApi=function(){var n=si.getDefaultWebContext(),t=this._getClient(n),i={projectId:n.project.id,teamId:this._options.teamId},r=this._getCumulativeFlowSettings();return t.updateBoardChart(r,i,this._options.boardIdentity,"cumulativeflow")},t.prototype._getClient=function(n){var t=new b.VssConnection(n);return t.getHttpClient(hi.WorkHttpClient)},t.prototype._showWarning=function(n){this._messageArea.setMessage(n,s.MessageAreaType.Warning)},t.prototype._createMessageArea=function(n){var i=$(li("div",t.MESSAGE_AREA_CONTAINER_CLASS)),r={closeable:!1,showIcon:!0,type:s.MessageAreaType.Warning};this._messageArea=u.Control.create(s.MessageAreaControl,i,r);n.append(i)},t.prototype._createDescriptionTextArea=function(n){var i=$(li("h2","main-header")),r=$(".board-page-title-area"),t;r.length>0&&r.eq(0).html().trim();i.text(yt.Cfd_Settings_Main_Header);t=$(li("div","main-description"));t.text(yt.Cfd_Settings_Description);n.append(i).append(t)},t.prototype._createSectionTextArea=function(n){var t=$("<div />").append(this._createStartDateInput()).append(this._createShowIncomingInput());t.append(this._createShowOutgoingInput());n.append(t)},t.prototype._createStartDateInput=function(){var o=this,n=$("<div />").addClass("cfd-datePicker-container"),f,r,i;return it.BrowserCheckUtils.isFirefox()&&n.attr("tabindex",0),f=$("<div />").addClass("section-header").text(yt.CFDSettingsStartDateTitle),f.appendTo(n),r=$("<div />").addClass("section-description").text(yt.CFDSettingsStartDateDescription),r.attr("id",t.START_DATE_DESCRIPTION_ID),r.appendTo(n),i=$("<input />").attr({type:"text",id:"chartStartDate","aria-label":yt.CFDSettingsStartDateTitle,"aria-describedby":t.START_DATE_DESCRIPTION_ID}),this._startDate&&i.val(this._startDate),$("<label />").attr("for","chartStartDate").text(yt.CFDSettingsStartDateLabel).appendTo(n),i.appendTo(n),u.Enhancement.enhance(e.DatePicker,i,{id:"cfd-startDate",dropOptions:{host:$(document.body)},change:yi(this,this._onStartDateChange),enabled:this._canEdit}),this._throttleValidateDelegate=g.throttledDelegate(this,500,function(){o._validate()}),this._cumulativeFlowStartDateValidator=u.Enhancement.enhance(tr,i),this._$startDate=i,this._createDateInputMessageArea(n),n},t.prototype._createShowIncomingInput=function(){var n=this,t=$("<div />").addClass("section-checkbox"),i=u.Control.create(f.CheckboxList,t,{id:"cfd-showIncoming",cssClass:"cfd-checkbox-list",change:function(t){n._showIncomingChecked=t[1];n._setDirtyState()}});return i.setItems([{text:yt.CFDSettingsShowIncomingLabel,value:1,checked:this._showIncomingChecked}]),t},t.prototype._createShowOutgoingInput=function(){var n=this,t=$("<div />").addClass("section-checkbox"),i=u.Control.create(f.CheckboxList,t,{id:"cfd-showOutgoing",cssClass:"cfd-checkbox-list",change:function(t){n._showOutgoingChecked=t[1];n._setDirtyState()}});return i.setItems([{text:yt.CFDSettingsShowOutgoingLabel,value:1,checked:this._showOutgoingChecked}]),t},t.prototype._onStartDateChange=function(){var n,t;if(this._setDirtyState(),n=$.trim(this._$startDate.val()),n&&(t=nt.parseLocale(n),t instanceof Date)){this._validate();return}this._throttleValidateDelegate()},t.prototype._setDirtyState=function(){this._isDirty=this._isStartDateChanged()||this._isShowIncomingChanged()||this._isShowOutgoingChanged();$.isFunction(this._onDirtyStateChanged)&&this._onDirtyStateChanged()},t.prototype._validate=function(){if(this._isValid=c.validateGroup("*",null,this.getElement()),$.isFunction(this._onValidStateChanged)&&this._onValidStateChanged(),this._isValid)this._clearDateError();else{var n=this._cumulativeFlowStartDateValidator.getMessage();this._setDateError(n)}},t.prototype._createDateInputMessageArea=function(n){this._$dateInputMessageArea=$("<div />").addClass("control-message-area").attr("aria-live","assertive");this._$dateErrorIcon=$("<div />").addClass("icon bowtie-icon bowtie-status-error");this._$dateErrorIcon.appendTo(this._$dateInputMessageArea);this._$dateInputErrorMessage=$("<div />").addClass("error-message");this._$dateInputErrorMessage.appendTo(this._$dateInputMessageArea);this._$dateInputMessageArea.appendTo(n)},t.prototype._setDateError=function(n){this._$dateInputMessageArea.addClass("error");this._$dateInputCombo.addClass("invalid");this._$dateInput.addClass("invalid");this._$dateInputErrorMessage.text(n);this._$dateErrorIcon.show()},t.prototype._clearDateError=function(){this._$dateInputMessageArea.removeClass("error");this._$dateInputCombo.removeClass("invalid");this._$dateInput.removeClass("invalid");this._$dateInputErrorMessage.text("");this._$dateErrorIcon.hide()},t.prototype._isStartDateChanged=function(){var n=$.trim(this._$startDate.val());return tt.ignoreCaseComparer(this._originalSettings.startDate,n)!==0},t.prototype._isShowIncomingChanged=function(){return this._showIncomingChecked!==this._originalSettings.showIncoming},t.prototype._isShowOutgoingChanged=function(){return this._showOutgoingChecked!==this._originalSettings.showOutgoing},t.prototype._recordCfdSettingsTelemetry=function(n){var t=Date.now(),i=t-n,r={IsStartDateChanged:this._isStartDateChanged(),IsShowIncomingChanged:this._isShowIncomingChanged(),IsShowOutgoingChanged:this._isShowOutgoingChanged(),ElapsedTime:i};k.publishEvent(new k.TelemetryEventData(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_CFD_UPDATE_SETTINGS,r))},t.DESCRIPTION_AREA_CONTAINER_CLASS="cfd-settings-description-area-container",t.SECTIONS_AREA_CONTAINER_CLASS="sections-area-container",t.MESSAGE_AREA_CONTAINER_CLASS="cfd-settings-message-area-container",t.START_DATE_DESCRIPTION_ID="chartStartDateDescription",t}(u.Control);t.CumulativeFlowSettingsControl=or;u.Enhancement.registerEnhancement(gi,".velocity-chart");u.Enhancement.registerEnhancement(di,".burndown-chart");u.Enhancement.registerEnhancement(nr,".cumulative-flow-chart");vi=function(){function n(n,t,i,r){this._tfsContext=n;this._actionName=t;this._backlogContext=r;this._colorsProvider=kt.WorkItemTypeColorAndIconsProvider.getInstance();this._currentPageAction=i;this._backlogNodes=[];this._initialize()}return n.CreateInstance=function(t,i,r){return r=r||t.navigation.currentAction,new n(t,i,r,ht.BacklogContext.getInstance())},n.prototype._initialize=function(){var i=this,n,t,r;(this._addPortfolios(wt.BacklogConfigurationService.getBacklogConfiguration().portfolioBacklogs),n=wt.BacklogConfigurationService.getBacklogConfiguration().requirementBacklog,this._backlogContext.isInPortfolios(n.name))&&(this._tfsContext.isHosted&&ut.using(["WorkItemTracking/Scripts/Engagement/Registrations","Presentation/Scripts/TFS/TFS.Engagement.Registrations"],function(n,t){n.registerVisualizeYourWorkNewFeature(i._tfsContext);n.registerCustomizeWorkItemsNewFeature(i._tfsContext);n.registerTrackChangesNewFeature();t.registerNewFeature()}),t=ht.IsWebAccessAsyncEnabled()?ht.LinkHelpers.getAsyncBacklogLink(this._actionName,{level:n.name,showParents:st.ShowParents.getMRUState()}):this._tfsContext.getActionUrl(this._actionName,"backlogs",{parameters:n.name}),r={name:n.name,url:t,onNavigate:yi(this,this._backlogNavigationHandler,{uri:t,level:n.name}),color:this._getBacklogLevelColor(n),isHubContext:this._backlogContext.isRequirement,isSelected:this._backlogContext.isRequirement&&this._showHubAsSelected(this._backlogContext.actionNameFromMru),isRequirement:!0},this._backlogNodes.push(r))},n.prototype._getBacklogLevelColor=function(n){var t=n.color;return t?"#".concat(t.substr(t.length-6)):this._colorsProvider.getColor(this._getCurrentProject(),n.defaultWorkItemType)},n.prototype.getBacklogNodes=function(){return this._backlogNodes},n.prototype._addPortfolios=function(n){var r,i,t,u,f;for(n=n.sort(function(n,t){return t.rank-n.rank}),r=0;r<n.length;r++)(i=n[r],t=i.name,this._backlogContext.isInPortfolios(t))&&(u=ht.IsWebAccessAsyncEnabled()?ht.LinkHelpers.getAsyncBacklogLink(this._actionName,{level:t,showParents:st.ShowParents.getMRUState()}):this._tfsContext.getActionUrl(this._actionName,"backlogs",{parameters:t}),f={name:t,url:u,onNavigate:yi(this,this._backlogNavigationHandler,{uri:u,level:t}),color:this._getBacklogLevelColor(i),isHubContext:this._backlogContext.isHubContext(i),isSelected:this._backlogContext.isHubContext(i)&&this._showHubAsSelected(this._backlogContext.actionNameFromMru),isRequirement:!1},this._backlogNodes.push(f))},n.prototype._showHubAsSelected=function(t){var i=this._currentPageAction;return tt.ignoreCaseComparer(i,n.indexPageAction)===0&&t&&(i=t),tt.ignoreCaseComparer(i,n.backlogPageAction)===0||tt.ignoreCaseComparer(i,n.boardPageAction)===0||tt.ignoreCaseComparer(i,n.backlogsContributionPageAction)===0},n.prototype._backlogNavigationHandler=function(n,t){ht.IsWebAccessAsyncEnabled()&&(y.getService().performAction(ht.Actions.BACKLOG_NAVIGATE,t),n.preventDefault())},n.prototype._getCurrentProject=function(){var n=this._tfsContext.navigation.project;return n},n.indexPageAction="index",n.backlogPageAction="backlog",n.boardPageAction="board",n.backlogsContributionPageAction="backlogscontributions",n.backlogPivot="0",n.boardPivot="1",n}();t.BacklogViewControlModel=vi;pi=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t}(v.TreeNode);t.SprintTreeNode=pi;wi=function(n){function t(t){var i=n.call(this,t.name)||this;return i.backlogNodeInfo=t,i}return __extends(t,n),t}(v.TreeNode);t.BacklogTreeNode=wi;ir=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(){var t=this;this._setupConfigurationData(this._options.actionName,this._options.currentPageAction);this._initialize(this._options.actionName);p.getService().attachEvent(bi.EVENT_AGILE_CONTRIBUTED_TAB_SELECTED,function(n){var i=b.getService(r.ExtensionService);i.getContribution(n.contributionId).then(function(i){i.targets.some(function(n){return n==="ms.vss-work-web.product-backlog-tabs"})&&(t._updateLinkToIncludeContribution(t.rootNode,n),t._draw())})});n.prototype.initialize.call(this)},t.prototype._updateLinkToIncludeContribution=function(n,t){var u,i,r,f;if(n.hasChildren()||n.isEmptyFolderChildNode||n.root||(u=this._options.tfsContext,i=u.getActionUrl(vi.backlogsContributionPageAction,"backlogs",{parameters:[]}),i=rt.replaceUrlParam(i,"contributionId",t.contributionId),i=rt.replaceUrlParam(i,"_a","contribution"),i=rt.replaceUrlParam(i,"level",n.backlogNodeInfo.name),i=rt.replaceUrlParam(i,"showParents",""+st.ShowParents.getMRUState()),n.link=rt.replaceUrlParam(i,"spv",""+t.selectedPivot)),n.hasChildren())for(r=0,f=n.children.length;r<f;++r)this._updateLinkToIncludeContribution(n.children[r],t)},t.prototype.initializeOptions=function(t){var i={useBowtieStyle:!0,useArrowKeysForNavigation:!0},r=g.parseMSJSON($(".backlog-data",this.getElement()).html(),!1);ht.IsWebAccessAsyncEnabled()||(i.clickSelects=!1);n.prototype.initializeOptions.call(this,$.extend(r,i,t))},t.prototype.reconfigure=function(n,t){this._setupConfigurationData(n,t);this._initialize(n);this._draw()},t.prototype._setupConfigurationData=function(n,t){this._model=vi.CreateInstance(this._options.tfsContext,n,t)},t.prototype._initialize=function(n){var i=ii.ProjectCollection.getConnection(this._options.tfsContext).getService(bt.TeamAwarenessService),t=!1;this._options.tfsContext.isHosted&&(t=gt.FeatureLicenseService.getDefaultService(this._options.tfsContext).getFeatureState(dt.LicenseFeatureIds.PortfolioBacklogManagement)<dt.FeatureMode.Licensed);this.populate(t,i.getTeamSettings(this._options.tfsContext.currentTeam.identity.id),n)},t.prototype.populate=function(n,t,i){var r=this;var u=t.backlogIteration.friendlyPath,f=this._model.getBacklogNodes(),e=function(t,i){var f=new wi(t);return f.droppable=!0,f.iterationPath=u,n&&!i&&(f.config.css="preview"),f.link=t.url,f.linkDelegate=function(n){if(r.onItemClick(f,$(n.target)))t.onNavigate(n)},f.noTreeIcon=!0,t.isSelected&&(f.selected=!0,r._selectedNode=f,r._updateSelections()),f};this.rootNode.clear();$.each(f,function(n,t){if(r._isBacklogVisibleByName(t.name)){var i=t.isRequirement;r.rootNode.add(e(t,i))}})},t.prototype.onItemClick=function(t,i,r){return ht.IsWebAccessAsyncEnabled()?this._confirmNavigationChange(r,t):n.prototype.onItemClick.call(this,t,i,r)},t.prototype._confirmNavigationChange=function(){return this._options.isWorkQueuedDelegate&&this._options.isWorkQueuedDelegate()?(this._options.getMessageAreaDelegate&&this._options.getMessageAreaDelegate().setMessage(vt.ProductBacklog_Error_UnsavedChanges),k.publishEvent(k.TelemetryEventData.fromProperty(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.PRODUCTBACKLOG,at.PROPERTYNAME_SWITCH,at.PROPERTYVALUE_WITHUNSAVEDWORK)),!1):this._options.isRefreshingDelegate&&this._options.isRefreshingDelegate()?!1:!0},t.prototype._updateNode=function(t,i,r){n.prototype._updateNode.call(this,t,i,r);this._showColoredBarsForBacklogPicker(i,t)},t.prototype.getModel=function(){return this._model},t.prototype._showColoredBarsForBacklogPicker=function(n,t){var i=t.find(".node-content"),r=n.backlogNodeInfo,u;if(i.children().hasClass("bowtie-backlog")||(i.wrapInner($("<div>").addClass("backlogs-text")),h.RichContentTooltip.addIfOverflow(r.name,i.find(".backlogs-text")),!r))return!1;u=$("<div>").addClass("bowtie-icon bowtie-backlog team-backlog-view-icon").css("color",r.color);i.append(u)},t.prototype._isBacklogVisibleByName=function(n){var t=wt.BacklogConfigurationService.getBacklogConfiguration().getBacklogByDisplayName(n);return t?!d.contains(wt.BacklogConfigurationService.getBacklogConfiguration().hiddenBacklogs,t.id,tt.ignoreCaseComparer):!0},t.EVENT_BACKLOG_VIEW_CHANGE="backlog.view.change",t}(v.TreeViewO);t.BacklogViewControl=ir;ut.classExtend(ir,ti.TfsContext.ControlExtensions),function(n){function t(t,i,r){var u=t.getItem(n.CMD_COMMON_SETTINGS);u&&u.update({id:n.CMD_COMMON_SETTINGS,icon:"bowtie-icon bowtie-settings-gear",showText:!1,title:yt.Common_Setting_Config_Menu_Tooltip,action:function(){y.getService().performAction(ni.Actions.LAUNCH_COMMON_CONFIGURATION,r);i&&i()}})}function i(n,t){var i=w.getScenarioManager().startScenario(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_COMMON_CONFIG_DIALOG_OPENED);return i.addData({Page:n,isInitialLoad:t}),i}n.CMD_COMMON_SETTINGS="cmd-common-settings";n.initialize=t;n.createPerfScenario=i}(sr=t.CommonSettingsConfigurationControl||(t.CommonSettingsConfigurationControl={})),function(n){function t(t,i,r){var u=t.getItem(n.FILTER_COMMAND);r||(r="bowtie-icon bowtie-search-filter");u&&u.update({id:n.FILTER_COMMAND,icon:r,showText:!1,title:yt.FilterIcon_ToolTip,toggled:i,action:function(){y.getService().performAction(ht.Actions.LAUNCH_FILTER_CONTROL);k.publishEvent(new k.TelemetryEventData(at.AgileCustomerIntelligenceArea.AGILE,at.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_CRITERIA_FILTER_ICON,{CriteriaFilterIcon:n.FILTER_COMMAND}))}})}n.FILTER_COMMAND="filter-command";n.initialize=t}(hr=t.FilterControls||(t.FilterControls={}));bi=function(){function n(){}return n.EVENT_AGILE_CONTRIBUTED_TAB_SELECTED="agile.contributed-tab-selected",n.EVENT_BACKLOG_VIEW_CHANGE="contribution-backlog.view.change",n}();t.ContributableTabConstants=bi});

define("Agile/Scripts/Resources/TFS.Resources.AgileSprintPlanning",["require","exports"],function(require,exports){var e=exports;e.Capacity_CopyNow_LinkText="Copy now";e.DaysOffDialog_AddRowError="You cannot add additional dates until you have corrected any entries that have errors.";e.Capacity_NoUser_NoItemsToShow_AddAllTeamMembers_ActioCapacity_NoUser_NoItemsToShow_AddAllTeamMembers_Action="Add all team members to this iteration with";e.ReorderingRequirementsDisabled_HyperLinkText="Learn more.";e.Capacity_Toolbar_Undo="Undo changes";e.Capacity_Toolbar_Save="Save";e.Capacity_Toolbar_Copy="Copy capacity information from the previous iteration";e.Capacity_TeamDaysOff="Team Days Off";e.Capacity_RemoveActivity="Remove this activity";e.Capacity_InvalidField="The value for \u0027{0}\u0027 is not valid.";e.Capacity_TeamDaysOffDescriptionText="These days off apply to the whole team.";e.SameCategoryHiearchy_ToFix="See work item(s) {0} to either remove the parent to child link or change the link type to \u0027Related\u0027.";e.Capacity_PendingChanges="You have unsaved changes in the page. You need to save them before you can edit iteration details.";e.Capacity_DaysOff="{0} days";e.Capacity_TeamCapacityDisplayName="Team";e.KeyboardShortcutDescription_Save_Capacity="Save changes";e.IterationBacklog_ExceededLimit_OnPrem="The number of items on your backlog exceeds the configured limit of {0}. Your current total is: {1}. Click here to learn more.";e.IterationBacklog_ExceededLimit_Hosted="The number of items on your backlog exceeds the configured limit of {0}. Your current total is: {1}.";e.Iteration_NoData_NoItemsToShow_Heading="It\u0027s lonely in here!";e.Capacity_UserHeader="User";e.Capacity_DayOff="{0} day";e.SameCategoryHierarchy_FeaturesBlocked="You cannot reorder work items and some work items may not be shown. ";e.Sprint_Negative_Capacity_Message="Your team capacity has been reduced because the iteration start and end dates have been changed. One or more team members have more days off than working days. Click here to adjust your capacity.";e.CapacityPlanning_RedirectToDefaultIteration="The capacity page you requested is either hidden for your team or cannot be found. We\u0027re showing you the current iteration instead. If you navigated here from a bookmark, you will need to update your bookmark.";e.Capacity_AddActivity="Add an activity";e.Capacity_TeamMembersAdded="You have added {0} user(s) to this iteration\u0027s capacity.";e.Capacity_ClickHere="click here";e.DaysOffDialog_DaysOffHeader="Net Days Off";e.Capacity_CopyPrevious_ServerError="The previous iteration\u0027s data could not be retrieved because the server did not respond. Wait a few moments and re-try.";e.Capacity_ActivityLabel="{0} activity";e.Capacity_CopyPrevious_Info="You have not set your capacity. You may copy capacity from the previous iteration. ";e.Capacity_NoUser_NoItemsToShow_CopyCapacity_Action="Copy capacity information with";e.CapacityLoading_PopulateTeamMembersStart="Populating team members";e.CapacityLoading_PopulateTeamMembersError="Error populating team members";e.DaysOffDialog_EndDateHeader="End Date";e.DaysOffDialog_DateMustBeValidDateError="Input value must be a valid date.";e.AggregatedCapacity_LimitExceeded="TF1530020: Failed to load work details. You have exceeded the number of work items allowed per iteration.";e.DaysOffDialog_EndDateBetweenRangeError="The end date is not valid. You must specify an end date that is on or between the start and end dates for the current iteration.";e.CreateQuery_Backlog="Backlog";e.Capacity_CopyPrevious_NoCapacity="The previous iteration did not have any capacity information to copy.";e.SameCategoryHierarchy_BacklogMessage="There is same category hierarchy on this backlog.";e.DropWorkItemToProgressControl_UpdateFailed="The work item could not be updated. An error occurred while attempting to update the required fields of the work item. The most common reasons for this error are that the work items have been modified by another user, or that you have lost the connection to your server. Refresh your browser, and then try again.";e.KeyboardShortcutDescription_Undo_Capacity="Undo changes";e.Capacity_UserIsNotMaterializedYet="Users who have never logged in cannot be added to capacity planning.";e.Capacity_TeamCapacityGroupName="Work";e.Capacity_ExpandCollapse_AriaLabel="Expand or collapse the \"{0}\" section";e.CapacityLoading_SaveError="Error saving capacity information";e.CapacityLoading_SaveStart="Saving capacity information";e.KeyboardShortcutGroup_Capacity="Capacity";e.Capacity_TeamMemberHeader="Team Member";e.Capacity_UserAlreadyHasCapacity="This user has already been added to capacity planning for this iteration.";e.DaysOffDialog_Total="Total";e.DaysOffDialog_DialogTitleTeamWideDaysOff="Days off for the entire team";e.CapacityLoading_PopulateTeamMembersEnd="Team members added";e.Capacity_AddCapacityUser="Add new capacity user";e.DaysOffDialog_DateRangeOverlapError="One or more of the date ranges that you specified overlaps with another date range. Date ranges must not overlap.";e.SameCategoryHierarchy_FeaturesBlockedWithWorkItems="You cannot reorder work items and work item(s) {0} are not shown.";e.Capacity_NoUser_NoItemsToShow_AddPeople_Action="Add people to this iteration with";e.SameCategoryHierarchy_TaskboardMessage="There is same category hierarchy on this taskboard.";e.Capacity_CannotGetMembers="There was a problem adding missing team members. Please refresh and try again.";e.Capacity_RemoveUser="Remove this user";e.WorkDetailsPanelLoadingFailed_Message="Unable to load capacity, please refresh the page.";e.ForMoreInformationClickHere="For more information click here.";e.Capacity_By="Work By: {0}";e.DropWorkItemToProgressControl_InvalidFieldAssignment="You attempted to assign a value to a work item field that is not valid. This most commonly occurs when you are using a customized process template or work item type. The operation will be ignored and no changes will be applied to the work item. ";e.IterationBacklog_RedirectToDefaultIteration="The backlog you requested is either hidden for your team or cannot be found. We\u0027re showing you the current iteration instead. If you navigated here from a bookmark, you will need to update your bookmark.";e.DaysOffDialog_DaysOffTooltip="If the date range overlaps, weekends and team days off are subtracted from this total";e.Capacity_CapacityHeader="Capacity per day";e.CapacityLoading_CopyFromPreviousError="Error loading previous capacity information";e.CapacityLoading_CopyFromPreviousStart="Copying previous capacity information";e.CapacityLoading_SaveEnd="Capacity information saved";e.DaysOffDialog_TeamMemberTitle="Days off for: {0}";e.Capacity_ValueNotValid="Value is not valid";e.Capacity_NoMoreTeamMembers="There are no more team members to add to this iteration\u0027s capacity. If you would like to add more users to your team, {0}.";e.Capacity_AddMissingTeamMembers="Add missing team members";e.CapacityLoading_CopyFromPreviousEnd="Previous capacity information applied";e.DaysOffDialog_StartDateBetweenRangeError="The start date is not valid. You must specify a start date that is on or between the start and end dates for the current iteration.";e.DaysOffDialog_EndBeforeStartError="You have specified start and end dates that contain an error. You must specify a start date that is on or before the end date.";e.Capacity_DaysOffHeader="Days Off";e.DaysOffDialog_StartDateHeader="Start Date";e.Capacity_Unassigned="Unassigned";e.IterationBoard_ExceededLimit="The number of items on your board exceeds the configured limit of {0}. Your current total is: {1}.";e.DaysOffDialog_AddLink="Specify additional dates";e.DaysOffDialog_DeleteTooltip="Delete this row";e.Capacity_NoUser_NoItemsToShow_Message="There are no people listed for {0}";});

// Knockout JavaScript library v2.2.1
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function() {function j(w){throw w;}var m=!0,p=null,r=!1;function u(w){return function(){return w}};var x=window,y=document,ga=navigator,F=window.jQuery,I=void 0;
function L(w){function ha(a,d,c,e,f){var g=[];a=b.j(function(){var a=d(c,f)||[];0<g.length&&(b.a.Ya(M(g),a),e&&b.r.K(e,p,[c,a,f]));g.splice(0,g.length);b.a.P(g,a)},p,{W:a,Ka:function(){return 0==g.length||!b.a.X(g[0])}});return{M:g,j:a.pa()?a:I}}function M(a){for(;a.length&&!b.a.X(a[0]);)a.splice(0,1);if(1<a.length){for(var d=a[0],c=a[a.length-1],e=[d];d!==c;){d=d.nextSibling;if(!d)return;e.push(d)}Array.prototype.splice.apply(a,[0,a.length].concat(e))}return a}function S(a,b,c,e,f){var g=Math.min,
h=Math.max,k=[],l,n=a.length,q,s=b.length,v=s-n||1,G=n+s+1,J,A,z;for(l=0;l<=n;l++){A=J;k.push(J=[]);z=g(s,l+v);for(q=h(0,l-1);q<=z;q++)J[q]=q?l?a[l-1]===b[q-1]?A[q-1]:g(A[q]||G,J[q-1]||G)+1:q+1:l+1}g=[];h=[];v=[];l=n;for(q=s;l||q;)s=k[l][q]-1,q&&s===k[l][q-1]?h.push(g[g.length]={status:c,value:b[--q],index:q}):l&&s===k[l-1][q]?v.push(g[g.length]={status:e,value:a[--l],index:l}):(g.push({status:"retained",value:b[--q]}),--l);if(h.length&&v.length){a=10*n;var t;for(b=c=0;(f||b<a)&&(t=h[c]);c++){for(e=
0;k=v[e];e++)if(t.value===k.value){t.moved=k.index;k.moved=t.index;v.splice(e,1);b=e=0;break}b+=e}}return g.reverse()}function T(a,d,c,e,f){f=f||{};var g=a&&N(a),g=g&&g.ownerDocument,h=f.templateEngine||O;b.za.vb(c,h,g);c=h.renderTemplate(c,e,f,g);("number"!=typeof c.length||0<c.length&&"number"!=typeof c[0].nodeType)&&j(Error("Template engine must return an array of DOM nodes"));g=r;switch(d){case "replaceChildren":b.e.N(a,c);g=m;break;case "replaceNode":b.a.Ya(a,c);g=m;break;case "ignoreTargetNode":break;
default:j(Error("Unknown renderMode: "+d))}g&&(U(c,e),f.afterRender&&b.r.K(f.afterRender,p,[c,e.$data]));return c}function N(a){return a.nodeType?a:0<a.length?a[0]:p}function U(a,d){if(a.length){var c=a[0],e=a[a.length-1];V(c,e,function(a){b.Da(d,a)});V(c,e,function(a){b.s.ib(a,[d])})}}function V(a,d,c){var e;for(d=b.e.nextSibling(d);a&&(e=a)!==d;)a=b.e.nextSibling(e),(1===e.nodeType||8===e.nodeType)&&c(e)}function W(a,d,c){a=b.g.aa(a);for(var e=b.g.Q,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=
e[g];"function"===typeof h?(g=h(a[f].value))&&j(Error(g)):h||j(Error("This template engine does not support the '"+g+"' binding within its templates"))}}a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+b.g.ba(a)+" } })()})";return c.createJavaScriptEvaluatorBlock(a)+d}function X(a,d,c,e){function f(a){return function(){return k[a]}}function g(){return k}var h=0,k,l;b.j(function(){var n=c&&c instanceof b.z?c:new b.z(b.a.d(c)),q=n.$data;e&&b.eb(a,n);if(k=("function"==typeof d?
d(n,a):d)||b.J.instance.getBindings(a,n)){if(0===h){h=1;for(var s in k){var v=b.c[s];v&&8===a.nodeType&&!b.e.I[s]&&j(Error("The binding '"+s+"' cannot be used with virtual elements"));if(v&&"function"==typeof v.init&&(v=(0,v.init)(a,f(s),g,q,n))&&v.controlsDescendantBindings)l!==I&&j(Error("Multiple bindings ("+l+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")),l=s}h=2}if(2===h)for(s in k)(v=b.c[s])&&"function"==
typeof v.update&&(0,v.update)(a,f(s),g,q,n)}},p,{W:a});return{Nb:l===I}}function Y(a,d,c){var e=m,f=1===d.nodeType;f&&b.e.Ta(d);if(f&&c||b.J.instance.nodeHasBindings(d))e=X(d,p,a,c).Nb;e&&Z(a,d,!f)}function Z(a,d,c){for(var e=b.e.firstChild(d);d=e;)e=b.e.nextSibling(d),Y(a,d,c)}function $(a,b){var c=aa(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:p}function aa(a,b){for(var c=a,e=1,f=[];c=c.nextSibling;){if(H(c)&&(e--,0===e))return f;f.push(c);B(c)&&e++}b||j(Error("Cannot find closing comment tag to match: "+
a.nodeValue));return p}function H(a){return 8==a.nodeType&&(K?a.text:a.nodeValue).match(ia)}function B(a){return 8==a.nodeType&&(K?a.text:a.nodeValue).match(ja)}function P(a,b){for(var c=p;a!=c;)c=a,a=a.replace(ka,function(a,c){return b[c]});return a}function la(){var a=[],d=[];this.save=function(c,e){var f=b.a.i(a,c);0<=f?d[f]=e:(a.push(c),d.push(e))};this.get=function(c){c=b.a.i(a,c);return 0<=c?d[c]:I}}function ba(a,b,c){function e(e){var g=b(a[e]);switch(typeof g){case "boolean":case "number":case "string":case "function":f[e]=
g;break;case "object":case "undefined":var h=c.get(g);f[e]=h!==I?h:ba(g,b,c)}}c=c||new la;a=b(a);if(!("object"==typeof a&&a!==p&&a!==I&&!(a instanceof Date)))return a;var f=a instanceof Array?[]:{};c.save(a,f);var g=a;if(g instanceof Array){for(var h=0;h<g.length;h++)e(h);"function"==typeof g.toJSON&&e("toJSON")}else for(h in g)e(h);return f}function ca(a,d){if(a)if(8==a.nodeType){var c=b.s.Ua(a.nodeValue);c!=p&&d.push({sb:a,Fb:c})}else if(1==a.nodeType)for(var c=0,e=a.childNodes,f=e.length;c<f;c++)ca(e[c],
d)}function Q(a,d,c,e){b.c[a]={init:function(a){b.a.f.set(a,da,{});return{controlsDescendantBindings:m}},update:function(a,g,h,k,l){h=b.a.f.get(a,da);g=b.a.d(g());k=!c!==!g;var n=!h.Za;if(n||d||k!==h.qb)n&&(h.Za=b.a.Ia(b.e.childNodes(a),m)),k?(n||b.e.N(a,b.a.Ia(h.Za)),b.Ea(e?e(l,g):l,a)):b.e.Y(a),h.qb=k}};b.g.Q[a]=r;b.e.I[a]=m}function ea(a,d,c){c&&d!==b.k.q(a)&&b.k.T(a,d);d!==b.k.q(a)&&b.r.K(b.a.Ba,p,[a,"change"])}var b="undefined"!==typeof w?w:{};b.b=function(a,d){for(var c=a.split("."),e=b,f=0;f<
c.length-1;f++)e=e[c[f]];e[c[c.length-1]]=d};b.p=function(a,b,c){a[b]=c};b.version="2.2.1";b.b("version",b.version);b.a=new function(){function a(a,d){if("input"!==b.a.u(a)||!a.type||"click"!=d.toLowerCase())return r;var c=a.type;return"checkbox"==c||"radio"==c}var d=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,c={},e={};c[/Firefox\/2/i.test(ga.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];c.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");
for(var f in c){var g=c[f];if(g.length)for(var h=0,k=g.length;h<k;h++)e[g[h]]=f}var l={propertychange:m},n,c=3;f=y.createElement("div");for(g=f.getElementsByTagName("i");f.innerHTML="\x3c!--[if gt IE "+ ++c+"]><i></i><![endif]--\x3e",g[0];);n=4<c?c:I;return{Na:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(a,b){for(var d=0,c=a.length;d<c;d++)b(a[d])},i:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var d=0,c=a.length;d<
c;d++)if(a[d]===b)return d;return-1},lb:function(a,b,d){for(var c=0,e=a.length;c<e;c++)if(b.call(d,a[c]))return a[c];return p},ga:function(a,d){var c=b.a.i(a,d);0<=c&&a.splice(c,1)},Ga:function(a){a=a||[];for(var d=[],c=0,e=a.length;c<e;c++)0>b.a.i(d,a[c])&&d.push(a[c]);return d},V:function(a,b){a=a||[];for(var d=[],c=0,e=a.length;c<e;c++)d.push(b(a[c]));return d},fa:function(a,b){a=a||[];for(var d=[],c=0,e=a.length;c<e;c++)b(a[c])&&d.push(a[c]);return d},P:function(a,b){if(b instanceof Array)a.push.apply(a,
b);else for(var d=0,c=b.length;d<c;d++)a.push(b[d]);return a},extend:function(a,b){if(b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a},ka:function(a){for(;a.firstChild;)b.removeNode(a.firstChild)},Hb:function(a){a=b.a.L(a);for(var d=y.createElement("div"),c=0,e=a.length;c<e;c++)d.appendChild(b.A(a[c]));return d},Ia:function(a,d){for(var c=0,e=a.length,g=[];c<e;c++){var f=a[c].cloneNode(m);g.push(d?b.A(f):f)}return g},N:function(a,d){b.a.ka(a);if(d)for(var c=0,e=d.length;c<e;c++)a.appendChild(d[c])},
Ya:function(a,d){var c=a.nodeType?[a]:a;if(0<c.length){for(var e=c[0],g=e.parentNode,f=0,h=d.length;f<h;f++)g.insertBefore(d[f],e);f=0;for(h=c.length;f<h;f++)b.removeNode(c[f])}},bb:function(a,b){7>n?a.setAttribute("selected",b):a.selected=b},D:function(a){return(a||"").replace(d,"")},Rb:function(a,d){for(var c=[],e=(a||"").split(d),f=0,g=e.length;f<g;f++){var h=b.a.D(e[f]);""!==h&&c.push(h)}return c},Ob:function(a,b){a=a||"";return b.length>a.length?r:a.substring(0,b.length)===b},tb:function(a,b){if(b.compareDocumentPosition)return 16==
(b.compareDocumentPosition(a)&16);for(;a!=p;){if(a==b)return m;a=a.parentNode}return r},X:function(a){return b.a.tb(a,a.ownerDocument)},u:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},n:function(b,d,c){var e=n&&l[d];if(!e&&"undefined"!=typeof F){if(a(b,d)){var f=c;c=function(a,b){var d=this.checked;b&&(this.checked=b.nb!==m);f.call(this,a);this.checked=d}}F(b).bind(d,c)}else!e&&"function"==typeof b.addEventListener?b.addEventListener(d,c,r):"undefined"!=typeof b.attachEvent?b.attachEvent("on"+
d,function(a){c.call(b,a)}):j(Error("Browser doesn't support addEventListener or attachEvent"))},Ba:function(b,d){(!b||!b.nodeType)&&j(Error("element must be a DOM node when calling triggerEvent"));if("undefined"!=typeof F){var c=[];a(b,d)&&c.push({nb:b.checked});F(b).trigger(d,c)}else"function"==typeof y.createEvent?"function"==typeof b.dispatchEvent?(c=y.createEvent(e[d]||"HTMLEvents"),c.initEvent(d,m,m,x,0,0,0,0,0,r,r,r,r,0,b),b.dispatchEvent(c)):j(Error("The supplied element doesn't support dispatchEvent")):
"undefined"!=typeof b.fireEvent?(a(b,d)&&(b.checked=b.checked!==m),b.fireEvent("on"+d)):j(Error("Browser doesn't support triggering events"))},d:function(a){return b.$(a)?a():a},ua:function(a){return b.$(a)?a.t():a},da:function(a,d,c){if(d){var e=/[\w-]+/g,f=a.className.match(e)||[];b.a.o(d.match(e),function(a){var d=b.a.i(f,a);0<=d?c||f.splice(d,1):c&&f.push(a)});a.className=f.join(" ")}},cb:function(a,d){var c=b.a.d(d);if(c===p||c===I)c="";if(3===a.nodeType)a.data=c;else{var e=b.e.firstChild(a);
!e||3!=e.nodeType||b.e.nextSibling(e)?b.e.N(a,[y.createTextNode(c)]):e.data=c;b.a.wb(a)}},ab:function(a,b){a.name=b;if(7>=n)try{a.mergeAttributes(y.createElement("<input name='"+a.name+"'/>"),r)}catch(d){}},wb:function(a){9<=n&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},ub:function(a){if(9<=n){var b=a.style.width;a.style.width=0;a.style.width=b}},Lb:function(a,d){a=b.a.d(a);d=b.a.d(d);for(var c=[],e=a;e<=d;e++)c.push(e);return c},L:function(a){for(var b=[],d=0,c=a.length;d<
c;d++)b.push(a[d]);return b},Pb:6===n,Qb:7===n,Z:n,Oa:function(a,d){for(var c=b.a.L(a.getElementsByTagName("input")).concat(b.a.L(a.getElementsByTagName("textarea"))),e="string"==typeof d?function(a){return a.name===d}:function(a){return d.test(a.name)},f=[],g=c.length-1;0<=g;g--)e(c[g])&&f.push(c[g]);return f},Ib:function(a){return"string"==typeof a&&(a=b.a.D(a))?x.JSON&&x.JSON.parse?x.JSON.parse(a):(new Function("return "+a))():p},xa:function(a,d,c){("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)&&
j(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js"));return JSON.stringify(b.a.d(a),d,c)},Jb:function(a,d,c){c=c||{};var e=c.params||{},f=c.includeFields||this.Na,g=a;if("object"==typeof a&&"form"===b.a.u(a))for(var g=a.action,h=f.length-1;0<=h;h--)for(var k=b.a.Oa(a,f[h]),l=k.length-1;0<=l;l--)e[k[l].name]=k[l].value;d=b.a.d(d);var n=y.createElement("form");
n.style.display="none";n.action=g;n.method="post";for(var w in d)a=y.createElement("input"),a.name=w,a.value=b.a.xa(b.a.d(d[w])),n.appendChild(a);for(w in e)a=y.createElement("input"),a.name=w,a.value=e[w],n.appendChild(a);y.body.appendChild(n);c.submitter?c.submitter(n):n.submit();setTimeout(function(){n.parentNode.removeChild(n)},0)}}};b.b("utils",b.a);b.b("utils.arrayForEach",b.a.o);b.b("utils.arrayFirst",b.a.lb);b.b("utils.arrayFilter",b.a.fa);b.b("utils.arrayGetDistinctValues",b.a.Ga);b.b("utils.arrayIndexOf",
b.a.i);b.b("utils.arrayMap",b.a.V);b.b("utils.arrayPushAll",b.a.P);b.b("utils.arrayRemoveItem",b.a.ga);b.b("utils.extend",b.a.extend);b.b("utils.fieldsIncludedWithJsonPost",b.a.Na);b.b("utils.getFormFields",b.a.Oa);b.b("utils.peekObservable",b.a.ua);b.b("utils.postJson",b.a.Jb);b.b("utils.parseJson",b.a.Ib);b.b("utils.registerEventHandler",b.a.n);b.b("utils.stringifyJson",b.a.xa);b.b("utils.range",b.a.Lb);b.b("utils.toggleDomNodeCssClass",b.a.da);b.b("utils.triggerEvent",b.a.Ba);b.b("utils.unwrapObservable",
b.a.d);Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);a=c.shift();return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});b.a.f=new function(){var a=0,d="__ko__"+(new Date).getTime(),c={};return{get:function(a,d){var c=b.a.f.la(a,r);return c===I?I:c[d]},set:function(a,d,c){c===I&&b.a.f.la(a,r)===I||(b.a.f.la(a,m)[d]=c)},la:function(b,f){var g=b[d];if(!g||!("null"!==g&&c[g])){if(!f)return I;g=b[d]="ko"+
a++;c[g]={}}return c[g]},clear:function(a){var b=a[d];return b?(delete c[b],a[d]=p,m):r}}};b.b("utils.domData",b.a.f);b.b("utils.domData.clear",b.a.f.clear);b.a.F=new function(){function a(a,d){var e=b.a.f.get(a,c);e===I&&d&&(e=[],b.a.f.set(a,c,e));return e}function d(c){var e=a(c,r);if(e)for(var e=e.slice(0),k=0;k<e.length;k++)e[k](c);b.a.f.clear(c);"function"==typeof F&&"function"==typeof F.cleanData&&F.cleanData([c]);if(f[c.nodeType])for(e=c.firstChild;c=e;)e=c.nextSibling,8===c.nodeType&&d(c)}
var c="__ko_domNodeDisposal__"+(new Date).getTime(),e={1:m,8:m,9:m},f={1:m,9:m};return{Ca:function(b,d){"function"!=typeof d&&j(Error("Callback must be a function"));a(b,m).push(d)},Xa:function(d,e){var f=a(d,r);f&&(b.a.ga(f,e),0==f.length&&b.a.f.set(d,c,I))},A:function(a){if(e[a.nodeType]&&(d(a),f[a.nodeType])){var c=[];b.a.P(c,a.getElementsByTagName("*"));for(var k=0,l=c.length;k<l;k++)d(c[k])}return a},removeNode:function(a){b.A(a);a.parentNode&&a.parentNode.removeChild(a)}}};b.A=b.a.F.A;b.removeNode=
b.a.F.removeNode;b.b("cleanNode",b.A);b.b("removeNode",b.removeNode);b.b("utils.domNodeDisposal",b.a.F);b.b("utils.domNodeDisposal.addDisposeCallback",b.a.F.Ca);b.b("utils.domNodeDisposal.removeDisposeCallback",b.a.F.Xa);b.a.ta=function(a){var d;if("undefined"!=typeof F)if(F.parseHTML)d=F.parseHTML(a);else{if((d=F.clean([a]))&&d[0]){for(a=d[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var c=b.a.D(a).toLowerCase();d=y.createElement("div");
c=c.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!c.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!c.indexOf("<td")||!c.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];a="ignored<div>"+c[1]+a+c[2]+"</div>";for("function"==typeof x.innerShiv?d.appendChild(x.innerShiv(a)):d.innerHTML=a;c[0]--;)d=d.lastChild;d=b.a.L(d.lastChild.childNodes)}return d};b.a.ca=function(a,d){b.a.ka(a);d=b.a.d(d);if(d!==p&&d!==I)if("string"!=typeof d&&(d=d.toString()),
"undefined"!=typeof F)F(a).html(d);else for(var c=b.a.ta(d),e=0;e<c.length;e++)a.appendChild(c[e])};b.b("utils.parseHtmlFragment",b.a.ta);b.b("utils.setHtml",b.a.ca);var R={};b.s={ra:function(a){"function"!=typeof a&&j(Error("You can only pass a function to ko.memoization.memoize()"));var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);R[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},hb:function(a,b){var c=R[a];c===I&&j(Error("Couldn't find any memo with ID "+
a+". Perhaps it's already been unmemoized."));try{return c.apply(p,b||[]),m}finally{delete R[a]}},ib:function(a,d){var c=[];ca(a,c);for(var e=0,f=c.length;e<f;e++){var g=c[e].sb,h=[g];d&&b.a.P(h,d);b.s.hb(c[e].Fb,h);g.nodeValue="";g.parentNode&&g.parentNode.removeChild(g)}},Ua:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:p}};b.b("memoization",b.s);b.b("memoization.memoize",b.s.ra);b.b("memoization.unmemoize",b.s.hb);b.b("memoization.parseMemoText",b.s.Ua);b.b("memoization.unmemoizeDomNodeAndDescendants",
b.s.ib);b.Ma={throttle:function(a,d){a.throttleEvaluation=d;var c=p;return b.j({read:a,write:function(b){clearTimeout(c);c=setTimeout(function(){a(b)},d)}})},notify:function(a,d){a.equalityComparer="always"==d?u(r):b.m.fn.equalityComparer;return a}};b.b("extenders",b.Ma);b.fb=function(a,d,c){this.target=a;this.ha=d;this.rb=c;b.p(this,"dispose",this.B)};b.fb.prototype.B=function(){this.Cb=m;this.rb()};b.S=function(){this.w={};b.a.extend(this,b.S.fn);b.p(this,"subscribe",this.ya);b.p(this,"extend",
this.extend);b.p(this,"getSubscriptionsCount",this.yb)};b.S.fn={ya:function(a,d,c){c=c||"change";var e=new b.fb(this,d?a.bind(d):a,function(){b.a.ga(this.w[c],e)}.bind(this));this.w[c]||(this.w[c]=[]);this.w[c].push(e);return e},notifySubscribers:function(a,d){d=d||"change";this.w[d]&&b.r.K(function(){b.a.o(this.w[d].slice(0),function(b){b&&b.Cb!==m&&b.ha(a)})},this)},yb:function(){var a=0,b;for(b in this.w)this.w.hasOwnProperty(b)&&(a+=this.w[b].length);return a},extend:function(a){var d=this;if(a)for(var c in a){var e=
b.Ma[c];"function"==typeof e&&(d=e(d,a[c]))}return d}};b.Qa=function(a){return"function"==typeof a.ya&&"function"==typeof a.notifySubscribers};b.b("subscribable",b.S);b.b("isSubscribable",b.Qa);var C=[];b.r={mb:function(a){C.push({ha:a,La:[]})},end:function(){C.pop()},Wa:function(a){b.Qa(a)||j(Error("Only subscribable things can act as dependencies"));if(0<C.length){var d=C[C.length-1];d&&!(0<=b.a.i(d.La,a))&&(d.La.push(a),d.ha(a))}},K:function(a,b,c){try{return C.push(p),a.apply(b,c||[])}finally{C.pop()}}};
var ma={undefined:m,"boolean":m,number:m,string:m};b.m=function(a){function d(){if(0<arguments.length){if(!d.equalityComparer||!d.equalityComparer(c,arguments[0]))d.H(),c=arguments[0],d.G();return this}b.r.Wa(d);return c}var c=a;b.S.call(d);d.t=function(){return c};d.G=function(){d.notifySubscribers(c)};d.H=function(){d.notifySubscribers(c,"beforeChange")};b.a.extend(d,b.m.fn);b.p(d,"peek",d.t);b.p(d,"valueHasMutated",d.G);b.p(d,"valueWillMutate",d.H);return d};b.m.fn={equalityComparer:function(a,
b){return a===p||typeof a in ma?a===b:r}};var E=b.m.Kb="__ko_proto__";b.m.fn[E]=b.m;b.ma=function(a,d){return a===p||a===I||a[E]===I?r:a[E]===d?m:b.ma(a[E],d)};b.$=function(a){return b.ma(a,b.m)};b.Ra=function(a){return"function"==typeof a&&a[E]===b.m||"function"==typeof a&&a[E]===b.j&&a.zb?m:r};b.b("observable",b.m);b.b("isObservable",b.$);b.b("isWriteableObservable",b.Ra);b.R=function(a){0==arguments.length&&(a=[]);a!==p&&(a!==I&&!("length"in a))&&j(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));
var d=b.m(a);b.a.extend(d,b.R.fn);return d};b.R.fn={remove:function(a){for(var b=this.t(),c=[],e="function"==typeof a?a:function(b){return b===a},f=0;f<b.length;f++){var g=b[f];e(g)&&(0===c.length&&this.H(),c.push(g),b.splice(f,1),f--)}c.length&&this.G();return c},removeAll:function(a){if(a===I){var d=this.t(),c=d.slice(0);this.H();d.splice(0,d.length);this.G();return c}return!a?[]:this.remove(function(d){return 0<=b.a.i(a,d)})},destroy:function(a){var b=this.t(),c="function"==typeof a?a:function(b){return b===
a};this.H();for(var e=b.length-1;0<=e;e--)c(b[e])&&(b[e]._destroy=m);this.G()},destroyAll:function(a){return a===I?this.destroy(u(m)):!a?[]:this.destroy(function(d){return 0<=b.a.i(a,d)})},indexOf:function(a){var d=this();return b.a.i(d,a)},replace:function(a,b){var c=this.indexOf(a);0<=c&&(this.H(),this.t()[c]=b,this.G())}};b.a.o("pop push reverse shift sort splice unshift".split(" "),function(a){b.R.fn[a]=function(){var b=this.t();this.H();b=b[a].apply(b,arguments);this.G();return b}});b.a.o(["slice"],
function(a){b.R.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}});b.b("observableArray",b.R);b.j=function(a,d,c){function e(){b.a.o(z,function(a){a.B()});z=[]}function f(){var a=h.throttleEvaluation;a&&0<=a?(clearTimeout(t),t=setTimeout(g,a)):g()}function g(){if(!q)if(n&&w())A();else{q=m;try{var a=b.a.V(z,function(a){return a.target});b.r.mb(function(c){var d;0<=(d=b.a.i(a,c))?a[d]=I:z.push(c.ya(f))});for(var c=s.call(d),e=a.length-1;0<=e;e--)a[e]&&z.splice(e,1)[0].B();n=m;h.notifySubscribers(l,
"beforeChange");l=c}finally{b.r.end()}h.notifySubscribers(l);q=r;z.length||A()}}function h(){if(0<arguments.length)return"function"===typeof v?v.apply(d,arguments):j(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")),this;n||g();b.r.Wa(h);return l}function k(){return!n||0<z.length}var l,n=r,q=r,s=a;s&&"object"==typeof s?(c=s,s=c.read):(c=c||{},s||(s=c.read));"function"!=typeof s&&j(Error("Pass a function that returns the value of the ko.computed"));
var v=c.write,G=c.disposeWhenNodeIsRemoved||c.W||p,w=c.disposeWhen||c.Ka||u(r),A=e,z=[],t=p;d||(d=c.owner);h.t=function(){n||g();return l};h.xb=function(){return z.length};h.zb="function"===typeof c.write;h.B=function(){A()};h.pa=k;b.S.call(h);b.a.extend(h,b.j.fn);b.p(h,"peek",h.t);b.p(h,"dispose",h.B);b.p(h,"isActive",h.pa);b.p(h,"getDependenciesCount",h.xb);c.deferEvaluation!==m&&g();if(G&&k()){A=function(){b.a.F.Xa(G,arguments.callee);e()};b.a.F.Ca(G,A);var D=w,w=function(){return!b.a.X(G)||D()}}return h};
b.Bb=function(a){return b.ma(a,b.j)};w=b.m.Kb;b.j[w]=b.m;b.j.fn={};b.j.fn[w]=b.j;b.b("dependentObservable",b.j);b.b("computed",b.j);b.b("isComputed",b.Bb);b.gb=function(a){0==arguments.length&&j(Error("When calling ko.toJS, pass the object you want to convert."));return ba(a,function(a){for(var c=0;b.$(a)&&10>c;c++)a=a();return a})};b.toJSON=function(a,d,c){a=b.gb(a);return b.a.xa(a,d,c)};b.b("toJS",b.gb);b.b("toJSON",b.toJSON);b.k={q:function(a){switch(b.a.u(a)){case "option":return a.__ko__hasDomDataOptionValue__===
m?b.a.f.get(a,b.c.options.sa):7>=b.a.Z?a.getAttributeNode("value").specified?a.value:a.text:a.value;case "select":return 0<=a.selectedIndex?b.k.q(a.options[a.selectedIndex]):I;default:return a.value}},T:function(a,d){switch(b.a.u(a)){case "option":switch(typeof d){case "string":b.a.f.set(a,b.c.options.sa,I);"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__;a.value=d;break;default:b.a.f.set(a,b.c.options.sa,d),a.__ko__hasDomDataOptionValue__=m,a.value="number"===typeof d?
d:""}break;case "select":for(var c=a.options.length-1;0<=c;c--)if(b.k.q(a.options[c])==d){a.selectedIndex=c;break}break;default:if(d===p||d===I)d="";a.value=d}}};b.b("selectExtensions",b.k);b.b("selectExtensions.readValue",b.k.q);b.b("selectExtensions.writeValue",b.k.T);var ka=/\@ko_token_(\d+)\@/g,na=["true","false"],oa=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;b.g={Q:[],aa:function(a){var d=b.a.D(a);if(3>d.length)return[];"{"===d.charAt(0)&&(d=d.substring(1,d.length-1));a=[];for(var c=
p,e,f=0;f<d.length;f++){var g=d.charAt(f);if(c===p)switch(g){case '"':case "'":case "/":c=f,e=g}else if(g==e&&"\\"!==d.charAt(f-1)){g=d.substring(c,f+1);a.push(g);var h="@ko_token_"+(a.length-1)+"@",d=d.substring(0,c)+h+d.substring(f+1),f=f-(g.length-h.length),c=p}}e=c=p;for(var k=0,l=p,f=0;f<d.length;f++){g=d.charAt(f);if(c===p)switch(g){case "{":c=f;l=g;e="}";break;case "(":c=f;l=g;e=")";break;case "[":c=f,l=g,e="]"}g===l?k++:g===e&&(k--,0===k&&(g=d.substring(c,f+1),a.push(g),h="@ko_token_"+(a.length-
1)+"@",d=d.substring(0,c)+h+d.substring(f+1),f-=g.length-h.length,c=p))}e=[];d=d.split(",");c=0;for(f=d.length;c<f;c++)k=d[c],l=k.indexOf(":"),0<l&&l<k.length-1?(g=k.substring(l+1),e.push({key:P(k.substring(0,l),a),value:P(g,a)})):e.push({unknown:P(k,a)});return e},ba:function(a){var d="string"===typeof a?b.g.aa(a):a,c=[];a=[];for(var e,f=0;e=d[f];f++)if(0<c.length&&c.push(","),e.key){var g;a:{g=e.key;var h=b.a.D(g);switch(h.length&&h.charAt(0)){case "'":case '"':break a;default:g="'"+h+"'"}}e=e.value;
c.push(g);c.push(":");c.push(e);e=b.a.D(e);0<=b.a.i(na,b.a.D(e).toLowerCase())?e=r:(h=e.match(oa),e=h===p?r:h[1]?"Object("+h[1]+")"+h[2]:e);e&&(0<a.length&&a.push(", "),a.push(g+" : function(__ko_value) { "+e+" = __ko_value; }"))}else e.unknown&&c.push(e.unknown);d=c.join("");0<a.length&&(d=d+", '_ko_property_writers' : { "+a.join("")+" } ");return d},Eb:function(a,d){for(var c=0;c<a.length;c++)if(b.a.D(a[c].key)==d)return m;return r},ea:function(a,d,c,e,f){if(!a||!b.Ra(a)){if((a=d()._ko_property_writers)&&
a[c])a[c](e)}else(!f||a.t()!==e)&&a(e)}};b.b("expressionRewriting",b.g);b.b("expressionRewriting.bindingRewriteValidators",b.g.Q);b.b("expressionRewriting.parseObjectLiteral",b.g.aa);b.b("expressionRewriting.preProcessBindings",b.g.ba);b.b("jsonExpressionRewriting",b.g);b.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",b.g.ba);var K="\x3c!--test--\x3e"===y.createComment("test").text,ja=K?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,ia=K?/^\x3c!--\s*\/ko\s*--\x3e$/:
/^\s*\/ko\s*$/,pa={ul:m,ol:m};b.e={I:{},childNodes:function(a){return B(a)?aa(a):a.childNodes},Y:function(a){if(B(a)){a=b.e.childNodes(a);for(var d=0,c=a.length;d<c;d++)b.removeNode(a[d])}else b.a.ka(a)},N:function(a,d){if(B(a)){b.e.Y(a);for(var c=a.nextSibling,e=0,f=d.length;e<f;e++)c.parentNode.insertBefore(d[e],c)}else b.a.N(a,d)},Va:function(a,b){B(a)?a.parentNode.insertBefore(b,a.nextSibling):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},Pa:function(a,d,c){c?B(a)?a.parentNode.insertBefore(d,
c.nextSibling):c.nextSibling?a.insertBefore(d,c.nextSibling):a.appendChild(d):b.e.Va(a,d)},firstChild:function(a){return!B(a)?a.firstChild:!a.nextSibling||H(a.nextSibling)?p:a.nextSibling},nextSibling:function(a){B(a)&&(a=$(a));return a.nextSibling&&H(a.nextSibling)?p:a.nextSibling},jb:function(a){return(a=B(a))?a[1]:p},Ta:function(a){if(pa[b.a.u(a)]){var d=a.firstChild;if(d){do if(1===d.nodeType){var c;c=d.firstChild;var e=p;if(c){do if(e)e.push(c);else if(B(c)){var f=$(c,m);f?c=f:e=[c]}else H(c)&&
(e=[c]);while(c=c.nextSibling)}if(c=e){e=d.nextSibling;for(f=0;f<c.length;f++)e?a.insertBefore(c[f],e):a.appendChild(c[f])}}while(d=d.nextSibling)}}}};b.b("virtualElements",b.e);b.b("virtualElements.allowedBindings",b.e.I);b.b("virtualElements.emptyNode",b.e.Y);b.b("virtualElements.insertAfter",b.e.Pa);b.b("virtualElements.prepend",b.e.Va);b.b("virtualElements.setDomNodeChildren",b.e.N);b.J=function(){this.Ha={}};b.a.extend(b.J.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind")!=
p;case 8:return b.e.jb(a)!=p;default:return r}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):p},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return b.e.jb(a);default:return p}},parseBindingsString:function(a,d,c){try{var e;if(!(e=this.Ha[a])){var f=this.Ha,g,h="with($context){with($data||{}){return{"+b.g.ba(a)+"}}}";g=new Function("$context","$element",h);e=f[a]=g}return e(d,c)}catch(k){j(Error("Unable to parse bindings.\nMessage: "+
k+";\nBindings value: "+a))}}});b.J.instance=new b.J;b.b("bindingProvider",b.J);b.c={};b.z=function(a,d,c){d?(b.a.extend(this,d),this.$parentContext=d,this.$parent=d.$data,this.$parents=(d.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=a,this.ko=b);this.$data=a;c&&(this[c]=a)};b.z.prototype.createChildContext=function(a,d){return new b.z(a,this,d)};b.z.prototype.extend=function(a){var d=b.a.extend(new b.z,this);return b.a.extend(d,a)};b.eb=function(a,d){if(2==
arguments.length)b.a.f.set(a,"__ko_bindingContext__",d);else return b.a.f.get(a,"__ko_bindingContext__")};b.Fa=function(a,d,c){1===a.nodeType&&b.e.Ta(a);return X(a,d,c,m)};b.Ea=function(a,b){(1===b.nodeType||8===b.nodeType)&&Z(a,b,m)};b.Da=function(a,b){b&&(1!==b.nodeType&&8!==b.nodeType)&&j(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node"));b=b||x.document.body;Y(a,b,m)};b.ja=function(a){switch(a.nodeType){case 1:case 8:var d=b.eb(a);if(d)return d;
if(a.parentNode)return b.ja(a.parentNode)}return I};b.pb=function(a){return(a=b.ja(a))?a.$data:I};b.b("bindingHandlers",b.c);b.b("applyBindings",b.Da);b.b("applyBindingsToDescendants",b.Ea);b.b("applyBindingsToNode",b.Fa);b.b("contextFor",b.ja);b.b("dataFor",b.pb);var fa={"class":"className","for":"htmlFor"};b.c.attr={update:function(a,d){var c=b.a.d(d())||{},e;for(e in c)if("string"==typeof e){var f=b.a.d(c[e]),g=f===r||f===p||f===I;g&&a.removeAttribute(e);8>=b.a.Z&&e in fa?(e=fa[e],g?a.removeAttribute(e):
a[e]=f):g||a.setAttribute(e,f.toString());"name"===e&&b.a.ab(a,g?"":f.toString())}}};b.c.checked={init:function(a,d,c){b.a.n(a,"click",function(){var e;if("checkbox"==a.type)e=a.checked;else if("radio"==a.type&&a.checked)e=a.value;else return;var f=d(),g=b.a.d(f);"checkbox"==a.type&&g instanceof Array?(e=b.a.i(g,a.value),a.checked&&0>e?f.push(a.value):!a.checked&&0<=e&&f.splice(e,1)):b.g.ea(f,c,"checked",e,m)});"radio"==a.type&&!a.name&&b.c.uniqueName.init(a,u(m))},update:function(a,d){var c=b.a.d(d());
"checkbox"==a.type?a.checked=c instanceof Array?0<=b.a.i(c,a.value):c:"radio"==a.type&&(a.checked=a.value==c)}};b.c.css={update:function(a,d){var c=b.a.d(d());if("object"==typeof c)for(var e in c){var f=b.a.d(c[e]);b.a.da(a,e,f)}else c=String(c||""),b.a.da(a,a.__ko__cssValue,r),a.__ko__cssValue=c,b.a.da(a,c,m)}};b.c.enable={update:function(a,d){var c=b.a.d(d());c&&a.disabled?a.removeAttribute("disabled"):!c&&!a.disabled&&(a.disabled=m)}};b.c.disable={update:function(a,d){b.c.enable.update(a,function(){return!b.a.d(d())})}};
b.c.event={init:function(a,d,c,e){var f=d()||{},g;for(g in f)(function(){var f=g;"string"==typeof f&&b.a.n(a,f,function(a){var g,n=d()[f];if(n){var q=c();try{var s=b.a.L(arguments);s.unshift(e);g=n.apply(e,s)}finally{g!==m&&(a.preventDefault?a.preventDefault():a.returnValue=r)}q[f+"Bubble"]===r&&(a.cancelBubble=m,a.stopPropagation&&a.stopPropagation())}})})()}};b.c.foreach={Sa:function(a){return function(){var d=a(),c=b.a.ua(d);if(!c||"number"==typeof c.length)return{foreach:d,templateEngine:b.C.oa};
b.a.d(d);return{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:b.C.oa}}},init:function(a,d){return b.c.template.init(a,b.c.foreach.Sa(d))},update:function(a,d,c,e,f){return b.c.template.update(a,b.c.foreach.Sa(d),c,e,f)}};b.g.Q.foreach=r;b.e.I.foreach=m;b.c.hasfocus={init:function(a,d,c){function e(e){a.__ko_hasfocusUpdating=m;var f=a.ownerDocument;"activeElement"in
f&&(e=f.activeElement===a);f=d();b.g.ea(f,c,"hasfocus",e,m);a.__ko_hasfocusUpdating=r}var f=e.bind(p,m),g=e.bind(p,r);b.a.n(a,"focus",f);b.a.n(a,"focusin",f);b.a.n(a,"blur",g);b.a.n(a,"focusout",g)},update:function(a,d){var c=b.a.d(d());a.__ko_hasfocusUpdating||(c?a.focus():a.blur(),b.r.K(b.a.Ba,p,[a,c?"focusin":"focusout"]))}};b.c.html={init:function(){return{controlsDescendantBindings:m}},update:function(a,d){b.a.ca(a,d())}};var da="__ko_withIfBindingData";Q("if");Q("ifnot",r,m);Q("with",m,r,function(a,
b){return a.createChildContext(b)});b.c.options={update:function(a,d,c){"select"!==b.a.u(a)&&j(Error("options binding applies only to SELECT elements"));for(var e=0==a.length,f=b.a.V(b.a.fa(a.childNodes,function(a){return a.tagName&&"option"===b.a.u(a)&&a.selected}),function(a){return b.k.q(a)||a.innerText||a.textContent}),g=a.scrollTop,h=b.a.d(d());0<a.length;)b.A(a.options[0]),a.remove(0);if(h){c=c();var k=c.optionsIncludeDestroyed;"number"!=typeof h.length&&(h=[h]);if(c.optionsCaption){var l=y.createElement("option");
b.a.ca(l,c.optionsCaption);b.k.T(l,I);a.appendChild(l)}d=0;for(var n=h.length;d<n;d++){var q=h[d];if(!q||!q._destroy||k){var l=y.createElement("option"),s=function(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c},v=s(q,c.optionsValue,q);b.k.T(l,b.a.d(v));q=s(q,c.optionsText,v);b.a.cb(l,q);a.appendChild(l)}}h=a.getElementsByTagName("option");d=k=0;for(n=h.length;d<n;d++)0<=b.a.i(f,b.k.q(h[d]))&&(b.a.bb(h[d],m),k++);a.scrollTop=g;e&&"value"in c&&ea(a,b.a.ua(c.value),m);b.a.ub(a)}}};
b.c.options.sa="__ko.optionValueDomData__";b.c.selectedOptions={init:function(a,d,c){b.a.n(a,"change",function(){var e=d(),f=[];b.a.o(a.getElementsByTagName("option"),function(a){a.selected&&f.push(b.k.q(a))});b.g.ea(e,c,"value",f)})},update:function(a,d){"select"!=b.a.u(a)&&j(Error("values binding applies only to SELECT elements"));var c=b.a.d(d());c&&"number"==typeof c.length&&b.a.o(a.getElementsByTagName("option"),function(a){var d=0<=b.a.i(c,b.k.q(a));b.a.bb(a,d)})}};b.c.style={update:function(a,
d){var c=b.a.d(d()||{}),e;for(e in c)if("string"==typeof e){var f=b.a.d(c[e]);a.style[e]=f||""}}};b.c.submit={init:function(a,d,c,e){"function"!=typeof d()&&j(Error("The value for a submit binding must be a function"));b.a.n(a,"submit",function(b){var c,h=d();try{c=h.call(e,a)}finally{c!==m&&(b.preventDefault?b.preventDefault():b.returnValue=r)}})}};b.c.text={update:function(a,d){b.a.cb(a,d())}};b.e.I.text=m;b.c.uniqueName={init:function(a,d){if(d()){var c="ko_unique_"+ ++b.c.uniqueName.ob;b.a.ab(a,
c)}}};b.c.uniqueName.ob=0;b.c.value={init:function(a,d,c){function e(){h=r;var e=d(),f=b.k.q(a);b.g.ea(e,c,"value",f)}var f=["change"],g=c().valueUpdate,h=r;g&&("string"==typeof g&&(g=[g]),b.a.P(f,g),f=b.a.Ga(f));if(b.a.Z&&("input"==a.tagName.toLowerCase()&&"text"==a.type&&"off"!=a.autocomplete&&(!a.form||"off"!=a.form.autocomplete))&&-1==b.a.i(f,"propertychange"))b.a.n(a,"propertychange",function(){h=m}),b.a.n(a,"blur",function(){h&&e()});b.a.o(f,function(c){var d=e;b.a.Ob(c,"after")&&(d=function(){setTimeout(e,
0)},c=c.substring(5));b.a.n(a,c,d)})},update:function(a,d){var c="select"===b.a.u(a),e=b.a.d(d()),f=b.k.q(a),g=e!=f;0===e&&(0!==f&&"0"!==f)&&(g=m);g&&(f=function(){b.k.T(a,e)},f(),c&&setTimeout(f,0));c&&0<a.length&&ea(a,e,r)}};b.c.visible={update:function(a,d){var c=b.a.d(d()),e="none"!=a.style.display;c&&!e?a.style.display="":!c&&e&&(a.style.display="none")}};b.c.click={init:function(a,d,c,e){return b.c.event.init.call(this,a,function(){var a={};a.click=d();return a},c,e)}};b.v=function(){};b.v.prototype.renderTemplateSource=
function(){j(Error("Override renderTemplateSource"))};b.v.prototype.createJavaScriptEvaluatorBlock=function(){j(Error("Override createJavaScriptEvaluatorBlock"))};b.v.prototype.makeTemplateSource=function(a,d){if("string"==typeof a){d=d||y;var c=d.getElementById(a);c||j(Error("Cannot find template with ID "+a));return new b.l.h(c)}if(1==a.nodeType||8==a.nodeType)return new b.l.O(a);j(Error("Unknown template type: "+a))};b.v.prototype.renderTemplate=function(a,b,c,e){a=this.makeTemplateSource(a,e);
return this.renderTemplateSource(a,b,c)};b.v.prototype.isTemplateRewritten=function(a,b){return this.allowTemplateRewriting===r?m:this.makeTemplateSource(a,b).data("isRewritten")};b.v.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c);b=b(a.text());a.text(b);a.data("isRewritten",m)};b.b("templateEngine",b.v);var qa=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,ra=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;b.za={vb:function(a,
d,c){d.isTemplateRewritten(a,c)||d.rewriteTemplate(a,function(a){return b.za.Gb(a,d)},c)},Gb:function(a,b){return a.replace(qa,function(a,e,f,g,h,k,l){return W(l,e,b)}).replace(ra,function(a,e){return W(e,"\x3c!-- ko --\x3e",b)})},kb:function(a){return b.s.ra(function(d,c){d.nextSibling&&b.Fa(d.nextSibling,a,c)})}};b.b("__tr_ambtns",b.za.kb);b.l={};b.l.h=function(a){this.h=a};b.l.h.prototype.text=function(){var a=b.a.u(this.h),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.h[a];
var d=arguments[0];"innerHTML"===a?b.a.ca(this.h,d):this.h[a]=d};b.l.h.prototype.data=function(a){if(1===arguments.length)return b.a.f.get(this.h,"templateSourceData_"+a);b.a.f.set(this.h,"templateSourceData_"+a,arguments[1])};b.l.O=function(a){this.h=a};b.l.O.prototype=new b.l.h;b.l.O.prototype.text=function(){if(0==arguments.length){var a=b.a.f.get(this.h,"__ko_anon_template__")||{};a.Aa===I&&a.ia&&(a.Aa=a.ia.innerHTML);return a.Aa}b.a.f.set(this.h,"__ko_anon_template__",{Aa:arguments[0]})};b.l.h.prototype.nodes=
function(){if(0==arguments.length)return(b.a.f.get(this.h,"__ko_anon_template__")||{}).ia;b.a.f.set(this.h,"__ko_anon_template__",{ia:arguments[0]})};b.b("templateSources",b.l);b.b("templateSources.domElement",b.l.h);b.b("templateSources.anonymousTemplate",b.l.O);var O;b.wa=function(a){a!=I&&!(a instanceof b.v)&&j(Error("templateEngine must inherit from ko.templateEngine"));O=a};b.va=function(a,d,c,e,f){c=c||{};(c.templateEngine||O)==I&&j(Error("Set a template engine before calling renderTemplate"));
f=f||"replaceChildren";if(e){var g=N(e);return b.j(function(){var h=d&&d instanceof b.z?d:new b.z(b.a.d(d)),k="function"==typeof a?a(h.$data,h):a,h=T(e,f,k,h,c);"replaceNode"==f&&(e=h,g=N(e))},p,{Ka:function(){return!g||!b.a.X(g)},W:g&&"replaceNode"==f?g.parentNode:g})}return b.s.ra(function(e){b.va(a,d,c,e,"replaceNode")})};b.Mb=function(a,d,c,e,f){function g(a,b){U(b,k);c.afterRender&&c.afterRender(b,a)}function h(d,e){k=f.createChildContext(b.a.d(d),c.as);k.$index=e;var g="function"==typeof a?
a(d,k):a;return T(p,"ignoreTargetNode",g,k,c)}var k;return b.j(function(){var a=b.a.d(d)||[];"undefined"==typeof a.length&&(a=[a]);a=b.a.fa(a,function(a){return c.includeDestroyed||a===I||a===p||!b.a.d(a._destroy)});b.r.K(b.a.$a,p,[e,a,h,c,g])},p,{W:e})};b.c.template={init:function(a,d){var c=b.a.d(d());if("string"!=typeof c&&!c.name&&(1==a.nodeType||8==a.nodeType))c=1==a.nodeType?a.childNodes:b.e.childNodes(a),c=b.a.Hb(c),(new b.l.O(a)).nodes(c);return{controlsDescendantBindings:m}},update:function(a,
d,c,e,f){d=b.a.d(d());c={};e=m;var g,h=p;"string"!=typeof d&&(c=d,d=c.name,"if"in c&&(e=b.a.d(c["if"])),e&&"ifnot"in c&&(e=!b.a.d(c.ifnot)),g=b.a.d(c.data));"foreach"in c?h=b.Mb(d||a,e&&c.foreach||[],c,a,f):e?(f="data"in c?f.createChildContext(g,c.as):f,h=b.va(d||a,f,c,a)):b.e.Y(a);f=h;(g=b.a.f.get(a,"__ko__templateComputedDomDataKey__"))&&"function"==typeof g.B&&g.B();b.a.f.set(a,"__ko__templateComputedDomDataKey__",f&&f.pa()?f:I)}};b.g.Q.template=function(a){a=b.g.aa(a);return 1==a.length&&a[0].unknown||
b.g.Eb(a,"name")?p:"This template engine does not support anonymous templates nested within its templates"};b.e.I.template=m;b.b("setTemplateEngine",b.wa);b.b("renderTemplate",b.va);b.a.Ja=function(a,b,c){a=a||[];b=b||[];return a.length<=b.length?S(a,b,"added","deleted",c):S(b,a,"deleted","added",c)};b.b("utils.compareArrays",b.a.Ja);b.a.$a=function(a,d,c,e,f){function g(a,b){t=l[b];w!==b&&(z[a]=t);t.na(w++);M(t.M);s.push(t);A.push(t)}function h(a,c){if(a)for(var d=0,e=c.length;d<e;d++)c[d]&&b.a.o(c[d].M,
function(b){a(b,d,c[d].U)})}d=d||[];e=e||{};var k=b.a.f.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===I,l=b.a.f.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],n=b.a.V(l,function(a){return a.U}),q=b.a.Ja(n,d),s=[],v=0,w=0,B=[],A=[];d=[];for(var z=[],n=[],t,D=0,C,E;C=q[D];D++)switch(E=C.moved,C.status){case "deleted":E===I&&(t=l[v],t.j&&t.j.B(),B.push.apply(B,M(t.M)),e.beforeRemove&&(d[D]=t,A.push(t)));v++;break;case "retained":g(D,v++);break;case "added":E!==I?
g(D,E):(t={U:C.value,na:b.m(w++)},s.push(t),A.push(t),k||(n[D]=t))}h(e.beforeMove,z);b.a.o(B,e.beforeRemove?b.A:b.removeNode);for(var D=0,k=b.e.firstChild(a),H;t=A[D];D++){t.M||b.a.extend(t,ha(a,c,t.U,f,t.na));for(v=0;q=t.M[v];k=q.nextSibling,H=q,v++)q!==k&&b.e.Pa(a,q,H);!t.Ab&&f&&(f(t.U,t.M,t.na),t.Ab=m)}h(e.beforeRemove,d);h(e.afterMove,z);h(e.afterAdd,n);b.a.f.set(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult",s)};b.b("utils.setDomNodeChildrenFromArrayMapping",b.a.$a);b.C=function(){this.allowTemplateRewriting=
r};b.C.prototype=new b.v;b.C.prototype.renderTemplateSource=function(a){var d=!(9>b.a.Z)&&a.nodes?a.nodes():p;if(d)return b.a.L(d.cloneNode(m).childNodes);a=a.text();return b.a.ta(a)};b.C.oa=new b.C;b.wa(b.C.oa);b.b("nativeTemplateEngine",b.C);b.qa=function(){var a=this.Db=function(){if("undefined"==typeof F||!F.tmpl)return 0;try{if(0<=F.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,c,e){e=e||{};2>a&&j(Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."));
var f=b.data("precompiled");f||(f=b.text()||"",f=F.template(p,"{{ko_with $item.koBindingContext}}"+f+"{{/ko_with}}"),b.data("precompiled",f));b=[c.$data];c=F.extend({koBindingContext:c},e.templateOptions);c=F.tmpl(f,b,c);c.appendTo(y.createElement("div"));F.fragments={};return c};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,b){y.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(F.tmpl.tag.ko_code=
{open:"__.push($1 || '');"},F.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};b.qa.prototype=new b.v;w=new b.qa;0<w.Db&&b.wa(w);b.b("jqueryTmplTemplateEngine",b.qa)}"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?L(module.exports||exports):"function"===typeof define&&define.amd?define("knockout",["exports"],L):L(x.ko={});m;
})();

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/FeatureRef/FormatUtils",["require","exports","VSS/Diag","VSS/Utils/Culture","VSS/Utils/Number","VSS/Utils/String"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.FormatUtils=void 0;var e;(function(n){function t(t,r){var u=f.localeFormat("{0:n"+r+"}",t);return u.replace(n._numberFormatRegexp,"")}function e(t){var i,r=typeof t=="string"?u.parseLocale(t):Number(t);return!t||isNaN(r)?i="":(i=n.formatNumberForDisplay(r,n.REMAINING_WORK_PRECISION),i==="0"&&(i="")),i}n._numberFormatRegexp=new RegExp("(\\"+r.getCurrentCulture().numberFormat.NumberDecimalSeparator+"0*|0+)$");n.REMAINING_WORK_PRECISION=2;n.formatNumberForDisplay=t;n.formatRemainingWorkForDisplay=e})(e=t.FormatUtils||(t.FormatUtils={}))});

define("Charts/ColorUtilities",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.ColorUtilities=void 0;var i=function(){function n(){}return n.selectForegroundColor=function(n){var r=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,t,i,r){return t+t+i+i+r+r}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),i;return t!=null?(i=t.splice(1,t.length-1).map(function(n){return parseInt(n,16)}),this.getAccessibleContrastColor(i)):"#000000"},n.getAccessibleContrastColor=function(t){var i=(n.getRelativeLuminance([255,255,255])+.05)/(n.getRelativeLuminance(t)+.05);return i>4.5?"#FFFFFF":"#000000"},n.getRelativeLuminance=function(n){var t=n.map(function(n){return n=n/255,n<.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)});return.2126*t[0]+.7152*t[1]+.0722*t[2]},n}();t.ColorUtilities=i});

define("Presentation/Scripts/TFS/TFS.UI.Controls.Grid.Utils",["require","exports","VSS/Utils/UI"],function(n,t,i){function r(n,t,r,u){var e=u-1,f=null,o;switch(n.keyCode){case i.KeyCode.UP:f=Math.max(t-r,t%r);break;case i.KeyCode.DOWN:o=t+r;f=o<=e?o:t;break;case i.KeyCode.LEFT:f=Math.max(t-1,0);break;case i.KeyCode.RIGHT:f=Math.min(t+1,e);break;case i.KeyCode.HOME:f=0;break;case i.KeyCode.END:f=e}return f}Object.defineProperty(t,"__esModule",{value:!0});t.interpretGridKeyPress=void 0;t.interpretGridKeyPress=r});

define("Presentation/Scripts/TFS/TFS.UI.Controls.ColorPicker",["require","exports","VSS/Controls","VSS/Utils/String","VSS/Utils/UI","VSS/Context","VSS/Controls/PopupContent","Charts/ColorUtilities","Presentation/Scripts/TFS/TFS.UI.Controls.Grid.Utils","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation"],function(n,t,i,r,u,f,e,o,s,h){var l,v,c,p,w,b,k,a,y;Object.defineProperty(t,"__esModule",{value:!0});t.ColorComboView=t.ColorPaletteView=t.DefinedPaletteColorPickerControl=t.PaletteColorPickerControl=t.ColorPickerControl=t.PaletteTemplate=t.AccessibilityColor=t.Color=t.Rgb=void 0;l=function(){function n(t,i,u){if(t<0||t>255)throw Error(r.format("Red value must be between {0} and {1} inclusively.",n.MinValue,n.MaxValue));if(i<0||i>255)throw Error(r.format("Green value must be between {0} and {1} inclusively.",n.MinValue,n.MaxValue));if(u<0||u>255)throw Error(r.format("Blue value must be between {0} and {1} inclusively.",n.MinValue,n.MaxValue));this.red=t;this.green=i;this.blue=u}return n.prototype.getRed=function(){return this.red},n.prototype.getGreen=function(){return this.green},n.prototype.getBlue=function(){return this.blue},n.MinValue=0,n.MaxValue=255,n}();t.Rgb=l;v=function(){function n(n){if(n==null)throw new Error("color must be defined");if(typeof n=="string")this._convertStringColorToRgb(n);else if(n instanceof l)this.value=n;else throw new Error("color not in a known type");}return n.prototype.asHex=function(){return"#"+(16777216+(this.value.getRed()<<16)+(this.value.getGreen()<<8)+this.value.getBlue()).toString(16).slice(1)},n.prototype.asRgb=function(){return r.format("rgb({0},{1},{2})",this.value.getRed(),this.value.getGreen(),this.value.getBlue())},n.prototype._convertStringColorToRgb=function(n){var t;if(n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,t,i,r){return t+t+i+i+r+r}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),t!=null)this.value=new l(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));else throw new Error("Color in string only support Hex format");},n.prototype.equals=function(n){return n!=null&&this.asHex()===n.asHex()},n.prototype.getRed=function(){return this.value.getRed()},n.prototype.getGreen=function(){return this.value.getGreen()},n.prototype.getBlue=function(){return this.value.getBlue()},n.prototype.convertToGrayscale=function(){var i=this.getRed()+this.getGreen()+this.getBlue(),t=Math.floor(i/3),r=new l(t,t,t);return new n(r)},n.prototype.invert=function(){return new n(new l(l.MaxValue-this.getRed(),l.MaxValue-this.getGreen(),l.MaxValue-this.getBlue()))},n.prototype.toBlackOrWhite=function(){var t=new n(o.ColorUtilities.getAccessibleContrastColor([this.getRed(),this.getGreen(),this.getBlue()]));return t.invert()},n.prototype.isLightColor=function(){return this.getRed()>248&&this.getBlue()>248&&this.getGreen()>248},n}();t.Color=v;c=function(n){function t(t,i){var r=this,f,u;f=t instanceof v?t.asHex():t;r=__construct(this,n,[f]);for(u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.displayName=i,r}return __extends(t,n),t.prototype.getDisplayName=function(){return this.displayName==null?n.prototype.asHex.call(this):this.displayName},t}(v);t.AccessibilityColor=c,function(n){n[n.Full=0]="Full";n[n.Muted=1]="Muted";n[n.Vibrant=2]="Vibrant"}(p=t.PaletteTemplate||(t.PaletteTemplate={}));w=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);if(t==null)throw new Error("ColorPickerControlOptions is required");return i}return __extends(t,n),t.prototype.getColor=function(){return this.selectedColor},t.prototype.setColor=function(n){this.selectedColor=n instanceof v?n:new c(n)},t}(i.Control);t.ColorPickerControl=w;b=function(n){function t(i){var u=this,o,f,e,s;if(i==null)throw new Error("PaletteColorPickerControlOptions is required");u=__construct(this,n,[i]);for(o in u)u.hasOwnProperty(o)&&(this[o]=u[o]);if(u._isEnabled=!i.isDisabled,i.palette==null||i.palette.length<=0)throw new Error("Palette must be defined with at least one entry");for(f=0;f<i.palette.length;f++)e=i.palette[f],e instanceof c||(typeof e=="string"?i.palette[f]=new c(e):e instanceof v&&(i.palette[f]=new c(e)));if(i.defaultColor!=null&&(i.allowNonPaletteDefaultColor||t.isColorPresentInPalette(i.defaultColor,i.palette))||(i.defaultColor=i.palette[0]),!u.isInColumnRange(i.maximumColumns))throw new Error(r.format("PaletteColorPicker support {0} to {1} columns inclusively",t.MinimumNumberColumn,t.MaximumNumberColumn));return s=function(n){return function(){u._comboView!=null&&u._comboView.getElement().attr("aria-expanded",n?"true":"false")}},i.onClose=u.wrapColorEventCallback(i.onClose,s(!1)),i.onOpen=u.wrapColorEventCallback(i.onOpen,s(!0)),u.options=i,u}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.CssColorPickerPaletteControl},i))},t.prototype.initialize=function(){var t=this,r;n.prototype.initialize.call(this);this.options.triggerElement?(this.options.triggerElement.click(function(){return t.togglePalette()}),this.options.triggerElement.keydown(function(n){t.handleKeyOnTriggerElement(n)})):(r={clicked:function(){t.togglePalette()},keyDown:function(n){t.handleKeyOnTriggerElement(n)},comboWidth:this.options.comboWidth,comboHeight:this.options.comboHeight,ariaLabelPrefix:this.options.ariaLabelPrefix,isDisabled:!this.isEnabled()},this._comboView=i.Control.create(y,this.getElement(),r));this._createPaletteView(this.getElement());this.setColor(this.options.defaultColor);this._comboView&&this._paletteView&&this._comboView.getElement().attr("aria-owns",this._paletteView.getId());$("html").click(function(n){t.onClickOutsideColorPicker(n)})},t.prototype._createPaletteView=function(n){this._paletteView=i.Control.create(a,n,{paletteControl:this,paletteControlOptions:this.options,tooltipContainer:this.options.tooltipContainer})},t.prototype.setFocus=function(){this.options.triggerElement?this.options.triggerElement.focus():this._comboView.focus()},t.prototype.enableElement=function(t){n.prototype.enableElement.call(this,t);t==!1&&this._paletteView.hide();this._isEnabled=t},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.handleKeyOnTriggerElement=function(n){var f,t,i,r;if(n.keyCode===u.KeyCode.ENTER||n.keyCode===u.KeyCode.SPACE)this.togglePalette(),n.stopPropagation(),n.preventDefault();else if(n.altKey)n.keyCode===u.KeyCode.UP?this._paletteView.hide():n.altKey&&n.keyCode===u.KeyCode.DOWN&&this._paletteView.show();else if(f=this.getColor(),t=this.options.palette.indexOf(f),t=t>=0?t:0,i=s.interpretGridKeyPress(n,t,this.options.maximumColumns,this.options.palette.length),i!==null&&i!=t){r=this.options.palette[i];this.setColor(r);this.options.onColorSelected(this,r)}},t.prototype.wrapColorEventCallback=function(n,t){return function(i){t(i);n!=null&&n(i)}},t.prototype.onClickOutsideColorPicker=function(n){var i,u,r,f;this._paletteView.isVisible()&&(i=$(n.target),u=this.options.triggerElement&&i.closest(this.options.triggerElement).length>0,u||(i.hasClass(y.CssNameCombo)||i.hasClass(a.CssNamePalette)||i.closest("."+y.CssNameCombo).length!==0||i.closest("."+a.CssNamePalette).length!==0||this._paletteView.toggle(),r=i.closest("."+t.CssColorPickerPaletteControl),r.length!==0&&(f=$(r.get(0)).parent().attr("id"),$("."+a.CssNamePalette).each(function(n,i){var r=$(i),u=r.closest("."+t.CssColorPickerPaletteControl),e=$(u.get(0)).parent().attr("id");f!==e&&r.parent().hide()}))))},t.isColorPresentInPalette=function(n,t){if(n==null||t==null)return!1;var i=!1;return t.forEach(function(t){n.equals(t)&&(i=!0)}),i},t.prototype.isInColumnRange=function(n){return n>=t.MinimumNumberColumn&&n<=t.MaximumNumberColumn},t.prototype.togglePalette=function(){var i,n,t;this.isEnabled()&&(i=this.options.triggerElement?this.options.triggerElement:this._comboView.getElement(),n=$(this.getElement().find("."+a.CssNamePalette).get(0)),this._paletteView.toggle(),n.css("visibility","hidden"),t=this.getOffset(n,i),n.css("left",t.left),n.css("top",t.top),n.css("visibility","visible"),n.focus())},t.prototype.setColor=function(i){if(i==null)throw new Error("Color must be defined");i instanceof c&&this.options.palette.forEach(function(n){n.equals(i)&&(i=n)});n.prototype.setColor.call(this,i);this.options.triggerElement||this._comboView.setColor(i);t.isColorPresentInPalette(i,this.options.palette)&&this._paletteView.selectSingleColor(i)},t.prototype.getOffset=function(n,t){var o=0,r=n.outerWidth(),u=n.outerHeight(),s=t.outerHeight(),f=n[0].ownerDocument,h=f.documentElement,e=h.clientWidth+$(f).scrollLeft(),c=h.clientHeight+$(f).scrollTop(),i=t.offset();return i.top+=s,i.left-=Math.min(i.left,i.left+r>e&&e>r?Math.abs(i.left+r-e):0),i.top-=Math.min(i.top,i.top+u>c&&c>u?Math.abs(u+s-o):o),i},t.CssColorPickerPaletteControl="color-picker-control",t.MinimumNumberColumn=1,t.MaximumNumberColumn=12,t}(w);t.PaletteColorPickerControl=b;k=function(n){function t(i){var r=this,f,u;if(i==null)throw new Error("DefinedPaletteColorPickerControlOptions is required");f=t.getPaletteColorPickerControlOptions(i);f.onColorSelected=function(n,t){r.setColor(t);i.onColorSelected(n,t)};r=__construct(this,n,[f]);for(u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._options=i,r}return __extends(t,n),t.getPaletteColorPickerControlOptions=function(n){var i,r;return n.template===p.Full?(i=t.FullPaletteColors,r=11):n.template===p.Muted?(i=t.MutePaletteColors,r=11):n.template===p.Vibrant&&(i=t.VibrantPaletteColors,r=12),{maximumColumns:r,palette:i,onColorSelected:n.onColorSelected,onColorHover:n.onColorHover,defaultColor:n.defaultColor,allowNonPaletteDefaultColor:n.allowNonPaletteDefaultColor,onOpen:n.onOpen,onClose:n.onClose,comboWidth:n.comboWidth,comboHeight:n.comboHeight,triggerElement:n.triggerElement,tooltipContainer:n.tooltipContainer,ariaLabelPrefix:n.ariaLabelPrefix,isDisabled:n.disabled}},t.FullPaletteColors=[new c("#222222",h.Black),new c("#292E6B",h.Blue),new c("#009CCC",h.Turquoise),new c("#00643A",h.Teal),new c("#339947",h.Green),new c("#FBBC3D",h.Yellow),new c("#DB552C",h.Orange),new c("#7F1725",h.Red),new c("#EC008C",h.Pink),new c("#5C197B",h.Purple),new c("#51399F",h.Indigo),new c("#444444",r.format(h.TenPercentLighterColor,h.Black.toLowerCase())),new c("#1B478B",r.format(h.TenPercentLighterColor,h.Blue.toLowerCase())),new c("#43B4D5",r.format(h.TenPercentLighterColor,h.Turquoise.toLowerCase())),new c("#207752",r.format(h.TenPercentLighterColor,h.Teal.toLowerCase())),new c("#60AF49",r.format(h.TenPercentLighterColor,h.Green.toLowerCase())),new c("#FBD144",r.format(h.TenPercentLighterColor,h.Yellow.toLowerCase())),new c("#E87025",r.format(h.TenPercentLighterColor,h.Orange.toLowerCase())),new c("#B20B1E",r.format(h.TenPercentLighterColor,h.Red.toLowerCase())),new c("#EF33A3",r.format(h.TenPercentLighterColor,h.Pink.toLowerCase())),new c("#71338D",r.format(h.TenPercentLighterColor,h.Purple.toLowerCase())),new c("#6951AA",r.format(h.TenPercentLighterColor,h.Indigo.toLowerCase())),new c("#666666",r.format(h.TwentyPercentLighterColor,h.Black.toLowerCase())),new c("#0D60AB",r.format(h.TwentyPercentLighterColor,h.Blue.toLowerCase())),new c("#86CDDE",r.format(h.TwentyPercentLighterColor,h.Turquoise.toLowerCase())),new c("#56987D",r.format(h.TwentyPercentLighterColor,h.Teal.toLowerCase())),new c("#8DC54B",r.format(h.TwentyPercentLighterColor,h.Green.toLowerCase())),new c("#FBE74B",r.format(h.TwentyPercentLighterColor,h.Yellow.toLowerCase())),new c("#F58B1F",r.format(h.TwentyPercentLighterColor,h.Orange.toLowerCase())),new c("#E60017",r.format(h.TwentyPercentLighterColor,h.Red.toLowerCase())),new c("#F266BA",r.format(h.TwentyPercentLighterColor,h.Pink.toLowerCase())),new c("#9260A1",r.format(h.TwentyPercentLighterColor,h.Purple.toLowerCase())),new c("#8874C2",r.format(h.TwentyPercentLighterColor,h.Indigo.toLowerCase())),new c("#888888",r.format(h.FortyPercentLighterColor,h.Black.toLowerCase())),new c("#007ACC",r.format(h.FortyPercentLighterColor,h.Blue.toLowerCase())),new c("#C9E7E7",r.format(h.FortyPercentLighterColor,h.Turquoise.toLowerCase())),new c("#7CAF9A",r.format(h.FortyPercentLighterColor,h.Teal.toLowerCase())),new c("#A8CE4B",r.format(h.FortyPercentLighterColor,h.Green.toLowerCase())),new c("#FBFD52",r.format(h.FortyPercentLighterColor,h.Yellow.toLowerCase())),new c("#F7A24B",r.format(h.FortyPercentLighterColor,h.Orange.toLowerCase())),new c("#EB3345",r.format(h.FortyPercentLighterColor,h.Red.toLowerCase())),new c("#F599D1",r.format(h.FortyPercentLighterColor,h.Pink.toLowerCase())),new c("#AE88B9",r.format(h.FortyPercentLighterColor,h.Purple.toLowerCase())),new c("#AA9CDF",r.format(h.FortyPercentLighterColor,h.Indigo.toLowerCase())),new c("#AAAAAA",r.format(h.SixtyPercentLighterColor,h.Black.toLowerCase())),new c("#3F9BD8",r.format(h.SixtyPercentLighterColor,h.Blue.toLowerCase())),new c("#D6EDED",r.format(h.SixtyPercentLighterColor,h.Turquoise.toLowerCase())),new c("#9CC3B2",r.format(h.SixtyPercentLighterColor,h.Teal.toLowerCase())),new c("#C3D84C",r.format(h.SixtyPercentLighterColor,h.Green.toLowerCase())),new c("#FCFD7D",r.format(h.SixtyPercentLighterColor,h.Yellow.toLowerCase())),new c("#F9B978",r.format(h.SixtyPercentLighterColor,h.Orange.toLowerCase())),new c("#F06673",r.format(h.SixtyPercentLighterColor,h.Red.toLowerCase())),new c("#F9CCE8",r.format(h.SixtyPercentLighterColor,h.Pink.toLowerCase())),new c("#C7ABD0",r.format(h.SixtyPercentLighterColor,h.Purple.toLowerCase())),new c("#C0B6E9",r.format(h.SixtyPercentLighterColor,h.Indigo.toLowerCase())),new c("#CCCCCC",r.format(h.EightyPercentLighterColor,h.Black.toLowerCase())),new c("#7FBCE5",r.format(h.EightyPercentLighterColor,h.Blue.toLowerCase())),new c("#E4F3F3",r.format(h.EightyPercentLighterColor,h.Turquoise.toLowerCase())),new c("#BFD8CD",r.format(h.EightyPercentLighterColor,h.Teal.toLowerCase())),new c("#D7E587",r.format(h.EightyPercentLighterColor,h.Green.toLowerCase())),new c("#FCFEA8",r.format(h.EightyPercentLighterColor,h.Yellow.toLowerCase())),new c("#FBD0A5",r.format(h.EightyPercentLighterColor,h.Orange.toLowerCase())),new c("#F599A2",r.format(h.EightyPercentLighterColor,h.Red.toLowerCase())),new c("#FBDDEF",r.format(h.EightyPercentLighterColor,h.Pink.toLowerCase())),new c("#E0CAE7",r.format(h.EightyPercentLighterColor,h.Purple.toLowerCase())),new c("#DAD4F7",r.format(h.EightyPercentLighterColor,h.Indigo.toLowerCase()))],t.VibrantPaletteColors=[new c("#222222"),new c("#666666"),new c("#292E6B"),new c("#009CCC"),new c("#00643A"),new c("#339947"),new c("#FBBC3D"),new c("#DB552C"),new c("#7F1725"),new c("#EC008C"),new c("#5C197B"),new c("#51399F"),new c("#FFFFFF"),new c("#CCCCCC"),new c("#007ACC"),new c("#C9E7E7"),new c("#7CAF9A"),new c("#A8CE4B"),new c("#FBFD52"),new c("#F7A24B"),new c("#E60017"),new c("#F599D1"),new c("#AE88B9"),new c("#AA9CDF")],t.MutePaletteColors=[new c("#888888"),new c("#007ACC"),new c("#C9E7E7"),new c("#7CAF9A"),new c("#A8CE4B"),new c("#FBFD52"),new c("#F7A24B"),new c("#EB3345"),new c("#F599D1"),new c("#AE88B9"),new c("#AA9CDF"),new c("#AAAAAA"),new c("#3F9BD8"),new c("#D6EDED"),new c("#9CC3B2"),new c("#C3D84C"),new c("#FCFD7D"),new c("#F9B978"),new c("#F06673"),new c("#F9CCE8"),new c("#C7ABD0"),new c("#C0B6E9"),new c("#CCCCCC"),new c("#7FBCE5"),new c("#E4F3F3"),new c("#BFD8CD"),new c("#D7E587"),new c("#FCFEA8"),new c("#FBD0A5"),new c("#F599A2"),new c("#FBDDEF"),new c("#E0CAE7"),new c("#DAD4F7"),new c("#FFFFFF"),new c("#BFDDF2"),new c("#F1F9F9"),new c("#E3F5EE"),new c("#EBF2C3"),new c("#FEFED3"),new c("#FDE7D2"),new c("#FACCD0"),new c("#FDEEF7"),new c("#F5E5FB"),new c("#EDEAFF")],t}(b);t.DefinedPaletteColorPickerControl=k;a=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.paletteColorPickerControl=t.paletteControl,i.paletteColorPickerControlOptions=t.paletteControlOptions,i}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this.createHtml()},t.prototype.createHtml=function(){for(var r=$("<ul>").addClass(t.CssNamePalette).attr("tabindex",0).attr("role","grid").attr("aria-label",h.ColorPalleteLabel).attr("aria-rowcount",Math.ceil(this.paletteColorPickerControlOptions.palette.length/this.paletteColorPickerControlOptions.maximumColumns)).attr("aria-colcount",this.paletteColorPickerControlOptions.maximumColumns),o=this.paletteColorPickerControlOptions.palette,s=f.isHighContrastMode(),n=0;n<o.length;n++){var u=o[n],e=u.asHex(),i=$("<li>").addClass(t.CssNameSingleColor).attr("id","".concat(this.getElement().attr("id"),"-color-").concat(n)).attr(t.DataColor,e).css("background-color",e).attr("aria-label",u.getDisplayName());u.isLightColor()&&i.addClass(t.CssNameSingleColorBorder);this.highContrastSingleColor(s,e,i);n%this.paletteColorPickerControlOptions.maximumColumns==0&&i.addClass(t.CssNameSingleColorLast);r.append(i)}r.css("width",this.getWidth());r.appendTo(this.getElement());this.hide()},t.prototype.highContrastSingleColor=function(n,i,r){if(n){var f=$("<canvas>").attr("width",t.SingleColorSize-1).attr("height",t.SingleColorSize-1).addClass(t.CssNameSingleColorSvg),u=f.get(0).getContext("2d");u.beginPath();u.rect(0,0,t.SingleColorSize-1,t.SingleColorSize-1);u.fillStyle=i;u.fill();r.append(f)}},t.prototype.getWidth=function(){return this.paletteColorPickerControlOptions.maximumColumns*(t.SingleColorSize+t.SingleColorBorderSize+t.SingleColorMargin)+t.PalettePadding*2+2},t.prototype.show=function(){var n=this.getElement(),i,r;if(n.show(),this.addEvents(),this.attachParentEvents(),i=n.find("."+t.CssNamePalette).get(0),this._setTooltips(i),n.parent().get(0).blur(),i.focus(),r=n.find("."+t.CssNameSingleColorSelected),r.length&&this._setMouseEnterToColor(r),this.paletteColorPickerControlOptions.onOpen)this.paletteColorPickerControlOptions.onOpen(this.paletteColorPickerControl)},t.prototype._setTooltips=function(n){var i,r;if(this.tooltips=[],n&&this.paletteColorPickerControlOptions&&this.paletteColorPickerControlOptions.palette)for(i=0;i<n.children.length;i++)if(r=$(n.children[i]),r.hasClass(t.CssNameSingleColor)){var u=this.paletteColorPickerControlOptions.palette[i],f=this._getColorFromAttribute(r),o=u.asHex===f.asHex?u.getDisplayName():f.asHex();this.tooltips.push(e.RichContentTooltip.add(o,r,{setAriaDescribedBy:!1,menuContainer:this._options.tooltipContainer==null?null:$(this._options.tooltipContainer),autoWidth:!0}))}},t.prototype.hide=function(){if(this.getElement().hide(),this.removeEvents(),this.removeParentEvents(),this.tooltips&&this.tooltips.forEach(function(n){n.dispose()}),this.paletteColorPickerControlOptions.onClose)this.paletteColorPickerControlOptions.onClose(this.paletteColorPickerControl)},t.prototype.toggle=function(){this.isVisible()?(this.hide(),this._setMouseLeaveToSelectedColor()):this.show()},t.prototype.attachParentEvents=function(){var n=this;this.getElement().parents().on("scroll resize",function(){return n.onScrollOrMove()})},t.prototype.removeParentEvents=function(){var n=this;this.getElement().parents().off("scroll resize",function(){return n.onScrollOrMove()})},t.prototype.onScrollOrMove=function(){this.hide()},t.prototype.isVisible=function(){return this.getElement().is(":visible")},t.prototype.onColorSelected=function(n){var t=this.getColorHtmlFromTarget($(n.target)),i=this._getColorFromAttribute(t);this.colorSelected(i)},t.prototype.getColorHtmlFromTarget=function(n){if(n.hasClass(t.CssNameSingleColor))return n;var i=n.closest("."+t.CssNameSingleColor);if(i.length!==1)throw new Error("Cannot find any color on the target");return $(i.get(0))},t.prototype.colorSelected=function(n){this.paletteColorPickerControl.setColor(n);this.selectSingleColor(n);this.notifyColorSelectionChange(n);this.hide();this.paletteColorPickerControl.setFocus()},t.prototype.notifyColorSelectionChange=function(n){if(this.paletteColorPickerControlOptions.onColorSelected!=null)this.paletteColorPickerControlOptions.onColorSelected(this.paletteColorPickerControl,n)},t.prototype.onColorHover=function(n){n.stopPropagation();var t=this.getColorHtmlFromTarget($(n.target)),i=this._getColorFromAttribute(t);if(this.paletteColorPickerControlOptions.onColorHover!=null)this.paletteColorPickerControlOptions.onColorHover(this.paletteColorPickerControl,i)},t.prototype._getColorFromAttribute=function(n){var i=n.attr(t.DataColor);return new c(i)},t.prototype.addEvents=function(){var n=this;this.getElement().on(t.EventClick,"."+t.CssNameSingleColor,function(t){return n.onColorSelected(t)});this.getElement().on(t.EventHover,"."+t.CssNameSingleColor,function(t){return n.onColorHover(t)});this.getElement().on(t.EventKeyDown,function(t){return n.key(t)})},t.prototype.removeEvents=function(){this.getElement().off(t.EventClick);this.getElement().off(t.EventHover);this.getElement().off(t.EventKeyDown)},t.prototype.selectSingleColor=function(n){if(n==null)throw new Error("Color is required when selecting");var i=this.getElement().find(r.format('[{0}="{1}"]',t.DataColor,n.asHex()));if(i.length<=0)throw new Error("Color not found in the palette when selecting");this.selectHtmlColorElement($(i.get(0)))},t.prototype.selectHtmlColorElement=function(n){var i,r,u;this._setMouseLeaveToSelectedColor();this.getElement().find("."+t.CssNameSingleColorSelected).removeClass(t.CssNameSingleColorSelected).removeAttr("aria-selected");n.addClass(t.CssNameSingleColorSelected).attr("aria-selected","true");this.getElement().find("."+t.CssNameSingleColorSelectedInnerBorder).not("canvas").remove();this.getElement().find("."+t.CssNameSingleColorSelectedInnerBorder).removeClass(t.CssNameSingleColorSelectedInnerBorder);i=n.find("canvas");i.length===1?(i.addClass(t.CssNameSingleColorSelectedInnerBorder),this._setMouseEnterToColor(i)):(r=$("<div>").addClass(t.CssNameSingleColorSelectedInnerBorder),n.append(r),this._setMouseEnterToColor(n));u=this.getElement().find(".".concat(t.CssNamePalette));u.attr("aria-activedescendant",n.attr("id"))},t.prototype._setMouseEnterToColor=function(n){var t=n.offset(),i;t.left!==0&&t.top!==0&&(i=this._createCustomEvent("mouseover"),n[0].dispatchEvent(i))},t.prototype._setMouseLeaveToSelectedColor=function(){var i=this._createCustomEvent("mouseout"),n=this.getElement().find("."+t.CssNameSingleColorSelected);n.length&&n[0].dispatchEvent(i)},t.prototype._createCustomEvent=function(n){var t=null;try{t=new Event(n)}catch(i){t=document.createEvent("Event");t.initEvent(n,!0,!0)}return t},t.prototype.key=function(n){switch(n.which){case u.KeyCode.ENTER:case u.KeyCode.SPACE:var i=$(this.getElement().find("."+t.CssNameSingleColorSelected).get(0)),r=this._getColorFromAttribute(i);this.colorSelected(r);break;case u.KeyCode.ESCAPE:n.preventDefault();n.stopPropagation();this.toggle();this.paletteColorPickerControl.setFocus();break;case u.KeyCode.TAB:n.preventDefault();n.stopPropagation();this.toggle();this.findNextElementToFocus().focus();break;case u.KeyCode.LEFT:this._moveSelectedColorRelative(-1,0);break;case u.KeyCode.RIGHT:this._moveSelectedColorRelative(1,0);break;case u.KeyCode.UP:n.altKey?(this.hide(),this.paletteColorPickerControl.setFocus()):this._moveSelectedColorRelative(0,1);break;case u.KeyCode.DOWN:this._moveSelectedColorRelative(0,-1);break;case u.KeyCode.HOME:this._goToFirstElement();break;case u.KeyCode.END:this._goToLastElement();break;default:return}n.preventDefault();n.stopPropagation()},t.prototype._moveSelectedColorRelative=function(n,i){if(n===0&&i!==1&&i!==-1)throw new Error("y value supported is -1 or +1");if(i===0&&n!==1&&n!==-1)throw new Error("x value supported is -1 or +1");if(n!==0&&i!==0)throw new Error("Can only move one direction at a time");var u=$(this.getElement().find("."+t.CssNameSingleColorSelected).get(0)),f=$(this.getElement().find("."+t.CssNameSingleColor)),r;n===1&&(r=this._getRightSingleColor(u,f));n===-1&&(r=this._getLeftSingleColor(u,f));i===-1&&(r=this._getDownSingleColor(u,f));i===1&&(r=this._getUpSingleColor(u,f));r!=null&&this.selectHtmlColorElement(r)},t.prototype._getRightSingleColor=function(n,t){var i=n.next();return i.length===0&&(i=$(t.get(0))),i},t.prototype._getLeftSingleColor=function(n,t){var i=n.prev();return i.length===0&&(i=$(t.get(t.length-1))),i},t.prototype._getDownSingleColor=function(n,t){var i,r,u;return n.nextAll().length>=this.paletteColorPickerControlOptions.maximumColumns?i=n.nextAll().slice(this.paletteColorPickerControlOptions.maximumColumns-1,this.paletteColorPickerControlOptions.maximumColumns):(r=t.index(n),u=r%this.paletteColorPickerControlOptions.maximumColumns,i=$(t.get(u))),i},t.prototype._getUpSingleColor=function(n,t){var i;if(n.prevAll().length>=this.paletteColorPickerControlOptions.maximumColumns)i=n.prevAll().slice(this.paletteColorPickerControlOptions.maximumColumns-1,this.paletteColorPickerControlOptions.maximumColumns);else{var r=t.index(n),u=t.length,e=u/this.paletteColorPickerControlOptions.maximumColumns,o=u%this.paletteColorPickerControlOptions.maximumColumns,f=0;r>=o&&(f=-1);i=$(t.get(r+(Math.floor(e)+f)*this.paletteColorPickerControlOptions.maximumColumns))}return i},t.prototype._goToLastElement=function(){var i=$(this.getElement().find("."+t.CssNameSingleColor)),n=i.eq(i.length-1);return n!=null&&this.selectHtmlColorElement(n),n},t.prototype._goToFirstElement=function(){var n=$(this.getElement().find("."+t.CssNameSingleColor)).eq(0);return this.selectHtmlColorElement(n),n},t.prototype.findNextElementToFocus=function(){var n=$(document).find("a, button, :input, [tabindex]"),t=n.index(document.activeElement)+1;return t>=n.length&&(t=0),n.eq(t)},t.EventClick="click",t.EventHover="mouseover",t.EventKeyDown="keydown",t.CssNamePalette="color-picker-palette",t.CssNameSingleColor="color-picker-palette-single-color",t.CssNameSingleColorSvg="color-picker-palette-single-color-svg",t.CssNameSingleColorLast="color-picker-palette-single-color-last",t.CssNameSingleColorSelected="color-picker-palette-single-color-selected",t.CssNameSingleColorSelectedInnerBorder="color-picker-palette-single-color-selected-inner",t.CssNameSingleColorBorder="color-picker-palette-single-color-border",t.DataColor="data-hex-color",t.PalettePadding=2,t.SingleColorSize=20,t.SingleColorBorderSize=1,t.SingleColorMargin=1,t}(i.Control);t.ColorPaletteView=a;y=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.height=25,i.width=100,i.highContrastArrowComboWidth=36,i}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.CssNameCombo},i))},t.prototype.initialize=function(){var t=this._options.comboWidth||this.width,n=this._options.comboHeight||this.height;this.getElement().css("width",t).css("height",n).css("line-height",n+"px").attr("tabindex",0).attr("role","combobox").attr("readonly","readonly").attr("aria-haspopup","grid").attr("aria-expanded","false").attr("aria-label",this._options.ariaLabelPrefix).prop("disabled",this._options.isDisabled);this.richContentTooltip=e.RichContentTooltip.add(this._options.ariaLabelPrefix||"",this.getElement(),{});this.getElement().html("&nbsp;");f.isHighContrastMode()&&(this.canvasHighContrast=$("<canvas>").css("float","left").attr("width",t-this.highContrastArrowComboWidth).attr("height",n-1),this.getElement().append(this.canvasHighContrast));this.getElement().append($("<span>").addClass("bowtie-icon").addClass("bowtie-chevron-down-light").attr("role","button").css("line-height",n+"px"));this.attachEvents()},t.prototype.setColor=function(n){var i;if(n==null)throw new Error("Color must be defined");if(i=r.format(h.ColorPickerLabelFormat,this._options.ariaLabelPrefix,n.asHex()),this.getElement().css("background-color",n.asHex()).attr("aria-label",i),this.richContentTooltip.setTextContent(i),f.isHighContrastMode()){var u=this._options.comboWidth||this.width,e=this._options.comboHeight||this.height,t=this.canvasHighContrast.get(0).getContext("2d");t.beginPath();t.rect(0,0,u-this.highContrastArrowComboWidth,e-2);t.fillStyle=n.asHex();t.fill()}},t.prototype.attachEvents=function(){var n=this;this.getElement().click(function(){n._options.clicked()});this.getElement().on("keydown",function(t){n._options.keyDown(t)})},t.CssNameCombo="color-picker-combo",t}(i.Control);t.ColorComboView=y});

/*! knockout-secure-binding - v1.0.6 - 2017-08-24
 *  https://github.com/brianmhunt/knockout-secure-binding
 *  Copyright (c) 2013 - 2017 Brian M Hunt; License: MIT */
;(function(factory) {
    //AMD
    if (typeof define === "function" && define.amd) {
        define("knockoutSecureBinding",["knockout", "exports"], factory);
        //normal script tag
    } else {
        factory(ko);
    }
}(function(ko, exports, undefined) {
function value_of(e){return e instanceof Identifier||e instanceof Expression?e.get_value():e}function _object_map(e,t){if(!e)return e;var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n}function _virtualNodeBindingValue(e){var t=(commentNodesHaveTextProperty?e.text:e.nodeValue).match(startCommentRegex);return t?t[1]:null}function is_identifier_char(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<=9||"_"===e||"$"===e}function secureBindingsProvider(e){new ko.bindingProvider;e=e||{},this.attribute=e.attribute||"data-sbind",this.noVirtualElements=e.noVirtualElements||!1,this.globals=e.globals||{},this.bindings=e.bindings||ko.bindingHandlers}function registerBindings(e){ko.utils.extend(this.bindings,e)}function nodeHasBindings(e){var t;return e.nodeType===e.ELEMENT_NODE?e.getAttribute(this.attribute)||ko.components&&ko.components.getComponentNameForNode(e):e.nodeType===e.COMMENT_NODE?!this.noVirtualElements&&(t=(""+e.nodeValue||e.text).trim(),0===t.indexOf("ko ")):void 0}function getBindingsString(e){switch(e.nodeType){case e.ELEMENT_NODE:return e.getAttribute(this.attribute);case e.COMMENT_NODE:return _virtualNodeBindingValue(e);default:return null}}function nodeParamsToObject(e,t){var n=t.parse(e.getAttribute("params"));if(!n||0===Object.keys(n).length)return{$raw:{}};var r=_object_map(n,function(t,n){return ko.computed(t,null,{disposeWhenNodeIsRemoved:e})}),i=_object_map(r,function(t,n){var r=t.peek();return t.isActive()?ko.computed({read:function(){return ko.utils.unwrapObservable(t())},write:ko.isWriteableObservable(r)&&function(e){t()(e)},disposeWhenNodeIsRemoved:e}):r});return i.hasOwnProperty("$raw")||(i.$raw=r),i}function getBindings(e,t){var n,r={},i=new Parser(e,t,this.globals),o=this.getBindingsString(e);if(e.nodeType===e.ELEMENT_NODE&&ko.components&&(n=ko.components.getComponentNameForNode(e)),o&&(r=i.parse(o||"")),n){if(r.component)throw new Error("Cannot use a component binding on custom elements");var s={name:n,params:nodeParamsToObject(e,i)};r.component=function(){return s}}return r}var Identifier,Expression,Parser,Node,originalBindingProviderInstance=new ko.bindingProvider,commentNodesHaveTextProperty=document&&"<!--test-->"===document.createComment("test").text,startCommentRegex=commentNodesHaveTextProperty?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/;Identifier=function(){function e(e,t,n){this.token=t,this.dereferences=n,this.parser=e}return e.prototype.lookup_value=function(e){var t=this.token,n=this.parser,r=n.context,i=r.$data||{},o=n.globals||{};if(e)return value_of(e)[t];switch(t){case"$element":return n.node;case"$context":return r;case"$data":return i}return i[t]||r[t]||o[t]},e.prototype.dereference=function(e){var t,n,r,i,o=this.dereferences||[],s=this.parser,h=s.context||{},a=h.$data||{},u={$context:h,$data:a,globals:s.globals||{},$element:s.node};for(r=0,i=o.length;r<i;++r)t=o[r],t instanceof Array?e&&e.call&&(e=e.apply(n||a||u,this.convert_args(t)),n=e):(n=e,e&&(e=e[value_of(t)]));return e},e.prototype.convert_args=function(t){var n,r=[];if(!t||0===t.length)return r;for(n=0;n<t.length;n++)t[n]instanceof e||t[n]instanceof Expression?r.push(t[n].get_value()):r.push(t[n]);return r},e.prototype.get_value=function(e){return this.dereference(this.lookup_value(e))},e.prototype.set_value=function(e){var t,n,r,i=this.parser,o=i.context,s=o.$data||{},h=i.globals||{},a=this.dereferences||[],u=this.token;if(Object.hasOwnProperty.call(s,u))r=s;else if(Object.hasOwnProperty.call(o,u))r=o;else{if(!Object.hasOwnProperty.call(h,u))throw new Error("Identifier::set_value -- The property '"+u+"' does not exist on the $data, $context, or globals.");r=h}for(n=a.length,0===n&&(r[u]=e),r=r[u],t=0;t<n-1;++t)u=a[t],r=u===!0?r():r[value_of(u)];if(a[t]===!0)throw new Error("Cannot assign a value to a function.");r[value_of(a[t])]=e},e}(),Node=function(){function e(e,t,n){this.lhs=e,this.op=t,this.rhs=n}var t={"!":function(e,t){return!t},"!!":function(e,t){return!!t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"&":function(e,t){return e&t},"^":function(e,t){return e^t},"|":function(e,t){return e|t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?":function(e,t){return e||t},"-:":function(e,t){return e?t:null},":-":function(e,t){return e?null:t}};return t["!"].precedence=4,t["!!"].precedence=4,t["*"].precedence=5,t["/"].precedence=5,t["%"].precedence=5,t["+"].precedence=6,t["-"].precedence=6,t["<"].precedence=8,t["<="].precedence=8,t[">"].precedence=8,t[">="].precedence=8,t["=="].precedence=9,t["!="].precedence=9,t["==="].precedence=9,t["!=="].precedence=9,t["&"].precedence=10,t["^"].precedence=11,t["|"].precedence=12,t["&&"].precedence=13,t["||"].precedence=14,e.operators=t,e.prototype.get_leaf_value=function(t,n){if("function"==typeof t)return ko.utils.unwrapObservable(t());if("object"!=typeof t)return n?n[t]:t;if(t instanceof Identifier||t instanceof Expression)return ko.utils.unwrapObservable(t.get_value(n));if(t instanceof e)return t.get_node_value(n);throw new Error("Invalid type of leaf node: "+t)},e.prototype.get_node_value=function(){return this.op(this.get_leaf_value(this.lhs),this.get_leaf_value(this.rhs))},e}(),Expression=function(){function e(e){this.nodes=e,this.root=this.build_tree(e)}return e.operators=Node.operators,e.Node=Node,e.prototype.build_tree=function(e){var t,n,r,i;for(n=t=new Node(e.shift(),e.shift(),e.shift());e&&(r=e.shift(),i=e.shift(),r);)r.precedence>=t.op.precedence?(t=new Node(t,r,i),n=t):(n.rhs=new Node(n.rhs,r,i),n=n.rhs);return t},e.prototype.get_value=function(){return this.root||(this.root=this.build_tree(this.nodes)),this.root.get_node_value()},e}(),Parser=function(){function e(e,t,n){this.node=e,this.context=t,this.globals=n||{}}var t={"'":"'",'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},n=Expression.operators;return e.Expression=Expression,e.Identifier=Identifier,e.Node=Node,e.prototype.white=function(){for(var e=this.ch;e&&e<=" ";)e=this.next();return e},e.prototype.next=function(e){return e&&e!==this.ch&&this.error("Expected '"+e+"' but got '"+this.ch+"'"),this.ch=this.text.charAt(this.at),this.at+=1,this.ch},e.prototype.error=function(e){throw{name:"SyntaxError",message:e,at:this.at,text:this.text}},e.prototype.name=function(){var e="";this.white();for(var t=this.ch;t;){if(":"===t||t<=" "||","===t)return e;e+=t,t=this.next()}return e},e.prototype.number=function(){var e,t="",n=this.ch;for("-"===n&&(t="-",n=this.next("-"));n>="0"&&n<="9";)t+=n,n=this.next();if("."===n)for(t+=".",n=this.next();n&&n>="0"&&n<="9";)t+=n,n=this.next();if("e"===n||"E"===n)for(t+=n,n=this.next(),"-"!==n&&"+"!==n||(t+=n,n=this.next());n>="0"&&n<="9";)t+=n,n=this.next();return e=+t,isFinite(e)?e:void error("Bad number")},e.prototype.object_add_value=function(e,t,n){n instanceof Identifier||n instanceof Expression?Object.defineProperty(e,t,{get:function(){return n.get_value()},enumerable:!0}):e[t]=n},e.prototype.object=function(){var e,t={},n=this.ch;if("{"===n){if(this.next("{"),n=this.white(),"}"===n)return n=this.next("}"),t;for(;n;){if(e='"'===n||"'"===n?this.string():this.name(),this.white(),n=this.next(":"),Object.hasOwnProperty.call(t,e)&&this.error('Duplicate key "'+e+'"'),this.object_add_value(t,e,this.expression()),n=this.white(),"}"===n)return n=this.next("}"),t;this.next(","),n=this.white()}}this.error("Bad object")},e.prototype.read_string=function(e){for(var n,r,i,o="",s=this.next();s;){if(s===e)return s=this.next(),o;if("\\"===s)if(s=this.next(),"u"===s){for(i=0,r=0;r<4&&(n=parseInt(s=this.next(),16),isFinite(n));r+=1)i=16*i+n;o+=String.fromCharCode(i)}else{if("string"!=typeof t[s])break;o+=t[s]}else o+=s;s=this.next()}this.error("Bad string")},e.prototype.string=function(){var e=this.ch;return'"'===e?this.read_string('"'):"'"===e?this.read_string("'"):void this.error("Bad string")},e.prototype.array=function(){var e=[],t=this.ch;if("["===t){if(t=this.next("["),this.white(),"]"===t)return t=this.next("]"),e;for(;t;){if(e.push(this.expression()),t=this.white(),"]"===t)return t=this.next("]"),e;this.next(","),t=this.white()}}this.error("Bad array")},e.prototype.value=function(){var e;switch(this.white(),e=this.ch){case"{":return this.object();case"[":return this.array();case'"':case"'":return this.string();case"-":return this.number();default:return e>="0"&&e<="9"?this.number():this.identifier()}},e.prototype.operator=function(){for(var e,t="",r=this.white();r&&!(is_identifier_char(r)||r<=" "||""===r||'"'===r||"'"===r||"{"===r||"["===r||"("===r);)t+=r,r=this.next();return""!==t&&(e=n[t],e||this.error("Bad operator: '"+t+"'.")),e},e.prototype.condExpression=function(e){var t,n,r,i;return this.white(),this.next("?"),this.white(),t=this.expression(),r=new Expression([e,Expression.operators["-:"],t]),this.white(),this.next(":"),this.white(),n=this.expression(),i=new Expression([e,Expression.operators[":-"],n]),new Expression([r,Expression.operators["?"],i])},e.prototype.expression=function(){for(var e,t=[],n=this.white();n&&(op=this.operator(),op&&(t.push(void 0),t.push(op)),n=this.ch,"("===n?(this.next(),t.push(this.expression()),this.next(")")):(e=this.value(),t.push(e)),n=this.white(),":"!==n&&"}"!==n&&","!==n&&"]"!==n&&")"!==n&&""!==n);){if("?"===n&&1===t.length)return this.condExpression(t[0]);op=this.operator(),op&&t.push(op),n=this.white()}if(0!==t.length)return 1===t.length?t[0]:new Expression(t)},e.prototype.dereference=function(){for(var e,t=this.white();t;){if("("===t){this.next("("),t=this.white();for(var n=[];t;){if(")"===t){this.next(")"),this.white();break}","===t&&(this.next(","),t=this.white()),n.push(this.expression()),t=this.white()}return n}if("["===t)return this.next("["),e=this.expression(),this.white(),this.next("]"),e;if("."===t){for(e="",this.next("."),t=this.white();t&&is_identifier_char(t);)e+=t,t=this.next();return e}break}},e.prototype.identifier=function(){var e,t,n="",r=[];for(e=this.white();e&&is_identifier_char(e);)n+=e,e=this.next();switch(n){case"true":return!0;case"false":return!1;case"null":return null;case"undefined":return}for(;e&&(t=this.dereference(),void 0!==t);)r.push(t);return new Identifier(this,n,r)},e.prototype.bindings=function(){var e,t,n={},r=!1;this.white(),"{"===this.ch&&(this.next("{"),this.white(),r=!0);for(var i=this.ch;i;)e=this.name(),t=this.white(),t&&","!==t?(i=this.next(":"),n[e]=this.expression(),this.white(),"}"===this.ch?r?(this.next("}"),i=this.white()):this.error("Unexpected char '}' found"):i=this.ch?this.next(","):""):(i=t?this.next(","):"",n[e]=null);return n},e.prototype.convert_to_accessors=function(e){var t={};return ko.utils.objectForEach(e,function(n,r){r instanceof Identifier?(e[n]=r.get_value(),ko.expressionRewriting._twoWayBindings[n]&&(t[n]=function(e){r.set_value(e)})):r instanceof Expression?e[n]=r.get_value():"function"!=typeof r&&(e[n]=r)}),Object.keys(t).length>0&&(e._ko_property_writers=function(){return t}),e},e.prototype.parse=function(e){if(this.text=(e||"").trim(),this.at=0,this.ch=" ",!this.text)return null;var t=this.bindings();return this.white(),this.ch&&this.error("Syntax Error"),this.convert_to_accessors(t)},e}(),ko.utils.objectForEach=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},ko.expressionRewriting._twoWayBindings={},ko.expressionRewriting._twoWayBindings.checked=!0,ko.expressionRewriting._twoWayBindings.hasfocus=!0,ko.expressionRewriting._twoWayBindings.hasFocus=!0,ko.expressionRewriting._twoWayBindings.selectedOptions=!0,ko.expressionRewriting._twoWayBindings.textInput=!0,ko.expressionRewriting._twoWayBindings.value=!0,ko.utils.extend(secureBindingsProvider.prototype,{registerBindings:registerBindings,nodeHasBindings:nodeHasBindings,getBindings:getBindings,getBindingsString:getBindingsString,nodeParamsToObject:nodeParamsToObject,Parser:Parser});    
    ko.secureBindingsProvider = secureBindingsProvider;
    
    return secureBindingsProvider;
}));

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/TFS.Knockout",["require","exports","knockout","VSS/VSS","VSS/Controls","VSS/Controls/Combos","VSS/Utils/UI","VSS/Utils/Date","Presentation/Scripts/TFS/TFS.UI.Controls.ColorPicker","knockoutSecureBinding","jQueryUI/droppable","VSS/Utils/Draggable"],function(n,t,i,r,u,f,e,o,s,h){function c(){var n={attribute:"data-bind",globals:window,bindings:i.bindingHandlers,noVirtualElements:!1};i.bindingProvider.instance=new h(n)}function a(n){var t=i.observable(n);return t.equalityComparer=o.equals,t}function v(n,t){var i=$(l("div")).attr("data-bind","template: { name: '"+n+"' }");return!t||i.addClass(t),i}function y(n){return{init:function(t,i){var e=$(t),r=i(),u="",f;return!r||(typeof r=="string"?u=n[r]:(u=n[r.resource],f=n[r.title])),u&&e.text(u),f&&e.attr("title",f),{controlsDescendantBindings:!1}}}}Object.defineProperty(t,"__esModule",{value:!0});t.getResourceBindingHandler=t.loadHtmlTemplate=t.observableDate=t.overrideDefaultBindings=void 0;t.overrideDefaultBindings=c;var l=e.domElem;t.observableDate=a;t.loadHtmlTemplate=v;t.getResourceBindingHandler=y;i.bindingHandlers.droppable={init:function(n,t){var i=$(n),r=t();i.droppable(r)}};i.bindingHandlers.draggable={init:function(n,t){var r=$(n),i=t();!i.appendToSelector||(i.appendTo=$(i.appendToSelector));r.draggable(i)}};i.bindingHandlers.hover={init:function(n,t){var i=$(n),r=t();i.hover(function(){i.addClass(r.hoverClass)},function(){i.removeClass(r.hoverClass)})}};i.bindingHandlers.clickOnEnterKey={init:function(n){var t=$(n);t.keyup(function(n){(n.keyCode===e.KeyCode.ENTER||n.keyCode===e.KeyCode.SPACE)&&t.click()})}};i.bindingHandlers.singleOrDoubleClick={init:function(n,t,i,r,u){var e=t().click,o=t().dblclick,s=t().delay||200,f=0;$(n).click(function(n){f++;f===1&&setTimeout(function(){f===1?e!==undefined&&e.call(r,u.$data,n):o!==undefined&&o.call(r,u.$data,n);f=0},s)})}};i.bindingHandlers.scrollTo={update:function(n,t){if(t()){var i=n.parentNode;$(i).scrollTop(n.offsetTop)}}};i.bindingHandlers.fadeInThenOut={init:function(n,t){var r=t();$(n).toggle(i.utils.unwrapObservable(r))},update:function(n,t){var r=t();i.utils.unwrapObservable(r)&&$(n).fadeIn(750).delay(1e3).fadeOut(750)}};i.observableArray.fn.subscribeArrayChanged=function(n,t,r){var u,e,f=null,o,s;return o=this.subscribe(function(n){f=n.slice(0)},null,"beforeChange"),s=this.subscribe(function(o){var s=i.utils.compareArrays(f,o);for(u=0,e=s.length;u<e;u++)switch(s[u].status){case"deleted":t&&t.call(r,s[u].value);break;case"added":n&&n.call(r,s[u].value)}f=null}),[o,s]};i.bindingHandlers.vssCombo={init:function(n,t){var i=u.Control.create(f.Combo,$(n),t())}};i.bindingHandlers.tfsColorPicker={init:function(n,t){u.Control.create(s.PaletteColorPickerControl,$(n),t())}};i.bindingHandlers.tfsFontColorPicker={init:function(n,t){var e=$(n),i=t()||{},r=$("<div>").addClass("font-trigger").attr("tabindex",0).attr("role","button").attr("aria-haspopup","true").attr("aria-label",t().ariaLabelPrefix),h=$("<span>").addClass("icon bowtie-icon bowtie-format-font-color"),f=$("<div>").addClass("style-rule-font-color-bar"),o;i.defaultColor&&f.css("background-color",i.defaultColor.asHex());r.append(h,f);e.append(r);o=$.extend({},i,{triggerElement:r,onColorSelected:function(n,t){if(f.css("background-color",t.asHex()),$.isFunction(i.onColorSelected))i.onColorSelected(n,t)}});u.Control.create(s.PaletteColorPickerControl,e,o)}};r.tfsModuleLoaded("TFS.Knockout",t)});

define("Agile/Scripts/Capacity/CapacityModels",["require","exports","Agile/Scripts/Common/Agile","Agile/Scripts/Common/Utils","Agile/Scripts/Resources/TFS.Resources.AgileSprintPlanning","knockout","Presentation/Scripts/TFS/FeatureRef/FormatUtils","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.Knockout","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.OM.Identities","Presentation/Scripts/TFS/TFS.Service","q","TFS/Work/RestClient","VSS/Controls","VSS/Controls/Combos","VSS/Controls/Dialogs","VSS/Controls/Notifications","VSS/Controls/PopupContent","VSS/Controls/Validation","VSS/Diag","VSS/Service","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/String","VSS/Utils/UI","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){function ii(){return c.ProjectCollection.getConnection(s.TfsContext.getDefault()).getService(kt)}function bt(n){var i="",t;return n&&(t=l.IdentityHelper.parseUniquefiedIdentityName(n),i=!!t&&t.uniqueName?t.uniqueName.toLocaleLowerCase():n),i}function ui(n,t){var i=n.start,r=t.start;return i>r?1:i<r?-1:0}var lt,pt,st,at,ht,wt,ct,kt,dt,gt,ni,ri;Object.defineProperty(t,"__esModule",{value:!0});t.DateRangeStartDateCompare=t.DaysOffDialog=t.DateBetweenRangeValidator=t.DateRelativeToValidator=t.GroupValidator=t.CapacityDataService=t.getIdentityUniqueName=t.getService=t.TeamCapacityModel=t.TeamMemberCapacityModel=t.ActivityModel=t.IterationInfo=t.DisposableBase=t.AggregatedCapacity=void 0;h.overrideDefaultBindings();var vt=e.FormatUtils,yt=rt.delegate,ti=function(){function n(n){this._processedAggregatedCapacity=this._getProcessedAggregatedCapacity(n)}return n.prototype.getAggregatedCapacity=function(){return this._processedAggregatedCapacity},n.prototype.getAggregatedValue=function(n,t){var i=this._processedAggregatedCapacity[n],r,u;if(i)if(t=this._convertFieldValue(n,t),t)r=i[t];else{r=0;for(u in i)i.hasOwnProperty(u)&&(r+=i[u])}return r||0},n.prototype.getAggregatedValues=function(n){var t=this._processedAggregatedCapacity[n];return $.extend({},t)},n.prototype.setAggregatedValue=function(n,t,i){t=this._convertFieldValue(n,t);var r=this._processedAggregatedCapacity[n];r||(r={},this._processedAggregatedCapacity[n]=r);r[t]=i},n.prototype._convertFieldValue=function(t,i){if(i===undefined)return"";if(t===o.CoreFieldRefNames.AssignedTo){if(i===n.TEAM_USERID)return"";if(i===n.UNASSIGNED_USERID)return n.EMPTY_VALUE;i=bt(i)}return i!==""&&i!==null?i:n.EMPTY_VALUE},n.prototype._getProcessedAggregatedCapacity=function(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[t]=this._getProcessFieldData(t,n[t]));return i},n.prototype._getProcessFieldData=function(n,t){return n===o.CoreFieldRefNames.AssignedTo?this._getProcessedAssignedToValue(t):$.extend(!0,{},t)},n.prototype._getProcessedAssignedToValue=function(t){var i={},r,u,f;for(r in t)t.hasOwnProperty(r)&&(u=this._convertFieldValue(o.CoreFieldRefNames.AssignedTo,r),i[u]?(f=(i[u]+t[r]).toFixed(n.REMAINING_HOUR_DECIMAL_PRECISION),i[u]=parseFloat(f)):i[u]=t[r]);return i},n.EMPTY_VALUE="__empty",n.UNASSIGNED_USERID="__unassigned",n.TEAM_USERID="__team",n.REMAINING_HOUR_DECIMAL_PRECISION=3,n}();t.AggregatedCapacity=ti;ot.initClassPrototype(ti,{_rawAggregatedCapacity:null,_processedAggregatedCapacity:null});lt=function(){function n(){this._disposables=[]}return n.prototype.dispose=function(){this._disposables.forEach(function(n){n.dispose()});this._disposables=[]},n}();t.DisposableBase=lt;pt=function(n){function t(t,i){var r=__construct(this,n,[]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._teamDaysOff=i,r._weekends=t.Weekends||[],r.iterationId=t.IterationId,r._iterationStartDate=f.observable(t.IterationStartDate),r._iterationEndDate=f.observable(t.IterationEndDate),r._currentDate=t.CurrentDate,r._disposables.push(r._teamDaysOffCurrentDatesBreakdown=f.computed(function(){return r._getDateBreakdown(r.getCurrentDateInIteration(),r._teamDaysOff()||[],[])})),r._disposables.push(r._teamDaysOffTotalDatesBreakdown=f.computed(function(){return r._getDateBreakdown(r.getIterationStartDate(),r._teamDaysOff()||[],[])})),r}return __extends(t,n),t.prototype.updateIterationDates=function(n,t){this._iterationStartDate(n);this._iterationEndDate(t)},t.prototype.hasIterationDates=function(){return!!this._iterationStartDate()&&!!this._iterationEndDate()},t.prototype.getWeekends=function(){return this._weekends},t.prototype.getTeamDaysOffDates=function(){return $.extend(!0,[],this._teamDaysOff())},t.prototype.isCurrentIteration=function(){return this.getIterationStartDate()<=this._currentDate&&this._currentDate<=this.getIterationEndDate()},t.prototype.getIterationStartDate=function(){if(this._iterationStartDate())return this._iterationStartDate();var n=new Date(0);return n.setHours(0,0,0,0),n},t.prototype.getIterationEndDate=function(){if(this._iterationEndDate())return this._iterationEndDate();var n=new Date;return n.setHours(0,0,0,0),n.setFullYear(n.getFullYear()+10),n},t.prototype.getCurrentDateInIteration=function(){return this._currentDate>this.getIterationStartDate()?this._currentDate:this.getIterationStartDate()},t.prototype.getTeamDaysOffCurrentDatesBreakdown=function(){return this._teamDaysOffCurrentDatesBreakdown()},t.prototype.getTeamDaysOffTotalDatesBreakdown=function(){return this._teamDaysOffTotalDatesBreakdown()},t.prototype.getWorkingDaysInfoIncludingTeamDaysOff=function(n,t){return this._getDateBreakdown(n,t,this._teamDaysOff())},t.prototype._getDateBreakdown=function(n,t,r){var u=this.getIterationEndDate(),f=i.CapacityDateUtils.getMergedDateRangeList(t,r,n,u);return i.CapacityDateUtils.getDateBreakdown(n,u,f,this._weekends)},t}(lt);t.IterationInfo=pt;st=function(n){function t(i,r,u){var e=__construct(this,n,[]);for(var o in e)e.hasOwnProperty(o)&&(this[o]=e[o]);return e.isNameValid=f.observable(!0),e.isCpdValid=f.observable(!0),e.name=f.observable(ht.DEFAULT_ACTIVITY_NAME),e.capacityPerDayString=f.observable(""),e.capacityPerDayNumber=f.observable(),e._isDirtyTrigger=f.observable(!0),e._pauseIsDirty=u,e._pauseCalculations=r,e._initialize(i),e._disposables.push(e.capacityPerDay=f.computed(function(){var n=e.capacityPerDayNumber();return e._isDirtyTrigger(),isNaN(n)||!isFinite(n)||n>t.MAX_INPUT||n<t.MIN_INPUT?(n=0,e.isCpdValid(!1)):e.isCpdValid(!0),n})),e._disposables.push(e.isValid=f.computed(function(){return e._pauseCalculations()?!0:e.isNameValid()&&e.isCpdValid()})),e._disposables.push(e.isDirty=f.computed(function(){return!e._pauseIsDirty()&&(e._isDirtyTrigger(),!e.isValid()||e.originalActivity.capacityPerDay!==e.capacityPerDay()||e.originalActivity.name!==e.name())?!0:!1})),e}return __extends(t,n),t.prototype.dataSaved=function(){this.originalActivity.name=this.name();this.originalActivity.capacityPerDay=this.capacityPerDay();this._isDirtyTrigger(!this._isDirtyTrigger())},t.prototype._initialize=function(n){(n.name===undefined||n.name===null)&&(n.name=ht.DEFAULT_ACTIVITY_NAME);this.originalActivity=n;this.name(n.name);this.capacityPerDayString(vt.formatNumberForDisplay(n.capacityPerDay,t.DECIMAL_PRECISION));this.capacityPerDayNumber(n.capacityPerDay)},t.prototype.toDataContract=function(){return{capacityPerDay:this.capacityPerDay(),name:this.name()}},t.prototype.dispose=function(){n.prototype.dispose.call(this)},t.MIN_INPUT=0,t.MAX_INPUT=1e6,t.DECIMAL_PRECISION=2,t}(lt);t.ActivityModel=st;at=function(n){function t(t,i,r,u,e){var o=__construct(this,n,[]);for(var s in o)o.hasOwnProperty(s)&&(this[s]=o[s]);return o.isOnServer=f.observable(!1),o.activities=f.observableArray([]),o.daysOff=f.observableArray([]),o.customProperties={},o._isDirtyTrigger=f.observable(!0),o.isOnServer(e),o._pauseCalculations=r,o._pauseIsDirty=u,o._initialize(i),o._iterationInfo=t,o.id=i.teamMember.id,o.displayName=i.teamMember.displayName,o.uniqueName=i.teamMember.uniqueName,o._setupComputedValues(),o}return __extends(t,n),t.prototype.updateIterationDates=function(n,t){this._iterationInfo.updateIterationDates(n,t)},t.prototype._setupComputedValues=function(){var n=this;this._disposables.push(this.totalCapacityPerDay=f.computed(function(){var t=0;return n.activities().forEach(function(n){t+=n.capacityPerDay()}),t}));this._setupDaysOffComputedValues();this._disposables.push(this.isDirty=f.computed(function(){var t=!n.isOnServer();return n._pauseIsDirty()||(i.CapacityDateUtils.areDateRangesEqual(n.daysOff(),n._originalCapacity.daysOff)||(t=!0),$.each(n.activities(),function(n,i){i.isDirty()&&(t=!0)}),t||(n._originalCapacity.activities.length===0?n.activities().length>1&&(t=!0):n.activities().length!==n._originalCapacity.activities.length&&(t=!0))),t}));this._disposables.push(this.isValid=f.computed(function(){var t=!0;return n._pauseCalculations()||$.each(n.activities(),function(n,i){i.isValid()||(t=!1)}),t}));this._disposables.push(this.getDefaultActivity=f.computed(function(){if(!n._pauseCalculations()){var t=n.activities();if(t)return t.length===1?t[0].name():ht.DEFAULT_ACTIVITY_NAME}return undefined}))},t.prototype._initialize=function(n){var i=this,t;this._originalCapacity=n;this.daysOff(n.daysOff);t=n.activities.map(function(n){return new st(n,i._pauseCalculations,i._pauseIsDirty)});t.length===0&&t.push(this.newEmptyActivity());this.activities(t)},t.prototype._setupDaysOffComputedValues=function(){var n=this;this._disposables.push(this._currentWorkingDaysInfo=f.computed(function(){return n._getWorkingDaysInfo(n._iterationInfo.getCurrentDateInIteration())}));this._disposables.push(this._totalDateBreakdown=f.computed(function(){return n._pauseCalculations()?{}:n._getWorkingDaysInfo(n._iterationInfo.getIterationStartDate())}));this._disposables.push(this.totalDaysOff=f.computed(function(){if(!n._pauseCalculations()){var t=n._totalDateBreakdown().totalExcludedDays-n._iterationInfo.getTeamDaysOffTotalDatesBreakdown().totalExcludedDays,i=t===1?u.Capacity_DayOff:u.Capacity_DaysOff;return ft.format(i,t)}return"0"}));this._disposables.push(this.totalRemainingActivityCapacityMap=f.computed(function(){var t={};return n._pauseCalculations()||n._iterationInfo.hasIterationDates()&&n.activities().forEach(function(i){i.name()in t?t[i.name()]+=n.getWorkingDaysInfo().workingDays*i.capacityPerDay():t[i.name()]=n.getWorkingDaysInfo().workingDays*i.capacityPerDay()}),t}))},t.prototype.dataSaved=function(){var n=this;this.isDirty()&&(this._originalCapacity.daysOff=this.daysOff(),this._originalCapacity.activities.splice(0,this._originalCapacity.activities.length),this.activities().forEach(function(t){n._originalCapacity.activities.push(t.originalActivity)}),this.activities().forEach(function(n){n.dataSaved()}),this._isDirtyTrigger(!this._isDirtyTrigger()))},t.prototype.setActivities=function(n){var i=this,t=n.map(function(n){var t=i.newEmptyActivity();return t.capacityPerDayString(vt.formatNumberForDisplay(n.capacityPerDay,st.DECIMAL_PRECISION)),t.capacityPerDayNumber(n.capacityPerDay),t.name(n.name),t});t.length===0&&t.push(this.newEmptyActivity());this.activities().forEach(function(n){n.dispose()});this.activities.removeAll();this.activities(t)},t.prototype.getTeamMemberDisplayName=function(){return this.displayName},t.prototype.getActivityByIndex=function(n){var t=this.activities();return n<0||n>=t.length?null:this.activities()[n]},t.prototype.toDataContract=function(n){var t=$.extend({},this._originalCapacity),i=[];return this.activities().forEach(function(n){var r=n.name(),t=it.first(i,function(n){return n.name===r});t?t.capacityPerDay+=n.capacityPerDay():i.push(n.toDataContract())}),t.activities=i,t.daysOff=n(this.daysOff()),t},t.prototype.getTotalRemainingCapacity=function(){if(this._iterationInfo.hasIterationDates()){var n=this.getWorkingDaysInfo().workingDays,t=this.totalCapacityPerDay();return n*t}return 0},t.prototype.getWorkingDaysInfo=function(){return this._currentWorkingDaysInfo()},t.prototype.dispose=function(){n.prototype.dispose.call(this);this.activities().forEach(function(n){n.dispose()});this.activities.removeAll()},t.prototype._getWorkingDaysInfo=function(n){return this._iterationInfo.getWorkingDaysInfoIncludingTeamDaysOff(n,this.daysOff()||[])},t.prototype.newEmptyActivity=function(){return new st({capacityPerDay:0,name:ht.DEFAULT_ACTIVITY_NAME},this._pauseCalculations,this._pauseIsDirty)},t}(lt);t.TeamMemberCapacityModel=at;ht=function(n){function t(r){var e=__construct(this,n,[]);for(var o in e)e.hasOwnProperty(o)&&(this[o]=e[o]);return e.capacities=f.observableArray([]),e.teamDaysOff=f.observableArray([]),e.pauseIsDirty=f.observable(!1),e.pauseCalculations=f.observable(!1),e.teamMemberCapacityMap={},e._underbulkOperation=!1,e._activityCapacityChangedHandlers=[],e._teamCapacityChangedHandlers=[],e._teamMemberCapacityChangedHandlers=[],e._teamMemberDefaultActivityChanged=[],r=$.extend(!0,{},r),e._rawTeamCapacityData=r,e._originalTeamCapacity=r.TeamCapacity,e.iterationInfo=new pt(r,e.teamDaysOff),e.overwriteTeamDaysOff(r.TeamCapacity.TeamDaysOffDates),e._initializeCapacities(r.TeamCapacity.TeamMemberCapacityCollection),e.activityValues=r.ActivityValues||[],e.activityEnabled=Boolean(r.ActivityValues&&r.ActivityValues.length!==0),e._disposables.push(e.totalTeamDaysOff=f.computed(function(){var n=0,t;return e.pauseCalculations()||(n=e.iterationInfo.getTeamDaysOffTotalDatesBreakdown().totalExcludedDays),t=n===1?u.Capacity_DayOff:u.Capacity_DaysOff,ft.format(t,n)})),e._disposables.push(e._aggregateCapacityByActivityMap=f.computed(function(){var n={};return e.pauseCalculations()||e.capacities().forEach(function(t){for(var i in t.totalRemainingActivityCapacityMap())i in n||(n[i]=0),n[i]+=t.totalRemainingActivityCapacityMap()[i]}),e.activityValues.forEach(function(t){t in n||(n[t]=0)}),t.DEFAULT_ACTIVITY_NAME in n||(n[t.DEFAULT_ACTIVITY_NAME]=0),n})),e._setupSubscriptions(),e._disposables.push(e.isEmpty=f.computed(function(){var n=!0;return e.pauseCalculations()||e.capacities().forEach(function(i){var o=i.totalCapacityPerDay(),r=i.activities(),u=r.length,f,e;u===1?(f=r[0].name(),e=r[0].capacityPerDay(),(f!==t.DEFAULT_ACTIVITY_NAME||e>0)&&(n=!1)):(o>0||u>1)&&(n=!1)}),n})),e._disposables.push(e.isDirty=f.computed(function(){var n=!1,t,r;return e.pauseCalculations()||(t=e.capacities().length,r=e.teamDaysOff(),e.capacities().forEach(function(t){t.isDirty()&&(n=!0)}),t===e._originalTeamCapacity.TeamMemberCapacityCollection.length&&i.CapacityDateUtils.areDateRangesEqual(r,e._originalTeamCapacity.TeamDaysOffDates)||(n=!0)),n})),e._disposables.push(e.isValid=f.computed(function(){var n=!0;return e.pauseCalculations()||e.capacities().forEach(function(t){t.isValid()||(n=!1)}),n})),e}return __extends(t,n),t.prototype.setupMerge=function(){this.pauseCalculations(!0);this.pauseIsDirty(!0)},t.prototype.endMerge=function(){this._underbulkOperation=!0;this.pauseCalculations(!1);this.pauseIsDirty(!1);this._notify();this._underbulkOperation=!1},t.prototype.setupUndo=function(){this.pauseCalculations(!0)},t.prototype.endUndo=function(){this._underbulkOperation=!0;this.pauseCalculations(!1);this._notify();this._underbulkOperation=!1},t.prototype.updateIterationDates=function(n,t){this.iterationInfo.updateIterationDates(n,t)},t.prototype.isUnderBulkOperation=function(){return this._underbulkOperation},t.prototype._notify=function(){this._notifyAggregateCapacityChanged()},t.prototype._notifyAggregateCapacityChanged=function(){var t,i,r,n,u;if(!this.pauseCalculations()){t=this._aggregateCapacityByActivityMap();for(i in t)if(t.hasOwnProperty(i))for(n=0;n<this._activityCapacityChangedHandlers.length;n++)r=this._activityCapacityChangedHandlers[n],r({activity:i,capacity:t[i]});for(n=0;n<this._teamCapacityChangedHandlers.length;n++)u=this._teamCapacityChangedHandlers[n],u(this)}},t.prototype._setupSubscriptions=function(){var n=this;this._disposables.push(this._aggregateCapacityByActivityMap.subscribe(function(){n._notifyAggregateCapacityChanged()}));this.capacities().forEach(function(t){n._subscribeToTeamMemberCapacityModelChanges(t)});this._disposables.push(this.capacities.subscribe(function(t){for(var r,i=0;i<t.length;i++)r=t[i],n._subscribeToTeamMemberCapacityModelChanges(r)}));this.capacities.subscribeArrayChanged(function(t){n.teamMemberCapacityMap[t.id]=t},function(t){t.activities.removeAll();delete n.teamMemberCapacityMap[t.id]})},t.prototype._subscribeToTeamMemberCapacityModelChanges=function(n){var t=this;n.customProperties.capacityModelSubscription||(this._disposables.push(n.totalRemainingActivityCapacityMap.subscribe(function(){var i,r;if(!t.pauseCalculations())for(i=0;i<t._teamMemberCapacityChangedHandlers.length;i++)r=t._teamMemberCapacityChangedHandlers[i],r(n)})),this._disposables.push(n.getDefaultActivity.subscribe(function(){var i,r;if(!t.pauseCalculations()){for(i=0;i<t._teamMemberDefaultActivityChanged.length;i++)r=t._teamMemberDefaultActivityChanged[i],r(n);t._notifyAggregateCapacityChanged()}})),this._disposables.push(n.getDefaultActivity.subscribe(function(){var i,r;if(!t.pauseCalculations())for(i=0;i<t._teamMemberCapacityChangedHandlers.length;i++)r=t._teamMemberCapacityChangedHandlers[i],r(n)})),n.customProperties.capacityModelSubscription="subscribed")},t.prototype.dispose=function(){n.prototype.dispose.call(this);this.capacities().forEach(function(n){n.dispose()})},t.prototype.overwriteTeamDaysOff=function(n){this._originalTeamCapacity.TeamDaysOffDates=n;this.teamDaysOff(n)},t.prototype.isLegacy=function(){return!1},t.prototype.getTeamDaysOffCurrentDatesBreakdown=function(){return this.iterationInfo.getTeamDaysOffCurrentDatesBreakdown()},t.prototype.getTeamDaysOffTotalDatesBreakdown=function(){return this.iterationInfo.getTeamDaysOffTotalDatesBreakdown()},t.prototype.getWorkingDaysForDisplay=function(){return this.hasIterationDates()?this.isCurrentIteration()?this.getTeamDaysOffCurrentDatesBreakdown().workingDays:this.getTeamDaysOffTotalDatesBreakdown().workingDays:null},t.prototype.hasIterationDates=function(){return this.iterationInfo.hasIterationDates()},t.prototype.isCurrentIteration=function(){return this.iterationInfo.isCurrentIteration()},t.prototype.getIterationStartDate=function(){return this.iterationInfo.getIterationStartDate()},t.prototype.getIterationEndDate=function(){return this.iterationInfo.getIterationEndDate()},t.prototype.getWeekends=function(){return this.iterationInfo.getWeekends()},t.prototype.getIterationInfo=function(){return this.iterationInfo},t.prototype.getActivityCapacity=function(n){return this._aggregateCapacityByActivityMap()[n]},t.prototype.attachActivityCapacityChanged=function(n){this._activityCapacityChangedHandlers.push(n)},t.prototype._removeActivityCapacityChanged=function(n){var t=this._activityCapacityChangedHandlers.indexOf(n);t>-1&&this._activityCapacityChangedHandlers.splice(t,1)},t.prototype.attachTeamCapacityChanged=function(n){this._teamCapacityChangedHandlers.push(n)},t.prototype._removeTeamCapacityChanged=function(n){var t=this._teamCapacityChangedHandlers.indexOf(n);t>-1&&this._teamCapacityChangedHandlers.splice(t,1)},t.prototype.attachTeamMemberCapacityChanged=function(n){this._teamMemberCapacityChangedHandlers.push(n)},t.prototype._removeTeamMemberCapacityChanged=function(n){var t=this._teamMemberCapacityChangedHandlers.indexOf(n);t>-1&&this._teamMemberCapacityChangedHandlers.splice(t,1)},t.prototype.attachTeamMemberDefaultActivityChanged=function(n){this._teamMemberDefaultActivityChanged.push(n)},t.prototype.removeTeamMemberDefaultActivityChanged=function(n){var t=this._teamMemberDefaultActivityChanged.indexOf(n);t>-1&&this._teamMemberDefaultActivityChanged.splice(t,1)},t.prototype.attachTeamDaysOffChanged=function(n){var t=this;this._disposables.push(this.teamDaysOff.subscribe(function(){n(t)}))},t.prototype.isActivityEnabled=function(){return Boolean(this._rawTeamCapacityData.ActivityValues&&this._rawTeamCapacityData.ActivityValues.length!==0)},t.prototype.getActivityValues=function(){return this._rawTeamCapacityData.ActivityValues||[]},t.prototype.getTeamMemberCapacity=function(n){var t=bt(n);return it.first(this.capacities(),function(n){return ft.equals(n.uniqueName,t,!0)})},t.prototype.isTeamMember=function(n){return!!this.getTeamMemberCapacity(n)},t.prototype.getTeamMemberCapacityCollection=function(){return this.capacities().sort(function(n,t){var i=n.displayName,r=t.displayName;return ft.localeIgnoreCaseComparer(i,r)})},t.prototype.getTotalRemainingCapacity=function(){for(var r=0,t=0,u=this.capacities(),n=0,i=u.length;n<i;n+=1)t=u[n].getTotalRemainingCapacity(),r+=t>0?t:0;return r},t.prototype.getTeamMemberCapacitiesDataContract=function(n){return this.capacities().map(function(t){return t.toDataContract(n)})},t.prototype.getTeamDaysOffDataContract=function(n){return n(this.teamDaysOff())},t.prototype.undo=function(){this.setupUndo();this.mergeCapacities(this._originalTeamCapacity.TeamMemberCapacityCollection,!0);this.endUndo();i.CapacityDateUtils.areDateRangesEqual(this.teamDaysOff(),this._originalTeamCapacity.TeamDaysOffDates)||this.overwriteTeamDaysOff(this._originalTeamCapacity.TeamDaysOffDates)},t.prototype.mergeMembers=function(n){var i=this,u,r;return n.sort(function(n,t){return ft.localeIgnoreCaseComparer(n.displayName,t.displayName)}),u=0,r=0,n.forEach(function(n){if(!i.teamMemberCapacityMap[n.id]){var f={activities:[{name:t.DEFAULT_ACTIVITY_NAME,capacityPerDay:0}],daysOff:[],teamMember:$.extend(!0,{},n),url:"",_links:""},e=new at(i.iterationInfo,f,i.pauseCalculations,i.pauseIsDirty,!1);i.capacities.splice(u++,0,e);r++}}),r},t.prototype.mergeCapacities=function(n,i){var r=this,u,f;n=$.extend(!0,[],n);i&&(this._originalTeamCapacity.TeamMemberCapacityCollection=n);u={};n.forEach(function(n){u[n.teamMember.id]=n});f=[];this.capacities().forEach(function(n){u[n.id]||f.push(n)});i&&this.capacities.removeAll(f);n.forEach(function(n,u){var s,h,f,o,e;n.activities.length===0&&(s={name:t.DEFAULT_ACTIVITY_NAME,capacityPerDay:0},n.activities.push(s));h=n.teamMember.id;f=r.teamMemberCapacityMap[h];f?(o=[],e=[],f.activities().forEach(function(t){var i=!1,r;t.isNameValid()&&(r=t.name(),n.activities.forEach(function(n){if(n.name===r&&e.indexOf(n)<0)return i=!0,t.isCpdValid()&&n.capacityPerDay===t.capacityPerDay()||(t.capacityPerDayString(vt.formatNumberForDisplay(n.capacityPerDay,st.DECIMAL_PRECISION)),t.capacityPerDayNumber(n.capacityPerDay)),e.push(n),!1}));i||o.push(t)}),f.activities.removeAll(o),n.activities.forEach(function(n,u){var o,s;e.indexOf(n)<0&&(i?o=new st(n,r.pauseCalculations,r.pauseIsDirty):(s={name:t.DEFAULT_ACTIVITY_NAME,capacityPerDay:0},o=new st(s,r.pauseCalculations,r.pauseIsDirty),o.name(n.name),o.capacityPerDayString(vt.formatNumberForDisplay(n.capacityPerDay,st.DECIMAL_PRECISION)),o.capacityPerDayNumber(n.capacityPerDay)),f.activities.splice(u,0,o))}),i&&(f.daysOff(n.daysOff),f.isOnServer(!0),f.dataSaved())):r.capacities.splice(u,0,new at(r.iterationInfo,n,r.pauseCalculations,r.pauseIsDirty,i))})},t.prototype._initializeCapacities=function(n){var t=this,i;this._originalTeamCapacity.TeamMemberCapacityCollection=n;this.capacities().forEach(function(n){n.dispose()});this.capacities.removeAll();i=[];n.forEach(function(n){var r=new at(t.iterationInfo,n,t.pauseCalculations,t.pauseIsDirty,!0);i.push(r);t.teamMemberCapacityMap[r.id]=r});this.capacities(i)},t.DEFAULT_ACTIVITY_NAME="",t}(lt);t.TeamCapacityModel=ht;t.getService=ii;wt=function(n){var t=$.extend(!0,[],n);return i.CapacityDateUtils.shiftDateRangesToLocal(t),t};ct=function(n){var t=$.extend(!0,[],n);return i.CapacityDateUtils.shiftDateRangesToUTC(t),t};t.getIdentityUniqueName=bt;kt=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._teamCapacities={},t}return __extends(t,n),t.prototype.getCapacityPageModel=function(){var n=this.getCapacityOptions();return!n||!n.iterationId?null:this.getCapacityModel(n.iterationId)},t.prototype.getCapacityModel=function(n){if(!n)return null;if(this._teamCapacities[n])return this._teamCapacities[n];var t=this.getCapacityDataFromJsonIsland();return t?this.getCapacityModelFromPayload(t):null},t.prototype.getCapacityModelFromPayload=function(n,t){if(t===void 0&&(t=!1),!n||!n.IterationId)return null;var i=n.IterationId;return!t&&this._teamCapacities[n.IterationId]?this._teamCapacities[n.IterationId]:(n.TeamCapacity.TeamMemberCapacityCollection.sort(function(n,t){return ft.localeIgnoreCaseComparer(n.teamMember.displayName,t.teamMember.displayName)}),this._normalizePayloadInPlace(n),this._teamCapacities[i]=new ht(n),this._teamCapacities[i])},t.prototype.beginSaveCapacityModel=function(n){var t=this.getCapacityModel(n);if(!t||!t.isDirty())return v(null);var u=t.getTeamMemberCapacitiesDataContract(wt),f=t.getTeamDaysOffDataContract(wt),i=this.getTeamContext(),r=this.getWorkHttpClient();return r.replaceCapacities(u,i,n).then(function(u){var e={daysOff:f};return t.capacities().forEach(function(n){n.dataSaved()}),u.sort(function(n,t){return ft.localeIgnoreCaseComparer(n.teamMember.displayName,t.teamMember.displayName)}),u.forEach(function(n){n.daysOff=ct(n.daysOff)}),t.mergeCapacities(u,!0),r.updateTeamDaysOff(e,i,n).then(function(n){var i=ct(n.daysOff);return t.overwriteTeamDaysOff(i),null})})},t.prototype.beginGetCapacities=function(n){var t=this.getTeamContext(),i=this.getWorkHttpClient();return i.getCapacities(t,n).then(function(n){return n.forEach(function(n){n.daysOff=ct(n.daysOff)}),n})},t.prototype._beginGetTeamDaysOff=function(n){var t=this.getTeamContext(),i=this.getWorkHttpClient();return i.getTeamDaysOff(t,n).then(function(n){return n.daysOff=ct(n.daysOff),n})},t.prototype.beginGetTeamCapacityModel=function(n,t,i){var u=this,f;return this._teamCapacities[n]?v(this._teamCapacities[n]):(f=[],f.push(this.beginGetCapacities(n)),f.push(this._beginGetTeamDaysOff(n)),v.all(f).spread(function(f,e){if(u._teamCapacities[n])return u._teamCapacities[n];var c=u.getTfsContext(),l=r.TeamSettingsUtils.getTeamWeekends(c),a=r.TeamSettingsUtils.getTeamIterations(c),o=it.first(a,function(t){return t.id==n}),s=o&&o.attributes?o.attributes.startDate:null,h=o&&o.attributes?o.attributes.finishDate:null,v=s&&!isNaN(s.getTime())?ut.shiftToUTC(s):null,y=h&&!isNaN(h.getTime())?ut.shiftToUTC(h):null,p={TeamCapacity:{TeamDaysOffDates:e.daysOff,TeamMemberCapacityCollection:f},ActivityValues:t,IterationId:n,IterationStartDate:v,IterationEndDate:y,Weekends:l,CurrentDate:ut.shiftToUTC(new Date(i))};return u._teamCapacities[n]=new ht(p),u._teamCapacities[n]}))},t.prototype.getCapacityOptions=function(){if(!this._capacityOptions){var n=rt.parseJsonIsland($(document),".capacity-options",!0);this._capacityOptions=$.extend(n,{fixedTopText:u.Capacity_Unassigned})}return this._capacityOptions},t.prototype._normalizePayloadInPlace=function(n){return n.isNormalized?n:(n.isNormalized=!0,n.IterationStartDate&&(n.IterationStartDate=ut.shiftToUTC(n.IterationStartDate)),n.IterationEndDate&&(n.IterationEndDate=ut.shiftToUTC(n.IterationEndDate)),n.CurrentDate=ut.shiftToUTC(n.CurrentDate),n.TeamCapacity.TeamDaysOffDates=ct(n.TeamCapacity.TeamDaysOffDates),n.TeamCapacity.TeamMemberCapacityCollection.forEach(function(n){n.daysOff=ct(n.daysOff)}),n)},t.prototype.getCapacityDataFromJsonIsland=function(){var n=null,t=$(".team-capacity-data").html();return t&&(n=rt.parseMSJSON(t,!1)),n},t.prototype.getWorkHttpClient=function(){var n=new tt.VssConnection(s.TfsContext.getDefault().contextData);return n.getHttpClient(y.WorkHttpClient4_1)},t.prototype.getTeamContext=function(){var n=s.TfsContext.getDefault();return{projectId:n.contextData.project.id,teamId:n.currentTeam.identity.id}},t}(a.TfsService);t.CapacityDataService=kt;dt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i}return __extends(t,n),t.prototype.isValid=function(){var n,i,t,r=this._options.validators,u=!0;for(this._invalidValidator=null,n=0,i=r.length;n<i;n+=1)if(t=r[n],!t.isValid()&&(u=!1,t.getMessage())){this._invalidValidator=t;break}return u},t.prototype.getMessage=function(){return this._invalidValidator?this._invalidValidator.getMessage():""},t.enhancementTypeName="tfs.agile.groupvalidator",t.optionsPrefix="groupValidator",t}(g.BaseValidator);t.GroupValidator=dt;gt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({invalidCssClass:"date-relative-to-invalid",group:"default"},t))},t.prototype.isValid=function(){var i=$.trim(this.getValue()),r=$.trim(this._options.relativeToField.val()),n,t;if(i&&r)n=ut.parseDateString(i,this._options.parseFormat,!0),t=ut.parseDateString(r,this._options.parseFormat,!0);else return!0;return n instanceof Date&&!isNaN(n.getTime())&&t instanceof Date&&!isNaN(t.getTime())?this._options.comparison===0?n>=t:n<=t:!0},t.prototype.getMessage=function(){return this._options.message},t.enhancementTypeName="tfs.agile.daterelativetovalidator",t.optionsPrefix="dateRelativeToValidator",t}(g.BaseValidator);t.DateRelativeToValidator=gt;ni=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({invalidCssClass:"date-range-invalid",group:"default"},t))},t.prototype.isValid=function(){var t=$.trim(this.getValue()),n;if(t)n=ut.parseDateString(t,this._options.parseFormat,!0);else return!0;return n instanceof Date&&!isNaN(n.getTime())?n>=this._options.startDate&&n<=this._options.endDate:!0},t.prototype.getMessage=function(){return this._options.message},t.enhancementTypeName="tfs.agile.datebetweenrangevalidator",t.optionsPrefix="dateBetweenRangeValidator",t}(g.BaseValidator);t.DateBetweenRangeValidator=ni;ri=function(n){function t(t){var i=n.call(this,$.extend({resizable:!1,width:500,height:"auto",minWidth:400,minHeight:220},t))||this,r,u;return i._totalDaysOff=0,i._nextValidationGroupNumber=0,r=ii(),u=r.getCapacityOptions(),i._teamCapacity=r.getCapacityModel(u.iterationId),i._dateRangeCache=[],i._emptyRows={},i}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._createLayout();this._validateAllRows();this.updateOkButton(!0);this._setFocusOnFirstInput()},t.prototype.onOkClick=function(t){var r=$("tr:gt(0):last",this._$datesTable),i=!1;this._isRowEmpty(r)?i=!0:this._validateAllRows()&&(i=!0);i&&n.prototype.onOkClick.call(this,t)},t.prototype.getDialogResult=function(){return this._getValidDateRanges(!1)},t.prototype._createLayout=function(){var n,i=this.getElement();n=$("<div/>").addClass(t.CSSCLASS_DIALOG_CONTAINER);this._errorPane=p.BaseControl.createIn(k.MessageAreaControl,i);this._createDaysOffTable(n);this._createAddRowLink(n);this._createTotalDaysOffRow(n);i.append(n);this._fixupLayout()},t.prototype._fixupLayout=function(){var n=this._$datesTable.outerWidth(),t=this._$datesTable.parent().innerWidth();t<n&&this._$datesTable.parent().css("overflow-x","scroll")},t.prototype._createDaysOffTable=function(n){var i,o,f,r,e;if(r=this._options.dateRanges,f=$("<div/>").addClass(t.CSSCLASS_DATES_TABLE_CONTAINER),e=$("<td/>").addClass(t.CSSCLASS_DAYS_OFF_HEADER).text(u.DaysOffDialog_DaysOffHeader),this._$datesTable=$("<table/>").append($("<tr/>").append($("<td/>").addClass(t.CSSCLASS_ICON_HEADER)).append($("<td/>").prop("id",t.CSSCLASS_DATE_HEADER_START_ID).addClass(t.CSSCLASS_DATE_HEADER).text(u.DaysOffDialog_StartDateHeader)).append($("<td/>").prop("id",t.CSSCLASS_DATE_HEADER_END_ID).addClass(t.CSSCLASS_DATE_HEADER).text(u.DaysOffDialog_EndDateHeader)).append(e)),d.RichContentTooltip.add(u.DaysOffDialog_DaysOffTooltip,e),f.append(this._$datesTable),r.length>0)for(i=0,o=r.length;i<o;i+=1)this._createDaysOffRow(r[i]);else this._createDaysOffRow();n.append(f)},t.prototype._createAddRowLink=function(n){var f=this,r,i;r=$("<div/>").addClass(t.CSSCLASS_LINK_CONTAINER);i=$("<button/>").addClass(t.CSSCLASS_BUTTON).bind("click.tfs.agile",yt(this,this._addRowHandler)).bind("keydown.tfs.agile",function(n){if(n.keyCode===et.KeyCode.ENTER)return f._$addLink.click(),!1});this._$addLink=$("<span/>").append(u.DaysOffDialog_AddLink).addClass(t.CSSCLASS_BUTTON_SPAN);this._$addIcon=$("<span/>").addClass("icon clickable bowtie-icon bowtie-math-plus-heavy");i.append(this._$addIcon);i.append(this._$addLink);r.append(i);n.append(r)},t.prototype._setFocusOnFirstInput=function(){$("input:visible:first",this._element).focus()},t.prototype._createTotalDaysOffRow=function(n){var i;this._$totalDaysOffCell=$("<div/>").addClass(t.CSSCLASS_TOTAL_COUNT);i=$("<div/>").addClass(t.CSSCLASS_TOTAL_CONTAINER).append($("<div/>").addClass(t.CSSCLASS_TOTAL_TEXT).text(u.DaysOffDialog_Total)).append(this._$totalDaysOffCell);d.RichContentTooltip.add(u.DaysOffDialog_DaysOffTooltip,i);n.append(i)},t.prototype._createDaysOffRow=function(n){var i=$("<tr/>"),r=$("<input/>"),f=$("<input/>"),e,o;o=t.VALIDATION_GROUP+this._nextValidationGroupNumber;this._nextValidationGroupNumber+=1;i.data(t.VALIDATION_GROUP,o);e=$("<button/>").attr("aria-label",u.DaysOffDialog_DeleteTooltip).bind("click.tfs.agile",yt(this,this._deleteRowHandler,i)).addClass("delete-row").bind("keydown.tfs.agile",function(n){if(n.keyCode===et.KeyCode.ENTER)return e.click(),!1}).append($("<div/>").addClass("bowtie-icon bowtie-edit-delete").addClass("icon"));d.RichContentTooltip.add(u.DaysOffDialog_DeleteTooltip,e);i.append($("<td/>").append(e));r.attr("type","text").attr("aria-labelledby",t.CSSCLASS_DATE_HEADER_START_ID).addClass("validate").val(n?ut.localeFormat(n.start,"d",!0):"").bind("blur.tfs.agile",yt(this,this._dateChanged,i));i.append($("<td/>").append(r));p.Enhancement.enhance(w.DatePicker,r,{type:"date-time",dropOptions:{host:$(document.body)}});this._addValidatorsToDateField(r,o,u.DaysOffDialog_StartDateBetweenRangeError,u.DaysOffDialog_EndBeforeStartError,f,1);f.attr("type","text").attr("aria-labelledby",t.CSSCLASS_DATE_HEADER_END_ID).addClass("validate").val(n?ut.localeFormat(n.end,"d",!0):"").bind("blur.tfs.agile",yt(this,this._dateChanged,i));i.append($("<td/>").append(f));p.Enhancement.enhance(w.DatePicker,f,{type:"date-time",dropOptions:{host:$(document.body)},getInitialDate:function(){return ut.parseLocale(r.val(),null,!0)||undefined}});this._addValidatorsToDateField(f,o,u.DaysOffDialog_EndDateBetweenRangeError,u.DaysOffDialog_EndBeforeStartError,r,0);i.append($("<td/>").append($("<div/>").addClass(t.CSSCLASS_DAYS_OFF_COUNT)));this._$datesTable.append(i);n||this._validateRow(i,[]);r.focus()},t.prototype._addValidatorsToDateField=function(n,t,i,r,f,e){var o=[];o.push(p.Enhancement.enhance(g.RequiredValidator,n,{invalidCssClass:"required-invalid",group:"default",message:""}));o.push(p.Enhancement.enhance(g.DateValidator,n,{invalidCssClass:"date-invalid",group:"default",message:u.DaysOffDialog_DateMustBeValidDateError}));o.push(p.Enhancement.enhance(ni,n,{startDate:this._teamCapacity.getIterationStartDate(),endDate:this._teamCapacity.getIterationEndDate(),message:i}));o.push(p.Enhancement.enhance(gt,n,{comparison:e,relativeToField:f,message:r}));p.Enhancement.enhance(dt,n,{validators:o,group:t})},t.prototype._deleteRowHandler=function(n,i){n.preventDefault();var r=i.data(t.VALIDATION_GROUP);this._updateDaysOffCounts(i,!1);delete this._dateRangeCache[r];delete this._emptyRows[r];this._validateNoOverlapInDateRanges();i.remove();$("tr:gt(0)",this._$datesTable).length===0&&this._createDaysOffRow();this._setFocusOnFirstInput()},t.prototype._addRowHandler=function(n){n&&n.preventDefault();this._validateAllRows()?this._createDaysOffRow():this._errorPane.setError(u.DaysOffDialog_AddRowError)},t.prototype._dateChanged=function(n,i){var u=i.data(t.VALIDATION_GROUP),r;r=this._validateRow(i,[]);r&&(r=this._validateNoOverlapInDateRanges(u));this._updateDaysOffCounts(i,r)},t.prototype._validateAllRows=function(){var t=this,r=$("tr:gt(0)",this._$datesTable),n=[],i;return r.each(function(){var r=$(this),i=[];t._validateRow(r,i);t._updateDaysOffCounts(r,i.length===0);n=n.concat(i)}),n.length!==0&&this._showValidationError(n),i=this._validateNoOverlapInDateRanges(),n.length===0&&i},t.prototype._validateRow=function(n,i){var r=n.data(t.VALIDATION_GROUP),u,f;return g.validateGroup(r,i),u=i.length===0,u?(f=this._getDateRangeFromRow(n),f&&(this._dateRangeCache[r]=f)):delete this._dateRangeCache[r],this._isRowEmpty(n)?this._emptyRows[r]=!0:delete this._emptyRows[r],u},t.prototype._validateNoOverlapInDateRanges=function(n){var f,h,s=!0,r=[],e,t,i,c=this._overlappingValidationGroups||{},o={};for(r=this._getValidDateRanges(!0),r.sort(ui),t=r[0],f=1,h=r.length;f<h;f+=1)i=r[f],i.start<=t.end?((n===undefined||n===i.validationGroupName||n===t.validationGroupName)&&(s=!1),o[i.validationGroupName]=!0,o[t.validationGroupName]=!0,this._toggleInvalidForGroupRow(i.validationGroupName,!0),this._toggleInvalidForGroupRow(t.validationGroupName,!0),t={start:t.start,end:i.end>t.end?i.end:t.end,validationGroupName:i.validationGroupName}):t=i;s||this._errorPane.setError(u.DaysOffDialog_DateRangeOverlapError);for(e in c)c.hasOwnProperty(e)&&(e in o||this._toggleInvalidForGroupRow(e,!1));return this._overlappingValidationGroups=o,s},t.prototype._showValidationError=function(n){for(var u,i,t=0,r=n.length;t<r;t+=1)if(u=n[t],i=u.getMessage(),i)break;i&&this._errorPane.setError(i)},t.prototype._toggleInvalidForGroupRow=function(n,t){var i=this._getRowForValidationGroup(n);$("input",i).toggleClass("invalid",t);this._updateDaysOffCounts(i,!t)},t.prototype._updateDaysOffCounts=function(n,r){var s=$("."+t.CSSCLASS_DAYS_OFF_COUNT,n),c=Number(s.text()),f=0,h,e=this._teamCapacity.getIterationStartDate(),o=this._teamCapacity.getIterationEndDate(),u=this._getCachedDateRangeForRow(n);r=r!==undefined?r:!0;r&&u&&(u=i.CapacityDateUtils.normalizeForDateRange(u,e,o),u.start>=e&&u.start<=o&&u.end>=e&&u.end<=o&&(h=this._options.excludeTeamDaysOff?i.CapacityDateUtils.getMergedDateRangeList(this._teamCapacity.getIterationInfo().getTeamDaysOffDates(),[],u.start,u.end):[],f=i.CapacityDateUtils.getDateBreakdown(u.start,u.end,h,this._teamCapacity.getWeekends()).workingDays));s.text(r&&u?""+f:"");this._totalDaysOff=this._totalDaysOff-c+f;this._$totalDaysOffCell.text(this._totalDaysOff)},t.prototype._getRowForValidationGroup=function(n){var r=$("tr:gt(0)",this._$datesTable),i;return r.each(function(){var r=$(this),u=r.data(t.VALIDATION_GROUP);if(u===n)return i=r,!1}),i},t.prototype._getValidDateRanges=function(n){var u=[],i=this._dateRangeCache,t,r;for(t in i)i.hasOwnProperty(t)&&(r=i[t],n&&(r.validationGroupName=t),u.push(r));return u},t.prototype._getCachedDateRangeForRow=function(n){var i=n.data(t.VALIDATION_GROUP);return this._dateRangeCache[i]},t.prototype._getDateRangeFromRow=function(n){var t=$("input",n),i,r,u;return t.length>0&&(i=t.eq(0).val(),r=t.eq(1).val(),i&&r&&(u={start:ut.parseLocale(i,null,!0),end:ut.parseLocale(r,null,!0)})),u},t.prototype._isRowEmpty=function(n){var t=$("input",n);return!t.eq(0).val()&&!t.eq(1).val()},t.enhancementTypeName="tfs.agile.daysoffdialog",t.CSSCLASS_DIALOG_CONTAINER="days-off-dialog-container",t.CSSCLASS_DATES_TABLE_CONTAINER="days-off-dialog-dates-table-container",t.CSSCLASS_ICON_HEADER="days-off-dialog-icon-header-cell",t.CSSCLASS_DATE_HEADER="days-off-dialog-date-header-cell",t.CSSCLASS_DATE_HEADER_START_ID="days-off-dialog-date-header-cell-start",t.CSSCLASS_DATE_HEADER_END_ID="days-off-dialog-date-header-cell-end",t.CSSCLASS_DAYS_OFF_HEADER="days-off-dialog-days-off-header-cell",t.CSSCLASS_DAYS_OFF_COUNT="days-off-dialog-days-off-count",t.CSSCLASS_LINK_CONTAINER="days-off-dialog-link-container",t.CSSCLASS_BUTTON="agile-url-link-button",t.CSSCLASS_BUTTON_SPAN="days-off-dialog-button-span",t.CSSCLASS_LINK="days-off-dialog-link",t.CSSCLASS_TOTAL_CONTAINER="days-off-dialog-total-days-off-container",t.CSSCLASS_TOTAL_TEXT="days-off-dialog-total-days-off-text",t.CSSCLASS_TOTAL_COUNT="days-off-dialog-total-days-off-count",t.VALIDATION_GROUP="validation-group",t}(b.ModalDialogO);t.DaysOffDialog=ri;t.DateRangeStartDateCompare=ui});

define("Presentation/Scripts/TFS/TFS.UI.Controls.Grid.DataAdapters",["require","exports","VSS/Diag","VSS/Events/Handlers","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/UI","VSS/Utils/String","VSS/VSS"],function(n,t,i,r,u,f,e,o,s){var h,l;Object.defineProperty(t,"__esModule",{value:!0});t.ChecklistDataAdapter=t.HierarchicalGridDataAdapter=t.FieldDataProvider=void 0;var v=e.domElem,c=f.delegate,a=function(){function n(n,t){this._nodes=n;this._options=$.extend({allowEmpty:!1,sort:null},t);this._isTree=n.length>0&&typeof n[0]=="object";this._events=new r.NamedEventCollection;this._isTree&&this._sortChildren({children:this._nodes},!0);this._populateNodeMappings()}return n.prototype.reparentNode=function(n,t){this.removeNode(n.id);this.addNode(n,t)},n.prototype.isValidValue=function(n){return n===""&&this._options.allowEmpty?!0:this._nodes.length===0?n!=="":(n=this._cleanupPath(n),this._pathToNodeMap.hasOwnProperty(n))},n.prototype.isTree=function(){return this._isTree},n.prototype.getNodes=function(){return this._nodes},n.prototype.getNode=function(n){return n=this._cleanupPath(n),this._pathToNodeMap[n]||null},n.prototype.getNodeFromId=function(n){return this._idToNodeMap[n]||null},n.prototype.updateNode=function(n){var t=this.getNodeFromId(n.id);return typeof t=="undefined"?null:t.parentId!==n.parentId?null:(t.text!==n.text&&(this._clearCache(t),t.text=n.text,this._addNode(t.parent,t)),t.values=n.values.slice(0),t.parent&&this._sortChildren(t.parent),this._raiseUpdateItem({node:t}),t)},n.prototype.getRootNode=function(){var n=this.getNodes(),t=null;return n&&n.length>0&&(t=n[0]),t},n.prototype.getPreviousSiblingNode=function(n){var t,f,e=null,r=this.getNodeFromId(n),u;if(r)for(u=r.parent?r.parent.children:this._nodes,t=0,f=u.length;t<f;t+=1){if(u[t]===r)break;e=u[t]}return e},n.prototype.removeNode=function(n){var t=this.getNodeFromId(n),r;return t&&(r=this._getChildrenCount(t)+1,t.parent&&t.parent.children&&(t.parent.children=u.subtract(t.parent.children,[t])),this._clearCache(t),this._raiseRemovedItem({node:t,parent:t.parent,treeSize:r})),t},n.prototype.addNode=function(n,t){var r=t.children;return this.getNodeFromId(n.id)?null:this.getNodeFromId(t.id)?(r.push(n),n.parentId=t.id,this._sortChildren(t,!1),this._sortChildren(n,!0),this._addNode(t,n),this._raiseNewItem({node:n,parent:t}),n):null},n.prototype.cloneSource=function(){return[h.cloneNode(this.getRootNode())]},n.prototype.attachNewItem=function(t){this._events.subscribe(n.EVENT_NEW_ITEM,t)},n.prototype.detachNewItem=function(t){this._events.unsubscribe(n.EVENT_NEW_ITEM,t)},n.prototype.attachRemovedItem=function(t){this._events.subscribe(n.EVENT_REMOVED_ITEM,t)},n.prototype.detachRemovedItem=function(t){this._events.unsubscribe(n.EVENT_REMOVED_ITEM,t)},n.prototype.attachUpdateItem=function(t){this._events.subscribe(n.EVENT_UPDATE_ITEM,t)},n.prototype.detachUpdateItem=function(t){this._events.unsubscribe(n.EVENT_UPDATE_ITEM,t)},n.prototype._populateNodeMappings=function(){var n,i,t=this._nodes;if(this._pathToNodeMap={},this._idToNodeMap={},this._isTree)for(n=0,i=t.length;n<i;n+=1)this._addNode(null,t[n]);else for(n=0,i=t.length;n<i;n+=1)this._pathToNodeMap[t[n]]=t[n]},n.prototype._sortChildren=function(n,t,r){var u=n.children||[],f=u.length;if(r=r||this._options.sort,$.isFunction(r)&&(u.sort(r),t))while(f>0)f-=1,this._sortChildren(u[f],!0,r)},n.prototype._addNode=function(t,r){var u,f,e=(t===null?"":t.path+n.TREE_PATH_SEPERATER_CHAR)+r.text;if(r.path=e,t,r.parent=t,this._pathToNodeMap[e]=r,this._idToNodeMap[r.id]=r,r.children)for(u=0,f=r.children.length;u<f;u+=1)this._addNode(r,r.children[u])},n.prototype._clearCache=function(n){var t,i;if(n&&(delete this._pathToNodeMap[n.path],delete this._idToNodeMap[n.id],n.children))for(t=0,i=n.children.length;t<i;t+=1)this._clearCache(n.children[t])},n.prototype._cleanupPath=function(t){var r=t;return r.length>0&&this.isTree()&&r.charAt(r.length-1)===n.TREE_PATH_SEPERATER_CHAR&&(r=r.substr(0,r.length-1)),r},n.prototype._getChildrenCount=function(n){var t,u,r=0;if($.isArray(n.children))for(r=n.children.length,t=0,u=r;t<u;t+=1)r+=this._getChildrenCount(n.children[t]);return r},n.prototype._raiseNewItem=function(t){this._events.invokeHandlers(n.EVENT_NEW_ITEM,this,t)},n.prototype._raiseRemovedItem=function(t){this._events.invokeHandlers(n.EVENT_REMOVED_ITEM,this,t)},n.prototype._raiseUpdateItem=function(t){this._events.invokeHandlers(n.EVENT_UPDATE_ITEM,this,t)},n.TREE_PATH_SEPERATER_CHAR="\\",n.EVENT_NEW_ITEM="new-item-event",n.EVENT_REMOVED_ITEM="removed-item-event",n.EVENT_UPDATE_ITEM="updated-item-event",n}();t.FieldDataProvider=a;s.initClassPrototype(a,{_events:null,_nodes:null,_idToNodeMap:null,_pathToNodeMap:null,_isTree:!1,_options:null});h=function(){function n(n,t,r){this._grid=t;this._options=$.extend({},r);this.dataProvider=n;this.dataProvider.attachNewItem(c(this,function(n,t){this._addNewItem(t.node,t.parent)}));this.dataProvider.attachRemovedItem(c(this,function(n,t){this._removeItem(t.node,t.parent,t.treeSize)}));this.dataProvider.attachUpdateItem(c(this,function(n,t){this._updateItem(t.node)}))}return n.bindAdapter=function(n,t,r,u){var f,o,e,s=new n(t,r,u);for(e=r._options.columns,f=0,o=e.length;f<o;f++)delete e[f].index;return s.refresh(),s},n.cloneNode=function(t){var r=$.extend({},t),i,u;for(r.children=[],delete r.parent,i=0,u=t.children.length;i<u;i+=1)r.children[i]=n.cloneNode(t.children[i]);return r},n.prototype.getGrid=function(){return this._grid},n.prototype.refresh=function(n){var u=this.dataProvider.getNodes(),t=[],i=this._grid.getExpandStates(),r=[];i&&(t=i.slice(0));this._flattenedItems=[];this._createDataSource(u,this._flattenedItems,r,1);n||(this._expandStates=r,this._expandStates&&this._expandStates.length===t.length&&(this._expandStates=t),this._grid.setDataSource(this._flattenedItems,this._expandStates,this._grid._options.columns))},n.prototype.getNodeForDataIndex=function(t){var r=this._flattenedItems[t];return r?this.dataProvider.getNodeFromId(r[n._ITEM_ID_DATA_SOURCE_INDEX]):null},n.prototype.getParentNodeIndexForDataIndex=function(n){if(!n)return-1;var t=this.getNodeForDataIndex(n),r=-1;return t&&(r=this.getDataIndexFromNode(t.parent)),r},n.prototype.getDataIndexFromNode=function(n){return n.dataIndex},n.prototype.getMaxExpandLevel=function(){return this._grid._indentLevels.reduce(function(n,t){return Math.max(n,t)},1)-1},n.prototype.cloneSource=function(){return[n.cloneNode(this.fieldDataHelper.getNodes()[0])]},n.prototype._createDataSource=function(n,t,i,r){this._populateDataSource(n,t,i,r)},n.prototype._constructRow=function(t){var i=[].concat(t.values);return i[n._ITEM_ID_DATA_SOURCE_INDEX]=t.id,i},n.prototype._populateDataSource=function(n,t,i,r){for(var f,e=n.length,u=0,o=n.length;u<o;u+=1)f=t.length,n[u].dataIndex=f,t[f]=this._constructRow(n[u]),i[f]=0,typeof n[u].children!="undefined"&&(i[f]=this._populateDataSource(n[u].children,t,i,r+1),e+=i[f]);return e},n.prototype._addNewItem=function(n,t){this.refresh(!0);var i=this.getDataIndexFromNode(n),r=this.getDataIndexFromNode(t);i===0?this._expandStates.splice(this._expandStates.length,0,0):this._expandStates.splice(i,0,0);this._updateExpandStates(r,1)},n.prototype._removeItem=function(n,t,r){var u=this.getDataIndexFromNode(n),f=this.getDataIndexFromNode(t);this._expandStates.splice(u,r);this._updateExpandStates(f,-r);this.refresh(!0)},n.prototype._updateItem=function(n){var r=this.getDataIndexFromNode(n),t;this.refresh(!0);t=this.getDataIndexFromNode(n);this._moveExpandStatesForNode(r,t)},n.prototype._updateExpandStates=function(n,t){var r=n,u=this._expandStates;if(r>=0)do u[r]<0?u[r]-=t:u[r]+=t,r=this.getParentNodeIndexForDataIndex(r);while(r>=0)},n.prototype._moveExpandStatesForNode=function(n,t){var f=Math.abs(this._expandStates[n])+1,r,i,u;for(r=this._expandStates.splice(n,f),u=r.length,i=u-1;i>=0;i-=1)this._expandStates.splice(t,0,r[i])},n._ITEM_ID_DATA_SOURCE_INDEX=-1,n}();t.HierarchicalGridDataAdapter=h;s.initClassPrototype(h,{_flattenedItems:null,_grid:null,_expandStates:[],_options:{},_expandStatesManager:null,dataProvider:null,fieldDataHelper:null});l=function(n){function t(u,f,o){var s=__construct(this,n,[u,f]);for(var c in s)s.hasOwnProperty(c)&&(this[c]=s[c]);s._events=new r.NamedEventCollection;s._checkboxRangeRootId=o.rootNodeId||null;s._noCheckboxes=o.noCheckboxes;s._allEnabled=o.allEnabled===undefined?!0:o.allEnabled;var h=s,l=f._options.columns,a={canSortBy:!1,text:"",width:30,fixed:!0,name:t.CHECK_COLUMN_NAME,getCellContents:function(n,t,i,r,u){return h._createCheckboxCell(t,u)}};return o.noColumn||(l.splice(t._CHECKBOX_COLUMN_INDEX,0,a),f.getElement().keyup(function(n){var i,r,t;n.keyCode===e.KeyCode.SPACE&&(i=h._grid.getSelectedDataIndex(),t=h._findCheckbox(i),t.length!==1||t.attr("disabled")||(r=!t.prop("checked"),t.prop("checked",r),h._setCheckedState(t,i,r)))})),s._disabledTooltip=o.disabledTooltip||"",s._disableChildren=o.disableChildren&&$.isFunction(o.disableChildren)?o.disableChildren:function(){return!0},s._onBeforeCheckChanged=o.onBeforeCheckChanged,s.initialize(o.checkedItemIds||[]),s}return __extends(t,n),t.prototype.initialize=function(n){var i,t,r;for(i={},t=0,r=n.length;t<r;t+=1)i[n[t]]=n[t];this._checkedItems=i;this._blockedCheckIds={}},t.prototype.hasCheckBox=function(n){return n>=this._checkboxRangeBegin&&n<=this._checkboxRangeEnd},t.prototype.updateCheckboxesRange=function(n){var t,r,u;this._checkboxRangeRootId?(t=this.dataProvider.getNodeFromId(this._checkboxRangeRootId),t&&(u=this.getDataIndexFromNode(t),r=Math.abs(n[u]),r>0?(this._checkboxRangeBegin=t.dataIndex+1,this._checkboxRangeEnd=t.dataIndex+r):(this._checkboxRangeBegin=-1,this._checkboxRangeEnd=-1))):this._noCheckboxes?(this._checkboxRangeBegin=-1,this._checkboxRangeEnd=-1):(this._checkboxRangeBegin=0,this._checkboxRangeEnd=this._flattenedItems.length-1)},t.prototype.getCheckboxRangeBegin=function(){return this._checkboxRangeBegin},t.prototype.getCheckboxRangeEnd=function(){return this._checkboxRangeEnd},t.prototype.isLeafNode=function(n){return this._expandStates[n.dataIndex]===0},t.prototype.blockCheck=function(n){this._blockedCheckIds[n]=!0;this._grid.updateRow(undefined,this._getDataIndexFromId(n))},t.prototype.unblockCheck=function(n){this._blockedCheckIds.hasOwnProperty(n)&&(delete this._blockedCheckIds[n],this._grid.updateRow(undefined,this._getDataIndexFromId(n)))},t.prototype.setCheckboxRangeRoot=function(n){this._checkboxRangeRootId=n;this.refresh()},t.prototype.getCheckboxRangeRoot=function(){return this._checkboxRangeRootId},t.prototype.attachCheckedItemsChanged=function(n){this._events.subscribe(t._CHECK_CHANGED,n)},t.prototype.detachCheckedItemsChanged=function(n){this._events.unsubscribe(t._CHECK_CHANGED,n)},t.prototype._createDataSource=function(i,r,u,f){var e,a,s=[],o,v,c=t._CHECKBOX_COLUMN_INDEX,l=h._ITEM_ID_DATA_SOURCE_INDEX,y;for(n.prototype._createDataSource.call(this,i,r,u,f),o=this._flattenedItems,this.updateCheckboxesRange(u),e=0,a=u.length;e<a;e++)if(this.hasCheckBox(e)){if(v=Math.abs(u[e]),s[e]=!0,this._disableChildren(o[e][l])&&o[e][c])for(y=e;e<y+v;)s[++e]=!1,o[e][c]=!1,delete this._checkedItems[o[e][l]]}else delete this._checkedItems[o[e][l]],o[e][c]=!1;this._itemStates=s},t.prototype.setItemState=function(n,t){t?this._checkedItems[n]=n:delete this._checkedItems[n]},t.prototype.getItemChecked=function(n){return this._grid.getColumnValue(n,t._CHECKBOX_COLUMN_INDEX)},t.prototype.setItemTitle=function(n,t){var r=this._getDataIndexFromId(n),u=this._findCheckbox(r);u.attr("title",t)},t.prototype.resetItemTitle=function(n){var t=this._getDataIndexFromId(n),r=this._findCheckbox(t);this._setCheckboxDefaultTitle(r)},t.prototype.getCheckedItemIds=function(){var n,f,e=[],c=t._CHECKBOX_COLUMN_INDEX,o=h._ITEM_ID_DATA_SOURCE_INDEX,i,r=this._flattenedItems,s=this._itemStates,u;for(i={},n=0,f=s.length;n<f;n++)s[n]&&r[n][c]&&(i[r[n][o]]=r[n][o]);this._checkedItems=i;for(u in i)i.hasOwnProperty(u)&&e.push(i[u]);return e},t.prototype.setCheckboxStateData=function(n,r){var u,o=Math.abs(this._expandStates[n]),f=this._grid._dataSource,e=f[n][h._ITEM_ID_DATA_SOURCE_INDEX];if(f[n][t._CHECKBOX_COLUMN_INDEX]=r,this._disableChildren(e))for(u=n+1;u<=n+o;u++)f[u][t._CHECKBOX_COLUMN_INDEX]=!1,this.setItemState(f[u][h._ITEM_ID_DATA_SOURCE_INDEX],!1),this._itemStates[u]=!r,this._grid.updateRow(undefined,u);this.setItemState(e,r);this._grid.updateRow(undefined,n)},t.prototype.setCheckboxRangeStateData=function(n,t,i){for(var r=n;r<=t;r++)this.setCheckboxStateData(r,i)},t.prototype.getCheckboxState=function(n){var r=this._grid._dataSource;return n>=0?r[n][t._CHECKBOX_COLUMN_INDEX]:!1},t.prototype.getItemEnabled=function(n){return this._allEnabled&&this._itemStates[n]&&!this._blockedCheckIds[this._getIdFromDataIndex(n)]},t.prototype.getBranchCheckedState=function(){var i=!0,e=this._grid._dataSource,u=this.dataProvider.getRootNode(),n=[],r,f;if(u&&(n=u.children),n&&n.length!==0)for(r=0,f=n.length;r<f&&i;r+=1)i=e[n[r].dataIndex][t._CHECKBOX_COLUMN_INDEX];else i=!1;return i},t.prototype._constructRow=function(r){var u=n.prototype._constructRow.call(this,r),f=this._checkedItems.hasOwnProperty(r.id);return u.splice(t._CHECKBOX_COLUMN_INDEX,0,f),u},t.prototype._getCheckboxCellId=function(n){var t=this._grid.getId()||"";return o.format("checkbox-{0}-{1}",t,n)},t.prototype._findCheckbox=function(n){var r=this._getCheckboxCellId(n),t=$("#"+r);return t},t.prototype._createCheckboxCell=function(n,r){var u,e=this._getCheckboxCellId(n),f,s,h,l;return u=$(v("div","grid-cell")),u.width(r.width||20),this.hasCheckBox(n)&&(h=this.getItemEnabled(n),l=this.getItemChecked(n),s=$("<label class='hidden' for='"+e+"'/>").text(this._grid.getColumnValue(n,t._LABEL_COLUMN_INDEX)),u.append(s),f=$("<input type='checkbox' tabindex='-1' id='"+e+"'>").data("checkbox-data-index",n).prop("checked",l).prop("disabled",!h),this._setCheckboxDefaultTitle(f),f.click(c(this,this._onCheckboxClicked)),u.append(f)),u},t.prototype._onCheckboxClicked=function(n){i.logTracePoint("TFS.UI.Controls.Data.ChecklistDataAdapter._onCheckboxClicked.start");var t=$(n.currentTarget),r,u;r=t.data("checkbox-data-index");u=t.is(":checked");this._setCheckedState(t,r,u)},t.prototype._setCheckedState=function(n,t,i){var r=!0;$.isFunction(this._onBeforeCheckChanged)&&(r=this._onBeforeCheckChanged(t,i));r?(this.setCheckboxStateData(t,i),this._raiseCheckedItemsChanged({id:this._getIdFromDataIndex(t)})):n.prop("checked",!i)},t.prototype._raiseCheckedItemsChanged=function(n){this._events.invokeHandlers(t._CHECK_CHANGED,this,n)},t.prototype._setCheckboxDefaultTitle=function(n){n.attr("title",n.attr("disabled")?this._disabledTooltip:"")},t.prototype._getIdFromDataIndex=function(n){return this._flattenedItems[n][h._ITEM_ID_DATA_SOURCE_INDEX]},t.prototype._getDataIndexFromId=function(n){var t=this.dataProvider.getNodeFromId(n);return t?t.dataIndex:undefined},t._CHECKBOX_COLUMN_INDEX=0,t._LABEL_COLUMN_INDEX=1,t._CHECK_CHANGED="checked-items-changed",t.CHECK_COLUMN_NAME="checks-column",t}(h);t.ChecklistDataAdapter=l;s.initClassPrototype(l,{_checkedItems:null,_itemStates:null,_events:null,_disabledTooltip:null,_checkboxRangeRootId:null,_checkboxRangeBegin:null,_checkboxRangeEnd:null,_allEnabled:!0,_blockedCheckIds:null,_disableChildren:null,_noCheckboxes:null});s.tfsModuleLoaded("VSS.UI.Controls.Data",t)});

define("Admin/Scripts/TFS.Admin",["require","exports","VSS/VSS"],function(n,t,i){var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.CustomerIntelligenceConstants=t.Notifications=t.Actions=void 0;r=function(){function n(){}return n.EDIT_CLASSIFICATION="VSS.Admin.AreaIterations.EditClassification",n}();t.Actions=r;u=function(){function n(){}return n.CLASSIFICATION_CHANGED="VSS.Admin.AreaIterations.ClassificationChanged",n}();t.Notifications=u,function(n){var t="WebAccess.Admin",r=function(){function n(){}return n.AREA=t+"AreaIterations",n.AREAS_CONTROL_INITIALIZATION="AreasControlInitialization",n.ITERATIONS_CONTROL_INITIALIZATION="IterationsControlInitialization",n.CREATE_AREA="CreateArea",n.CREATE_ITERATION="CreateIteration",n.EDIT_AREA="EditArea",n.EDIT_ITERATION="EditIteration",n.DELETE_AREA="DeleteArea",n.DELETE_ITERATION="DeleteIteration",n}(),i;n.AreaIterations=r;i=function(){function n(){}return n.AREA=t+"Process",n.ADMIN_EX_AREA=t+"AdminExp",n.LAYOUT_VIEW="AdminLayout",n.ADD_GROUP_DIALOG="AddGroupDialog",n.ADD_FIELD_DIALOG="AddFieldDialog",n.EDIT_FIELD_DIALOG="EditFieldDialog",n.ADD_CONTROLCONTRIBUTION_DIALOG="AddControlContributionDialog",n.EDIT_CONTROLCONTRIBUTION_DIALOG="EditControlContributionDialog",n.MANAGE_IDENTITIES_VIEW="Security.ManageIdentitiesView",n.ADD_DERIVED_TYPE_TO_BACKLOG="AddDerivedTypeToBacklog",n}();n.Process=i}(f=t.CustomerIntelligenceConstants||(t.CustomerIntelligenceConstants={}));i.tfsModuleLoaded("TFS.Admin",t)});

define("Agile/Scripts/Sources/AgileDataSource",["require","exports","VSS/Service","VSS/Context","VSS/Contributions/Services"],function(n,t,i,r,u){function f(n,t){return t===void 0&&(t=null),__awaiter(this,void 0,void 0,function(){var e,f;return __generator(this,function(o){switch(o.label){case 0:return e=i.getService(u.WebPageDataService,r.getDefaultWebContext()),[4,e.getDataAsync(n,null,t)];case 1:if(f=o.sent(),f.errorMessage&&f.errorMessage.length>0)throw new Error(f.errorMessage);else return[2,f.data];return[2]}})})}Object.defineProperty(t,"__esModule",{value:!0});t.getDataAsync=void 0;t.getDataAsync=f});

define("WorkItemTracking/Scripts/Utils/PermissionHandler",["require","exports","VSS/Service","VSS/Contributions/Services","jQueryUI/droppable"],function(n,t,i,r){function u(){var u=i.getService(r.WebPageDataService),n=u.getPageData(t.BACKLOGPERMISSION_DATAPROVIDER_ID);return!n?!1:n.hasPermission}Object.defineProperty(t,"__esModule",{value:!0});t.hasAgileToolsBacklogManagementPermission=t.BACKLOGPERMISSION_DATAPROVIDER_ID=void 0;t.BACKLOGPERMISSION_DATAPROVIDER_ID="ms.vss-work-web.backlog-permission-data-provider";t.hasAgileToolsBacklogManagementPermission=u});

define("Agile/Scripts/Common/SprintDates",["require","exports","VSS/VSS","VSS/Error","VSS/Diag","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/Controls","VSS/Controls/Dialogs","VSS/Events/Action","VSS/Events/Services","Agile/Scripts/Resources/TFS.Resources.AgileControls","Agile/Scripts/Capacity/CapacityModels","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.UI.Controls.Grid.DataAdapters","Admin/Scripts/TFS.Admin","Agile/Scripts/Common/IterationDateUtil","VSS/Controls/PopupContent","Agile/Scripts/Sources/AgileDataSource","WorkItemTracking/Scripts/Utils/PermissionHandler"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){var rt,ut;Object.defineProperty(t,"__esModule",{value:!0});t.SprintDates=t.WorkingDays=void 0;rt=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.updateBasedOnTeamCapacity=function(){var i=$(".".concat(t.WORKING_DAYS_CONTROLLER_CLASS)),n=v.getService().getCapacityPageModel(),r=t._getWorkingDaysMessage(n.getIterationStartDate(),n.getIterationEndDate(),n.getWeekends(),n.getIterationInfo().getTeamDaysOffDates());i.text(r)},t._getWorkingDaysMessage=function(n,t,i,r){if(!n||!t)return"";var f,u=g.IterationDateUtil.getNumberOfWorkingDays(o.shiftToUTC(n),o.shiftToUTC(t),i,r);return u===null||u<0?"":(g.IterationDateUtil.isTodayInSprint(o.shiftToUTC(n),o.shiftToUTC(t))?(u=g.IterationDateUtil.getNumberWorkingDaysLeft(o.shiftToUTC(t),i,r),f=u===1?a.WorkingDays_Work_Day_Remaining:a.WorkingDays_Work_Days_Remaining):f=u===1?a.WorkingDays_Work_Day:a.WorkingDays_Work_Days,e.format(f,u))},t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({cssClass:t.WORKING_DAYS_CONTROLLER_CLASS},i))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._element.text(t._getWorkingDaysMessage(this._options.startDate,this._options.endDate,this._options.weekends,this._options.teamDaysOff))},t.enhancementTypeName="tfs.agile.workingdays",t.WORKING_DAYS_CONTROLLER_CLASS="team-working-days",t}(s.Control);t.WorkingDays=rt;s.Enhancement.registerEnhancement(rt,".team-working-days");ut=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._editIterationHandler=function(n,i){var r=n;return t._showIterationDialog(r),i(n)},t._editIteration=function(){u.logTracePoint("SprintDates._editIteration.start");c.getService().performAction(d.Actions.EDIT_CLASSIFICATION,t._options.iterationId)},t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"sprint-dates-working-days",syncWorkItemTracking:!0},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.createLayout();c.getService().registerActionWorker(d.Actions.EDIT_CLASSIFICATION,this._editIterationHandler)},t.prototype.dispose=function(){c.getService().unregisterActionWorker(d.Actions.EDIT_CLASSIFICATION,this._editIterationHandler);n.prototype.dispose.call(this)},t.prototype.createLayout=function(){this._$sprintDates=$("<button>").addClass("sprint-date hub-title-right");this._$workingDays=$("<div>").addClass("sprint-working-days hub-title-right-secondary");this._renderSprintDates();this._options.startDate&&this._options.finishDate?this._beginRenderWorkingDaysControl(this._options.startDate,this._options.finishDate):this._addEditIterationDatesMessage();this.getElement().append(this._$sprintDates).append(this._$workingDays)},t.prototype.beginGetDataProvider=function(n,t){var i=this;this._dataProvider?f.delay(this,0,n,[this._dataProvider]):this.beginGetIterations(function(t){i._dataProvider=new k.FieldDataProvider(t);n&&n.call(i,i._dataProvider)},t)},t.prototype.beginGetIterations=function(n,t){tt.getDataAsync("ms.vss-work-web.api-classification-iterations-data-provider").then(function(i){i?n(i):t(null)},t)},t.prototype._renderSprintDates=function(){var t=this._$sprintDates,n;if(!t){r.publishErrorToTelemetry({name:"setSprintDatesFailed",message:"$sprintDates should not be null. Iteration Path: ".concat(this._options.iterationPath)});return}n="";this._options.startDate&&this._options.finishDate&&(n=g.IterationDateUtil.getSprintDatesDisplay(o.shiftToUTC(this._options.startDate),o.shiftToUTC(this._options.finishDate)));it.hasAgileToolsBacklogManagementPermission()?(this._bind(t,"click",this._editIteration),n?(t.text(n).addClass("dates-set"),this._richContentTooltip=nt.RichContentTooltip.add(a.EditDatesForIteration,t)):(t.text(a.SprintDates_NoneSet).removeClass("dates-set"),this._richContentTooltip&&(this._richContentTooltip.dispose(),this._richContentTooltip=null))):(n?this._$sprintDates.text(n):this._$sprintDates.text(a.SprintDates_NoneSet),this._$sprintDates.attr("aria-label","".concat(n?n:""," ").concat(a.ClickToEditDatesForIteration)))},t.prototype._beginRenderWorkingDaysControl=function(n,t){var u=this,f=v.getService(),i=f.getCapacityOptions();i.accountCurrentDate||(i.accountCurrentDate=this._options.accountCurrentDate);var e=this._options,o=e.weekends,h=e.teamDaysOff;return!o||!h?f.beginGetTeamCapacityModel(this._options.iterationId,i.allowedActivities,i.accountCurrentDate).then(function(i){var r={startDate:n,endDate:t,weekends:i.getWeekends(),teamDaysOff:i.getIterationInfo().getTeamDaysOffDates()};return s.Enhancement.enhance(rt,u._$workingDays,r),null},function(n){return r.publishErrorToTelemetry({name:"beginGetTeamCapacityFailure",message:"Failure occurred in _beginRenderWorkingDaysControl ".concat(n," Iteration Path: ").concat(u._options.iterationPath)}),null}):(s.Enhancement.enhance(rt,this._$workingDays,{startDate:n,endDate:t,weekends:o,teamDaysOff:h}),Promise.resolve(null))},t.prototype._addEditIterationDatesMessage=function(){if(it.hasAgileToolsBacklogManagementPermission()){var n=$("<button>").text(a.SprintDates_SetDates).addClass("agile-url-link-button").addClass("sprint-set-dates-button").click(this._editIteration);nt.RichContentTooltip.add(a.ClickToEditDatesForIteration,n);this._$workingDays.append(n)}},t.prototype._showIterationDialog=function(n){var t=this;h.Dialog.beginExecuteDialogAction(function(r){function f(n,t,u){r();i.handleError(n,t,u)}i.using(["Agile/Scripts/Admin/AreaIterations.DataModels","Agile/Scripts/Admin/AreaIterations","Agile/Scripts/Admin/ManageClassificationDialogs"],function(s,h,c){t.beginGetDataProvider(function(h){var k=s.CssNode,g=h.getNodeFromId(n),l,v,w,nt=function(n){var i=h.updateNode(n.node);n=k.create(i,h);v.path===n.getPath()&&o.equals(v.startDate,n.getStartDate())&&o.equals(v.endDate,n.getEndDate())||t._raiseEventChanged(n.getPath())},tt=function(n,t){for(var i=t.length-1;i>=0;i-=1)if(t[i].friendlyPath===n)return i>0?t[i-1].id:null;return null},d;g!==null?(l=k.create(g,h),v={path:l.getPath(),startDate:l.getStartDate(),endDate:l.getEndDate()},w={disableLocationEdit:!0,syncWorkItemTracking:t._options.syncWorkItemTracking},d=b.ProjectCollection.getConnection(t._options.tfsContext),d.getService(p.TeamAwarenessService).beginGetTeamSettings(t._options.teamId).then(function(n){var i=n.previousIterations.concat(n.currentIteration,n.futureIterations),t=tt(v.path,i);d.getService(y.ProjectProcessConfigurationService).beginGetProcessSettings(function(n){t&&(w.previousIteration=k.create(h.getNodeFromId(t),h),w.weekends=n.weekends);c.ClassificationDialogs.showEditClassificationDialog(l,nt,w);u.logTracePoint("CreateEditIterationDialog.show.complete")},f)},f)):(r(),i.errorHandler.showError(e.format(a.SprintDates_IterationNotFound,t._options.iterationId,t._options.iterationPath)))},f)})})},t.prototype._raiseEventChanged=function(n){l.getService().fire(d.Notifications.CLASSIFICATION_CHANGED,this,n)},t.enhancementTypeName="tfs.agile.sprintdates",t}(s.Control);t.SprintDates=ut;i.classExtend(ut,w.TfsContext.ControlExtensions);s.Enhancement.registerEnhancement(ut,".sprint-dates-working-days")});

define("Analytics/Scripts/BatchResponseParser",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.BatchResponseParser=void 0;var i=function(){function n(n,t){this.position=0;this.content=n;this.batchSeparator=t;this.parseRawResponse()}return n.prototype.readTo=function(n){var i=this.position,t=this.content.indexOf(n,this.position);return t===-1?null:(this.position=t+n.length,this.content.substring(i,t))},n.prototype.readLine=function(){return this.readTo("\r\n")},n.prototype.parseRawResponse=function(){var n="--".concat(this.batchSeparator);this.readTo(n);this.readTo("\r\n\r\n");this.responseLine=this.readResponseLine();this.responseHeaders=this.readResponseHeaders();this.readLine();this.responseContent=this.readLine()},n.prototype.readResponseLine=function(){var i=this.position,r=this.readLine(),t=n.ResponseStatusRegex.exec(r);return t?{StatusCode:t[1],StatusText:t[2]}:(this.position=i,null)},n.prototype.readResponseHeaders=function(){var r={},u=this.position,i,t;do u=this.position,i=this.readLine(),t=n.ResponseHeaderRegex.exec(i),t!==null?r[t[1]]=t[2]:this.position=u;while(i&&t);return r},n.prototype.getResponseLine=function(){return this.responseLine},n.prototype.getResponseHeaders=function(){return this.responseHeaders},n.prototype.getResponseContent=function(){return this.responseContent},n.ResponseStatusRegex=/^HTTP\/1\.\d (\d{3}) (.*)/i,n.ResponseHeaderRegex=/^([^()<>@,;:\\"\/[\]?={} \t]+)\s?:\s?(.*)/,n}();t.BatchResponseParser=i});

define("Analytics/Scripts/GuidUtils",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.GUIDUtils=void 0;var i;(function(n){function i(){var n=(128+Math.floor(Math.random()*64)).toString(16);return t(8)+"-"+t(4)+"-4"+t(3)+"-"+n+t(2)+"-"+t(12)}function t(n){var i,r;if(!n)return Math.floor(Math.random()*16).toString(16);for(i="",r=0;r<n;r++)i+=t();return i}n.newGuid=i})(i=t.GUIDUtils||(t.GUIDUtils={}))});

define("Analytics/Scripts/VSS.Analytics.WebApi",["require","exports","VSS/Service","VSS/WebApi/RestClient","Analytics/Scripts/BatchResponseParser","Analytics/Scripts/GuidUtils","q","VSS/Utils/String","VSS/Context"],function(n,t,i,r,u,f,e,o,s){"use strict";function v(n){return window.VSS&&window.VSS.VssSDKRestVersion&&l[window.VSS.VssSDKRestVersion]?i.getClient(l[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):i.getClient(h,undefined,undefined,undefined,n)}var c,h,a,l;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.AnalyticsHttpClient=t.AnalyticsHttpClient3=t.BatchRequest=void 0,function(n){n[n.Enabled=1]="Enabled";n[n.Disabled=2]="Disabled";n[n.Auto=3]="Auto"}(c=t.BatchRequest||(t.BatchRequest={}));h=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.get=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){var b=this,k={$apply:r,$count:u,$expand:f,$filter:e,$format:o,$orderby:s,$search:h,$select:c,$skip:l,$top:a};return this.resolveRequestUrl(i,n,t,k).then(function(n){return b.performRequest(n,y,v,p,w)})},t.prototype.resolveRequestUrl=function(n,i,r,u){var f=this;return this._beginGetLocation("Analytics",t.locationId).then(function(t){return f.getRequestUrl(t.routeTemplate,t.area,t.resourceName,{oDataVersion:r,project:n,entityType:i},u)})},t.prototype.performRequest=function(n,i,r,o,s){var h=this,l=this._getInitializationPromise()||Promise.resolve(null);return l.then(function(){var k=i&&(i===c.Enabled||i===c.Auto&&n.length>t.maxGetURLLength),p={showProgressIndicator:h._options.showProgressIndicator,sessionId:h._options.sessionId,command:h._options.command},l={Accept:"*/*;api-version=".concat(t.apiVersion),Prefer:"omit-values=nulls"},a,v,y,b;if(r&&(l["X-TFS-Prefer"]="VSTS.Analytics.ExpectSinglePage=true"),o&&(l.Prefer=l.Prefer+",odata.maxpagesize=".concat(o)),s&&(l.GetSyncDates="true"),k){a=n.replace(/_odata.*/,"_odata/$batch");v=t.odataVersionRegex.exec(n);v&&(a=n.replace(/_odata.*/,"_odata/".concat(v[1],"/$batch")));var w=f.GUIDUtils.newGuid(),y={timeout:h._options.timeout,type:"POST",data:h.getPostPayload(n,w,s),processData:!1,headers:$.extend(l,{"Content-Type":"multipart/mixed; boundary=batch_".concat(w),Accept:"text/plain;api-version=".concat(t.apiVersion)})},d=h._issueAjaxRequest(a,y,!0,p);return d.spread(function(n,i,r){var h=r.getResponseHeader("Content-Type"),f=t.responseStatusRegex.exec(h);if(f){var c=new u.BatchResponseParser(n,f[1]),o=c.getResponseContent(),s=parseInt(o);return s?e.resolve(s):e.resolve(JSON.parse(o))}return e.reject("Response has invalid Content-Type header, the response content cannot be parsed")})}return y={type:"GET",timeout:h._options.timeout,headers:l},b=h._issueAjaxRequest(n,y,!0,p),b.spread(function(n){return n})})},t.prototype.getRequestUrl=function(t,i,r,u,f){var e="";return u.project&&(e+="{project}/"),n.prototype.getRequestUrl.call(this,e+t,i,r,u,f)},t.prototype.getPostPayload=function(n,t,i){return"--batch_".concat(t)+o.newLine+"Content-Type: application/http"+o.newLine+"Content-Transfer-Encoding: binary"+o.newLine+o.newLine+"GET ".concat(this.sanitizeCollectionInPostPayload(n)," HTTP/1.1")+o.newLine+(i?"GetSyncDates: true"+o.newLine:"")+o.newLine+"--batch_".concat(t)},t.prototype.sanitizeCollectionInPostPayload=function(n){var i=s.getPageContext(),t=n;if(!s.getPageContext().webAccessConfiguration.isHosted){var r=encodeURI(i.webContext.collection.name),u=encodeURI(i.webContext.project.name),f=i.webContext.collection.id;o.equals(r,u)?(t=n.replace(new RegExp("/".concat(f,"/|/A?").concat(f,"/"),"i"),"/"),t=t.replace("/".concat(r,"/").concat(u,"/"),"/".concat(u,"/"))):t=n.replace(new RegExp("/".concat(r,"/|/A?").concat(f,"/"),"i"),"/")}return t},t.serviceInstanceId="0000003C-0000-8888-8000-000000000000",t.locationId="97758d47-38cf-4ac2-a11d-c161e9b20609",t.maxGetURLLength=1024,t.responseStatusRegex=new RegExp("^multipart/mixed; boundary=(.*)","i"),t.odataVersionRegex=new RegExp(".*/_odata/(v\\d+\\.\\d+(-preview)?)?/","i"),t.apiVersion="3.0-preview.1",t}(r.VssHttpClient);t.AnalyticsHttpClient3=h;a=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(h);t.AnalyticsHttpClient=a;l={"3.0":h};t.getClient=v});

define("Analytics/Scripts/OData",["require","exports","VSS/Context","VSS/Service","Analytics/Scripts/VSS.Analytics.WebApi","VSS/Telemetry/Services"],function(n,t,i,r,u,f){var e,o;Object.defineProperty(t,"__esModule",{value:!0});t.OData=t.AnalyticsODataVersions=void 0;e=function(){function n(){}return n.v1Preview="v1.0-preview",n.v1="v1.0",n.v2Preview="v2.0-preview",n.v3Preview="v3.0-preview",n.v4Preview="v4.0-preview",n.latestODataVersion="v4.0-preview",n}();t.AnalyticsODataVersions=e;o=function(){function n(){}return n.query=function(t,i,r){var e=this.getAnalyticsClient(t,r),u;return i.oDataVersion||(f.publishEvent(new f.TelemetryEventData("Analytics","OData_Client",{suppliedODataVersionMissing:!0,defaultODataVersion:n.defaultODataVersion,command:t})),i.oDataVersion=n.defaultODataVersion),u=e.get(i.entityType,i.oDataVersion,i.project,i.$apply,i.$count,i.$expand,i.$filter,i.$format,i.$orderby,i.$search,i.$select,i.$skip,i.$top,i.expectSinglePage,i.useBatch,i.maxPageSize,i.getProviderSyncDates).then(function(n){if(i.useBatch&&n!=null&&n.error)throw n;else return n}),i.followNextLink?n.appendNextLinkData(e,u,i.useBatch,i.maxPageSize):u},n.queryByUrl=function(n,t,i,r,u,f){var e=this.getAnalyticsClient(n,i);return e.performRequest(t,r,u,f)},n.getAnalyticsClient=function(n,t){var e=i.getPageContext().diagnostics.webPlatformVersion,o=new r.VssConnection(i.getDefaultWebContext()),f=o.getHttpClient(u.AnalyticsHttpClient3,u.AnalyticsHttpClient3.serviceInstanceId,null,{command:"vsts-widget-".concat(n,"-").concat(e),timeout:t});return f.forceOptionsCallForAutoNegotiate=!1,f},n.appendNextLinkData=function(t,i,r,u){return i.then(function(i){var f=i[n.nextLinkKey],e;return f!=null?(e=t.performRequest(f,r,!1,u),n.appendNextLinkData(t,e,r,u).then(function(t){return i.value=i.value.concat(t.value),i[n.nextLinkKey]=undefined,i})):i})},n.nextLinkKey="@odata.nextLink",n.defaultODataVersion=e.v4Preview,n}();t.OData=o});

define("Analytics/Scripts/QueryCache/AnalyticsClientCore",["require","exports","Analytics/Scripts/OData"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.AnalyticsClientCore=void 0;var r=function(){function n(n,t){t===void 0&&(t=null);this.command=n}return n.prototype.runODataQuery=function(t){return i.OData.query(this.command,t,n.WidgetAjaxTimeoutMs)},n.WidgetAjaxTimeoutMs=122e3,n.featureName="AnalyticsChartingClient",n}();t.AnalyticsClientCore=r});

define("Analytics/Resources/TFS.Resources.Analytics",["require","exports"],function(require,exports){var e=exports;e.Operation_Contains="Contains";e.InfoIconButton_TooltipText="Learn more";e.FieldValueFalseLabel="False";e.Backlog_DisplayName="{0} backlog";e.AreaPathTitle="Path";e.TeamTitle="Team";e.ConnectionErrorText="VS403617: Unable to connect to the Analytics Service. Please check your internet connection and try again.";e.BacklogsLabel="Backlogs";e.ExpectedANumberValue="* Please provide a number.";e.ProjectTeamPicker_RowAriaLabel="Team row";e.FieldCriteriaNotAnAllowedValue="* Please choose one of the allowed values from the list.";e.ProjectTitle="Project";e.ProjectTeamPickerAddButtonLabel="Add a team filter";e.Operation_Le="";e.Operation_Lt="\u003c";e.Operation_Ne="";e.Operation_Ge="";e.Operation_Gt="\u003e";e.Operation_Eq="=";e.AreaPathDoesntExist="* Invalid area path.";e.FieldValuesOperator_Or="Or";e.WorkItemTypesPickerTitle="Backlogs and work items";e.Exception_PublicUserOnlyAllowsSingleProjectQuery="Public and anonymous users are only allowed to query single project";e.NoLongerExists="(no longer exists)";e.Operation_Notunder="Not under";e.ProjectAreaPickerAddButtonLabel="Add an area path filter";e.FieldCriteriaFilterAddButtonLabel="Add a field criteria filter";e.FieldValueTrueLabel="True";e.AnalyticsTrendsConfig_LoadProjectsFailed="VS403618: Failed to load Projects. Refresh and try again.";e.WorkItemTypeDoesNotExist="* Invalid work item type.";e.AnalyticsTrendsConfig_LoadBacklogConfigurationsFailed="VS403621: Failed to load Backlog Configurations. Refresh and try again.";e.BacklogDoesNotExist="* Invalid backlog.";e.FieldCriteriaFilter_RowAriaLabel="Field criteria row";e.ProjectAreaPicker_RowAriaLabel="Area path row";e.Operation_Under="Under";e.FieldCriteriaFilterTitle="Field criteria";e.OperatorTitle="Operator";e.TeamMissingErrorMessage="* Invalid team selection.";e.MustChooseATeamErrorMessage="* Choose one or more teams from the project.";e.ProjectMissingErrorMessage="* Invalid Project Selection.";e.WorkItemTypesPickerAddButtonLabel="Add a backlog or work item type filter";e.WorkItemsLabel="Work items";e.OperatorComboAriaLabel="Operator";e.ExpectedAnIntegerValue="* Please provide an integer value.";e.Operation_Notcontains="Does not contain";e.FieldCriteriaFieldErrorMessage="* Invalid Field Criteria. This field is not available with the current work item and history configuration.";e.ProjectTeamPickerAllTeams="All teams";e.ProjectTeamPickerTitle="Teams";e.FieldCriteriaFilterDescription="Filter the data that appears in this view by field criteria. Only work items that meet all of the conditions will be in the view.";e.FieldCriteriaComboAriaLabel="Field";e.AnalyticsTrendsConfig_LoadTeamsFailed="VS403619: Failed to load Teams. Refresh and try again.";e.FieldValuesOperator_And="And";e.ProjectAreaPickerTitle="Area paths";e.ValueComboAriaLabel="Value";e.AnalyticsTrendsConfig_LoadWorkItemTypesFailed="VS403620: Failed to load Work Item Types. Refresh and try again.";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Analytics/Scripts/PublicProjectsQueryHelper",["require","exports","VSS/Utils/Array","VSS/User/Services","Analytics/Resources/TFS.Resources.Analytics"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.PublicProjectsQueryHelper=void 0;var f=function(){function n(){}return n.forceProjectScoping=function(n,t){if(!this.isMemberUser()){var n=i.unique(n);if(n&&n.length==1)t.project=n[0];else throw u.Exception_PublicUserOnlyAllowsSingleProjectQuery;}return t},n.isMemberUser=function(){return r.getService().hasClaim(r.UserClaims.Member)},n.checkProjectScoping=function(n){if(!this.isMemberUser()&&!n.project){console.log("A query for ".concat(n.entityType," does not correctly implement public project scoping via forceProjectScoping"));throw u.Exception_PublicUserOnlyAllowsSingleProjectQuery;}},n}();t.PublicProjectsQueryHelper=f});

define("Analytics/Scripts/QueryCache/CacheableAnalyticsQueryBase",["require","exports","Analytics/Scripts/QueryCache/AnalyticsClientCore","Analytics/Scripts/PublicProjectsQueryHelper"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.CacheableAnalyticsQueryBase=void 0;var u=function(){function n(n,t,r){this.agileClient=new i.AnalyticsClientCore(n,t);this.queryOptions=r}return n.prototype.runQuery=function(){var t=this,n=this.getQueryOptions();return r.PublicProjectsQueryHelper.checkProjectScoping(n),this.agileClient.runODataQuery(n).then(function(n){return t.interpretQueryResults(n)})},n.prototype.interpretQueryResults=function(n){return n.value},n.prototype.getKey=function(){return this.getQueryName()+JSON.stringify(this.getQueryOptions())},n.prototype.overrideClient=function(n){this.agileClient=n},n.prototype.getQueryOptions=function(){return this.queryOptions},n.CommonQueryFeatureName="CommonQuery",n}();t.CacheableAnalyticsQueryBase=u});

define("Analytics/Scripts/QueryCache/PingServiceQuery",["require","exports","Analytics/Scripts/OData","Analytics/Scripts/QueryCache/CacheableAnalyticsQueryBase"],function(n,t,i,r){function f(n){return n.message.indexOf("403")!==-1}Object.defineProperty(t,"__esModule",{value:!0});t.isAnalyticsAccessDeniedError=t.PingServiceQuery=void 0;var u=function(n){function t(i){return n.call(this,t.commandName,t.featureName,t.generateQueryOptions(i))||this}return __extends(t,n),t.generateQueryOptions=function(n){return{project:n,entityType:"Dates",oDataVersion:i.AnalyticsODataVersions.latestODataVersion,$top:"1",$select:"DateSK"}},t.prototype.getQueryName=function(){return"PingServiceQuery"},t.untracked="-untracked",t.commandName="PingServiceQuery"+t.untracked,t.featureName="PingServiceQuery",t}(r.CacheableAnalyticsQueryBase);t.PingServiceQuery=u;t.isAnalyticsAccessDeniedError=f});

define("Agile/Scripts/Common/Components/BurndownReportPropsHelper",["require","exports","VSS/Context","VSSUI/Utilities/HubViewState"],function(n,t,i,r){function u(n){return{teamId:n.team.id,teamName:n.team.name,projectId:i.getDefaultWebContext().project.id,iterationPath:n.selectedIteration.iterationPath,iterationStartDate:n.selectedIteration.startDateUTC,iterationEndDate:n.selectedIteration.finishDateUTC,isFullScreen:n.viewOptions.getViewOption(r.HubViewOptionKeys.fullScreen),isMinimalChart:!1,isLightbox:!1}}Object.defineProperty(t,"__esModule",{value:!0});t.getBurndownProps=void 0;t.getBurndownProps=u});

define("Agile/Scripts/Common/Components/PreloadedReportComponent",["require","exports","react","VSSPreview/Flux/Components/LWP","VSS/Service","VSS/FeatureManagement/Services","Agile/Scripts/Common/Components/BurndownReportPropsHelper","VSS/LWP","VSS/Utils/UI","WorkItemTracking/Scripts/OM/WorkItemConstants","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/TFS.WorkItemTracking","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/Core","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/PreloadedReportComponent"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var w,p,b;Object.defineProperty(t,"__esModule",{value:!0});t.PreloadedReportComponent=t.AgileHub=void 0;w=y.delegate,function(n){n[n.Sprint=0]="Sprint";n[n.Backlog=1]="Backlog";n[n.Board=2]="Board"}(p=t.AgileHub||(t.AgileHub={}));b=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.delayHeaderChartUpdate=1e4,i.setChartRenderingState=function(){var n=u.getService(f.FeatureManagementService),t=n.isFeatureEnabled("ms.vss-reporting-web.reporting-boards-reports-preload"),r=n.isFeatureEnabled("ms.vss-reporting-web.reporting-boards-ax-header-chart"),e=i.props.pivotContext&&i.props.pivotContext.pivotName==="analytics",o=r&&!e;i.setState({preloadReports:t,loadAxHeaderChart:o})},i.onKeyDown=function(n){(n.keyCode===s.KeyCode.SPACE||n.keyCode===s.KeyCode.ENTER)&&i.showLightBox(i.props.pivotContext)},i.state={preloadReports:!1,loadAxHeaderChart:!1},i.workItemChangedDelegate=w(i,i.workItemChanged),i}return __extends(t,n),t.prototype.componentDidMount=function(){this.attachEvents();this.setChartRenderingState()},t.prototype.componentDidUpdate=function(n){JSON.stringify(this.props.currentPivot)!==JSON.stringify(n.currentPivot)&&this.setChartRenderingState()},t.prototype.componentWillUnmount=function(){this.detachEvents()},t.prototype.workItemChanged=function(n,t){var i=this;t.change===h.WorkItemChangeType.SaveCompleted&&(this.timerHandle&&clearTimeout(this.timerHandle),this.timerHandle=setTimeout(function(){i.setChartRenderingState()},this.delayHeaderChartUpdate))},t.prototype.attachEvents=function(){this.getWorkItemManager().attachWorkItemChanged(this.workItemChangedDelegate)},t.prototype.detachEvents=function(){this.getWorkItemManager().detachWorkItemChanged(this.workItemChangedDelegate)},t.prototype.getWorkItemManager=function(){var n=v.TfsContext.getDefault(),t=c.ProjectCollection.getConnection(n).getService(a.WorkItemStore);return l.WorkItemManager.get(t)},t.prototype.render=function(){var t=this,n=null,r=this.state,u=r.preloadReports,f=r.loadAxHeaderChart;return u&&(n=this.props.agileHub===p.Sprint?this.renderBurndownReport():this.renderCFDVelocityReports()),f&&u&&this.props.agileHub===p.Sprint?i.createElement(i.Fragment,null,i.createElement("div",{className:"ax-header-chart clickable small-chart-container",role:"button",onClick:function(){return t.showLightBox(t.props.pivotContext)},onKeyDown:this.onKeyDown},n)):i.createElement(i.Fragment,null,i.createElement("div",{style:{display:"none"}},n))},t.prototype.showLightBox=function(n){var t=o.getLWPService("IVssLayoutManager");t.renderCallout(function(t){var f={title:"",onDismiss:t,className:"lightbox-report-content"},u=e.getBurndownProps(n);return u.isLightbox=!0,i.createElement(r.LWPComponent,__assign({wrappedType:"Lightbox",dependencies:["ms.vss-reporting.reporting-lightbox"]},f),i.createElement(r.LWPComponent,__assign({wrappedType:"BurndownReport",dependencies:["ms.vss-reporting-web.burndown-report-content"]},u)))})},t.prototype.renderBurndownReport=function(){var n=e.getBurndownProps(this.props.pivotContext);return n.isMinimalChart=!0,n.lastRefresh=new Date,i.createElement(r.LWPComponent,__assign({key:"burndown-report",wrappedType:"BurndownReport",dependencies:["ms.vss-reporting-web.burndown-report-content"]},n))},t.prototype.renderCFDVelocityReports=function(){return i.createElement(i.Fragment,null,this.renderReportSelector(""),this.renderVelocityReport(""),this.renderCFDReport(""))},t.prototype.renderReportSelector=function(n){return i.createElement(r.LWPComponent,__assign({wrappedType:"BoardsReportSelectorPreloader",dependencies:["ms.vss-reporting-web.boards-report-view-content"]},n))},t.prototype.renderVelocityReport=function(n){return i.createElement(r.LWPComponent,__assign({wrappedType:"VelocityReportPreloader",dependencies:["ms.vss-reporting-web.velocity-report-content"]},n))},t.prototype.renderCFDReport=function(n){return i.createElement(r.LWPComponent,__assign({wrappedType:"CFDReportPreloader",dependencies:["ms.vss-reporting-web.cfd-report-content"]},n))},t}(i.Component);t.PreloadedReportComponent=b});

define("Agile/Scripts/Common/Components/ChartControls",["require","exports","react","Agile/Scripts/Common/Controls","Agile/Scripts/Common/SprintDates","Agile/Scripts/Generated/HubConstants","Agile/Scripts/Resources/TFS.Resources.AgileControls","VSS/Controls","VSS/Utils/String","VSS/FeatureManagement/Services","VSS/Service","VSS/Context","Analytics/Scripts/QueryCache/PingServiceQuery","./PreloadedReportComponent"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){var y,p,w,b;Object.defineProperty(t,"__esModule",{value:!0});t.DelayLoadedHubTileComponent=t.SprintIterationInfoComponent=t.CumulativeFlowChartComponent=t.VelocityChartComponent=void 0;y=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._setContainerRef=function(n){t._containerRef=n},t}return __extends(t,n),t.prototype.render=function(){return i.createElement("div",{ref:this._setContainerRef})},t.prototype.componentDidMount=function(){this._createVelocityChartControl()},t.prototype.componentWillUnmount=function(){this._destroyVelocityChartControl()},t.prototype._createVelocityChartControl=function(){this._destroyVelocityChartControl();var t={teamId:this.props.teamId,title:e.Velocitychart_Title,iterationsNumber:f.BacklogConstants.NumberOfIterationsInVelocity},n=$("<div>",{"class":"velocity-chart small-chart-container"});n.appendTo($(this._containerRef));this._velocityChartControl=o.Enhancement.enhance(r.VelocityChartControl,n,t)},t.prototype._destroyVelocityChartControl=function(){this._velocityChartControl&&(this._velocityChartControl.dispose(),this._velocityChartControl=null)},t}(i.Component);t.VelocityChartComponent=y;p=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._setContainerRef=function(n){t._containerRef=n},t}return __extends(t,n),t.prototype.render=function(){return i.createElement("div",{ref:this._setContainerRef})},t.prototype.shouldComponentUpdate=function(n){return this._cfdChartControl&&this.props.backlogLevelId===n.backlogLevelId?!1:!0},t.prototype.componentDidUpdate=function(){this._createCFDControl()},t.prototype.componentDidMount=function(){this._createCFDControl()},t.prototype.componentWillUnmount=function(){this._destroyCFDControl()},t.prototype._createCFDControl=function(){this._destroyCFDControl();var t={teamId:this.props.teamId,backlogLevelId:this.props.backlogLevelId,title:e.Charts_Settings_Cfd_Title,hideIncoming:null,hideOutgoing:null,startDate:null},n=$("<div>",{"class":"cumulative-flow-chart small-chart-container"});n.appendTo($(this._containerRef));this._cfdChartControl=o.Enhancement.enhance(r.CumulativeFlowChartControl,n,t)},t.prototype._destroyCFDControl=function(){this._cfdChartControl&&(this._cfdChartControl.dispose(),this._cfdChartControl=null)},t}(i.Component);t.CumulativeFlowChartComponent=p;w=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._setContainerRef=function(n){t._containerRef=n},t}return __extends(t,n),t.prototype.render=function(){return i.createElement("div",{ref:this._setContainerRef,className:"sprint-hub sprint-dates-container"})},t.prototype.shouldComponentUpdate=function(n){return this.props.iteration!==n.iteration||this.props.teamId!==n.teamId||this.props.teamDaysOff!==n.teamDaysOff||this.props.teamWeekends!==n.teamWeekends||this.props.hideBurndownChart!==n.hideBurndownChart||!this._burndownControl},t.prototype.componentDidUpdate=function(){this._createControl()},t.prototype.componentDidMount=function(){this._createControl()},t.prototype.componentWillUnmount=function(){this._destroyControl()},t.prototype._createControl=function(){var f,h;this._destroyControl();var t=this.props,w=t.teamDaysOff,b=t.teamWeekends,c=t.teamId,n=this.props.iteration,l=n.id,a=n.name,i=n.iterationPath,v=n.startDateLocal,y=n.finishDateLocal,p={title:"".concat(e.Burndownchart_TitlePrefix," ").concat(a),iterationId:l,iterationPath:i,teamId:c},k={teamId:c,name:a,iterationPath:i,iterationId:l,accountCurrentDate:Date.now().toString(),startDate:v,finishDate:y,teamDaysOff:w,weekends:b};v&&y||(p.errors=s.format(e.BurndownValidation_Dates,i));f=$("<div>",{"class":"sprint-dates-working-days"});f.appendTo($(this._containerRef));this.props.hideBurndownChart||(h=$("<div>",{"class":"burndown-chart small-chart-container"}),h.appendTo($(this._containerRef)),this._burndownControl=o.Enhancement.enhance(r.BurndownChartControl,h,p));this._sprintDates=o.Enhancement.enhance(u.SprintDates,f,k)},t.prototype._destroyControl=function(){this._burndownControl&&(this._burndownControl.dispose(),this._burndownControl=null);this._sprintDates&&(this._sprintDates.dispose(),this._sprintDates=null)},t}(i.Component);t.SprintIterationInfoComponent=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.state={showChart:!1},r}return __extends(t,n),t.prototype.render=function(){return i.createElement(i.Fragment,null,this.props.renderChildren(this.state.showChart),!this.state.showChart&&i.createElement(v.PreloadedReportComponent,{agileHub:this.props.agileHub,pivotContext:this.props.pivotContext,currentPivot:this.props.currentPivotKey}))},t.prototype._setupHubTileChartState=function(){return __awaiter(this,void 0,void 0,function(){var n,i,t;return __generator(this,function(r){switch(r.label){case 0:return(n=!1,i=c.getService(h.FeatureManagementService),t=i.isFeatureEnabled("ms.vss-reporting-web.reporting-boards-reports-feature"),!t)?[3,2]:[4,this._getUserAnalyticsPermission()];case 1:n=r.sent();r.label=2;case 2:return this.setState({showChart:!t||!n}),[2]}})})},t.prototype._getUserAnalyticsPermission=function(){return __awaiter(this,void 0,void 0,function(){var n,t;return __generator(this,function(){return n=l.getDefaultWebContext(),t=new a.PingServiceQuery(n.project.id),[2,t.runQuery().then(function(){return!0},function(n){return!a.isAnalyticsAccessDeniedError(n)})]})})},t.prototype.componentDidMount=function(){this._setupHubTileChartState()},t}(i.Component);t.DelayLoadedHubTileComponent=b});

define("Presentation/Scripts/TFS/Components/LoadingComponent",["require","exports","react","OfficeFabric/Spinner","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","VSS/LoaderPlugins/Css!Presentation/Components/LoadingComponent"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.LoadingComponent=void 0;var f=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.render=function(){return i.createElement("div",{className:"loading-container"},i.createElement(r.Spinner,{type:r.SpinnerType.large,label:u.Loading}))},t}(i.Component);t.LoadingComponent=f});

define("Agile/Scripts/Common/Components/DelayTTIComponent",["require","exports","react","VSS/Events/Page","VSS/Performance","Presentation/Scripts/TFS/Components/LoadingComponent"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.DelayTTIComponent=void 0;var e=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._pageInteractiveEventListner=function(){i.setState({isPageInteractive:!0})},i.state={isPageInteractive:!1||!u.getScenarioManager().isPageLoadScenarioActive()},i}return __extends(t,n),t.prototype.componentWillMount=function(){r.getService().subscribe(r.CommonPageEvents.PageInteractive,this._pageInteractiveEventListner)},t.prototype.componentWillUnmount=function(){r.getService().unsubscribe(r.CommonPageEvents.PageInteractive,this._pageInteractiveEventListner)},t.prototype.render=function(){var n=this.props,t=n.children,r=n.showLoading;return this.state.isPageInteractive?t():r?i.createElement(f.LoadingComponent,null):null},t}(i.Component);t.DelayTTIComponent=e});

define("Agile/Scripts/Common/HubContributionUtils",["require","exports","VSS/Navigation/HubsService","VSS/Service"],function(n,t,i,r){function u(){var n=r.getLocalService(i.HubsService),t=n.getSelectedHubId(),u=n.getHubById(t);return u.name}Object.defineProperty(t,"__esModule",{value:!0});t.getHubDisplayName=void 0;t.getHubDisplayName=u});

define("Presentation/Scripts/TFS/PerformanceTelemetryHelper",["require","exports","VSS/Diag","VSS/Performance","VSS/VSS","Presentation/Scripts/TFS/TFS.Core.Utils"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.PerformanceTelemetryHelper=void 0;var e=function(){function n(n){var t=this;this._area=n;this._startMonitorContextSwitch=function(n){if(t._shouldMonitor()&&n.getName()!=="__pageload"){console.log("Start Monitoring TTI scenario : ".concat(n.getName()));var r=setTimeout,f=t._setupMiddleware(n),i=0,u=function(){i++;n.isActive()&&i<100?(console.log("Context switched: ",i),r(u,0)):f()};r(u,0)}};this._currentScenario=null}return n.getInstance=function(t){return t=t.toLowerCase(),n._telemetryHelpersByArea[t]||(n._telemetryHelpersByArea[t]=new n(t)),n._telemetryHelpersByArea[t]},n.prototype.startInitialLoad=function(t){if(!this.isActive()){var u="".concat(t,".").concat(n._onPageNavigationScenarioSuffix);this._currentScenario=r.getScenarioManager().startScenarioFromNavigation(this._area,u,!0);this._startMonitorContextSwitch(this._currentScenario)}},n.prototype.startLegacyPageLoad=function(n){this.isActive()||(this._currentScenario=r.getScenarioManager().startScenarioFromNavigation(this._area,n,!0))},n.prototype.startTabSwitch=function(t,i){this.startScenario("".concat(t,".").concat(n._convertPivotToCamelCase(i),"Open.PivotSwitch"))},n.prototype.startScenario=function(n){this.isActive()||(this._currentScenario=r.getScenarioManager().startScenario(this._area,n))},n.prototype.end=function(){this.isActive()&&this._currentScenario&&(console.log("".concat(this._currentScenario.getName()," - ends")),this._currentScenario.end(Date.now()),this._currentScenario=null)},n.prototype.abort=function(){this.isActive()&&(this._currentScenario.abort(),this._currentScenario=null)},n.prototype.isActive=function(){return this._currentScenario&&this._currentScenario.isActive()},n.prototype.addData=function(n){this.isActive()&&this._currentScenario.addData(n)},n.prototype.split=function(n){this.isActive()&&this._currentScenario.addSplitTiming(n)},n.prototype._shouldMonitor=function(){return!!f.getCookie("monitor_contextswitch")},n.prototype._setupMiddleware=function(n){var r=u.using,o=[],s=function(t,i,u){return o.push(t),r(t,function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];n.isActive()&&console.log("VSS Usings resolved:",t);i.apply(void 0,u)},u)},t,f,i,e;return u.using=s,t=Promise.prototype.then,f=function(){for(var u,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u=t.bind(this),n.isActive()&&console.log("promise resolved.",r[0]),u.apply(void 0,r)},Promise.prototype.then=f,i=setTimeout,e=function(t,r){var u=function(){n.isActive()&&console.log("setTimeout resolved.",t);t()};i(u,r)},setTimeout=e,function(){console.log("End Monitoring TTI scenario : ".concat(n.getName()));u.using=r;Promise.prototype.then=t;setTimeout=i}},n.constructNavigationScenarioName=function(t,i){return"".concat(t,".").concat(n._convertPivotToCamelCase(i),"Open")},n._convertPivotToCamelCase=function(n){if(n){var t=n.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}return""},n._onPageNavigationScenarioSuffix="FromNavigation",n._telemetryHelpersByArea={},n}();t.PerformanceTelemetryHelper=e});

define("Agile/Scripts/Common/Components/ComponentRegistration",["require","exports","react","VSS/VSS"],function(n,t,i,r){function o(n,t){u[n]=t}function f(n){return u[n]}var u,e,s;Object.defineProperty(t,"__esModule",{value:!0});t.ComponentWrapper=t.getComponent=t.registerComponent=t.component=void 0;u={};e=function(n){return function(t){o(n,t)}};t.component=e;t.registerComponent=o;t.getComponent=f;s=function(n){function t(t){var i=__construct(this,n,[t]),u,e;for(u in i)i.hasOwnProperty(u)&&(this[u]=i[u]);return i._unmounted=!1,e=f(t.componentKey),e||r.requireModules(t.modules).then(function(){i._unmounted||i.forceUpdate()},function(){i._unmounted||i.forceUpdate()}),i}return __extends(t,n),t.prototype.render=function(){var n=this.props,r=n.componentKey,u=n.componentProps,t=f(r);return t?i.createElement(t,u):null},t.prototype.componentWillUnmount=function(){this._unmounted=!0},t}(i.Component);t.ComponentWrapper=s});

define("VSSPreview/Providers/ContributableMenuItemProvider",["require","exports","q","OfficeFabric/components/Icon/Icon.types","VSS/Context","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Diag","VSS/Service","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h){var l,c;Object.defineProperty(t,"__esModule",{value:!0});t.ContributableMenuItemProvider=t.BaseContributableMenuItemProvider=void 0;l=function(){function n(n,t,i,r,f){this._promise=null;this._menuItems=[];this._webContext=i||u.getDefaultWebContext();this._ids=n||[];this._queryOptions=r||e.ContributionQueryOptions.IncludeRecursiveTargets;this._extensionService=s.getService(e.ExtensionService);this._extensionContext=t;this._providerOptions=f;this._extensionContext||o.logError("Extensions won't get context object since extensionContext of IContributionData is null")}return n.prototype.loadItems=function(n){var t=this;this._callback=n;this._getContributions().then(function(n){var r=[];return n.forEach(function(n){r.push(t._getContextualMenuItemsFromContributionWithSource(n))}),i.allSettled(r).then(function(n){var i=[];n.forEach(function(n){n.value&&n.value.length&&n.value.forEach(function(n){n.item.hidden||i.push(n)})});t._onMenuItemsUpdated(i)})},function(n){o.logInfo("Failed to load one or more contributed menu items: ".concat(h.getErrorMessage(n)))})},n.prototype.refresh=function(){this._callback&&this.loadItems(this._callback)},n.prototype._onMenuItemsUpdated=function(n){function e(n,t){if(n.contributedMenuItem&&t.contributedMenuItem){var i=n.contributedMenuItem,r=t.contributedMenuItem;return i.id||r.id?i.id===r.id:i.text||r.text?i.text===r.text:i.title||r.title?i.title===r.title:!1}return n.contribution.id===t.contribution.id}for(var r,i,u,f,t=n.length-1;t>=0;t--)for(r=n[t],i=0,u=this._menuItems;i<u.length;i++)f=u[i],e(r,f)&&(f.item=r.item,n.splice(t,1));n.length>0&&(this._menuItems=this._menuItems.concat(n));this._callback(this._menuItems.map(function(n){return n.item}))},n.prototype._getContextualMenuItemsFromContributionWithSource=function(n){var r=this,t,u;return n.source?(t=i.defer(),$.isFunction(n.source.getMenuItems)?(u=$.extend({updateMenuItems:function(t){r._updateContributedMenuItems(t,n)}},this._getExtensionContext(n.contribution)),Promise.resolve(n.source.getMenuItems(u)).then(function(u){u&&u.length?i.all(u.map(function(t){return r._getContextualMenuItemFromContributedMenuItemWithSource(t,n.contribution,n.source)})).then(function(n){t.resolve(n)}):t.resolve([])},t.reject)):this._getContextualMenuItemFromContribution(n.contribution,n.source).then(function(n){t.resolve([n])}),i.timeout(t.promise,c._contributionGetItemsTimeout,"Timed-out waiting for getMenuItems call from contribution: "+n.contribution.id)):this._immediateInstanceRequired(n.contribution)?i.resolve([]):this._getContextualMenuItemFromContribution(n.contribution,n.source).then(function(n){return[n]})},n.prototype._updateContributedMenuItems=function(n,t){var r=this;i.all(n.map(function(n){return r._getContextualMenuItemFromContributedMenuItemWithSource(n,t.contribution,t.source)})).then(function(n){r._onMenuItemsUpdated(n)})},n.prototype._getContextualMenuItemFromContribution=function(n,t){var r=this,f=n.properties.text||null,u=n.properties.title||null,o=i("");return typeof n.properties.icon=="string"&&(o=e.ExtensionHelper.resolveUriTemplateProperty(n,this._webContext,"icon")),o.then(function(i){var e={key:n.id||f||u,name:f||u,title:u,iconProps:r._getIconProps(i),onClick:r._getMenuAction(n,t,null)};return r._overrideMenuItemProps(e,n),{item:e,contribution:n}})},n.prototype._getContextualMenuItemFromContributedMenuItemWithSource=function(n,t,r){var s=this,u=this._getContextualMenuItemFromContributedMenuItem(n,t),f,o;return u.onClick=this._getMenuAction(t,r,n.action),f=i(""),o=this._extensionService.getBaseUri(t),typeof n.icon=="string"&&(f=e.ExtensionHelper.resolveUriTemplate(n.icon,this._webContext,o)),f.then(function(i){return u.iconProps=s._getIconProps(i),{item:u,contribution:t,contributedMenuItem:n}})},n.prototype._getContextualMenuItemFromContributedMenuItem=function(n,t,r){var f=this,u,e;return r===void 0&&(r=null),u={key:n.id||n.text||n.title,name:n.text||n.title,title:n.title,href:n.href,disabled:n.disabled,hidden:n.hidden,rank:n.rank},r||(r={item:u,contribution:t,contributedMenuItem:n}),$.isFunction(n.action)&&(u.onClick=function(){n.action(f._getExtensionContext(t))}),this._overrideMenuItemProps(u,t),n.childItems&&!u.hidden&&($.isArray(n.childItems)?u.items=n.childItems.map(function(n){return f._getContextualMenuItemFromContributedMenuItem(n,t,r)}):i.isPromise(n.childItems)&&(e=n.childItems,e.then(function(n){var i=n.map(function(n){return f._getContextualMenuItemFromContributedMenuItem(n,t,r)});u.items=i;f._onMenuItemsUpdated([r])}))),u},n.prototype._overrideMenuItemProps=function(n,t){this._providerOptions&&this._providerOptions.overrideMenuItemProps&&this._providerOptions.overrideMenuItemProps(n,t)},n.prototype._getContributions=function(){var n=this;return this._promise||(this._promise=this._ids.length>0?this._extensionService.queryContributions(this._ids,this._queryOptions).then(function(t){var r=i.defer(),u=[];return t.forEach(function(t){var i=n._getContributionWithSource(t);i&&u.push(i)}),i.allSettled(u).then(function(n){var t=[];n.forEach(function(n){n.state==="rejected"&&o.logError(n.reason);n.state==="fulfilled"&&n.value&&t.push(n.value)});r.resolve(t)},r.reject),r.promise}):i.resolve([])),this._promise},n.prototype._getContributionWithSource=function(n){var t=n.id||"";return this._immediateInstanceRequired(n)?f.getBackgroundInstance(n,n.properties.registeredObjectId||t,this._webContext,this._webContext,c._contributionSourceTimeout,"Timed-out waiting for menu source provider for contribution: "+t).then(function(t){return{contribution:n,source:t}}):n.type===c.ACTION_TYPE||n.type===c.HYPERLINK_ACTION_TYPE?i.resolve({contribution:n}):null},n.prototype._getIconProps=function(n){var t={className:"icon"},u,i;return n?n.match(/^https?:\/\//)?(t.imageProps={src:n,style:{width:14,height:14}},t.iconType=r.IconType.image):n.match(/^css:\/\//)?(u="vsts-fabric-contextual-menu-icon",i=n.substring(6),i.indexOf("bowtie-icon")>=0&&i.indexOf(u)<0&&(o.logInfo("Missing: "+u+" for '"+n+"' autocorrecting now..."),i+=" "+u),t.className=i):n.match(/^fabric:\/\//)?(i=n.substring(9),t.iconName=i,t.className=undefined,t.iconType=r.IconType.default):o.logError("Icon String: "+n+" is neither an external image url (https://) or internal icon (css:// or fabric://)."):t=null,t},n.prototype._getMenuAction=function(n,t,i){var r=this,u;return!i&&n.type===c.ACTION_TYPE?function(){f.getBackgroundInstance(n,n.properties.registeredObjectId||n.id,r._webContext,r._webContext,c._contributionSourceTimeout,"Timed-out waiting for menu action: "+n.id).then(function(t){t.execute(r._getExtensionContext(n))})}:$.isFunction(i)?function(){e.ExtensionHelper.publishTraceData(n);i(r._getExtensionContext(n))}:n.properties.targetUri?function(){var t=r._extensionService.getBaseUri(n),i=e.ExtensionHelper.resolveUriTemplate(n.properties.targetUri,r._extensionContext,t);i.then(function(t){e.ExtensionHelper.publishTraceData(n,t);window.location.href=t})}:t&&$.isFunction(t.execute)?function(){e.ExtensionHelper.publishTraceData(n);t.execute(r._getExtensionContext(n))}:u},n.prototype._immediateInstanceRequired=function(n){return n.id&&e.ExtensionHelper.hasContent(n)},n.prototype._getExtensionContext=function(n){return typeof this._extensionContext=="function"?this._extensionContext(n):this._extensionContext},n.ACTION_TYPE="ms.vss-web.action",n.HYPERLINK_ACTION_TYPE="ms.vss-web.hyperlink-action",n._contributionSourceTimeout=5e3,n._contributionGetItemsTimeout=2e3,n}();t.BaseContributableMenuItemProvider=l;c=function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return __extends(t,n),t}(l);t.ContributableMenuItemProvider=c});

define("Agile/Scripts/Common/PivotBarActionProvider",["require","exports","OfficeFabric/Utilities","VSSPreview/Providers/ContributableMenuItemProvider","VSSUI/PivotBar"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.PivotBarActionProvider=void 0;var f=function(){function n(n,t,u,f){this._itemProvider=new r.BaseContributableMenuItemProvider(n,t,u,f,{overrideMenuItemProps:function(n,t){t.properties&&(n.name=t.properties.name||null);n.important=!0;n.iconProps&&(n.iconProps.className=i.css(n.iconProps.className||"","override-view-actions-padding"))}})}return n.prototype.loadItems=function(n){this._itemProvider.loadItems(function(t){n(t.map(u.mapItemToActions))})},n.prototype.refresh=function(){this._itemProvider.refresh()},n}();t.PivotBarActionProvider=f});

define("Agile/Scripts/Common/PivotItemProvider",["require","exports","Agile/Scripts/Common/Components/ComponentRegistration","OfficeFabric/Utilities","react","VSS/Contributions/Services","VSS/Service","VSS/Utils/Array","Agile/Scripts/Common/PivotBarActionProvider"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.PivotItemProvider=void 0;var h=function(){function n(n,t,i){this.targetContributionId=n;this.contributionContext=t;this.options=i;this._expectedContributionTypes=i.expectedContributionTypes||["ms.vss-web.tab"]}return n.prototype.loadItems=function(n){var t=this,i=e.getService(f.ExtensionService).getLoadedContributionsForTarget(this.targetContributionId)||[];i.sort(function(n,t){return(n&&n.properties&&n.properties.order||999999)-(t&&t.properties&&t.properties.order||999999)});n(i.filter(function(n){return o.contains(t._expectedContributionTypes,n.type)}).map(function(n){return t._mapContribution(n)}))},n.prototype._mapContribution=function(n){var t=this,f;return n.properties.viewActions&&(f=[new s.PivotBarActionProvider([n.properties.viewActions],this.options.actionContext)]),{id:n.id,text:n.properties.name,itemKey:n.properties.itemKey,order:n.properties.order,viewActionProviders:f,render:function(){var e=n.properties.contentClassName,f=n.properties.content.initialize,o={key:f,pivotContext:t.contributionContext(n),actionContext:t.options.actionContext};return u.createElement("div",{className:r.css("vss-PivotBarItem","content-host",e)},u.createElement(i.ComponentWrapper,{modules:n.properties.content.require,componentKey:f,componentProps:o}))}}},n}();t.PivotItemProvider=h});

define("Agile/Scripts/Common/Colors",["require","exports","Agile/Scripts/Resources/TFS.Resources.AgileControls","Presentation/Scripts/TFS/TFS.UI.Controls.ColorPicker"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.Colors=void 0;var u=function(){function n(){}return n.getAccessibilityColors=function(){var t={};return t[n.ORANGE]=new r.AccessibilityColor(n.ORANGE,i.CardStyling_ColorPicker_Orange),t[n.DARK_GREEN]=new r.AccessibilityColor(n.DARK_GREEN,i.CardStyling_ColorPicker_DarkGreen),t[n.BLUE]=new r.AccessibilityColor(n.BLUE,i.CardStyling_ColorPicker_Blue),t[n.DARK_PURPLE]=new r.AccessibilityColor(n.DARK_PURPLE,i.CardStyling_ColorPicker_DarkPurple),t[n.DARK_RED]=new r.AccessibilityColor(n.DARK_RED,i.CardStyling_ColorPicker_DarkRed),t[n.BLACK]=new r.AccessibilityColor(n.BLACK,i.CardStyling_ColorPicker_Black),t[n.GREY]=new r.AccessibilityColor(n.GREY,i.CardStyling_ColorPicker_Grey),t[n.YELLOW]=new r.AccessibilityColor(n.YELLOW,i.CardStyling_ColorPicker_Yellow),t[n.GREEN]=new r.AccessibilityColor(n.GREEN,i.CardStyling_ColorPicker_Green),t[n.TEAL]=new r.AccessibilityColor(n.TEAL,i.CardStyling_ColorPicker_Teal),t[n.PURPLE]=new r.AccessibilityColor(n.PURPLE,i.CardStyling_ColorPicker_Purple),t[n.RED]=new r.AccessibilityColor(n.RED,i.CardStyling_ColorPicker_Red),t[n.DEFAULT]=new r.AccessibilityColor(n.DEFAULT,i.CardStyling_ColorPicker_Default),t[n.LIGHT_GREY]=new r.AccessibilityColor(n.LIGHT_GREY,i.CardStyling_ColorPicker_Grey),t[n.GREY_LIGHTER_20]=new r.AccessibilityColor(n.GREY_LIGHTER_20,i.CardStyling_ColorPicker_GreyLighter20),t[n.GREY_LIGHTER_40]=new r.AccessibilityColor(n.GREY_LIGHTER_40,i.CardStyling_ColorPicker_GreyLighter40),t[n.GREY_LIGHTER_60]=new r.AccessibilityColor(n.GREY_LIGHTER_60,i.CardStyling_ColorPicker_GreyLighter60),t[n.WHITE]=new r.AccessibilityColor(n.WHITE,i.CardStyling_ColorPicker_White),t[n.LIGHT_PURPLE]=new r.AccessibilityColor(n.LIGHT_PURPLE,i.CardStyling_ColorPicker_Purple),t[n.PURPLE_LIGHTER_20]=new r.AccessibilityColor(n.PURPLE_LIGHTER_20,i.CardStyling_ColorPicker_PurpleLighter20),t[n.PURPLE_LIGHTER_40]=new r.AccessibilityColor(n.PURPLE_LIGHTER_40,i.CardStyling_ColorPicker_PurpleLighter40),t[n.PURPLE_LIGHTER_60]=new r.AccessibilityColor(n.PURPLE_LIGHTER_60,i.CardStyling_ColorPicker_PurpleLighter60),t[n.PURPLE_LIGHTER_80]=new r.AccessibilityColor(n.PURPLE_LIGHTER_80,i.CardStyling_ColorPicker_PurpleLighter80),t[n.LIGHT_BLUE]=new r.AccessibilityColor(n.LIGHT_BLUE,i.CardStyling_ColorPicker_Blue),t[n.BLUE_LIGHTER_20]=new r.AccessibilityColor(n.BLUE_LIGHTER_20,i.CardStyling_ColorPicker_BlueLighter20),t[n.BLUE_LIGHTER_40]=new r.AccessibilityColor(n.BLUE_LIGHTER_40,i.CardStyling_ColorPicker_BlueLighter40),t[n.BLUE_LIGHTER_60]=new r.AccessibilityColor(n.BLUE_LIGHTER_60,i.CardStyling_ColorPicker_BlueLighter60),t[n.BLUE_LIGHTER_80]=new r.AccessibilityColor(n.BLUE_LIGHTER_80,i.CardStyling_ColorPicker_BlueLighter80),t[n.LIGHT_TEAL]=new r.AccessibilityColor(n.LIGHT_TEAL,i.CardStyling_ColorPicker_Teal),t[n.TEAL_LIGHTER_20]=new r.AccessibilityColor(n.TEAL_LIGHTER_20,i.CardStyling_ColorPicker_TealLighter20),t[n.TEAL_LIGHTER_40]=new r.AccessibilityColor(n.TEAL_LIGHTER_40,i.CardStyling_ColorPicker_TealLighter40),t[n.TEAL_LIGHTER_60]=new r.AccessibilityColor(n.TEAL_LIGHTER_60,i.CardStyling_ColorPicker_TealLighter60),t[n.TEAL_LIGHTER_80]=new r.AccessibilityColor(n.TEAL_LIGHTER_80,i.CardStyling_ColorPicker_TealLighter80),t[n.LIGHT_GREEN]=new r.AccessibilityColor(n.LIGHT_GREEN,i.CardStyling_ColorPicker_Green),t[n.GREEN_LIGHTER_20]=new r.AccessibilityColor(n.GREEN_LIGHTER_20,i.CardStyling_ColorPicker_GreenLighter20),t[n.GREEN_LIGHTER_40]=new r.AccessibilityColor(n.GREEN_LIGHTER_40,i.CardStyling_ColorPicker_GreenLighter40),t[n.GREEN_LIGHTER_60]=new r.AccessibilityColor(n.GREEN_LIGHTER_60,i.CardStyling_ColorPicker_GreenLighter60),t[n.GREEN_LIGHTER_80]=new r.AccessibilityColor(n.GREEN_LIGHTER_80,i.CardStyling_ColorPicker_GreenLighter80),t[n.LIGHT_ORANGE]=new r.AccessibilityColor(n.LIGHT_ORANGE,i.CardStyling_ColorPicker_Orange),t[n.ORANGE_LIGHTER_20]=new r.AccessibilityColor(n.ORANGE_LIGHTER_20,i.CardStyling_ColorPicker_OrangeLighter20),t[n.ORANGE_LIGHTER_40]=new r.AccessibilityColor(n.ORANGE_LIGHTER_40,i.CardStyling_ColorPicker_OrangeLighter40),t[n.ORANGE_LIGHTER_60]=new r.AccessibilityColor(n.ORANGE_LIGHTER_60,i.CardStyling_ColorPicker_OrangeLighter60),t[n.ORANGE_LIGHTER_80]=new r.AccessibilityColor(n.ORANGE_LIGHTER_80,i.CardStyling_ColorPicker_OrangeLighter80),t[n.LIGHT_YELLOW]=new r.AccessibilityColor(n.LIGHT_YELLOW,i.CardStyling_ColorPicker_Yellow),t[n.YELLOW_LIGHTER_20]=new r.AccessibilityColor(n.YELLOW_LIGHTER_20,i.CardStyling_ColorPicker_YellowLighter20),t[n.YELLOW_LIGHTER_40]=new r.AccessibilityColor(n.YELLOW_LIGHTER_40,i.CardStyling_ColorPicker_YellowLighter40),t[n.YELLOW_LIGHTER_60]=new r.AccessibilityColor(n.YELLOW_LIGHTER_60,i.CardStyling_ColorPicker_YellowLighter60),t[n.YELLOW_LIGHTER_80]=new r.AccessibilityColor(n.YELLOW_LIGHTER_80,i.CardStyling_ColorPicker_YellowLighter80),t[n.BEIGE]=new r.AccessibilityColor(n.BEIGE,i.CardStyling_ColorPicker_Beige),t[n.BEIGE_LIGHTER_20]=new r.AccessibilityColor(n.BEIGE_LIGHTER_20,i.CardStyling_ColorPicker_BeigeLighter20),t[n.BEIGE_LIGHTER_40]=new r.AccessibilityColor(n.BEIGE_LIGHTER_40,i.CardStyling_ColorPicker_BeigeLighter40),t[n.BEIGE_LIGHTER_60]=new r.AccessibilityColor(n.BEIGE_LIGHTER_60,i.CardStyling_ColorPicker_BeigeLighter60),t[n.BEIGE_LIGHTER_80]=new r.AccessibilityColor(n.BEIGE_LIGHTER_80,i.CardStyling_ColorPicker_BeigeLighter80),t[n.LIGHT_RED]=new r.AccessibilityColor(n.LIGHT_RED,i.CardStyling_ColorPicker_Red),t[n.RED_LIGHTER_20]=new r.AccessibilityColor(n.RED_LIGHTER_20,i.CardStyling_ColorPicker_RedLighter20),t[n.RED_LIGHTER_40]=new r.AccessibilityColor(n.RED_LIGHTER_40,i.CardStyling_ColorPicker_RedLighter40),t[n.RED_LIGHTER_60]=new r.AccessibilityColor(n.RED_LIGHTER_60,i.CardStyling_ColorPicker_RedLighter60),t[n.RED_LIGHTER_80]=new r.AccessibilityColor(n.RED_LIGHTER_80,i.CardStyling_ColorPicker_RedLighter80),t},n.BLACK="#000000",n.WHITE="#ffffff",n.ORANGE="#fbbc3d",n.DARK_GREEN="#00564b",n.BLUE="#245cac",n.DARK_PURPLE="#602f70",n.DARK_RED="#7a0002",n.GREY="#525252",n.YELLOW="#fbfd52",n.GREEN="#7ace64",n.TEAL="#2cbdd9",n.PURPLE="#ff00ff",n.RED="#ec001d",n.DEFAULT="#d9e6f1",n.LIGHT_GREY="#b0b0b0",n.LIGHT_PURPLE="#ccabde",n.LIGHT_BLUE="#b1c8f7",n.LIGHT_TEAL="#80f8ff",n.LIGHT_GREEN="#66d589",n.LIGHT_ORANGE="#ffba69",n.LIGHT_YELLOW="#ffe660",n.BEIGE="#d6ce95",n.LIGHT_RED="#de5e5e",n.GREY_LIGHTER_20="#cacaca",n.GREY_LIGHTER_40="#d7d7d7",n.GREY_LIGHTER_60="#e7e7e7",n.PURPLE_LIGHTER_20="#d7bde5",n.PURPLE_LIGHTER_40="#e0cdeb",n.PURPLE_LIGHTER_60="#ebddf2",n.PURPLE_LIGHTER_80="#f5eef8",n.BLUE_LIGHTER_20="#c5d6fd",n.BLUE_LIGHTER_40="#d7e3fd",n.BLUE_LIGHTER_60="#e2ebfe",n.BLUE_LIGHTER_80="#edf2fe",n.TEAL_LIGHTER_20="#c2f8ff",n.TEAL_LIGHTER_40="#dafaff",n.TEAL_LIGHTER_60="#dffdff",n.TEAL_LIGHTER_80="#eaffff",n.GREEN_LIGHTER_20="#aed7a8",n.GREEN_LIGHTER_40="#cae5b8",n.GREEN_LIGHTER_60="#dceec6",n.GREEN_LIGHTER_80="#efffdc",n.ORANGE_LIGHTER_20="#ffd0a0",n.ORANGE_LIGHTER_40="#ffe0c1",n.ORANGE_LIGHTER_60="#ffebd7",n.ORANGE_LIGHTER_80="#fff2e5",n.YELLOW_LIGHTER_20="#ffeea2",n.YELLOW_LIGHTER_40="#fff4c2",n.YELLOW_LIGHTER_60="#fff8d7",n.YELLOW_LIGHTER_80="#fffae5",n.BEIGE_LIGHTER_20="#d9d6c0",n.BEIGE_LIGHTER_40="#e2decc",n.BEIGE_LIGHTER_60="#e4e2d6",n.BEIGE_LIGHTER_80="#f1ede2",n.RED_LIGHTER_20="#e0a3a3",n.RED_LIGHTER_40="#f4baba",n.RED_LIGHTER_60="#f7cbcb",n.RED_LIGHTER_80="#ffdfe0",n}();t.Colors=u});

define("Agile/Scripts/Common/ViewActions/BacklogLevelSelectorViewAction",["require","exports","Agile/Scripts/Common/Colors","Agile/Scripts/Generated/HubConstants","VSS/Utils/String","VSS/Utils/Array"],function(n,t,i,r,u,f){function o(n,i,o,s,h,c){o=o||function(){return!0};var a=i.getViewOption(r.AgileRouteParameters.BacklogLevel),v=n.map(function(n){return{key:"backlog-level-".concat(n.name),name:n.name,ariaLabel:"".concat(n.name," ").concat(s),iconProps:h?__assign(__assign({},h),{styles:{root:{color:"".concat(e(n.color)," !important")}}}):undefined,important:!0,onClick:function(){u.equals(a,n.name,!0)||(o()?i.setViewOption(r.AgileRouteParameters.BacklogLevel,n.name):c&&c())}}}),l=f.first(n,function(n){return u.equals(n.name,a,!0)});return l||(l=n[0]),{key:"backlog-level-selector",actionProps:{className:t.BacklogLevelSelectorClass},name:l.name,ariaLabel:"".concat(l.name," ").concat(s),iconProps:h?__assign(__assign({},h),{styles:{root:{color:"".concat(e(l.color)," !important")}}}):undefined,important:!0,viewActionRenderArea:1,children:v}}function e(n){if(n.length!==6&&n.length!==8)return i.Colors.BLACK;var t=n.length===6?n:n.substr(2,6);return"#".concat(t)}Object.defineProperty(t,"__esModule",{value:!0});t.getLevelSelectorViewAction=t.BacklogLevelSelectorClass=void 0;t.BacklogLevelSelectorClass="backlog-level-selector-view-action";t.getLevelSelectorViewAction=o});

define("Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView",["require","exports"],function(require,exports){var e=exports;e.IterationWorkingDays="{0} working days";e.Backlog="Backlog";e.AllTeamGroupHeader="All Team Backlogs";e.BacklogHeader_UnknownError="An unknown error ocurred. The header data provider failed to execute";e.Backlogs="Backlogs";e.Parents_ViewAction="Parents";e.Backlog_RightPanelContribution_LoadError="There was an error while loading the backlog contribution: {0}";e.Navigation_PendingChanges="You have unsaved changes. You can retry after all changes are saved, or refresh the page to discard the changes.";e.RightPane_ViewActionGroup="Side Pane";e.Forecasting_DisabledWhileShowParents="Forecasting is unavailable when parents are shown";e.MyTeamGroupHeader="My Team Backlogs";e.CompletedChildItems_ViewAction="Completed Child Items";e.ViewAsBoard="View as Board";e.BrowseAllBacklogsText="View Backlog directory";e.OffPaneTitle="Off";e.SearchNoResultsText="No results found";e.SearchTextPlaceholder="Search team backlogs";e.BacklogAddItemButton_Disabled_NoWorkItemTypes="Your process has no work item types configured for this backlog level";e.Forecasting_Tooltip="Show or hide the forecasting line to predict how much work can be accomplished";e.InProgress_Tooltip="Show or hide work items in the In Progress state";e.Planning_Move_Toast_Single="You successfully moved \"{0}\" to \"{1}\".";e.MappingPane_AriaLabel="Mapping Pane. This is a drag and drop experience, please use the backlog context menu or work item form for other reparenting experiences.";e.NewSprint="New Sprint";e.LoadingBacklogsText="Loading team backlogs";e.BacklogCardTitle="{0} Backlog";e.LearnMoreAboutBacklogs="Learn more about backlogs";e.PrioritizeWithSprints_Format="Prioritize and track work for defined product increments using {0}";e.Backlog_NoItems="There are no items in your {0} backlog";e.PlanningPaneTitle="Planning";e.CompletedChildItems_Tooltip="Show or hide work items in the Completed state";e.Planning_Move_Toast_Multiple="You successfully moved {0} work items to \"{1}\".";e.PrioritizeWithSprints_Link="Sprints";e.CreateWorkItemSuggestion="Use the \"New Work Item\" command to create and prioritize work items";e.Planning_Tooltip="Enable to drag and drop work items into sprints";e.MappingPane_GoToBacklog="{0} Backlog";e.EffortLabel="Planned Effort: {0}";e.BacklogLevelLearningBubbleText="Need to switch to a different backlog level? Use the backlog picker right here.";e.MappingPane_TeamSearchPlaceholder="Filter teams";e.BacklogAddItemButton_Disabled_Filter="You cannot add a work item when the backlog is filtered";e.SearchResultsLoadingText="Searching team backlogs";e.Forecasting="Forecasting";e.Off_Tooltip="Hide the side pane from view";e.Backlog_LoadError="There was an error while loading the {0} backlog: {1}";e.Mapping_Tooltip="Enable to map work items to parents";e.GetStartedProductBacklog="Get started with your product backlog";e.MappingPaneDescription="Drag and drop work items to map them to {0}.";e.Parents_Tooltip="Show or hide hierarchy of work items";e.GetStartedWithSprints="Get started with sprints for your team";e.Directory_All="All";e.PlanningPaneDescription="Drag and drop work items to include them in a sprint.";e.Forecasting_DisabledWhileFiltering="Forecasting is unavailable when filtering";e.ShowToggle_ViewOptionValue="Show";e.MatchingBoard="Board";e.RefreshButtonLabel="Refresh";e.FavoriteGroupHeader="Favorites";e.MappingPane_BacklogForTeam="{0} for";e.InProgress_ViewAction="In Progress Items";e.MappingPaneTitle="Mapping";e.NoWorkScheduledYet="No work scheduled yet";e.Directory_Mine="Mine";e.HideToggle_ViewOptionValue="Hide";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Favorites/Constants",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.OwnerScopeTypes=t.FavoriteStorageScopes=void 0,function(n){n.Collection="Collection";n.Project="Project"}(i=t.FavoriteStorageScopes||(t.FavoriteStorageScopes={})),function(n){n.Team="Team";n.User="User"}(r=t.OwnerScopeTypes||(t.OwnerScopeTypes={}))});

define("Favorites/Controls/FavoritesModels",["require","exports"],function(n,t){var r,i;Object.defineProperty(t,"__esModule",{value:!0});t.FavoriteModelsConvertor=t.FailureActionType=void 0,function(n){n[n.Favorite=0]="Favorite";n[n.UnFavorite=1]="UnFavorite"}(r=t.FailureActionType||(t.FailureActionType={}));i=function(){function n(){}return n.FavoriteCreateParametersToFavorite=function(n){return{artifactId:n.artifactId,artifactName:n.artifactName,artifactProperties:n.artifactProperties,artifactScope:n.artifactScope,artifactType:n.artifactType}},n}();t.FavoriteModelsConvertor=i});

define("Favorites/Controls/FavoritesActionsCreator",["require","exports","Favorites/Controls/FavoritesModels"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.FavoritesActionsCreator=void 0;var r=function(){function n(n,t,i){this._store=t;this._dataProvider=n;this._actions=i}return n.prototype.initializeStore=function(n,t,i,r){var u=this;return i===void 0&&(i=!0),this.finishLoading(function(i){return u._dataProvider.loadFavoritesData(i,u,n,t,r)},i)},n.prototype.initializeStoreFromExistingData=function(n){var t=this._store.getState(),i=this._dataProvider.loadFavoritesDataFromExistingData(t,n);this._actions.ReceiveData.invoke(i)},n.prototype.initializeStoreByArtifact=function(n,t,i){var r=this;return t===void 0&&(t=!0),this.finishLoading(function(t){return r._dataProvider.loadFavoritesDataByArtifactId(t,n,i)},t)},n.prototype.finishLoading=function(n,t){var r=this,u=this._store.getState(),i=n(u).then(function(n){return r._actions.ReceiveData.invoke(n),n});if(t)i.done();else return i},n.prototype.toggleFavorite=function(n,t){var r=this;this._dataProvider.toggleFavorite(n,this._store.getState()).then(function(u){r._actions.ReceiveData.invoke(u);var f=r._dataProvider.getFavoriteData(n.favorite,u);r._dataProvider.saveFavorite(f,r._store.getState(),t).then(function(n){if(n.saveFailed){var t={favoriteItem:f,exceptionMessage:n.exception,failureAction:f.favorited?i.FailureActionType.UnFavorite:i.FailureActionType.Favorite};f.favorited?r._actions.UnfavoritingFailed.invoke(t):r._actions.FavoritingFailed.invoke(t)}else r._actions.ToggleFavorite.invoke(f);r._actions.ReceiveData.invoke(n.state)})})},n.prototype.getActions=function(){return this._actions},n.prototype.getStore=function(){return this._store},n}();t.FavoritesActionsCreator=r});

define("Favorites/Controls/FavoritesStore",["require","exports","VSS/Flux/Store"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.FavoritesStore=void 0;var r=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._actions=t,i._state={},i._state.isLoaded=!1,i._receivedDataHandler=function(n){return i._receivedData(n)},i._actions.ReceiveData.addListener(i._receivedDataHandler),i}return __extends(t,n),t.prototype.getState=function(){return this._state},t.prototype._receivedData=function(n){this._state=n;this.emitChanged()},t}(i.Store);t.FavoritesStore=r});

define("Favorites/Controls/FavoritesActions",["require","exports","VSS/Flux/Action"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.FavoritesActions=void 0;var r=function(){function n(){this.ToggleFavorite=new i.Action;this.ReceiveData=new i.Action;this.FavoritingFailed=new i.Action;this.UnfavoritingFailed=new i.Action}return n}();t.FavoritesActions=r});

define("Favorites/Contracts",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=void 0;t.TypeInfo={Favorite:{}};t.TypeInfo.Favorite.fields={creationDate:{isDate:!0}}});

define("Favorites/RestClient",["require","exports","Favorites/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function d(n){return window.VSS&&window.VSS.VssSDKRestVersion&&b[window.VSS.VssSDKRestVersion]?r.getClient(b[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(o,undefined,undefined,undefined,n)}var f,e,o,s,h,c,l,a,v,y,p,w,k,b;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.FavoriteHttpClient=t.FavoriteHttpClient3_1=t.FavoriteHttpClient3_2=t.FavoriteHttpClient4=t.FavoriteHttpClient4_1=t.FavoriteHttpClient5=t.FavoriteHttpClient5_1=t.FavoriteHttpClient5_2=t.FavoriteHttpClient6=t.FavoriteHttpClient6_1=t.FavoriteHttpClient7=t.FavoriteHttpClient7_1=t.CommonMethods3_1To7_1=void 0;f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getFavoritesOfOwner=function(n,t,r,u,f,e){var o={ownerScopeType:n,ownerScopeId:t,artifactType:r,artifactScopeType:u,artifactScopeId:f,includeExtendedDetails:e};return this._beginRequest({httpMethod:"GET",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",responseType:i.TypeInfo.Favorite,responseIsCollection:!0,queryParams:o,apiVersion:this.favoritesApiVersion})},t.prototype.getFavorites=function(n,t,r,u){var f={artifactType:n,artifactScopeType:t,artifactScopeId:r,includeExtendedDetails:u};return this._beginRequest({httpMethod:"GET",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",responseType:i.TypeInfo.Favorite,responseIsCollection:!0,queryParams:f,apiVersion:this.favoritesApiVersion})},t.prototype.getFavoriteOfOwnerById=function(n,t,r,u,f,e,o){var s={ownerScopeType:t,ownerScopeId:r,artifactScopeType:u,artifactType:f,artifactScopeId:e,includeExtendedDetails:o};return this._beginRequest({httpMethod:"GET",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",responseType:i.TypeInfo.Favorite,routeValues:{favoriteId:n},queryParams:s,apiVersion:this.favoritesApiVersion})},t.prototype.getFavoriteById=function(n,t,r,u,f){var e={artifactScopeType:t,artifactType:r,artifactScopeId:u,includeExtendedDetails:f};return this._beginRequest({httpMethod:"GET",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",responseType:i.TypeInfo.Favorite,routeValues:{favoriteId:n},queryParams:e,apiVersion:this.favoritesApiVersion})},t.prototype.getFavoriteByArtifact=function(n,t,r,u,f){var e={artifactType:n,artifactId:t,artifactScopeType:r,artifactScopeId:u,includeExtendedDetails:f};return this._beginRequest({httpMethod:"GET",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",responseType:i.TypeInfo.Favorite,queryParams:e,apiVersion:this.favoritesApiVersion})},t.prototype.deleteFavoriteOfOwnerById=function(n,t,i,r,u,f){var e={ownerScopeType:t,ownerScopeId:i,artifactType:r,artifactScopeType:u,artifactScopeId:f};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",routeValues:{favoriteId:n},queryParams:e,apiVersion:this.favoritesApiVersion})},t.prototype.deleteFavoriteById=function(n,t,i,r){var u={artifactType:t,artifactScopeType:i,artifactScopeId:r};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",routeValues:{favoriteId:n},queryParams:u,apiVersion:this.favoritesApiVersion})},t.prototype.createFavoriteOfOwner=function(n,t,r){var u={ownerScopeType:t,ownerScopeId:r};return this._beginRequest({httpMethod:"POST",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",responseType:i.TypeInfo.Favorite,queryParams:u,apiVersion:this.favoritesApiVersion,data:n})},t.prototype.createFavorite=function(n){return this._beginRequest({httpMethod:"POST",area:"Favorite",locationId:"6f13e9a6-aae2-4b89-b683-131ca9564cec",resource:"Favorites",routeTemplate:"_apis/{area}/{resource}/{favoriteId}",responseType:i.TypeInfo.Favorite,apiVersion:this.favoritesApiVersion,data:n})},t.prototype.getFavoriteProviders=function(n){var t={faultInMissingHost:n};return this._beginRequest({httpMethod:"GET",area:"Favorite",locationId:"0c04d86b-e315-464f-8125-4d6222d306c2",resource:"FavoriteProviders",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,queryParams:t,apiVersion:this.favoriteProvidersApiVersion})},t}(u.VssHttpClient);t.CommonMethods3_1To7_1=f;e=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="7.1-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient7_1=e;o=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="7.0-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient7=o;s=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="6.1-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient6_1=s;h=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="6.0-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient6=h;c=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="5.2-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient5_2=c;l=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="5.1-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient5_1=l;a=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="5.0-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient5=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="4.1-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient4_1=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="4.0-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient4=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="3.2-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient3_2=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.favoriteProvidersApiVersion=r.favoritesApiVersion="3.1-preview.1",r}return __extends(t,n),t}(f);t.FavoriteHttpClient3_1=w;k=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(e);t.FavoriteHttpClient=k;b={"7.1":e,"7.0":o,"6.1":s,"6.0":h,"5.2":c,"5.1":l,"5.0":a,"4.1":v,"4.0":y,"3.2":p,"3.1":w};t.getClient=d});

define("VSS/Security/Services",["require","exports","VSS/Contributions/LocalPageData","VSS/Diag","VSS/Service"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.SecurityService=void 0;var f="_permissions",e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.hasPermission=function(n,t,r){var o=i.getSharedData(f),u,e;return o?(u=o[n],!u)?this.handleMissingState("Security namespace with id '".concat(n,"' not found")):(e=u[t],e===undefined)?this.handleMissingState("No permissions found for security namespace '".concat(n,"' and token '").concat(t,"'")):(r&e)>0:this.handleMissingState("No shared permissions found")},t.prototype.checkPermission=function(n,t,i){if(!this.hasPermission(n,t,i))throw new Error("Access denied: Permission ".concat(i," is needed for the resource ").concat(t,"."));},t.prototype.isPermissionIncluded=function(n,t){var u=i.getSharedData(f),r;return u?(r=u[n],r&&r[t]!==undefined):!1},t.prototype.handleMissingState=function(n){return!1},t}(u.VssService);t.SecurityService=e});

define("Favorites/FavoritesService",["require","exports","q","Favorites/RestClient","VSS/Service","VSS/Security/Services"],function(n,t,i,r,u,f){function e(){var n=u.getService(f.SecurityService);return n.hasPermission("fa557b48-b5bf-458a-bb2b-1b680426fe8b","/Favorites",3)}Object.defineProperty(t,"__esModule",{value:!0});t.FavoritesService=t.canUseFavorites=void 0;t.canUseFavorites=e;var o=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.client=r.getClient(),t}return __extends(t,n),t.prototype.getFavoritesOfOwner=function(){return e()?this.client.getFavoritesOfOwner.apply(this.client,arguments):i([])},t.prototype.getFavorites=function(){return e()?this.client.getFavorites.apply(this.client,arguments):i([])},t.prototype.getFavoriteById=function(){return e()?this.client.getFavoriteById.apply(this.client,arguments):i(null)},t.prototype.getFavoriteByArtifact=function(){return e()?this.client.getFavoriteByArtifact.apply(this.client,arguments):i.resolve(null)},t.prototype.deleteFavoriteOfOwnerById=function(){return e()?this.client.deleteFavoriteOfOwnerById.apply(this.client,arguments):(this.logNoEditPermissionError(),i.resolve())},t.prototype.deleteFavoriteById=function(){return e()?this.client.deleteFavoriteById.apply(this.client,arguments):(this.logNoEditPermissionError(),i.resolve(null))},t.prototype.createFavoriteOfOwner=function(){return e()?this.client.createFavoriteOfOwner.apply(this.client,arguments):(this.logNoEditPermissionError(),i.resolve(null))},t.prototype.createFavorite=function(){return e()?this.client.createFavorite.apply(this.client,arguments):(this.logNoEditPermissionError(),i.resolve(null))},t.prototype.logNoEditPermissionError=function(){console.error("Favorites client UI should not expose or allow write operations with Favorites, when the active user does not have neccessary permission.")},t}(u.VssService);t.FavoritesService=o});

define("Favorites/Controls/FavoritesDataService",["require","exports","q","Favorites/RestClient","VSS/Service","Favorites/FavoritesService"],function(n,t,i,r,u,f){function e(n){var t=u.VssConnection.getConnection();return t.getHttpClient(r.FavoriteHttpClient5_1,n)}Object.defineProperty(t,"__esModule",{value:!0});t.getStableFavoritesClient=t.FavoritesDataService=void 0;var o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.favoriteClients=[],t}return __extends(t,n),t.prototype.getProviders=function(){var n=this;return Object.keys(this.providers).map(function(t){return n.providers[t]})},t.prototype.getFavorites=function(n,t,r,u){var o=this,e;return f.canUseFavorites()?(e=i.defer(),this.getFavoriteProviders().then(function(i){var f=[],s,h;n?(s=i[n],s?(h=o.getStableFavoritesClient(s.serviceIdentifier),f.push(h.getFavorites(n,t,r,u))):e.resolve([])):o.getFavoriteServiceClients(o.getProviders()).map(function(i){f.push(i.getFavorites(n,t,r,u))});o.getFavoriteArtifacts(f,e)},function(n){e.reject(n)}),e.promise):i([])},t.prototype.getFavoriteByArtifact=function(n,t,r,u,e){var s=this,o;return f.canUseFavorites()?(o=i.defer(),this.getFavoriteProviders().then(function(i){var h=i[n],f,c;h?(f=[],c=s.getStableFavoritesClient(h.serviceIdentifier),f.push(c.getFavoriteByArtifact(n,t,r,u,e)),s.getFavoriteArtifacts(f,o)):o.resolve([])},function(n){o.reject(n)}),o.promise):i([])},t.prototype.getFavoriteProviders=function(){var t=this,n=i.defer(),r;return this.providers?n.resolve(this.providers):(r=this.getStableFavoritesClient(),r.getFavoriteProviders().then(function(i){t.providers={};i.forEach(function(n){t.providers[n.artifactType]=n});n.resolve(t.providers)},function(t){n.reject(t)})),n.promise},t.prototype.getFavoriteServiceClients=function(n){for(var t,f,r={},u=[],i=0;i<n.length;i++)(t=n[i],r[t.artifactUri])||(r[t.artifactUri]=t.artifactUri,f=this.getStableFavoritesClient(t.serviceIdentifier),u.push(f));return u},t.prototype.getFavoriteArtifacts=function(n,t){i.allSettled(n).then(function(i){var u=[],r=[];i&&i.forEach(function(n){n.state==="fulfilled"&&n.value?u=u.concat(n.value):n.state==="rejected"&&r.push(n.reason)});r.length===n.length?t.reject(r):r.length>0?(console.log(r),t.resolve(u)):t.resolve(u)})},t.prototype.getStableFavoritesClient=function(n){return e(n)},t}(u.VssService);t.FavoritesDataService=o;t.getStableFavoritesClient=e});

define("Favorites/Controls/FavoritesTelemetry",["require","exports","VSS/Context","VSS/Diag","VSS/Service","VSS/Navigation/HubsService","VSS/Telemetry/Services","VSS/ClientTrace/Services","VSS/ClientTrace/Contracts"],function(n,t,i,r,u,f,e,o,s){var h,c;Object.defineProperty(t,"__esModule",{value:!0});t.FavoritesTelemetry=t.FavoritesCustomerIntelligenceConstants=void 0,function(n){n.AREA="Favorites";n.COMPONENT="Favorite Controls";n.FAVORITE_TOGGLE_CLICK="ToggleFavoriteClick";n.FAVORITE_DELETE_CLICK="DeleteFavoriteClick";n.FAVORITE_STACK_ERROR="FavoriteStackError"}(h=t.FavoritesCustomerIntelligenceConstants||(t.FavoritesCustomerIntelligenceConstants={}));c=function(){function n(){}return n.LogToggleFavoriteClicked=function(n,t){var i={favoriteType:n,favorited:t};this.publish(h.FAVORITE_TOGGLE_CLICK,i,!1)},n.LogDeleteFavorite=function(n){var t={favoriteType:n};this.publish(h.FAVORITE_DELETE_CLICK,t,!1)},n.publishNavigateEvent=function(n,t){this.publish("onclick",{favoriteType:n,source:t},!0)},n.LogStackErrorSingle=function(t,i){n.publishErrorTrace(h.AREA,h.COMPONENT,t,i)},n.LogStackError=function(t,i){var r,u,f;if(Array.isArray(i))for(r=0,u=i;r<u.length;r++)f=u[r],n.LogStackErrorSingle(t,f);else n.LogStackErrorSingle(t,i)},n.publish=function(t,i,r){i===void 0&&(i={});r===void 0&&(r=!1);n.addFrameworkCiData(i,"hubId",n.getCurrentHubId());e.publishEvent(new e.TelemetryEventData(h.AREA,t,i),r)},n.publishErrorTrace=function(n,t,r,u){var f=i.getPageContext(),h=window.navigator.userAgent,c=f&&f.diagnostics&&f.diagnostics.sessionId||"",e={userAgent:h,sessionId:c,errorType:u.errorType,errorName:u.name,errorMessage:u.message,errorResponse:u.response,errorStack:u.stack,source:u.source||"",lineNumber:u.lineNumber||"",columnNumber:u.columnNumber||""},l={area:n,component:t,feature:r,exceptionType:e.errorType,level:s.Level.Error,message:e.errorMessage,method:null,properties:e};o.trace(l)},n.addFrameworkCiData=function(n,t,i){n[t]=i},n.extractErrorId=function(n){var i=null,t;return n&&(t=n.match("VS[0-9]+"),t!=null&&t.length>=1?i=t[0]:(t=n.match("TF[0-9]+"),t!=null&&t.length>=1&&(i=t[0]))),i},n.getCurrentHubId=function(){var n=u.getLocalService(f.HubsService);return n.getSelectedHubId()},n}();t.FavoritesTelemetry=c});

define("Favorites/Controls/FavoritesDataProvider",["require","exports","q","Favorites/Controls/FavoritesDataService","VSS/Service","Favorites/Controls/FavoritesTelemetry","Favorites/FavoritesService"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.FavoritesDataProvider=void 0;var o=function(){function n(){}return n.prototype.loadFavoritesData=function(n,t,r,u,o){var s=this,c,h,l;if(!e.canUseFavorites())return i(this.createEmptyFavoritesState());if(this.ensureInitialStateBeforeLoad(n),r&&r.length>1){for(c=[],h=0;h<r.length;h++)c.push(this.loadSingleType(r[h],u));return i.all(c).then(function(t){return s.resetState(n),t.forEach(function(t){s.addFavoritesToState(n,t)}),n.isLoaded=!0,n},function(t){return s.resetState(n),f.FavoritesTelemetry.LogStackError("loadFavoritesData",t),n})}return l=r&&r.length==1?r[0]:null,this.loadSingleType(l,u,o).then(function(t){return s.resetState(n),s.addFavoritesToState(n,t),n.isLoaded=!0,n},function(t){return s.resetState(n),f.FavoritesTelemetry.LogStackError("loadFavoritesData",t),n})},n.prototype.loadSingleType=function(n,t,f){if(!e.canUseFavorites())return i([]);var o=u.getService(r.FavoritesDataService);return o.getFavorites(n,t?t.type:null,t?t.id:null,f).then(function(n){return n})},n.prototype.createEmptyFavoritesState=function(){return{favoriteItems:[],itemsByFavoriteId:{},loadingPromise:i({}),isLoaded:!0}},n.prototype.addFavoritesToState=function(n,t){t.forEach(function(t){var i={favorited:!0,favorite:t};n.favoriteItems.push(i);n.itemsByFavoriteId[i.favorite.id]=i})},n.prototype.loadFavoritesDataByArtifactId=function(n,t,o){var h=this,s;return e.canUseFavorites()?(s=u.getService(r.FavoritesDataService),this.ensureInitialStateBeforeLoad(n),s.getFavoriteByArtifact(t.artifactType,t.artifactId,t.artifactScope.type,t.artifactScope.id,o).then(function(t){if(h.resetState(n),t.length>0&&t[0]){var r=t[0],i={favorited:!0,favorite:r};n.favoriteItems.push(i);n.itemsByFavoriteId[i.favorite.id]=i}return n.isLoaded=!0,n},function(t){return f.FavoritesTelemetry.LogStackError("loadFavoritesDataByArtifact",t),n.isLoaded=!1,n})):i(this.createEmptyFavoritesState())},n.prototype.loadFavoritesDataFromExistingData=function(n,t){return e.canUseFavorites()?(this.ensureInitialStateBeforeLoad(n),t&&(this.addFavoritesToState(n,t),n.isLoaded=!0),n):this.createEmptyFavoritesState()},n.prototype.ensureInitialStateBeforeLoad=function(n){n.isLoaded||this.resetState(n)},n.prototype.resetState=function(n){n.isLoaded=!1;n.favoriteItems=[];n.itemsByFavoriteId={}},n.prototype.getFavoriteData=function(n,t){t.favoriteItems||(t.favoriteItems=[]);var i=this.queryFavorite(n,t);return i.length>0?i[0]:{favorited:!1,favorite:n}},n.prototype.queryFavorite=function(n,t){return t.favoriteItems.filter(function(t){return t.favorite.artifactType===n.artifactType&&t.favorite.artifactId===n.artifactId})},n.prototype.toggleFavorite=function(n,t){var r,u;if(!e.canUseFavorites())throw new Error("Favorites client UI affordances should not be exposed or allow write operations with Favorites, when the active user does not have neccessary permission.");return r=n.favorite,this.queryFavorite(n.favorite,t).length===0?(u={favorited:!0,favorite:r},t.favoriteItems.push(u)):n.favorited=!n.favorited,n.favorite.artifactIsDeleted&&this.removeItem(n,t),i.resolve(t)},n.prototype.removeItem=function(n,t){var i=t.favoriteItems.indexOf(n);return t.favoriteItems.splice(i,1),t},n.prototype.saveFavorite=function(n,t,i){var o=this,u,s;if(!e.canUseFavorites())throw new Error("Favorites client UI affordances should not be exposed or allow write operations with Favorites, when the active user does not have neccessary permission.");return u=n.favorite,s=r.getStableFavoritesClient(i),n.favorited?s.createFavorite(u).then(function(n){return u.id=n.id,{state:t,saveFailed:!1}},function(i){return f.FavoritesTelemetry.LogStackError("saveFavorite",i),n.favorited=!1,{state:t,saveFailed:!0,exception:o.parseErrorToString(i)}}):s.deleteFavoriteById(u.id,u.artifactType,u.artifactScope.type,u.artifactScope.id).then(function(){return u.id=null,o.getFavoriteData(u,t).favorite.id=null,{state:t,saveFailed:!1}},function(i){return f.FavoritesTelemetry.LogStackError("deleteFavorite",i),n.favorited=!0,{state:t,saveFailed:!0,exception:o.parseErrorToString(i)}})},n.prototype.parseErrorToString=function(n){var t=null;return n==null?t:(typeof n=="string"?t=n:n.hasOwnProperty("message")&&(n.message==null?t="":typeof n.message=="string"?t=n.message:n.message.hasOwnProperty("message")&&(t=n.message.message)),t)},n}();t.FavoritesDataProvider=o});

define("Favorites/Resources/TFS.Resources.Favorites",["require","exports"],function(require,exports){var e=exports;e.FavoriteItemPickerNoItemsMessage="Use the {0} to add favorites here";e.FavoriteItemPickerStarAriaLabel="star button";e.FavoriteItemPickerAriaDescription="Use right arrow to toggle favorite status.";e.FavoriteStarUnfavoritedTitle="Add to favorites";e.FavoriteItemPickerSearchHeader="Global search results";e.FavoriteItemPickerSearchNoResults="No favorites found";e.FavoriteStarFavoritedTitle="Remove from favorites";e.FavoriteItemPickerGroupHeader="Favorites";e.FavoriteLabel="Favorite";e.FavoriteItemPickerSearchText="Search favorites";e.FavoriteItemPickerBrowseAllText="Browse all items";e.FavoriteItemPickerLoadingMessage="Loading favorites...";});

// Copyright (C) Microsoft Corporation. All rights reserved.
var __decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("Favorites/Controls/LegacyArtifactPickerProvider",["require","exports","react","OfficeFabric/Utilities","VSSUI/Tooltip","OfficeFabric/Button","VSS/Utils/Core","VSSUI/PickList","VSSUI/ItemIndicator","Favorites/Controls/FavoritesActionsCreator","Favorites/Controls/FavoritesStore","Favorites/Controls/FavoritesActions","Favorites/Controls/FavoritesDataProvider","Favorites/Controls/FavoritesTelemetry","Favorites/FavoritesService","Favorites/Resources/TFS.Resources.Favorites","VSS/LoaderPlugins/Css!Favorites/FavoriteItemPicker"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){Object.defineProperty(t,"__esModule",{value:!0});t.LegacyArtifactPickerProvider=void 0;var w=function(){function n(n){var t=this;this._artifactsById={};this._disposed=!1;this._favoritesLoaded=!1;this._favoritesByArtifactId={};this._favoriteIndicatorItems={};this._extendedFavoritesLoaded=!1;this.onSelectedPivotChanged=function(n){if(typeof t._options.onSelectedPivotChanged=="function")t._options.onSelectedPivotChanged(n)};this._options=n;this._defaultGroup={key:"default",name:n.defaultGroupHeader,isLoading:!0,loadingMessage:n.loadingText,pivotId:n.defaultGroupPivotId};n.getSearchResults&&(this.onSearch=function(i){var r=n.getSearchResults(i);return typeof r.then=="function"?r.then(function(n){return t.getUniqueSearchResults(n)}):t.getUniqueSearchResults(r)});n.favoritesContext&&(this._favoriteGroup={key:"favorites",name:n.favoriteGroupHeader,isLoading:!0,loadingMessage:n.loadingText,pivotId:n.favoriteGroupPivotId},this._setupFavorites(n.favoritesContext),this._favoriteIndicator={getItemIndicator:function(r){var e=n.getArtifactId(r),o;if(!e||(o=t._getFavoriteItem(e),!y.canUseFavorites())||!o&&!t._options.getFavoriteFromArtifact)return null;var s=t._getIndicatorItem(e,o,!0),h=function(){var n=t._getFavoriteItem(e);return n||(n={favorite:t._options.getFavoriteFromArtifact(r),favorited:!1}),n},c=function(n){var i=h(),r=!i.favorited;t._favoritesActionsCreator.toggleFavorite(i);s.setState(t._getIndicatorState(r,!0));n.preventDefault()};return{item:s,onRender:function(){var n=s.getState().iconProps,t={className:n.className,iconName:n.iconName},r=h();return i.createElement(u.TooltipHost,{hostClassName:"vss-ItemIndicator",content:n.title},i.createElement(f.IconButton,{className:"vss-FavoriteIconButton",onClick:c,ariaLabel:n.title,checked:r.favorited,iconProps:t}))}}}})}return n.prototype._setupFavorites=function(n){var r,t,i;n.actionsCreator?(this._favoritesActionsCreator=n.actionsCreator,this._favoritesStore=this._favoritesActionsCreator.getStore()):(r=new a.FavoritesDataProvider,t=new l.FavoritesActions,this._favoritesStore=new c.FavoritesStore(t),this._favoritesActionsCreator=new h.FavoritesActionsCreator(r,this._favoritesStore,t));this._favoritesActionsCreator.initializeStore(n.artifactTypes,n.artifactScope,undefined,!1);i=this._favoritesActionsCreator.getActions();i.FavoritingFailed.addListener(this._favoritesErrorDelegate);i.UnfavoritingFailed.addListener(this._favoritesErrorDelegate);this._favoritesStore.addChangedListener(this._onFavoritesLoaded);this._processFavorites()},n.prototype.dispose=function(){if(this._favoritesStore&&(this._favoritesStore.removeChangedListener(this._onFavoritesLoaded),this._favoritesStore=null),this._favoritesActionsCreator){var n=this._favoritesActionsCreator.getActions();n.FavoritingFailed.removeListener(this._favoritesErrorDelegate);n.UnfavoritingFailed.removeListener(this._favoritesErrorDelegate);this._favoritesActionsCreator=null}this._disposed=!0},n.prototype.getTitleTextForItem=function(n){return this._options.getRootItemText?this._options.getRootItemText(n):n&&this._options.getArtifactName(n)},n.prototype._processResolvedArtifacts=function(n){var t,i,r;for(this._options.artifactComparer&&(n=n.sort(this._options.artifactComparer)),t=0,i=n;t<i.length;t++)r=i[t],this._artifactsById[this._options.getArtifactId(r)]=r;return n},n.prototype._getPlaceholderGroups=function(){var t=[],n,i,r;if(this.pivots)for(n=0,i=this.pivots;n<i.length;n++)r=i[n],t.push({key:"placeholder",isLoading:!0,loadingMessage:this._options.loadingText,pivotId:r.id});else t.push({key:"placeholder",isLoading:!0,loadingMessage:this._options.loadingText});return t},n.prototype.getInternalArtifactKey=function(n){return this._options.getArtifactListGroupId?JSON.stringify({artifactId:this._options.getArtifactId(n),group:this._options.getArtifactListGroupId(n),isInFavoriteGroup:n.isInFavoriteGroup}):JSON.stringify({artifactId:this._options.getArtifactId(n),isInFavoriteGroup:n.isInFavoriteGroup})},n.prototype.getInternalArtifact=function(n,t){return $.extend({},n,t)},n.prototype.getInternalArtifacts=function(n,t){var i=this;return n==undefined?undefined:n.map(function(n){return i.getInternalArtifact(n,t)})},n.prototype.getItems=function(){var n,r,e,i,u,o,f,s,t,h;if(this._artifactsPromise||(this._artifactsPromise=this._options.getArtifacts(),this.processArtifacts()),!this._options.favoritesContext)return this.getInternalArtifacts(this._resolvedArtifacts,{isInFavoriteGroup:!1});if(this._loadFavoriteExtendedData(),!this._favoriteItems)return[];if(!this._favoriteItems.length)return this.getInternalArtifacts(this._resolvedArtifacts,{isInFavoriteGroup:!1});if(n=[],this._resolvedArtifacts){for(r=0,e=this._favoriteItems;r<e.length;r++)t=e[r],i=this._artifactsById[t.favorite.artifactId],!i&&this._options.getArtifactFromFavorite&&(i=this._options.getArtifactFromFavorite(t.favorite)),i&&n.push(this.getInternalArtifact(i,{isInFavoriteGroup:!0}));for(this._options.artifactComparer&&(n=n.sort(this._options.artifactComparer)),u=0,o=this._resolvedArtifacts;u<o.length;u++){var c=o[u],l=this._options.getArtifactId(c),a=this._options.getArtifactListGroupId,v=this._favoritesByArtifactId[l];(!v||a)&&n.push(this.getInternalArtifact(c,{isInFavoriteGroup:!1}))}}else if(this._options.getArtifactFromFavorite){for(f=0,s=this._favoriteItems;f<s.length;f++)t=s[f],h=this._options.getArtifactFromFavorite(t.favorite),h&&n.push(this.getInternalArtifact(h,{isInFavoriteGroup:!0}));this._options.artifactComparer&&(n=n.sort(this._options.artifactComparer))}return n},n.prototype.getListItem=function(n){var i=this._options,r=i.getArtifactHref,u=i.getArtifactIcon,t={name:this._options.getArtifactName(n),key:this.getInternalArtifactKey(n)};return n.isInFavoriteGroup?t.groupKey="favorites":this._options.getArtifactListGroupId&&(t.groupKey=this._options.getArtifactListGroupId(n)),t.groupKey||(t.groupKey="default"),u&&(t.iconProps=u(n)),r&&(t.href=r(n)),this._options.pivots&&(t.key+="-"+t.groupKey),t},Object.defineProperty(n.prototype,"selectedItem",{get:function(){return this._handledInitialSelection||(this._handledInitialSelection=!0,this._selectedItem=this.getInternalArtifact(this._options.selectedArtifact,{isInFavoriteGroup:!1})),this._selectedItem},enumerable:!1,configurable:!0}),n.prototype.setSelectedItem=function(n){if(this._selectedItem=n,n){var t=this._options.getArtifactId(n);this._getIndicatorItem(t,this._getFavoriteItem(t),!0)}},n.prototype.onSelectedItemChanged=function(n){var t=this._options.onArtifactClicked;if(t)return this.publishNavigationEvent(n),t(n)},Object.defineProperty(n.prototype,"selectedItemIndicators",{get:function(){return this._favoriteIndicator&&!this._options.hideFavoriteSelectedItemIndicator?this._options.selectedItemIndicators?__spreadArray(__spreadArray([],this._options.selectedItemIndicators,!0),[this._favoriteIndicator],!1):[this._favoriteIndicator]:this._options.selectedItemIndicators},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropdownIndicators",{get:function(){return this._favoriteIndicator?this._options.dropdownIndicators?__spreadArray(__spreadArray([],this._options.dropdownIndicators,!0),[this._favoriteIndicator],!1):[this._favoriteIndicator]:this._options.dropdownIndicators},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"groups",{get:function(){var t=this,n;return!this._resolvedGroups&&this._options.groups&&(typeof this._options.groups.then=="function"?(this._options.groups.then(function(n){t._resolvedGroups=n;r.EventGroup.raise(t,o.PICKER_CHANGE_EVENT)}),this._resolvedGroups=this._getPlaceholderGroups()):this._resolvedGroups=this._options.groups),n=this._resolvedGroups,this._options.groups&&this._defaultGroup.isLoading&&(n=this._getPlaceholderGroups()),this._favoriteGroup?this._options.groups?__spreadArray([this._favoriteGroup,this._defaultGroup],n,!0):[this._favoriteGroup,this._defaultGroup]:this._options.groups?__spreadArray([this._defaultGroup],n,!0):[this._defaultGroup]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pivots",{get:function(){return this._options.pivots},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"actions",{get:function(){var t=this._options,u=t.browseAllText,i=t.onBrowseAllClick,r=t.otherActions,n=[];return r&&n.push.apply(n,r),i&&n.push({onClick:i,name:u||p.FavoriteItemPickerBrowseAllText}),n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSearchable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"searchTextPlaceholder",{get:function(){return this._options.searchTextPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"searchResultsGroupName",{get:function(){return this._options.searchResultsGroupName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"searchNoResultsText",{get:function(){return this._options.searchNoResultsText},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"searchResultsLoadingText",{get:function(){return this._options.searchResultsLoadingText},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"noItemsText",{get:function(){if(this._favoritesStore.getState().isLoaded){var n=null;return typeof this._options.getNoItemsMessage=="function"&&(n=this._options.getNoItemsMessage()),n}return i.createElement("span",{className:"vss-FavoriteItemPicker--noItemsMessage"},p.FavoriteItemPickerLoadingMessage)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"itemAriaDescription",{get:function(){return p.FavoriteItemPickerAriaDescription},enumerable:!1,configurable:!0}),n.prototype.updateArtifacts=function(n,t){var i=this;this._resolvedArtifacts=null;this._artifactsPromise=n;this._defaultGroup.isLoading=!0;this.processArtifacts();t&&t.forEach(function(n){var t=i._resolvedGroups.filter(function(t){return t.key===n})[0];t&&(t.isLoading=!1)})},n.prototype.publishNavigationEvent=function(n){var u=this._options.getArtifactId(n),t,i,r;n.isInFavoriteGroup&&(t=this._favoritesByArtifactId[u].favorite.artifactType,v.FavoritesTelemetry.publishNavigateEvent(t,"Artifact Picker Provider"));i=this._options.getArtifactListGroupId?this._options.getArtifactListGroupId(n):this._defaultGroup.key;r=n.isInFavoriteGroup?"favorite":i;v.FavoritesTelemetry.publish("ArtifactPickerProviderNavigate",{group:r})},n.prototype.processArtifacts=function(){var n=this,t;typeof this._artifactsPromise.then=="function"?(t=this._artifactsPromise,this._artifactsPromise.then(function(i){t===n._artifactsPromise&&(n._resolvedArtifacts=n._processResolvedArtifacts(i),n._defaultGroup.isLoading=!1,r.EventGroup.raise(n,o.PICKER_CHANGE_EVENT))})):(this._resolvedArtifacts=this._processResolvedArtifacts(this._artifactsPromise),this._defaultGroup.isLoading=!1,r.EventGroup.raise(this,o.PICKER_CHANGE_EVENT))},n.prototype.getUniqueSearchResults=function(n){for(var i,r=[],t=0,u=n;t<u.length;t++)i=u[t],this._artifactsById[this._options.getArtifactId(i)]||r.push(i);return r},n.prototype._favoritesErrorDelegate=function(n){var t=this;this._options.onFavoriteLoadError&&e.delay(this,0,function(){t._options.onFavoriteLoadError(n)})},n.prototype._getFavoriteItem=function(n){return this._favoritesByArtifactId[n]},n.prototype._getIndicatorItem=function(n,t,i){var r=this._favoriteIndicatorItems,f=t?t.favorited:!1,u=this._getIndicatorState(f,!!t);return n in r?t&&r[n].setState(u,i):r[n]=new s.Item({initialState:u}),r[n]},n.prototype._getIndicatorState=function(n,t){return{title:"",iconProps:{iconName:n?"FavoriteStarFill":"FavoriteStar",className:"vss-FavoriteItemPicker--starIcon ms-font-l"+(t||n?"":" not-initial-favorite"),title:n?p.FavoriteStarFavoritedTitle:p.FavoriteStarUnfavoritedTitle}}},n.prototype._processFavorites=function(){var u=this._favoritesStore.getState(),t,n,i,r;if(u.isLoaded){for(this._favoriteGroup.isLoading=!1,t=u.favoriteItems.filter(function(n){return!n.favorite.artifactIsDeleted}),this._favoritesByArtifactId={},n=0,i=t;n<i.length;n++)r=i[n],this._favoritesByArtifactId[r.favorite.artifactId]=r;this._favoriteItems=t.filter(function(n){return n.favorited})}else this._favoriteGroup.isLoading=!0,this._favoriteItems=null},n.prototype._onFavoritesLoaded=function(){if(this._processFavorites(),this.selectedItem){var n=this._options.getArtifactId(this.selectedItem);this._getIndicatorItem(n,this._getFavoriteItem(n),!1)}this._favoritesLoaded||(r.EventGroup.raise(this,o.PICKER_CHANGE_EVENT),this._favoritesLoaded=!0)},n.prototype._loadFavoriteExtendedData=function(){var n=this._options.favoritesContext;this._extendedFavoritesLoaded||(this._favoritesLoaded=!1,this._favoritesActionsCreator.initializeStore(n.artifactTypes,n.artifactScope,undefined,!0),this._extendedFavoritesLoaded=!0)},__decorate([r.autobind],n.prototype,"getItems",null),__decorate([r.autobind],n.prototype,"getListItem",null),__decorate([r.autobind],n.prototype,"onSelectedItemChanged",null),__decorate([r.autobind],n.prototype,"_favoritesErrorDelegate",null),__decorate([r.autobind],n.prototype,"_onFavoritesLoaded",null),n}();t.LegacyArtifactPickerProvider=w});

define("TfsCommon/Scripts/Favorites/Constants",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.FavoriteTypes=t.FavoriteScopes=void 0,function(n){n.WORK_PLANS="Work.Plans";n.WIT_QUERYITEMS="WorkItemTracking.Queries";n.VC_PATHS="VersionControl.Paths";n.BUILD_DEFINITIONS="Build.Definitions";n.PROJECTS="Classification.TeamProjects";n.TEAMS="Team.Teams";n.REPOSITORIES="VersionControl.Repositories";n.TEST_PLANS="TestManagement.Plans"}(i=t.FavoriteScopes||(t.FavoriteScopes={})),function(n){n.WORK_PLAN="Microsoft.TeamFoundation.Work.Plans";n.WORK_ITERATION="Microsoft.TeamFoundation.Work.TeamIterations";n.WORK_TEAMBACKLOG="Microsoft.TeamFoundation.Work.TeamBacklogs";n.WORK_TEAMBOARD="Microsoft.TeamFoundation.Work.TeamBoardSets";n.WIT_QUERYITEM="Microsoft.TeamFoundation.WorkItemTracking.QueryItem";n.VC_PATH="Microsoft.TeamFoundation.VersionControl.Path";n.BUILD_DEFINITION="Microsoft.TeamFoundation.Build.Definition";n.BUILD_DEFINITION_INITIALIZED="Microsoft.TeamFoundation.Build.BuildDefinitionInitialized";n.PROJECT="Microsoft.TeamFoundation.Classification.TeamProject";n.TEAM="Microsoft.TeamFoundation.Teams.Team";n.TFVC_REPOSITORY="Microsoft.TeamFoundation.Tfvc.Repository";n.GIT_REPOSITORY="Microsoft.TeamFoundation.Git.Repository";n.TEST_PLAN="Microsoft.TeamFoundation.TestManagement.Plan";n.DASHBOARD="Microsoft.TeamFoundation.Dashboards.Dashboard"}(r=t.FavoriteTypes||(t.FavoriteTypes={}))});

define("VSSPreview/Providers/ContentHost",["require","exports","react","OfficeFabric/Utilities","VSS/Context","VSS/Contributions/Controls","VSS/LWP","VSSPreview/Utilities/PromiseUtils"],function(n,t,i,r,u,f,e,o){function h(n){return typeof n=="string"?n:n.id}Object.defineProperty(t,"__esModule",{value:!0});t.ContentHost=void 0;var s=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._loaded=!1,i._mounted=!1,i._loadingComplete=function(){i._mounted&&(i._loaded=!0,i.setState({showLoadingComponent:!1}),i._diposeTimeouts())},i.state={showLoadingComponent:!1},i}return __extends(t,n),t.prototype.componentDidMount=function(){var n=this;this._mounted=!0;this._createExtensionHost();this.props.loadingComponent&&(this._delayLoadingTimeout=setTimeout(function(){n._mounted&&!n._loaded&&n.setState({showLoadingComponent:!0})},100))},t.prototype.componentWillUnmount=function(){this._mounted=!1;this._disposeExtensionHost();this._diposeTimeouts()},t.prototype.shouldComponentUpdate=function(n,t){return h(n.contribution)!==h(this.props.contribution)||this.state.showLoadingComponent!==t.showLoadingComponent?!0:(this.props.context===n.context||Object.keys(this.props.context).length===0&&Object.keys(n.context).length===0||this._updateContext(n.context),!1)},t.prototype.render=function(){var f=this,t=this.props.width,u=this.props.height,n=this.props.contribution;return typeof n=="object"&&n.properties&&(t=n.properties.width,u=n.properties.height),[i.createElement("div",{className:r.css(this.props.className,"vss-contentHost"),key:"host",ref:function(n){return f._contentArea=n},style:{width:t,height:u}}),this.props.loadingComponent&&this.state.showLoadingComponent?i.createElement("div",{className:"vss-contentHost--loading-component",key:"loading-component"},this.props.loadingComponent()):undefined,]},t.prototype._createExtensionHost=function(){var n=this,t;this._disposeExtensionHost();this._extensionHost=o.toNativePromise(f.createExtensionHost($(this._contentArea),this.props.contribution,this.props.context,this.props.webContext||u.getDefaultWebContext(),undefined,undefined,undefined,undefined,this.props.contributionHostBehavior));t=this.props.expectRegisteredInstance?this._extensionHost.then(function(t){return t.getRegisteredInstance(n._getInstanceId(),u.getDefaultWebContext())}):this._extensionHost.then(function(n){return n.getLoadPromise()});t.then(function(t){if(n.props.onLoaded)n.props.onLoaded(t);n._loadingComplete()}).catch(this._loadingComplete)},t.prototype._getInstanceId=function(){var n=this.props.contribution;return typeof n=="string"?n:n.properties.registeredObjectId||n.id},t.prototype._disposeExtensionHost=function(){this._extensionHost&&(this._extensionHost.then(function(n){n.dispose()}),this._extensionHost=null)},t.prototype._diposeTimeouts=function(){this._delayLoadingTimeout&&(clearTimeout(this._delayLoadingTimeout),this._delayLoadingTimeout=undefined)},t.prototype._updateContext=function(n){var i=this,t;this._extensionHost&&(t=this._extensionHost,t.then(function(n){return n.getRegisteredInstance(i._getInstanceId())}).then(function(r){r&&r.updateContext&&t===i._extensionHost&&r.updateContext(n)}))},t.componentType="vssLegacyContributionContentHost",t}(i.Component);t.ContentHost=s;e.registerLWPComponent(s.componentType,s)});

define("VSSPreview/Providers/ContributablePivotBarActionProvider",["require","exports","VSSPreview/Providers/ContributableMenuItemProvider","VSSUI/PivotBar"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.ContributablePivotBarActionProvider=void 0;var u=function(){function n(n,t,r,u){this._itemProvider=new i.BaseContributableMenuItemProvider(n,t,r,u,{overrideMenuItemProps:function(n,t){n.important=t.properties.important}})}return n.prototype.loadItems=function(n){this._itemProvider.loadItems(function(t){n(t.map(r.mapItemToActions))})},n.prototype.refresh=function(){this._itemProvider.refresh()},n}();t.ContributablePivotBarActionProvider=u});

define("VSSPreview/Providers/ContributablePivotItemProvider",["require","exports","q","react","OfficeFabric/Utilities","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Diag","VSS/LWP","VSS/Service","VSS/Utils/Array","VSS/Utils/String","VSSPreview/Utilities/PromiseUtils","VSSUI/PivotBar","VSSPreview/Providers/ContentHost","VSSPreview/Providers/ContributablePivotBarActionProvider"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){function w(n){var t={promise:n,state:"pending",handled:!1};return n.then(function(n){t.state="fulfilled";t.value=n},function(n){t.state="rejected";t.reason=n}),t}Object.defineProperty(t,"__esModule",{value:!0});t.ContributablePivotItemProvider=void 0;var b=v.MAX_PIVOT_WAIT*.95,k=function(){function n(n,t,i){this._contributeIntervalHandle=null;i=i||{};this._ids=n||[];this._contributionContext=t;this._getEnabled=i.getEnabled;this._queryOptions=i.queryOptions||e.ContributionQueryOptions.IncludeRecursiveTargets;this._hubViewState=i.hubViewState;this._routeValueKey=i.routeValueKey;this._expectedContributionTypes=i.expectedContributionTypes||["ms.vss-web.tab"];this._actionContext=i.actionContext;this._loadingComponent=i.loadingComponent}return n.prototype.loadItems=function(n){var t=this;this._itemsUpdated=n;this._contributionPromises=[];h.getService(e.ExtensionService).getContributionsForTargets(this._ids).then(function(n){for(var e,r=[],o=function(n){var i,u,e;if(!c.contains(t._expectedContributionTypes,n.type))return"continue";i=n.properties.dynamic;i!==!0&&i!==!1&&(i=typeof n.properties.name!="string");u=void 0;u=i?a.toNativePromise(f.getBackgroundInstance(n,n.properties.registeredObjectId||n.id)):Promise.resolve(null);e=u.then(function(i){return t._getTabFromContribution(n,i)});r.push(e);t._contributionPromises.push(w(e))},i=0,u=n;i<u.length;i++)e=u[i],o(e);t._contributeIntervalHandle!==null&&(clearTimeout(t._contributeIntervalHandle),t._contributeIntervalHandle=null);t._contributeIntervalHandle=setInterval(function(){t._contributionPromises.some(function(n){return n.state!=="pending"&&!n.handled})&&t._contributePivots()},b);a.allSettled(r).then(function(){t._contributionPromises.every(function(n){return n.state!=="pending"})&&(t._contributeIntervalHandle!==null&&(clearTimeout(t._contributeIntervalHandle),t._contributeIntervalHandle=null),t._contributePivots())})})},n.prototype._contributePivots=function(){for(var n,t=[],i=0,r=this._contributionPromises;i<r.length;i++)n=r[i],n.state==="fulfilled"?(n.value&&t.push(n.value),n.handled=!0):n.state!=="rejected"||n.handled||(o.logWarning("Failed to load pivot contribution ".concat(n.reason)),n.handled=!0);t.sort(function(n,t){return n.order!==t.order?n.order-t.order:l.ignoreCaseComparer(n.id,t.id)});this._itemsUpdated(t)},n.prototype.refresh=function(){this._itemsUpdated&&this.loadItems(this._itemsUpdated)},n.prototype._getTabFromContribution=function(n,t){var f=this,w,b,o,h,k,c,l,e=this._getContext(n),d,g,nt,a,v,tt,it;return w=t&&typeof t.isDisabled=="function"?t.isDisabled(e):i.resolve(!1),b=t&&typeof t.isInvisible=="function"?t.isInvisible(e):i.resolve(!1),t&&typeof t.name=="function"?(d=t.name,o=d(e)):o=t&&typeof t.name=="string"?i.resolve(t.name):i.resolve(n.properties.name),t&&typeof t.title=="function"?(g=t.title,h=g(e)):h=t&&typeof t.title=="string"?i.resolve(t.title):n.properties.title?i.resolve(n.properties.title):i.resolve(null),l=this._actionContext?typeof this._actionContext=="function"?this._actionContext:function(){return f._actionContext}:t&&t.getActionContext?function(){return t.getActionContext()}:null,n.id.indexOf("ms.")===0&&(k=t&&typeof t.itemKey=="string"?i.resolve(t.itemKey):t&&typeof t.itemKey=="function"?i.resolve(t.itemKey(e)):i.resolve(n.properties.itemKey)),t&&typeof t.groupKey=="function"?(nt=t.groupKey,c=nt(e)):c=t&&typeof t.groupKey=="string"?i.resolve(t.groupKey):n.properties.groupKey?i.resolve(n.properties.groupKey):i.resolve(null),v=n.properties.dependencies||[],v.length>0?(tt=s.getLWPService("IVssContributionService"),a=tt.getContributionsAsync(v)):a=i.resolve(),it=n.properties.contentClassName,Promise.all([w,b,o,h,k,c,a]).then(function(t){var o=t[0],v=t[1],w=t[2],b=t[3],i=t[4],k=t[5],s,h,c,e,a;return v?null:(f._getEnabled&&!f._getEnabled()&&(o=!0),n.properties.commands&&(s=[new p.ContributablePivotBarActionProvider([n.properties.commands],l)]),n.properties.viewActions&&(h=[new p.ContributablePivotBarActionProvider([n.properties.viewActions],l)]),f._hubViewState&&f._routeValueKey&&i&&(e={},e[f._routeValueKey]=i,n.properties.defaultRoute&&f._hubViewState.addRouteChoice(i,n.properties.defaultRoute),c=f._hubViewState.createObservableUrl(e)),a=Number(n.properties.order||999999),{id:n.id,text:w,title:b,order:a,disabled:o,itemKey:i,groupKey:k,url:c,commandProviders:s,viewActionProviders:h,sourceContribution:n,render:function(t){return r.createElement(y.ContentHost,{contribution:n,context:f._getContext(n),className:u.css(t,it,"absolute-fill"),loadingComponent:f._loadingComponent})}})})},n.prototype._getContext=function(n){return typeof this._contributionContext=="function"?this._contributionContext(n):this._contributionContext},n}();t.ContributablePivotItemProvider=k});

define("Presentation/Scripts/TFS/TeamPanel/Flux/TeamPanelActions",["require","exports","VSS/Flux/Action"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.TeamPanelActions=void 0;var r=function(){function n(){this.changeLoadingItems=new i.Action;this.itemsLoadError=new i.Action;this.itemsAvailable=new i.Action;this.startLoadingMembers=new i.Action;this.membersLoadError=new i.Action;this.membersAvailable=new i.Action;this.favoriteUpdated=new i.Action;this.favoriteFailed=new i.Action;this.filterChanged=new i.Action;this.clearFilter=new i.Action;this.teamImageUrlAvailable=new i.Action;this.changeActiveView=new i.Action}return n}();t.TeamPanelActions=r});

define("Presentation/Scripts/TFS/TeamPanel/TeamPanelContracts",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.TeamPanelConstants=void 0;var i;(function(n){n.TeamId="teamId";n.ProjectId="projectId";n.TeamName="teamName";n.ProjectName="projectName"})(i=t.TeamPanelConstants||(t.TeamPanelConstants={}))});

define("TFS/Core/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.SourceControlTypes=t.ProjectVisibility=t.ProjectChangeType=t.ProcessType=t.ProcessCustomizationType=t.ConnectedServiceKind=void 0,function(n){n[n.Custom=0]="Custom";n[n.AzureSubscription=1]="AzureSubscription";n[n.Chef=2]="Chef";n[n.Generic=3]="Generic"}(i=t.ConnectedServiceKind||(t.ConnectedServiceKind={})),function(n){n[n.Unknown=-1]="Unknown";n[n.Xml=0]="Xml";n[n.Inherited=1]="Inherited"}(r=t.ProcessCustomizationType||(t.ProcessCustomizationType={})),function(n){n[n.System=0]="System";n[n.Custom=1]="Custom";n[n.Inherited=2]="Inherited"}(u=t.ProcessType||(t.ProcessType={})),function(n){n[n.Modified=0]="Modified";n[n.Deleted=1]="Deleted";n[n.Added=2]="Added"}(f=t.ProjectChangeType||(t.ProjectChangeType={})),function(n){n[n.Unchanged=-1]="Unchanged";n[n.Private=0]="Private";n[n.Organization=1]="Organization";n[n.Public=2]="Public";n[n.SystemPrivate=3]="SystemPrivate"}(e=t.ProjectVisibility||(t.ProjectVisibility={})),function(n){n[n.Tfvc=1]="Tfvc";n[n.Git=2]="Git"}(o=t.SourceControlTypes||(t.SourceControlTypes={}));t.TypeInfo={ConnectedServiceKind:{enumValues:{custom:0,azureSubscription:1,chef:2,generic:3}},Process:{},ProcessCustomizationType:{enumValues:{unknown:-1,xml:0,inherited:1}},ProcessType:{enumValues:{system:0,custom:1,inherited:2}},ProjectChangeType:{enumValues:{modified:0,deleted:1,added:2}},ProjectInfo:{},ProjectMessage:{},ProjectVisibility:{enumValues:{unchanged:-1,"private":0,organization:1,"public":2,systemPrivate:3}},SourceControlTypes:{enumValues:{tfvc:1,git:2}},TeamProject:{},TeamProjectCollection:{},TeamProjectReference:{},TemporaryDataCreatedDTO:{},WebApiConnectedService:{},WebApiConnectedServiceDetails:{},WebApiProject:{}};t.TypeInfo.Process.fields={type:{enumType:t.TypeInfo.ProcessType}};t.TypeInfo.ProjectInfo.fields={lastUpdateTime:{isDate:!0},visibility:{enumType:t.TypeInfo.ProjectVisibility}};t.TypeInfo.ProjectMessage.fields={project:{typeInfo:t.TypeInfo.ProjectInfo},projectChangeType:{enumType:t.TypeInfo.ProjectChangeType}};t.TypeInfo.TeamProject.fields={lastUpdateTime:{isDate:!0},visibility:{enumType:t.TypeInfo.ProjectVisibility}};t.TypeInfo.TeamProjectCollection.fields={processCustomizationType:{enumType:t.TypeInfo.ProcessCustomizationType}};t.TypeInfo.TeamProjectReference.fields={lastUpdateTime:{isDate:!0},visibility:{enumType:t.TypeInfo.ProjectVisibility}};t.TypeInfo.TemporaryDataCreatedDTO.fields={expirationDate:{isDate:!0}};t.TypeInfo.WebApiConnectedService.fields={project:{typeInfo:t.TypeInfo.TeamProjectReference}};t.TypeInfo.WebApiConnectedServiceDetails.fields={connectedServiceMetaData:{typeInfo:t.TypeInfo.WebApiConnectedService}};t.TypeInfo.WebApiProject.fields={lastUpdateTime:{isDate:!0},visibility:{enumType:t.TypeInfo.ProjectVisibility}}});

define("VSS/Operations/Contracts",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.OperationStatus=void 0;var i;(function(n){n[n.NotSet=0]="NotSet";n[n.Queued=1]="Queued";n[n.InProgress=2]="InProgress";n[n.Cancelled=3]="Cancelled";n[n.Succeeded=4]="Succeeded";n[n.Failed=5]="Failed"})(i=t.OperationStatus||(t.OperationStatus={}));t.TypeInfo={Operation:{},OperationReference:{},OperationStatus:{enumValues:{notSet:0,queued:1,inProgress:2,cancelled:3,succeeded:4,failed:5}}};t.TypeInfo.Operation.fields={status:{enumType:t.TypeInfo.OperationStatus}};t.TypeInfo.OperationReference.fields={status:{enumType:t.TypeInfo.OperationStatus}}});

define("TFS/Core/RestClient",["require","exports","TFS/Core/Contracts","VSS/Operations/Contracts","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f,e){"use strict";function ct(n){return window.VSS&&window.VSS.VssSDKRestVersion&&st[window.VSS.VssSDKRestVersion]?u.getClient(st[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):u.getClient(y,undefined,undefined,undefined,n)}var o,c,l,a,h,s,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,ht,st;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.CoreHttpClient=t.CoreHttpClient2=t.CoreHttpClient2_1=t.CoreHttpClient2_2=t.CoreHttpClient2_3=t.CoreHttpClient3=t.CoreHttpClient3_1=t.CoreHttpClient3_2=t.CoreHttpClient4=t.CoreHttpClient4_1=t.CoreHttpClient5=t.CoreHttpClient5_1=t.CoreHttpClient5_2=t.CoreHttpClient6=t.CoreHttpClient6_1=t.CoreHttpClient7=t.CoreHttpClient7_1=t.CommonMethods5_1To7_1=t.CommonMethods4_1To7_1=t.CommonMethods4To7_1=t.CommonMethods3_2To7_1=t.CommonMethods3_1To7_1=t.CommonMethods2To7_1=void 0;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateTeam=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:t,teamId:i},apiVersion:this.teamsApiVersion,data:n})},t.prototype.deleteTeam=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:this.teamsApiVersion})},t.prototype.createTeam=function(n,t){return this._beginRequest({httpMethod:"POST",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:t},apiVersion:this.teamsApiVersion,data:n})},t.prototype.getProxies=function(n){var t={proxyUrl:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"ec1f4311-f2b4-4c15-b2b8-8990b80d2908",resource:"proxies",routeTemplate:"_apis/{resource}",responseIsCollection:!0,queryParams:t,apiVersion:this.proxiesApiVersion})},t.prototype.updateProject=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",requestType:i.TypeInfo.TeamProject,responseType:r.TypeInfo.OperationReference,routeValues:{projectId:t},apiVersion:this.projectsApiVersion,data:n})},t.prototype.queueDeleteProject=function(n){return this._beginRequest({httpMethod:"DELETE",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",responseType:r.TypeInfo.OperationReference,routeValues:{projectId:n},apiVersion:this.projectsApiVersion})},t.prototype.queueCreateProject=function(n){return this._beginRequest({httpMethod:"POST",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",requestType:i.TypeInfo.TeamProject,responseType:r.TypeInfo.OperationReference,apiVersion:this.projectsApiVersion,data:n})},t.prototype.getProjects=function(n,t,r,u,f){var e={stateFilter:n,$top:t,$skip:r,continuationToken:u,getDefaultTeamImageUrl:f};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",responseType:i.TypeInfo.TeamProjectReference,responseIsCollection:!0,queryParams:e,apiVersion:this.projectsApiVersion})},t.prototype.getProject=function(n,t,r){var u={includeCapabilities:t,includeHistory:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",responseType:i.TypeInfo.TeamProject,routeValues:{projectId:n},queryParams:u,apiVersion:this.projectsApiVersion})},t.prototype.getProjectCollections=function(n,t){var i={$top:n,$skip:t};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"8031090f-ef1d-4af6-85fc-698cd75d42bf",resource:"projectCollections",routeTemplate:"_apis/{resource}/{collectionId}",responseIsCollection:!0,queryParams:i,apiVersion:this.projectCollectionsApiVersion})},t.prototype.getProjectCollection=function(n){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"8031090f-ef1d-4af6-85fc-698cd75d42bf",resource:"projectCollections",routeTemplate:"_apis/{resource}/{collectionId}",responseType:i.TypeInfo.TeamProjectCollection,routeValues:{collectionId:n},apiVersion:this.projectCollectionsApiVersion})},t.prototype.getProcesses=function(){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"93878975-88c5-4e6a-8abb-7ddd77a8a7d8",resource:"processes",routeTemplate:"_apis/process/{resource}/{*processId}",responseType:i.TypeInfo.Process,responseIsCollection:!0,apiVersion:this.processesApiVersion})},t.prototype.getProcessById=function(n){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"93878975-88c5-4e6a-8abb-7ddd77a8a7d8",resource:"processes",routeTemplate:"_apis/process/{resource}/{*processId}",responseType:i.TypeInfo.Process,routeValues:{processId:n},apiVersion:this.processesApiVersion})},t.prototype.updateIdentityMru=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"core",locationId:"5ead0b70-2572-4697-97e9-f341069a783a",resource:"identityMru",routeTemplate:"_apis/{area}/{resource}/{mruName}",routeValues:{mruName:t},apiVersion:this.identityMruApiVersion,data:n})},t.prototype.getIdentityMru=function(n){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"5ead0b70-2572-4697-97e9-f341069a783a",resource:"identityMru",routeTemplate:"_apis/{area}/{resource}/{mruName}",responseIsCollection:!0,routeValues:{mruName:n},apiVersion:this.identityMruApiVersion})},t.prototype.deleteIdentityMru=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"core",locationId:"5ead0b70-2572-4697-97e9-f341069a783a",resource:"identityMru",routeTemplate:"_apis/{area}/{resource}/{mruName}",routeValues:{mruName:t},apiVersion:this.identityMruApiVersion})},t.prototype.createIdentityMru=function(n,t){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"core",locationId:"5ead0b70-2572-4697-97e9-f341069a783a",resource:"identityMru",routeTemplate:"_apis/{area}/{resource}/{mruName}",routeValues:{mruName:t},apiVersion:this.identityMruApiVersion,data:n})},t.prototype.getConnectedServices=function(n,t){var r={kind:t};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"b4f70219-e18b-42c5-abe3-98b07d35525e",resource:"connectedServices",routeTemplate:"_apis/projects/{projectId}/{resource}/{name}",responseType:i.TypeInfo.WebApiConnectedService,responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:this.connectedServicesApiVersion})},t.prototype.getConnectedServiceDetails=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"b4f70219-e18b-42c5-abe3-98b07d35525e",resource:"connectedServices",routeTemplate:"_apis/projects/{projectId}/{resource}/{name}",responseType:i.TypeInfo.WebApiConnectedServiceDetails,routeValues:{projectId:n,name:t},apiVersion:this.connectedServicesApiVersion})},t.prototype.createConnectedService=function(n,t){return this._beginRequest({httpMethod:"POST",area:"core",locationId:"b4f70219-e18b-42c5-abe3-98b07d35525e",resource:"connectedServices",routeTemplate:"_apis/projects/{projectId}/{resource}/{name}",requestType:i.TypeInfo.WebApiConnectedServiceDetails,responseType:i.TypeInfo.WebApiConnectedService,routeValues:{projectId:t},apiVersion:this.connectedServicesApiVersion,data:n})},t.serviceInstanceId=e.ServiceInstanceTypes.TFS,t}(f.VssHttpClient);t.CommonMethods2To7_1=o;c=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.deleteProxy=function(n,t){var i={proxyUrl:n,site:t};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"core",locationId:"ec1f4311-f2b4-4c15-b2b8-8990b80d2908",resource:"proxies",routeTemplate:"_apis/{resource}",queryParams:i,apiVersion:this.proxiesApiVersion})},t.prototype.createOrUpdateProxy=function(n){return this._beginRequest({httpMethod:"PUT",area:"core",locationId:"ec1f4311-f2b4-4c15-b2b8-8990b80d2908",resource:"proxies",routeTemplate:"_apis/{resource}",apiVersion:this.proxiesApiVersion,data:n})},t}(o);t.CommonMethods3_1To7_1=c;l=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.setProjectProperties=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"core",locationId:"4976a71a-4487-49aa-8aab-a1eda469037a",resource:"properties",routeTemplate:"_apis/projects/{projectId}/{resource}",routeValues:{projectId:n},customHeaders:{"Content-Type":"application/json-patch+json"},apiVersion:this.propertiesApiVersion,data:t})},t.prototype.getProjectProperties=function(n,t){var i={keys:t&&t.join(",")};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"4976a71a-4487-49aa-8aab-a1eda469037a",resource:"properties",routeTemplate:"_apis/projects/{projectId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:i,apiVersion:this.propertiesApiVersion})},t}(c);t.CommonMethods3_2To7_1=l;a=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getProjectHistoryEntries=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseType:i.TypeInfo.ProjectInfo,responseIsCollection:!0,queryParams:t,apiVersion:this.projectHistoryApiVersion})},t}(l);t.CommonMethods4To7_1=a;h=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getTeamMembersWithExtendedProperties=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:this.membersApiVersion})},t}(a);t.CommonMethods4_1To7_1=h;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getAllTeams=function(n,t,i,r){var u={$mine:n,$top:t,$skip:i,$expandIdentity:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"7a4d9ee9-3433-4347-b47a-7a80f1cf307e",resource:"teams",routeTemplate:"_apis/{resource}",responseIsCollection:!0,queryParams:u,apiVersion:this.teamsApiVersion_7a4d9ee9})},t.prototype.getTeams=function(n,t,i,r,u){var f={$mine:t,$top:i,$skip:r,$expandIdentity:u};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:f,apiVersion:this.teamsApiVersion})},t.prototype.getTeam=function(n,t,i){var r={$expandIdentity:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},queryParams:r,apiVersion:this.teamsApiVersion})},t.prototype.getProjectsProperties=function(n,t){var i={projectIds:n&&n.join(","),properties:t&&t.join(",")};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"0a3ffdfc-fe94-47a6-bb27-79bf3f762eac",resource:"projectsproperties",routeTemplate:"_apis/{resource}",responseIsCollection:!0,queryParams:i,apiVersion:this.projectspropertiesApiVersion})},t.prototype.setProjectAvatar=function(n,t){return this._beginRequest({httpMethod:"PUT",httpResponseType:"html",area:"core",locationId:"54b2a2a0-859b-4d05-827c-ec4c862f641a",resource:"avatar",routeTemplate:"_apis/projects/{projectId}/{resource}",routeValues:{projectId:t},apiVersion:this.avatarApiVersion,data:n})},t.prototype.removeProjectAvatar=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"core",locationId:"54b2a2a0-859b-4d05-827c-ec4c862f641a",resource:"avatar",routeTemplate:"_apis/projects/{projectId}/{resource}",routeValues:{projectId:n},apiVersion:this.avatarApiVersion})},t}(h);t.CommonMethods5_1To7_1=s;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarApiVersion=r.connectedServicesApiVersion=r.identityMruApiVersion=r.processesApiVersion=r.projectspropertiesApiVersion=r.propertiesApiVersion="7.1-preview.1",r.membersApiVersion=r.projectCollectionsApiVersion=r.projectHistoryApiVersion=r.proxiesApiVersion="7.1-preview.2",r.teamsApiVersion=r.teamsApiVersion_7a4d9ee9="7.1-preview.3",r.projectsApiVersion="7.1-preview.4",r}return __extends(t,n),t}(s);t.CoreHttpClient7_1=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.membersApiVersion=r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="7.0",r.avatarApiVersion=r.connectedServicesApiVersion=r.identityMruApiVersion=r.projectspropertiesApiVersion=r.propertiesApiVersion="7.0-preview.1",r.projectHistoryApiVersion=r.proxiesApiVersion="7.0-preview.2",r.teamsApiVersion_7a4d9ee9="7.0-preview.3",r}return __extends(t,n),t}(s);t.CoreHttpClient7=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.membersApiVersion=r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="6.1",r.avatarApiVersion=r.connectedServicesApiVersion=r.identityMruApiVersion=r.projectspropertiesApiVersion=r.propertiesApiVersion="6.1-preview.1",r.projectHistoryApiVersion=r.proxiesApiVersion="6.1-preview.2",r.teamsApiVersion_7a4d9ee9="6.1-preview.3",r}return __extends(t,n),t}(s);t.CoreHttpClient6_1=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.membersApiVersion=r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="6.0",r.avatarApiVersion=r.connectedServicesApiVersion=r.identityMruApiVersion=r.projectspropertiesApiVersion=r.propertiesApiVersion="6.0-preview.1",r.projectHistoryApiVersion=r.proxiesApiVersion="6.0-preview.2",r.teamsApiVersion_7a4d9ee9="6.0-preview.3",r}return __extends(t,n),t}(s);t.CoreHttpClient6=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.membersApiVersion=r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="5.2",r.avatarApiVersion=r.connectedServicesApiVersion=r.identityMruApiVersion=r.projectspropertiesApiVersion=r.propertiesApiVersion="5.2-preview.1",r.projectHistoryApiVersion=r.proxiesApiVersion="5.2-preview.2",r.teamsApiVersion_7a4d9ee9="5.2-preview.3",r}return __extends(t,n),t}(s);t.CoreHttpClient5_2=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.membersApiVersion=r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="5.1",r.avatarApiVersion=r.connectedServicesApiVersion=r.identityMruApiVersion=r.projectspropertiesApiVersion=r.propertiesApiVersion="5.1-preview.1",r.projectHistoryApiVersion=r.proxiesApiVersion="5.1-preview.2",r.teamsApiVersion_7a4d9ee9="5.1-preview.3",r}return __extends(t,n),t}(s);t.CoreHttpClient5_1=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.membersApiVersion=r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="5.0",r.connectedServicesApiVersion=r.identityMruApiVersion=r.propertiesApiVersion="5.0-preview.1",r.projectHistoryApiVersion=r.proxiesApiVersion="5.0-preview.2",r}return __extends(t,n),t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"5.0"})},t.prototype.getTeams=function(n,t,i,r){var u={$mine:t,$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:u,apiVersion:"5.0"})},t.prototype.getAllTeams=function(n,t,i){var r={$mine:n,$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"7a4d9ee9-3433-4347-b47a-7a80f1cf307e",resource:"teams",routeTemplate:"_apis/{resource}",responseIsCollection:!0,queryParams:r,apiVersion:"5.0-preview.2"})},t}(h);t.CoreHttpClient5=d;g=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.membersApiVersion=r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="4.1",r.connectedServicesApiVersion=r.identityMruApiVersion=r.propertiesApiVersion="4.1-preview.1",r.projectHistoryApiVersion=r.proxiesApiVersion="4.1-preview.2",r}return __extends(t,n),t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"4.1"})},t.prototype.getTeams=function(n,t,i,r){var u={$mine:t,$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:u,apiVersion:"4.1"})},t.prototype.getAllTeams=function(n,t,i){var r={$mine:n,$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"7a4d9ee9-3433-4347-b47a-7a80f1cf307e",resource:"teams",routeTemplate:"_apis/{resource}",responseIsCollection:!0,queryParams:r,apiVersion:"4.1-preview.2"})},t}(h);t.CoreHttpClient4_1=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="4.0",r.connectedServicesApiVersion=r.identityMruApiVersion=r.propertiesApiVersion="4.0-preview.1",r.projectHistoryApiVersion=r.proxiesApiVersion="4.0-preview.2",r}return __extends(t,n),t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:"4.0"})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"4.0"})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:"4.0"})},t}(a);t.CoreHttpClient4=nt;tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="3.2",r.connectedServicesApiVersion=r.identityMruApiVersion=r.propertiesApiVersion="3.2-preview.1",r.proxiesApiVersion="3.2-preview.2",r}return __extends(t,n),t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:"3.2"})},t.prototype.getProjectHistory=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseType:i.TypeInfo.TeamProjectReference,responseIsCollection:!0,queryParams:t,apiVersion:"3.2-preview.2"})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"3.2"})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:"3.2"})},t}(l);t.CoreHttpClient3_2=tt;it=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="3.1",r.connectedServicesApiVersion=r.identityMruApiVersion="3.1-preview.1",r.proxiesApiVersion="3.1-preview.2",r}return __extends(t,n),t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:"3.1"})},t.prototype.getProjectHistory=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseType:i.TypeInfo.TeamProjectReference,responseIsCollection:!0,queryParams:t,apiVersion:"3.1-preview.2"})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"3.1"})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:"3.1"})},t}(c);t.CoreHttpClient3_1=it;rt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="3.0",r.connectedServicesApiVersion=r.identityMruApiVersion=r.proxiesApiVersion="3.0-preview.1",r}return __extends(t,n),t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:"3.0"})},t.prototype.getProjectHistory=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseType:i.TypeInfo.TeamProjectReference,responseIsCollection:!0,queryParams:t,apiVersion:"3.0-preview.2"})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"3.0"})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:"3.0"})},t}(o);t.CoreHttpClient3=rt;ut=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="2.3",r.connectedServicesApiVersion=r.identityMruApiVersion=r.proxiesApiVersion="2.3-preview.1",r}return __extends(t,n),t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:"2.3"})},t.prototype.getProjectHistory=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseType:i.TypeInfo.TeamProjectReference,responseIsCollection:!0,queryParams:t,apiVersion:"2.3-preview.2"})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"2.3"})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:"2.3"})},t}(o);t.CoreHttpClient2_3=ut;ft=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="2.2",r.connectedServicesApiVersion=r.identityMruApiVersion=r.proxiesApiVersion="2.2-preview.1",r}return __extends(t,n),t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:"2.2"})},t.prototype.getProjectHistory=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseType:i.TypeInfo.TeamProjectReference,responseIsCollection:!0,queryParams:t,apiVersion:"2.2-preview.2"})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"2.2"})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:"2.2"})},t}(o);t.CoreHttpClient2_2=ft;et=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="2.1",r.connectedServicesApiVersion=r.identityMruApiVersion=r.proxiesApiVersion="2.1-preview.1",r}return __extends(t,n),t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:"2.1"})},t.prototype.getProjectHistory=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseType:i.TypeInfo.TeamProjectReference,responseIsCollection:!0,queryParams:t,apiVersion:"2.1-preview.2"})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"2.1"})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:"2.1"})},t}(o);t.CoreHttpClient2_1=et;ot=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.processesApiVersion=r.projectCollectionsApiVersion=r.projectsApiVersion=r.teamsApiVersion="2.0",r.connectedServicesApiVersion=r.identityMruApiVersion=r.proxiesApiVersion="2.0-preview.1",r}return __extends(t,n),t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:"2.0"})},t.prototype.getProjectHistory=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseType:i.TypeInfo.TeamProjectReference,responseIsCollection:!0,queryParams:t,apiVersion:"2.0-preview.2"})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:"2.0"})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:"2.0"})},t}(o);t.CoreHttpClient2=ot;ht=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(v);t.CoreHttpClient=ht;st={"7.1":v,"7.0":y,"6.1":p,"6.0":w,"5.2":b,"5.1":k,"5.0":d,"4.1":g,"4.0":nt,"3.2":tt,"3.1":it,"3.0":rt,"2.3":ut,"2.2":ft,"2.1":et,"2.0":ot};t.getClient=ct});

var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};define("Presentation/Scripts/TFS/TeamPanel/Flux/TeamPanelActionsCreator",["require","exports","Presentation/Scripts/TFS/PerformanceTelemetryHelper","Presentation/Scripts/TFS/TeamPanel/TeamPanelContracts","Favorites/RestClient","TFS/Core/RestClient","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Contributions/Services","VSS/Diag","VSS/Error","VSS/Service","VSS/Service","VSS/Telemetry/Services","VSS/VSS","VSS/WebApi/Constants","VSS/Navigation/HubsService"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){Object.defineProperty(t,"__esModule",{value:!0});t.TeamPanelActionsCreator=void 0;var b=200,k="ms.vss-work-web.team-panel-items-data-provider",d="ms.vss-work-web.team-panel",w="Project",g=function(){function n(n){this._actions=n}return n.prototype.initialize=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return a.publishEvent(new a.TelemetryEventData("TeamPanel","TeamPanel_Opened",{}),!0),t=i.PerformanceTelemetryHelper.getInstance("TeamPanel"),t.startScenario("TeamPanel_InitialDataFetch"),[4,Promise.all([this.loadItems(n),this.loadMembers(n)])];case 1:return r.sent(),this._loadTeamImageUrl(n),t.end(),[2]}})})},n.prototype.loadItems=function(n){return __awaiter(this,void 0,void 0,function(){var t,r,u=this;return __generator(this,function(f){switch(f.label){case 0:return this._actions.changeLoadingItems.invoke(!0),[4,this._getDataProviders()];case 1:return t=f.sent(),[4,this._ensureDataProvidersResolved(t.map(function(n){return n.contributionId}),n)];case 2:return f.sent(),[4,Promise.all(t.map(function(t){return u._loadItems(n,t)}))];case 3:return f.sent(),this._actions.changeLoadingItems.invoke(!1),r=i.PerformanceTelemetryHelper.getInstance("TeamPanel"),r.split("Items_Fetched"),[2]}})})},n.prototype.loadMembers=function(n){return __awaiter(this,void 0,void 0,function(){var r,u,e,o,s,c,t;return __generator(this,function(a){switch(a.label){case 0:r=n.projectId;u=n.teamId;e=l.getClient(f.CoreHttpClient);a.label=1;case 1:return a.trys.push([1,3,,4]),[4,e.getTeamMembersWithExtendedProperties(r,u,b)];case 2:return o=a.sent(),this._actions.membersAvailable.invoke(o),s=i.PerformanceTelemetryHelper.getInstance("TeamPanel"),s.split("Members_Fetched"),[3,4];case 3:return c=a.sent(),t=v.getErrorMessage(c),this._actions.membersLoadError.invoke(t),h.publishErrorToTelemetry({name:"loadMembers",message:t}),[3,4];case 4:return[2]}})})},n.prototype.itemNavigated=function(n){var t=c.getLocalService(p.HubsService);t.navigateToHub(n.itemType.hubContributionId,n.item.href);a.publishEvent(new a.TelemetryEventData("TeamPanel","TeamPanel_ItemNavigated",__assign({},n.itemType)),!0)},n.prototype._loadTeamImageUrl=function(n){var t=e.TfsContext.getDefault().getIdentityImageUrl(n.teamId);this._actions.teamImageUrlAvailable.invoke(t)},n.prototype._loadItems=function(n,t){return __awaiter(this,void 0,void 0,function(){var n,u,f,i,e,s,r;return __generator(this,function(c){switch(c.label){case 0:n=t.itemGroup;u=t.contributionId;f=l.getService(o.WebPageDataService);c.label=1;case 1:return c.trys.push([1,3,,4]),[4,f.getPageData(u)];case 2:return i=c.sent()||{items:[],error:null},i.error&&this._actions.itemsLoadError.invoke({itemGroup:n,error:i.error}),e={items:i.items||[],itemGroup:n},this._actions.itemsAvailable.invoke(e),[3,4];case 3:return s=c.sent(),r=v.getErrorMessage(s),this._actions.itemsLoadError.invoke({itemGroup:n,error:r}),h.publishErrorToTelemetry({name:"loadItems",message:r}),[3,4];case 4:return[2]}})})},n.prototype.setActiveView=function(n){this._actions.changeActiveView.invoke(n)},n.prototype.filterItems=function(n){this._actions.filterChanged.invoke({itemGroup:n})},n.prototype.clearFilter=function(){this._actions.clearFilter.invoke(null)},n.prototype.toggleFavorite=function(n,t){n.item.favorite?this._unfavoriteItem(n,t):this._favoriteItem(n,t)},n.prototype._favoriteItem=function(n,t){var i=this;return this._createFavorite(n.item.artifactId,n.item.name,n.itemType.favoriteType,t).then(function(t){i._actions.favoriteUpdated.invoke({panelItem:n,favorite:t})},function(n){n&&h.publishErrorToTelemetry(n);i._actions.favoriteFailed.invoke(n.message)})},n.prototype._unfavoriteItem=function(n,t){var i=this;return this._deleteFavorite(n.item.favorite.id,n.itemType.favoriteType,t).then(function(){i._actions.favoriteUpdated.invoke({panelItem:n,favorite:null})},function(n){n&&h.publishErrorToTelemetry(n);i._actions.favoriteFailed.invoke(n.message)})},n.prototype._createFavorite=function(n,t,i,r){return __awaiter(this,void 0,void 0,function(){var f;return __generator(this,function(){return f={artifactId:n,artifactProperties:{},artifactName:t,artifactType:i,artifactScope:{id:r,type:w,name:null}},[2,u.getClient().createFavorite(f)]})})},n.prototype._deleteFavorite=function(n,t,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,u.getClient().deleteFavoriteById(n,t,w,i)]})})},n.prototype._getDataProviders=function(){return __awaiter(this,void 0,void 0,function(){var n,t,i=this;return __generator(this,function(r){switch(r.label){case 0:return[4,c.getService(o.ExtensionService).getContributionsForTarget(d,k)];case 1:return n=r.sent(),[4,Promise.all(n.map(function(n){return i._getDataProvider(n)}))];case 2:return t=r.sent(),[2,t.filter(function(n){return!!n})]}})})},n.prototype._getDataProvider=function(n){return __awaiter(this,void 0,void 0,function(){var u,t,i,f,r,e;return __generator(this,function(){return u=n.properties.hubContributionId,t=n.properties.hub,i=n.properties.hubGroup,f=n.properties.favoriteType,r=n.properties.order,e={hubContributionId:u,hub:t,hubGroup:i,favoriteType:f,order:r},[2,{itemGroup:e,contributionId:n.id}]})})},n.prototype._ensureDataProvidersResolved=function(n,t){return __awaiter(this,void 0,void 0,function(){var u,f,e,i;return __generator(this,function(){return u=n.map(function(n){return{id:n,properties:{serviceInstanceType:y.ServiceInstanceTypes.TFS,teamId:t.teamId,projectId:t.projectId}}}),f=l.getService(o.WebPageDataService),e=(i={},i[r.TeamPanelConstants.TeamId]=t.teamId,i[r.TeamPanelConstants.TeamName]=t.teamName,i[r.TeamPanelConstants.ProjectId]=t.projectId,i[r.TeamPanelConstants.ProjectName]=t.projectName,i),[2,f.ensureDataProvidersResolved(u,!0,e)]})})},n}();t.TeamPanelActionsCreator=g});

define("Presentation/Scripts/TFS/TeamPanel/Flux/TeamPanelSelector",["require","exports","VSS/Utils/String"],function(n,t,i){function r(n){var l,a,p=n.activeView,r=n.members,o=n.itemsMap,c=n.filter,w=n.loadingItems,v=n.favoriteErrors,b=n.teamImageUrl,t={activeView:p,loading:w,teamImageUrl:b,items:[],admins:[],members:[],filter:c,itemGroups:[],errors:[],membersCount:undefined,itemGroupsWithItems:[]},y,h;return r&&(r.loading?t.loading=!0:r.error?t.errors.push(r.error):r.data&&(r.data.sort(function(n,t){return i.ignoreCaseComparer(n.identity.displayName,t.identity.displayName)}),t.admins=r.data.filter(function(n){return n.isTeamAdmin}),t.members=r.data.filter(function(n){return!n.isTeamAdmin}),t.membersCount=r.data.length)),o&&(Object.keys(o).some(function(n){return o[n].loading})?t.loading=!0:(y=u(o),(l=t.errors).push.apply(l,y),h=f(o),t.itemGroups=e(o),t.itemGroupsWithItems=t.itemGroups.filter(function(n){return h.some(function(t){return t.itemType.hub===n.hub})}),t.items=c?h.filter(function(n){return s(c,n)}):h)),v&&(a=t.errors).push.apply(a,v),t}function u(n){var t=Object.keys(n);return t.reduce(function(t,i){var r=n[i];return r&&r.error&&t.push(r.error),t},[])}function f(n){var t=o(n);return t.sort(function(n,t){var r=n.itemType.order-t.itemType.order;return r!==0?r:i.ignoreCaseComparer(n.item.name,t.item.name)}),t}function e(n){var t=[];for(var i in n)t.push(n[i].data.itemGroup);return t}function o(n){var t=Object.keys(n);return t.reduce(function(t,i){var r=n[i]&&n[i].data;return r&&r.items&&t.push.apply(t,r.items.map(function(n){return{item:n,itemType:r.itemGroup}})),t},[])}function s(n,t){var r=n.itemGroup,u;return r&&(u=r.hub,!i.equals(t.itemType.hub,u,!0))?!1:!0}Object.defineProperty(t,"__esModule",{value:!0});t.getTeamPanelViewState=void 0;t.getTeamPanelViewState=r});

define("Presentation/Scripts/TFS/TeamPanel/Flux/TeamPanelStore",["require","exports","VSS/Flux/Store"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.TeamPanelStore=void 0;var r=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._handleStartLoadingMembers=function(n){i._members=__assign(__assign({},i._members),{loading:n});i.emitChanged()},i._handleMembersLoadError=function(n){i._members={loading:!1,error:n};i.emitChanged()},i._handleMembersAvailable=function(n){i._members={loading:!1,error:null,data:n};i.emitChanged()},i._handleChangeLoadingItems=function(n){i._loadingItems=n;i.emitChanged()},i._handleItemsLoadError=function(n){var r=n.itemGroup,u=n.error,t=r.hub;i._items[t]=__assign(__assign({},i._items[t]),{error:u});i.emitChanged()},i._handleItemsAvailable=function(n){var t=n.itemGroup,r=n.items,u=t.hub;i._items[u]={data:{itemGroup:t,items:r}};i.emitChanged()},i._handleFavoriteUpdated=function(n){var t=i._items[n.panelItem.itemType.hub].data.items,r=t.find(function(t){return t.artifactId===n.panelItem.item.artifactId});r.favorite=n.favorite;i.emitChanged()},i._handleFavoriteError=function(n){i._favoriteErrors.push(n);i.emitChanged()},i._handleSetFilter=function(n){i._filter=n;i.emitChanged()},i._handleClearFilter=function(){i._filter=null;i.emitChanged()},i._handleChangeActiveView=function(n){i._activeView=n;i.emitChanged()},i._handleTeamImageUrlAvailable=function(n){i._teamImageUrl=n;i.emitChanged()},i._activeView=0,i._items={},i._members={},i._filter=null,i._loadingItems=!1,i._favoriteErrors=[],t.startLoadingMembers.addListener(i._handleStartLoadingMembers),t.membersLoadError.addListener(i._handleMembersLoadError),t.membersAvailable.addListener(i._handleMembersAvailable),t.changeLoadingItems.addListener(i._handleChangeLoadingItems),t.itemsLoadError.addListener(i._handleItemsLoadError),t.itemsAvailable.addListener(i._handleItemsAvailable),t.favoriteUpdated.addListener(i._handleFavoriteUpdated),t.favoriteFailed.addListener(i._handleFavoriteError),t.filterChanged.addListener(i._handleSetFilter),t.clearFilter.addListener(i._handleClearFilter),t.changeActiveView.addListener(i._handleChangeActiveView),t.teamImageUrlAvailable.addListener(i._handleTeamImageUrlAvailable),i}return __extends(t,n),t.prototype.getState=function(){return{activeView:this._activeView,itemsMap:this._items,members:this._members,filter:this._filter,loadingItems:this._loadingItems,favoriteErrors:this._favoriteErrors,teamImageUrl:this._teamImageUrl}},t}(i.Store);t.TeamPanelStore=r});

define("Favorites/Controls/FavoriteStar",["require","exports","react","VSS/Utils/UI","Favorites/Resources/TFS.Resources.Favorites","VSSUI/Tooltip","Favorites/FavoritesService","VSS/LoaderPlugins/Css!Favorites"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.FavoriteStar=void 0;var o=function(n){var s=function(t){(t.which===r.KeyCode.ENTER||t.which===r.KeyCode.SPACE)&&(n.onToggle(),t.preventDefault(),t.stopPropagation())},h=function(t){n.onToggle();t.currentTarget.blur();t.preventDefault();t.stopPropagation()},t="starbutton bowtie-icon",o;return(n.className&&(t="".concat(t," ").concat(n.className)),!e.canUseFavorites())?i.createElement("div",{className:t}):(t+=n.isDeleted?" bowtie-edit-remove":n.isFavorite?" bowtie-favorite":" bowtie-favorite-outline",o=n.isFavorite?u.FavoriteStarFavoritedTitle:u.FavoriteStarUnfavoritedTitle,i.createElement(f.TooltipHost,{content:o},i.createElement("div",{title:n.title||null,"aria-label":o,"aria-pressed":n.isFavorite,tabIndex:0,role:"button",className:t,onClick:h,onKeyDown:s})))};t.FavoriteStar=o});

define("VSS/Identities/Picker/PersonaCardContracts",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.personaCardEntity=t.CardType=void 0,function(n){n[n.Default=0]="Default";n[n.Contact=1]="Contact";n[n.Organization=2]="Organization"}(i=t.CardType||(t.CardType={})),function(n){n.contactCard="ContactCard";n.clicked="Clicked";n.featureName="PersonaCard";n.loaded="Loaded";n.orgCard="OrgCard";n.orgCardManagerChain="OrgCardManagerChain";n.orgCardDirectReport="OrgCardDirectReport";n.personaCard="PersonaCard";n.reportingManager="ReportingManager"}(r=t.personaCardEntity||(t.personaCardEntity={}))});

define("VSS/Identities/Picker/ContactCard",["require","exports","react","OfficeFabric/Label","VSS/Identities/Picker/PersonaCardContracts","VSS/Resources/VSS.Resources.Platform","VSS/Utils/String","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e){var o,s;Object.defineProperty(t,"__esModule",{value:!0});t.ContactCard=t.ContactCardContactLine=void 0;o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this;return i.createElement("div",null,i.createElement("div",{className:this.props.padTop?"contact-card-line-top":"contact-card-line"},i.createElement("div",{className:"contact-card-span-label"},this.props.label),i.createElement("div",{className:"contact-card-span-content"},this.props.link&&this.props.content&&i.createElement("a",{className:"profile-card-tab-element",href:this.props.link,onClick:function(){n.props.publishTelemetry(e.format("{0}",n.props.label),u.personaCardEntity.clicked)}},this.props.content),!this.props.link&&this.props.content)),i.createElement("div",{style:{clear:"both"}}))},t}(i.Component);t.ContactCardContactLine=o;s=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this.props.identity;return i.createElement("div",{className:"contact-or-organization-card-wrapper"},i.createElement("div",{className:"contact-card-header-wrapper"},i.createElement("div",{style:{fontSize:14}},i.createElement(r.Label,null,f.ProfileCard_ContactInformation))),i.createElement("div",{className:"contact-card-info-wrapper"},i.createElement(o,{label:f.ProfileCard_Email,content:n.mail,link:"mailto:"+n.mail,publishTelemetry:this.props.publishTelemetry}),i.createElement(o,{label:f.ProfileCard_TelephoneNumber,content:n.telephoneNumber,link:"tel:"+n.telephoneNumber,publishTelemetry:this.props.publishTelemetry}),i.createElement(o,{label:f.ProfileCard_PhysicalDeliveryOfficeName,content:n.physicalDeliveryOfficeName}),i.createElement(o,{label:f.ProfileCard_JobTitle,content:n.jobTitle,padTop:!0}),i.createElement(o,{label:f.ProfileCard_Department,content:n.department}),i.createElement(o,{label:f.ProfileCard_Alias,content:n.mailNickname})))},t}(i.Component);t.ContactCard=s});

define("VSS/Identities/Picker/DefaultCard",["require","exports","react","OfficeFabric/Icon","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Label","OfficeFabric/Tooltip","VSS/Identities/Picker/PersonaCardContracts","VSS/Resources/VSS.Resources.Platform","VSS/Utils/String","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o,s,h,c){var l,a;Object.defineProperty(t,"__esModule",{value:!0});t.DefaultCard=t.DefaultCardContactLine=void 0;l=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this;return i.createElement("div",{className:"default-card-contact-line-wrapper"},i.createElement(e.Label,{className:"default-card-contact-line"},i.createElement(r.Icon,{iconName:this.props.iconName,className:"default-card-contact-line-label"}),this.props.link&&i.createElement("a",{href:this.props.link,className:"default-card-contact-line-link profile-card-tab-element",onClick:function(){n.props.publishTelemetry(c.format("{0}",n.props.iconName),s.personaCardEntity.clicked)}},this.props.content),!this.props.link&&i.createElement("span",{className:"default-card-contact-line-no-link"},this.props.content)))},t}(i.Component);t.DefaultCardContactLine=l;a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.componentDidMount=function(){this.props.setFocus&&this.props.setFocus()},t.prototype.render=function(){var r=this,v=this.props,n=v.identity,p=v.isPreviousHeader,c={imageUrl:this.props.identity.image,primaryText:this.props.identity.displayName,secondaryText:this.props.identity.jobTitle,tertiaryText:this.props.identity.department},w=i.createElement("div",null,i.createElement(u.Persona,__assign({},c,{key:this.props.identity.entityId+this.props.identity.signInAddress,size:f.PersonaSize.large,className:"persona-main",onRenderPrimaryText:function(){return i.createElement(o.TooltipHost,{key:"".concat(r.props.identity.entityId,".primarytext.tooltip"),content:c.primaryText,overflowMode:o.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-primary"},c.primaryText))},onRenderSecondaryText:function(){return i.createElement(o.TooltipHost,{key:"".concat(r.props.identity.entityId,".secondarytext.tooltip"),content:c.secondaryText,overflowMode:o.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-secondary"},c.secondaryText))},onRenderTertiaryText:function(){return i.createElement("div",{className:"persona-main-text-tertiary"},c.tertiaryText)},imageShouldFadeIn:!1}))),y=null,t,a;return this.props.manager&&(t=this.props.manager,a={imageUrl:t.image,primaryText:t.displayName,secondaryText:t.jobTitle,tertiaryText:t.department},y=i.createElement("div",{className:"persona-list-manager-element profile-card-tab-element","aria-label":t.displayName,key:t.entityId+t.signInAddress,onClick:function(){r.props.publishTelemetry(s.personaCardEntity.personaCard,s.personaCardEntity.loaded,s.personaCardEntity.reportingManager);r.props.onClickEntity(t)},"data-is-focusable":!0,role:"button"},i.createElement(u.Persona,__assign({},a,{size:f.PersonaSize.size40,onRenderPrimaryText:function(){return i.createElement("div",{className:"persona-list-element-text-primary"},a.primaryText)},onRenderSecondaryText:function(){return i.createElement("div",{className:"persona-list-element-text-secondary"},a.secondaryText)},imageShouldFadeIn:!1})))),i.createElement("div",{className:p?"default-card-with-header":"default-card-without-header"},w,i.createElement("div",null,(n.mail||n.telephoneNumber||n.physicalDeliveryOfficeName)&&i.createElement("div",{className:"default-card-contact-info-wrapper"},i.createElement("hr",{className:"hr-main"}),i.createElement("div",{className:"default-card-header-wrapper"},i.createElement("span",{className:"default-card-header pointer profile-card-tab-element",onClick:function(){r.props.publishTelemetry(s.personaCardEntity.contactCard,s.personaCardEntity.loaded);r.props.showContactCard()},"aria-label":h.ProfileCard_ContactHeader,"data-is-focusable":!0,role:"button"},i.createElement(e.Label,{className:"pointer"},i.createElement("b",{className:"default-card-header-space"},h.ProfileCard_ContactHeader),i.createElement("span",{className:"icon bowtie-icon bowtie-chevron-right-light default-card-header-chevron"})))),i.createElement("div",{className:"default-card-contact-info-container"},n.mail&&i.createElement(l,{iconName:"Mail",content:n.mail,link:"mailto:"+n.mail,publishTelemetry:this.props.publishTelemetry}),n.mail&&i.createElement(l,{iconName:"Chat",content:h.ProfileCard_SendChat,link:"sip:"+n.mail,publishTelemetry:this.props.publishTelemetry}),n.telephoneNumber&&i.createElement(l,{iconName:"Phone",content:n.telephoneNumber,link:"tel:"+n.telephoneNumber,publishTelemetry:this.props.publishTelemetry}),n.physicalDeliveryOfficeName&&i.createElement(l,{iconName:"POI",content:n.physicalDeliveryOfficeName}))),this._renderDirectManagerElement(y)))},t.prototype._renderDirectManagerElement=function(n){var t=this;return n?i.createElement("div",{className:"default-card-direct-manager-wrapper"},i.createElement("hr",{className:"hr-secondary"}),i.createElement("div",{className:"default-card-header-wrapper"},i.createElement("span",{className:"default-card-header pointer profile-card-tab-element",onClick:function(){t.props.publishTelemetry(s.personaCardEntity.orgCard,s.personaCardEntity.loaded);t.props.showOrganizationCard()},"aria-label":h.ProfileCard_Organization,"data-is-focusable":!0,role:"button"},i.createElement(e.Label,{className:"pointer"},i.createElement("b",{className:"default-card-header-space"},h.ProfileCard_Organization),i.createElement("span",{className:"icon bowtie-icon bowtie-chevron-right-light default-card-header-chevron"})))),i.createElement("div",{className:"default-card-direct-manager"},i.createElement("div",{className:"default-card-header-reportsto"},h.ProfileCard_ReportsToHeader),n)):null},t}(i.Component);t.DefaultCard=a});

define("VSS/Identities/Picker/DefaultAbridgedCard",["require","exports","react","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Label","OfficeFabric/Tooltip","VSS/Identities/Picker/DefaultCard","VSS/Resources/VSS.Resources.Platform","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.DefaultAbridgedCard=void 0;var h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var t=this,n={imageUrl:this.props.identity.image,primaryText:this.props.identity.displayName},h=i.createElement("div",null,i.createElement(r.Persona,__assign({},n,{key:this.props.identity.entityId,size:u.PersonaSize.large,className:"persona-main",onRenderPrimaryText:function(){return i.createElement(e.TooltipHost,{key:"".concat(t.props.identity.entityId,".primarytext.tooltip"),content:n.primaryText,overflowMode:e.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-primary"},n.primaryText))},imageShouldFadeIn:!1})));return i.createElement("div",{className:"default-card-abridged"},h,this._verifySignInAddress()&&i.createElement("div",null,i.createElement("div",{className:"default-card-contact-info-wrapper"},i.createElement("hr",{className:"hr-main"}),i.createElement("div",{className:"default-card-header-wrapper"},i.createElement("span",{className:"default-card-header"},i.createElement(f.Label,null,i.createElement("b",{className:"default-card-header-space"},s.ProfileCard_ContactHeader)))),i.createElement("div",{className:"default-card-contact-info-container"},i.createElement(o.DefaultCardContactLine,{iconName:"Mail",content:this.props.identity.signInAddress,link:"mailto:"+this.props.identity.signInAddress,publishTelemetry:this.props.publishTelemetry}),i.createElement(o.DefaultCardContactLine,{iconName:"Chat",content:s.ProfileCard_SendChat,link:"sip:"+this.props.identity.signInAddress,publishTelemetry:this.props.publishTelemetry})))))},t.prototype._verifySignInAddress=function(){if(!this.props.identity.signInAddress)return!1;return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(this.props.identity.signInAddress)?!0:!1},t}(i.Component);t.DefaultAbridgedCard=h});

define("VSS/Identities/Picker/DefaultSimpleCard",["require","exports","react","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Tooltip","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.DefaultSimpleCard=void 0;var e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var t=this,n={imageUrl:this.props.identity.image,primaryText:this.props.identity.displayName,secondaryText:this.props.identity.scopeName&&this.props.identity.signInAddress?this.props.identity.scopeName+"\\"+this.props.identity.signInAddress:this.props.identity.signInAddress?this.props.identity.signInAddress:""};return i.createElement("div",{className:"default-card-simple"},i.createElement("div",null,i.createElement(r.Persona,__assign({},n,{key:this.props.identity.entityId,size:u.PersonaSize.large,className:"persona-main",onRenderPrimaryText:function(){return i.createElement(f.TooltipHost,{key:"".concat(t.props.identity.entityId,".primarytext.tooltip"),content:n.primaryText,overflowMode:f.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-primary"},n.primaryText))},onRenderSecondaryText:function(){return i.createElement(f.TooltipHost,{key:"".concat(t.props.identity.entityId,".secondarytext.tooltip"),content:n.secondaryText,overflowMode:f.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-secondary"},n.secondaryText))},imageShouldFadeIn:!1}))))},t}(i.Component);t.DefaultSimpleCard=e});

define("VSS/Identities/Picker/OrganizationCard",["require","exports","react","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Label","VSS/Identities/Picker/PersonaCardContracts","VSS/Resources/VSS.Resources.Platform","VSS/Utils/String","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.OrganizationCard=void 0;var h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this.props,u=n.identity,e=n.managerList,h=n.directReportList,r=this.createManagerChainPersonaElements(),t=this.createDirectReportsPersonaElements();return i.createElement("div",{className:"contact-or-organization-card-wrapper"},i.createElement("div",{className:"organization-card-content"},i.createElement("div",{className:"organization-card-header-wrapper"},i.createElement("div",{style:{fontSize:14}},i.createElement(f.Label,null,o.ProfileCard_Organization))),i.createElement("div",{className:"organization-card-manager-chain-wrapper"},r),t.length>0&&i.createElement("div",{className:"organization-card-direct-reports-wrapper"},i.createElement(f.Label,{className:"organization-card-direct-reports-label"},s.format(o.ProfileCard_ReportingToPhrase,this.props.identity.displayName,this.props.directReportList.length)),t)))},t.prototype.createManagerChainPersonaElements=function(){var o=this,n=this,f=this.props.managerList.map(function(t){var f={imageUrl:t.image,primaryText:t.displayName?t.displayName:"",secondaryText:t.jobTitle?t.jobTitle:"",tertiaryText:t.department?t.department:""};return i.createElement("div",{className:"persona-list-element profile-card-tab-element","aria-label":t.displayName,key:t.entityId+t.signInAddress,onClick:function(){n.props.publishTelemetry(e.personaCardEntity.orgCardManagerChain,e.personaCardEntity.loaded,e.personaCardEntity.orgCard);n.props.onClickEntity(t)},"data-is-focusable":!0,role:"button"},i.createElement(r.Persona,__assign({},f,{size:u.PersonaSize.size40,onRenderPrimaryText:function(){return i.createElement("div",{className:"persona-list-element-text-primary"},f.primaryText)},onRenderSecondaryText:function(){return i.createElement("div",{className:"persona-list-element-text-secondary"},f.secondaryText)},imageShouldFadeIn:!1})))}),t={imageUrl:this.props.identity.image,primaryText:this.props.identity.displayName,secondaryText:this.props.identity.jobTitle,tertiaryText:this.props.identity.department};return f.push(i.createElement("div",{className:"persona-list-element profile-card-tab-element","aria-label":this.props.identity.displayName,key:this.props.identity.entityId+this.props.identity.signInAddress,onClick:function(){n.props.publishTelemetry(e.personaCardEntity.personaCard,e.personaCardEntity.loaded,e.personaCardEntity.orgCard);n.props.onClickEntity(o.props.identity)},"data-is-focusable":!0,role:"button"},i.createElement(r.Persona,__assign({},t,{size:u.PersonaSize.size40,onRenderPrimaryText:function(){return i.createElement("div",{className:"persona-list-element-text-primary"},t.primaryText)},onRenderSecondaryText:function(){return i.createElement("div",{className:"persona-list-element-text-secondary"},t.secondaryText)},imageShouldFadeIn:!1})))),f},t.prototype.createDirectReportsPersonaElements=function(){var n=this;return this.props.directReportList.map(function(t){var f={imageUrl:t.image,primaryText:t.displayName?t.displayName:"",secondaryText:t.jobTitle?t.jobTitle:"",tertiaryText:t.department?t.department:""};return i.createElement("div",{className:"persona-list-element profile-card-tab-element","aria-label":t.displayName,key:t.entityId+t.signInAddress,onClick:function(){n.props.publishTelemetry(e.personaCardEntity.orgCardDirectReport,e.personaCardEntity.loaded,e.personaCardEntity.orgCard);n.props.onClickEntity(t)},"data-is-focusable":!0,role:"button"},i.createElement(r.Persona,__assign({},f,{size:u.PersonaSize.size40,onRenderPrimaryText:function(){return i.createElement("div",{className:"persona-list-element-text-primary"},f.primaryText)},onRenderSecondaryText:function(){return i.createElement("div",{className:"persona-list-element-text-secondary"},f.secondaryText)},imageShouldFadeIn:!1})))})},t}(i.Component);t.OrganizationCard=h});

define("VSS/Identities/Picker/PersonaCardIdentityUtils",["require","exports","VSS/Identities/Picker/Services"],function(n,t,i){function s(n){return n?r(n)||u(n)?!!(n.mail||n.mailNickname||n.jobTitle||n.department||n.physicalDeliveryOfficeName||n.manager||n.surname||n.telephoneNumber):f(n)||e(n)?!!n.signInAddress:o(n)?!!(n.scopeName||n.signInAddress):!1:!1}function r(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.AzureActiveDirectory}function u(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.ActiveDirectory}function f(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.VisualStudioDirectory}function e(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.GitHubDirectory}function o(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.WindowsMachineDirectory}Object.defineProperty(t,"__esModule",{value:!0});t.isWmdUser=t.isGitHubUser=t.isVsdUser=t.isAdUser=t.isAadUser=t.isCompleteIdentity=void 0;t.isCompleteIdentity=s;t.isAadUser=r;t.isAdUser=u;t.isVsdUser=f;t.isGitHubUser=e;t.isWmdUser=o});

define("VSS/Identities/Picker/PersonaCardHeaderElement",["require","exports","react","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Icon","OfficeFabric/Tooltip","VSS/Resources/VSS.Resources.Platform","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.PersonaCardHeaderElement=void 0;var s=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.componentDidMount=function(){this.props.setFocus()},t.prototype.componentDidUpdate=function(){this.props.setFocus()},t.prototype.render=function(){var s=this,n,t;return this.props.identity?(n=this.props.identity,t={imageUrl:n.image,primaryText:n.displayName,secondaryText:n.jobTitle,tertiaryText:n.department},i.createElement("div",{className:"go-back-persona-wrapper",onClick:this.props.onClickFunction,"aria-label":o.ProfileCard_HeaderButtonAriaLabel,ref:function(n){s._personaElement=n},"data-is-focusable":!0,role:"button"},i.createElement("div",null,i.createElement(f.Icon,{iconName:"ChevronLeft",className:"go-back-chevron"})),i.createElement("div",{className:"go-back-positioning"},i.createElement(r.Persona,__assign({},t,{size:u.PersonaSize.extraExtraSmall,className:"go-back-persona",onRenderPrimaryText:function(){return i.createElement(e.TooltipHost,{key:"".concat(n.entityId,".tooltip"),content:n.displayName,overflowMode:e.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-header-text-primary"},n.displayName))},imageShouldFadeIn:!1}))))):null},t.prototype.setFocus=function(){this._personaElement&&this._personaElement.focus()},t}(i.Component);t.PersonaCardHeaderElement=s});

define("VSS/Identities/Picker/PersonaCardContent",["require","exports","react","OfficeFabric/Callout","OfficeFabric/FocusZone","OfficeFabric/Spinner","OfficeFabric/Utilities","VSS/Context","VSS/Identities/Picker/ContactCard","VSS/Identities/Picker/DefaultAbridgedCard","VSS/Identities/Picker/DefaultSimpleCard","VSS/Identities/Picker/DefaultCard","VSS/Identities/Picker/OrganizationCard","VSS/Identities/Picker/PersonaCardContracts","VSS/Identities/Picker/PersonaCardIdentityUtils","VSS/Identities/Picker/PersonaCardHeaderElement","VSS/Resources/VSS.Resources.Platform","VSS/Telemetry/Services","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){Object.defineProperty(t,"__esModule",{value:!0});t.PersonaCardContent=void 0;var d=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.componentDidMount=function(){this._publishTelemetry(v.personaCardEntity.personaCard,v.personaCardEntity.loaded)},t.prototype.componentDidUpdate=function(){var n=y.isVsdUser(this.props.dataProps.identity);this.props.dataProps.header||n||this._focusOnUpdate()},t.prototype.render=function(){var n=this.props.referenceHTMLComponent?this.props.referenceHTMLComponent:this.props.target;return i.createElement("div",null,i.createElement(r.Callout,{onDismiss:this._onDismissCallout,target:n,ariaLabel:w.ProfileCard_AriaLabel,role:"alert",isBeakVisible:!1,gapSpace:10,className:"persona-card-callout"},i.createElement("div",null,this._renderCard())))},t.prototype._renderCard=function(){var n="persona-card-styles";if(this.props.working&&!y.isCompleteIdentity(this.props.dataProps.identity))return i.createElement("div",{className:e.css(n,"loading")},i.createElement(e.DelayedRender,{delay:300},i.createElement(f.Spinner,{label:w.Loading,type:f.SpinnerType.large,className:"persona-card-loading-spinner"})));var r=y.isAdUser(this.props.dataProps.identity)||y.isAadUser(this.props.dataProps.identity),t=this.props.dataProps.header||null,o=this.props.dataProps.cardType===v.CardType.Organization?u.FocusZoneDirection.vertical:u.FocusZoneDirection.horizontal;return i.createElement(u.FocusZone,{className:n,handleTabKey:1,isCircularNavigation:!0,componentRef:this._onFocusZoneRef,direction:o},r&&t&&i.createElement(p.PersonaCardHeaderElement,{identity:t,onClickFunction:this.props.onHeaderClick,setFocus:this._focusOnUpdate}),this._renderInnerCard())},t.prototype._onFocusZoneRef=function(n){this._focusZone=n;this._focusOnUpdate()},t.prototype._focusOnUpdate=function(){var t=this.props.dataProps.directReportList,n=this.props.dataProps.identity,i=y.isAadUser(n),r=y.isAdUser(n),u=y.isVsdUser(n);this.props.dataProps.cardType===v.CardType.Default&&t?this._focusZone.focus():this.props.dataProps.cardType!==v.CardType.Default&&this._focusZone.focus()},t.prototype._renderInnerCard=function(){var r=this.props.dataProps,n=r.identity,t=r.managerList,f=r.directReportList,u;if(!n)return null;var e=y.isVsdUser(n),o=y.isWmdUser(n),p=y.isAadUser(n),w=y.isAdUser(n);if(e)return i.createElement(h.DefaultAbridgedCard,{identity:n,publishTelemetry:this._publishTelemetry});if(o)return i.createElement(c.DefaultSimpleCard,{identity:n});if(p||w)switch(this.props.dataProps.cardType){case v.CardType.Default:return u=t&&t.length>0?t[t.length-1]:null,i.createElement(l.DefaultCard,{identity:n,manager:u,isPreviousHeader:!!this.props.dataProps.previousDataState||!!this.props.initialHeader,showContactCard:this.props.onShowContactCard,showOrganizationCard:this.props.onShowOrganizationCard,onClickEntity:this.props.onClickEntity,publishTelemetry:this._publishTelemetry,setFocus:this._focusOnUpdate});case v.CardType.Contact:return i.createElement(s.ContactCard,{identity:n,publishTelemetry:this._publishTelemetry});case v.CardType.Organization:return i.createElement(a.OrganizationCard,{identity:n,managerList:t,directReportList:f,onClickEntity:this.props.onClickEntity,publishTelemetry:this._publishTelemetry})}return null},t.prototype._onDismissCallout=function(){this.props.onDismissCallback&&this.props.onDismissCallback()},t.prototype._publishTelemetry=function(n,t,i){var u=o.getPageContext().navigation.routeId,r={Action:k.format("{0}{1}",n,t)};this.props.consumer&&(r.Consumer=this.props.consumer);i&&(r.Source=i);b.publishEvent(new b.TelemetryEventData(u,v.personaCardEntity.featureName,r))},__decorate([e.autobind],t.prototype,"_onFocusZoneRef",null),__decorate([e.autobind],t.prototype,"_focusOnUpdate",null),__decorate([e.autobind],t.prototype,"_onDismissCallout",null),__decorate([e.autobind],t.prototype,"_publishTelemetry",null),t}(i.Component);t.PersonaCardContent=d});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("VSS/Identities/Picker/PersonaCard",["require","exports","react","OfficeFabric/Utilities","VSS/Context","VSS/Diag","VSS/Identities/Picker/Constants","VSS/Identities/Picker/PersonaCardContent","VSS/Identities/Picker/PersonaCardContracts","VSS/Identities/Picker/PersonaCardIdentityUtils","VSS/Identities/Picker/Services","VSS/Performance","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Telemetry/Services","VSS/Utils/String","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var w,b;Object.defineProperty(t,"__esModule",{value:!0});t.PersonaCard=t.managerConnectionType=t.managerAndDirectReportsConnectionType=t.userIdentityType=t.sourceImsAdOperationScope=t.sourceImsOperationScope=t.sourceAdOperationScope=t.sourceOperationScope=void 0;t.sourceOperationScope={Source:!0};t.sourceAdOperationScope={Source:!0,AD:!0};t.sourceImsOperationScope={Source:!0,IMS:!0};t.sourceImsAdOperationScope={Source:!0,IMS:!0,AD:!0};t.userIdentityType={User:!0};t.managerAndDirectReportsConnectionType={managers:!0,directReports:!0};t.managerConnectionType={managers:!0};w=function(n){return(n.uniqueAttribute||n.identity||n.displayName)&&!h.isGitHubUser(n.identity)?i.createElement(b,__assign({},n)):null};t.PersonaCard=w;b=function(n){function w(t){var i=__construct(this,n,[t]),u,r,f;for(u in i)i.hasOwnProperty(u)&&(this[u]=i[u]);return i._IdentityService=v.getService(c.IdentityService),r={identity:t.identity,managerList:null,directReportList:null,previousDataState:null,cardType:s.CardType.Default,header:t.initialHeader?t.initialHeader.identity:null,displayName:t.displayName,imageUrl:t.imageUrl,email:i._getEmail()},f=!0,t.identity||t.uniqueAttribute||!t.displayName||(r.identity={entityId:"",entityType:"user",originDirectory:"vsd",originId:"",displayName:t.displayName,image:t.imageUrl,signInAddress:r.email},f=!1),i.state={dataState:r,working:f},f&&i._setupInitialData(r,t.uniqueAttribute),i}return __extends(w,n),w.prototype.componentDidMount=function(){this._routeId=u.getPageContext().navigation.routeId;this._scenarioDescriptor=l.getScenarioManager().startScenario(this._routeId,s.personaCardEntity.featureName)},w.prototype.componentDidUpdate=function(n,t){this._scenarioDescriptor.isActive()&&(this.state.dataState.cardType===s.CardType.Default?this.state.working&&t.working?(this._contactSectionLoad=l.getTimestamp(),this._scenarioDescriptor.addSplitTiming("ContactSectionLoaded",this._contactSectionLoad-this._scenarioDescriptor.getStartTime())):!this.state.working&&t.working&&this._scenarioDescriptor.addSplitTiming("ManagerSectionLoaded",l.getTimestamp()-this._contactSectionLoad):this.state.dataState.cardType===s.CardType.Organization&&(this.state.working&&!t.working?this._orgCardLoad=l.getTimestamp():!this.state.working&&t.working&&this._scenarioDescriptor.addSplitTiming("ManagerAndReportsToChainLoaded",l.getTimestamp()-this._orgCardLoad)))},w.prototype.componentWillUnmount=function(){this._dismissed=!0;this._scenarioDescriptor.isActive()&&this._scenarioDescriptor.end()},w.prototype.render=function(){return i.createElement(o.PersonaCardContent,__assign({},this.props,{dataProps:this.state.dataState,onClickEntity:this._onClickEntity,onDismissCallback:this._onDismissCallback,onShowContactCard:this._onShowContactCard,onShowOrganizationCard:this._onShowOrganizationCard,working:this.state.working,onHeaderClick:this._headerOnClickHandler}))},w.prototype._onDismissCallback=function(){this._scenarioDescriptor.isActive()&&!h.isCompleteIdentity(this.state.dataState.identity)&&(this._scenarioDescriptor.addSplitTiming("Spinner load time for card dismissal before identity fetch"),this._scenarioDescriptor.end());this.props.onDismissCallback()},w.prototype._headerOnClickHandler=function(){this.state.dataState.previousDataState?this.setState({dataState:this.state.dataState.previousDataState,working:!1}):this.props.initialHeader&&this.props.initialHeader.onClickFunction&&this.props.initialHeader.onClickFunction()},w.prototype._onShowContactCard=function(){var n=__assign(__assign({},this.state.dataState),{previousDataState:this.state.dataState,cardType:s.CardType.Contact,header:this.state.dataState.identity});this.setState({dataState:n})},w.prototype._onShowOrganizationCard=function(){var n=this,e,f,i,u,r;this.state.working||(e=function(t,i){i&&i.managers&&i.directReports&&!n._dismissed&&(i.managers.reverse(),n.state.dataState&&n.state.dataState.identity===t&&(n.setState({dataState:__assign(__assign({},n.state.dataState),{managerList:i.managers,directReportList:i.directReports}),working:!1}),n._getImagesForDataState()))},f=this.state.dataState,f.managerList&&f.managerList.length<=1?(i=this.state.dataState,r=__assign(__assign({},i),{cardType:s.CardType.Organization,header:i.identity,previousDataState:i}),this.setState({dataState:r,working:!0}),this._IdentityService.getIdentityConnections(i.identity,h.isAdUser(i.identity)?t.sourceAdOperationScope:t.sourceOperationScope,t.userIdentityType,t.managerAndDirectReportsConnectionType,null,null,6).then(function(n){return e(i.identity,n)},function(t){n._publishErrorTelemetry("ConnectionsOrgCard",t)})):(u=this.state.dataState,r=__assign(__assign({},u),{cardType:s.CardType.Organization,header:u.identity,previousDataState:u}),this.setState({dataState:r,working:!1})))},w.prototype._onClickEntity=function(n){if(!this.state.working){this._scenarioDescriptor.isActive()&&(this._scenarioDescriptor.end(),this._scenarioDescriptor=l.getScenarioManager().startScenario(this._routeId,s.personaCardEntity.featureName));var t=this.state.dataState,i={identity:n,cardType:s.CardType.Default,header:t.identity,directReportList:[],managerList:[],previousDataState:t,displayName:n.displayName,imageUrl:n.image,email:n.mail};this.setState({dataState:i,working:!0});this._getIdentityByUniqueAttribute(n)}},w.prototype._setupInitialData=function(n,i){var r=this;n.identity?h.isCompleteIdentity(n.identity)?c.ServiceHelpers.isAuthenticatedMember()&&this._IdentityService.getIdentityConnections(n.identity,h.isAdUser(n.identity)?t.sourceAdOperationScope:t.sourceOperationScope,t.userIdentityType,t.managerConnectionType,null,null,1).then(function(t){return r._getConnectionsSuccessCallback(n,t)},function(n){r._publishErrorTelemetry("ConnectionsIdentityPassedInDirectManager",n)}):this._getIdentityByUniqueAttribute(n.identity):this._getIdentityByUniqueAttribute(i)},w.prototype._getIdentityByUniqueAttribute=function(n){var i=this,r,o,s;r=typeof n=="string"?n:h.isAadUser(n)||h.isAdUser(n)?n.entityId:n.signInAddress;o={UID:!0};s={identityServiceOptions:{operationScope:u.getPageContext().webAccessConfiguration.isHosted?t.sourceImsOperationScope:t.sourceImsAdOperationScope,identityType:t.userIdentityType,httpClient:null,extensionData:null},identityExtensionOptions:{consumerId:this.props.consumerId||e.ConsumerId.UnknownConsumer},prefix:r,queryTypeHint:o,sources:["Directory"]};this.props.entityOperationsFacade.search(s).then(function(n){for(var t in n.queryTokenResponse)n.queryTokenResponse[t].then(function(n){return i._getIdentitiesSuccessCallback(n)},function(n){i._publishErrorTelemetry("IdentityNotPresent",n)})},function(n){i._publishErrorTelemetry("IdentitySearch",n);(function(n){return f.logError("_resolveInputToIdentities/getIdentitiesErrorCallback:"+JSON.stringify(n))})})},w.prototype._getIdentitiesSuccessCallback=function(n){var u=this,f;if(n&&!this._dismissed)if(n.identities&&n.identities.length!=0){var i=n.identities[0],e=h.isCompleteIdentity(this.state.dataState.identity),o=h.isAadUser(i)||h.isAdUser(i),s=this.props.imageUrl?this.props.imageUrl:i.image,r=__assign(__assign({},this.state.dataState),{identity:i,displayName:i.displayName,imageUrl:s}),l=c.ServiceHelpers.isAuthenticatedMember();l?!e&&o?(this.setState({dataState:r,working:!0}),this._IdentityService.getIdentityConnections(i,h.isAdUser(i)?t.sourceAdOperationScope:t.sourceOperationScope,t.userIdentityType,t.managerConnectionType,null,null,1).then(function(n){return u._getConnectionsSuccessCallback(r,n)},function(n){u._publishErrorTelemetry("ConnectionsIdentityFetchedDirectManager",n)})):(this.setState({working:!0}),this._setupInitialData(r)):(this.setState({dataState:r,working:!1}),this._getImagesForDataState())}else f=__assign(__assign({},this.state.dataState),{identity:this._getDerivedIdentity()}),this.setState({dataState:f,working:!1})},w.prototype._getConnectionsSuccessCallback=function(n,t){t&&t.managers&&!this._dismissed&&(this.setState({dataState:__assign(__assign({},n),{managerList:t.managers.reverse(),directReportList:t.directReports}),working:!1}),this._getImagesForDataState())},w.prototype._getDerivedIdentity=function(){if(this.state.dataState.identity)return this.state.dataState.identity;var n=this.props.imageUrl?this.props.imageUrl:this.state.dataState.imageUrl;return{entityId:"",entityType:"user",originDirectory:"vsd",originId:"",displayName:this.state.dataState.displayName?this.state.dataState.displayName:a.IdentityPicker_NoResult,image:n,signInAddress:this.state.dataState.email}},w.prototype._getImagesForDataState=function(){var i=this,n=this.state.dataState,t=__spreadArray(__spreadArray(__spreadArray([],n.identity.image?[]:[n.identity],!0),(n.managerList||[]).filter(function(n){return!n.image}),!0),(n.directReportList||[]).filter(function(n){return!n.image}),!0);t&&t.length>0&&this.props.entityOperationsFacade.getImagesForEntities(t).then(this._getImagesForEntitiesCallback.bind(this),function(n){i._publishErrorTelemetry("Image",n)})},w.prototype._getImagesForEntitiesCallback=function(n){var t,r,i;if(n&&!this._dismissed){var u=this.state.dataState.identity,f=this.state.dataState.managerList,e=this.state.dataState.directReportList||[],o=__spreadArray(__spreadArray(__spreadArray([],e,!0),f,!0),[u],!1);for(t=0,r=o;t<r.length;t++)i=r[t],i.entityId in n&&(i.image=n[i.entityId]);this.setState({dataState:__assign(__assign({},this.state.dataState),{identity:u,managerList:f,directReportList:e})})}},w.prototype._getEmail=function(){var n,t;return h.isAadUser(this.props.identity)||h.isAdUser(this.props.identity)?this.props.identity.mail:this.props.identity&&this.props.identity.signInAddress?this.props.identity.signInAddress:this.props.identity&&this.props.identity.mail?this.props.identity.mail:this.props.uniqueAttribute&&(n=this.props.uniqueAttribute.split("@"),n.length===2&&n[0].length>=1&&n[1].length>=3&&(t=n[1].split("."),t.length>1))?this.props.uniqueAttribute:null},w.prototype._publishErrorTelemetry=function(n,t){var i=u.getPageContext().navigation.routeId,r={Action:p.format("{0} fetch failed",n),ErrorName:t.name,ErrorMessage:t.message};y.publishEvent(new y.TelemetryEventData(i,s.personaCardEntity.featureName,r))},__decorate([r.autobind],w.prototype,"_onDismissCallback",null),__decorate([r.autobind],w.prototype,"_headerOnClickHandler",null),__decorate([r.autobind],w.prototype,"_onShowContactCard",null),__decorate([r.autobind],w.prototype,"_onShowOrganizationCard",null),__decorate([r.autobind],w.prototype,"_onClickEntity",null),__decorate([r.autobind],w.prototype,"_getConnectionsSuccessCallback",null),w}(i.Component)});

define("VSSPreview/Providers/IdentityDetailsProvider",["require","exports","react","VSS/Common/Contracts/Platform","VSS/Context","VSS/Contributions/LocalPageData","VSS/FeatureAvailability/Services","VSS/Identities/Picker/Controls","VSS/Identities/Picker/PersonaCard","VSS/Locations","VSS/Service","VSS/Utils/Url","VSS/WebApi/Constants"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){Object.defineProperty(t,"__esModule",{value:!0});t.IdentityDetailsProvider=void 0;var v=function(){function n(n,t){this._identity=n;this._consumerId=t}return n.prototype.getIdentityImageUrl=function(n){var t=this._identity,i;return t._links&&t._links.avatar&&t._links.avatar.href&&!e.FeatureAvailabilityService.isFeatureEnabled("VisualStudio.Services.WebPlatform.DisableNewAvatarImage",!1)?(i=new l.Uri(t._links.avatar.href),i.addQueryParam("size",""+this._getServerImageSize(n),!0),i.absoluteUri):this._getOldStyleImageUrl(n)},n.prototype._getOldStyleImageUrl=function(n){var i=this._identity,t,f,e;return i.id?(t={id:i.id},f=this._getImageId(i.id),f&&(t.t=f),e=u.getPageContext(),e&&e.webAccessConfiguration.isHosted&&(t.size=this._getServerImageSize(n)),h.urlHelper.getMvcUrl({serviceInstanceId:a.ServiceInstanceTypes.TFS,action:"IdentityImage",area:"api",controller:"common",level:r.NavigationContextLevels.Collection,queryParams:t})):null},n.prototype.getDisplayName=function(){if(this._identity.displayName)return this._identity.displayName;var n=this._getIdentityDetails(this._identity.id);return n&&n.displayName},n.prototype.onRenderPersonaCard=function(n,t){return!this._identity.isContainer&&i.createElement(s.PersonaCard,{uniqueAttribute:this._identity.uniqueName,target:n,entityOperationsFacade:c.getService(o.EntityOperationsFacade),onDismissCallback:t,displayName:this._identity.displayName,consumerId:this._consumerId})},n.prototype._getIdentityDetails=function(n){if(!n)return null;var t=f.getSharedData("_identityDetails");return t&&t[n]},n.prototype._getImageId=function(n){var t=this._getIdentityDetails(n);return t&&t.identityImageId},n.prototype._getServerImageSize=function(n){return n<=34?0:n<=44?1:2},n}();t.IdentityDetailsProvider=v});

define("Presentation/Scripts/TFS/TeamPanel/TeamPanel",["require","exports","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","Presentation/Scripts/TFS/TeamPanel/Flux/TeamPanelActions","Presentation/Scripts/TFS/TeamPanel/Flux/TeamPanelActionsCreator","Presentation/Scripts/TFS/TeamPanel/Flux/TeamPanelSelector","Presentation/Scripts/TFS/TeamPanel/Flux/TeamPanelStore","Favorites/Controls/FavoriteStar","OfficeFabric/Dropdown","OfficeFabric/FocusZone","OfficeFabric/Link","OfficeFabric/List","OfficeFabric/MessageBar","OfficeFabric/Panel","OfficeFabric/Pivot","VSSUI/Tooltip","react","VSSPreview/Providers/IdentityDetailsProvider","VSSUI/VssIcon","VSSUI/VssPersona","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/Components/LoadingComponent","VSS/LWP","VSS/LoaderPlugins/Css!Presentation/Scripts/TFS/TeamPanel/TeamPanel"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){Object.defineProperty(t,"__esModule",{value:!0});t.TeamPanel=void 0;var it="__all__",ut="EA194426-ED68-4A59-88B7-ACAE6DF82B17",rt=function(n){function t(t,a){var v=__construct(this,n,[t,a]),y,b;for(y in v)v.hasOwnProperty(y)&&(this[y]=v[y]);return v._onStoreChanged=function(){v.setState(f.getTeamPanelViewState(v._store.getState()))},v._renderHeader=function(){var u=v.state.teamImageUrl,n=v.props.teamPanelContext,t=n.teamName,r=n.projectName;return w.createElement("div",{className:"team-panel-header-area"},w.createElement("div",{className:"team-panel-header"},w.createElement("img",{className:"identity-picture large-identity-picture team-header-icon",src:u}),w.createElement("div",{className:"team-text"},w.createElement("label",{className:"team-name"},w.createElement(p.TooltipHost,{overflowMode:p.TooltipOverflowMode.Parent,content:t},t)),w.createElement("label",{className:"project-name"},w.createElement(p.TooltipHost,{overflowMode:p.TooltipOverflowMode.Parent,content:r},r)),w.createElement("div",{className:"team-settings"},w.createElement(c.Link,{className:"team-settings-link",href:v._getAdminRoute()},i.TeamSettingLabel)))))},v._renderItems=function(){var n=v.state,f=n.items,e=n.itemGroupsWithItems,t=n.filter,u=e.map(function(n){return{key:n.hub,text:n.hub}}),r;return u.unshift({key:it,text:i.AllITemsFilterText}),r=it,t&&t.itemGroup&&(r=t.itemGroup.hub),w.createElement("div",null,w.createElement("div",{className:"team-panel-drop-down-container"},w.createElement(s.Dropdown,{className:"team-panel-filter-dropdown",selectedKey:r,options:u,onChanged:v._filterItems})),w.createElement(h.FocusZone,{className:"item-list",direction:h.FocusZoneDirection.vertical},w.createElement(l.List,{items:f,onRenderCell:v._onRenderCell})))},v._onRenderCell=function(n){var t=n.item,r=t.favorite,u=t.name,i=!!r,f="".concat(u," ").concat(n.itemType.hub);return w.createElement("div",{className:"item-panel-row","data-is-focusable":!0,"aria-label":f},w.createElement(k.VssIcon,{className:"item-icon",iconName:n.item.iconClassName,iconType:0}),w.createElement("div",{className:"item-text"},w.createElement(c.Link,{className:"item-title",onClick:function(){return v._onItemNavigated(n)}},w.createElement(p.TooltipHost,{overflowMode:p.TooltipOverflowMode.Parent,content:n.item.name},n.item.name)),w.createElement("label",{className:"item-group-type"},n.itemType.hub)),w.createElement("div",{className:"favorite-star"},w.createElement(o.FavoriteStar,{className:"directory-row-favorite-icon",isFavorite:i,isDeleted:i?n.item.favorite.artifactIsDeleted:!1,onToggle:function(){v._onFavorite(n)}})))},v._onFavorite=function(n){var t=v.props.teamPanelContext.projectId;v._actionsCreator.toggleFavorite(n,t)},v._filterItems=function(n){if(n)if(n.key===it)v._actionsCreator.clearFilter();else{var t=v.state.itemGroups.filter(function(t){return t.hub===n.key})[0];v._actionsCreator.filterItems(t)}},v._getAdminRoute=function(){var n=v.props.teamPanelContext,t=n.teamName,i=n.projectName,r=g.TfsContext.getDefault();return r.getActionUrl("","",{area:"admin",team:t,project:i})},b=new r.TeamPanelActions,v._actionsCreator=new u.TeamPanelActionsCreator(b),v._store=new e.TeamPanelStore(b),v.state=f.getTeamPanelViewState(v._store.getState()),v}return __extends(t,n),t.prototype.componentDidMount=function(){this._store.addChangedListener(this._onStoreChanged);this._actionsCreator.initialize(this.props.teamPanelContext)},t.prototype.componentWillUnmount=function(){this._store.removeChangedListener(this._onStoreChanged)},t.prototype.render=function(){return w.createElement(v.Panel,{isOpen:!0,onDismiss:this.props.onDismiss,hasCloseButton:!0,closeButtonAriaLabel:i.TeamPanel_Close,isLightDismiss:!0,className:"team-panel",type:v.PanelType.custom,customWidth:"450px",onRenderHeader:this._renderHeader},this._renderPivot())},t.prototype._renderPivot=function(){var n=this.state,t=n.membersCount,r=n.loading;return r?w.createElement(nt.LoadingComponent,null):w.createElement("div",{className:"team-panel-pivot-container"},this._renderErrors(),w.createElement(y.Pivot,null,w.createElement(y.PivotItem,{headerText:i.TeamPanel_ItemsPivot},this._renderItems()),w.createElement(y.PivotItem,{headerText:i.TeamPanel_Member,itemCount:t},this._renderMembers())))},t.prototype._renderMembers=function(){var r=this.state,n=r.admins,t=r.members,u,f;return n&&n.length>0&&(u=this._onRenderMemberList(i.AdminGroupHeader,n)),t&&t.length>0&&(f=this._onRenderMemberList(i.TeamPanel_Member,t)),w.createElement("div",null,u,f)},t.prototype._onRenderMemberList=function(n,t){return w.createElement(h.FocusZone,{className:"member-list",direction:h.FocusZoneDirection.vertical},w.createElement("label",{className:"group-label"},n),w.createElement(l.List,{items:t,onRenderCell:this._onRenderMember}))},t.prototype._onRenderMember=function(n){return w.createElement("div",{className:"person-panel-row","data-is-focusable":!0,"aria-label":n.identity.displayName},w.createElement(d.VssPersona,{size:"medium",identityDetailsProvider:new b.IdentityDetailsProvider(n.identity,ut),dataIsFocusable:!0}),w.createElement("label",{className:"person-title"},n.identity.displayName))},t.prototype._onItemNavigated=function(n){this._actionsCreator.itemNavigated(n)},t.prototype._renderErrors=function(){var n=this.state.errors;return n&&n.length>0?w.createElement("div",{className:"errors-container"},n.map(function(n,t){return w.createElement(a.MessageBar,{messageBarType:a.MessageBarType.error,isMultiline:!0,key:n+t},n)})):null},t}(w.Component);t.TeamPanel=rt;tt.registerLWPComponent("teamPanel",rt)});

define("Presentation/Scripts/TFS/TeamPanel/TeamPanelIconButton",["require","exports","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","OfficeFabric/Button","react","OfficeFabric/Icon","VSSUI/Tooltip","Presentation/Scripts/TFS/TeamPanel/TeamPanel"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.TeamPanelIconButton=void 0;var s=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onTeamPanelDismiss=function(){i.setState({isPanelOpen:!1})},i._onClick=function(){i.setState({isPanelOpen:!0})},i.state={isPanelOpen:!1},i}return __extends(t,n),t.prototype.render=function(){var n={iconName:"People",iconType:f.IconType.default};return u.createElement("div",null,u.createElement(e.TooltipHost,{content:i.ShowTeamProfile},u.createElement(r.IconButton,{className:"team-panel-button",ariaLabel:i.ShowTeamProfile,onClick:this._onClick,iconProps:n})),this.state.isPanelOpen&&u.createElement(o.TeamPanel,{teamPanelContext:this.props,onDismiss:this._onTeamPanelDismiss}))},t}(u.Component);t.TeamPanelIconButton=s});

define("Presentation/Scripts/TFS/Components/LearningBubble/Utils",["require","exports","VSS/Settings/Services","VSS/Error"],function(n,t,i,r){function f(n,t){var r=i.getService(),f=!0,e;return t&&(f=!t.some(function(n){var t=r.getEntry(n,0);return t==null||t==!1})),e=r.getEntry(n,0)==!0||u[n]===!0,f&&!e}function e(n){var t,f=i.getService();u[n]=!0;f.setEntries((t={},t[n]=u[n],t),0).then(null,function(n){r.publishErrorToTelemetry(n)})}Object.defineProperty(t,"__esModule",{value:!0});t.registerUserShownLearningBubble=t.shouldShowLearningBubble=void 0;var u={};t.shouldShowLearningBubble=f;t.registerUserShownLearningBubble=e});

define("Presentation/Scripts/TFS/Components/LearningBubble/Constants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.DefaultDelayedShowDelay=t.HubViewOptionsTargetSelector=t.LearningBubbleSettingsKeys=void 0;var i;(function(n){n.RightPanelViewOptions="Agile/RightPanel/HasUserSeenViewOptionsLearningBubble";n.BacklogLevels="Agile/CommonSettings/HasUserSeenBacklogLevelLearningBubble";n.Iterations="Agile/SprintsHub/HasUserSeenIterationPickerLearningBubble";n.WikiMermaidDiagram="Wiki/EditToolbar/HasUserSeenMermaidLearningBubble";n.TaskboardColumOptions="Agile/Taskboard/ColumnOptions"})(i=t.LearningBubbleSettingsKeys||(t.LearningBubbleSettingsKeys={}));t.HubViewOptionsTargetSelector=".vss-PivotBar--viewOptionsMenu";t.DefaultDelayedShowDelay=3e3});

define("Presentation/Scripts/TFS/Components/LearningBubble/LearningBubble",["require","exports","react","OfficeFabric/Callout","OfficeFabric/Button","Presentation/Scripts/TFS/Components/LearningBubble/Utils","Presentation/Scripts/TFS/Components/LearningBubble/Constants","VSS/LoaderPlugins/Css!Presentation/Scripts/TFS/Components/LearningBubble/LearningBubble"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.LearningBubble=void 0;var o=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._delayTimerHandle=null,i._show=function(){f.registerUserShownLearningBubble(i.props.settingsKey);i.setState({isCalloutOpen:!0})},i._onCalloutDismiss=function(){i.setState({isCalloutOpen:!1});i.props.onCalloutDismiss&&i.props.onCalloutDismiss()},i.state={isCalloutOpen:!1},i}return __extends(t,n),t.prototype.render=function(){return this.state.isCalloutOpen?i.createElement(r.Callout,{className:"agile-learning-bubble",target:this.props.target,onDismiss:this._onCalloutDismiss,setInitialFocus:!0,role:"dialog",ariaLabel:this.props.text},i.createElement("div",{className:"agile-learning-bubble-body"},i.createElement("div",null,this.props.text),i.createElement(u.PrimaryButton,{className:"learning-bubble-dismiss-button",text:this.props.buttonLabel,onClick:this._onCalloutDismiss}))):null},t.prototype.showIfNeeded=function(){f.shouldShowLearningBubble(this.props.settingsKey,this.props.predecessorSettingsKeys)&&this._show()},t.prototype.showIfNeededAfterDelay=function(n){f.shouldShowLearningBubble(this.props.settingsKey,this.props.predecessorSettingsKeys)&&(this._delayTimerHandle=setTimeout(this._show,n||e.DefaultDelayedShowDelay))},t.prototype.cancelDelayedShow=function(){this._delayTimerHandle!==null&&(clearTimeout(this._delayTimerHandle),this._delayTimerHandle=null)},t}(i.Component);t.LearningBubble=o});

define("Agile/Scripts/BacklogsHub/BacklogContentView/Components/BacklogContentView",["require","exports","react","Agile/Scripts/BacklogsHub/BacklogContentView/Selectors/BacklogContentViewSelectors","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants","Agile/Scripts/BacklogsHub/BacklogsHubViewState","Agile/Scripts/Common/Components/AgileHubError","Agile/Scripts/Common/Components/ChartControls","Agile/Scripts/Common/Components/PreloadedReportComponent","Agile/Scripts/Common/Components/DelayTTIComponent","Presentation/Scripts/TFS/Components/LoadingComponent","Agile/Scripts/Common/Controls","Agile/Scripts/Common/HubContributionUtils","Agile/Scripts/Common/HubUrlUtilities","Presentation/Scripts/TFS/PerformanceTelemetryHelper","Agile/Scripts/Common/PivotItemProvider","Agile/Scripts/Common/ViewActions/BacklogLevelSelectorViewAction","Agile/Scripts/Generated/HubConstants","Agile/Scripts/Models/Team","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","Favorites/Constants","Favorites/Controls/LegacyArtifactPickerProvider","TfsCommon/Scripts/Favorites/Constants","VSS/Context","VSS/Navigation/Services","VSS/Utils/Core","VSS/Utils/String","VSSPreview/Providers/ContributablePivotItemProvider","VSSUI/Hub","VSSUI/HubHeader","VSS/Core/Observable","VSSUI/Utilities/ViewOptions","Presentation/Scripts/TFS/TeamPanel/TeamPanelIconButton","Agile/Scripts/Common/HubTelemetryHelper","Presentation/Scripts/TFS/Components/LearningBubble/LearningBubble","Presentation/Scripts/TFS/Components/LearningBubble/Constants","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/BacklogContentView/Components/BacklogContentView"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogContentView=void 0;var bt="MINE",wt="ALL",kt=function(n){function t(t){var e=__construct(this,n,[t]);for(var c in e)e.hasOwnProperty(c)&&(this[c]=e[c]);return e._shouldReloadDataProviders=!1,e._onRenderFilterBar=new ct.ObservableValue(undefined),e._pivotCommands=new ct.ObservableArray,e._viewActions=new ct.ObservableArray,e._backlogLevelLearningBubble=i.createRef(),e.BACKLOG_PIVOT_KEY="backlog",e._onPivotBarRenderComplete=function(){var n=e.state.visibleBacklogLevels,t=e._hubViewState.selectedPivot.value;t!==e.BACKLOG_PIVOT_KEY&&(e._viewActions.value=[w.getLevelSelectorViewAction(n,e._hubViewState.viewOptions,null,"Backlog",{iconName:"BacklogList",iconType:0})])},e._getBacklogPivotContext=function(){var n=e.state,t=n.visibleBacklogLevels,i=n.currentBacklog,r=n.nextBacklog,u=n.team,f=n.newBacklogLevelsSignature,o=n.hasIterations;return{shouldReloadDataProviders:e._shouldReloadDataProviders,visibleBacklogLevels:t,currentBacklog:i,nextBacklog:r,team:u,pivotName:e._hubViewState.selectedPivot.value,commands:e._pivotCommands,filter:e._hubViewState.filter,viewActions:e._viewActions,viewOptions:e._hubViewState.viewOptions,newBacklogLevelsSignature:f,hasIterations:o}},e._getContributedPivotContext=function(n){var t=e.state,i=t.currentBacklog,r=t.team;return{level:i.name,workItemTypes:i.workItemTypes,team:{id:r.id,name:r.name},foregroundInstance:e._hubViewState.selectedPivot.value===n.id}},e._onRenderFilterBarUpdated=function(){e.forceUpdate()},e._onPivotChanged=function(n){if(n===b.BacklogsHubConstants.BacklogPivot||n===b.BacklogsHubConstants.AnalyticsPivot){var t=y.PerformanceTelemetryHelper.getInstance(b.BacklogsHubConstants.HUB_NAME);t.isActive()&&t.abort();t.startTabSwitch(b.BacklogsHubConstants.HUB_NAME,n)}},e._onStoreChanged=function(){e.setState(r.getState(e.props.backlogStore))},e._onViewOptionsChanged=function(n){if(n.hasOwnProperty(b.AgileRouteParameters.BacklogLevel)){var t=y.PerformanceTelemetryHelper.getInstance(b.BacklogsHubConstants.HUB_NAME);t.isActive()&&t.abort();t.startScenario(u.BacklogsHubTelemetryConstants.LEVEL_CHANGE);e.props.backlogActionsCreator.changeBacklogLevel(n[b.AgileRouteParameters.BacklogLevel],e.state.team.id);e._externalPivotContributionsProvider&&e._externalPivotContributionsProvider.refresh()}},e._renderHubTileRegion=function(){var n=e.state,u=n.currentBacklog,f=n.hasIterations,c=n.isRequirementBacklog,t=n.team,l=e._hubViewState.selectedPivot.value,r;return et.equals(l,b.BacklogsHubConstants.BacklogPivot,!0)?(r=function(n){return n?i.createElement("div",{className:"backlog-hub-tile-region"},c&&f&&i.createElement(o.VelocityChartComponent,{teamId:t.id}),i.createElement(o.CumulativeFlowChartComponent,{teamId:t.id,backlogLevelId:u.id})):null},i.createElement(ht.HubTileRegion,null,i.createElement(h.DelayTTIComponent,null,function(){return i.createElement(o.DelayLoadedHubTileComponent,{agileHub:s.AgileHub.Backlog,renderChildren:r})}))):null},e._onBrowseAllClicked=function(){vt.BacklogsHubTelemetryHelper.publishTelemetry(u.BacklogsHubTelemetryConstants.NAVIGATE_TO_DIRECTORY,{});var n=v.BacklogsUrls.getBacklogDirectoryUrl();ft.delay(e,0,function(){return v.BacklogsUrls.navigateToBacklogsHubUrl(n)})},e._getGroupId=function(n){return n.isMember===undefined?"":n.isMember?bt:wt},e._showLearningBubble=function(){e._backlogLevelLearningBubble.current&&e._backlogLevelLearningBubble.current.showIfNeededAfterDelay()},e._stopLearningBubble=function(){e._backlogLevelLearningBubble.current&&e._backlogLevelLearningBubble.current.cancelDelayedShow()},e._hubViewState=new f.BacklogsHubViewState(b.BacklogsHubConstants.BacklogPivot),e.state=r.getState(e.props.backlogStore),e}return __extends(t,n),t.prototype.componentWillMount=function(){this.props.backlogStore.addChangedListener(this._onStoreChanged);this._onRenderFilterBar.subscribe(this._onRenderFilterBarUpdated);this._pivotProviders=[];this._hubViewState.viewOptions.subscribe(this._onViewOptionsChanged,lt.VIEW_OPTIONS_CHANGE_EVENT);this._hubViewState.selectedPivot.subscribe(this._onPivotChanged);this._pivotProviders.push(new p.PivotItemProvider("ms.vss-work-web.backlogs-hub:content:pivots",this._getBacklogPivotContext,{hubViewState:this._hubViewState,routeValueKey:b.AgileRouteParameters.Pivot}));this._externalPivotContributionsProvider=new ot.ContributablePivotItemProvider(["ms.vss-work-web.product-backlog-tabs"],this._getContributedPivotContext,{hubViewState:this._hubViewState,routeValueKey:b.AgileRouteParameters.Pivot});this._pivotProviders.push(this._externalPivotContributionsProvider);this.props.backlogActionsCreator.initializeHeaderData();this._shortcuts=new l.AgileHubShortcutGroup(this._hubViewState.viewOptions)},t.prototype.componentWillUnmount=function(){this.props.backlogStore.removeChangedListener(this._onStoreChanged);this._onRenderFilterBar.unsubscribe(this._onRenderFilterBarUpdated);this._hubViewState.viewOptions.unsubscribe(this._onViewOptionsChanged,lt.VIEW_OPTIONS_CHANGE_EVENT);this._hubViewState.selectedPivot.unsubscribe(this._onPivotChanged);this._shortcuts&&(this._shortcuts.removeShortcutGroup(),this._shortcuts=null);this._hubViewState.dispose();this._stopLearningBubble()},t.prototype.render=function(){var t=this.state,u=t.headerDataReady,n=t.exceptionInfo,r;return u?n?(document.title=ut.getDefaultPageTitle("".concat(a.getHubDisplayName()," - ").concat(n.exceptionMessage)),i.createElement(e.HubError,{exceptionsInfo:[n]})):(r={commands:this._pivotCommands,viewActions:this._viewActions,hubViewState:this._hubViewState,hideFullScreenToggle:!1,pivotProviders:this._pivotProviders,onRenderFilterBar:this._onRenderFilterBar.value,onPivotBarRenderComplete:this._onPivotBarRenderComplete,className:"backlog-content-view"},i.createElement(st.Hub,__assign({},r),this._getHubHeader(),this._renderHubTileRegion(),this._renderBacklogLevelLearningBubble())):i.createElement(c.LoadingComponent,null)},t.prototype.componentDidMount=function(){this._initializeArtifactPicker();this.state.headerDataReady&&this._setDocumentTitle();this._showLearningBubble();this._shouldReloadDataProviders=!0},t.prototype.componentDidUpdate=function(n,t){this._initializeArtifactPicker();this.state.headerDataReady&&!t.headerDataReady||this.state.currentBacklog&&t.currentBacklog&&this.state.currentBacklog.id!==t.currentBacklog.id?this._setDocumentTitle():this.state.artifactPickerTeams&&this.state.artifactPickerTeams!==t.artifactPickerTeams&&this._artifactPickerProvider.updateArtifacts(this.state.artifactPickerTeams,[wt])},t.prototype._getHubHeader=function(){var n=rt.getDefaultWebContext(),t=i.createElement(at.TeamPanelIconButton,{projectName:n.project.name,projectId:n.project.id,teamId:this.state.team.id,teamName:this.state.team.name});return i.createElement(ht.HubHeader,{headerItemPicker:this._artifactPickerProvider,pickListMinWidth:400,iconProps:this._getBacklogIcon()},t)},t.prototype._renderBacklogLevelLearningBubble=function(){return i.createElement(yt.LearningBubble,{ref:this._backlogLevelLearningBubble,settingsKey:pt.LearningBubbleSettingsKeys.BacklogLevels,target:".".concat(w.BacklogLevelSelectorClass),text:d.BacklogLevelLearningBubbleText,buttonLabel:g.LearningBubbleButtonLabel})},t.prototype._getArtifactName=function(n){return n.name},t.prototype._getBacklogIcon=function(){return{iconName:"BacklogList",iconType:0,className:"backlog-title-icon"}},t.prototype._getFavoriteForBacklog=function(n){var t,i=rt.getDefaultWebContext();return{artifactId:n.id,artifactName:n.name,artifactType:it.FavoriteTypes.WORK_TEAMBACKLOG,artifactScope:{id:i.project.id,name:i.project.name,type:nt.FavoriteStorageScopes.Project},artifactProperties:(t={},t[b.FavoriteConstants.TeamName]=n.name,t),artifactIsDeleted:!1,creationDate:undefined,id:undefined,owner:undefined,url:undefined,_links:undefined}},t.prototype._initializeArtifactPicker=function(){var n=this,r=this.state,e=r.headerDataReady,t=r.team,i,f;e&&t&&!this._artifactPickerProvider&&(i=rt.getDefaultWebContext(),f={favoritesContext:{artifactTypes:[it.FavoriteTypes.WORK_TEAMBACKLOG],artifactScope:{id:i.project.id,name:i.project.name,type:nt.FavoriteStorageScopes.Project}},browseAllText:d.BrowseAllBacklogsText,onBrowseAllClick:this._onBrowseAllClicked,selectedArtifact:t,artifactComparer:function(n,t){return et.localeIgnoreCaseComparer(n.name,t.name)},searchNoResultsText:d.SearchNoResultsText,searchTextPlaceholder:d.SearchTextPlaceholder,loadingText:d.LoadingBacklogsText,searchResultsLoadingText:d.SearchResultsLoadingText,getArtifacts:function(){return n.props.backlogActionsCreator.getBacklogArtifactPickerTeams(n.props.teamSource)},getArtifactId:function(n){return n.id},getArtifactName:function(t){return n._getArtifactName(t)},getArtifactFromFavorite:function(n){return new k.Team({id:n.artifactId,name:n.artifactName})},getFavoriteFromArtifact:function(t){return n._getFavoriteForBacklog(t)},getArtifactIcon:function(){return n._getBacklogIcon()},getArtifactHref:this._getArtifactHrefHandler,getSearchResults:function(){return n._searchTelemetryPublished||(vt.BacklogsHubTelemetryHelper.publishTelemetry(u.BacklogsHubTelemetryConstants.SEARCH_TEAM,{}),n._searchTelemetryPublished=!0),[]},favoriteGroupHeader:d.FavoriteGroupHeader,groups:this.getGroups(),onArtifactClicked:function(i){return n._onArtifactClickedHandler(i,t.id)},getArtifactListGroupId:this._getGroupId},this._artifactPickerProvider=new tt.LegacyArtifactPickerProvider(f),this.forceUpdate())},t.prototype.getGroups=function(){return[{key:bt,name:d.MyTeamGroupHeader},{key:wt,name:d.AllTeamGroupHeader,isLoading:!0}]},t.prototype._getArtifactHrefHandler=function(n){var t=n.id,i={teamIdOrName:t,preserveQueryParameters:!0};return v.BacklogsUrls.getBacklogContentUrl(i)},t.prototype._setDocumentTitle=function(){this.state.team&&this.state.currentBacklog&&(document.title=ut.getDefaultPageTitle("".concat(this.state.team.name," ").concat(this.state.currentBacklog.name," ").concat(d.Backlog)))},t.prototype._onArtifactClickedHandler=function(n,t){if(et.equals(n.id,t,!0))return!0;var i=this._getArtifactHrefHandler(n);return v.BacklogsUrls.navigateToBacklogsHubUrl(i),!0},t}(i.Component);t.BacklogContentView=kt});

define("Agile/Scripts/BacklogsHub/BacklogContentView/Store/BacklogContentViewStore",["require","exports","Agile/Scripts/Models/Team","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","VSS/Flux/Store","VSS/Utils/Array","VSS/Utils/String"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogContentViewStore=void 0;var o=function(n){function t(t){var u=__construct(this,n,[]);for(var e in u)u.hasOwnProperty(e)&&(this[e]=u[e]);return u._headerDataAvailable=function(n){n?(u._exceptionInfo=n.exceptionInfo,u._exceptionInfo||(u._allBacklogLevels=n.allBacklogLevels,u._visibleBacklogLevels=n.allBacklogLevels.filter(function(t){return f.findIndex(n.visibleBacklogLevels,function(n){return n.id===t.id})>=0}),u._team=new i.Team({id:n.teamId,name:n.teamName}),u._currentBacklog=u._getBacklogById(n.allBacklogLevels,n.backlogId),u._nextBacklog=u._getNextBacklog(n.allBacklogLevels,n.backlogId),u._hasIterations=n.hasIterations,u._requirementLevelName=n.requirementLevelName,u._newBacklogLevelsSignature=n.newBacklogLevelsSignature)):u._exceptionInfo={exceptionMessage:r.BacklogHeader_UnknownError};u._headerDataReady=!0;u.emitChanged()},u._changeBacklogLevel=function(n){u._exceptionInfo||(u._currentBacklog=u._getBacklogByLevel(u._allBacklogLevels,n),u._nextBacklog=u._currentBacklog?u._getNextBacklog(u._allBacklogLevels,u._currentBacklog.id):null);u.emitChanged()},u._allArtifactPickerTeamsAvaiable=function(n){u._allArtifactPickerTeams=n;u.emitChanged()},u._actions=t,u._headerDataReady=!1,u._attachActionListeners(u._actions),u}return __extends(t,n),Object.defineProperty(t.prototype,"visibleBacklogLevels",{get:function(){return this._visibleBacklogLevels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentBacklog",{get:function(){return this._currentBacklog},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextBacklog",{get:function(){return this._nextBacklog},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exceptionInfo",{get:function(){return this._exceptionInfo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerDataReady",{get:function(){return this._headerDataReady},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasIterations",{get:function(){return this._hasIterations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequirementBacklog",{get:function(){return this._currentBacklog?e.equals(this._requirementLevelName,this._currentBacklog.name,!0):!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newBacklogLevelsSignature",{get:function(){return this._newBacklogLevelsSignature},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"team",{get:function(){return this._team},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"artifactPickerTeams",{get:function(){return this._allArtifactPickerTeams},enumerable:!1,configurable:!0}),t.prototype._attachActionListeners=function(n){n.headerDataAvailable.addListener(this._headerDataAvailable);n.changeBacklogLevel.addListener(this._changeBacklogLevel);n.allArtifactPickerTeamsAvailable.addListener(this._allArtifactPickerTeamsAvaiable)},t.prototype._getBacklogById=function(n,t){if(n)return f.first(this._allBacklogLevels,function(n){return n.id===t})},t.prototype._getBacklogByLevel=function(n,t){if(n)return f.first(this._allBacklogLevels,function(n){return n.name===t})},t.prototype._getNextBacklog=function(n,t){if(n&&n.length>1){var i=f.findIndex(n,function(n){return n.id===t});if(i>0)return n[i-1]}},t}(u.Store);t.BacklogContentViewStore=o});

define("Presentation/Scripts/TFS/TFS.Rest.Utils",["require","exports"],function(n,t){function i(n,t,r){return t===void 0&&(t=500),r===void 0&&(r=0),n(t,r).then(function(u){return u.length<t?u:i(n,t,r+u.length).then(function(n){return u.concat(n)})})}Object.defineProperty(t,"__esModule",{value:!0});t.batchGet=void 0;t.batchGet=i});

define("Agile/Scripts/Sources/TeamSource",["require","exports","Agile/Scripts/Models/Team","Presentation/Scripts/TFS/TFS.Rest.Utils","TFS/Core/RestClient","VSS/Settings/Services","VSSPreview/Utilities/PromiseUtils","VSS/Context"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.TeamSource=t.TEAM_PAGE_SIZE=t.TEAM_PAGE_SIZE_KEY=void 0;t.TEAM_PAGE_SIZE_KEY="Agile/TeamSource/TeamPageSize";t.TEAM_PAGE_SIZE=1e3;var s=function(){function n(){}return n.prototype.fetchTeamsForCurrentProject=function(n){var t=o.getDefaultWebContext().project.id;return this.fetchTeamsForProject(t,n)},n.prototype.fetchMemberTeams=function(){var n=u.getClient(),t=o.getDefaultWebContext().project.id;return e.toNativePromise(n.getTeams(t,!0).then(function(n){return n.map(function(n){return i.TeamBuilder.fromWebApiTeamWithMembership(n,!0)})}))},n.prototype.fetchTeamsForProject=function(n,o){var s,h,c;return o==null&&(s=f.getService(),o=s.getEntry(t.TEAM_PAGE_SIZE_KEY,1)||t.TEAM_PAGE_SIZE),h=u.getClient(),c=function(t,i){return h.getTeams(n,!1,t,i)},e.toNativePromise(r.batchGet(c,o).then(function(n){return n.map(function(n){return i.TeamBuilder.fromWebApiTeamWithMembership(n,!1)})}))},n}();t.TeamSource=s});

define("Agile/Scripts/BacklogsHub/BacklogsHubContentRegistration",["require","exports","Agile/Scripts/BacklogsHub/BacklogContentView/ActionsCreator/BacklogContentViewActions","Agile/Scripts/BacklogsHub/BacklogContentView/ActionsCreator/BacklogContentViewActionsCreator","Agile/Scripts/BacklogsHub/BacklogContentView/Components/BacklogContentView","Agile/Scripts/BacklogsHub/BacklogContentView/Store/BacklogContentViewStore","Agile/Scripts/Generated/HubConstants","Presentation/Scripts/TFS/PerformanceTelemetryHelper","react","react-dom","VSS/Context","VSS/SDK/Shim","Agile/Scripts/Sources/TeamSource","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){Object.defineProperty(t,"__esModule",{value:!0});l.registerContent("backlogs-hub:content:view",function(n){var t=o.PerformanceTelemetryHelper.getInstance(e.BacklogsHubConstants.HUB_NAME),y,l;t.isActive()&&t.abort();t.startInitialLoad(o.PerformanceTelemetryHelper.constructNavigationScenarioName(e.BacklogsHubConstants.HUB_NAME));t.split(v.BacklogsHubTelemetryConstants.BACKLOGS_START_LOADCONTENTVIEW);y=c.getPageContext().navigation.routeValues[e.AgileRouteParameters.Pivot];l=c.getPageContext().navigation.routeValues[e.AgileRouteParameters.BacklogLevel];t.addData({pivot:y,backlogLevel:l});var p=new i.BacklogContentViewActions,w=new r.BacklogContentViewActionsCreator(p),b=new f.BacklogContentViewStore(p),k=new a.TeamSource;return h.render(s.createElement(u.BacklogContentView,{backlogActionsCreator:w,backlogStore:b,backlogLevel:l,teamSource:k}),n.container),{dispose:function(){h.unmountComponentAtNode(n.container)}}})});

define("Agile/Scripts/Common/Components/DynamicPivotItem",["require","exports","react","VSS/Contributions/Services","VSS/Service","VSS/WebApi/Constants","VSS/Utils/Core","VSS/VSS","Agile/Scripts/Common/Components/ComponentRegistration","VSS/Diag"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.DynamicPivotItem=void 0;var c=function(n){function t(t,i){var s=__construct(this,n,[t,i]),l,v;for(l in s)s.hasOwnProperty(l)&&(this[l]=s[l]);s._cancelable=new e.Cancelable(null);s.state={isLoading:!1};var a=s.props,y=a.shouldReloadDataProviders,c=a.dataProviders;return y&&c&&c.length>0?(s.state={isLoading:!0},v=c.map(function(n){return{id:n,properties:{serviceInstanceType:f.ServiceInstanceTypes.TFS}}}),u.getService(r.WebPageDataService).ensureDataProvidersResolved(v,!0).then(s._cancelable.wrap(function(){s._finishDataRetrieval();s._cancelable=null}),o.handleError)):h.Debug.assert(c&&c.every(function(n){return u.getService(r.WebPageDataService).getPageDataSource(n)!==undefined}),"All data providers for this pivot were not resolved by the contribution service"),s}return __extends(t,n),t.prototype.componentWillUnmount=function(){var n,f,t,i,e;if(this._cancelable&&this._cancelable.cancel(),n=this.props.dataProviders,n&&n.length>0)for(f=u.getService(r.WebPageDataService),t=0,i=n;t<i.length;t++)e=i[t],f.removePageData(e)},t.prototype.render=function(){var n=this.props,t=n.onRenderLoading,r=n.componentProps,u=n.modules,f=n.componentKey,e=this.state.isLoading;return e?t():i.createElement(s.ComponentWrapper,{modules:u,componentProps:r,componentKey:f})},t.prototype._finishDataRetrieval=function(){this.setState({isLoading:!1})},t}(i.Component);t.DynamicPivotItem=c});

define("Agile/Scripts/BacklogsHub/AnalyticsPivot/BacklogsAnalyticsPivotRegistration",["require","exports","Agile/Scripts/Common/Components/ComponentRegistration","Agile/Scripts/Common/Components/DynamicPivotItem","Presentation/Scripts/TFS/Components/LoadingComponent","react"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogsAnalyticsPivotRegistration=void 0;var e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this.props.pivotContext;return f.createElement(r.DynamicPivotItem,{dataProviders:[],shouldReloadDataProviders:n.shouldReloadDataProviders,modules:["Agile/Scripts/BacklogsHub/AnalyticsPivot/BacklogsAnalyticsPivot"],onRenderLoading:function(){return f.createElement(u.LoadingComponent,null)},componentProps:n,componentKey:"backlogs-analytics-pivot"})},__decorate([i.component("work.backlogshub.analytics")],t)}(f.Component);t.BacklogsAnalyticsPivotRegistration=e});

define("Agile/Scripts/BacklogsHub/BacklogPivot/BacklogPivotRegistration",["require","exports","Agile/Scripts/Common/Components/ComponentRegistration","Agile/Scripts/Common/Components/DynamicPivotItem","Presentation/Scripts/TFS/Components/LoadingComponent","Agile/Scripts/Generated/HubConstants","react"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogPivot=void 0;var o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this.props.pivotContext;return e.createElement(r.DynamicPivotItem,{dataProviders:[f.BacklogsHubConstants.PRODUCTBACKLOG_DATAPROVIDER_ID,f.AgileHubContributionIds.BacklogConfiguration_DataProvider,f.AgileHubContributionIds.TeamSetting_DataProvider],shouldReloadDataProviders:n.shouldReloadDataProviders,modules:["Agile/Scripts/BacklogsHub/BacklogPivot/Components/BacklogPivot"],onRenderLoading:function(){return e.createElement(u.LoadingComponent,null)},componentProps:n,componentKey:"backlogs-backlog-pivot"})},__decorate([i.component("work.backlogshub.backlog")],t)}(e.Component);t.BacklogPivot=o});

define("Agile/Scripts/Backlog/Constants",["require","exports"],function(n,t){var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.BacklogBehaviorConstants=t.CapacityPanelConstants=t.GroupedProgressControlConstants=t.BacklogAddPanelConsts=void 0,function(n){n.CSSCLASS_ADD_PANEL_INPUT="add-panel-input"}(i=t.BacklogAddPanelConsts||(t.BacklogAddPanelConsts={})),function(n){n.CSSCLASS_PROGRESS_CONTROL="capacity-pane-progress-control"}(r=t.GroupedProgressControlConstants||(t.GroupedProgressControlConstants={})),function(n){n.ASSIGNED_TO_GROUPED_PROGRESS_CONTAINER="assigned-to-grouped-progress-control"}(u=t.CapacityPanelConstants||(t.CapacityPanelConstants={})),function(n){n.BACKLOG_BUTTONS_COLUMN_NAME="backlog-buttons-column";n.BACKLOG_BUTTONS_COLUMN_DEFAULTS={canSortBy:!1,canMove:!1,fieldId:null,fixed:!0,name:n.BACKLOG_BUTTONS_COLUMN_NAME,text:"",width:40}}(f=t.BacklogBehaviorConstants||(t.BacklogBehaviorConstants={}))});

define("Agile/Scripts/Backlog/BacklogExpandCollapseButtonBehavior",["require","exports","Agile/Scripts/Backlog/Constants","Agile/Scripts/Resources/TFS.Resources.Agile","VSS/Controls/PopupContent","VSS/Utils/Array","VSS/Utils/String","VSS/Utils/UI"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogExpandCollapseButtonBehavior=void 0;var s=function(){function n(n,t){this._onExpandClicked=n;this._onCollapseClicked=t}return n.prototype.onPrepareColumns=function(n){var h=this,t=f.findIndex(n,function(n){return e.ignoreCaseComparer(n.name,i.BacklogBehaviorConstants.BACKLOG_BUTTONS_COLUMN_NAME)===0}),s=t<0?__assign({},i.BacklogBehaviorConstants.BACKLOG_BUTTONS_COLUMN_DEFAULTS):n[t];s.headerContainerCss="expand-collapse-icons-header";s.getHeaderCellContents=function(){var t=$("<div/>"),i=$("<span>").addClass("expand-icon bowtie-icon bowtie-toggle-expand").attr({"aria-label":r.ExpandAll,role:"button",tabindex:-1}).click(h._onExpandClicked).keydown(o.buttonKeydownHandler),n;return u.RichContentTooltip.add(r.ExpandOneLevel,i),n=$("<span/>").addClass("collapse-icon bowtie-icon bowtie-toggle-collapse").attr({"aria-label":r.CollapseAll,role:"button",tabindex:-1}).click(h._onCollapseClicked).keydown(o.buttonKeydownHandler),u.RichContentTooltip.add(r.CollapseOneLevel,n),t.append(i).append(n),t};t<0&&n.splice(0,0,s)},n.prototype.setGrid=function(){},n}();t.BacklogExpandCollapseButtonBehavior=s});

define("WorkItemTracking/Scripts/Filtering/FieldFilterProvider",["require","exports","VSS/Utils/Core","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Diag"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.FieldFilterProvider=void 0;var f=function(){function n(n){this._fieldName=n;this._filterValueMap={}}return n.prototype.bind=function(n){this._dataProvider=n},n.prototype.setFilter=function(n){var t,r,u,f;if(this._filter=n,this._filterValueMap={},n&&n.values&&n.values.length)for(t=0,r=n.values;t<r.length;t++)u=r[t],f=i.convertValueToDisplayString(u),this._filterValueMap[f]=!0},n.prototype.getFilter=function(){return this._filter},n.prototype.clearFilters=function(){this._filterValueMap={}},n.prototype.dataUpdated=function(){},n.prototype.getMatchingItems=function(n){var i,t,r,f,e;for(u.Debug.assert(this.isFiltering(),"must be filtering before calling getMatchingItems"),n===null&&(n=this._dataProvider.getIds()),i=[],t=0,r=n;t<r.length;t++)f=r[t],e=this._dataProvider.getValue(f,this._fieldName),this.matchesFilter(e)&&i.push(f);return i},n.prototype.isFiltering=function(){return!!this._filterValueMap&&Object.keys(this._filterValueMap).length>0},n.prototype.matchesFilter=function(n){u.Debug.assert(this._fieldName!==r.CoreFieldRefNames.Tags,"Use the TagFilterProvider to filter on tags");var t=i.convertValueToDisplayString(n);return t in this._filterValueMap?!0:!1},n}();t.FieldFilterProvider=f});

define("WorkItemTracking/Scripts/Filtering/FilterManager",["require","exports","VSS/Utils/Core","VSS/Diag","VSS/Events/Handlers","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence"],function(n,t,i,r,u,f,e){function s(n){return!n||!Object.keys(n).some(function(t){var i=n[t]&&n[t].values;return i&&i.length>0})}Object.defineProperty(t,"__esModule",{value:!0});t.isFilterStateEmpty=t.FilterManager=void 0;var o=function(){function n(n){this._filterProviders={};this._reset();this._dataSource=n}return n.prototype.activate=function(){this._isActive||(this._isActive=!0,this._fireEvent(n.EVENT_FILTER_ACTIVATED),this._publishActivatedTelemetry())},n.prototype.deactivate=function(){this._isActive&&(this._isActive=!1,this._fireEvent(n.EVENT_FILTER_DEACTIVATED))},n.prototype.isActive=function(){return this._isActive},n.prototype.dataUpdated=function(){var t,i;for(t in this._filterProviders)i=this._filterProviders[t],i.dataUpdated();this._fireEvent(n.EVENT_DATA_UPDATED)},n.prototype.isFiltering=function(){var n,t,i;if(!this.isActive())return!1;n=!1;for(t in this._filterProviders)i=this._filterProviders[t],n=n||i.isFiltering();return n},n.prototype.registerFilterProvider=function(n,t){r.Debug.assertParamIsString(n,"provider");r.Debug.assertParamIsObject(t,"filterProvider");r.Debug.assert(!this._filterProviders[n],"FilterProvider for '".concat(n,"' already registered"));this._filterProviders[n]=t;t.bind(this._dataSource)},n.prototype.unregisterFilterProvider=function(n){r.Debug.assertParamIsString(n,"provider");delete this._filterProviders[n]},n.prototype.clearFilterProviders=function(){this._filterProviders={}},n.prototype.getFilterProvider=function(n){return this._filterProviders[n]},n.prototype.setFilters=function(n){var t,i;if(this._clearAllFilters(),n)for(t in n)i=this._filterProviders[t],i&&i.setFilter(n[t]);this._fireFilterChanged()},n.prototype.getFilters=function(){var i={},n,t,r;for(n in this._filterProviders)t=this._filterProviders[n],t.isFiltering()&&(r=t.getFilter(),i[n]=r);return i},n.prototype.setFilter=function(n,t){var i=this._getFilterProvider(n);i&&(i.setFilter(t),this._fireFilterChanged())},n.prototype.getFilter=function(n){var t=this._getFilterProvider(n);return t?t.getFilter():null},n.prototype.clearFilters=function(n){this.isFiltering()&&(n?this._filterProviders[n].clearFilters():this._clearAllFilters(),this._fireFilterChanged())},n.prototype.filter=function(){var i,n,u,t;if(r.Debug.assert(this.isActive(),"Filter not active when 'filter()' is called"),i=Date.now(),!this.isFiltering())return this._dataSource.getIds();n=null;for(u in this._filterProviders)(t=this._filterProviders[u],t.isFiltering())&&(n=t.getMatchingItems(n));return n||(n=[]),this._publishFilterTelemetry(n.length,Date.now()-i),n},n.prototype.attachEvent=function(n,t){this._events||(this._events=new u.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n.prototype.getFilterDataSource=function(){return this._dataSource},n.prototype._reset=function(){this.clearFilters()},n.prototype._getFilterProvider=function(n){return this._filterProviders[n]},n.prototype._clearAllFilters=function(){var n,t;for(n in this._filterProviders)t=this._filterProviders[n],t.clearFilters()},n.prototype._fireFilterChanged=function(){this.isActive()&&(this.isFiltering()?this._fireEvent(n.EVENT_FILTER_CHANGED):this._fireEvent(n.EVENT_FILTER_CLEARED))},n.prototype._fireEvent=function(n,t){if(this._events){var i=!1;if(this._events.invokeHandlers(n,this,t,function(n){if(n===!1)return i=!0,!0}),i)return!1}},n.prototype._publishActivatedTelemetry=function(){f.publishEvent(new f.TelemetryEventData(e.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,e.WITCustomerIntelligenceFeature.RESULT_FILTER,{experience:this._dataSource.getDataSourceName(),action:"ActivateFilter",totalCount:this._dataSource.getItemCount(),initialPagedCount:this._dataSource.getIds().length,columnsCount:(this._dataSource.getVisibleFields()||[]).length}))},n.prototype._publishFilterTelemetry=function(n,t){var r=this;this._lastResultCount=n;this._lastDuration=t;this._filterTelemetryThrottleDelegate||(this._filterTelemetryThrottleDelegate=i.throttledDelegate(this,2e3,function(){r.isFiltering()&&f.publishEvent(new f.TelemetryEventData(e.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,e.WITCustomerIntelligenceFeature.RESULT_FILTER,{experience:r._dataSource.getDataSourceName(),action:"Filter",totalCount:r._dataSource.getItemCount(),pagedCount:r._dataSource.getIds().length,columnsCount:(r._dataSource.getVisibleFields()||[]).length,resultCount:r._lastResultCount,activeFilterProviders:Object.keys(r.getFilters()),duration:r._lastDuration}))}));this._filterTelemetryThrottleDelegate()},n.EVENT_FILTER_CHANGED="filter-changed",n.EVENT_FILTER_CLEARED="filter-cleared",n.EVENT_FILTER_ACTIVATED="filter-activated",n.EVENT_FILTER_DEACTIVATED="filter-deactivated",n.EVENT_DATA_UPDATED="filter-data-updated",n}();t.FilterManager=o;t.isFilterStateEmpty=s});

define("WorkItemTracking/Scripts/Filtering/TagsFilterProvider",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Filtering/FieldFilterProvider","WorkItemTracking/Scripts/Utils/TagUtils"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.TagsFilterProvider=void 0;var f=function(n){function t(){var t=n.call(this,i.CoreFieldRefNames.Tags)||this;return t._filterValues=[],t}return __extends(t,n),t.prototype.setFilter=function(t){n.prototype.setFilter.call(this,t);this._filterValues=t?t.values:[]},t.prototype.matchesFilter=function(n){var i=this,t;return n?(t=u.TagUtils.splitAndTrimTags(n),this._filter&&this._filter.options&&this._filter.options.useAndOperator?this._filterValues.every(function(n){return t.indexOf(n)>=0}):t.some(function(n){return n in i._filterValueMap})):!1},t}(r.FieldFilterProvider);t.TagsFilterProvider=f});

define("VSS/Search",["require","exports","VSS/Diag","VSS/Utils/Array","VSS/Utils/Core","VSS/VSS"],function(n,t,i,r,u,f){function h(n,t){var u=n.length,r,f,e,i;if(u>1){for(n.sort(t),r=new Array(u),r[0]=n[0],f=0,e=1,i=1;i<u;i++)n[i]!==n[f]&&(r[e++]=n[i],f=i);r.length=e;n=r}return n}var c,l,e,a,v,o,p,w,b;Object.defineProperty(t,"__esModule",{value:!0});t.fastUnique=t.SearchableObject=t.SearchAdapter=t.InvertedIndexStore=t.TrieStore=t.IndexedSearchStore=t.IndexedSearchStrategy=t.SubstringSearchStrategy=t.SearchStrategy=t.SearchCore=void 0;c=u.delegate;l=function(){function n(n,t){this._strategy=n;this._adapter=t}return n.prototype.addItems=function(n){var t=this;i.measurePerformance(function(){t._strategy.processItems(n)},"[SearchCore] Index Building Time");i.logTracePoint("SearchCore.finishIndexing")},n.prototype.beginSearch=function(n){var r=this,t;return this._adapter.isDataSetComplete()||this._adapter.addMoreItems(c(this,this.addItems),function(){r.beginSearch(n)}),i.measurePerformance(function(){t=r._strategy.search(n)},"[SearchCore] Search Time"),this._adapter.handleResults(t,!0,n),t},n.prototype.getStrategy=function(){return this._strategy},n.prototype.clearStrategyStore=function(){this.getStrategy().clearStrategyStore()},n}();t.SearchCore=l;e=function(){function n(n){this._options=$.extend({},n);this._options.specialCharacters&&this._options.specialCharacters.length&&this._buildSpecialCharacterHashSet(this._options.specialCharacters)}return n.getTerms=function(n,t){var e,u,o,s,f,r,h;for(e=new Object(void 0),u=0,o=n;u<o.length;u++)for(s=o[u],f=s.toLocaleLowerCase().split(t||" "),r=0,h=f.length;r<h;r++)f[r]&&(e[f[r]]=!0);return Object.keys(e)},n.prototype._buildSpecialCharacterHashSet=function(n){var t,i,r;for(this._specialCharactersHashSet={},t=0,i=n;t<i.length;t++)r=i[t],this._specialCharactersHashSet[r.toLocaleLowerCase()]=!0},n.prototype._getTerms=function(t){var u=n.getTerms(t,this._options.delimiter),r,f;if(this._specialCharactersHashSet)for(r=0,f=u;r<f.length;r++){for(var e=f[r],i=0,o=e.length;i<o&&this._specialCharactersHashSet.hasOwnProperty(e[i]);)i++;i>0&&i<o&&u.push(e.substr(i))}return u},n.prototype.processItems=function(){},n.prototype.clearStrategyStore=function(){},n.prototype.search=function(){return[]},n.prototype.dataExists=function(){return!1},n.prototype.getIndexedItemsCount=function(){return 0},n.prototype.getIndexTotalSize=function(){return 0},n}();t.SearchStrategy=e;a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.processItems=function(n){for(var t,i=0,r=n;i<r.length;i++)t=r[i],t.terms.length===0||this._indexedItemsMap[t.item.toString()]||(this._indexedItemsMap[t.item.toString()]=t.terms.join(" ").toLowerCase())},t.prototype.getIndexTotalSize=function(){return Object.keys(this._indexedItemsMap).length},t.prototype.clearStrategyStore=function(){this._indexedItemsMap=new Map},t.prototype.getIndexedItemsCount=function(){return Object.keys(this._indexedItemsMap).length},t.prototype.search=function(n){var u=n.trim().toLowerCase(),i,t,r;if(u==="")return Object.keys(this._indexedItemsMap).map(function(n){return parseInt(n)});for(i=[],t=0,r=Object.entries(this._indexedItemsMap);t<r.length;t++){var f=r[t],e=f[0],o=f[1];o.includes(u)&&i.push(parseInt(e))}return i},t.prototype.dataExists=function(){return this._indexedItemsMap.size>0},t}(e);t.SubstringSearchStrategy=a;v=function(n){function t(t,i){var r=n.call(this,i)||this,u;return t?r._searchStore=t:(u={comparer:r._options.comparer},i&&i.delimiter&&(u.delimiter=i.delimiter),r._searchStore=new y(u)),r._dataExists=!1,r._indexedItems=[],r}return __extends(t,n),t.prototype.getIndexTotalSize=function(){return this._searchStore.getStoreTotalSize()},t.prototype.clearStrategyStore=function(){this._dataExists=!1;this._indexedItems=[];this._searchStore.clearStrategyStore()},t.prototype.getIndexedItemsCount=function(){return this._indexedItems.length},t.prototype.processItems=function(n){var f,r,u,t;for(f=0,r=0,u=n;r<u.length;r++)t=u[r],t.terms.length!==0&&this._searchStore.addToIndex(t.item,this._getTerms(t.terms))&&(this._indexedItems.push(t.item),f+=t.terms.length);this._dataExists=!0},t.prototype.search=function(n){var t=$.trim(n);return t===""?this._indexedItems:this._searchStore.search(t)},t.prototype.dataExists=function(){return this._dataExists},t}(e);t.IndexedSearchStrategy=v;o=function(){function n(n){this._options=n||{};this._comparer=this._options.comparer}return n.prototype.search=function(){return[]},n.prototype.addToIndex=function(){return!1},n.prototype.clearStrategyStore=function(){},n.prototype.getStoreTotalSize=function(){return 0},n}();t.IndexedSearchStore=o;var s=function(){function n(n){this.children={};this.content=[];n&&this.content.push(n)}return n}(),k=function(){function n(n){this.root=new s;this.SIZEOF_KEY=2;this.SIZEOF_NUMBER=8;this._comparer=n;this._trieSize=0}return n.prototype.insert=function(n,t){for(var i=this.root,r=0,o=n.length,u,f,e;r<o;++r)if(f=i.children[n[r]],f)i=f;else break;for(;r<o;++r)u=new s,this._trieSize+=this.SIZEOF_KEY,i.children[n[r]]=u,i=u;return e=!1,i.content.indexOf(t)===-1&&(i.content.push(t),this._trieSize+=this.SIZEOF_NUMBER,e=!0),e},n.prototype.find=function(n){for(var r,t=this.root,i=0,u=n.length;i<u;++i)if(r=n[i],t.children[r])t=t.children[r];else return null;return this._getAllDescendantContent(t)},n.prototype._getAllDescendantContent=function(n){var i=[],r=[],t,u;for(i.push(n);i.length;)if(t=i.pop(),t.content&&t.content.length&&(r=r.concat(t.content)),t.children)for(u in t.children)i.push(t.children[u]);return h(r,this._comparer)},n.prototype.clear=function(){this.root=new s;this._trieSize=0},n.prototype.getTrieTotalSize=function(){return this._trieSize},n}(),y=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._trie=new k(i._comparer),i}return __extends(t,n),t.prototype.search=function(n){for(var u,f,h=e.getTerms([n],this._options.delimiter),t=[],o=0,s=h;o<s.length;o++)if(u=s[o],u&&(f=this._trie.find(u),t=f?t.length===0?f:r.intersectUniqueSorted(t,f,this._comparer):[],t.length===0))break;return t},t.prototype.addToIndex=function(n,t){var u,r,f,e;for(u=!0,r=0,f=t;r<f.length;r++)e=f[r],this._trie.insert(e,n)||(u=!1);return u},t.prototype.clearStrategyStore=function(){this._trie.clear()},t.prototype.getStoreTotalSize=function(){return this._trie.getTrieTotalSize()},t}(o);t.TrieStore=y;p=function(n){function t(t){var i=n.call(this,t)||this;return i._index={},i._tokenCache={},i}return __extends(t,n),t.prototype.search=function(n){var s,t,u,o,c,f;for(s=e.getTerms([n],this._options.delimiter),t=[],u=0,o=s;u<o.length;u++)if(c=o[u],f=this._index[c],f)t=t.length===0?f:r.intersect(t,f,this._comparer);else{t=[];break}return h(t,this._comparer)},t.prototype.addToIndex=function(n,t){var f,e,h,r,u,l,o,s,c,a;if(f=!0,t)for(e=0,h=t;e<h.length;e++)if(r=h[e],u=[],r){if(this._addItemToIndex(n,r)||(f=!1),this._tokenCache[r])u=this._tokenCache[r];else{for(l=r.length,o=1;o<l;o++)u.push(r.substring(0,o));this._tokenCache[r]=u}if(u)for(s=0,c=u;s<c.length;s++)a=c[s],this._addItemToIndex(n,a)||(f=!1)}return f},t.prototype.clearStrategyStore=function(){this._index={}},t.prototype._addItemToIndex=function(n,t){var u=!1,r=this._index[t];return r||(r=[],this._index[t]=r),r.indexOf(n)===-1&&(r.push(n),u=!0),u},t}(o);t.InvertedIndexStore=p;w=function(){function n(){}return n.prototype.addMoreItems=function(){},n.prototype.createSearchableObjects=function(){return[]},n.prototype.handleResults=function(){},n.prototype.handleError=function(){},n.prototype.handleClear=function(){},n.prototype.isDataSetComplete=function(){return!1},n}();t.SearchAdapter=w;b=function(){function n(n,t){this.item=n;this.terms=t}return n.prototype.setTerms=function(n){this.terms=n},n.prototype.addTerm=function(n){this.terms.push(n)},n}();t.SearchableObject=b;t.fastUnique=h;f.tfsModuleLoaded("VSS.Search",t)});

define("WorkItemTracking/Scripts/Filtering/TextFilterProvider",["require","exports","VSS/Diag","VSS/Search","VSS/Utils/Array","VSS/Utils/Core","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u,f,e,o,s){var h,a,c,l,v,y;Object.defineProperty(t,"__esModule",{value:!0});t.SubstringTextFilterProvider=t.TextFilterProviderWithUnassigned=t.TextSearchAdapter=t.TextFilterProvider=t.BaseTextFilterProvider=t.SearchStrategySpecialCharacters=void 0;t.SearchStrategySpecialCharacters=["{","(","[","!","@","#","$","%","^","&","*","~","`","'",'"'];h=function(){function n(){this._searchAdapter=this.getSearchAdapter();this._searchCore=new r.SearchCore(this._createSearchStrategy(),this._searchAdapter);this._updateRequired=!0}return n.prototype.bind=function(n){this._dataProvider=n},n.prototype.setFilter=function(n){this._searchValues=[];n&&n.values&&n.values.length&&(i.Debug.assert(n.values.every(function(n){return typeof n=="string"}),"Text filter only supports strings"),this._searchValues=n.values)},n.prototype.getFilter=function(){return{values:this._searchValues||[]}},n.prototype.clearFilters=function(){this._searchValues=null},n.prototype.dataUpdated=function(){this._updateRequired=!0},n.prototype.getMatchingItems=function(n){i.Debug.assert(this.isFiltering(),"must be filtering before calling getMatchingWorkItems");this._updateRequired&&(this._searchAdapter.setDataSource(this._dataProvider),this._searchCore.clearStrategyStore(),this._searchCore.addItems(this._searchAdapter.createSearchableObjects()),this._updateRequired=!1);var t=this._searchCore.beginSearch(this._searchValues.join(" "));return t&&n&&(t=u.intersectPrimitives(n,t)),t},n.prototype.isFiltering=function(){return!!this._searchValues&&this._searchValues.some(function(n){return n!==""})},n.prototype._createSearchStrategy=function(){return new r.IndexedSearchStrategy(null,{specialCharacters:t.SearchStrategySpecialCharacters,delimiter:/[\s\\/\.]/,comparer:function(n,t){return n-t}})},n.PROVIDER_TYPE="text",n}();t.BaseTextFilterProvider=h;a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getSearchAdapter=function(){return new c},t}(h);t.TextFilterProvider=a;c=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.setDataSource=function(n){this._dataSource=n},t.prototype.getDataSource=function(){return this._dataSource},t.prototype.createSearchableObjects=function(){for(var u,t,i=[],f=this._dataSource.getIds(),n=0,r=f;n<r.length;n++)u=r[n],t=this.createSearchableObject(u),t&&i.push(t);return i},t.prototype.createSearchableObject=function(n){var u,c,e,s,h;for(i.Debug.assertParamIsNumber(n,"workItemId"),u=new r.SearchableObject(n,[]),c=this._dataSource.getVisibleFields(),e=0,s=c;e<s.length;e++){var a=s[e],t=this._dataSource.getValue(n,a),l=typeof t;l==="string"?u.addTerm(t):l==="number"?u.addTerm(t+""):t&&o.isWorkItemIdentityRef(t)&&t.identityRef&&t.identityRef.displayName?u.addTerm(t.identityRef.displayName):t&&o.isIdentityRef(t)&&t.displayName?u.addTerm(t.displayName):(h=f.convertValueToDisplayString(t),h&&u.addTerm(h))}return u},t.prototype.handleResults=function(){},t.prototype.handleError=function(){i.Debug.fail("handleError for TextSearchAdapter called")},t.prototype.handleClear=function(){},t.prototype.isDataSetComplete=function(){return!0},t.prototype.addMoreItems=function(){i.Debug.fail("addMoreItems should never be called")},t}(r.SearchAdapter);t.TextSearchAdapter=c;l=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getSearchAdapter=function(){return new v},t}(h);t.TextFilterProviderWithUnassigned=l;v=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._containsAssignedToMeColumn=!1,t}return __extends(t,n),t.prototype.createSearchableObjects=function(){var t=this.getDataSource();return this._containsAssignedToMeColumn=u.contains(t.getVisibleFields(),e.CoreFieldRefNames.AssignedTo),n.prototype.createSearchableObjects.call(this)},t.prototype.createSearchableObject=function(t){var i=n.prototype.createSearchableObject.call(this,t),r=this.getDataSource();return this._containsAssignedToMeColumn&&!r.getValue(t,e.CoreFieldRefNames.AssignedTo)&&i.addTerm(s.AssignedToEmptyText),i},t}(c);y=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype._createSearchStrategy=function(){return new r.SubstringSearchStrategy},t}(l);t.SubstringTextFilterProvider=y});

define("WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.Common",["require","exports"],function(require,exports){var e=exports;e.WiqlOperators_NotEver="Was Never";e.WiqlOperators_And="And";e.WiqlOperators_Any="[Any]";e.WiqlOperators_NotEqualTo="\u003c\u003e";e.WiqlOperators_MacroMyRecentActivity="MyRecentActivity";e.WiqlOperators_NotUnder="Not Under";e.WiqlOperators_Contains="Contains";e.WiqlOperators_LessThan="\u003c";e.WiqlOperators_MacroProject="Project";e.WiqlOperators_Or="Or";e.WiqlOperators_In="In";e.WiqlOperators_InGroup="In Group";e.WiqlOperators_LessThanOrEqualTo="\u003c=";e.WiqlOperators_IsEmpty="Is Empty";e.WiqlOperators_MacroToday="Today";e.WiqlOperators_Ever="Was Ever";e.WiqlOperators_MacroTeamAreas="TeamAreas";e.WiqlOperators_FieldComparisonReferenceName="Field";e.WiqlOperators_GreaterThanOrEqualTo="\u003e=";e.WiqlOperators_MacroMe="Me";e.WiqlOperators_ContainsWords="Contains Words";e.WiqlOperators_FieldComparisonQualifier=" [Field]";e.WiqlOperators_MacroRecentMentions="RecentMentions";e.WiqlOperators_MacroCurrentIteration="CurrentIteration";e.WiqlOperators_NotContainsWords="Does Not Contain Words";e.WiqlOperators_MacroRecentProjectActivity="RecentProjectActivity";e.WiqlOperators_NotIn="Not In";e.WiqlOperators_Under="Under";e.WiqlOperators_NotContains="Does Not Contain";e.WiqlOperators_MacroFollows="Follows";e.WiqlOperators_MacroStartOfMonth="StartOfMonth";e.WiqlOperators_MacroStartOfDay="StartOfDay";e.WiqlOperators_MacroStartOfWeek="StartOfWeek";e.WiqlOperators_MacroStartOfYear="StartOfYear";e.WiqlOperators_IsNotEmpty="Is Not Empty";e.WiqlOperators_MacroTodayMinusDaysFormat="{0} - {1}";e.WiqlOperators_GreaterThan="\u003e";e.WiqlOperators_EqualTo="=";e.WiqlOperators_NotInGroup="Not In Group";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/OM/WiqlOperators",["require","exports","VSS/Utils/Date","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.Common","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f){function o(n,t){k[n.toUpperCase()]=t;l[t.toLocaleUpperCase()]=n}function s(n){return k[$.trim(n).toUpperCase()]||n}function tt(n){return $.map(n,function(n){return s(n)})}function it(n){return d.hasOwnProperty($.trim(n).toLocaleUpperCase())}function g(n){return s(n)+u.WiqlOperators_FieldComparisonQualifier}function nt(n,t){return t?r.startsWith(n,s(e.MacroToday),r.localeIgnoreCaseComparer):r.startsWith(n,e.MacroToday,r.ignoreCaseComparer)}function rt(n,t){return t?r.localeIgnoreCaseComparer(n,s(e.MacroMe))===0:r.localeIgnoreCaseComparer(n,e.MacroMe)===0}function ut(n,t){return t?r.localeIgnoreCaseComparer(n,s(e.MacroCurrentIteration))===0:r.localeIgnoreCaseComparer(n,e.MacroCurrentIteration)===0}function ft(n,t){return t?r.localeIgnoreCaseComparer(n,s(e.MacroProject))===0:r.localeIgnoreCaseComparer(n,e.MacroProject)===0}function et(n,t){return t?r.localeIgnoreCaseComparer(n,s(e.OperatorOr))===0:r.localeIgnoreCaseComparer(n,e.OperatorOr)===0}function w(n){return e.MacroToday+n.substring(s(e.MacroToday).length)}function ot(n){var t=s(e.MacroToday),i=w(e.MacroToday);return t+n.substring(i.length)}function st(n){return r.format("{0} - {1}",s(e.MacroToday),n)}function ht(n){return r.format("{0}('{1}d')",s(e.MacroStartOfDay),n)}function ct(n){return(n=$.trim(n),!r.startsWith(n,e.MacroStart,r.ignoreCaseComparer))?!1:!0}function h(n){var t=l[$.trim(n).toLocaleUpperCase()];return t?t:nt(n,!0)?w(n):n}function lt(n){return v.hasOwnProperty(h(n).toUpperCase())}function at(n){return h(n)===e.OperatorIn}function vt(n){return y.hasOwnProperty(h(n).toUpperCase())}function yt(n){return p.hasOwnProperty(h(n).toUpperCase())}function pt(n){return n===f.CoreField.State||n===f.CoreField.WorkItemType||n===f.CoreField.LinkType}function wt(n){return"'"+(n||"").replace(/\'/g,"''")+"'"}function bt(n){return i.format(n,"yyyy-MM-ddT00:00:00.0000000")}var e,a,v,y,p,c,b;Object.defineProperty(t,"__esModule",{value:!0});t.toInvariantDateString=t.quoteString=t.isNonNullableField=t.isIdentityFieldStringOperator=t.isMultipleValueOperator=t.isInOperator=t.isGroupOperator=t.getInvariantOperator=t.isValidMacro=t.getLocalizedStartOfDayMacro=t.getLocalizedTodayMinusMacro=t.getLocalizedTodayMacro=t.getInvariantTodayMacro=t.isOrOperator=t.isProjectMacro=t.isCurrentIterationMacro=t.isMeMacro=t.isTodayMacro=t.getFieldComparisonOperator=t.isFieldComparisonOperator=t.getLocalizedOperatorList=t.getLocalizedOperator=t.FieldTypesSupportingFieldComparison=t.FieldTypesSupportingEver=t.OperatorsSupportingFieldComparison=t.EqualityOperators=t.ComparisonOperators=t.TreePathOperators=t.StringWithInGroupOperators=t.StringWithTextSupportOperators=t.HistoryWithTextSupportOperators=t.TextWithTextSupportOperators=t.HistoryOperators=t.TextOperators=t.InGroupOperators=t.StringOperators=t.ProjectOperators=t.WiqlOperators=void 0,function(n){n.NotSpace="NOT";n.OperatorAnd="AND";n.OperatorOr="OR";n.OperatorContains="CONTAINS";n.OperatorNotContains="NOT CONTAINS";n.OperatorContainsWords="CONTAINS WORDS";n.OperatorNotContainsWords="NOT CONTAINS WORDS";n.OperatorIn="IN";n.OperatorNotIn="NOT IN";n.OperatorEver="EVER";n.OperatorNotEver="NOT EVER";n.OperatorUnder="UNDER";n.OperatorNotUnder="NOT UNDER";n.OperatorInGroup="IN GROUP";n.OperatorNotInGroup="NOT IN GROUP";n.OperatorEqualTo="=";n.OperatorNotEqualTo="<>";n.OperatorIsEmpty="IS EMPTY";n.OperatorIsNotEmpty="IS NOT EMPTY";n.OperatorGreaterThan=">";n.OperatorLessThan="<";n.OperatorGreaterThanOrEqualTo=">=";n.OperatorLessThanOrEqualTo="<=";n.MacroStart="@";n.MacroToday="@today";n.MacroMe="@me";n.MacroProject="@project";n.MacroCurrentIteration="@currentIteration";n.MacroTeamAreas="@teamAreas";n.MacroFollows="@follows";n.MacroRecentMentions="@recentMentions";n.MacroMyRecentActivity="@myRecentActivity";n.MacroRecentProjectActivity="@recentProjectActivity";n.MacroStartOfYear="@startOfYear";n.MacroStartOfMonth="@startOfMonth";n.MacroStartOfWeek="@startOfWeek";n.MacroStartOfDay="@startOfDay"}(e=t.WiqlOperators||(t.WiqlOperators={}));var k={},l={},d={};t.ProjectOperators=[e.OperatorEqualTo,e.OperatorNotEqualTo,e.OperatorIn,e.OperatorNotIn];t.StringOperators=[e.OperatorEqualTo,e.OperatorNotEqualTo,e.OperatorGreaterThan,e.OperatorLessThan,e.OperatorGreaterThanOrEqualTo,e.OperatorLessThanOrEqualTo,e.OperatorContains,e.OperatorNotContains,e.OperatorIn,e.OperatorNotIn,e.OperatorInGroup,e.OperatorNotInGroup];t.InGroupOperators=[e.OperatorInGroup,e.OperatorNotInGroup];t.TextOperators=[e.OperatorContains,e.OperatorNotContains];t.HistoryOperators=[e.OperatorContains,e.OperatorNotContains];t.TextWithTextSupportOperators=[e.OperatorContainsWords,e.OperatorNotContainsWords];t.HistoryWithTextSupportOperators=[e.OperatorContainsWords,e.OperatorNotContainsWords];a=[e.OperatorIsEmpty,e.OperatorIsNotEmpty];t.TextOperators.push.apply(t.TextOperators,a);t.TextWithTextSupportOperators.push.apply(t.TextWithTextSupportOperators,a);t.StringWithTextSupportOperators=t.StringOperators.concat(t.TextWithTextSupportOperators);t.StringWithInGroupOperators=t.StringOperators;t.TreePathOperators=[e.OperatorUnder,e.OperatorNotUnder,e.OperatorEqualTo,e.OperatorNotEqualTo,e.OperatorIn,e.OperatorNotIn];t.ComparisonOperators=[e.OperatorEqualTo,e.OperatorNotEqualTo,e.OperatorGreaterThan,e.OperatorLessThan,e.OperatorGreaterThanOrEqualTo,e.OperatorLessThanOrEqualTo,e.OperatorIn,e.OperatorNotIn];t.EqualityOperators=[e.OperatorEqualTo,e.OperatorNotEqualTo];v={};t.InGroupOperators.forEach(function(n){v[n.toUpperCase()]=!0});y={};[e.OperatorIn,e.OperatorNotIn].forEach(function(n){y[n.toUpperCase()]=!0});t.OperatorsSupportingFieldComparison={};[e.OperatorEqualTo,e.OperatorNotEqualTo,e.OperatorGreaterThan,e.OperatorLessThan,e.OperatorGreaterThanOrEqualTo,e.OperatorLessThanOrEqualTo].forEach(function(n){t.OperatorsSupportingFieldComparison[n.toUpperCase()]=!0});t.FieldTypesSupportingEver={};[f.FieldType.String,f.FieldType.DateTime,f.FieldType.Integer,f.FieldType.Double,f.FieldType.Boolean,f.FieldType.Guid].forEach(function(n){t.FieldTypesSupportingEver[n]=!0});t.FieldTypesSupportingFieldComparison={};[f.FieldType.String,f.FieldType.DateTime,f.FieldType.Integer,f.FieldType.Double,f.FieldType.Boolean,f.FieldType.Guid].forEach(function(n){t.FieldTypesSupportingFieldComparison[n]=!0});p={};[e.OperatorContains,e.OperatorContainsWords,e.OperatorGreaterThan,e.OperatorGreaterThanOrEqualTo,e.OperatorLessThan,e.OperatorLessThanOrEqualTo,e.OperatorNotContains,e.OperatorNotContainsWords,e.OperatorNotUnder,e.OperatorUnder].forEach(function(n){p[n.toUpperCase()]=!0});t.getLocalizedOperator=s;t.getLocalizedOperatorList=tt;t.isFieldComparisonOperator=it;t.getFieldComparisonOperator=g;t.isTodayMacro=nt;t.isMeMacro=rt;t.isCurrentIterationMacro=ut;t.isProjectMacro=ft;t.isOrOperator=et;t.getInvariantTodayMacro=w;t.getLocalizedTodayMacro=ot;t.getLocalizedTodayMinusMacro=st;t.getLocalizedStartOfDayMacro=ht;t.isValidMacro=ct;t.getInvariantOperator=h;t.isGroupOperator=lt;t.isInOperator=at;t.isMultipleValueOperator=vt;t.isIdentityFieldStringOperator=yt;o(e.OperatorAnd,u.WiqlOperators_And);o(e.OperatorOr,u.WiqlOperators_Or);o(e.OperatorContains,u.WiqlOperators_Contains);o(e.OperatorNotContains,u.WiqlOperators_NotContains);o(e.OperatorContainsWords,u.WiqlOperators_ContainsWords);o(e.OperatorNotContainsWords,u.WiqlOperators_NotContainsWords);o(e.OperatorIn,u.WiqlOperators_In);o(e.OperatorNotIn,u.WiqlOperators_NotIn);o(e.OperatorEver,u.WiqlOperators_Ever);o(e.OperatorNotEver,u.WiqlOperators_NotEver);o(e.OperatorUnder,u.WiqlOperators_Under);o(e.OperatorNotUnder,u.WiqlOperators_NotUnder);o(e.OperatorEqualTo,u.WiqlOperators_EqualTo);o(e.OperatorNotEqualTo,u.WiqlOperators_NotEqualTo);o(e.OperatorIsEmpty,u.WiqlOperators_IsEmpty);o(e.OperatorIsNotEmpty,u.WiqlOperators_IsNotEmpty);o(e.OperatorGreaterThan,u.WiqlOperators_GreaterThan);o(e.OperatorLessThan,u.WiqlOperators_LessThan);o(e.OperatorGreaterThanOrEqualTo,u.WiqlOperators_GreaterThanOrEqualTo);o(e.OperatorLessThanOrEqualTo,u.WiqlOperators_LessThanOrEqualTo);o(e.OperatorInGroup,u.WiqlOperators_InGroup);o(e.OperatorNotInGroup,u.WiqlOperators_NotInGroup);o(e.MacroToday,e.MacroStart+u.WiqlOperators_MacroToday);o(e.MacroMe,e.MacroStart+u.WiqlOperators_MacroMe);o(e.MacroProject,e.MacroStart+u.WiqlOperators_MacroProject);o(e.MacroCurrentIteration,e.MacroStart+u.WiqlOperators_MacroCurrentIteration);o(e.MacroTeamAreas,e.MacroStart+u.WiqlOperators_MacroTeamAreas);o(e.MacroFollows,e.MacroStart+u.WiqlOperators_MacroFollows);o(e.MacroRecentMentions,e.MacroStart+u.WiqlOperators_MacroRecentMentions);o(e.MacroMyRecentActivity,e.MacroStart+u.WiqlOperators_MacroMyRecentActivity);o(e.MacroRecentProjectActivity,e.MacroStart+u.WiqlOperators_MacroRecentProjectActivity);o(e.MacroStartOfYear,e.MacroStart+u.WiqlOperators_MacroStartOfYear);o(e.MacroStartOfMonth,e.MacroStart+u.WiqlOperators_MacroStartOfMonth);o(e.MacroStartOfWeek,e.MacroStart+u.WiqlOperators_MacroStartOfWeek);o(e.MacroStartOfDay,e.MacroStart+u.WiqlOperators_MacroStartOfDay);for(c in t.OperatorsSupportingFieldComparison)b=g(c),l[b.toLocaleUpperCase()]=c,d[b.toLocaleUpperCase()]=c;t.isNonNullableField=pt;t.quoteString=wt;t.toInvariantDateString=bt});

define("WorkItemTracking/Scripts/Filtering/AssignedToFilterProvider",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.OM.Identities","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/Filtering/FieldFilterProvider","VSS/Utils/String","WorkItemTracking/Scripts/OM/WiqlOperators","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.AssignedToFilterProvider=void 0;var h=function(n){function t(){return n.call(this,i.CoreFieldRefNames.AssignedTo)||this}return __extends(t,n),t.prototype.setFilter=function(t){var h,i,f,s,c;for(n.prototype.setFilter.call(this,t),h=Object.keys(this._filterValueMap),i=0,f=h;i<f.length;i++)s=f[i],e.equals(s,o.WiqlOperators.MacroMe,!0)&&(c=r.IdentityHelper.getFriendlyDistinctDisplayName(u.TfsContext.getDefault().currentIdentity),delete this._filterValueMap[s],this._filterValueMap[c]=!0)},t.prototype.matchesFilter=function(t){if(!s.isWorkItemIdentityRef(t))return n.prototype.matchesFilter.call(this,t);var i=t.distinctDisplayName||"";return this._filterValueMap.hasOwnProperty(i)},t}(f.FieldFilterProvider);t.AssignedToFilterProvider=h});

define("WorkItemTracking/Scripts/Controls/Filters/WorkItemFilterConstants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.FilterStatusFieldName=void 0;t.FilterStatusFieldName="FilterBar.WorkItemStatus"});

define("WorkItemTracking/Scripts/Controls/Filters/FilterBar",["require","exports","VSS/VSS","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Controls","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Diag","WorkItemTracking/Scripts/Filtering/FieldFilterProvider","WorkItemTracking/Scripts/Filtering/FilterManager","WorkItemTracking/Scripts/Filtering/TagsFilterProvider","WorkItemTracking/Scripts/Filtering/TextFilterProvider","WorkItemTracking/Scripts/Filtering/AssignedToFilterProvider","./WorkItemFilterConstants"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){Object.defineProperty(t,"__esModule",{value:!0});t.FilterBar=void 0;var v=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._filterHeight=0,i._clearingFilters=!1,i.handleDataChanged=function(){i._filterControl&&i._filterControl.update()},i.handleFilterCleared=function(){!i._clearingFilters&&i._filterControl&&(i._clearingFilters=!0,i._filterControl.clearFilters(),i._clearingFilters=!1)},i}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass},i))},t.prototype.bind=function(n,t,i,r,u){this._projectName=n;this._filterManager=t;this._dataSource=i;this._initialState=r;this._isImportView=u},t.prototype.unbind=function(){this._filterControl&&(this._filterManager.detachEvent(s.FilterManager.EVENT_DATA_UPDATED,this.handleDataChanged),this._filterManager.detachEvent(s.FilterManager.EVENT_FILTER_CLEARED,this.handleFilterCleared))},t.prototype.toggle=function(){this.isVisible()?this.hideElement():this.showElement()},t.prototype.showElement=function(){this.isVisible()||(n.prototype.showElement.call(this),this.getElement().siblings(".work-item-list").addClass("with-filter-bar"),this.getElement().prev(".toolbar").addClass("no-border-bottom"),this.ensureFilterControl(),$(window).resize(),this.focus())},t.prototype.focus=function(){this._filterControl&&this._filterControl.focus()},t.prototype.hideElement=function(){this.isVisible()&&(n.prototype.hideElement.call(this),this.getElement().siblings(".work-item-list").removeClass("with-filter-bar"),this.getElement().prev(".toolbar").removeClass("no-border-bottom"),$(window).resize())},t.prototype.isVisible=function(){return this.getElement().is(":visible")},t.prototype.getFilterManager=function(){return this._filterManager},t.prototype.getProjectName=function(){return this._projectName},t.prototype.getDataSource=function(){return this._dataSource},t.prototype.ensureFilterControl=function(){this._filterControl===undefined&&(this._filterControl=null,this._filterManager.attachEvent(s.FilterManager.EVENT_DATA_UPDATED,this.handleDataChanged),this._filterManager.attachEvent(s.FilterManager.EVENT_FILTER_CLEARED,this.handleFilterCleared),this.createFilterControl())},t.prototype.createFilterControl=function(){var n=this;e.Debug.assert(this._filterControl===null,"filter control should be null before trying to create it.");this._filterManager.clearFilterProviders();this._filterManager.registerFilterProvider(c.TextFilterProvider.PROVIDER_TYPE,new c.TextFilterProvider);this._filterManager.registerFilterProvider(f.CoreFieldRefNames.WorkItemType,new o.FieldFilterProvider(f.CoreFieldRefNames.WorkItemType));this._filterManager.registerFilterProvider(f.CoreFieldRefNames.State,new o.FieldFilterProvider(f.CoreFieldRefNames.State));this._filterManager.registerFilterProvider(f.CoreFieldRefNames.AssignedTo,new l.AssignedToFilterProvider);this._filterManager.registerFilterProvider(f.CoreFieldRefNames.Tags,new h.TagsFilterProvider);this._isImportView&&this._filterManager.registerFilterProvider(a.FilterStatusFieldName,new o.FieldFilterProvider(a.FilterStatusFieldName));this._filterManager.activate();i.requireModules(["WorkItemTracking/Scripts/Controls/Filters/WorkItemFilter","WorkItemTracking/Scripts/Controls/Filters/FilterValueProviders"]).spread(function(t,i){var u,e;u=[{displayType:t.WorkItemFilterFieldType.Text,fieldName:"text",placeholder:r.FilterByKeyword},{displayType:t.WorkItemFilterFieldType.CheckboxList,fieldName:f.CoreFieldRefNames.WorkItemType,placeholder:r.FilterByTypes,noItemsText:r.FilterNoTypes,valueProvider:new i.WorkItemTypeFilterValueProvider(n._projectName,n._dataSource)},{displayType:t.WorkItemFilterFieldType.CheckboxList,fieldName:f.CoreFieldRefNames.AssignedTo,placeholder:r.FilterByAssignedTo,noItemsText:r.FilterNoAssignedTo,valueProvider:new i.AssignedToFilterValueProvider(n._dataSource)},{displayType:t.WorkItemFilterFieldType.CheckboxList,fieldName:f.CoreFieldRefNames.State,placeholder:r.FilterByStates,noItemsText:r.FilterNoStates,valueProvider:new i.StateFilterValueProvider(n._projectName,n._dataSource)},{displayType:t.WorkItemFilterFieldType.CheckboxList,fieldName:f.CoreFieldRefNames.Tags,placeholder:r.FilterByTags,noItemsText:r.FilterNoTags,showOrAndOperators:!0}];n._isImportView&&u.push({displayType:t.WorkItemFilterFieldType.CheckboxList,fieldName:a.FilterStatusFieldName,placeholder:r.FilterByWorkItemStatus,noItemsText:r.FilterNoStatuses,valueProvider:new i.WorkItemStatusFilterValueProvider(n._dataSource)});e={fields:u,filterUpdatedCallback:function(t){return n.onFilterUpdated(t)},onRenderComplete:function(){return n.onFilterRendered()},dataSource:n._dataSource,initialFilterState:n._initialState,onDismissClicked:function(){return n.hideElement()}};n._filterControl=t.renderFilter(e,n.getElement()[0]);n._filterControl.focus()})},t.prototype.onFilterUpdated=function(n){e.Debug.assert(!!this._filterManager,"Filter manager should not be null");this._filterManager.setFilters(n)},t.prototype.onFilterRendered=function(){var n=this.getElement().height();n!==this._filterHeight&&(this._filterHeight=n,$(window).resize())},t.enhancementTypeName="tfs.wit.filterbar",t.coreCssClass="filter-bar",t}(u.BaseControl);t.FilterBar=v;u.Enhancement.registerEnhancement(v,".filter-bar")});

define("VSS/Flux/AsyncLoadedComponent",["require","exports","react","VSS/VSS"],function(n,t,i,r){function f(n,t,r,f,e){return function(o){return i.createElement(u,{modules:n,moduleComponentSelector:t,componentWhileLoading:r,onLoadStart:f,onLoadEnd:e,props:o})}}Object.defineProperty(t,"__esModule",{value:!0});t.getAsyncLoadedComponent=void 0;var u=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._isMounted=!1,r.state={isLoading:!1,componentType:null},r}return __extends(t,n),t.prototype.render=function(){return this.state.componentType?i.createElement(this.state.componentType,this.props.props):this.props.componentWhileLoading&&this.state.isLoading?this.props.componentWhileLoading():null},t.prototype.componentWillMount=function(){this.props.onLoadStart&&this.props.onLoadStart()},t.prototype.componentDidMount=function(){var n=this;this._isMounted=!0;this.state.componentType||this.state.isLoading||(this.areModulesDefined()||this.setState({isLoading:!0,componentType:null}),r.using(this.props.modules,function(){for(var i,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];n._isMounted&&(n.props.onLoadEnd&&n.props.onLoadEnd(),n.setState({isLoading:!1,componentType:(i=n.props).moduleComponentSelector.apply(i,r)}))}))},t.prototype.componentWillUnmount=function(){this.state.isLoading&&this.setState({isLoading:!1,componentType:null});this._isMounted=!1},t.prototype.areModulesDefined=function(){var n=this.props.modules,t=n===void 0?[]:n;return t.every(function(n){return requirejs.defined(n)})},t}(i.Component);t.getAsyncLoadedComponent=f});

define("WorkItemTracking/Scripts/Controls/LinksVisualization/Interfaces",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.LinkDirection=t.TopologyType=void 0,function(n){n[n.Network=0]="Network";n[n.DirectedNetwork=4]="DirectedNetwork";n[n.Dependency=12]="Dependency";n[n.Tree=28]="Tree"}(i=t.TopologyType||(t.TopologyType={})),function(n){n[n.Forward=0]="Forward";n[n.Reverse=1]="Reverse";n[n.NonDirectional=2]="NonDirectional"}(r=t.LinkDirection||(t.LinkDirection={}))});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Utils",["require","exports","VSS/Utils/String","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Controls/LinksVisualization/Interfaces","WorkItemTracking/Scripts/RegisteredLinkTypeNames","VSS/Artifacts/Constants","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/OM/WorkItemConstants"],function(n,t,i,r,u,f,e,o,s,h,c){function v(n,t){var i,r;switch(n){case f.RegisteredLinkTypeNames.Related:i=o.LinksControlRelatedText;break;case f.RegisteredLinkTypeNames.Hyperlink:i=o.LinksControlHyperlinkText;break;case f.RegisteredLinkTypeNames.Changeset:i=o.LinksControlChangesetText;break;case f.RegisteredLinkTypeNames.VersionedItem:i=o.LinksControlVersionedItemText;break;case f.RegisteredLinkTypeNames.Commit:i=o.LinksControlCommitText;break;case f.RegisteredLinkTypeNames.Branch:i=o.LinksControlBranchText;break;case f.RegisteredLinkTypeNames.Tag:i=o.LinksControlTagsText;break;case f.RegisteredLinkTypeNames.PullRequest:i=o.LinksControlPullRequestText;break;case f.RegisteredLinkTypeNames.ResultAttachment:i=o.LinksControlResultAttachmentText;break;case f.RegisteredLinkTypeNames.TestResult:i=o.LinksControlTestResultText;break;case f.RegisteredLinkTypeNames.Test:i=o.LinksControlTestText;break;case f.RegisteredLinkTypeNames.Storyboard:i=o.LinksControlStoryboardText;break;case f.RegisteredLinkTypeNames.Build:i=o.LinksControlBuildText;break;case f.RegisteredLinkTypeNames.FoundInBuild:i=o.LinksControlFoundInBuildText;break;case f.RegisteredLinkTypeNames.IntegratedInBuild:i=o.LinksControlIntegratedInBuildText;break;case f.RegisteredLinkTypeNames.WikiPage:i=o.LinksControlWikiPageText;break;case f.RegisteredLinkTypeNames.GitHubPullRequestLinkType:i=o.LinksControlGitHubPullRequestText;break;case f.RegisteredLinkTypeNames.GitHubCommitLinkType:i=o.LinksControlGitHubCommitText;break;case f.RegisteredLinkTypeNames.GitHubIssueLinkType:i=o.LinksControlGitHubIssueText;break;default:r=g(n,t);i=r&&r.linkTypeName?r.linkTypeName:o.LinksControlUnknownLinkTypeText}return i}function y(n){if(n instanceof r.WorkItemLink){var t=n;return t.getLinkTypeEnd().immutableName}return n.getArtifactLinkType()}function p(n){if(n instanceof r.WorkItemLink){var t=n;return t.getLinkTypeEnd().name}return v(n.getArtifactLinkType(),n.workItem.store)}function w(n,t,i){if(n&&i){var r=(n.immutableName===c.LinkTypeName.Child_Link_Name||n.immutableName===c.LinkTypeName.Parent_Link_Name)&&t===i.workItemType.name;return s.publishEvent(new s.TelemetryEventData(h.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,h.WITCustomerIntelligenceFeature.LINKSCONTROL_SAMECATEGORY_WARNING,{Action:"Link work item",isSameType:r})),r}return!1}function b(n){switch(n){case e.ToolNames.VersionControl:case e.ToolNames.Git:return o.LinkToolTypeCode;case e.ToolNames.TestManagement:return o.LinkToolTypeTest;case e.ToolNames.Requirements:return o.LinkToolTypeRequirements;case e.ToolNames.TeamBuild:return o.LinkToolTypeBuild;case e.ToolNames.Wiki:return o.LinkToolTypeWiki;case e.ToolNames.GitHub:return o.LinkToolTypeGitHub;default:return o.LinkToolTypeWork}}function k(n,i){if(n){var r=l(n),u=a(i,r);return{topology:r,linkDirection:u}}return t.DefaultTopologyOptions}function l(n){var t=null,r=null;if(r=typeof n=="string"?n:u.TopologyType[n],i.equals(r,u.TopologyType[u.TopologyType.Dependency],!0))t=u.TopologyType.Dependency;else if(i.equals(r,u.TopologyType[u.TopologyType.Network],!0))t=u.TopologyType.Network;else if(i.equals(r,u.TopologyType[u.TopologyType.Tree],!0))t=u.TopologyType.Tree;else if(i.equals(r,u.TopologyType[u.TopologyType.DirectedNetwork],!0))t=u.TopologyType.DirectedNetwork;else throw new Error(i.format("Topology name '{0}' is not supported.",n));return t}function a(n,t){var i=u.LinkDirection.NonDirectional;return t!==u.TopologyType.Network&&(i=n?u.LinkDirection.Forward:u.LinkDirection.Reverse),i}function d(n,t){var i=null,u=null,r;return n&&(r=t.store.findLinkTypeEnd(n),i=l(r.linkType.topology),u=a(r.isForwardLink,i)),{topology:i,linkDirection:u}}function g(n,t){var r=t.getContributedLinkTypes()||{},u=Object.keys(r).filter(function(t){return i.equals(t,n)});return u.length>0?r[u[0]]:null}Object.defineProperty(t,"__esModule",{value:!0});t.getTopologyOptions=t.getLinkDirection=t.getTopology=t.getLinkTopologyOptions=t.getFriendlyToolName=t.isSameType=t.getLinkTypeName=t.getLinkTypeRefName=t.getRegisteredLinkName=t.DefaultTopologyOptions=t.ACTIONS_LINK_TO_NEW=t.ACTIONS_LINK_TO_EXISTING=void 0;t.ACTIONS_LINK_TO_EXISTING="link-to-existing";t.ACTIONS_LINK_TO_NEW="link-to-new";t.DefaultTopologyOptions={topology:u.TopologyType.Tree,linkDirection:u.LinkDirection.Forward};t.getRegisteredLinkName=v;t.getLinkTypeRefName=y;t.getLinkTypeName=p;t.isSameType=w;t.getFriendlyToolName=b;t.getLinkTopologyOptions=k;t.getTopology=l;t.getLinkDirection=a;t.getTopologyOptions=d});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking",["require","exports","VSS/VSS","VSS/Utils/String","VSS/Utils/Array","VSS/Diag","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/RegisteredLinkTypeNames","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Controls","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Utils"],function(n,t,i,r,u,f,e,o,s,h,c,l){var y,p,a,v;Object.defineProperty(t,"__esModule",{value:!0});t.LinkColumnHelper=t.LinkFilterHelper=t.StyleConstants=void 0,function(n){n.CSS_CLASS_TARGET_ICON="bowtie-icon bowtie-map-destination-fill target-icon"}(y=t.StyleConstants||(t.StyleConstants={}));p=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype._createIn=function(t){return n.prototype._createIn.call(this,t)},t.prototype.update=function(n,t,i,r,u,f){var o,s,e=[];this._element.empty().removeAttr("class");e.push("link-visualization");e.push((n||"").toLocaleLowerCase());o=i===!0?"multiplesrc":"singlesrc";s=r===!0?"multipletgt":"singletgt";e.push(t?["image",s,o].join("-"):["image",o,s].join("-"));this._element.addClass(e.join(" "));$("<div />").addClass("text text-forward").text(t?u:f).appendTo(this._element);$("<div />").addClass("text text-reverse").text(t?f:u).appendTo(this._element)},t.prototype.disable=function(){this._element.addClass("invalid")},t}(h.BaseControl);a=function(){function n(n){this._options=n;this._manualLinkingExclusionList=["Integrated in release environment"]}return n.prototype.witFilterExists=function(){return this._ensureWitFilters(),this._witFilterExists},n.prototype.linkTypeFilterExists=function(n){return this._ensureLinkTypeFilters(n),this._linkTypeFilterExists},n.prototype.isLinkFilteredOut=function(n,t){return this._ensureLinkTypeFilters(t),!this._getValidLinkType(n)},n.prototype.isLinkTypeFilteredOut=function(n,t,i){if(!this._options.tfsContext.standardAccessMode&&n!==o.RegisteredLinkTypeNames.Hyperlink)return!0;var f;return this._ensureLinkTypeFilters(i),t===!0?f=this._witLinkTypes[n]:(f=this._regLinkTypes[n],f||u.contains(this._manualLinkingExclusionList,n,r.ignoreCaseComparer)||(f=this._contributedLinkTypes[n])),!f},n.prototype.isWitFilteredOut=function(n,t){var f,r,e,u,i=!1;return this._witFilterType==="includeAll"?i=this._witFiltersProjectScoped&&t===!1:(this._ensureWitFilters(),f=this._witFilters.length,r=this._witFilterType==="include",e=this._witFilterType==="exclude",f?(u=$.inArray(n,this._witFilters)>=0,r?i=!u:e&&(i=u)):r&&(i=!0)),i},n.prototype.getValidLinkTypesForWorkItem=function(n,t){var s=this,i=[],u={};return n.store.getLinkTypes().length?($.each(n.getLinks(),function(){var n=this instanceof e.WorkItemLink?this.getLinkTypeEnd():null;n&&!n.isForwardLink&&n.linkType&&n.linkType.isOneToMany&&(u[n.immutableName]=!0)}),$.each(n.store.getLinkTypeEnds(),function(){this.linkType&&this.linkType.isActive&&(s.isLinkTypeFilteredOut(this.immutableName,!0,n.store)||(this.immutableName in u?$.isArray(t)&&t.push(this.immutableName):i.push(this.name)))})):i.push(o.RegisteredLinkTypeNames.Related),i.sort(r.localeIgnoreCaseComparer),i},n.prototype.getValidWitsForProject=function(n,t,i){var u=[],o,h,a,c,s,l,v;if(c=function(){t&&(u.sort(r.localeIgnoreCaseComparer),t(u,a))},this._witFiltersProjectScoped)c();else{for(this._ensureWitFilters(),o=this._witFilterType,h={},s=0,l=this._witFilters;s<l.length;s++)v=l[s],h[v]=!0;n.beginGetValidWorkItemTypeNamesWithCategories(function(n,t,i){for(var r,f=0,e=n;f<e.length;f++)r=e[f],o==="includeAll"?u.push(r):r in h?o==="include"&&u.push(r):o==="exclude"&&u.push(r);a=i;c()},i)}},n.prototype._ensureLinkTypeFilters=function(n){this._witLinkTypes||this._initializeLinkFilters(n)},n.prototype._ensureWitFilters=function(){this._witFilters||this._initializeWitFilters()},n.prototype._initializeLinkFilters=function(n){function a(n){var r={};for(i=0,e=n.length;i<e;i++)t=n[i],r[t.refName]=t;return r}for(var o,h,b,i,e,t,v,r=[],k=n.getRegisteredLinkTypes()||[],u=[],y=n.getLinkTypeEnds()||[],f=[],p=n.getContributedLinkTypes()||{},s=0,w=k;s<w.length;s++)o=w[s],v=l.getRegisteredLinkName(o.name,n),v!==c.LinksControlUnknownLinkTypeText&&r.push({refName:o.name,name:l.getRegisteredLinkName(o.name,n)});for(this._options.externalLinkFilters&&(r=this._options.isNewLinksControl?this._getFilteredLinkTypes(n,r,{filters:this._options.externalLinkFilters}):this._getLegacyFilteredLinkTypes(n,r,{filters:this._options.externalLinkFilters})),i=0,e=y.length;i<e;i++)t=y[i],u.push({refName:t.immutableName,name:t.name,isDisabled:!t.linkType.isActive});this._options.workItemLinkFilters&&(u=this._options.isNewLinksControl?this._getFilteredLinkTypes(n,u,{filterLinkTypes:!0,filters:this._options.workItemLinkFilters}):this._getLegacyFilteredLinkTypes(n,u,{filterLinkTypes:!0,filters:this._options.workItemLinkFilters}));for(t in p)h=p[t],h.linkTypeName&&f.push({refName:t,name:h.linkTypeName});this._options.externalLinkFilters&&(f=this._options.isNewLinksControl?this._getFilteredLinkTypes(n,f,{filters:this._options.externalLinkFilters}):this._getLegacyFilteredLinkTypes(n,f,{filters:this._options.externalLinkFilters}));b=r.concat(u).concat(f);this._setGroupOrder(b);this._regLinkTypes=a(r);this._witLinkTypes=a(u);this._contributedLinkTypes=a(f)},n.prototype._initializeWitFilters=function(){var n=this._options.workItemTypeFilters,t,r,i;if(this._witFilters=[],n){if(this._witFiltersProjectScoped=n.scope==="project",this._witFilterType=n.filterType||"includeAll",$.isArray(n.filters))for(t=0,r=n.filters.length;t<r;t++)i=n.filters[t],i.workItemType&&this._witFilters.push(i.workItemType)}else this._witFiltersProjectScoped=!1,this._witFilterType="includeAll";this._witFilterExists=this._witFilterType!=="includeAll"||this._witFiltersProjectScoped},n.prototype._getLegacyFilteredLinkTypes=function(n,t,i){var r,o,f,h=[],e,y=i&&i.filterLinkTypes===!0,u=i&&i.filters,l,a,v,c,s;if(u){if(e={},u.filterType!=="excludeAll"){if($.isArray(u.filters))for(r=0,o=u.filters.length;r<o;r++)if(f=u.filters[r],y){l=!f.filterOn||f.filterOn==="reversename";a=!f.filterOn||f.filterOn==="forwardname";try{s=n.findLinkType(f.linkType);a&&(e[s.forwardEnd.immutableName]=!0);l&&s.isDirectional&&(e[s.reverseEnd.immutableName]=!0)}catch(p){}}else e[f.linkType]=!0;for(c=u.filterType==="includeAll",v=c||u.filterType==="include",r=0,o=t.length;r<o;r++)(c||t[r].refName in e)===v&&h.push(t[r])}this._linkTypeFilterExists=this._linkTypeFilterExists||u.filterType!=="includeAll"}else h=t;return h},n.prototype._getFilteredLinkTypes=function(n,t,i){var f=[],e,o=i&&i.filters,r,s,l,u,h,c;if(o&&$.isArray(o)){for(e={},r=0,s=o;r<s.length;r++)l=s[r],e[l]=!0;for(u=0,h=t;u<h.length;u++)c=h[u],c.refName in e&&f.push(c)}else f=t;return f},n.prototype._setGroupOrder=function(n){n.sort(function(n,t){return r.localeIgnoreCaseComparer(n.name,t.name)});for(var t=0,i=n.length;t<i;t++)n[t].groupOrder=t},n.prototype._getGroupOrder=function(n){var t=this._getValidLinkType(n);return t?t.groupOrder:this._witLinkTypes.length+this._regLinkTypes.length+this._contributedLinkTypes.length+1},n.prototype._getValidLinkType=function(n){var t=l.getLinkTypeRefName(n);return n instanceof e.WorkItemLink?this._witLinkTypes[t]:this._regLinkTypes[t]||this._contributedLinkTypes[t]},n}();t.LinkFilterHelper=a;i.initClassPrototype(a,{_options:null,_witLinkTypes:null,_regLinkTypes:null,_contributedLinkTypes:null,_witFiltersProjectScoped:null,_witFilterType:null,_witFilters:null,_witFilterExists:!1,_linkTypeFilterExists:!1});v=function(){function n(n){this._options=n}return n.getDefaultColumns=function(){return[{name:n.linkDescriptionColumnName},{name:n.linkCommentColumnName}]},n.isIdColumn=function(n){return n.toLocaleUpperCase()==="System.Id".toLocaleUpperCase()},n.isLinkTypeColumn=function(t){return t.toLocaleUpperCase()===n.linkTypeColumnName.toLocaleUpperCase()},n.isDescriptionColumn=function(t){var i=t.toLocaleUpperCase();return i==="System.Title".toLocaleUpperCase()||i===n.linkDescriptionColumnName.toLocaleUpperCase()},n.isCommentColumn=function(t){return t.toLocaleUpperCase()===n.linkCommentColumnName.toLocaleUpperCase()},n.getColumnIndexByName=function(n,t){var i,r,u=-1;for(t=(t||"").toLocaleUpperCase(),i=0,r=n.length;i<r;i++)if(n[i].name.toLocaleUpperCase()===t){u=i;break}return u},n.getFieldColumnWidth=function(t,i){var r=n.defaultColumnWidth,u=i.getFieldDefinition(t);if(u)if(u.isIdentity)r=n.defaultIdentityColumnWidth;else if(u.id===s.CoreField.Title)r=n.defaultTitleColumnWidth;else if(u.id===s.CoreField.Id)r=n.defaultIdColumnWidth;else if(u.id===s.CoreField.LinkType)r=n.defaultLinkTypeColumnWidth;else if(u.id===s.CoreField.Tags)r=n.defaultTagColumnWidth;else if(u.id===s.CoreField.CommentCount)r=n.defaultCommentCountWidth;else if(u.id===s.CoreField.Parent)r=n.defaultParentColumnWidth;else switch(u.type){case s.FieldType.String:r=n.defaultStringColumnWidth;break;case s.FieldType.Double:r=n.defaultDoubleColumnWidth;break;case s.FieldType.Integer:r=n.defaultIntegerColumnWidth;break;case s.FieldType.DateTime:r=n.defaultDateTimeColumnWidth;break;case s.FieldType.TreePath:r=n.defaultTreePathColumnWidth}return r},n.prototype.getDisplayColumns=function(n){return this._ensureDisplayColumns(n),this._displayColumns},n.prototype.getSortColumns=function(){return this._ensureSortColumns(),this._sortColumns},n.prototype.setSortColumns=function(n){this._sortColumns=n},n.prototype.sortColumnExists=function(){return this.getSortColumns().length>0},n.prototype.getWitColumns=function(n){var t,i=[],u=this.getDisplayColumns(n);return $.each(u,function(){r.startsWith(this.name,"System.Links.")||(t=n.getFieldDefinition(this.name),t&&i.push(this.name))}),i},n.prototype._ensureDisplayColumns=function(n){this._displayColumns||this._prepareDisplayColumns(n)},n.prototype._ensureSortColumns=function(){this._sortColumns||(this._sortColumns=[])},n.prototype._prepareDisplayColumns=function(t){var r,e,f,i,u=this._options.linkColumns;if($.isArray(u)&&u.length)for(i=[],r=0,e=u.length;r<e;r++)f=u[r],i.push({name:f.linkAttribute||f.refName});else i=n.getDefaultColumns();this._updateDisplayAttributes(i,t);this._displayColumns=i},n.prototype._updateDisplayAttributes=function(n,t){var i=this;$.each(n,function(){var n=t.getFieldDefinition(this.name);this.text=i._getColumnText(this.name,t);this.width=i._getColumnWidth(this.name,t);this.isIdentity=n?n.isIdentity:!1})},n.prototype._getColumnText=function(t,i){return t===n.linkDescriptionColumnName?c.LinksControlDescriptionColumnText:t===n.linkCommentColumnName?c.LinksControlCommentColumnText:t===n.linkTypeColumnName?c.LinksControlLinkTypeColumnText:t===n.linkImageColumnName?"":this._getFieldColumnText.call(this,t,i)},n.prototype._getFieldColumnText=function(n,t){var i="",r=t.getFieldDefinition(n);return r&&(i=r.name),i},n.prototype._getColumnWidth=function(t,i){var r=n.defaultColumnWidth;return t===n.linkImageColumnName?n.defaultImageColumnWidth:t===n.linkDescriptionColumnName?n.defaultColumnWidth*3:n.getFieldColumnWidth(t,i)},n.prototype._prepareSortColumns=function(){},n.defaultImageColumnWidth=18,n.defaultColumnWidth=75,n.defaultDateTimeColumnWidth=120,n.defaultDoubleColumnWidth=75,n.defaultIdColumnWidth=70,n.defaultIntegerColumnWidth=50,n.defaultLinkTypeColumnWidth=80,n.defaultStringColumnWidth=75,n.defaultTagColumnWidth=200,n.defaultIdentityColumnWidth=125,n.defaultTitleColumnWidth=450,n.defaultTreePathColumnWidth=300,n.defaultCommentCountWidth=75,n.defaultParentColumnWidth=200,n.linkImageColumnName="System.LinksControl.ImageColumn",n.linkDescriptionColumnName="System.Links.Description",n.linkCommentColumnName="System.Links.Comment",n.linkTypeColumnName="System.Links.LinkType",n}();t.LinkColumnHelper=v;i.initClassPrototype(v,{_options:null,_displayColumns:null,_sortColumns:null});i.tfsModuleLoaded("TFS.WorkItemTracking.Linking",t)});

define("WorkItemTracking/Scripts/Utils/RollupHelpers",["require","exports","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Utils/String"],function(n,t,i,r,u){function s(n,t){var i="System.Backlog.Rollup.";t&&(i+="Custom.");switch(n.type){case e.Progress:i+="ProgressBy.";break;case e.Total:i+="Total."}return n.aggregation===f.Sum&&n.aggregationField&&(i+=n.aggregationField+"."),i+(n.workItemTypeFilter?n.workItemTypeFilter.replace(/\s/g,""):n.backlogFilter?n.backlogFilter.replace(/\s/g,""):"AllCompletedDescendants")}function h(n,t){return n.type===e.Progress?n.workItemTypeFilter?n.aggregation===f.Sum?u.format(r.RollupColumn_ProgressBy_Filter_Field,n.workItemTypeFilter,t&&t.fieldName):u.format(r.RollupColumn_ProgressBy_WorkItemType,n.workItemTypeFilter):n.backlogFilter?n.aggregation===f.Sum?u.format(r.RollupColumn_ProgressBy_Filter_Field,t&&t.backlogName,t&&t.fieldName):u.format(r.RollupColumn_ProgressBy_Backlog,t&&t.backlogName):n.aggregation===f.Sum?u.format(r.RollupColumn_ProgressBy_EffortField,t&&t.fieldName):r.RollupColumn_ProgressBy_AllCompletedDescendants:n.workItemTypeFilter?n.aggregation===f.Sum?u.format(r.RollupColumn_TotalBy_Filter_Field,n.workItemTypeFilter,t&&t.fieldName):u.format(r.RollupColumn_TotalBy_WorkItemType,n.workItemTypeFilter):n.backlogFilter?n.aggregation===f.Sum?u.format(r.RollupColumn_TotalBy_Filter_Field,t&&t.backlogName,t&&t.fieldName):u.format(r.RollupColumn_TotalBy_Backlog,t&&t.backlogName):n.aggregation===f.Sum?u.format(r.RollupColumn_TotalBy_FieldName,t&&t.backlogName):r.RollupColumn_TotalBy_AllDescendants}function c(n){try{return o(n).name}catch(t){return""}}function l(n){try{return o(n).workItemTypes}catch(t){return[]}}function o(n){var t=i.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels().filter(function(t){return t.id===n});return t[0]}var e,f;Object.defineProperty(t,"__esModule",{value:!0});t.getBacklogFilterById=t.getBacklogWorkItemTypesById=t.getBacklogFilterNameById=t.getRollupColumnDisplayName=t.getRollupColumnReferenceName=t.RollupAggregation=t.RollupType=void 0,function(n){n[n.Progress=0]="Progress";n[n.Total=1]="Total"}(e=t.RollupType||(t.RollupType={})),function(n){n[n.Count=1]="Count";n[n.Sum=2]="Sum"}(f=t.RollupAggregation||(t.RollupAggregation={}));t.getRollupColumnReferenceName=s;t.getRollupColumnDisplayName=h;t.getBacklogFilterNameById=c;t.getBacklogWorkItemTypesById=l;t.getBacklogFilterById=o});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};define("WorkItemTracking/Scripts/Queries/Components/ColumnOptions/ColumnOptionsPanel",["require","exports","react","react-dom","VSS/Flux/AsyncLoadedComponent","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking","VSS/LWP","VSS/Utils/Array","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Core.Utils","OfficeFabric/Utilities","OfficeFabric/Spinner","OfficeFabric/MessageBar","WorkItemTracking/Scripts/Utils/RollupHelpers","VSSUI/Panel","VSS/LoaderPlugins/Css!Queries/Components/ColumnOptions/ColumnOptionsPanel"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){function tt(n){var t=document.createElement("div"),u=__assign(__assign({},n),{onDismiss:function(){r.unmountComponentAtNode(t);n.onDismiss&&n.onDismiss()},onOkClick:function(i,u){r.unmountComponentAtNode(t);n.onOkClick(i,u)}});r.render(i.createElement(d,__assign({},u)),t)}Object.defineProperty(t,"__esModule",{value:!0});t.showColumnOptionsPanel=t.ColumnOptionsPanel=void 0;var g=function(){return i.createElement("div",{className:"hub-loading-spinner-overlay"},i.createElement(p.Spinner,{size:p.SpinnerSize.large}))},nt=u.getAsyncLoadedComponent(["WorkItemTracking/Scripts/Queries/Components/ColumnOptions/ColumnOptionsPanelContent"],function(n){return n.ColumnOptionsPanelContent},function(){return i.createElement(g,null)}),d=function(n){function t(t,i){var r=__construct(this,n,[t,i]),u,f;for(u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._getField=function(n){return __awaiter(r,void 0,void 0,function(){var t,i;return __generator(this,function(r){switch(r.label){case 0:return!this._store.fieldMap?[4,this._store.beginGetFields()]:[3,2];case 1:r.sent();r.label=2;case 2:return t=this._store.getFieldDefinition(n),i=t!==null?this._mapFieldDefinitionToColumnField(t):null,[2,i]}})})},r._getFilteredField=function(n){return __awaiter(r,void 0,void 0,function(){var t,i;return __generator(this,function(r){switch(r.label){case 0:return[4,this._getField(n)];case 1:return t=r.sent(),t&&(i=this.state.allFields,i[n.toLocaleLowerCase()]||(t=null)),[2,t]}})})},r._getAvailableFields=function(){return new Promise(function(n,t){var f={},i=[],u=function(t){t.sort(function(n,t){return c.localeIgnoreCaseComparer(n.name,t.name)});n(t)};r.props.getAvailableFields?r.props.getAvailableFields().then(function(n){return u(n)},t):r.props.project||r.props.workItemTypeNames?r.props.project?r._store.beginGetProject(r.props.project,function(n){var e,o,h,s;if(r.props.workItemTypeNames)n.beginGetWorkItemTypes(r.props.workItemTypeNames,function(n){for(var h,r,s,e,t=0,o=n;t<o.length;t++)for(h=o[t],r=0,s=h.fields;r<s.length;r++)e=s[r],e.id in f||(f[e.id]=!0,i.push(e));u(i)},t);else{for(e=0,o=n.fieldIds;e<o.length;e++)h=o[e],s=r._store.getFieldDefinition(h),s&&i.push(s);u(i)}},t):u([]):r._store.beginGetProjects(function(n){for(var h,e,c,o,t=0,s=n;t<s.length;t++)if(h=s[t],h.fieldIds!==undefined)for(e=0,c=h.fieldIds;e<c.length;e++)o=c[e],o in f||(f[o]=!0,i.push(r._store.getFieldDefinition(o)));u(i)},t)})},r._isDisposed=!1,f=l.TfsContext.getDefault(),r._store=a.ProjectCollection.getConnection(f).getService(e.WorkItemStore),r._fieldWidthsMap={},r._requiredColumnsMap={},r.state={originalDisplayColumnFields:null,allDisplayFields:null,allRollupColumns:null,allSortFields:null,allFields:{},changedDisplayColumnFields:null,originalSortColumnFields:null,changedSortColumnFields:null},r}return __extends(t,n),t.prototype.componentDidMount=function(){this._initializeFieldState()},t.prototype.componentWillUnmount=function(){this._isDisposed=!0},t.prototype.render=function(){return i.createElement(k.Panel,{titleProps:{text:f.ColumnOptions,className:"column-options-panel-header"},className:"column-options-panel",isLightDismiss:!1,escDismiss:!0,footerButtonProps:[{text:f.OK,primary:!0,onClick:this._onOkClick,ariaLabel:f.OK,disabled:!this._areColumnsValid()},{text:f.Cancel,onClick:this.props.onDismiss,ariaLabel:f.Cancel}],layerProps:{className:"column-options-panel-layer"},onDismiss:this.props.onDismiss},this._renderContents())},t.prototype._initializeFieldState=function(){var n=this;return this.props.displayColumns.forEach(function(t){t.width&&(n._fieldWidthsMap[t.fieldRefName.toLowerCase()]=t.width);t.isRequired&&(n._requiredColumnsMap[t.fieldRefName.toLowerCase()]=!0)}),new Promise(function(i,r){Promise.all([n._getAvailableFields(),n._getAvailableRollupColumns()]).then(function(r){var u=r[0],e=r[1];return __awaiter(n,void 0,void 0,function(){var o,h,r,d,g,l,nt,s,rt,a,tt,ut,n,it,y,ft,p,w,b,k=this;return __generator(this,function(et){switch(et.label){case 0:if(!!this._isDisposed)return[3,4];for(o={},h={},r=[],d=[],g=[],l=0,nt=u;l<nt.length;l++)s=nt[l],n=this._mapFieldDefinitionToColumnField(s),s.isQueryable()&&(r.push(n),o[s.referenceName.toLowerCase()]=n),s.canSortBy()&&(d.push(n),h[s.referenceName.toLowerCase()]=n);if(this.props.getAvailableNotAFieldColumns)for(rt=this.props.getAvailableNotAFieldColumns(),a=0,tt=rt;a<tt.length;a++)ut=tt[a],n=this._mapNotAFieldColumnsToColumnField(ut),r.push(n),o[n.fieldRefName.toLowerCase()]=n;return(it=[],!e)?[3,2]:(e.forEach(function(n){var t=k._mapRollupColumnToColumnField(n);r.push(t);g.push(t);o[t.fieldRefName.toLowerCase()]=t}),this.props.displayColumns.forEach(function(n){n.fieldRefName.toLowerCase().indexOf(t._customRollupIdentifier)===0&&it.push(k._mapCustomRollupDisplayColumnToColumnField(n))}),[4,Promise.all(it).then(function(n){n.forEach(function(n){r.push(n);o[n.fieldRefName.toLowerCase()]=n})})]);case 1:et.sent();et.label=2;case 2:return r.sort(function(n,t){return c.localeIgnoreCaseComparer(n.name,t.name)}),y=(this.props.displayColumns||[]).map(function(n){return __awaiter(k,void 0,void 0,function(){var i,t;return __generator(this,function(r){switch(r.label){case 0:return(i=n.fieldRefName.toLowerCase(),t=o[i],!!t)?[3,2]:[4,this._getField(i)];case 1:t=r.sent();r.label=2;case 2:return[2,t||{identifier:v.GUIDUtils.newGuid(),fieldRefName:"",fieldId:null,name:n.fieldRefName,isRequired:!1,isInvalid:!0,rollupCalculation:n.rollupCalculation,isRollup:!!n.rollupCalculation,error:f.FieldDoesNotExist}]}})})}),ft=(this.props.sortColumns||[]).map(function(n){return __awaiter(k,void 0,void 0,function(){var i,t;return __generator(this,function(r){switch(r.label){case 0:return(i=n.fieldRefName.toLowerCase(),t=null,!h[i])?[3,1]:(t=h[i],[3,3]);case 1:return[4,this._getField(i)];case 2:t=r.sent();r.label=3;case 3:return t?[2,__assign(__assign({},t),{asc:!n.descending})]:[2,{identifier:v.GUIDUtils.newGuid(),fieldRefName:"",fieldId:null,name:n.fieldRefName,isRequired:!1,isInvalid:!0,error:f.FieldDoesNotExist}]}})})}),p=[],w=[],[4,Promise.all(y.concat(ft)).then(function(n){p=n.slice(0,y.length);w=n.slice(y.length)})];case 3:et.sent();b={};u.forEach(function(n){b[n.referenceName.toLocaleLowerCase()]=!0;b[n.name.toLocaleLowerCase()]=!0});this.setState({allDisplayFields:r,allRollupColumns:g,allSortFields:d,allFields:b,originalDisplayColumnFields:p,originalSortColumnFields:w,changedSortColumnFields:w,changedDisplayColumnFields:p});i();et.label=4;case 4:return[2]}})})}).catch(function(t){n.setState({error:t.message||t});r()})})},t.prototype._renderContents=function(){return this.state.error?i.createElement(w.MessageBar,{messageBarType:w.MessageBarType.error},this.state.error):this.state.allDisplayFields?i.createElement(nt,{allowSort:this.props.allowSort,sortColumnFields:this.state.changedSortColumnFields,availableSortColumnFields:this.state.allSortFields,onSortColumnsChange:this._onSortColumnsChange,displayColumnFields:this.state.changedDisplayColumnFields,availableDisplayColumnFields:this.state.allDisplayFields,availableRollupColumnFields:this.state.allRollupColumns,onDisplayColumnsChange:this._onDisplayColumnsChange,getField:this._getFilteredField,rollupColumnOptions:{project:this.props.project,currentBacklogLevel:this.props.currentBacklogLevel,store:this._store},getRollupFields:this._getAvailableFields}):i.createElement(p.Spinner,{size:p.SpinnerSize.large})},t.prototype._mapFieldDefinitionToColumnField=function(n){if(!n)return null;var t=!!this._requiredColumnsMap[n.referenceName.toLowerCase()],i=n.isIgnored&&n.isIgnored();return{identifier:v.GUIDUtils.newGuid(),fieldRefName:n.referenceName,fieldId:n.id,name:n.name,isRequired:t,isHidden:i}},t.prototype._mapNotAFieldColumnsToColumnField=function(n){if(!n)return null;var t=!!this._requiredColumnsMap[n.referenceName.toLowerCase()];return{identifier:n.referenceName,fieldRefName:n.referenceName,name:n.displayName,isRequired:t}},t.prototype._mapRollupColumnToColumnField=function(n){return{name:n.displayName,identifier:n.referenceName,fieldRefName:n.referenceName,rollupCalculation:n.rollupCalculation,isRollup:!0}},t.prototype._mapCustomRollupDisplayColumnToColumnField=function(n){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(r){switch(r.label){case 0:return(t="",!n.rollupCalculation)?[3,3]:(i=this.props.getBacklogDisplayName?this.props.getBacklogDisplayName(n.rollupCalculation.backlogFilter):"",!this.props.getRollupColumnDisplayName)?[3,2]:[4,this.props.getRollupColumnDisplayName(n.rollupCalculation,i)];case 1:return t=r.sent(),[3,3];case 2:t=b.getRollupColumnDisplayName(n.rollupCalculation);r.label=3;case 3:return[2,{name:t,identifier:n.fieldRefName,fieldRefName:n.fieldRefName,rollupCalculation:n.rollupCalculation,isRollup:!0,isReadonly:!0}]}})})},t.prototype._getAvailableRollupColumns=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.props.getAvailableRollupColumns?[2,this.props.getAvailableRollupColumns()]:[2,[]]})})},t.prototype._onDisplayColumnsChange=function(n){this.setState({changedDisplayColumnFields:n})},t.prototype._onSortColumnsChange=function(n){this.setState({changedSortColumnFields:n})},t.prototype._onOkClick=function(){var n=this,i=this.state.changedDisplayColumnFields.map(function(n){return n.fieldRefName}),r=this.state.originalDisplayColumnFields.map(function(n){return n.fieldRefName}),f=h.subtract(i,r,c.ignoreCaseComparer),e=h.subtract(r,i,c.ignoreCaseComparer),o=!this.props.getAvailableNotAFieldColumns?[]:this.props.getAvailableNotAFieldColumns(),s=this.state.changedDisplayColumnFields.map(function(i){var f=n._getFieldWidth(i.fieldRefName),r=!1,u=undefined;return r=n.state.allRollupColumns.some(function(n){return n.fieldRefName.toLowerCase()===i.fieldRefName.toLowerCase()})||i.fieldRefName.toLowerCase().indexOf(t._customRollupIdentifier)===0,r&&(u=i.rollupCalculation),{id:i.fieldId,name:i.fieldRefName,text:i.name,width:f,notafield:o.some(function(n){return n.referenceName.toLowerCase()===i.fieldRefName.toLowerCase()}),rollup:r,rollupCalculation:u}}),u=this.state.changedSortColumnFields.map(function(n){return{id:n.fieldId,name:n.fieldRefName,text:n.name,asc:n.asc}}),l=!h.arrayEquals(this.state.changedDisplayColumnFields,this.state.originalDisplayColumnFields,function(n,t){return c.equals(n.fieldRefName,t.fieldRefName,!0)},!1,!0),a=!h.arrayEquals(u,this.state.originalSortColumnFields,function(n,t){return c.equals(n.name,t.fieldRefName,!0)&&n.asc===t.asc},!1,!0),v={display:s,sort:u,added:f,removed:e};this.props.onOkClick(v,l||a)},t.prototype._getFieldWidth=function(n){return this._fieldWidthsMap[n.toLowerCase()]||this.props.getFieldWidth&&this.props.getFieldWidth(n)||o.LinkColumnHelper.getFieldColumnWidth(n,this._store)},t.prototype._areColumnFieldsValid=function(n,t){return n&&(t?n.length>0:!0)&&n.filter(function(n){return n.isInvalid||n.fieldRefName===null||n.fieldRefName.trim()===""}).length===0},t.prototype._areColumnsValid=function(){return this._areColumnFieldsValid(this.state.changedDisplayColumnFields,!0)&&this._areColumnFieldsValid(this.state.changedSortColumnFields,!1)},t._customRollupIdentifier="system.backlog.rollup.custom",t.componentType="columnOptionsPanel",__decorate([y.autobind],t.prototype,"_onDisplayColumnsChange",null),__decorate([y.autobind],t.prototype,"_onSortColumnsChange",null),__decorate([y.autobind],t.prototype,"_onOkClick",null),t}(i.Component);t.ColumnOptionsPanel=d;t.showColumnOptionsPanel=tt;s.registerLWPComponent(d.componentType,d)});

define("WorkItemTracking/Scripts/Dialogs/CommonOptions",["require","exports"],function(n,t){function i(n){return $.extend({width:400,minHeight:300,minWidth:375,height:"auto"},n)}function r(n){return $.extend({width:300,height:"auto"},n)}Object.defineProperty(t,"__esModule",{value:!0});t.errorDialogOptions=t.commonDialogOptions=void 0;t.commonDialogOptions=i;t.errorDialogOptions=r});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts",["require","exports","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation"],function(n,t,i){var r,u,f,e,o,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.Events=t.HostArtifactAdditionalData=t.InternalKnownColumns=t.SortDirection=t.FetchingLinks=t.ZeroDataExperienceViewMode=t.ViewMode=t.LinkColumnType=t.LINKED_ARTIFACTS_CUSTOMER_INTELLIGENCE_AREA=t.DefaultGridHeight=void 0;t.DefaultGridHeight=300;t.LINKED_ARTIFACTS_CUSTOMER_INTELLIGENCE_AREA="linkedArtifacts",function(n){n[n.String=0]="String";n[n.Integer=1]="Integer";n[n.DateTime=2]="DateTime";n[n.PlainText=3]="PlainText";n[n.Html=4]="Html";n[n.TreePath=5]="TreePath";n[n.Double=6]="Double";n[n.Guid=7]="Guid";n[n.Boolean=8]="Boolean";n[n.Identity=9]="Identity"}(r=t.LinkColumnType||(t.LinkColumnType={})),function(n){n[n.List=0]="List";n[n.Grid=1]="Grid";n[n.FullGrid=2]="FullGrid"}(u=t.ViewMode||(t.ViewMode={})),function(n){n[n.Hidden=0]="Hidden";n[n.Default=1]="Default";n[n.Custom=2]="Custom"}(f=t.ZeroDataExperienceViewMode||(t.ZeroDataExperienceViewMode={})),function(n){n[n.Done=0]="Done";n[n.InProgress=1]="InProgress"}(e=t.FetchingLinks||(t.FetchingLinks={})),function(n){n[n.Ascending=1]="Ascending";n[n.Descending=-1]="Descending"}(o=t.SortDirection||(t.SortDirection={}));t.InternalKnownColumns={Link:{name:i.LinkedArtifacts_ColumnHeader_Link,refName:"Link"},Id:{name:i.LinkedArtifacts_ColumnHeader_Id,refName:"System.Id"},State:{name:i.LinkedArtifacts_ColumnHeader_State,refName:"System.State"},LastUpdate:{name:i.LinkedArtifacts_ColumnHeader_LastUpdate,refName:"System.ChangedDate"},Comment:{name:i.LinkedArtifacts_ColumnHeader_Comment,refName:"System.Links.Comment"}},function(n){n.ProjectName="PROJECT_NAME";n.ProjectId="PROJECT_ID"}(s=t.HostArtifactAdditionalData||(t.HostArtifactAdditionalData={})),function(n){n.ForceRerender="LA_FORCE_RERENDER"}(h=t.Events||(t.Events={}))});

define("Notifications/Resources",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l,a;Object.defineProperty(t,"__esModule",{value:!0});t.SubscriptionTemplatesResource=t.SubscriptionsResource=t.SubscriptionsQueryResource=t.StatisticsQueryResource=t.NotificationsCustomerIntelligenceConstants=t.NotificationApiConstants=t.FollowsCustomerIntelligenceConstants=t.EventTypesResource=t.EventTypesFieldsResource=t.EventsResource=t.BatchNotificationOperationsResource=void 0,function(n){n.LocationId="8f3c6ab2-5bae-4537-b16e-f84e0955599e";n.Name="BatchNotificationOperations"}(i=t.BatchNotificationOperationsResource||(t.BatchNotificationOperationsResource={})),function(n){n.LocationId="14c57b7a-c0e6-4555-9f51-e067188fdd8e";n.Name="Events"}(r=t.EventsResource||(t.EventsResource={})),function(n){n.LocationId="b5bbdd21-c178-4398-b6db-0166d910028a";n.LocationIdString="b5bbdd21-c178-4398-b6db-0166d910028a";n.Name="EventTypeFieldValuesQuery"}(u=t.EventTypesFieldsResource||(t.EventTypesFieldsResource={})),function(n){n.LocationId="cc84fb5f-6247-4c7a-aeae-e5a3c3fddb21";n.Name="EventTypes"}(f=t.EventTypesResource||(t.EventTypesResource={})),function(n){n.Feature="Follows";n.FollowAction="Follow";n.UnfollowAction="Unfollow"}(e=t.FollowsCustomerIntelligenceConstants||(t.FollowsCustomerIntelligenceConstants={})),function(n){n.AreaId="1790FF0F-C188-4554-8DE8-26A4CEB751A2";n.InstanceType="00000003-0000-8888-8000-000000000000";n.AreaName="notification"}(o=t.NotificationApiConstants||(t.NotificationApiConstants={})),function(n){n.Area="Microsoft.VisualStudio.Services.Notifications"}(s=t.NotificationsCustomerIntelligenceConstants||(t.NotificationsCustomerIntelligenceConstants={})),function(n){n.LocationId="77878ce9-6391-49af-aa9d-768ac784461f";n.Name="StatisticsQuery"}(h=t.StatisticsQueryResource||(t.StatisticsQueryResource={})),function(n){n.LocationId="6864db85-08c0-4006-8e8e-cc1bebe31675";n.Name="SubscriptionQuery"}(c=t.SubscriptionsQueryResource||(t.SubscriptionsQueryResource={})),function(n){n.LocationId="70f911d6-abac-488c-85b3-a206bf57e165";n.Name="Subscriptions"}(l=t.SubscriptionsResource||(t.SubscriptionsResource={})),function(n){n.LocationId="fa5d24ba-7484-4f3d-888d-4ec6b1974082";n.Name="SubscriptionTemplates"}(a=t.SubscriptionTemplatesResource||(t.SubscriptionTemplatesResource={}))});

define("Notifications/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.SubscriptionTemplateType=t.SubscriptionTemplateQueryFlags=t.SubscriptionStatus=t.SubscriptionQueryFlags=t.SubscriptionPermissions=t.SubscriptionFlags=t.SubscriptionFieldType=t.SubscriberFlags=t.NotificationSubscriberDeliveryPreference=t.NotificationStatisticType=t.NotificationReasonType=t.NotificationOperation=t.EventTypeQueryFlags=t.EventPublisherQueryFlags=t.EvaluationOperationStatus=t.DefaultGroupDeliveryPreference=void 0,function(n){n[n.NoDelivery=-1]="NoDelivery";n[n.EachMember=2]="EachMember"}(i=t.DefaultGroupDeliveryPreference||(t.DefaultGroupDeliveryPreference={})),function(n){n[n.NotSet=0]="NotSet";n[n.Queued=1]="Queued";n[n.InProgress=2]="InProgress";n[n.Cancelled=3]="Cancelled";n[n.Succeeded=4]="Succeeded";n[n.Failed=5]="Failed";n[n.TimedOut=6]="TimedOut";n[n.NotFound=7]="NotFound"}(r=t.EvaluationOperationStatus||(t.EvaluationOperationStatus={})),function(n){n[n.None=0]="None";n[n.IncludeRemoteServices=2]="IncludeRemoteServices"}(u=t.EventPublisherQueryFlags||(t.EventPublisherQueryFlags={})),function(n){n[n.None=0]="None";n[n.IncludeFields=1]="IncludeFields"}(f=t.EventTypeQueryFlags||(t.EventTypeQueryFlags={})),function(n){n[n.None=0]="None";n[n.SuspendUnprocessed=1]="SuspendUnprocessed"}(e=t.NotificationOperation||(t.NotificationOperation={})),function(n){n[n.Unknown=0]="Unknown";n[n.Follows=1]="Follows";n[n.Personal=2]="Personal";n[n.PersonalAlias=3]="PersonalAlias";n[n.DirectMember=4]="DirectMember";n[n.IndirectMember=5]="IndirectMember";n[n.GroupAlias=6]="GroupAlias";n[n.SubscriptionAlias=7]="SubscriptionAlias";n[n.SingleRole=8]="SingleRole";n[n.DirectMemberGroupRole=9]="DirectMemberGroupRole";n[n.InDirectMemberGroupRole=10]="InDirectMemberGroupRole";n[n.AliasMemberGroupRole=11]="AliasMemberGroupRole"}(o=t.NotificationReasonType||(t.NotificationReasonType={})),function(n){n[n.NotificationBySubscription=0]="NotificationBySubscription";n[n.EventsByEventType=1]="EventsByEventType";n[n.NotificationByEventType=2]="NotificationByEventType";n[n.EventsByEventTypePerUser=3]="EventsByEventTypePerUser";n[n.NotificationByEventTypePerUser=4]="NotificationByEventTypePerUser";n[n.Events=5]="Events";n[n.Notifications=6]="Notifications";n[n.NotificationFailureBySubscription=7]="NotificationFailureBySubscription";n[n.UnprocessedRangeStart=100]="UnprocessedRangeStart";n[n.UnprocessedEventsByPublisher=101]="UnprocessedEventsByPublisher";n[n.UnprocessedEventDelayByPublisher=102]="UnprocessedEventDelayByPublisher";n[n.UnprocessedNotificationsByChannelByPublisher=103]="UnprocessedNotificationsByChannelByPublisher";n[n.UnprocessedNotificationDelayByChannelByPublisher=104]="UnprocessedNotificationDelayByChannelByPublisher";n[n.DelayRangeStart=200]="DelayRangeStart";n[n.TotalPipelineTime=201]="TotalPipelineTime";n[n.NotificationPipelineTime=202]="NotificationPipelineTime";n[n.EventPipelineTime=203]="EventPipelineTime";n[n.HourlyRangeStart=1e3]="HourlyRangeStart";n[n.HourlyNotificationBySubscription=1001]="HourlyNotificationBySubscription";n[n.HourlyEventsByEventTypePerUser=1002]="HourlyEventsByEventTypePerUser";n[n.HourlyEvents=1003]="HourlyEvents";n[n.HourlyNotifications=1004]="HourlyNotifications";n[n.HourlyUnprocessedEventsByPublisher=1101]="HourlyUnprocessedEventsByPublisher";n[n.HourlyUnprocessedEventDelayByPublisher=1102]="HourlyUnprocessedEventDelayByPublisher";n[n.HourlyUnprocessedNotificationsByChannelByPublisher=1103]="HourlyUnprocessedNotificationsByChannelByPublisher";n[n.HourlyUnprocessedNotificationDelayByChannelByPublisher=1104]="HourlyUnprocessedNotificationDelayByChannelByPublisher";n[n.HourlyTotalPipelineTime=1201]="HourlyTotalPipelineTime";n[n.HourlyNotificationPipelineTime=1202]="HourlyNotificationPipelineTime";n[n.HourlyEventPipelineTime=1203]="HourlyEventPipelineTime"}(s=t.NotificationStatisticType||(t.NotificationStatisticType={})),function(n){n[n.NoDelivery=-1]="NoDelivery";n[n.PreferredEmailAddress=1]="PreferredEmailAddress";n[n.EachMember=2]="EachMember";n[n.UseDefault=3]="UseDefault"}(h=t.NotificationSubscriberDeliveryPreference||(t.NotificationSubscriberDeliveryPreference={})),function(n){n[n.None=0]="None";n[n.DeliveryPreferencesEditable=2]="DeliveryPreferencesEditable";n[n.SupportsPreferredEmailAddressDelivery=4]="SupportsPreferredEmailAddressDelivery";n[n.SupportsEachMemberDelivery=8]="SupportsEachMemberDelivery";n[n.SupportsNoDelivery=16]="SupportsNoDelivery";n[n.IsUser=32]="IsUser";n[n.IsGroup=64]="IsGroup";n[n.IsTeam=128]="IsTeam"}(c=t.SubscriberFlags||(t.SubscriberFlags={})),function(n){n[n.String=1]="String";n[n.Integer=2]="Integer";n[n.DateTime=3]="DateTime";n[n.PlainText=5]="PlainText";n[n.Html=7]="Html";n[n.TreePath=8]="TreePath";n[n.History=9]="History";n[n.Double=10]="Double";n[n.Guid=11]="Guid";n[n.Boolean=12]="Boolean";n[n.Identity=13]="Identity";n[n.PicklistInteger=14]="PicklistInteger";n[n.PicklistString=15]="PicklistString";n[n.PicklistDouble=16]="PicklistDouble";n[n.TeamProject=17]="TeamProject"}(l=t.SubscriptionFieldType||(t.SubscriptionFieldType={})),function(n){n[n.None=0]="None";n[n.GroupSubscription=1]="GroupSubscription";n[n.ContributedSubscription=2]="ContributedSubscription";n[n.CanOptOut=4]="CanOptOut";n[n.TeamSubscription=8]="TeamSubscription";n[n.OneActorMatches=16]="OneActorMatches"}(a=t.SubscriptionFlags||(t.SubscriptionFlags={})),function(n){n[n.None=0]="None";n[n.View=1]="View";n[n.Edit=2]="Edit";n[n.Delete=4]="Delete"}(v=t.SubscriptionPermissions||(t.SubscriptionPermissions={})),function(n){n[n.None=0]="None";n[n.IncludeInvalidSubscriptions=2]="IncludeInvalidSubscriptions";n[n.IncludeDeletedSubscriptions=4]="IncludeDeletedSubscriptions";n[n.IncludeFilterDetails=8]="IncludeFilterDetails";n[n.AlwaysReturnBasicInformation=16]="AlwaysReturnBasicInformation";n[n.IncludeSystemSubscriptions=32]="IncludeSystemSubscriptions"}(y=t.SubscriptionQueryFlags||(t.SubscriptionQueryFlags={})),function(n){n[n.JailedByNotificationsVolume=-200]="JailedByNotificationsVolume";n[n.PendingDeletion=-100]="PendingDeletion";n[n.DisabledArgumentException=-12]="DisabledArgumentException";n[n.DisabledProjectInvalid=-11]="DisabledProjectInvalid";n[n.DisabledMissingPermissions=-10]="DisabledMissingPermissions";n[n.DisabledFromProbation=-9]="DisabledFromProbation";n[n.DisabledInactiveIdentity=-8]="DisabledInactiveIdentity";n[n.DisabledMessageQueueNotSupported=-7]="DisabledMessageQueueNotSupported";n[n.DisabledMissingIdentity=-6]="DisabledMissingIdentity";n[n.DisabledInvalidRoleExpression=-5]="DisabledInvalidRoleExpression";n[n.DisabledInvalidPathClause=-4]="DisabledInvalidPathClause";n[n.DisabledAsDuplicateOfDefault=-3]="DisabledAsDuplicateOfDefault";n[n.DisabledByAdmin=-2]="DisabledByAdmin";n[n.Disabled=-1]="Disabled";n[n.Enabled=0]="Enabled";n[n.EnabledOnProbation=1]="EnabledOnProbation"}(p=t.SubscriptionStatus||(t.SubscriptionStatus={})),function(n){n[n.None=0]="None";n[n.IncludeUser=1]="IncludeUser";n[n.IncludeGroup=2]="IncludeGroup";n[n.IncludeUserAndGroup=4]="IncludeUserAndGroup";n[n.IncludeEventTypeInformation=22]="IncludeEventTypeInformation"}(w=t.SubscriptionTemplateQueryFlags||(t.SubscriptionTemplateQueryFlags={})),function(n){n[n.User=0]="User";n[n.Team=1]="Team";n[n.Both=2]="Both";n[n.None=3]="None"}(b=t.SubscriptionTemplateType||(t.SubscriptionTemplateType={}));t.TypeInfo={ActorNotificationReason:{},BatchNotificationOperation:{},DefaultGroupDeliveryPreference:{enumValues:{noDelivery:-1,eachMember:2}},EvaluationOperationStatus:{enumValues:{notSet:0,queued:1,inProgress:2,cancelled:3,succeeded:4,failed:5,timedOut:6,notFound:7}},EventBacklogStatus:{},EventProcessingLog:{},EventPublisherQueryFlags:{enumValues:{none:0,includeRemoteServices:2}},EventTypeQueryFlags:{enumValues:{none:0,includeFields:1}},INotificationDiagnosticLog:{},NotificationAdminSettings:{},NotificationAdminSettingsUpdateParameters:{},NotificationBacklogStatus:{},NotificationCommonViewData:{},NotificationDeliveryLog:{},NotificationDiagnosticLog:{},NotificationEventBacklogStatus:{},NotificationEventField:{},NotificationEventFieldType:{},NotificationEventType:{},NotificationJobDiagnosticLog:{},NotificationOperation:{enumValues:{none:0,suspendUnprocessed:1}},NotificationReason:{},NotificationReasonType:{enumValues:{unknown:0,follows:1,personal:2,personalAlias:3,directMember:4,indirectMember:5,groupAlias:6,subscriptionAlias:7,singleRole:8,directMemberGroupRole:9,inDirectMemberGroupRole:10,aliasMemberGroupRole:11}},NotificationStatistic:{},NotificationStatisticsQuery:{},NotificationStatisticsQueryConditions:{},NotificationStatisticType:{enumValues:{notificationBySubscription:0,eventsByEventType:1,notificationByEventType:2,eventsByEventTypePerUser:3,notificationByEventTypePerUser:4,events:5,notifications:6,notificationFailureBySubscription:7,unprocessedRangeStart:100,unprocessedEventsByPublisher:101,unprocessedEventDelayByPublisher:102,unprocessedNotificationsByChannelByPublisher:103,unprocessedNotificationDelayByChannelByPublisher:104,delayRangeStart:200,totalPipelineTime:201,notificationPipelineTime:202,eventPipelineTime:203,hourlyRangeStart:1e3,hourlyNotificationBySubscription:1001,hourlyEventsByEventTypePerUser:1002,hourlyEvents:1003,hourlyNotifications:1004,hourlyUnprocessedEventsByPublisher:1101,hourlyUnprocessedEventDelayByPublisher:1102,hourlyUnprocessedNotificationsByChannelByPublisher:1103,hourlyUnprocessedNotificationDelayByChannelByPublisher:1104,hourlyTotalPipelineTime:1201,hourlyNotificationPipelineTime:1202,hourlyEventPipelineTime:1203}},NotificationSubscriber:{},NotificationSubscriberDeliveryPreference:{enumValues:{noDelivery:-1,preferredEmailAddress:1,eachMember:2,useDefault:3}},NotificationSubscriberUpdateParameters:{},NotificationSubscription:{},NotificationSubscriptionsViewData:{},NotificationSubscriptionTemplate:{},NotificationSubscriptionUpdateParameters:{},SubscriberFlags:{enumValues:{none:0,deliveryPreferencesEditable:2,supportsPreferredEmailAddressDelivery:4,supportsEachMemberDelivery:8,supportsNoDelivery:16,isUser:32,isGroup:64,isTeam:128}},SubscriptionDiagnostics:{},SubscriptionEvaluationRequest:{},SubscriptionEvaluationResult:{},SubscriptionFieldType:{enumValues:{string:1,integer:2,dateTime:3,plainText:5,html:7,treePath:8,history:9,double:10,guid:11,boolean:12,identity:13,picklistInteger:14,picklistString:15,picklistDouble:16,teamProject:17}},SubscriptionFlags:{enumValues:{none:0,groupSubscription:1,contributedSubscription:2,canOptOut:4,teamSubscription:8,oneActorMatches:16}},SubscriptionPermissions:{enumValues:{none:0,view:1,edit:2,"delete":4}},SubscriptionQuery:{},SubscriptionQueryCondition:{},SubscriptionQueryFlags:{enumValues:{none:0,includeInvalidSubscriptions:2,includeDeletedSubscriptions:4,includeFilterDetails:8,alwaysReturnBasicInformation:16,includeSystemSubscriptions:32}},SubscriptionStatisticViewData:{},SubscriptionStatus:{enumValues:{jailedByNotificationsVolume:-200,pendingDeletion:-100,disabledArgumentException:-12,disabledProjectInvalid:-11,disabledMissingPermissions:-10,disabledFromProbation:-9,disabledInactiveIdentity:-8,disabledMessageQueueNotSupported:-7,disabledMissingIdentity:-6,disabledInvalidRoleExpression:-5,disabledInvalidPathClause:-4,disabledAsDuplicateOfDefault:-3,disabledByAdmin:-2,disabled:-1,enabled:0,enabledOnProbation:1}},SubscriptionTemplateQueryFlags:{enumValues:{none:0,includeUser:1,includeGroup:2,includeUserAndGroup:4,includeEventTypeInformation:22}},SubscriptionTemplateType:{enumValues:{user:0,team:1,both:2,none:3}},SubscriptionTraceDiagnosticLog:{},SubscriptionTraceEventProcessingLog:{},SubscriptionTraceNotificationDeliveryLog:{},SubscriptionTracing:{}};t.TypeInfo.ActorNotificationReason.fields={notificationReasonType:{enumType:t.TypeInfo.NotificationReasonType}};t.TypeInfo.BatchNotificationOperation.fields={notificationOperation:{enumType:t.TypeInfo.NotificationOperation}};t.TypeInfo.EventBacklogStatus.fields={captureTime:{isDate:!0},lastEventBatchStartTime:{isDate:!0},lastEventProcessedTime:{isDate:!0},lastJobBatchStartTime:{isDate:!0},lastJobProcessedTime:{isDate:!0},oldestPendingEventTime:{isDate:!0}};t.TypeInfo.EventProcessingLog.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.INotificationDiagnosticLog.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.NotificationAdminSettings.fields={defaultGroupDeliveryPreference:{enumType:t.TypeInfo.DefaultGroupDeliveryPreference}};t.TypeInfo.NotificationAdminSettingsUpdateParameters.fields={defaultGroupDeliveryPreference:{enumType:t.TypeInfo.DefaultGroupDeliveryPreference}};t.TypeInfo.NotificationBacklogStatus.fields={captureTime:{isDate:!0},lastJobBatchStartTime:{isDate:!0},lastJobProcessedTime:{isDate:!0},lastNotificationBatchStartTime:{isDate:!0},lastNotificationProcessedTime:{isDate:!0},oldestPendingNotificationTime:{isDate:!0}};t.TypeInfo.NotificationCommonViewData.fields={adminSettings:{typeInfo:t.TypeInfo.NotificationAdminSettings},subscriber:{typeInfo:t.TypeInfo.NotificationSubscriber}};t.TypeInfo.NotificationDeliveryLog.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.NotificationDiagnosticLog.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.NotificationEventBacklogStatus.fields={eventBacklogStatus:{isArray:!0,typeInfo:t.TypeInfo.EventBacklogStatus},notificationBacklogStatus:{isArray:!0,typeInfo:t.TypeInfo.NotificationBacklogStatus}};t.TypeInfo.NotificationEventField.fields={fieldType:{typeInfo:t.TypeInfo.NotificationEventFieldType}};t.TypeInfo.NotificationEventFieldType.fields={subscriptionFieldType:{enumType:t.TypeInfo.SubscriptionFieldType}};t.TypeInfo.NotificationEventType.fields={fields:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.NotificationEventField}};t.TypeInfo.NotificationJobDiagnosticLog.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.NotificationReason.fields={notificationReasonType:{enumType:t.TypeInfo.NotificationReasonType}};t.TypeInfo.NotificationStatistic.fields={date:{isDate:!0},type:{enumType:t.TypeInfo.NotificationStatisticType}};t.TypeInfo.NotificationStatisticsQuery.fields={conditions:{isArray:!0,typeInfo:t.TypeInfo.NotificationStatisticsQueryConditions}};t.TypeInfo.NotificationStatisticsQueryConditions.fields={endDate:{isDate:!0},startDate:{isDate:!0},type:{enumType:t.TypeInfo.NotificationStatisticType}};t.TypeInfo.NotificationSubscriber.fields={deliveryPreference:{enumType:t.TypeInfo.NotificationSubscriberDeliveryPreference},flags:{enumType:t.TypeInfo.SubscriberFlags}};t.TypeInfo.NotificationSubscriberUpdateParameters.fields={deliveryPreference:{enumType:t.TypeInfo.NotificationSubscriberDeliveryPreference}};t.TypeInfo.NotificationSubscription.fields={diagnostics:{typeInfo:t.TypeInfo.SubscriptionDiagnostics},flags:{enumType:t.TypeInfo.SubscriptionFlags},modifiedDate:{isDate:!0},permissions:{enumType:t.TypeInfo.SubscriptionPermissions},status:{enumType:t.TypeInfo.SubscriptionStatus}};t.TypeInfo.NotificationSubscriptionsViewData.fields={eventTypes:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.NotificationEventType},mapCategoryIdToSubscriptionTemplates:{isDictionary:!0,dictionaryValueFieldInfo:{isArray:!0,typeInfo:t.TypeInfo.NotificationSubscriptionTemplate}},subscribers:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.NotificationSubscriber},subscriptions:{isArray:!0,typeInfo:t.TypeInfo.NotificationSubscription}};t.TypeInfo.NotificationSubscriptionTemplate.fields={notificationEventInformation:{typeInfo:t.TypeInfo.NotificationEventType},type:{enumType:t.TypeInfo.SubscriptionTemplateType}};t.TypeInfo.NotificationSubscriptionUpdateParameters.fields={status:{enumType:t.TypeInfo.SubscriptionStatus}};t.TypeInfo.SubscriptionDiagnostics.fields={deliveryResults:{typeInfo:t.TypeInfo.SubscriptionTracing},deliveryTracing:{typeInfo:t.TypeInfo.SubscriptionTracing},evaluationTracing:{typeInfo:t.TypeInfo.SubscriptionTracing}};t.TypeInfo.SubscriptionEvaluationRequest.fields={minEventsCreatedDate:{isDate:!0}};t.TypeInfo.SubscriptionEvaluationResult.fields={evaluationJobStatus:{enumType:t.TypeInfo.EvaluationOperationStatus}};t.TypeInfo.SubscriptionQuery.fields={conditions:{isArray:!0,typeInfo:t.TypeInfo.SubscriptionQueryCondition},queryFlags:{enumType:t.TypeInfo.SubscriptionQueryFlags}};t.TypeInfo.SubscriptionQueryCondition.fields={flags:{enumType:t.TypeInfo.SubscriptionFlags}};t.TypeInfo.SubscriptionStatisticViewData.fields={events:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.NotificationEventType},queryDate:{isDate:!0},statistics:{isDictionary:!0,dictionaryValueFieldInfo:{isArray:!0,typeInfo:t.TypeInfo.NotificationStatistic}},subscriptions:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.NotificationSubscription}};t.TypeInfo.SubscriptionTraceDiagnosticLog.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.SubscriptionTraceEventProcessingLog.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.SubscriptionTraceNotificationDeliveryLog.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.SubscriptionTracing.fields={endDate:{isDate:!0},startDate:{isDate:!0}}});

define("Notifications/RestClient",["require","exports","Notifications/Contracts","VSS/WebApi/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u,f){"use strict";function et(n){return window.VSS&&window.VSS.VssSDKRestVersion&&ut[window.VSS.VssSDKRestVersion]?u.getClient(ut[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):u.getClient(y,undefined,undefined,undefined,n)}var s,h,c,l,a,e,o,v,y,p,w,b,k,d,g,nt,tt,it,rt,ft,ut;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.NotificationHttpClient=t.NotificationHttpClient3=t.NotificationHttpClient3_1=t.NotificationHttpClient3_2=t.NotificationHttpClient4=t.NotificationHttpClient4_1=t.NotificationHttpClient5=t.NotificationHttpClient5_1=t.NotificationHttpClient5_2=t.NotificationHttpClient6=t.NotificationHttpClient6_1=t.NotificationHttpClient7=t.NotificationHttpClient7_1=t.CommonMethods6_1To7_1=t.CommonMethods5To7_1=t.CommonMethods4_1To7_1=t.CommonMethods4To7_1=t.CommonMethods3_2To7_1=t.CommonMethods3_1To7_1=t.CommonMethods3To7_1=void 0;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getSubscriptionTemplates=function(){return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"fa5d24ba-7484-4f3d-888d-4ec6b1974082",resource:"SubscriptionTemplates",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.NotificationSubscriptionTemplate,responseIsCollection:!0,apiVersion:this.subscriptionTemplatesApiVersion})},t.prototype.updateSubscription=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"notification",locationId:"70f911d6-abac-488c-85b3-a206bf57e165",resource:"Subscriptions",routeTemplate:"_apis/{area}/{resource}/{subscriptionId}",requestType:i.TypeInfo.NotificationSubscriptionUpdateParameters,responseType:i.TypeInfo.NotificationSubscription,routeValues:{subscriptionId:t},apiVersion:this.subscriptionsApiVersion,data:n})},t.prototype.listSubscriptions=function(n,t,r){var u={targetId:n,ids:t&&t.join(","),queryFlags:r};return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"70f911d6-abac-488c-85b3-a206bf57e165",resource:"Subscriptions",routeTemplate:"_apis/{area}/{resource}/{subscriptionId}",responseType:i.TypeInfo.NotificationSubscription,responseIsCollection:!0,queryParams:u,apiVersion:this.subscriptionsApiVersion})},t.prototype.getSubscription=function(n,t){var r={queryFlags:t};return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"70f911d6-abac-488c-85b3-a206bf57e165",resource:"Subscriptions",routeTemplate:"_apis/{area}/{resource}/{subscriptionId}",responseType:i.TypeInfo.NotificationSubscription,routeValues:{subscriptionId:n},queryParams:r,apiVersion:this.subscriptionsApiVersion})},t.prototype.deleteSubscription=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"notification",locationId:"70f911d6-abac-488c-85b3-a206bf57e165",resource:"Subscriptions",routeTemplate:"_apis/{area}/{resource}/{subscriptionId}",routeValues:{subscriptionId:n},apiVersion:this.subscriptionsApiVersion})},t.prototype.createSubscription=function(n){return this._beginRequest({httpMethod:"POST",area:"notification",locationId:"70f911d6-abac-488c-85b3-a206bf57e165",resource:"Subscriptions",routeTemplate:"_apis/{area}/{resource}/{subscriptionId}",responseType:i.TypeInfo.NotificationSubscription,apiVersion:this.subscriptionsApiVersion,data:n})},t.prototype.querySubscriptions=function(n){return this._beginRequest({httpMethod:"POST",area:"notification",locationId:"6864db85-08c0-4006-8e8e-cc1bebe31675",resource:"SubscriptionQuery",routeTemplate:"_apis/{area}/{resource}",requestType:i.TypeInfo.SubscriptionQuery,responseType:i.TypeInfo.NotificationSubscription,responseIsCollection:!0,apiVersion:this.subscriptionQueryApiVersion,data:n})},t.prototype.queryStatistics=function(n){return this._beginRequest({httpMethod:"POST",area:"notification",locationId:"77878ce9-6391-49af-aa9d-768ac784461f",resource:"StatisticsQuery",routeTemplate:"_apis/{area}/{resource}",requestType:i.TypeInfo.NotificationStatisticsQuery,responseType:i.TypeInfo.NotificationStatistic,responseIsCollection:!0,apiVersion:this.statisticsQueryApiVersion,data:n})},t.prototype.listEventTypes=function(n){var t={publisherId:n};return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"cc84fb5f-6247-4c7a-aeae-e5a3c3fddb21",resource:"EventTypes",routeTemplate:"_apis/{area}/{resource}/{eventType}",responseType:i.TypeInfo.NotificationEventType,responseIsCollection:!0,queryParams:t,apiVersion:this.eventTypesApiVersion})},t.prototype.getEventType=function(n){return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"cc84fb5f-6247-4c7a-aeae-e5a3c3fddb21",resource:"EventTypes",routeTemplate:"_apis/{area}/{resource}/{eventType}",responseType:i.TypeInfo.NotificationEventType,routeValues:{eventType:n},apiVersion:this.eventTypesApiVersion})},t.prototype.queryEventTypes=function(n,t){return this._beginRequest({httpMethod:"POST",area:"notification",locationId:"b5bbdd21-c178-4398-b6db-0166d910028a",resource:"EventTypeFieldValuesQuery",routeTemplate:"_apis/{area}/eventTypes/{eventType}/fieldValuesQuery",responseType:i.TypeInfo.NotificationEventField,responseIsCollection:!0,routeValues:{eventType:t},apiVersion:this.eventTypeFieldValuesQueryApiVersion,data:n})},t.prototype.publishEvent=function(n){return this._beginRequest({httpMethod:"POST",area:"notification",locationId:"14c57b7a-c0e6-4555-9f51-e067188fdd8e",resource:"Events",routeTemplate:"_apis/{area}/{resource}",requestType:r.TypeInfo.VssNotificationEvent,responseType:r.TypeInfo.VssNotificationEvent,apiVersion:this.eventsApiVersion,data:n})},t.serviceInstanceId="00025394-6065-48CA-87D9-7F5672854EF7",t}(f.VssHttpClient);t.CommonMethods3To7_1=s;h=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.performBatchNotificationOperations=function(n){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"notification",locationId:"8f3c6ab2-5bae-4537-b16e-f84e0955599e",resource:"BatchNotificationOperations",routeTemplate:"_apis/{area}/{resource}",requestType:i.TypeInfo.BatchNotificationOperation,apiVersion:this.batchNotificationOperationsApiVersion,data:n})},t}(s);t.CommonMethods3_1To7_1=h;c=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateSubscriptionUserSettings=function(n,t,i){return this._beginRequest({httpMethod:"PUT",area:"notification",locationId:"ed5a3dff-aeb5-41b1-b4f7-89e66e58b62e",resource:"UserSettings",routeTemplate:"_apis/{area}/Subscriptions/{subscriptionId}/{resource}/{userId}",routeValues:{subscriptionId:t,userId:i},apiVersion:this.userSettingsApiVersion,data:n})},t}(h);t.CommonMethods3_2To7_1=c;l=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateSubscriber=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"notification",locationId:"4d5caff1-25ba-430b-b808-7a1f352cc197",resource:"Subscribers",routeTemplate:"_apis/{area}/{resource}/{subscriberId}",requestType:i.TypeInfo.NotificationSubscriberUpdateParameters,responseType:i.TypeInfo.NotificationSubscriber,routeValues:{subscriberId:t},apiVersion:this.subscribersApiVersion,data:n})},t.prototype.getSubscriber=function(n){return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"4d5caff1-25ba-430b-b808-7a1f352cc197",resource:"Subscribers",routeTemplate:"_apis/{area}/{resource}/{subscriberId}",responseType:i.TypeInfo.NotificationSubscriber,routeValues:{subscriberId:n},apiVersion:this.subscribersApiVersion})},t.prototype.listNotificationReasons=function(n){var t={notificationIds:n};return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"19824fa9-1c76-40e6-9cce-cf0b9ca1cb60",resource:"NotificationReasons",routeTemplate:"_apis/{area}/{resource}/{notificationId}",responseType:i.TypeInfo.NotificationReason,responseIsCollection:!0,queryParams:t,apiVersion:this.notificationReasonsApiVersion})},t.prototype.getNotificationReasons=function(n){return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"19824fa9-1c76-40e6-9cce-cf0b9ca1cb60",resource:"NotificationReasons",routeTemplate:"_apis/{area}/{resource}/{notificationId}",responseType:i.TypeInfo.NotificationReason,routeValues:{notificationId:n},apiVersion:this.notificationReasonsApiVersion})},t}(c);t.CommonMethods4To7_1=l;a=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateSubscriptionDiagnostics=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"notification",locationId:"20f1929d-4be7-4c2e-a74e-d47640ff3418",resource:"Diagnostics",routeTemplate:"_apis/{area}/subscriptions/{subscriptionId}/diagnostics",responseType:i.TypeInfo.SubscriptionDiagnostics,routeValues:{subscriptionId:t},apiVersion:this.diagnosticsApiVersion,data:n})},t.prototype.getSubscriptionDiagnostics=function(n){return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"20f1929d-4be7-4c2e-a74e-d47640ff3418",resource:"Diagnostics",routeTemplate:"_apis/{area}/subscriptions/{subscriptionId}/diagnostics",responseType:i.TypeInfo.SubscriptionDiagnostics,routeValues:{subscriptionId:n},apiVersion:this.diagnosticsApiVersion})},t.prototype.listLogs=function(n,t,r,u){var f={startTime:r,endTime:u};return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"991842f3-eb16-4aea-ac81-81353ef2b75c",resource:"DiagnosticLogs",routeTemplate:"_apis/{area}/{resource}/{source}/entries/{entryId}",responseType:i.TypeInfo.INotificationDiagnosticLog,responseIsCollection:!0,routeValues:{source:n,entryId:t},queryParams:f,apiVersion:this.diagnosticLogsApiVersion})},t}(l);t.CommonMethods4_1To7_1=a;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateSettings=function(n){return this._beginRequest({httpMethod:"PATCH",area:"notification",locationId:"cbe076d8-2803-45ff-8d8d-44653686ea2a",resource:"Settings",routeTemplate:"_apis/{area}/{resource}",requestType:i.TypeInfo.NotificationAdminSettingsUpdateParameters,responseType:i.TypeInfo.NotificationAdminSettings,apiVersion:this.settingsApiVersion,data:n})},t.prototype.getSettings=function(){return this._beginRequest({httpMethod:"GET",area:"notification",locationId:"cbe076d8-2803-45ff-8d8d-44653686ea2a",resource:"Settings",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.NotificationAdminSettings,apiVersion:this.settingsApiVersion})},t.prototype.transformEvent=function(n){return this._beginRequest({httpMethod:"POST",area:"notification",locationId:"9463a800-1b44-450e-9083-f948ea174b45",resource:"EventTransforms",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.eventTransformsApiVersion,data:n})},t}(a);t.CommonMethods5To7_1=e;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.publishTokenEvent=function(n){return this._beginRequest({httpMethod:"POST",area:"notification",locationId:"31dc86a2-67e8-4452-99a4-2b301ba28291",resource:"TokenNotificationEvent",routeTemplate:"_apis/{area}/{resource}",requestType:r.TypeInfo.VssNotificationEvent,responseType:r.TypeInfo.VssNotificationEvent,apiVersion:this.tokenNotificationEventApiVersion,data:n})},t}(e);t.CommonMethods6_1To7_1=o;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.diagnosticLogsApiVersion=r.diagnosticsApiVersion=r.eventsApiVersion=r.eventTransformsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.settingsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.tokenNotificationEventApiVersion=r.userSettingsApiVersion="7.1-preview.1",r}return __extends(t,n),t}(o);t.NotificationHttpClient7_1=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.diagnosticLogsApiVersion=r.diagnosticsApiVersion=r.eventsApiVersion=r.eventTransformsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.settingsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.tokenNotificationEventApiVersion=r.userSettingsApiVersion="7.0",r}return __extends(t,n),t}(o);t.NotificationHttpClient7=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.diagnosticLogsApiVersion=r.diagnosticsApiVersion=r.eventsApiVersion=r.eventTransformsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.settingsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.tokenNotificationEventApiVersion=r.userSettingsApiVersion="6.1",r}return __extends(t,n),t}(o);t.NotificationHttpClient6_1=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.diagnosticLogsApiVersion=r.diagnosticsApiVersion=r.eventsApiVersion=r.eventTransformsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.settingsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.userSettingsApiVersion="6.0",r}return __extends(t,n),t}(e);t.NotificationHttpClient6=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.diagnosticLogsApiVersion=r.diagnosticsApiVersion=r.eventsApiVersion=r.eventTransformsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.settingsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.userSettingsApiVersion="5.2",r}return __extends(t,n),t}(e);t.NotificationHttpClient5_2=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.diagnosticLogsApiVersion=r.diagnosticsApiVersion=r.eventsApiVersion=r.eventTransformsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.settingsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.userSettingsApiVersion="5.1",r}return __extends(t,n),t}(e);t.NotificationHttpClient5_1=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.diagnosticLogsApiVersion=r.diagnosticsApiVersion=r.eventsApiVersion=r.eventTransformsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.settingsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.userSettingsApiVersion="5.0",r}return __extends(t,n),t}(e);t.NotificationHttpClient5=d;g=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.diagnosticLogsApiVersion=r.diagnosticsApiVersion=r.eventsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.userSettingsApiVersion="4.1",r}return __extends(t,n),t}(a);t.NotificationHttpClient4_1=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.eventsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.notificationReasonsApiVersion=r.statisticsQueryApiVersion=r.subscribersApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.userSettingsApiVersion="4.0",r}return __extends(t,n),t}(l);t.NotificationHttpClient4=nt;tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.eventsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.statisticsQueryApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion=r.userSettingsApiVersion="3.2",r}return __extends(t,n),t}(c);t.NotificationHttpClient3_2=tt;it=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.batchNotificationOperationsApiVersion=r.eventsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.statisticsQueryApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion="3.1",r}return __extends(t,n),t}(h);t.NotificationHttpClient3_1=it;rt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.eventsApiVersion=r.eventTypeFieldValuesQueryApiVersion=r.eventTypesApiVersion=r.statisticsQueryApiVersion=r.subscriptionQueryApiVersion=r.subscriptionsApiVersion=r.subscriptionTemplatesApiVersion="3.0",r}return __extends(t,n),t}(s);t.NotificationHttpClient3=rt;ft=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(v);t.NotificationHttpClient=ft;ut={"7.1":v,"7.0":y,"6.1":p,"6.0":w,"5.2":b,"5.1":k,"5.0":d,"4.1":g,"4.0":nt,"3.2":tt,"3.1":it,"3.0":rt};t.getClient=et});

define("Notifications/Services",["require","exports","q","VSS/Events/Services","Notifications/Resources","Notifications/RestClient","VSS/Service","VSS/ClientTrace/Contracts","VSS/ClientTrace/Services","VSS/Diag"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.FollowsService=void 0;var c=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeConnection=function(t,i){i===void 0&&(i=null);n.prototype.initializeConnection.call(this,t);this._httpClient=e.getCollectionClient(f.NotificationHttpClient3_1,this.getWebContext(),i);this._followsCache={}},t.prototype.clearCache=function(){this._followsCache&&(this._followsCache={})},t.prototype.getSubscription=function(n,r){var f=this,h={artifactId:n.artifactId,artifactType:n.artifactType,type:t.FOLLOWS_TYPE,artifactUri:null,eventType:""},c={filter:h,flags:null,subscriptionId:n.subscriptionId?n.subscriptionId.toString():null,scope:"",subscriberId:r},l={conditions:[c],queryFlags:null},e=this._makePromiseKey(n.artifactId,n.artifactType),o=this._followsCache[e],s,u;return o?o:(s=this._httpClient.querySubscriptions(l),u=i.defer(),this._followsCache[e]=u.promise,s.then(function(n){n.length>0?u.resolve(f._artifactSubscriptionFromNotificationSubscription(n[0])):u.resolve(null)},function(n){f._publishErrorTelemetry("getSubscription",n);delete f._followsCache[e];u.reject(n)}),u.promise)},t.prototype.followArtifact=function(n,i){var r=this._getNotificationSubscriptionObject(n),f=this._httpClient.createSubscription(r),e=$.extend({layer:t.LAYER},i||{},{artifactId:n.artifactId,artifactType:n.artifactType});return this._publishTelemetry(e,u.FollowsCustomerIntelligenceConstants.FollowAction),this._handlePromise(n,!0,f)},t.prototype.unfollowArtifact=function(n,r,f){var o=this,c=this._getNotificationSubscriptionObject(n),h=$.extend({layer:t.LAYER},f||{},{artifactId:n.artifactId,artifactType:n.artifactType}),e,s;return this._publishTelemetry(h,u.FollowsCustomerIntelligenceConstants.UnfollowAction),n.subscriptionId<=0?(e=i.defer(),this.getSubscription(n,r).then(function(t){if(t){var i=o._httpClient.deleteSubscription(t.subscriptionId.toString());o._handlePromise(n,!1,i).then(function(){e.resolve(null)})}else e.resolve(null)},function(n){o._publishErrorTelemetry("getSubscription",n);e.reject(n)}),e.promise):(s=this._httpClient.deleteSubscription(n.subscriptionId.toString()),this._handlePromise(n,!1,s))},t.prototype.refresh=function(n){var t=this._makePromiseKey(n.artifactId,n.artifactType);delete this._followsCache[t]},t.prototype._getNotificationSubscriptionObject=function(n){var i={artifactId:n.artifactId,artifactType:n.artifactType,type:t.FOLLOWS_TYPE,artifactUri:null,eventType:null};return{diagnostics:null,_links:null,adminSettings:null,channel:null,flags:null,lastModifiedBy:null,modifiedDate:null,scope:null,status:null,statusMessage:"",subscriber:null,url:"",userSettings:null,description:n.description,extendedProperties:null,id:n.subscriptionId?n.subscriptionId.toString():null,filter:i,permissions:null}},t.prototype._handlePromise=function(n,t,r){var f=this,e=i.defer(),o=this._makePromiseKey(n.artifactId,n.artifactType);return this._followsCache[o]=e.promise,this._fireChanging(n,t),r.then(function(i){e.resolve(t?f._artifactSubscriptionFromNotificationSubscription(i):null);i&&(n.subscriptionId=parseInt(i.id));f._fireChanged(n,t)},function(i){!t&&i&&i.status===204?e.resolve(null):(f._publishErrorTelemetry(t?u.FollowsCustomerIntelligenceConstants.FollowAction:u.FollowsCustomerIntelligenceConstants.UnfollowAction,i),delete f._followsCache[o],e.reject(i));f._fireChanged(n,t)}),e.promise},t.prototype._artifactSubscriptionFromNotificationSubscription=function(n){var t=n.filter;return n.description!=null&&n.description!=""?{artifactId:t.artifactId,artifactType:t.artifactType,subscriptionId:parseInt(n.id),description:n.description}:{artifactId:t.artifactId,artifactType:t.artifactType,subscriptionId:parseInt(n.id)}},t.prototype._makePromiseKey=function(n,t){return t+"_"+n},t.prototype._fireChanging=function(n,i){this._fireEvent(t.FOLLOWS_STATE_CHANGING,n,i)},t.prototype._fireChanged=function(n,i){this._fireEvent(t.FOLLOWS_STATE_CHANGED,n,i)},t.prototype._fireEvent=function(n,t,i){var u={artifact:t,isFollowing:i};r.getService().fire(n,this,u)},t.prototype._publishTelemetry=function(n,t){var i=$.extend(n,{action:t});try{s.trace({area:n.area||u.NotificationsCustomerIntelligenceConstants.Area,feature:u.FollowsCustomerIntelligenceConstants.Feature,properties:i,level:o.Level.Info})}catch(r){h.logError("Follows: Publish telemetry failed with error: ".concat(r.message))}},t.prototype._publishErrorTelemetry=function(n,t){t||(t=new Error("Unknown error"));try{var i={action:n,error:t};s.trace({area:u.NotificationsCustomerIntelligenceConstants.Area,feature:u.FollowsCustomerIntelligenceConstants.Feature,properties:i,level:o.Level.Error})}catch(r){h.logError("Follows: Publish error telemetry failed with error: ".concat(r.message))}},t.FOLLOWS_STATE_CHANGED="Follows.State.Changed",t.FOLLOWS_STATE_CHANGING="Follows.State.Changing",t.FOLLOWS_TYPE="Artifact",t.LAYER="Web.FollowsService",t}(e.VssService);t.FollowsService=c});

define("WorkItemTracking/Scripts/Utils/FollowsUtils",["require","exports","q","VSS/Artifacts/Constants","VSS/Events/Services","Presentation/Scripts/TFS/TFS.OM.Common","Notifications/Services","WorkItemTracking/Scripts/Utils/WIFormCIDataHelper"],function(n,t,i,r,u,f,e,o){function h(n){return n.configuration&&n.configuration.getMailSettings().enabled}function c(n){var u;if(!n)return i.reject();var t=n.workItemType.store.getTfsContext(),o=f.ProjectCollection.getConnection(t).getService(e.FollowsService),h=n.id,r=s(n);return r?(u=t.currentIdentity?t.currentIdentity.id:null,o.getSubscription(r,u)):i.reject()}function s(n){return n&&!n.isNew()&&!n.isDeleted()?{subscriptionId:0,artifactId:n.id.toString(),artifactType:r.ArtifactTypeNames.WorkItem}:null}function l(n){var t=u.getService();t.attachEvent(e.FollowsService.FOLLOWS_STATE_CHANGED,n)}function a(n){var t=u.getService();t.attachEvent(e.FollowsService.FOLLOWS_STATE_CHANGING,n)}function v(n){var t=u.getService();t.detachEvent(e.FollowsService.FOLLOWS_STATE_CHANGED,n)}function y(n){var t=u.getService();t.detachEvent(e.FollowsService.FOLLOWS_STATE_CHANGING,n)}function p(n,t,r,u){var l=n.workItemType.store.getTfsContext(),a=f.ProjectCollection.getConnection(l).getService(e.FollowsService),h=s(n),c,v;return h?(c={area:o.WIFormCIDataHelper.getArea(),layer:u,customProperties:{}},c.customProperties.workItem={id:n.id,state:n.getState(),type:{name:n.workItemType.name,referenceName:n.workItemType.referenceName}},t?(h.description=r,a.followArtifact(h,c)):(v=l.currentIdentity?l.currentIdentity.id:null,a.unfollowArtifact(h,v,c))):i.reject()}function w(n){var i=n.workItemType.store.getTfsContext(),r=f.ProjectCollection.getConnection(i).getService(e.FollowsService),t=s(n);t&&r.refresh(t)}Object.defineProperty(t,"__esModule",{value:!0});t.FollowType=t.clearFollowState=t.setFollowState=t.detachFollowsChanging=t.detachFollowsChanged=t.attachFollowsChanging=t.attachFollowsChanged=t.getFollowableArtifact=t.getFollowsState=t.isFollowsEnabled=void 0;t.isFollowsEnabled=h;t.getFollowsState=c;t.getFollowableArtifact=s;t.attachFollowsChanged=l;t.attachFollowsChanging=a;t.detachFollowsChanged=v;t.detachFollowsChanging=y;t.setFollowState=p;t.clearFollowState=w;var b;(function(n){n.All="All";n.Custom="Custom";n.None="None"})(b=t.FollowType||(t.FollowType={}))});

define("WorkItemTracking/SharedScripts/WorkItemFormLauncher",["require","exports","VSS/VSS"],function(n,t,i){function u(n,t){f(function(){r.WorkItemFormDialog.showWorkItem(n,t)})}function f(n){r?n():i.requireModules(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls"]).spread(function(t){r=t;n()})}Object.defineProperty(t,"__esModule",{value:!0});t.showWorkItem=void 0;var r=null;t.showWorkItem=u});

define("WorkItemTracking/Scripts/Dialogs/WITDialogs",["require","exports","VSS/Controls/Dialogs","WorkItemTracking/Scripts/Dialogs/CommonOptions","VSS/Telemetry/Services","WorkItemTracking/Scripts/TFS.WorkItemTracking","VSS/Diag","Presentation/Scripts/TFS/TFS.OM.Common","VSS/VSS","WorkItemTracking/Scripts/OM/WorkItemManager","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/RegisteredLinkTypeNames","VSS/Artifacts/Services","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","WorkItemTracking/Scripts/Utils/FollowsUtils","WorkItemTracking/SharedScripts/WorkItemFormLauncher","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){function nt(n,t,i,r){var u=t.tfsContext,s;n instanceof f.WorkItem?i(n):(s=o.ProjectCollection.getConnection(u).getService(f.WorkItemStore),h.WorkItemManager.get(s).beginGetWorkItem(n,function(n){i(n)},function(n){r(n)}))}function tt(n,t){i.show(i.Dialog,r.errorDialogOptions($.extend({contentText:ut(n),cssClass:"dialog-error"},t)))}function it(n){return n.linkTypeEnd&&n.linkTypeEnd.immutableName?n.linkTypeEnd.immutableName:n.linkTypeEnd?n.linkTypeEnd:n.linkType}function g(n,t,r,f,e,o){function s(n,t,i){var r=f&&f(),o;r&&(o=__assign(__assign({},e&&e(t)),{sourceWIT:n.workItemType.name}),i?u.publishEvent(new u.TelemetryEventData(c.LINKED_ARTIFACTS_CUSTOMER_INTELLIGENCE_AREA,r,o)):u.publishEvent(new u.TelemetryEventData("workItemTracking",r,o)))}r=__assign(__assign({},r),{minWidth:450,minHeight:600,useBowtieStyle:!0,bowtieVersion:2,resizable:!0});nt(t,r,function(t){r.workItem=t;r.okCallback=function(n){o.call(this,t,n);s(t,n,r.isNewLinksControl)};i.show(n,r)},function(n){tt(n,null)})}function rt(n,t){i.show(n,t)}function ft(n,t){d.requireModules(["WorkItemTracking/Scripts/Dialogs/CreateCopyOfWorkItemDialog"]).spread(function(i){g(i.CreateCopyOfWorkItemDialog,n,t,function(){return"addCopyLink"},function(n){return{newWIT:n.type}},function(n,t){n.store.beginGetProject(t.project,function(i){i.beginGetWorkItemType(t.type,function(i){if(t.copiedWorkItem)k.showWorkItem(t.copiedWorkItem,{saveButton:!0});else{var r=n.copy(i,t.copyLinks,t.copyAttachments);k.showWorkItem(r,{saveButton:!0})}})})})})}function et(n,t){d.requireModules(["WorkItemTracking/Scripts/Dialogs/CustomFollowDialog"]).spread(function(i){g(i.CustomFollowDialog,n,t,function(){return"customFollow"},function(n){return n==null?{selectedFollowType:"",selectedCustomFollowCheckbox:""}:{selectedFollowType:n.selectedType,selectedCustomFollowCheckbox:n.selectedCheckbox==null?"":n.selectedCheckbox.join(" ")}},function(n,t){var i="";t.selectedType===b.FollowType.Custom&&(i=JSON.stringify({fieldFilters:t.selectedCheckbox}));t.prevType!=b.FollowType.None?b.setFollowState(n,!1,"","").then(function(){t.selectedType!=b.FollowType.None&&b.setFollowState(n,!0,i,"")}):b.setFollowState(n,t.selectedType!=b.FollowType.None,i,"")})})}function ot(n){s.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.ChangeTypeDialogs"],function(t){rt(t.WorkItemMoveDialog,n)})}function st(n){s.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.ChangeTypeDialogs"],function(t){rt(t.ChangeWorkItemTypeDialog,n)})}function ht(n,t,i){nt(n,t,function(n){var t=n.copy(n.workItemType,!1,!1,!1,!0,[l.CoreField.Title.toString()],!1);$.isFunction(i)&&i.call(t,t)===!1||(k.showWorkItem(t,{saveButton:!0}),a.publishEvent(new a.TelemetryEventData(v.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,v.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_CLONE,{count:1})))},function(n){tt(n,null)})}function ct(n,t,i){function r(n,t){function r(t,i){try{p.LinkingUtilities.decodeUri(t)}catch(u){return!1}var r=n.store.getContributedLinkTypes();return r[i]?!0:(console.log("Link type "+i+" not registered."),!1)}var i=[];$.each(t.links,function(u,e){switch(t.linkType){case"WorkItemLink":i.push(f.WorkItemLink.create(n,t.linkTypeEnd.immutableName,e.id,t.comment||""));break;case y.RegisteredLinkTypeNames.RemoteWorkItemLink:var o={remoteHostId:t.remoteHostId,remoteHostName:t.remoteHostName,remoteHostUrl:t.remoteHostUrl,remoteProjectId:t.remoteProjectId};i.push(f.WorkItemLink.create(n,t.linkTypeEnd.immutableName,e.id,t.comment||"",!1,o));break;case"Hyperlink":i.push(f.Hyperlink.create(n,e.location,t.comment||""));break;case y.RegisteredLinkTypeNames.Changeset:case y.RegisteredLinkTypeNames.VersionedItem:case y.RegisteredLinkTypeNames.Commit:case y.RegisteredLinkTypeNames.Storyboard:case y.RegisteredLinkTypeNames.Branch:case y.RegisteredLinkTypeNames.Tag:case y.RegisteredLinkTypeNames.PullRequest:case y.RegisteredLinkTypeNames.Build:case y.RegisteredLinkTypeNames.FoundInBuild:case y.RegisteredLinkTypeNames.IntegratedInBuild:case y.RegisteredLinkTypeNames.WikiPage:i.push(f.ExternalLink.create(n,t.linkType,e.artifactUri,t.comment||""));break;case y.RegisteredLinkTypeNames.GitHubCommitLinkType:case y.RegisteredLinkTypeNames.GitHubPullRequestLinkType:case y.RegisteredLinkTypeNames.GitHubIssueLinkType:i.push(f.ExternalLink.create(n,t.linkType,e.artifactUri,t.comment||"",t.externalLinkContext));break;default:r(e.artifactUri,t.linkType)&&i.push(f.ExternalLink.create(n,t.linkType,e.artifactUri,t.comment||""))}});n.addLinks(i)}d.requireModules(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Dialogs"]).spread(function(u){g(u.LinkToExistingDialog,n,$.extend(i,{multipleTarget:t.length>1,workItemIds:t}),function(){return"addExistingLink"},function(t){var i={remoteHostId:t.remoteHostId,remoteHostName:t.remoteHostName,remoteHostUrl:t.remoteHostUrl,remoteProjectId:t.remoteProjectId};return{linkType:it(t),targetLinkCount:t.links&&t.links.length,browseDialogUsed:t.browseDialogUsed,workItemSessionId:n.sessionId,action:"addExistingLink",remoteLinkContext:i,externalLinkContext:t.externalLinkContext}},function(n,u){var f,e,l,s,o,c,a;if(n.isNew())r(n,u);else for(f=[],e=0,t=t||[],l=function(n){typeof i.errorCallback=="function"&&i.errorCallback(n)},s=function(){i.immediateSave===!0&&e===t.length&&(typeof i.beforeSave=="function"&&i.beforeSave(f),n.store.beginSaveWorkItemsBatch(f,function(n){typeof i.afterSave=="function"&&i.afterSave(n)},function(n){return l(n)}))},o=0,c=t;o<c.length;o++)a=c[o],h.WorkItemManager.get(n.store).beginGetWorkItem(a,function(n){r(n,u);f.push(n);e++;s()},function(){e++;s()})})})}function lt(n,t,i){var r=function(n){k.showWorkItem(n,{saveButton:!0})};d.requireModules(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Dialogs"]).spread(function(u){g(u.NewLinkedWorkItemDialog,n,$.extend(i,{multipleTarget:t.length>1,workItemIds:t}),function(){return"addNewLink"},function(t){return{linkType:it(t),newWIT:t.workItemType,workItemSessionId:n.sessionId,action:"addNewLink"}},function(n,i){n.project.beginGetWorkItemType(i.workItemType,function(u){var e=h.WorkItemManager.get(u.store).createWorkItem(u),a,s,c,v,y,p;for(e.getField(l.CoreField.Title).setValue(i.title||""),a=u.store.findLinkTypeEnd(i.linkTypeEnd).oppositeEnd,s=[],c=0,v=t.length;c<v;c++)s[s.length]=f.WorkItemLink.create(e,a,t[c],i.comment||"");e.addLinks(s);t.length===1?(e.setFieldValue(l.CoreField.AreaId,n.getFieldValue(l.CoreField.AreaId)),e.setFieldValue(l.CoreField.IterationId,n.getFieldValue(l.CoreField.IterationId)),e.getFieldValue(l.CoreField.AssignedTo)||e.setFieldValue(l.CoreField.AssignedTo,n.getFieldValue(l.CoreField.AssignedTo)),y=n.store.getTfsContext(),p=o.ProjectCollection.getConnection(y).getService(w.ProjectProcessConfigurationService),new Promise(function(n,t){return p.beginGetProcessSettings(n,t)}).then(function(t){var i=t.getTypeField(w.ProjectProcessConfiguration.FieldType.Team),u;i&&(u=i.name,e.setFieldValue(i.name,n.getFieldValue(i.name)),r(e))},function(){r(e)})):r(e)})})})}function at(n,t,i,r){return r===void 0&&(r=!1),d.requireModules(["VSS/Controls/Dialogs"]).spread(function(u){return typeof n!="string"||r||(n=$("<div>").css("white-space","pre-wrap").html(n)),u.showMessageDialog(n,{title:t,noFocusOnClose:!0,buttons:i})})}Object.defineProperty(t,"__esModule",{value:!0});t.promptMessageDialog=t.newLinkedWorkItem=t.linkToExistingWorkItem=t.useWorkItemAsATemplate=t.changeWorkItemType=t.moveWorkItem=t.customFollowWorkItem=t.createCopyOfWorkItem=void 0;var ut=s.getErrorMessage;t.createCopyOfWorkItem=ft;t.customFollowWorkItem=et;t.moveWorkItem=ot;t.changeWorkItemType=st;t.useWorkItemAsATemplate=ht;t.linkToExistingWorkItem=ct;t.newLinkedWorkItem=lt;t.promptMessageDialog=at});

define("WorkItemTracking/Scripts/OM/QueryItem",["require","exports","TFS/WorkItemTracking/Contracts","VSS/Utils/UI","VSS/Utils/File"],function(n,t,i,r,u){var o,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.QueryDefinition=t.QueryItem=t.QueryItemFactory=void 0,function(n){function t(n){var t=n.queryText||undefined;return{id:n.id,name:n.name,isPublic:!n.personal,wiql:t,path:n.storedPath}}n.queryItemToQueryHierarchyItem=t}(o=t.QueryItemFactory||(t.QueryItemFactory={}));f=function(){function n(n,t){this.project=n;t&&this.updateFromData(t)}return n.prototype.updateFromData=function(n){this.id=n.id;this.name=n.name;this.storedPath=n.path;this.parentPath=u.getDirectoryName(n.path);this.personal=!n.isPublic;this.queryType=$.isNumeric(n.queryType)?i.QueryType[n.queryType]:n.queryType},n.prototype.path=function(t,i){return t===void 0&&(t=!1),r.calculateTreePath.call(this,t,i||n.DEFAULT_PATH_SEPARATOR,"name","root")},n.EVENT_CREATED="query-item-created",n.EVENT_MOVED="query-item-moved",n.EVENT_RENAMED="query-item-renamed",n.EVENT_REMOVED="query-item-removed",n.EVENT_SAVED="query-item-saved",n.DEFAULT_PATH_SEPARATOR="/",n}();t.QueryItem=f;e=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return i&&(r.queryText=i.wiql||i.query),r}return __extends(t,n),t.defaultNewQueryWiql=function(){return t.DEFAULT_NEW_QUERY_WIQL},t.isMyWorkItems=function(n){return n.id?n.id.toUpperCase()===t.ASSIGNED_TO_ME_ID:!1},t.isSearchResults=function(n){return n.id?n.id.toUpperCase()===t.SEARCH_RESULTS_ID:!1},t.isImportQueryDefinition=function(n){return n.id?n.id.toUpperCase()===t.IMPORT_DATA_ID:!1},t.isCustomWiqlQuery=function(n){return n.id?n.id.toUpperCase()===t.CUSTOM_WIQL_QUERY_ID:!1},t.isRecycleBinQuery=function(n){return n.id?n.id&&n.id.toUpperCase()===t.RECYCLE_BIN_QUERY_ID:!1},t.isCustomizableSpecialQuery=function(n){return n.specialQuery&&(t.isMyWorkItems(n)||t.isRecycleBinQuery(n))},t.isSpecialQueryId=function(n){var i=n.toUpperCase();return i===t.ASSIGNED_TO_ME_ID||i===t.SEARCH_RESULTS_ID||i===t.CUSTOM_WIQL_QUERY_ID||i===t.FOLLOWED_WORKITEMS_ID||i===t.RECYCLE_BIN_QUERY_ID||i===t.IMPORT_DATA_ID},t.prototype.setQuery=function(n){this.queryText!==n&&(this._originalQueryText=this.queryText,this.queryText=n,this.isDirty=!0)},t.prototype.path=function(t,i){return t===void 0&&(t=!1),this.parent?n.prototype.path.call(this,t,i):this.storedPath},t.DEFAULT_NEW_QUERY_WIQL="SELECT [System.Id], [System.WorkItemType], [System.Title], [System.AssignedTo], [System.State], [System.Tags] FROM Workitems WHERE [System.TeamProject] = @project AND [System.WorkItemType]<>'' AND [System.State]<>''",t.ASSIGNED_TO_ME_ID="A2108D31-086C-4FB0-AFDA-097E4CC46DF4",t.FOLLOWED_WORKITEMS_ID="202230E0-821E-401D-96D1-24A7202330D0",t.SEARCH_RESULTS_ID="2CBF5136-1AE5-4948-B59A-36F526D9AC73",t.CUSTOM_WIQL_QUERY_ID="08E20883-D56C-4461-88EB-CE77C0C7936D",t.RECYCLE_BIN_QUERY_ID="2650C586-0DE4-4156-BA0E-14BCFB664CCA",t.IMPORT_DATA_ID="BD4FFCBB-4E60-4C94-BF73-7ADB80EF2498",t}(f);t.QueryDefinition=e});

define("WorkItemTracking/Scripts/Queries/Models/Constants",["require","exports"],function(n,t){var i,r,u,f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.TriageViewPivotsKey=t.ChevronIconState=t.QueriesHubConstants=t.DataProviderConstants=t.QueriesMruConstants=t.QueryItemFavoriteConstants=void 0,function(n){n.FavoriteArtifactScopeType="Project";n.FavoriteOwnerScope="Team";n.TeamFavoriteLoadingGroupKey="TEAM_FAVORITES_LOADING"}(i=t.QueryItemFavoriteConstants||(t.QueryItemFavoriteConstants={})),function(n){n.Scope="Project";n.QueriesSettingsKey="Queries";n.FavoriteGroupExpandStatesKey="FavoriteGroupExpandStates"}(r=t.QueriesMruConstants||(t.QueriesMruConstants={})),function(n){n.QueryDataProviderId="ms.vss-work-web.query-data-provider";n.QueryTeamFavoriesDataProviderId="ms.vss-work-web.query-team-favorites-data-provider";n.AdhocQueriesDataProviderId="ms.vss-work-web.migrate-query-data-provider"}(u=t.DataProviderConstants||(t.DataProviderConstants={})),function(n){n.QueriesHubContext="QueriesHubContext";n.ControllerName="queries";n.FavoritesPageAction="favorites";n.AllQueriesPageAction="all";n.QueryFoldersPageAction="folder";n.DefaultPageAction=n.FavoritesPageAction;n.IdOptionKey="id";n.WorkItemPaneViewOptionKey="work-item-pane";n.NewQueryViewOptionKey="newQuery";n.MaxQuerySearchResultCount=50;n.SearchKeyword="keyword";n.MaxBreadcrumbItemWidth="300px";n.PickListMaxWidth=500;n.PickListMaxHeight=415}(f=t.QueriesHubConstants||(t.QueriesHubConstants={})),function(n){n[n.Collapsed=0]="Collapsed";n[n.Expanding=1]="Expanding";n[n.Expanded=2]="Expanded"}(e=t.ChevronIconState||(t.ChevronIconState={})),function(n){n.QueryResults="query";n.QueryEdit="query-edit";n.QueryCharts="query-charts";n.WorkItemEdit="edit";n.NewWorkItem="new"}(o=t.TriageViewPivotsKey||(t.TriageViewPivotsKey={}))});

define("WorkItemTracking/Scripts/Queries/Models/Models",["require","exports"],function(n,t){var i,r,u,f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.ActiveQueryView=t.QuerySearchStatus=t.QueriesColumnKey=t.QueryContribution=t.QuerySaveDialogMode=t.QueryLoadingState=void 0,function(n){n[n.Loading=0]="Loading";n[n.Loaded=1]="Loaded"}(i=t.QueryLoadingState||(t.QueryLoadingState={})),function(n){n[n.NewQuery=0]="NewQuery";n[n.NewFolder=1]="NewFolder";n[n.RenameQuery=2]="RenameQuery";n[n.RenameFolder=3]="RenameFolder";n[n.SaveAs=4]="SaveAs"}(r=t.QuerySaveDialogMode||(t.QuerySaveDialogMode={})),function(n){n[n.Directory=0]="Directory";n[n.Triage=1]="Triage"}(u=t.QueryContribution||(t.QueryContribution={})),function(n){n.Title="title";n.Folder="folder";n.LastModifiedBy="lastModifiedBy"}(f=t.QueriesColumnKey||(t.QueriesColumnKey={})),function(n){n[n.None=0]="None";n[n.Pending=1]="Pending";n[n.InProgress=2]="InProgress";n[n.ResultsReady=3]="ResultsReady"}(e=t.QuerySearchStatus||(t.QuerySearchStatus={})),function(n){n[n.Favorites=0]="Favorites";n[n.All=1]="All"}(o=t.ActiveQueryView||(t.ActiveQueryView={}))});

define("WorkItemTracking/Scripts/Utils/WitIdentityImages",["require","exports","VSS/Locations"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.WitIdentityImages=void 0;var r=function(){function n(){}return n.UnassignedImageUrl=i.urlHelper.getVersionedContentUrl("notassigned-user.svg"),n.AllUsersImageUrl=i.urlHelper.getVersionedContentUrl("Team.svg"),n}();t.WitIdentityImages=r});

define("Presentation/Scripts/TFS/FeatureRef/WorkItemStateColorsProvider",["require","exports","q","VSS/Diag","VSS/Error","VSS/Service","VSS/Utils/String","VSS/Contributions/Services","Presentation/Scripts/TFS/TFS.Host.TfsContext","TFS/WorkItemTracking/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemStateColorsProvider=void 0;var l=function(){function n(){var n,i,t;this._restClient=f.getClient(h.WorkItemTrackingHttpClient);this._projectNameToColorSettingsMap={};this._settingsBeingFetched={};n=s.TfsContext.getDefault().contextData.project;n&&n.name&&(i=f.getService(o.WebPageDataService),t=i.getPageData("ms.vss-work-web.work-item-states-color-data-provider"),!t||this._setData({projectName:n.name,workItemTypeStateColors:this._mapWorkItemStatesColors(t)}))}return n.prototype._mapWorkItemStatesColors=function(n){var i=[],t,r;for(t in n)n.hasOwnProperty(t)&&(r=n[t],i.push({workItemTypeName:t,stateColors:r}));return i},n.getInstance=function(){return n._workItemStatesColorProvider||(n._workItemStatesColorProvider=new n),n._workItemStatesColorProvider},n.prototype.isPopulated=function(n){return n?(n=this._getNormalizedString(n),this._projectNameToColorSettingsMap.hasOwnProperty(n))?!0:!1:!1},n.prototype.getColor=function(t,i,r){var f,u;return r&&t&&i&&(t=this._getNormalizedString(t),i=this._getNormalizedString(i),r=this._getNormalizedString(r),f=this._projectNameToColorSettingsMap[t],!!f&&(u=f[i],!!u&&!!u[r]))?u[r]:n.DEFAULT_STATE_COLOR},n.prototype.ensureColorsArePopulated=function(n){var h=this,e,o,s,t,f;for(!n,e={},o=0,s=n;o<s.length;o++)t=s[o],t=this._getNormalizedString(t),e.hasOwnProperty(t)||this.isPopulated(t)||(e[t]=null);if(f=Object.keys(e),f.length===0)return i(null);if(f.some(function(n){return!n}))try{throw new Error("Invalid Project Name(s) provided to ensureColorsArePopulated");}catch(c){c.name="WorkItemStateColorsInvalidProjects";u.publishErrorToTelemetry(c)}return this._restClient.getWorkItemStateColors(f).then(function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],h._setData(r);return null},function(){var n=f.map(function(n){return h._fallbackToDataProvider(n)});return Promise.all(n)})},n.prototype.getColorAsync=function(n,t,r){var f=this,e;return(n=this._getNormalizedString(n),this.isPopulated(n))?i(this.getColor(n,t,r)):this._settingsBeingFetched.hasOwnProperty(n)?this._settingsBeingFetched[n].then(function(){return f.getColor(n,t,r)},function(){}):(e=this.ensureColorsArePopulated([n]).then(function(){return delete f._settingsBeingFetched[n],null},function(t){delete f._settingsBeingFetched[n];u.publishErrorToTelemetry(t)}),this._settingsBeingFetched[n]=e,e.then(function(){return f.getColor(n,t,r)},function(){}))},n.prototype._setData=function(n){var u,o,t,f,i,e;if(!this.isPopulated(n.projectName)){for(u={},o=this._getNormalizedString(n.projectName),t=0,f=n.workItemTypeStateColors;t<f.length;t++){var s=f[t],h={},a=this._getNormalizedString(s.workItemTypeName);for(i=0,e=s.stateColors;i<e.length;i++){var c=e[i],v=this._getNormalizedString(c.name),l=this._getNormalizedString(c.color);h[v]="#".concat(l.substr(l.length-6))}u[a]=h}this._projectNameToColorSettingsMap[o]=u}},n.prototype._getNormalizedString=function(n){return n=n||"",n.trim().toLowerCase()},n.prototype._fallbackToDataProvider=function(n){var t=this,i=f.getService(o.WebPageDataService),r="ms.vss-work-web.work-item-states-color-data-provider",s={id:r,properties:{serviceInstanceType:c.ServiceInstanceTypes.TFS}},h={projectName:n};return i.ensureDataProvidersResolved([s],!0,h).then(function(){var u=i.getPageData(r);return!u||t._setData({projectName:n,workItemTypeStateColors:t._mapWorkItemStatesColors(u)}),null},function(i){u.publishErrorToTelemetry({name:"GetWorkItemStateColorsForProjectsException",message:e.format("Failed to fetch state color data for project {0}: {1}",n,JSON.stringify(i))});t._setData({workItemTypeStateColors:[],projectName:n})})},n.DEFAULT_STATE_COLOR="transparent",n}();t.WorkItemStateColorsProvider=l});

define("Presentation/Scripts/TFS/FeatureRef/WorkItemStateCellRenderer",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/FeatureRef/WorkItemStateColorsProvider","VSS/LoaderPlugins/Css!Presentation/FeatureRef/WorkItemStateCellRenderer"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemStateCellRenderer=void 0;var u=function(){function n(){}return n.getColorCell=function(t,i){var r=n.getProcessedStateColor(t),u=$("<span/>").addClass(n.CSS_WORKITEM_STATE_CIRCLE).css({"background-color":r.backgroundColor,"border-color":r.borderColor}),f=$("<span/>").addClass("workitem-state-value").text(i);return $("<div/>").addClass("workitem-state-color-cell").append(u.add(f))},n.getAutoUpdatingColorCell=function(t,i,u){var f,o,e;return!t||!i||!u?null:(f=r.WorkItemStateColorsProvider.getInstance(),f.isPopulated(t)?(o=f.getColor(t,i,u),n.getColorCell(o,u)):(e=n.getColorCell(r.WorkItemStateColorsProvider.DEFAULT_STATE_COLOR,u),f.getColorAsync(t,i,u).then(function(t){var i=n.getProcessedStateColor(t);e.find("."+n.CSS_WORKITEM_STATE_CIRCLE).css({"background-color":i.backgroundColor,"border-color":i.borderColor})},function(){}),e))},n.getProcessedStateColor=function(t){var r="#ffffff";return(t=t||r,i.ignoreCaseComparer(t,r)===0||i.ignoreCaseComparer(t,"transparent")===0)?{backgroundColor:t,borderColor:n.STATES_DEFAULT_COLOR}:{backgroundColor:t,borderColor:t}},n.CSS_WORKITEM_STATE_CIRCLE="workitem-state-circle",n.STATES_DEFAULT_COLOR="#5688E0",n}();t.WorkItemStateCellRenderer=u});

/*!
 * jQuery UI Tabs 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/tabs",["jquery", "./core", "./widget"], n) : n(jQuery) })(function (n) { return n.widget("ui.tabs", { version: "1.11.4", delay: 300, options: { active: null, collapsible: !1, event: "click", heightStyle: "content", hide: null, show: null, activate: null, beforeActivate: null, beforeLoad: null, load: null }, _isLocal: function () { var n = /#.*$/; return function (t) { var i, r; t = t.cloneNode(!1); i = t.href.replace(n, ""); r = location.href.replace(n, ""); try { i = decodeURIComponent(i) } catch (u) { } try { r = decodeURIComponent(r) } catch (u) { } return t.hash.length > 1 && i === r } }(), _create: function () { var i = this, t = this.options; this.running = !1; this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", t.collapsible); this._processTabs(); t.active = this._initialActive(); n.isArray(t.disabled) && (t.disabled = n.unique(t.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"), function (n) { return i.tabs.index(n) }))).sort()); this.active = this.options.active !== !1 && this.anchors.length ? this._findActive(t.active) : n(); this._refresh(); this.active.length && this.load(t.active) }, _initialActive: function () { var t = this.options.active, i = this.options.collapsible, r = location.hash.substring(1); return t === null && (r && this.tabs.each(function (i, u) { if (n(u).attr("aria-controls") === r) return t = i, !1 }), t === null && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), (t === null || t === -1) && (t = this.tabs.length ? 0 : !1)), t !== !1 && (t = this.tabs.index(this.tabs.eq(t)), t === -1 && (t = i ? !1 : 0)), !i && t === !1 && this.anchors.length && (t = 0), t }, _getCreateEventData: function () { return { tab: this.active, panel: this.active.length ? this._getPanelForTab(this.active) : n() } }, _tabKeydown: function (t) { var r = n(this.document[0].activeElement).closest("li"), i = this.tabs.index(r), u = !0; if (!this._handlePageNav(t)) { switch (t.keyCode) { case n.ui.keyCode.RIGHT: case n.ui.keyCode.DOWN: i++; break; case n.ui.keyCode.UP: case n.ui.keyCode.LEFT: u = !1; i--; break; case n.ui.keyCode.END: i = this.anchors.length - 1; break; case n.ui.keyCode.HOME: i = 0; break; case n.ui.keyCode.SPACE: t.preventDefault(); clearTimeout(this.activating); this._activate(i); return; case n.ui.keyCode.ENTER: t.preventDefault(); clearTimeout(this.activating); this._activate(i === this.options.active ? !1 : i); return; default: return } t.preventDefault(); clearTimeout(this.activating); i = this._focusNextTab(i, u); t.ctrlKey || t.metaKey || (r.attr("aria-selected", "false"), this.tabs.eq(i).attr("aria-selected", "true"), this.activating = this._delay(function () { this.option("active", i) }, this.delay)) } }, _panelKeydown: function (t) { this._handlePageNav(t) || t.ctrlKey && t.keyCode === n.ui.keyCode.UP && (t.preventDefault(), this.active.focus()) }, _handlePageNav: function (t) { return t.altKey && t.keyCode === n.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : t.altKey && t.keyCode === n.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : void 0 }, _findNextTab: function (t, i) { function u() { return t > r && (t = 0), t < 0 && (t = r), t } for (var r = this.tabs.length - 1; n.inArray(u(), this.options.disabled) !== -1;) t = i ? t + 1 : t - 1; return t }, _focusNextTab: function (n, t) { return n = this._findNextTab(n, t), this.tabs.eq(n).focus(), n }, _setOption: function (n, t) { if (n === "active") { this._activate(t); return } if (n === "disabled") { this._setupDisabled(t); return } this._super(n, t); n === "collapsible" && (this.element.toggleClass("ui-tabs-collapsible", t), t || this.options.active !== !1 || this._activate(0)); n === "event" && this._setupEvents(t); n === "heightStyle" && this._setupHeightStyle(t) }, _sanitizeSelector: function (n) { return n ? n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : "" }, refresh: function () { var t = this.options, i = this.tablist.children(":has(a[href])"); t.disabled = n.map(i.filter(".ui-state-disabled"), function (n) { return i.index(n) }); this._processTabs(); t.active !== !1 && this.anchors.length ? this.active.length && !n.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, this.active = n()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1, this.active = n()); this._refresh() }, _refresh: function () { this._setupDisabled(this.options.disabled); this._setupEvents(this.options.event); this._setupHeightStyle(this.options.heightStyle); this.tabs.not(this.active).attr({ "aria-selected": "false", "aria-expanded": "false", tabIndex: -1 }); this.panels.not(this._getPanelForTab(this.active)).hide().attr({ "aria-hidden": "true" }); this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }), this._getPanelForTab(this.active).show().attr({ "aria-hidden": "false" })) : this.tabs.eq(0).attr("tabIndex", 0) }, _processTabs: function () { var t = this, i = this.tabs, r = this.anchors, u = this.panels; this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist").delegate("> li", "mousedown" + this.eventNamespace, function (t) { n(this).is(".ui-state-disabled") && t.preventDefault() }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function () { n(this).closest("li").is(".ui-state-disabled") && this.blur() }); this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({ role: "tab", tabIndex: -1 }); this.anchors = this.tabs.map(function () { return n("a", this)[0] }).addClass("ui-tabs-anchor").attr({ role: "presentation", tabIndex: -1 }); this.panels = n(); this.anchors.each(function (i, r) { var f, u, e, s = n(r).uniqueId().attr("id"), o = n(r).closest("li"), h = o.attr("aria-controls"); t._isLocal(r) ? (f = r.hash, e = f.substring(1), u = t.element.find(t._sanitizeSelector(f))) : (e = o.attr("aria-controls") || n({}).uniqueId()[0].id, f = "#" + e, u = t.element.find(f), u.length || (u = t._createPanel(e), u.insertAfter(t.panels[i - 1] || t.tablist)), u.attr("aria-live", "polite")); u.length && (t.panels = t.panels.add(u)); h && o.data("ui-tabs-aria-controls", h); o.attr({ "aria-controls": e, "aria-labelledby": s }); u.attr("aria-labelledby", s) }); this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel"); i && (this._off(i.not(this.tabs)), this._off(r.not(this.anchors)), this._off(u.not(this.panels))) }, _getList: function () { return this.tablist || this.element.find("ol,ul").eq(0) }, _createPanel: function (t) { return n("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0) }, _setupDisabled: function (t) { n.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1); for (var i = 0, r; r = this.tabs[i]; i++) t === !0 || n.inArray(i, t) !== -1 ? n(r).addClass("ui-state-disabled").attr("aria-disabled", "true") : n(r).removeClass("ui-state-disabled").removeAttr("aria-disabled"); this.options.disabled = t }, _setupEvents: function (t) { var i = {}; t && n.each(t.split(" "), function (n, t) { i[t] = "_eventHandler" }); this._off(this.anchors.add(this.tabs).add(this.panels)); this._on(!0, this.anchors, { click: function (n) { n.preventDefault() } }); this._on(this.anchors, i); this._on(this.tabs, { keydown: "_tabKeydown" }); this._on(this.panels, { keydown: "_panelKeydown" }); this._focusable(this.tabs); this._hoverable(this.tabs) }, _setupHeightStyle: function (t) { var i, r = this.element.parent(); t === "fill" ? (i = r.height(), i -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each(function () { var t = n(this), r = t.css("position"); r !== "absolute" && r !== "fixed" && (i -= t.outerHeight(!0)) }), this.element.children().not(this.panels).each(function () { i -= n(this).outerHeight(!0) }), this.panels.each(function () { n(this).height(Math.max(0, i - n(this).innerHeight() + n(this).height())) }).css("overflow", "auto")) : t === "auto" && (i = 0, this.panels.each(function () { i = Math.max(i, n(this).height("").height()) }).height(i)) }, _eventHandler: function (t) { var u = this.options, r = this.active, c = n(t.currentTarget), i = c.closest("li"), f = i[0] === r[0], e = f && u.collapsible, o = e ? n() : this._getPanelForTab(i), s = r.length ? this._getPanelForTab(r) : n(), h = { oldTab: r, oldPanel: s, newTab: e ? n() : i, newPanel: o }; (t.preventDefault(), i.hasClass("ui-state-disabled") || i.hasClass("ui-tabs-loading") || this.running || f && !u.collapsible || this._trigger("beforeActivate", t, h) === !1) || (u.active = e ? !1 : this.tabs.index(i), this.active = f ? n() : i, this.xhr && this.xhr.abort(), s.length || o.length || n.error("jQuery UI Tabs: Mismatching fragment identifier."), o.length && this.load(this.tabs.index(i), t), this._toggle(t, h)) }, _toggle: function (t, i) { function e() { u.running = !1; u._trigger("activate", t, i) } function o() { i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"); r.length && u.options.show ? u._show(r, u.options.show, e) : (r.show(), e()) } var u = this, r = i.newPanel, f = i.oldPanel; this.running = !0; f.length && this.options.hide ? this._hide(f, this.options.hide, function () { i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"); o() }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), f.hide(), o()); f.attr("aria-hidden", "true"); i.oldTab.attr({ "aria-selected": "false", "aria-expanded": "false" }); r.length && f.length ? i.oldTab.attr("tabIndex", -1) : r.length && this.tabs.filter(function () { return n(this).attr("tabIndex") === 0 }).attr("tabIndex", -1); r.attr("aria-hidden", "false"); i.newTab.attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }) }, _activate: function (t) { var r, i = this._findActive(t); i[0] !== this.active[0] && (i.length || (i = this.active), r = i.find(".ui-tabs-anchor")[0], this._eventHandler({ target: r, currentTarget: r, preventDefault: n.noop })) }, _findActive: function (t) { return t === !1 ? n() : this.tabs.eq(t) }, _getIndex: function (n) { return typeof n == "string" && (n = this.anchors.index(this.anchors.filter("[href$='" + n + "']"))), n }, _destroy: function () { this.xhr && this.xhr.abort(); this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"); this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"); this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(); this.tablist.unbind(this.eventNamespace); this.tabs.add(this.panels).each(function () { n.data(this, "ui-tabs-destroy") ? n(this).remove() : n(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role") }); this.tabs.each(function () { var t = n(this), i = t.data("ui-tabs-aria-controls"); i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls") }); this.panels.show(); this.options.heightStyle !== "content" && this.panels.css("height", "") }, enable: function (t) { var i = this.options.disabled; i !== !1 && (t === undefined ? i = !1 : (t = this._getIndex(t), i = n.isArray(i) ? n.map(i, function (n) { return n !== t ? n : null }) : n.map(this.tabs, function (n, i) { return i !== t ? i : null })), this._setupDisabled(i)) }, disable: function (t) { var i = this.options.disabled; if (i !== !0) { if (t === undefined) i = !0; else { if (t = this._getIndex(t), n.inArray(t, i) !== -1) return; i = n.isArray(i) ? n.merge([t], i).sort() : [t] } this._setupDisabled(i) } }, load: function (t, i) { t = this._getIndex(t); var u = this, r = this.tabs.eq(t), e = r.find(".ui-tabs-anchor"), f = this._getPanelForTab(r), o = { tab: r, panel: f }, s = function (n, t) { t === "abort" && u.panels.stop(!1, !0); r.removeClass("ui-tabs-loading"); f.removeAttr("aria-busy"); n === u.xhr && delete u.xhr }; this._isLocal(e[0]) || (this.xhr = n.ajax(this._ajaxSettings(e, i, o)), this.xhr && this.xhr.statusText !== "canceled" && (r.addClass("ui-tabs-loading"), f.attr("aria-busy", "true"), this.xhr.done(function (n, t, r) { setTimeout(function () { f.html(n); u._trigger("load", i, o); s(r, t) }, 1) }).fail(function (n, t) { setTimeout(function () { s(n, t) }, 1) }))) }, _ajaxSettings: function (t, i, r) { var u = this; return { url: t.attr("href"), beforeSend: function (t, f) { return u._trigger("beforeLoad", i, n.extend({ jqXHR: t, ajaxSettings: f }, r)) } } }, _getPanelForTab: function (t) { var i = n(t).attr("aria-controls"); return this.element.find(this._sanitizeSelector("#" + i)) } }) });

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/Dialogs/CommonErrorDialog",["require","exports","VSS/Controls/Dialogs","VSS/Resources/VSS.Resources.Platform","jQueryUI/button","jQueryUI/dialog","jQueryUI/tabs","VSS/LoaderPlugins/Css!Dialogs/CommonErrorDialog"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.CommonErrorDialog=void 0;var u=function(n){function t(t){return n.call(this,$.extend({cssClass:"wit-common-error-dialog",height:"auto",width:600},t))||this}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._message=this._options.message;var t=$("<table>").addClass("dialog-content"),i=$("<tr>").appendTo(t),r=$("<td>").addClass("bowtie-icon bowtie-status-error").appendTo(i);i.append(this._getErrorMessage());this.getElement().append(t)},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t)},t.prototype._getErrorMessage=function(){var n=$("<td>").addClass("dialog-message").text(this._message);return n.append("<br>"),n},t.showDialog=function(n,u,f,e){var o={title:n,message:u,buttons:[]};return f&&o.buttons.push({text:r.ModalDialogOkButton,id:r.ModalDialogOkButton,click:function(){f.apply(this);$(this).dialog("close")}}),e&&o.buttons.push({text:r.ModalDialogCancelButton,id:r.ModalDialogCancelButton,click:function(){e.apply(this);$(this).dialog("close")}}),i.show(t,o)},t}(i.ConfirmationDialogO);t.CommonErrorDialog=u});

define("WorkItemTracking/Scripts/Utils/WorkItemTrackingCIEventHelper",["require","exports","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence"],function(n,t,i,r){function u(n,t,u){i.publishEvent(new i.TelemetryEventData(r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,n,t),u)}function a(n,t,i){t===void 0&&(t={});u(c,__assign({action:n},t),i)}var f,e,o,s,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});t.publishGitHubTelemetry=t.GitHubIntegrationCIActions=t.QueryCIEvents=t.QueryHierarchyCIEvents=t.AttachmentsControlUIViewMode=t.AttachmentsControlUIActionSource=t.AttachmentsControlCIEvents=void 0;f=function(){function n(){}return n.publishEvent=function(t,i,r){i===void 0&&(i={});u(n._featureName,$.extend({action:t},i),r)},n.ACTIONS_ADD="AddAttachment",n.ACTIONS_DELETE="DeleteAttachment",n.ACTIONS_EDIT="EditAttachment",n.ACTIONS_OPEN="OpenAttachment",n.ACTIONS_SAVE="SaveAttachment",n.UI_CHANGE_VIEW_MODE="UIChangeViewMode",n.UI_PREVIEW_MODE="UIPreviewMode",n.UI_PREVIEW_TRAVERSE="UIPreviewModeNext",n.UI_DOWNLOAD="UIDownload",n.UI_DELETE="UIDelete",n.UI_EDIT_COMMENT="UIEditComment",n.UI_PREVIEW="UIShowPreview",n.UI_SHOW_ATTACHMENT="UIShowAttachment",n._featureName="AttachmentsControl",n}();t.AttachmentsControlCIEvents=f;e=function(){function n(){}return n.UI_THUMBNAIL_CONTEXT_MENU="ThumbnailContextMenu",n.UI_THUMBNAIL_CARD="ThumbnailCard",n.UI_GRID_TITLE="GridTitle",n.UI_GRID_ROW="GridRow",n.UI_GRID_CONTEXT_MENU="GridContextMenu",n.UI_GRID_MIDDLE_CLICK="GridMiddleClick",n.UI_PREVIEW_CONTEXT_MENU="PreviewContextMenu",n}();t.AttachmentsControlUIActionSource=e;o=function(){function n(){}return n.GRID="ViewModeGrid",n.THUMBNAIL="ViewModeThumbnail",n}();t.AttachmentsControlUIViewMode=o;s=function(){function n(){}return n.publishEvent=function(t,i,r){u(n._featureName,$.extend({action:t},i?i:{}),r)},n.EVENTS_TREE_NODE_SELECTED="TreeNodeSelected",n.EVENTS_FAVORITES_POPULATED="FavoritesPopulated",n.ACTIONS_DRAG_AND_DROP_TREE_NODE="DragAndDropTreeNode",n.ACTIONS_CLICK_ADD_TO_MY_FAVORITES_MENU_ITEM="ClickAddToMyFavoritesMenuItem",n.ACTIONS_CLICK_ADD_TO_TEAM_FAVORITES_MENU_ITEM="ClickAddToTeamFavoritesMenuItem",n._featureName="QueryHierarchy",n}();t.QueryHierarchyCIEvents=s;h=function(){function n(){}return n.publishEvent=function(t,i,r){u(n._featureName,$.extend({action:t},i?i:{}),r)},n.EVENTS_QUERY_EXECUTED="QueryExecuted",n._featureName="Query",n}();t.QueryCIEvents=h;c="GitHubIntegration";l=function(){function n(){}return n.LINKS_FETCH="LINKS_FETCH",n}();t.GitHubIntegrationCIActions=l;t.publishGitHubTelemetry=a});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking.Helpers",["require","exports","VSS/Controls","VSS/VSS","VSS/Identities/Picker/Services","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Identities/Picker/Controls","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/WitIdentityImages","WorkItemTracking/Scripts/OM/WorkItemConstants","Presentation/Scripts/TFS/FeatureRef/WorkItemStateColorsProvider","Presentation/Scripts/TFS/FeatureRef/WorkItemStateCellRenderer","TfsCommon/Scripts/WITIdentityHelpers","WorkItemTracking/Scripts/Dialogs/CommonErrorDialog","WorkItemTracking/Scripts/Utils/WorkItemTrackingCIEventHelper","WorkItemTracking/Scripts/Utils/WitControlMode","WorkItemTracking/Scripts/TFS.WorkItemTracking.WebApi","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Utils/Accessibility","VSS/Utils/UI"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){var ut,ft;Object.defineProperty(t,"__esModule",{value:!0});t.WITFileHelper=t.WITStateCircleColors=t.WITIdentityControlHelpers=void 0;var tt=e.TfsContext,it=5e6,rt=20,et=function(){function n(){}return n.setupCommonIdentityPickerOptions=function(t,i,r,e,s,h){var c={operationScope:{IMS:!0,Source:tt.getDefault().isHosted},identityType:{User:i,Group:!0},multiIdentitySearch:t,showMruTriangle:!t,showTemporaryDisplayName:!0,showMru:!0,loadOnCreate:!0,highlightResolved:!0,size:o.IdentityPickerControlSize.Small,callbacks:{onItemSelect:function(n){e(n)},getCustomTooltip:function(){return n.getCustomTooltip(h())}},getFilterByScope:h,consumerId:n.IdentityPickerConsumerId};return c.callbacks.preDropdownRender=function(n){var l=[],t,a=n,e,c;return h&&(e=h()),e?(e.nonIdentities&&(t=e.nonIdentities),e.excludeGroups&&(a=n.filter(function(n){return!f.equals(n.entityType,u.ServiceHelpers.GroupEntity,!0)}))):$.isFunction(r)&&(t=r()),i&&t&&t.length>0&&(c=s(),$.each(t,function(n,t){var i=o.EntityFactory.createStringEntity(t,tt.getDefault().configuration.getResourcesFile("notassigned-user.svg"));c!==undefined&&i.displayName&&i.displayName.trim().toLowerCase().indexOf(c)==0&&l.push(i)})),a.concat(l)},c},n.getCustomTooltip=function(n){return n&&f.format(n.displayNames.length<=10?h.ScopedIdentityTooltip:h.ScopedIdentityTooltipWithSuffix,n.displayNames.join(", "))},n.parseIdentityListString=function(n){if(n==="")return[];var t=n.match(/\"([^\"]*)\"/i);return t===null?n.split(","):this.parseIdentityListString(n.substr(0,t.index-1)).concat([t[1]]).concat(this.parseIdentityListString(n.substr(t.index+t[0].length+1)))},n.toIdentityListString=function(n){return n.map(function(n){return'"'.concat(n,'"')}).join(",")},n.getIdentityDisplayControl=function(t,r){var u=y.WITIdentityHelpers.parseUniquefiedIdentityName(t),f=!1;if(u?o.EntityFactory.isStringEntityId(u.entityId)&&(f=!0):(u=o.EntityFactory.createStringEntity(h.AssignedToEmptyText,c.WitIdentityImages.UnassignedImageUrl),f=!0),u){var e=y.WITIdentityHelpers.getEntityIdentifier(u,!0),s={identityType:{User:!0},operationScope:{IMS:!0,Source:tt.getDefault().isHosted},item:f?u:e,friendlyDisplayName:u.displayName,size:o.IdentityPickerControlSize.Large,turnOffHover:!0,consumerId:n.IdentityDisplayControlConsumerId},l=i.BaseControl.create(o.IdentityDisplayControl,r,s);return l.getElement()}return null},n.IdentityPickerConsumerId="1D08AC59-C802-43AD-B040-DF2E624C194D",n.IdentityDisplayControlConsumerId="944005B7-E27F-465B-B112-619B98DD4A16",n}();t.WITIdentityControlHelpers=et;ut=function(){function n(){}return n.getStateColors=function(n,t){var r,i;return t&&t.stateColors&&n&&(i=t.stateColors[n],i&&i!==f.empty&&f.ignoreCaseComparer(i,"#ffffff")!==0&&(r={borderColor:i,backgroundColor:i})),r||(r={borderColor:v.WorkItemStateCellRenderer.STATES_DEFAULT_COLOR,backgroundColor:a.WorkItemStateColorsProvider.DEFAULT_STATE_COLOR}),r},n.getSpanForState=function(t,i){var r=n.getStateColors(t,i);return f.format("<span class='state-circle' style='border-color: {0}; background-color: {1};'><\/span>",r.borderColor,r.backgroundColor)},n.setStateColorsOnElement=function(t,i,r){var u=n.getStateColors(i,r);t.css("border-color",u.borderColor);t.css("background-color",u.backgroundColor)},n}();t.WITStateCircleColors=ut;ft=function(){function n(){}return n.getExtensionName=function(n){if(!n)return f.empty;var t=n.lastIndexOf(".");return t>=0?n.substring(t+1).toLowerCase():f.empty},n.getExtensionNames=function(t){var r=[],i,u,e,f;if(t&&t.length>0)for(i=0,u=t;i<u.length;i++)e=u[i],f=n.getExtensionName(e),r.indexOf(f)<0&&r.push(f);return r},n.getExtensionNamesFromFileList=function(t){var u=[],i,r;if(t&&t.length>0){for(i=[],r=0;r<t.length;r++)i.push(t[0].name);u=n.getExtensionNames(i)}return u},n.getMatchingIcon=function(t){var r=n.getExtensionName(t),i="bowtie-icon ";switch(r){case"jpg":case"jpeg":case"jif":case"jfif":case"jpx":case"fpx":case"pcd":case"bmp":case"img":case"eps":case"psd":case"wmf":case"png":i+="bowtie-image";break;case"gif":case"mp4":case"flv":case"mng":case"avi":case"qt":case"wmv":case"yuv":case"asf":case"rm":case"amv":case"m4p":case"m4v":case"mpg":case"mpeg":case"mpv":case"m4v":case"svi":case"f4v":case"mov":i+="bowtie-video";break;case"msg":i+="bowtie-mail-message";break;default:i+="bowtie-file-content"}return i},n.uploadFiles=function(t,i){return new Promise(function(r,u){var ut=t.length,o=[],c=[],a=[],v=!1,ft=function(){w.AttachmentsControlCIEvents.publishEvent(w.AttachmentsControlCIEvents.ACTIONS_ADD,{isDragDrop:!0,numOfFilesDropped:t.length,numOfFilesAttached:a.length,numOfOversizedFiles:c.length,numOfRejectedFiles:o.length,oversizedFileExtNames:n.getExtensionNames(c),rejectedFileExtNames:n.getExtensionNames(o),inputFileExtNames:n.getExtensionNamesFromFileList(t),workItemSessionId:i.sessionId})},e;if(nt.BrowserCheckUtils.isIE()&&t.length===0){p.CommonErrorDialog.showDialog(h.AttachmentUploadFailDialogTitle,f.format(h.AttachmentUploadFailMessage,o.join(", ")));u();return}if(t&&t.length>rt){for(e=0;e<t.length;e++)o.push(t[e].name);p.CommonErrorDialog.showDialog(h.FileThrottleDialogTitle,f.format(h.FileThrottleMessage,rt));ft();u();return}var et=new g.ProgressAnnouncer({announceStartMessage:h.AttachmentUploadingStart,announceEndMessage:h.AttachmentUploadingEnd,announceErrorMessage:h.AttachmentUploadingError,announceStartDelay:0}),ot=function(n,t,i){t.lastModified?i.resolvePlaceholder(n.id,null,new Date(t.lastModified)):i.resolvePlaceholder(n.id,null,t.lastModifiedDate);a.push(i);y()},st=function(n,t,i){o.push(t.name);i.remove();y(n&&n.status)},y=function(n){if(ut--,ut===0){if(o.length>0){et.announceError();u();var t="";t=Number(n)===403?h.AttachmentUploadFailPermissionsMessage:n===undefined&&v?h.AttachmentUploadCancelledMessage:f.format(h.AttachmentUploadFailMessage,o.join(", "));p.CommonErrorDialog.showDialog(h.AttachmentUploadFailDialogTitle,t)}else et.announceCompleted(),a.length>0?r():u();ft()}},tt=function(n,t){(t.change===l.WorkItemChangeType.Refresh||t.change===l.WorkItemChangeType.Reset)&&(v=!0)},ht=function(n){var r=t[n],l,u;if(r.size>b.WitFormModeUtility.maxAttachmentSize)c.push(r.name),l=(b.WitFormModeUtility.maxAttachmentSize/1048576).toFixed(2),p.CommonErrorDialog.showDialog(h.AttachmentsOversizedDialogTitle,f.format(h.FilesUploadedExceedMaxMb,l,c.join(", "))),y();else{u=s.Attachment.create(i,r.name,"","",r.size,null,null,!0);i.addLink(u);var a=i.store.tfsConnection.getHttpClient(k.WorkItemTrackingHttpClient),e=i.getComputedFieldValue(d.CoreField.AreaPath),o="";e&&e.value&&(o=e.value);r.size>it&&r.slice instanceof Function?(i.attachWorkItemChanged(tt),a.beginAttachmentUpload(i.project.guid,r,o,it,function(){return!v},r.name).then(function(n){i.detachWorkItemChanged(tt);ot(n,r,u)},function(n){i.detachWorkItemChanged(tt);st(n,r,u)})):a.beginAttachmentUploadSimple(i.project.guid,r,o,r.name).then(function(n){ot(n,r,u)},function(n){st(n,r,u)})}};for(e=0;e<t.length;e++)ht(e)})},n}();t.WITFileHelper=ft;r.tfsModuleLoaded("TFS.WorkItemTracking.Helpers",t)});

define("WorkItemTracking/Scripts/OM/QueryConstants",["require","exports","TFS/WorkItemTracking/Contracts"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.LinkQueryMode=void 0;var r;(function(n){function t(t){return(t||n.Unknown)>n.WorkItems}function r(t){return(t||n.Unknown)>=n.LinksRecursive}function u(n){return r(n)?i.QueryType.Tree:t(n)?i.QueryType.OneHop:i.QueryType.Flat}n.Unknown=0;n.WorkItems=1;n.LinksMustContain=2;n.LinksMayContain=3;n.LinksDoesNotContain=4;n.LinksRecursive=5;n.LinksRecursiveReturnMatchingChildren=6;n.isLinkQuery=t;n.isTreeQuery=r;n.getQueryType=u})(r=t.LinkQueryMode||(t.LinkQueryMode={}))});

define("WorkItemTracking/Scripts/OM/WiqlValues",["require","exports","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.Common","VSS/Utils/String","WorkItemTracking/Scripts/OM/WiqlOperators"],function(n,t,i,r,u){function a(n,t){var i;if(t===void 0&&(t=!1),i=n&&n.trim().match(t?l:c),!i)return null;var f=i[1],e=i[2],r=i[3],u=r&&(e==="+"?+r:-r);return isNaN(u)&&(u=0),{team:f,offset:u}}function v(n){var t=n&&n.trim().match(h),i;return t?(i=t[1],{team:i}):null}function y(n){var i,t,r,u;for(i in o)if(t=n&&n.trim().match(o[i]),t)return r=t[1],u=t[2],{invariantMacro:i,modifier:r,offset:u};return null}var f,h,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.parseDateMacro=t.parseTeamAreas=t.parseCurrentIteration=void 0;var s="\\s*(?:\\(\\s*'(.*?)'\\s*\\))?\\s*(?:(\\+|-)\\s*((?:\\+|-)?\\d*)?)?",c=new RegExp("^@".concat(i.WiqlOperators_MacroCurrentIteration).concat(s,"$"),"i"),l=new RegExp("^".concat(u.WiqlOperators.MacroCurrentIteration).concat(s,"$"),"i");t.parseCurrentIteration=a;h=new RegExp("^@".concat(i.WiqlOperators_MacroTeamAreas,"\\s*(?:\\(\\s*'([^']*?)'\\s*\\))?$"),"i");t.parseTeamAreas=v;e="^@{0}\\s*(?:\\(\\s*'([+-]{{0,1}}\\d{{1,7}}[yMwdhm]?)'\\s*\\))?\\s*((?:[+-]\\s*\\d{{1,7}}))?$";o=(f={},f[u.WiqlOperators.MacroStartOfYear]=new RegExp(r.format(e,i.WiqlOperators_MacroStartOfYear),"i"),f[u.WiqlOperators.MacroStartOfMonth]=new RegExp(r.format(e,i.WiqlOperators_MacroStartOfMonth),"i"),f[u.WiqlOperators.MacroStartOfWeek]=new RegExp(r.format(e,i.WiqlOperators_MacroStartOfWeek),"i"),f[u.WiqlOperators.MacroStartOfDay]=new RegExp(r.format(e,i.WiqlOperators_MacroStartOfDay),"i"),f);t.parseDateMacro=y});

define("WorkItemTracking/Scripts/OM/QueryAdapter",["require","exports","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/Diag","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking.Helpers","VSS/Service","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/FeatureRef/TFS.TagService","VSS/Utils/Array","VSS/Utils/Culture","VSS/Utils/Date","VSS/Utils/Number","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.Common","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WiqlOperators","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/QueryConstants","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","VSS/Contributions/Services","WorkItemTracking/Scripts/OM/WiqlValues"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft){function et(n,t){return g.createError(p.format(f.InvalidQuerySyntax,n,t),{name:tt.Exceptions.InvalidQuerySyntaxException,details:n,node:t})}function ot(n,t){return g.createError(p.format(n,t),{name:tt.Exceptions.InvalidQueryFilterRowException,rowIndex:t})}Object.defineProperty(t,"__esModule",{value:!0});t.QueryAdapter=void 0;var st=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.availableOperators={},t.availableFieldValues={},t}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this.store=t.getService(g.WorkItemStore)},t.prototype.getInvariantFieldName=function(n,t){var i;if(n=$.trim(n),i=this.getField(n),i)return i.referenceName;if(t)throw et(f.QueryReferencesFieldThatDoesNotExist,n);else return n},t.prototype.getInvariantFieldValue=function(n,t,i){var vt=this,rt,s,h,ut,ot,st,ht,ct,lt,k,r="",c,g,l,b,w,tt,o;if(i!==null&&i!==undefined)if(i=$.trim(i),rt=i?!1:!0,t===nt.WiqlOperators.OperatorIn||t===nt.WiqlOperators.OperatorNotIn)s=[],s=this.getField(n).isIdentity?e.WITIdentityControlHelpers.parseIdentityListString(i):i.split(",").filter(function(n){return!!n}),s=s.map(function(t){return vt.getInvariantFieldValue(n,"",t)}),r="("+s.join(",")+")";else if(p.ignoreCaseComparer(n,"System.LinkType")===0){try{lt=this.store.findLinkTypeEnd(i)}catch(yt){throw et(yt.message,i);}r=nt.quoteString(lt.immutableName)}else if(rt)r="''";else if(h=this.getFieldType(null,n),ut=p.startsWith(i,nt.WiqlOperators.MacroStart),ut){if(l=ft.parseCurrentIteration(i),l){if(l.team){var u=l.offset,w=l.team,pt=u>0?" + ".concat(u):u<0?" - ".concat(-u):"",tt=w?"('".concat(w,"')"):"";return"".concat(nt.WiqlOperators.MacroCurrentIteration).concat(tt).concat(pt)}throw et(f.ErrorExpectingTeam,i);}if(b=ft.parseTeamAreas(i),b){if(b.team)return w=b.team,tt=w?"('".concat(w,"')"):"","".concat(nt.WiqlOperators.MacroTeamAreas).concat(tt);throw et(f.ErrorExpectingTeam,i);}if(o=ft.parseDateMacro(i),o){if(o.invariantMacro){var wt=o.invariantMacro,at=o.modifier,u=o.offset,it="".concat(wt);return at&&(it+="('".concat(at,"')")),u&&(it+="".concat(u)),it}throw et(f.ErrorExpectingTeam,i);}if(nt.isValidMacro(i,!0))r=nt.getInvariantOperator(i);else throw et(p.format(f.QueryFilterInvalidMacro,i),i);}else if(ot=h===d.FieldType.DateTime,st=h===d.FieldType.Integer,ht=h===d.FieldType.Double,ct=h===d.FieldType.Boolean,ot){if(c=v.parseDateString(i,undefined,!0),c===null||isNaN(c))throw et(f.ErrorExpectingDateTime,i);if(g=c.getFullYear(),g<1753||g>9999)throw et(f.ErrorDateTimeValueOutOfRange,i);r=nt.quoteString(nt.toInvariantDateString(c))}else if(st){if(!/^-?[0-9]+?$/.test(i))throw et(f.ErrorExpectingIntegerValue,i);r=i}else if(ht)if(k=Number(i),isNaN(k))throw et(f.ErrorExpectingNumericValue,i);else r=y.toDecimalLocaleString(k,!1,a.getInvariantCulture());else if(ct)if(/^true$/i.test(i))r="true";else if(/^false$/i.test(i))r="false";else if(/^[0-9]+?$/.test(i))r=parseInt(i,10)?"true":"false";else throw et(f.ErrorExpectingBooleanValue,i);else r=nt.quoteString(i);return r},t.prototype.processClause=function(n){return this._fieldSupportsAnySyntax(null,n.fieldName)?this._convertFromSpecialAnySyntax(n):n},t.prototype.beginEnsureFields=function(n,t,i){i===void 0&&(i=!1);this.store.beginGetFields(i).then(n).catch(t)},t.prototype.beginGetOneHopLinkTypes=function(n,t){var i=this;b.queueRequest(this,this,"oneHopLinkTypes",n,t,function(n,t){i.store.beginGetLinkTypes(function(){var t=i.store.getLinkTypeEnds().filter(function(n){return!n.linkType.isRemote});n(t)},t)})},t.prototype.beginGetRecursiveLinkTypes=function(n,t){var i=this;b.queueRequest(this,this,"recursiveLinkTypes",n,t,function(n,t){i.store.beginGetLinkTypes(function(){n($.map(i.store.getLinkTypeEnds(),function(n){if(n.isForwardLink&&p.ignoreCaseComparer(n.linkType.topology,"tree")===0)return n}))},t)})},t.prototype.beginGetQueryableFields=function(n,t,i){var r=this,u="queryableFields"+(n!=null?n.guid:"");b.queueRequest(this,this,u,t,i,function(t,i){if(n){var u=[];$.each(n.fieldIds,function(t,i){i!=d.CoreField.TeamProject&&(u[u.length]=n.store.getFieldDefinition(i))});t(r._prepareQueryableFields(u))}else r.store.beginGetFields().then(function(n){t(r._prepareQueryableFields(n))}).catch(i)})},t.prototype.beginGetAvailableOperators=function(n,t,i){var r=this,u;n=$.trim(n);u=n.toLocaleUpperCase();u?b.queueRequest(this,this.availableOperators,u,t,i,function(t,i){r.store.fields?t(r._prepareAvailableOperators(n)):r.store.beginGetFields().then(function(){t(r._prepareAvailableOperators(n))}).catch(i)}):$.isFunction(t)&&t.call(this,[])},t.prototype.getField=function(n){var t=this.store.getFieldDefinition(n);return t&&t.id===d.CoreField.Parent?null:t},t.prototype.areFieldsLoaded=function(){return Boolean(this.store.fieldMap)},t.prototype.getFieldType=function(n,t){return(n=n||(t?this.getField(t):null),n)?n.id===d.CoreField.TeamProject?d.FieldType.Internal:n.type:d.FieldType.String},t.prototype.beginGetAvailableFieldValues=function(n,t,i,r,u,f,e){var o=this,h,l;t=$.trim(t);t?(i=$.trim(i),h=nt.getInvariantOperator(i).toUpperCase(),l=(n?n.id:0)+"|"+t.toLocaleUpperCase()+"|"+i.toLocaleUpperCase()+"|"+(u?"scoped":"unscoped")+(r?"|includesPredefined":""),b.queueRequest(this,this.availableFieldValues,l,f,e,function(f,e){o.store.beginGetFields().then(function(){var l=o.getField(t),a,y,w,v;l?(a=o.getFieldType(l),a===d.FieldType.TreePath?n.nodesCacheManager.beginGetNodes().then(function(){var t=[],o=0,i=function(n){return{id:--o,name:n,guid:n,children:[],structure:rt.INodeStructureType.Project}},u,e;l.id===d.CoreField.IterationPath&&r&&(h===nt.WiqlOperators.OperatorEqualTo||h===nt.WiqlOperators.OperatorNotEqualTo||h===nt.WiqlOperators.OperatorUnder||h===nt.WiqlOperators.OperatorNotUnder)?(u=nt.getLocalizedOperator(nt.WiqlOperators.MacroCurrentIteration),t.push(i(u)),t.push(i(u+" + 1")),t.push(i(u+" - 1"))):l.id===d.CoreField.AreaPath&&r&&(h===nt.WiqlOperators.OperatorEqualTo||h===nt.WiqlOperators.OperatorNotEqualTo)&&(e=nt.getLocalizedOperator(nt.WiqlOperators.MacroTeamAreas),t.push(i(e)));l.id===d.CoreField.AreaPath?t.push(n.nodesCacheManager.getAreaNode(!0)):t.push(n.nodesCacheManager.getIterationNode(!0));f(t)},e):a===d.FieldType.Boolean?f(["True","False"]):nt.isFieldComparisonOperator(i)?o.beginGetQueryableFields(u?n:null,function(n){var i=[];$.each(n,function(n,r){p.localeIgnoreCaseComparer(r,t)!==0&&a===o.getFieldType(null,r)&&i.push(r)});f(i)},e):l.id===d.CoreField.Tags?(y=s.ProjectCollection.getConnection(o.getTfsContext()).getService(c.TagService),y.beginQueryTagNames(c.TagsKind.WorkItem,n.guid,function(n){return f(n)},function(n){n.type==="Microsoft.TeamFoundation.Framework.Server.AccessCheckException"?f([]):e(n)})):l.id===d.CoreField.BoardColumn?b.using(["Presentation/Scripts/TFS/FeatureRef/TFS.BoardService"],function(t){var i=s.ProjectCollection.getConnection(o.getTfsContext()).getService(t.BoardService);i.beginGetColumnSuggestedValues(u?n.guid:null,f,e)}):l.id===d.CoreField.BoardLane?b.using(["Presentation/Scripts/TFS/FeatureRef/TFS.BoardService"],function(t){var i=s.ProjectCollection.getConnection(o.getTfsContext()).getService(t.BoardService);i.beginGetRowSuggestedValues(u?n.guid:null,f,e)}):g.isIdentityPickerSupportedForField(l)?(w=o._getPredefinedFieldValues(l,a),o.store.beginGetAllowedValues(l.id,null,null,function(n){var t=n.concat(w);f(t)},e)):l.id===d.CoreField.TeamProject?o.store.beginGetProjects(function(n){var t=$.map(n,function(n){return n.name});f(t)},e):l.id===d.CoreField.Id?(v=[nt.getLocalizedOperator(nt.WiqlOperators.MacroFollows)],o._isRecentMentionsMacroEnabled()&&v.push(nt.getLocalizedOperator(nt.WiqlOperators.MacroRecentMentions)),o._isMyRecentActivityMacroEnabled()&&v.push(nt.getLocalizedOperator(nt.WiqlOperators.MacroMyRecentActivity)),o._isRecentProjectActivityMacroEnabled()&&v.push(nt.getLocalizedOperator(nt.WiqlOperators.MacroRecentProjectActivity)),f(v)):nt.isGroupOperator(h)&&l.id===d.CoreField.WorkItemType?o.store.beginGetWorkItemCategories(n,function(n){var t=[];$.each(n,function(n,i){t.push(i.referenceName)});t.sort(p.localeIgnoreCaseComparer);f(t)},e):o.store.beginGetAllowedValues(l.id,u?n.guid:null,null,function(n){r&&(n=(o._getPredefinedFieldValues(l,a)||[]).concat(n));f(n)},e)):f([])}).catch(e)})):$.isFunction(f)&&f.call(this,[])},t.prototype.beginGenerateWiql=function(n,t,i,r,u){var f=this;this.store.beginGetLinkTypes(function(){f.beginEnsureFields(function(){var e=[],o,s,h;try{e.push(f._generateSelectClause(t));n.mode<=it.LinkQueryMode.WorkItems?e.push("FROM WorkItems"):e.push("FROM WorkItemLinks");o=$.trim(f._generateFilter(n));o&&e.push("WHERE "+o);s=f._generateOrderByClause(i,it.LinkQueryMode.isLinkQuery(n.mode));s&&e.push(s);h=f._getModeClause(n.mode);h&&e.push(h);$.isFunction(r)&&r.call(f,e.join(" "))}catch(c){b.handleError(c,u,f)}},u)},u)},t.prototype._fieldSupportsAnySyntax=function(n,t){return n=n||(t?this.getField(t):null),n&&nt.isNonNullableField(n.id)},t.prototype._convertFromSpecialAnySyntax=function(n){var t;return n.value&&(t=n.value.replace(/[\s'"()]+$/,"").replace(/^[\s'"()]+/,""),p.localeIgnoreCaseComparer(t,k.WiqlOperators_Any)===0&&nt.getInvariantOperator(n.operator)===nt.WiqlOperators.OperatorEqualTo)?$.extend({},n,{operator:nt.getLocalizedOperator(nt.WiqlOperators.OperatorNotEqualTo),value:""}):n},t.prototype._prepareQueryableFields=function(n){for(var t,i=[],u=tt.FieldUsages.WorkItem,r=0,f=n.length;r<f;r++)t=n[r],t.checkFlag(tt.FieldFlags.Queryable)&&!t.isIgnored()&&t.usages&u&&t.id!==d.CoreField.Parent&&(i[i.length]=t.name);return i.sort(p.localeIgnoreCaseComparer),i},t.prototype._prepareAvailableOperators=function(n){var t=this.getField(n),f=this.getFieldType(t),u=[],s,e;if(t&&t.referenceName===d.CoreFieldRefNames.Tags){var o=nt.WiqlOperators,h=o.OperatorContains,c=o.OperatorNotContains;u.push.apply(u,[h,c])}else switch(f){case 0:l.addRange(u,nt.ProjectOperators);break;case d.FieldType.String:l.addRange(u,t&&t.supportsTextQuery()?nt.StringWithTextSupportOperators:t&&t.id===d.CoreField.WorkItemType?nt.StringWithInGroupOperators:nt.StringOperators);break;case d.FieldType.Integer:case d.FieldType.DateTime:case d.FieldType.Double:l.addRange(u,nt.ComparisonOperators);break;case d.FieldType.PlainText:case d.FieldType.Html:l.addRange(u,t&&t.supportsTextQuery()?nt.TextWithTextSupportOperators:nt.TextOperators);break;case d.FieldType.History:l.addRange(u,t&&t.supportsTextQuery()?nt.HistoryWithTextSupportOperators:nt.HistoryOperators);break;case d.FieldType.TreePath:l.addRange(u,nt.TreePathOperators);break;case d.FieldType.Boolean:case d.FieldType.Guid:l.addRange(u,nt.EqualityOperators)}return s=t?t.checkFlag(tt.FieldFlags.Computed):!1,(!s||i.FeatureAvailabilityService.isFeatureEnabled(r.FeatureAvailabilityFlags.AllowWasEverForComputed))&&nt.FieldTypesSupportingEver.hasOwnProperty(f)&&u.push(nt.WiqlOperators.OperatorEver),e=nt.getLocalizedOperatorList(u),nt.FieldTypesSupportingFieldComparison.hasOwnProperty(f)&&$.each(u,function(n,t){nt.OperatorsSupportingFieldComparison.hasOwnProperty(t.toUpperCase())&&e.push(nt.getFieldComparisonOperator(t))}),e},t.prototype._getPredefinedFieldValues=function(n,t){switch(t){case 0:return[nt.getLocalizedOperator(nt.WiqlOperators.MacroProject)];case d.FieldType.DateTime:return[nt.getLocalizedOperator(nt.WiqlOperators.MacroStartOfDay),nt.getLocalizedStartOfDayMacro(-1),nt.getLocalizedStartOfDayMacro(-7),nt.getLocalizedStartOfDayMacro(-30),nt.getLocalizedOperator(nt.WiqlOperators.MacroStartOfWeek),nt.getLocalizedOperator(nt.WiqlOperators.MacroStartOfMonth),nt.getLocalizedOperator(nt.WiqlOperators.MacroStartOfYear)];case d.FieldType.String:return n.isIdentity?[nt.getLocalizedOperator(nt.WiqlOperators.MacroMe)]:this._fieldSupportsAnySyntax(n)?[k.WiqlOperators_Any]:[];default:return[]}},t.prototype._checkOperator=function(n,t,i){var e=!0,r;if(this.beginGetAvailableOperators(n,function(n){e=!1;n&&n.length&&(l.contains(n,$.trim(t),p.localeIgnoreCaseComparer)||(r=ot(f.QueryFilterErrorUnrecognizedOperator,i+1)))},function(n){e=!1;r=n}),r)throw r;},t.prototype._generateSelectClause=function(n){return n&&n.length?"SELECT "+$.map(n,function(n){return"["+n+"]"}).join(","):"SELECT [System.Id]"},t.prototype._generateFilterExpression=function(n,t,i){var u=this,h=[],c=[],r=n.groups,o,a=!1,e,l,s;return n.clauses&&(r=r&&$.map(r,function(n){return $.extend({},n)}),o=0,$.each(n.clauses,function(n,t){var e=$.trim(t.fieldName),i;if(e){if(i=$.trim(t.operator),!i)throw ot(f.QueryFilterErrorMissingOperator,t.index+1);if(!$.trim(t.value)&&(u.isFieldComparisonOperator(i)||p.ignoreCaseComparer(nt.WiqlOperators.OperatorIn,nt.getInvariantOperator(i))===0||p.ignoreCaseComparer(nt.WiqlOperators.OperatorNotIn,nt.getInvariantOperator(i))===0||u.getFieldType(null,e)===d.FieldType.Boolean))throw ot(f.QueryFilterErrorEmptyValue,t.index+1);h.push($.extend({},t,{index:o,originalIndex:t.index}));o++}else r&&r.length&&(r=w.updateFilterGroups(r,o+1,!1))})),i&&(this._isProjectInTopLevelAndAllAnds(n,i)||(e="",l=void 0,l=this.isProjectMacro(i,!1)?i:nt.quoteString(i),t&&(e="["+t+"]."),e+="["+d.CoreFieldRefNames.TeamProject+"] = "+l,h.length>0&&(e+=" AND",this._isTopLevelAndsOnly(n)||(a=!0,e+=" (")),c.push(e))),$.each(h,function(n,i){var f=[],e="",l,s,a,h,o,v,y;n>0&&f.push(u.getInvariantOperator(i.logicalOperator));r&&r.length&&($.each(r,function(n,t){t.start===i.index+1&&(e+="(")}),e&&f.push(e));i=u.processClause(i);l=i.fieldName;s=i.operator;a=i.value;h=u.getInvariantFieldName(l,!0);u._checkOperator(l,s,i.originalIndex);o=u.getInvariantOperator(s);u.isFieldComparisonOperator(s)?(y=u.getInvariantFieldName(a,!0),v=t?"["+t+"].["+y+"]":"["+y+"]"):v=o===nt.WiqlOperators.OperatorIsEmpty||o===nt.WiqlOperators.OperatorIsNotEmpty?"":u.getInvariantFieldValue(h,o,a);t?f.push("["+t+"].["+h+"]"):f.push("["+h+"]");f.push(o);f.push(v);r&&r.length&&(e="",$.each(r,function(n,t){t.end===i.index+1&&(e+=")")}),e&&f.push(e));c.push(f.join(" "))}),s=c.join(" "),a&&(s=s+")"),s},t.prototype._isTopLevelAndsOnly=function(n){var t=this,i;return!n||!n.clauses?!0:(i=!0,$.each(n.clauses,function(r,u){var f=t.getInvariantOperator(u.logicalOperator);if(t.isOrOperator(f,!1)&&t._doesLogicalOperatorApplyToTopLevelOfQuery(u,n.groups))return i=!1,!1}),i)},t.prototype._isProjectInTopLevelAndAllAnds=function(n,t){var i=this,r;return!n||!n.clauses?!1:(r=!1,$.each(n.clauses,function(u,f){var e=i.getInvariantOperator(f.logicalOperator);if(i.isOrOperator(e,!1)&&i._doesLogicalOperatorApplyToTopLevelOfQuery(f,n.groups))return r=!1,!1;!i.isOrOperator(e,!1)&&i._doesLogicalOperatorApplyToTopLevelOfQuery(f,n.groups)&&i.getInvariantOperator(f.operator)===nt.WiqlOperators.OperatorEqualTo&&i.getInvariantFieldName(f.fieldName,!1)===d.CoreFieldRefNames.TeamProject&&(i.isProjectMacro(f.value,!0)||p.localeIgnoreCaseComparer(f.value,t)===0)&&(r=!0)}),r)},t.prototype._doesLogicalOperatorApplyToTopLevelOfQuery=function(n,t){var i=!0,r=n.index+1;return $.each(t,function(n,t){if(r>t.start&&r<=t.end)return i=!1,!1}),i},t.prototype._generateLinkFilter=function(n){var i=this,t=[];return n&&$.each(n.split(","),function(n,r){var u;if(r=$.trim(r),p.localeIgnoreCaseComparer(r,k.WiqlOperators_Any)===0)return t=["[System.Links.LinkType] <> ''"],!1;try{u=i.store.findLinkTypeEnd(r);t.push("[System.Links.LinkType] = "+nt.quoteString(u.immutableName))}catch(f){throw et(f.message,r);}}),t.join(" OR ")},t.prototype._generateFilter=function(n){var r,u,t,i;return it.LinkQueryMode.isLinkQuery(n.mode)?(it.LinkQueryMode.isTreeQuery(n.mode)?(r=n.treeTargetFilter,u=n.treeLinkTypes):(r=n.linkTargetFilter,u=n.linkTypes),i=[],t=$.trim(this._generateFilterExpression(n.sourceFilter,"Source",n.teamProject)),t&&i.push("("+t+")"),t=$.trim(this._generateLinkFilter(u)),t&&i.push("("+t+")"),t=$.trim(this._generateFilterExpression(r,"Target",n.teamProject)),t&&i.push("("+t+")"),i.join(" AND ")):$.trim(this._generateFilterExpression(n.sourceFilter,"",n.teamProject))},t.prototype._generateOrderByClause=function(n,t){var i=n;return(t||n&&n.length&&(i=[],$.each(n,function(n,t){p.ignoreCaseComparer(t.name,"System.Links.LinkType")!==0&&i.push(t)})),i&&i.length)?"ORDER BY "+$.map(i,function(n){return"["+n.name+"]"+(n.descending?" DESC":"")}).join(","):""},t.prototype._getModeClause=function(n){switch(n){case it.LinkQueryMode.LinksMustContain:return"mode(MustContain)";case it.LinkQueryMode.LinksMayContain:return"mode(MayContain)";case it.LinkQueryMode.LinksDoesNotContain:return"mode(DoesNotContain)";case it.LinkQueryMode.LinksRecursive:return"mode(Recursive)";case it.LinkQueryMode.LinksRecursiveReturnMatchingChildren:return"mode(Recursive, ReturnMatchingChildren)"}return""},t.prototype._isRecentMentionsMacroEnabled=function(){var t=o.getService(ut.WebPageDataService),n=t.getPageData(d.WorkItemFeatureStateConstants.DataProviderName);return n&&n.recentMentionsMacro},t.prototype._isMyRecentActivityMacroEnabled=function(){var t=o.getService(ut.WebPageDataService),n=t.getPageData(d.WorkItemFeatureStateConstants.DataProviderName);return n&&n.myRecentActivityMacro},t.prototype._isRecentProjectActivityMacroEnabled=function(){var t=o.getService(ut.WebPageDataService),n=t.getPageData(d.WorkItemFeatureStateConstants.DataProviderName);return n&&n.recentProjectActivityMacro},t}(h.TfsService);t.QueryAdapter=st;b.initClassPrototype(st,{store:null,queryableFields:null,availableOperators:null,availableFieldValues:null,oneHopLinkTypes:null,recursiveLinkTypes:null,getLocalizedOperator:nt.getLocalizedOperator,getInvariantOperator:nt.getInvariantOperator,isGroupOperator:nt.isGroupOperator,isInOperator:nt.isInOperator,isMultipleValueOperator:nt.isMultipleValueOperator,isFieldComparisonOperator:nt.isFieldComparisonOperator,isMeMacro:nt.isMeMacro,isIdentityFieldStringOperator:nt.isIdentityFieldStringOperator,isProjectMacro:nt.isProjectMacro,isOrOperator:nt.isOrOperator})});

define("WorkItemTracking/Scripts/Utils/QueryTelemetry",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Utils/TelemetryUtils"],function(n,t,i,r,u){function e(n,t){var e,o;n&&(n=n.toLowerCase(),e=n.indexOf("where"),e!==-1&&(o=new u.TelemetryUtils.BoardFieldUsageData,f(n,i.CoreFieldRefNames.BoardColumn,e)&&(o.column=!0),f(n,i.CoreFieldRefNames.BoardColumnDone,e)&&(o.done=!0),f(n,i.CoreFieldRefNames.BoardLane,e)&&(o.lane=!0),u.TelemetryUtils.recordBoardFieldsUsageChange(r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,t,o)))}function f(n,t,i){t=t.toLowerCase();var r=n.indexOf(t,i);return r!==-1}function o(n,t){var f=new u.TelemetryUtils.BoardFieldUsageData;n&&$.isArray(n)&&n.forEach(function(n){if(n&&n.fieldId)switch(n.fieldId){case i.CoreField.BoardColumn:f.column=!0;break;case i.CoreField.BoardColumnDone:f.done=!0;break;case i.CoreField.BoardLane:f.lane=!0}});u.TelemetryUtils.recordBoardFieldsUsageChange(r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,t,f)}Object.defineProperty(t,"__esModule",{value:!0});t.recordBoardFieldUsageInColumns=t.recordBoardFieldUsageInQueryFilters=void 0;t.recordBoardFieldUsageInQueryFilters=e;t.recordBoardFieldUsageInColumns=o});

define("WorkItemTracking/Scripts/Queries/Components/QuerySaveDialog.Renderer",["require","exports","VSS/VSS"],function(n,t,i){function r(n,t,r,u,f,e){i.using(["WorkItemTracking/Scripts/Queries/Components/QuerySaveDialog"],function(i){e&&e()||i.showDialog(n,t,r,u,f)})}Object.defineProperty(t,"__esModule",{value:!0});t.showDialog=void 0;t.showDialog=r});

define("WorkItemTracking/Scripts/Controls/WorkItemsProvider",["require","exports","q","VSS/Utils/String","VSS/Diag","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/VSS","VSS/Events/Handlers","VSS/Events/Services","WorkItemTracking/Scripts/OM/QueryAdapter","WorkItemTracking/Scripts/OM/QueryConstants","WorkItemTracking/Scripts/OM/QueryItem","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/Utils/WorkItemTrackingCIEventHelper","WorkItemTracking/Scripts/Utils/QueryTelemetry","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Queries/Models/Models","WorkItemTracking/Scripts/Queries/Components/QuerySaveDialog.Renderer","VSS/Telemetry/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){var tt,d,g,nt;Object.defineProperty(t,"__esModule",{value:!0});t.SearchResultsProvider=t.QueryResultsProvider=t.WorkItemsProvider=void 0;tt=e.handleError;d=function(){function n(n){this.options=n||{}}return n.prototype.getId=function(){return null},n.prototype.getVersion=function(){return this._version},n.prototype._incrementVersion=function(){this._version=this._version+1},n.prototype.getTitle=function(){return""},n.prototype.beginGetResults=function(){},n.prototype.isDirty=function(){return this._dirty===!0},n.prototype.setDirty=function(t,i){this.isEditable()&&this._dirty!==t&&(this._dirty=t,i||(this.options.suppressGlobalFire||this._fireGlobalDirtyChanged(),this._fireEvent(n.EVENT_CHANGED,this,{change:"dirtyState"})))},n.prototype._fireGlobalDirtyChanged=function(){s.getService().fire(n.EVENT_QUERY_PROVIDER_DIRTY_CHANGED,this)},n.prototype.isEditable=function(){return!1},n.prototype.invalidateResults=function(){this.resultsValid=!1},n.prototype.setColumnWidth=function(){},n.prototype.setColumns=function(){},n.prototype.setSortColumns=function(){},n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype._fireEvent=function(n,t,i){if(this._events){var r;if(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r)return!1}},n.prototype.attachEvent=function(n,t){this._events||(this._events=new o.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n.prototype.clearEvents=function(){this._events=new o.NamedEventCollection},n.EVENT_REFRESH_REQUIRED="refresh-required",n.EVENT_CHANGED="changed",n.EVENT_QUERY_PROVIDER_DIRTY_CHANGED="query-provider-dirty-state-changed",n}();t.WorkItemsProvider=d;g=function(n){function t(t,i,r){var u=__construct(this,n,[i]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);if(u.options=i||{},u.queryEditable=!0,u.project=i&&i.project||t.project,u.update(t),u._workItemIdToIndices={},u._queriesHubContext=i&&i.queriesHubContext,!u._queriesHubContext)try{throw new Error;}catch(e){k.publishEvent(new k.TelemetryEventData(p.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,p.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_QUERY_RESULTS_PROVIDER,{stackTrace:e.stack}))}return r&&(u.queryResultsModel=r),u._isDisposed=!1,u}return __extends(t,n),t._createInstance=function(n,i,r){var u;return this._specialProviders&&$.each(this._specialProviders,function(t,i){if(i.supports(n))return u=i,!1}),u?new u(n,i,r):new t(n,i)},t.registerSpecialProvider=function(n){this._specialProviders=this._specialProviders||[];this._specialProviders.push(n)},t.get=function(n,t,i,r){var u=this._providerCache,e=n&&(n.id||n.name),f;return e?(f=u&&u[e],f||i||(u||(this._providerCache=u={}),f=this._createInstance(n,t),r||(u[e]=f)),f):null},t.invalidateQueryResults=function(){for(var i,r=this.getCachedProviders(),n=0,t=r;n<t.length;n++)i=t[n],i.resultsValid=!1},t.peek=function(n){return this._providerCache?typeof n=="string"?this._providerCache[n]:this._providerCache[n.id||n.name]:null},t.remove=function(n){this._providerCache&&delete this._providerCache[n]},t.getCachedProviders=function(){var n=[],t=this._providerCache;return t&&$.each(t,function(t,i){n.push(i)}),n},t.isDirty=function(){var n=!1,t=this._providerCache;return t&&$.each(t,function(t,i){if(i&&i.isDirty())return n=!0,!1}),n},t.isRecycleBinQueryResultsProvider=function(n){return n&&n instanceof t&&n.queryDefinition&&l.QueryDefinition.isRecycleBinQuery(n.queryDefinition)},t.prototype.getId=function(){return this.queryDefinition.id},t.prototype.dispose=function(){this._isDisposed=!0},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.getUniqueId=function(){return this.queryDefinition&&(this.queryDefinition.tempQueryId||this.queryDefinition.id)},t.prototype.getPath=function(){return this.queryDefinition.storedPath},t.prototype.getTitle=function(){return this.queryDefinition.name},t.prototype.beginGetDescription=function(n,t){var i="",u;l.QueryDefinition.isRecycleBinQuery(this.queryDefinition)?(u=function(t){t>0&&(i=r.format(f.RecyclebinCleanupMessage,t));n(i)},e.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.RecycleBin"],function(n){n.RecycleBin.beginGetCleanUpSetting(u)},t)):n(i)},t.prototype.isCustomQuery=function(){return this.queryDefinition&&this.queryDefinition.customQuery},t.prototype.isSaveable=function(){return this.isDirty()&&this.isEditable()&&!this.isCustomQuery()},t.prototype.isEditable=function(){return!this.queryDefinition.specialQuery||l.QueryDefinition.isCustomizableSpecialQuery(this.queryDefinition)},t.prototype._fireGlobalDirtyChanged=function(){n.prototype._fireGlobalDirtyChanged.call(this);this.options.queriesHubContext&&this.options.queriesHubContext.triageViewActionCreator.updateProvider(this)},t.prototype.beginGetResults=function(n,t,i,r){var u=this,o=function(i){u._isDisposed||(u.queryResultsModel?(delete u.queryResultsModel.payload,delete u.queryResultsModel.pageColumns,u.queryResultsModel.sourceIds=[],u.queryResultsModel.targetIds=[],u.queryResultsModel.isLinkQuery=c.LinkQueryMode.isLinkQuery(u.queryResultsModel.editInfo.mode),u.queryResultsModel.isTreeQuery=c.LinkQueryMode.isTreeQuery(u.queryResultsModel.editInfo.mode),u.queryResultsModel.error=i,u._updateModel(u.queryResultsModel),$.isFunction(n)&&n.call(u,u.queryResultsModel)):tt(i,t||u.options.errorCallback,u))},f,e;this._hasResults()?$.isFunction(n)&&n.call(this,__assign(__assign({},this.queryResultsModel),{queryRan:i,isCachedData:!0})):(f=this.getColumns(),e=this.getSortColumns(),this._beginQuery(function(t){u._isDisposed||(v.QueryCIEvents.publishEvent(v.QueryCIEvents.EVENTS_QUERY_EXECUTED,{isDirty:u.isDirty(),isCustomQuery:u.isCustomQuery(),queryId:u.queryDefinition&&u.queryDefinition.id,queryTempId:u.queryDefinition&&u.queryDefinition.tempQueryId,queryType:u.queryDefinition&&u.queryDefinition.queryType}),u._updateModel(t),$.isFunction(n)&&n.call(u,t),t&&y.recordBoardFieldUsageInColumns(t.columns,p.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_QUERY_WORK_ITEM))},o,$.extend({fields:f&&f.length?f:undefined,sortFields:e&&e.length?e:undefined,runQuery:i,top:this.bypassSoftCap?-1:null,persistenceId:this.queryDefinition&&this.queryDefinition.id,isDirty:this.isDirty()},r)))},t.prototype._beginQuery=function(n,t,i){var r=this;this.beginGetQueryText(function(u){r.project.beginQuery(u,n,t,i)},t)},t.prototype.wiqlUpdateNeeded=function(){return this.isDirty()||this.isCustomQuery()},t.prototype.getQueryText=function(){var n=i.defer();return this.beginGetQueryText(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise},t.prototype.beginGetQueryText=function(n,t){this.queryResultsModel?this.wiqlUpdateNeeded()?(a.PerfScenarioManager.addSplitTiming(p.PerformanceEvents.QUERY_GETQUERYTEXT,!0),this.project.store.tfsConnection.getService(h.QueryAdapter).beginGenerateWiql(this.queryResultsModel.editInfo,$.map(this.queryResultsModel.columns,function(n){return n.name}),this.queryResultsModel.sortColumns,function(t){a.PerfScenarioManager.addSplitTiming(p.PerformanceEvents.QUERY_GETQUERYTEXT,!1);n(t)},t)):$.isFunction(n)&&n.call(this,this.queryResultsModel.wiql):$.isFunction(n)&&n.call(this,this.originalQuery)},t.prototype.revertEditInfo=function(n){n===void 0&&(n=!0);this.queryResultsModel&&(this.queryResultsModel.wiql=this.originalQuery,this.queryResultsModel.editInfo=$.extend(!0,{},this.originalEditInfo),this.queryResultsModel.columns=(this.originalColumns||[]).slice(0),this.queryResultsModel.sortColumns=(this.originalSortColumns||[]).slice(0),this.invalidateResults(),this._incrementVersion(),this.setDirty(!1),n&&this._fireEvent(t.EVENT_QUERY_RESULTS_MODEL_CHANGED))},t.prototype.getColumns=function(){return this.queryResultsModel?$.map(this.queryResultsModel.columns||[],function(n){return n.width>=0?n.name+";"+n.width:n.name}):[]},t.prototype.getSortColumns=function(){return this.queryResultsModel?$.map(this.queryResultsModel.sortColumns||[],function(n){return n.name+(n.descending?";desc":";asc")}):[]},t.prototype.updateQueryResultModelPayloadRow=function(n,t){var i=this.getWorkItemIndicesById(n);i.length>0&&t&&(this.queryResultsModel.payload.rows[i[0]]=t)},t.prototype._updateModel=function(n,i){i===void 0&&(i=!1);n?(!this.originalEditInfo||i)&&(this.originalQuery=n.wiql,this.originalEditInfo=$.extend(!0,{},n.editInfo),this.originalColumns=(n.columns||[]).slice(0),this.originalSortColumns=(n.sortColumns||[]).slice(0)):(this.originalEditInfo=null,this.originalColumns=null,this.originalSortColumns=null);this.queryResultsModel=n;this._buildWorkItemIdToIndices();this.resultsValid=!0;this._incrementVersion();this._fireEvent(t.EVENT_QUERY_RESULTS_MODEL_CHANGED)},t.prototype._buildWorkItemIdToIndices=function(){var n,t;if(this._workItemIdToIndices={},this.queryResultsModel&&this.queryResultsModel.targetIds)for(n=0;n<this.queryResultsModel.targetIds.length;n++)t=this.queryResultsModel.targetIds[n],this._workItemIdToIndices[t]?this._workItemIdToIndices[t].push(n):this._workItemIdToIndices[t]=[n]},t.prototype.getWorkItemIndicesById=function(n){return this._workItemIdToIndices[n]||[]},t.prototype.getDescendantCount=function(n){var t=0,i,r,u;if(this.queryResultsModel.sourceIds)for(i=this.queryResultsModel.sourceIds.length,r=this.getAncestors(n),n+=1;n<i;)if(u=this.queryResultsModel.sourceIds[n]||0,r[u])break;else t++,n++;return t},t.prototype.getAncestors=function(n){var i={},t=this.queryResultsModel.sourceIds[n],r,f,u;for(i[t]=!0;t!==0;){if(r=this.getWorkItemIndicesById(t),r.length===0)break;f=r[0];u=this.queryResultsModel.sourceIds[f];i[u]=!0;t=u}return i},t.prototype.removeWorkItem=function(n){var t,i,r;if(t=this.getWorkItemIndicesById(n),t===undefined||t.length===0)return!1;while(t.length>0)i=t[0],r=this.getDescendantCount(i)+1,this._removeAtIndex(i,r),this._buildWorkItemIdToIndices(),t=this.getWorkItemIndicesById(n);return!0},t.prototype._removeAtIndex=function(n,t){n>=0&&n<this.queryResultsModel.targetIds.length&&(this.queryResultsModel.targetIds.splice(n,t),this.queryResultsModel.payload.rows.splice(n,t),this.queryResultsModel.sourceIds&&(this.queryResultsModel.sourceIds.splice(n,t),this.queryResultsModel.linkIds.splice(n,t)))},t.prototype.update=function(n,t,i){i===void 0&&(i=!0);this.queryDefinition=n;this.originalQuery=n.queryText;this.queryResultsModel?(this.queryResultsModel.error=t,this.queryResultsModel.error?(this.resultsValid=!0,this.setDirty(!0)):(this.queryResultsModel.wiql=this.originalQuery,this.originalEditInfo=$.extend(!0,{},this.queryResultsModel.editInfo),this.originalColumns=(this.queryResultsModel.columns||[]).slice(0),this.originalSortColumns=(this.queryResultsModel.sortColumns||[]).slice(0),this.setDirty(n.isDirty),this._fireEvent(d.EVENT_REFRESH_REQUIRED))):this.setDirty(n.isDirty);this._incrementVersion();i&&this._fireEvent(d.EVENT_CHANGED,this,{change:"queryDefinition"})},t.prototype.reset=function(n,t){this.queryResultsModel=null;this._workItemIdToIndices={};this.invalidateResults();this.update(n);t||this._fireEvent(d.EVENT_REFRESH_REQUIRED)},t.prototype.getResultsCount=function(){return this._hasResults()?this.queryResultsModel.targetIds.length:0},t.prototype.setColumns=function(n){var i,u,t,f;if(this.queryResultsModel){if(n=n||[],u=this.queryResultsModel.columns||[],n.length!==u.length)i=!0;else for(t=0,f=n.length;t<f;t++)if(n[t]!==null&&r.ignoreCaseComparer(n[t].name,u[t].name)!==0){i=!0;break}this.queryResultsModel.columns=n;i&&(this._incrementVersion(),this.setDirty(!0),this._fireEvent(d.EVENT_CHANGED,this,{change:"columns",oldColumns:u,newColumns:n}))}return i},t.prototype.setSortColumns=function(n){var i,u,t,f;if(this.queryResultsModel){if(n=n||[],u=this.queryResultsModel.sortColumns||[],n.length!==u.length)i=!0;else for(t=0,f=n.length;t<f;t++){if(r.ignoreCaseComparer(n[t].name,u[t].name)!==0){i=!0;break}if(Boolean(n[t].descending)!==Boolean(u[t].descending)){i=!0;break}}this.queryResultsModel.sortColumns=n;i&&(this._incrementVersion(),this.setDirty(!0),this._fireEvent(d.EVENT_CHANGED,this,{change:"sortColumns",oldColumns:u,newColumns:n}))}return i},t.prototype.setColumnWidth=function(n,t){var i=[];this.queryResultsModel&&this.queryResultsModel.columns&&($.each(this.queryResultsModel.columns,function(u,f){r.ignoreCaseComparer(n,f.name)===0&&(f.width=Math.ceil(t));i[u]=f.name+";"+Math.ceil(f.width)}),!this.options.skipPersistingColumnResize&&this.queryDefinition&&this.queryDefinition.id&&!r.isEmptyGuid(this.queryDefinition.id)&&this.project.beginUpdateColumnOptions(this.queryDefinition.id,i,null,this.options.errorCallback));this._incrementVersion()},t.prototype.beginSave=function(n,t){var i=this,f=function(){var r=i.queryResultsModel.error;r&&r.message?e.handleError(r,t,i):(n&&n(),i.queryDefinition.tempQueryId=null,a.PerfScenarioManager.endScenario(p.WITPerformanceScenario.QUERIESHUB_TRIAGEVIEW_SAVEEXISTINGQUERY),u.logTracePoint("QueryResultGrid.saveQuery.complete"),y.recordBoardFieldUsageInQueryFilters(i.queryDefinition.queryText,p.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_CREATE_QUERY))};this.getQueryText().then(function(n){if(i._queriesHubContext){i.queryDefinition.setQuery(n);var u={wiql:i.queryDefinition.queryText,path:i.queryDefinition.storedPath,name:i.queryDefinition.name};!i.queryDefinition.id||r.isEmptyGuid(i.queryDefinition.id)||l.QueryDefinition.isSearchResults(i.queryDefinition)||l.QueryDefinition.isCustomWiqlQuery(i.queryDefinition)?(a.PerfScenarioManager.abortScenario(p.WITPerformanceScenario.QUERIESHUB_TRIAGEVIEW_SAVEEXISTINGQUERY),u.name="",b.showDialog(i._queriesHubContext,w.QuerySaveDialogMode.NewQuery,u,i.queryDefinition.parentPath,function(n){i._queriesHubContext.stores.queryResultsProviderStore.clear();i._queriesHubContext.navigationActionsCreator.navigateToQueryPreservingSupportedState(n.id,!1)})):(u.id=i.queryDefinition.id,i._queriesHubContext.actionsCreator.updateQuery(u).then(function(n){var t=new l.QueryDefinition(i.project,n);i.update(t,null,!1);f()},t))}},function(n){n&&e.handleError(n,t,i);i.update(i.queryDefinition,n)})},t.prototype.getWorkItemIdAtDataIndex=function(n){if(n>=0&&this._hasResults()&&this.queryResultsModel.targetIds&&this.queryResultsModel.targetIds.length>n)return this.queryResultsModel.targetIds[n]},t.prototype._hasResults=function(){return this.resultsValid&&this.queryResultsModel},t.prototype.updateTempWorkItemId=function(){},t.EVENT_QUERY_RESULTS_MODEL_CHANGED="query-results-model-changed",t._providerCache=null,t._specialProviders=null,t}(d);t.QueryResultsProvider=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.project=t.project,r}return __extends(t,n),t.supports=function(n){return l.QueryDefinition.isSearchResults(n)},t.prototype.newSearch=function(n){this.searchText=n;this.searchDone=!1;this.invalidateResults();this._incrementVersion()},t.prototype.wiqlUpdateNeeded=function(){return!0},t.prototype.getTitle=function(){return this.searchText?r.format("{0}: {1}",this.queryDefinition.name,this.searchText):n.prototype.getTitle.call(this)},t.prototype._beginQuery=function(t,i,r){var u=this;this.searchText?this.searchDone&&this.originalQuery?n.prototype._beginQuery.call(this,t,i,r):this.project.beginSearch(this.searchText,function(n){u.searchDone=!0;$.isFunction(t)&&t.call(u,n)},i):$.isFunction(t)&&t.call(this,{columns:[],pageColumns:[],sortColumns:[],sourceIds:[],targetIds:[]})},t.prototype._updateModel=function(t){n.prototype._updateModel.call(this,t,!0)},t}(g);t.SearchResultsProvider=nt;g.registerSpecialProvider(nt)});

define("WorkItemTracking/Scripts/Controls/QueryResultCSVImporter",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Identities/Picker/Services","VSS/Service","VSS/Utils/String","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.QueryResultCSVImporter=void 0;var c=function(){function n(n,t,f){this._store=n;this._projectName=t;this._updatePanelPercentComplete=f;this._requiredHeaders=[];this.c_lineFeedChar="\n";this.c_carriageReturnChar="\r";this.c_maxWorkItemnsAllowed=1e3;this._percentComplete=0;this._lastUpdatePercentComplete=0;this._disposed=!1;this._requiredHeaders=[i.CoreFieldRefNames.Title,i.CoreFieldRefNames.WorkItemType];this._requiredHeadersMap={};this._workItemTypesMap={};this._identityService=u.VssConnection.getConnection().getService(r.IdentityService)}return n.updateCSVImportData=function(n,t,i){var f,u,r;if(!(t>=0))for(n.idsMap[i]=n.idsMap[t],delete n.idsMap[t],f=n.targetIds,u=n.sourceIds,r=0;r<u.length;r++)u[r]===t&&(u[r]=i),f[r]===t&&(f[r]=i)},n.prototype.importCSVFile=function(n){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(r){switch(r.label){case 0:return(this._resetPercentComplete(),!(Object.keys(this._requiredHeadersMap).length===0))?[3,2]:[4,this._populateHeaders()];case 1:r.sent();r.label=2;case 2:return(Object.keys(this._workItemTypesMap).length===0)?[4,this._populateWorkItemTypesMap()]:[3,4];case 3:r.sent();r.label=4;case 4:return(t=this._parseCSVFile(n),this._trimContents(t),this._validateHeaders(t),this._validateRequiredFields(t),i=this._getCSVImportData(t),!i.isTreeQuery)?[3,6]:[4,this._beginGetLinkTypes()];case 5:r.sent();r.label=6;case 6:return[4,this._loadWorkItemsAndSetFieldValues(i)];case 7:return r.sent(),[2,i]}})})},n.prototype._beginGetLinkTypes=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(){return[2,new Promise(function(t,i){n._store.beginGetLinkTypes(t,function(n){i({message:n.message,errorType:"beginGetLinkTypes"})})})]})})},n.prototype._populateHeaders=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){switch(t.label){case 0:return[4,this._store.beginGetFields()];case 1:return t.sent(),this._requiredHeaders.forEach(function(t){var i=n._store.getFieldDefinition(t).name,r=i.toLocaleLowerCase();n._requiredHeadersMap[r]=i}),this._idHeader=this._store.getFieldDefinition(i.CoreFieldRefNames.Id).name,this._workItemTypeHeader=this._store.getFieldDefinition(i.CoreFieldRefNames.WorkItemType).name,[2]}})})},n.prototype._populateWorkItemTypesMap=function(){return __awaiter(this,void 0,void 0,function(){var i,n,r,u,t=this;return __generator(this,function(f){switch(f.label){case 0:return i=new Promise(function(n,i){t._store.beginGetProject(t._projectName,n,function(n){i({message:n.message,errorType:"beginGetProject"})})}),[4,i];case 1:return n=f.sent(),r=new Promise(function(t,i){n.beginGetWorkItemTypes(n.workItemTypeNames,t,function(n){i({message:n.message,errorType:"beginGetWorkItemTypes"})})}),[4,r];case 2:return u=f.sent(),u.forEach(function(n){t._workItemTypesMap[n.name.toLocaleLowerCase()]=n}),[2]}})})},n.prototype.dispose=function(){this._disposed=!0},n.prototype._updatePercentComplete=function(n,t,i){this._disposed||(this._percentComplete=Math.min(this._percentComplete+n*t,i),this._percentComplete-this._lastUpdatePercentComplete>=.01&&(this._lastUpdatePercentComplete=this._percentComplete,this._updatePanelPercentComplete(this._percentComplete)))},n.prototype._resetPercentComplete=function(){this._percentComplete=0;this._lastUpdatePercentComplete=0;this._updatePanelPercentComplete(0)},n.prototype._parseCSVFile=function(n){var t,c;if(n.length===0)throw s.ImporCsvEmptyDatasetError;n.slice(-1)!==this.c_lineFeedChar&&(n+=this.c_lineFeedChar);var i=[],u=[],r=!1,e=!1,h="";for(t=0;t<n.length;t++){var o=n[t],v=o===this.c_lineFeedChar,l=o===this.c_carriageReturnChar&&t+1<n.length&&n[t+1]===this.c_lineFeedChar,a=v||l;if((o!==","||r)&&(o!==","||!r||e))if(a&&!r||a&&r&&!e){if(h!==""&&(u.push(h),h=""),i.length>0&&i[0].length<u.length)throw f.format(s.ImporCsvExtraFieldsFoundError,i.length+1,i[0].length,u.length);else if(i.length>0&&i[0].length>u.length)for(c=u.length;c<i[0].length;c++)u.push("");l&&t++;i.push(u);u=[];r=!1;e=!1}else if(o!=='"'||r)if(o==='"'&&r&&e&&t+1<n.length&&n[t+1]==='"')h+='"',t++;else if(o==='"'&&r&&e&&t+1<n.length&&n[t+1]!=='"'){if(r=!1,e=!1,n[t+1]!==","&&n[t+1]!==this.c_lineFeedChar&&!(n[t+1]===this.c_carriageReturnChar&&t+2<n.length&&n[t+2]===this.c_lineFeedChar))throw f.format(s.ImporCsvDoubleQuoteTerminatedEarlyError,i.length+1,u.length+1);}else if(o==='"'&&r&&!e)throw f.format(s.ImporCsvDoubleQuoteNotEnclosedError,i.length+1,u.length+1);else r=!0,h+=o;else r=!0,e=!0;else u.push(h),h="",r=!1,e=!1}if(e)throw f.format(s.ImporCsvNoTerminatingDoubleQuotesError,i.length+1,u.length+1);if(i.length>this.c_maxWorkItemnsAllowed+1)throw f.format(s.ImporCsvMaxRowsExceededError,this.c_maxWorkItemnsAllowed);return i},n.prototype._trimContents=function(n){for(var i,r=-1,t=n.length-1;t>0&&this._isRowEmpty(n[t]);t--)r=t;for(r>0&&n.splice(r),i=-1,t=n[0].length-1;t>0&&this._isColumnEmpty(t,n);t--)i=t;i>0&&n.forEach(function(n){return n.splice(i)})},n.prototype._validateHeaders=function(n){var v=this,e,o,h,c,l,a;if(n.length===0)throw s.ImportEmptyDataSet;var t=[],r=n[0]=n[0].map(function(n){return n.trim()}),u=this._getIndicesMap(r,this._requiredHeadersMap),i=this._getEmptyColumnHeaderIndices(r);if(i.length>0&&(e=i.filter(function(t){return v._isColumnEmpty(t,n)}),i=i.filter(function(t){return!v._isColumnEmpty(t,n)}),i.length>0&&t.push(f.format(s.ImportEmptyColumnHeaders,i.map(function(n){return n+1}).join(", "))),e.length>0&&t.push(f.format(s.ImportEmptyColumn,e.map(function(n){return n+1}).join(", ")))),o=this._getInvalidColumnHeaders(r),o.length>0&&t.push(f.format(s.ImportInvalidColumnHeaders,o.join(", "))),h=this._getMissingRequiredHeaders(u),h.length>0&&t.push(f.format(s.ImportMissingRequiredHeaders,h.join(", "))),c=this._getDuplicateNonRequiredHeaders(r),c.length>0&&t.push(f.format(s.ImportDuplicateNonRequiredHeaders,c.join(", "))),l=this._getDuplicateRequiredHeaders(u),l.length>0&&t.push(f.format(s.ImportDuplicateRequiredHeaders,l.join(", "))),a=this._getNonConsecutiveTreeHeaderIndices(u,r),a.length>0&&t.push(f.format(s.ImportNonConsecutiveTreeHeader,a.map(function(n){return n+1}).join(", "))),t.length>0)throw"".concat(s.ImportErrorMessageTitle,"\n").concat(t.join("\n"));},n.prototype._getIndicesMap=function(n,t){var r=this,i={},u=Object.keys(t);return u.forEach(function(n){i[n]=[]}),n.forEach(function(n,t){(n=r._getFieldNameByColumnName(n).toLocaleLowerCase(),i[n])&&i[n].push(t)}),i},n.prototype._getEmptyColumnHeaderIndices=function(n){var t=[];return n.forEach(function(n,i){n.length===0&&t.push(i)}),t},n.prototype._isColumnEmpty=function(n,t){for(var r,i=0;i<t.length;i++)if(r=t[i][n],r&&r.length>0)return!1;return!0},n.prototype._isRowEmpty=function(n){for(var t=0;t<n.length;t++)if(n[t]&&n[t].length>0)return!1;return!0},n.prototype._getInvalidColumnHeaders=function(n){var i=this,r=[],t={},u;return n.forEach(function(n){var r=i._getFieldNameByColumnName(n).toLocaleLowerCase();r.length>0&&!t[r]&&(t[r]=n)}),u=Object.keys(t),u.forEach(function(n){var f=i._store.getFieldDefinition(n),u;f||(u=i._getFieldNameByColumnName(t[n]),r.push(u))}),r},n.prototype._getMissingRequiredHeaders=function(n){var t=this,i=Object.keys(n).filter(function(t){return n[t].length===0});return i.map(function(n){return t._requiredHeadersMap[n]})},n.prototype._getDuplicateNonRequiredHeaders=function(n){var i=this,t={},r;return n.forEach(function(n){var u=i._getFieldNameByColumnName(n),r=u.toLocaleLowerCase();r.length>0&&!i._requiredHeadersMap[r]&&(t[r]=u)}),r=this._getIndicesMap(n,t),this._getDuplicateHeaders(r,t)},n.prototype._getDuplicateRequiredHeaders=function(n){var t=this._getDuplicateHeaders(n,this._requiredHeadersMap);return t.length>1?t:[]},n.prototype._getDuplicateHeaders=function(n,t){var i=[],r=Object.keys(n);return r.forEach(function(r){var u=n[r];u.length>1&&i.push(t[r])}),i},n.prototype._getNonConsecutiveTreeHeaderIndices=function(n,t){for(var r,i,o,s,f=Object.keys(n).map(function(t){return n[t]}),e=[],u=0;u<f.length;u++)if(r=f[u],r.length!==1)for(i=0;i<r.length;i++)o=r[i],s=this._getNumberSuffix(t[o]),(s!==i+1||i>0&&r[i]-1!==r[i-1])&&e.concat(r.slice());return e},n.prototype._getFieldNameByColumnName=function(n){var r=this._store.getFieldDefinition(n),i,t;return r?n:(i=n,t=n.split(" "),t.length>0&&Number(t[t.length-1])&&(i=t.slice(0,-1).join(" ")),i)},n.prototype._getNumberSuffix=function(n){var i=-1,t=n.split(" ");return t.length>0&&Number(t[t.length-1])&&(i=Number(t[t.length-1])),i},n.prototype._isTreeViewImport=function(n){var t=Object.keys(n).map(function(t){return n[t]}).filter(function(n){return n.length>1});return t.length>0},n.prototype._validateRequiredFields=function(n){var e=this,u,v;if(n.length!==0){var t=[],o=this._workItemTypesMap,h=n[0],i=this._getHeaderIndex(h,this._idHeader),c=this._getIndicesMap(h,this._requiredHeadersMap),r={},l=1,y=function(u){var v=n[u].map(function(n){return n.trim()}),h=i>=0&&v[i].length>0?Number(v[i]):null,y;h&&h!==0?(r[h]=r[h]||[],r[h].push(u)):h&&h===0?t.push(f.format(s.ImporCsvInvalidWorkItemIdError,a._idHeader,u+1,i+1)):isNaN(h)&&t.push(f.format(s.ImporCsvNonIntegerWorkItemIdError,a._idHeader,u+1,i+1));y=Object.keys(c);y.forEach(function(n){var i=c[n],r=0,h=0,a=null;i.forEach(function(n,t){v[n].length>0&&(h=t,r++,a=v[n])});r===0?t.push(f.format(s.ImporCsvEmptyFieldValuesError,u+1,i.map(function(n){return n+1}).join(", "))):r>1?t.push(f.format(s.ImporCsvExcessFieldValuesError,u+1,i.map(function(n){return n+1}).join(", "))):r===1&&i.length>1?h>l?t.push(f.format(s.ImporCsvIncorrectTreeStructureError,u+1,i.map(function(n){return n+1}).join(", "))):l=h+1:r===1&&n===e._workItemTypeHeader.toLocaleLowerCase()&&Object.keys(o).length>0&&(o[a.toLocaleLowerCase()]||t.push(f.format(s.ImporCsvInvalidFieldValueError,a,e._workItemTypeHeader,u+1,i.map(function(n){return n+1}).join(", "))))})},a=this;for(u=1;u<n.length;u++)y(u);if(v=Object.keys(r),v.forEach(function(n){var i=r[n];i.length>1&&t.push(f.format(s.ImporCsvDuplicateWorkItemIdColumnError,e._idHeader,n,i.map(function(n){return n+1}).join(", ")))}),t.length>0)throw f.format(s.ImporCsvErrorsFound,t.join("\n"));}},n.prototype._getHeaderIndex=function(n,t){var i,r;for(t=t.toLocaleLowerCase(),i=0;i<n.length;i++)if(r=n[i].toLocaleLowerCase(),r===t)return i;return-1},n.prototype._getFieldDefinitionByColumnName=function(n){var t=this._getFieldNameByColumnName(n);return this._store.getFieldDefinition(t)},n.prototype._getCSVImportData=function(n){var y=this,t={columns:[],idsMap:{},fieldValues:[],targetIds:[],sourceIds:[],isTreeQuery:!1},s,l,r,o,u;if(n.length===0)return t;t.columns=n[0].slice();s=this._getIndicesMap(t.columns,this._requiredHeadersMap);l=Object.keys(s).map(function(n){return s[n]}).filter(function(n){return n.length>1});t.fieldValues=new Array(n.length-1);t.sourceIds=new Array(n.length-1);t.targetIds=new Array(n.length-1);t.isTreeQuery=this._isTreeViewImport(s);var h=l.length>0?l[0]:[],f=this._getHeaderIndex(t.columns,this._idHeader),v={},p=-1;for(r=h.length-1;r>=0;r--)u=h[r],r>0?t.columns.splice(u,1):t.columns[u]=this._getFieldNameByColumnName(t.columns[u]);for(t.columns=t.columns.map(function(n){return y._getFieldDefinitionByColumnName(n).referenceName}),r=1;r<n.length;r++){var e=t.fieldValues[r-1]=n[r].slice().map(function(n){return n.trim()}),c=0,a=f>=0&&e[f].length>0?Number(e[f]):p--;for(o=h.length-1;o>=0;o--)u=h[o],e[u].length===0?e.splice(u,1):c=o;f<0&&e.unshift("");v[c]=a;t.targetIds[r-1]=a;t.idsMap[a]=r-1;t.sourceIds[r-1]=c===0?0:v[c-1]}return f<0&&t.columns.unshift(i.CoreFieldRefNames.Id),t},n.prototype._loadWorkItemsAndSetFieldValues=function(n){return __awaiter(this,void 0,void 0,function(){var l,a,v,r,g,p,t,nt,tt,u,it,rt,ut,w,ft,b,y,k,d,c,et,ot=this;return __generator(this,function(st){switch(st.label){case 0:for(l=n.targetIds,a=n.columns,v=n.fieldValues,r=n.idsMap,g=n.sourceIds,p=this._workItemTypesMap,t=o.WorkItemManager.get(this._store),nt=a.indexOf(i.CoreFieldRefNames.Id),tt=a.indexOf(i.CoreFieldRefNames.WorkItemType),u={},t.resetCache(),it=function(n,t,i,u){for(var f,o,s,e=0;e<n.length;e++)f=n[e],f<0&&(o=v[r[f]],u.push(o[tt])),s=f>0?i:t,s.push(f)},rt=function(n){return new Promise(function(i,u){t.beginGetWorkItems(n,function(n){ot._disposed&&i();n.forEach(function(n){var t=n.id,i=v[r[t]];try{w(n,i,!0)}catch(f){u(f)}});i()},function(n){return u({message:n.message,errorType:"beginGetWorkItems"})})})},ut=function(n,i){for(var u=0;u<i.length;u++){var f=n[u],e=i[u],o=p[e.toLocaleLowerCase()],s=v[r[f]],h={projectId:null,fields:null,revisions:null,tags:null,files:null,referencedPersons:null,tempId:f,loadTime:null,currentExtensions:null,referencedNodes:null},c=t.createWorkItem(o,h);w(c,s)}},w=function(n,t,r){r===void 0&&(r=!1);t&&t.length>0&&t.forEach(function(t,e){var c,o,l,v,h,y,w;if(e!==nt&&(c=a[e],o=n.getField(c),o))if(o.fieldDefinition.isIdentity)l=o.getIdentityValue()?o.getIdentityValue().displayName:"",f.equals(l,t,!0)||(v={fireIdentityEagerValidation:!0},o.setValue(t,v),h=t.toLocaleLowerCase(),u[h]?u[h].push(o):u[h]=[o]);else if(o.fieldDefinition.id===i.CoreField.WorkItemType)r?(y=p[t.toLocaleLowerCase()],n.changeWorkItemType(y)):o.setValue(t);else{if(o.isReadOnly()&&(w=o.getValue(!0),!f.equals(w,t,!0)))throw f.format(s.ImporCsvReadonlyFieldModifiedError,o.fieldDefinition.name);o.setValue(t)}});ot._updatePercentComplete(1/l.length,1,1)},ft=function(n){for(var u,f,o,i=0;i<n.length;i++)u=g[r[n[i]]],u!==0&&(f=t.getWorkItem(n[i]),o=t.getWorkItem(u),u<0&&f.id>0&&o?o.addLink(h.WorkItemLink.create(o,e.LinkTypeName.Child_Link_Name,f.id,"")):f.addLink(h.WorkItemLink.create(f,e.LinkTypeName.Parent_Link_Name,u,"")))},b=[],y=[],k=[],d=[],it(l,b,y,k),c=0;c<y.length;c+=e.PageSizes.QUERY){if(this._disposed)return[2];et=y.slice(c,c+e.PageSizes.QUERY);d.push(rt(et))}return ut(b,k),[4,Promise.all(d)];case 1:return st.sent(),[4,this._autoResolveIdentityFields(u)];case 2:return(st.sent(),this._disposed)?[2]:(ft(l),[2])}})})},n.prototype._autoResolveIdentityFields=function(n){return __awaiter(this,void 0,void 0,function(){var i,r,u,t,f;return __generator(this,function(e){switch(e.label){case 0:if(i=Object.keys(n),i.length==0)return[2,Promise.resolve()];for(r=50,u=[],t=0;t<i.length;t+=r)f=i.slice(t,t+r),u.push(this._beginResolveIdentityFields(n,f));return[4,Promise.all(u)];case 1:return e.sent(),[2,Promise.resolve()]}})})},n.prototype._beginResolveIdentityFields=function(n,t){return __awaiter(this,void 0,void 0,function(){var i,r,u,f,e,o=this;return __generator(this,function(){return i={},r=t.join(";"),u={Source:!0,IMS:!0},f={User:!0,Group:!0},e=new Promise(function(t,e){var s=o._identityService.getIdentities(r,u,f),h;s?(h=Object.keys(s).map(function(n){return s[n]}),Promise.all(h).then(function(r){r.forEach(function(n){if(n.identities.length===1){var t=n.queryToken.toLocaleLowerCase();i[t]=n.identities[0].displayName}});Object.keys(i).forEach(function(t){n[t].forEach(function(n){return n.setValue(i[t])})});t()}).catch(e)):t()}),[2,e]})})},n}();t.QueryResultCSVImporter=c});

define("WorkItemTracking/Scripts/Controls/ImportWorkItemsProvider",["require","exports","WorkItemTracking/Scripts/Controls/WorkItemsProvider","WorkItemTracking/Scripts/OM/QueryItem","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/TFS.WorkItemTracking","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/Controls/QueryResultCSVImporter","VSS/Diag"],function(n,t,i,r,u,f,e,o,s,h){function l(n){return n&&n instanceof c&&n.queryDefinition&&r.QueryDefinition.isImportQueryDefinition(n.queryDefinition)}Object.defineProperty(t,"__esModule",{value:!0});t.ImportWorkItemsProvider=t.isImportWorkItemsProvider=void 0;t.isImportWorkItemsProvider=l;var c=function(n){function t(t,i,r){var u=__construct(this,n,[t,i,r]);for(var s in u)u.hasOwnProperty(s)&&(this[s]=u[s]);return u._workItemStore=e.ProjectCollection.getConnection(o.TfsContext.getDefault()).getService(f.WorkItemStore),u}return __extends(t,n),t.supports=function(n){return r.QueryDefinition.isImportQueryDefinition(n)},t.prototype.beginGetResults=function(n,t,i){$.isFunction(n)&&n.call(this,__assign(__assign({},this.queryResultsModel),{queryRan:i,isCachedData:!0}))},t.prototype.import=function(n){this._workItemsImportData=n;this.queryResultsModel=this.createQueryResultModel()},t.prototype.isImported=function(){return!!this.queryResultsModel},t.prototype.getWorkItemsImportData=function(){return this._workItemsImportData},t.prototype.createQueryResultModel=function(){var r=this,f=[u.CoreFieldRefNames.Rev,u.CoreFieldRefNames.TeamProject],e=[u.CoreFieldRefNames.AssignedTo,u.CoreFieldRefNames.State,u.CoreFieldRefNames.Tags],i=this._workItemsImportData.columns,n=f.concat(i),t;return e.forEach(function(t){n.indexOf(t)==-1&&n.push(t)}),t=[],i.forEach(function(n){var i=r._workItemStore.getFieldDefinition(n);t.push({name:n,text:i.name,fieldId:i.id,isIdentity:i.isIdentity,width:150,fieldType:i.type})}),{targetIds:this._workItemsImportData.targetIds,isLinkQuery:this._workItemsImportData.isTreeQuery,isTreeQuery:this._workItemsImportData.isTreeQuery,pageColumns:n,queryRan:!1,wiql:null,columns:t,sortColumns:[],payload:null,sourceIds:this._workItemsImportData.sourceIds,linkIds:[]}},t.prototype.updateTempWorkItemId=function(n,t){s.QueryResultCSVImporter.updateCSVImportData(this._workItemsImportData,n,t)},t}(i.QueryResultsProvider);t.ImportWorkItemsProvider=c;i.QueryResultsProvider.registerSpecialProvider(c)});

define("WorkItemTracking/Scripts/Queries/QueryUtilities",["require","exports","OfficeFabric/Utilities","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","TFS/WorkItemTracking/Contracts","VSS/Diag","VSS/Navigation/NavigationHistoryService","VSS/Telemetry/Services","VSS/Utils/File","VSS/Utils/String","WorkItemTracking/Scripts/ActionUrls","WorkItemTracking/Scripts/Controls/WorkItemsProvider","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/OM/QueryItem","WorkItemTracking/Scripts/Queries/Models/Constants","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/PerfScenarioManager","../Controls/ImportWorkItemsProvider"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){Object.defineProperty(t,"__esModule",{value:!0});t.QueryUtilities=void 0;var d=function(){function n(){}return n.getContributedQueryMenuItemContext=function(n){return{id:n.id,name:n.name,isPublic:n.isPublic,wiql:n.wiql,path:n.path}},n.getContributedQueryMenuItemContextFromQueryDefinition=function(n){return{id:n.id,name:n.name,isPublic:!n.personal,wiql:n.queryText,path:n.storedPath}},n.convertQueryDefinintionToQueryItem=function(n){return{id:n.id,name:n.name,isPublic:!n.personal,wiql:n.queryText,path:n.storedPath}},n.updatedQueryDefinitionFromQueryItem=function(n,t){n.id=t.id;n.name=t.name;n.parentPath=h.getDirectoryName(t.path);n.personal=!t.isPublic;n.queryText=t.wiql;n.queryType=f.QueryType[t.queryType];n.storedPath=t.path},n.getChevronIconClassName=function(n){return"bowtie-icon"+(n===p.ChevronIconState.Expanded?" bowtie-chevron-right expanded":" bowtie-chevron-right")},n.getQueryItemExpandState=function(n){return n.expanding?p.ChevronIconState.Expanding:n.expanded?p.ChevronIconState.Expanded:p.ChevronIconState.Collapsed},n.getQueryIconClassName=function(n,t){return n?t?"query-type-icon bowtie-icon bowtie-status-error-outline":this.isRecycleBinQuery(n.id||n.name)?"query-type-icon bowtie-icon bowtie-recycle-bin":n.queryType?this.getQueryTypeIconClassName(f.QueryType[n.queryType]):"query-type-icon query-type-empty-icon bowtie-icon query-type-icon bowtie-icon bowtie-view-list":""},n.getQueryTypeIconClassName=function(n,t){t===void 0&&(t=!0);switch(n){case f.QueryType.Tree:return i.css("bowtie-view-list-tree",t&&"query-type-icon bowtie-icon");case f.QueryType.OneHop:return i.css("bowtie-view-list-group",t&&"query-type-icon bowtie-icon");case f.QueryType.Flat:return i.css("bowtie-view-list",t&&"query-type-icon bowtie-icon");default:return i.css("bowtie-status-error-outline",t&&"query-type-icon bowtie-icon")}},n.getQueryTypeShortText=function(n,t){if(t)return w.InvalidQuery;switch(n){case f.QueryType.Tree:return w.TreeLinksQuery;case f.QueryType.OneHop:return w.DirectLinksQuery;default:return w.FlatQuery}},n.getParentQueryItem=function(n,t){if(!n||!n.path)return null;var i=h.getDirectoryName(n.path)||n.path;return t.getItem(i)},n.getEmptyQueryItemId=function(n){return"".concat(n,"-EmptyContent")},n.isEmptyFavoriteGroup=function(n){var t=n.favorites;return t.length===0||t.length===1&&t[0].id.indexOf("EmptyContent")!==-1},n.getNoSubfolderQueryItemId=function(n){return"".concat(n,"-NoSubfolders")},n.getNoSubfolderContentItem=function(t){var i=w.NoQueryFolderChildren;return{id:n.getNoSubfolderQueryItemId(t.id),name:i,path:"".concat(t.path,"/").concat(i),isEmptyFolderContext:!0,isNoSubfolderContext:!0,isChildrenLoaded:!1,depth:0,expanded:!1,expanding:!1,children:[],clauses:null,columns:[],createdBy:null,createdDate:null,filterOptions:0,hasChildren:!1,isDeleted:!1,isFolder:!1,isInvalidSyntax:!1,isPublic:!0,lastModifiedBy:null,lastModifiedDate:null,linkClauses:null,queryType:f.QueryType.Flat,queryRecursionOption:null,sortColumns:[],sourceClauses:null,targetClauses:null,wiql:"",_links:null,url:"",lastExecutedBy:null,lastExecutedDate:null}},n.reparentToFolderPath=function(n,t){return t+"/"+h.getFileName(n)},n.convertPathForStore=function(n){return n?n.replace("\\","/").replace(/[\\\/]+/g,"/").replace(/\/+$/,"").toLocaleLowerCase():n},n.getEllipsisPath=function(n,t){var u,i,r,h,c,f,o,s;if(!n||(u=t||90,n.length<=u))return n;if(i=n.split("/"),r=void 0,e.Debug.assert(i.length>1,"Path is expected to have at least two segments."),i.length===1)r="".concat(n.slice(0,u),"...");else if(i.length===2)h="".concat(i[0],"/"),r="".concat(h).concat(i[1].slice(0,u-h.length),"...");else{for(c=".../",r="".concat(i[0],"/").concat(c),f=n.length-u,o=1;o<i.length-1;o++)f>0?f-=i[o].length+1:r+="".concat(i[o],"/");s=i[i.length-1];r+=f>0?"".concat(s.slice(0,s.length-f),"..."):s}return r},n.sortFavorites=function(n){return n.sort(function(n,t){var i=c.equals(n.parentId,r.QueriesConstants.LastVisitedQueryGroupKey,!0),u=c.equals(t.parentId,r.QueriesConstants.LastVisitedQueryGroupKey,!0),f=c.equals(n.parentId,r.QueriesConstants.MyFavoritesGroupKey,!0),e=c.equals(t.parentId,r.QueriesConstants.MyFavoritesGroupKey,!0);return i&&!u?-1:!i&&u?1:f&&!e?-1:!f&&e?1:c.ignoreCaseComparer(n.parentName,t.parentName)||c.ignoreCaseComparer(n.artifactName,t.artifactName)})},n.getQueryItemsFromFavorites=function(n,t){return n.map(function(n,i){return __assign(__assign({},t.getItem(n.artifactId)),{depth:1,expanded:!1,expanding:!1,itemIndex:i,groupId:n.parentId})})},n.mergeQueryItems=function(n,t){for(var u,i={},r=0,f=t;r<f.length;r++)u=f[r],i[u.path]=u;return n.filter(function(n){return n.fullName in i}).map(function(n){return __assign(__assign({},i[n.fullName]),{depth:n.depth,expanded:n.expanded,expanding:n.expanding})})},n.getPivotWindowTitle=function(){return w.Queries},n.isQueriesHubPivot=function(n){return n===p.QueriesHubConstants.FavoritesPageAction||n===p.QueriesHubConstants.AllQueriesPageAction},n.isQueriesFolderPivot=function(n){return n===p.QueriesHubConstants.QueryFoldersPageAction},n.isSpecialQueryId=function(n){if(!n)return!1;var t=n.toUpperCase();return t===y.QueryDefinition.SEARCH_RESULTS_ID||t===y.QueryDefinition.CUSTOM_WIQL_QUERY_ID||t===y.QueryDefinition.RECYCLE_BIN_QUERY_ID||t===w.RecycleBin.toUpperCase()||t===y.QueryDefinition.IMPORT_DATA_ID},n.isRecycleBinQuery=function(n){if(!n)return!1;var t=n.toUpperCase();return t===y.QueryDefinition.RECYCLE_BIN_QUERY_ID||t===w.RecycleBin.toUpperCase()},n.isCustomQuery=function(n){return n?n.toUpperCase()===y.QueryDefinition.CUSTOM_WIQL_QUERY_ID:!1},n.isSearchTextQuery=function(n){return n?n.toUpperCase()===y.QueryDefinition.SEARCH_RESULTS_ID:!1},n.isNewQuery=function(n){return n&&c.isEmptyGuid(n.id)},n.getViewStateFromQueryResultsProvider=function(t,i){var r=t&&t.stores.queryResultsProviderStore.getValue(),u,o,s,f,e;return!r||!r.queryDefinition?{}:(u={},o=r.getUniqueId(),u[l.ActionParameters.VIEW]=r.isDirty()?l.ActionUrl.ACTION_QUERY_EDIT:l.ActionUrl.ACTION_QUERY,r instanceof a.SearchResultsProvider&&(s=r,u[l.ActionParameters.SEARCHTEXT]=s.searchText),n.isNewQuery(r.queryDefinition)?(u[l.ActionParameters.NEW_QUERY]=!0,f=r.queryDefinition.parentId,!f&&r.queryDefinition.parentPath&&(e=t.stores.queryHierarchyItemStore.getItem(r.queryDefinition.parentPath),f=e&&e.id),u[l.ActionParameters.PARENTID]=f):k.isImportWorkItemsProvider(r)?u[l.ActionParameters.IMPORTDATA]="csv":u[r.isCustomQuery()?l.ActionParameters.TEMPQUERYID:l.ActionParameters.ID]=o,i&&(u[l.ActionParameters.FULLSCREEN]=i.viewOptions.getViewOption(l.ActionParameters.FULLSCREEN)),u)},n.formatGroupKey=function(n,t,i){return t?"".concat(i,"_").concat(n,"_").concat(t):n},n.createUrlForQuery=function(n){return"".concat(u.TfsContext.getDefault().getPublicActionUrl("",p.QueriesHubConstants.ControllerName),"/query/").concat(n)},n.createUrlForQueryFolderById=function(n){return"".concat(u.TfsContext.getDefault().getPublicActionUrl("",p.QueriesHubConstants.ControllerName),"/").concat(p.QueriesHubConstants.QueryFoldersPageAction,"/").concat(n)},n.createUrlForQueryFolderByPath=function(n){return"".concat(u.TfsContext.getDefault().getPublicActionUrl("",p.QueriesHubConstants.ControllerName),"/").concat(p.QueriesHubConstants.QueryFoldersPageAction,"/?path=").concat(n)},n.getQueryParametersFromViewOptions=function(n){var t=o.getNavigationHistoryService().getState();return{id:t[l.ActionParameters.VIEW]!==p.QueriesHubConstants.QueryFoldersPageAction?n.viewOptions.getViewOption(l.ActionParameters.ID):null,wiql:n.viewOptions.getViewOption(l.ActionParameters.WIQL),name:n.viewOptions.getViewOption(l.ActionParameters.NAME),path:n.viewOptions.getViewOption(l.ActionParameters.PATH),parentId:n.viewOptions.getViewOption(l.ActionParameters.PARENTID),witd:n.viewOptions.getViewOption(l.ActionParameters.WITD),templateId:n.viewOptions.getViewOption(l.ActionParameters.TEMPLATEID),newQuery:!!n.viewOptions.getViewOption(l.ActionParameters.NEW_QUERY),isVSOpen:!!n.viewOptions.getViewOption(l.ActionParameters.ISVSOPEN),workItemId:n.viewOptions.getViewOption(l.ActionParameters.WORKITEMID),queryContextId:n.viewOptions.getViewOption(l.ActionParameters.CONTEXT),triage:!!n.viewOptions.getViewOption(l.ActionParameters.TRIAGE),tempQueryId:n.viewOptions.getViewOption(l.ActionParameters.TEMPQUERYID),searchText:n.viewOptions.getViewOption(l.ActionParameters.SEARCHTEXT),importData:n.viewOptions.getViewOption(l.ActionParameters.IMPORTDATA)}},n.isTriageViewPivot=function(n){return!!(n.id&&c.isGuid(n.id)||n.tempQueryId||n.path||n.wiql||n.newQuery||n.searchText||n.triage||n.importData)},n.resetQueryPerformanceScenarios=function(){b.PerfScenarioManager.abortScenario(v.WITPerformanceScenario.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS);b.PerfScenarioManager.abortScenario(v.WITPerformanceScenario.QUERIESHUB_QUERIESVIEW_OPENFAVORITESPIVOT);b.PerfScenarioManager.abortScenario(v.WITPerformanceScenario.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM);b.PerfScenarioManager.abortScenario(v.WITPerformanceScenario.QUERIESHUB_QUERIESVIEW_OPENFAVORITESPIVOT);b.PerfScenarioManager.abortScenario(v.WITPerformanceScenario.QUERIESHUB_QUERIESVIEW_OPENALLQUERIESPIVOT)},n.sortQueryFolderItems=function(t){n.sortFolderItems(t,function(n){return n.name},function(n){return n.isFolder})},n.sortFolderItems=function(n,t,i){n.sort(function(n,r){var u=+!!i(r)-+!!i(n);return u?u:c.localeIgnoreCaseComparer(t(n),t(r))})},n.getQueryHubDefaultAction=function(){return p.QueriesHubConstants.DefaultPageAction},n.recordBreadcrumbTelemetry=function(n){n===void 0&&(n=!1);s.publishEvent(new s.TelemetryEventData(v.WITCustomerIntelligenceArea.NEW_QUERIES_EXPERIENCE,v.WITCustomerIntelligenceFeature.NEWQUERYEXPERIENCE_BREADCRUMB_CLICKED,{type:n?"Root":"Children"}),!1)},n.DefaultDebounceWait=200,n}();t.QueryUtilities=d});

define("WorkItemTracking/Scripts/Queries/Actions/ActionsCreator",["require","exports","Favorites/Controls/FavoritesActionsCreator","Favorites/Controls/FavoritesDataProvider","Favorites/RestClient","OfficeFabric/Utilities","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","TFS/WorkItemTracking/BatchRestClient","TFS/WorkItemTracking/Contracts","TFS/WorkItemTracking/RestClient","VSS/Contributions/Services","VSS/Error","VSS/Events/Action","VSS/Resources/VSS.Resources.Platform","VSS/Resources/VSS.Resources.Platform","VSS/Serialization","VSS/Service","VSS/Telemetry/Services","VSS/Utils/Array","VSS/Utils/File","VSS/Utils/String","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Dialogs/WITDialogs","WorkItemTracking/Scripts/OM/QueryItem","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Queries/Models/Constants","WorkItemTracking/Scripts/Queries/Models/Models","WorkItemTracking/Scripts/Queries/QueryUtilities","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/Utils/WitControlMode","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","TfsCommon/Scripts/Favorites/Constants","VSS/Settings/Services","VSS/Utils/Core","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt){Object.defineProperty(t,"__esModule",{value:!0});t.ActionsCreator=void 0;var bt=e.TfsContext.getDefault(),dt="ms.vss-work-web.get-query-data-provider",kt="query-hierarchy-adhoc-queries-promise",gt=function(){function n(n,t,e,h,l,v,y,p){var w=this,b,k;this._actionsHub=n;this._queryHierarchyItemDataProvider=t;this._queryHierarchyDataProvider=e;this._queryFavoriteGroupDataProvider=h;this._querySearchDataProvider=l;this._activeQueryDataProvider=v;this._queryResultsProviderDataProvider=y;this._performSearch=function(n){w._searchQueryItems(n).then(function(n){w._querySearchDataProvider.getSearchStatus()===et.QuerySearchStatus.InProgress&&w._actionsHub.QuerySearchFinished.invoke(n)},function(n){return a.publishErrorToTelemetry(n)})};this._toggleFavoriteGroupMru=function(n,t){return __awaiter(w,void 0,void 0,function(){var r,i,s,u,f,e,h,o;return __generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),[4,this.settingsService.getEntriesAsync(ft.QueriesMruConstants.QueriesSettingsKey,0,ft.QueriesMruConstants.Scope,this._projectId)];case 1:if(r=c.sent(),!(r&&r.value))return[3,3];for(i=r.value[ft.QueriesMruConstants.FavoriteGroupExpandStatesKey],i||(i={}),s=Object.keys(i),u=0,f=s;u<f.length;u++)e=f[u],this._queryFavoriteGroupDataProvider.get(e)||delete i[e];return i[n]=t,[4,this.settingsService.setEntries((o={},o["".concat(ft.QueriesMruConstants.QueriesSettingsKey,"/").concat(ft.QueriesMruConstants.FavoriteGroupExpandStatesKey)]=i,o),0,ft.QueriesMruConstants.Scope,this._projectId)];case 2:return c.sent(),[3,4];case 3:throw new Error("Cannot find favorite groups MRU settings for user.");case 4:return[3,6];case 5:return h=c.sent(),a.publishErrorToTelemetry(h),[3,6];case 6:return[2]}})})};b=o.ProjectCollection.getConnection(bt);this.workItemTrackingClient=b.getHttpClient(c.WorkItemTrackingHttpClient3);this.workItemTrackingBatchClient=b.getHttpClient(s.WorkItemTrackingHttpBatchClient);this.favoriteClient=u.getClient();this.settingsService=yt.getService();this._projectId=b.getWebContext().project.id;this.favoritesDataProvider=new r.FavoritesDataProvider;this.favoritesActionsCreator=new i.FavoritesActionsCreator(this.favoritesDataProvider,p,n.FavoritesActions);this._queryDataProvider=this._getQueryDataProvider();this._isInitializingFavoriteQueries=!1;k=new f.Async;this._debouncedPerformSearch=k.debounce(this._performSearch,ot.QueryUtilities.DefaultDebounceWait);this._debouncedToggleFavoriteGroupMru=k.debounce(this._toggleFavoriteGroupMru,ot.QueryUtilities.DefaultDebounceWait);this._handleToggleFavorite();this._initializeQueryPermissionMetadata();this._initializeAndRunQueryItemFromDataProvider();this._initializeFavoritesCreatorFromDataProvider()}return n.prototype.initializeQuerySearch=function(){this._querySearchDataProvider.getSearchStatus()===et.QuerySearchStatus.Pending&&this.performSearch(this._querySearchDataProvider.getSearchText())},n.prototype.revertAllWorkItemChanges=function(){var n=o.ProjectCollection.getConnection(bt).getService(ht.WorkItemStore),t=ut.WorkItemManager.get(n);t.resetDirtyWorkItems()},n.prototype.revertQueryChanges=function(){var n=this._queryResultsProviderDataProvider.getValue();n.revertEditInfo(!1)},n.prototype.checkAndPromptForUnsavedItems=function(n,t,i,r,u,f,e,s,h){var l=undefined,c=[],p=6,b=o.ProjectCollection.getConnection(bt).getService(ht.WorkItemStore),a=ut.WorkItemManager.get(b),v=this._queryResultsProviderDataProvider.getValue(),w;v&&a&&(!u&&v.isDirty()&&(w=nt.format(st.QueryDirtyDocumentTitleFormat,v.getTitle()),c.push(w)),a.isDirty(!0)&&(c=c.concat(a.getDirtyWorkItemTitles(p))),c.length>0&&(l=this._createPromptMessageWithDirtyItems(e||y.UnsavedChangesWithNames,c,p)));l?Promise.resolve(it.promptMessageDialog(l,f||y.UnsavedChangesMessageTitle,[{id:"leave",text:s||y.UnsavedChangesLeaveButton,reject:!1},{id:"stay",text:h||y.UnsavedChangesStayButton,reject:!0}])).then(function(){t&&t()},function(){i&&i()}):n&&n();r&&r(!!l)},n.prototype._createPromptMessageWithDirtyItems=function(n,t,i){for(var u,r=[],f=0;f<t.length;f++){if(r.length===i-1){r.push(y.UnsavedChangesMore);break}u=t[f];u.length>55&&(u=u.substr(0,52)+"...");r.push(u)}return r.length>0?n+"\n"+r.join("\n"):undefined},n.prototype._queryItemHasSubfolder=function(n){return n&&n.hasChildren&&n.children&&n.children.some(function(n){return n.isFolder})},n.prototype.initializeAllQueries=function(){return __awaiter(this,void 0,void 0,function(){var t,i,u,n,f,e,o,s,r;return __generator(this,function(c){switch(c.label){case 0:if(!(!this._queryHierarchyDataProvider.isLoaded()||!this._queryHierarchyItemDataProvider.areRootFolderItemsLoaded()))return[3,5];ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_GETALLQUERYITEMS_REQUEST,!0);c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.workItemTrackingClient.getQueries(this._projectId,h.QueryExpand.Wiql,1)];case 2:for(t=c.sent(),ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_GETALLQUERYITEMS_REQUEST,!1),this._actionsHub.InitializeQueryHierarchyItem.invoke(t),this._actionsHub.InitializeQueryHierarchy.invoke(t),this._actionsHub.InitializeQueryRootHierarchyItem.invoke(t),i=0,u=t;i<u.length;i++)n=u[i],n.hasChildren||(f=this._getEmptyFolderContentItem(n),this._actionsHub.QueryFolderEmptyContentLoaded.invoke(f)),e=this._queryItemHasSubfolder(n),e||(o=ot.QueryUtilities.getNoSubfolderContentItem(n),this._actionsHub.QueryFolderEmptyContentLoaded.invoke(o)),this._actionsHub.QueryFolderChildrenLoaded.invoke(n),s=__assign(__assign({},n),{isChildrenLoaded:!0,isEmptyFolderContext:!1,depth:0,expanded:!0,expanding:!1}),this._actionsHub.QueryFolderExpanded.invoke(s);return[3,4];case 3:return r=c.sent(),r=r,this.showErrorMessageForQueriesView(r.message),[3,4];case 4:return[3,6];case 5:this._actionsHub.InitializeQueryHierarchy.invoke(null);c.label=6;case 6:return[2,this.initializeFavorites()]}})})},n.prototype.ensureRootQueryFolders=function(){return __awaiter(this,void 0,void 0,function(){var n,t;return __generator(this,function(i){switch(i.label){case 0:if(!!this._queryHierarchyItemDataProvider.areRootFolderItemsLoaded())return[3,5];ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_ENSUREROOTFOLDERS_REQUEST,!0);i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.workItemTrackingClient.getQueries(this._projectId,h.QueryExpand.None,0)];case 2:return n=i.sent(),ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_ENSUREROOTFOLDERS_REQUEST,!1),this._actionsHub.InitializeQueryHierarchyItem.invoke(n),this._actionsHub.InitializeQueryRootHierarchyItem.invoke(n),[3,4];case 3:t=i.sent();throw t;case 4:return[3,6];case 5:return[2,null];case 6:return[2]}})})},n.prototype.initializeFavorites=function(){var n=this;this._queryFavoriteGroupDataProvider.isLoaded()?this._updateFavorites([]):this._isInitializingFavoriteQueries||this._queryDataProvider&&this._queryDataProvider.queryFavoriteGroups&&(pt.delay(this,500,function(){var t={favorites:[],id:ft.QueryItemFavoriteConstants.TeamFavoriteLoadingGroupKey,isEmpty:!1,isExpanded:!0,name:st.LoadingTeamFavorites};n._queryDataProvider.queryFavoriteGroups.push(t)}),this._initializeFavorites(this._queryDataProvider.queryFavoriteGroups).then(function(){n._initializeTeamFavorites()}))},n.prototype._initializeTeamFavorites=function(){var n=this;this._getQueryTeamFavoritesDataProvider().then(function(t){t&&t.queryFavoriteGroups&&n._initializeFavorites(t.queryFavoriteGroups).then(function(){n._actionsHub.QueryFavoriteLoadingGroupRemoved.invoke(n._queryFavoriteGroupDataProvider.get(ft.QueryItemFavoriteConstants.TeamFavoriteLoadingGroupKey))})})},n.prototype._initializeFavorites=function(n){var t=this,i,r;return this._isInitializingFavoriteQueries=!0,i=[],r=[],new Promise(function(u){var f,e,o;if(n){for(f=0,e=n;f<e.length;f++)o=e[f],r=r.concat(o.favorites);r.length>0&&(i=r.reduce(function(n,i){return i.artifactId&&!t._queryHierarchyItemDataProvider.itemExists(i.artifactId)&&n.push(i.artifactId),n},i));i&&i.length?(i=d.unique(i),ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_GETFAVORITEQUERYITEMS_REQUEST,!0),Promise.resolve(t._getQueryItems(i,!1)).then(function(r){var l,o,f,s,e,h,c;for(ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_GETFAVORITEQUERYITEMS_REQUEST,!1),t._actionsHub.InitializeQueryHierarchyItem.invoke(r),l=r.map(function(n){return n.id}),o=[],f=0,s=n;f<s.length;f++){var a=s[f],v=a.favorites.filter(function(n){return!d.contains(i,n.artifactId,nt.ignoreCaseComparer)||d.contains(l,n.artifactId,nt.ignoreCaseComparer)}),y=[];for(e=0,h=v;e<h.length;e++)c=h[e],y.push(__assign(__assign({},c),{artifactName:t._queryHierarchyItemDataProvider.getItem(c.artifactId).name}));o.push(__assign(__assign({},a),{isEmpty:v.length===0,favorites:y}))}t._updateFavorites(o);t._isInitializingFavoriteQueries=!1;u(null)})):(t._actionsHub.InitializeQueryHierarchyItem.invoke([]),t._updateFavorites(n),t._isInitializingFavoriteQueries=!1,u(null))}})},n.prototype.setActiveQueryView=function(n){n!==this._activeQueryDataProvider.getValue()&&this._actionsHub.QueryViewChanged.invoke(n)},n.prototype.expandQueryFolder=function(n){var t=this,i,r;n.isFolder&&(this._actionsHub.ExpandQueryFolder.invoke(n),n.hasChildren&&!n.isChildrenLoaded?Promise.resolve(this.workItemTrackingClient.getQuery(this._projectId,n.id,h.QueryExpand.Wiql,2).then(function(i){if(t._actionsHub.QueryFolderChildrenLoaded.invoke(i),!t._queryItemHasSubfolder(i)){var r=ot.QueryUtilities.getNoSubfolderContentItem(n);t._actionsHub.QueryFolderEmptyContentLoaded.invoke(r)}},function(n){t.showErrorMessageForQueriesView(n.message)})).then(function(){return t._expandQueryFolder(n)}):(this._queryItemHasSubfolder(n)||(i=ot.QueryUtilities.getNoSubfolderContentItem(n),this._actionsHub.QueryFolderEmptyContentLoaded.invoke(i)),n.hasChildren||(r=this._getEmptyFolderContentItem(n),this._actionsHub.QueryFolderEmptyContentLoaded.invoke(r)),this._expandQueryFolder(n)))},n.prototype.collapseQueryFolder=function(n){this._actionsHub.QueryFolderCollapsed.invoke(n)},n.prototype.deleteQuery=function(n){var t=this;Promise.resolve(this.workItemTrackingClient.deleteQuery(this._projectId,n.id)).then(function(){var r,u,f,e,i,o,s,h;if(n.isFolder)t._actionsHub.QueryFolderDeleted.invoke(n);else{for(r=0,u=t._queryFavoriteGroupDataProvider.getAll();r<u.length;r++)f=u[r],e=f.favorites.filter(function(t){return nt.equals(t.artifactId,n.id,!0)}),e.length===1&&t._removeFavorite(f,e[0],!0);t._actionsHub.QueryDeleted.invoke(n)}i=t._getParentFolder(n.path);i&&(i.children=i.children.filter(function(t){return t.id!==n.id}),i.isChildrenLoaded=i.children.length>0,i.hasChildren=i.children.length>0,i.hasChildren||(o=t._getEmptyFolderContentItem(i),t._actionsHub.QueryFolderEmptyContentLoaded.invoke(o)),n.isFolder&&(s=t._queryItemHasSubfolder(i),s||(h=ot.QueryUtilities.getNoSubfolderContentItem(i),t._actionsHub.QueryFolderEmptyContentLoaded.invoke(h))),t._actionsHub.QueryItemUpdated.invoke(i))},function(n){t.showErrorMessageForQueriesView(n.message)})},n.prototype.createQuery=function(n,t){return __awaiter(this,void 0,void 0,function(){var i,o,f,u,e,r,s;return __generator(this,function(c){switch(c.label){case 0:i=this._queryHierarchyItemDataProvider.getItem(t);o=i?i.id:t;c.label=1;case 1:return(c.trys.push([1,5,,6]),!(i&&i.hasChildren&&!i.isChildrenLoaded))?[3,3]:[4,this.workItemTrackingClient.getQuery(this._projectId,i.id,h.QueryExpand.Wiql,1)];case 2:f=c.sent();this._actionsHub.QueryFolderChildrenLoaded.invoke(f);this._queryItemHasSubfolder(f)||(r=ot.QueryUtilities.getNoSubfolderContentItem(n),this._actionsHub.QueryFolderEmptyContentLoaded.invoke(r));i=this._queryHierarchyItemDataProvider.getItem(i.id);c.label=3;case 3:return[4,this.workItemTrackingClient.createQuery(n,this._projectId,o)];case 4:return u=c.sent(),i&&(i=__assign({},i),e=this._queryHierarchyItemDataProvider.getItem(ot.QueryUtilities.getEmptyQueryItemId(i.id)),e&&this._actionsHub.QueryFolderEmptyContentRemoved.invoke(e),n.isFolder&&(r=this._queryHierarchyItemDataProvider.getItem(ot.QueryUtilities.getNoSubfolderQueryItemId(i.id)),r&&this._actionsHub.QueryFolderEmptyContentRemoved.invoke(r)),i.hasChildren=!0,i.children=(i.children||[]).concat(u),i.isChildrenLoaded=!0,this._actionsHub.QueryItemUpdated.invoke(i)),this._actionsHub.QueryItemCreated.invoke(u),[2,u];case 5:s=c.sent();throw s;case 6:return[2]}})})},n.prototype._reparentChildren=function(n,t){var i=[],r,e,h,u,c,f;if(n.hasChildren&&n.children&&n.children.length>0)for(r=0,e=n.children;r<e.length;r++){var l=e[r],o=this._queryHierarchyItemDataProvider.getItem(l.id),s=__assign(__assign({},o),{path:"".concat(t,"/").concat(o.name)});s.isFolder&&(h=this._reparentChildren(o,s.path),i=i.concat(h));i.push(s)}else n.hasChildren||(u=this._queryHierarchyItemDataProvider.getItem(ot.QueryUtilities.getEmptyQueryItemId(n.id)),u&&i.push(__assign(__assign({},u),{path:"".concat(t,"/").concat(u.name)})));return c=this._queryItemHasSubfolder(n),c||(f=this._queryHierarchyItemDataProvider.getItem(ot.QueryUtilities.getNoSubfolderQueryItemId(n.id)),f&&i.push(__assign(__assign({},f),{path:"".concat(t,"/").concat(f.name)}))),i},n.prototype._updateQueryParentReferences=function(n,t,i){var h=this._queryHierarchyItemDataProvider.itemExists(t),c=this._queryHierarchyItemDataProvider.itemExists(i),r,a,u,e,o,v;if(!h&&!c)return[];var s=[],l=this._queryHierarchyDataProvider.getAll(),f=(h?ot.QueryUtilities.mergeQueryItems(l.filter(function(n){return n.fullName===t}),[this._queryHierarchyItemDataProvider.getItem(t)]):[null])[0];return t===i&&f?(r=__assign(__assign({},f),{children:(f.children||[]).filter(function(t){return t.id!==n.id}).concat(n)}),s.push(r)):t!==i&&(f&&(r=__assign(__assign({},f),{children:(f.children||[]).filter(function(t){return t.id!==n.id})}),r.hasChildren=r.children.length>0,!r.hasChildren&&r.expanded&&(e=this._getEmptyFolderContentItem(r),this._actionsHub.QueryFolderEmptyContentLoaded.invoke(e)),n.isFolder&&(a=this._queryItemHasSubfolder(r),a||(o=ot.QueryUtilities.getNoSubfolderContentItem(r),this._actionsHub.QueryFolderEmptyContentLoaded.invoke(o))),s.push(r)),u=(c?ot.QueryUtilities.mergeQueryItems(l.filter(function(n){return n.fullName===i}),[this._queryHierarchyItemDataProvider.getItem(i)]):[null])[0],u&&(e=this._queryHierarchyItemDataProvider.getItem(ot.QueryUtilities.getEmptyQueryItemId(u.id)),e&&this._actionsHub.QueryFolderEmptyContentRemoved.invoke(e),o=this._queryHierarchyItemDataProvider.getItem(ot.QueryUtilities.getNoSubfolderQueryItemId(u.id)),n.isFolder&&o&&this._actionsHub.QueryFolderEmptyContentRemoved.invoke(o),v=__assign(__assign({},u),{hasChildren:!0,isChildrenLoaded:u.hasChildren?u.isChildrenLoaded:!0,children:(u.children||[]).concat(n)}),s.push(v))),s},n.prototype._updateQueryReferences=function(n){var t=this._queryHierarchyItemDataProvider.getItem(n.id),r=g.getDirectoryName(t.path),u=g.getDirectoryName(n.path),i=[n],f,e;n.isFolder&&(f=this._reparentChildren(t,n.path),i=i.concat(f));e=this._updateQueryParentReferences(n,r,u);i=i.concat(e);this._actionsHub.QueryItemUpdated.invoke(i);r!==u&&t.name===n.name?this._actionsHub.QueryItemMoved.invoke({isFolder:n.isFolder,originalPath:t.path,updatedPath:n.path}):t.name!==n.name&&this._actionsHub.QueryItemRenamed.invoke({id:n.id,isFolder:n.isFolder,originalPath:t.path,renamedPath:n.path,name:n.name})},n.prototype.updateQuery=function(n){return __awaiter(this,void 0,void 0,function(){var t,i,u,f,r,e,o=this;return __generator(this,function(s){switch(s.label){case 0:if(ot.QueryUtilities.isRecycleBinQuery(n.id))return[2,new Promise(function(t,i){var r=o._queryResultsProviderDataProvider.getValue().queryDefinition,u,f;ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERY_UPDATEADHOCQUERY_REQUEST,!0);u={queryId:n.id,wiql:n.wiql};f={controller:"wit",action:"updateAdHocQuery",routeData:{project:r.project.guid}};(new wt.WorkItemStoreLevelWITDataSource).postDataAsync(f,u).then(function(n){var i=n.data;ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERY_UPDATEADHOCQUERY_REQUEST,!1);r.queryText=i.wiql;o._queryResultsProviderDataProvider.getValue().update(r);t(ot.QueryUtilities.convertQueryDefinintionToQueryItem(r))}).catch(function(n){return i(n)})})];if(t=this._queryHierarchyItemDataProvider.getItem(n.id),i=t.name!==n.name,u=t.wiql!==n.wiql,i){if(f=this._queryHierarchyItemDataProvider.getItem(n.path),f&&!nt.equals(n.id,f.id,!0))throw new Error(st.QueryMoveOrRename_QueryItemAlreadyExists);this._updateQueryReferences(n)}ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERY_UPDATEQUERY_REQUEST,!0);s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.workItemTrackingClient.updateQuery(n,this._projectId,n.id)];case 2:return r=s.sent(),ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERY_UPDATEQUERY_REQUEST,!1),i||u?u?this._updateQueryReferences(r):this._querySearchDataProvider.getSearchStatus()===et.QuerySearchStatus.ResultsReady&&this._activeQueryDataProvider.getValue()===et.ActiveQueryView.All&&this.performSearch(this._querySearchDataProvider.getSearchText()):this._actionsHub.QueryItemUpdated.invoke(r),[2,r];case 3:e=s.sent();i&&this._updateQueryReferences(t);throw e;case 4:return[2]}})})},n.prototype.moveQuery=function(n,t,i,r,u){return __awaiter(this,void 0,void 0,function(){var e,h,c,f,o,l,v,s;return __generator(this,function(y){switch(y.label){case 0:if(e=g.getDirectoryName(n.path)||n.path,i=i||t.path,e===i||n.isFolder&&i.indexOf(nt.endsWith(n.path,"/")?n.path:n.path+"/")===0||n.path===i)return[2,n];if(h=g.getRootDirectory(i)||i,c=t?t.isPublic:h!==this._queryHierarchyItemDataProvider.getMyQueriesFolderItem().path,f=__assign(__assign({},n),{isPublic:c,name:r||n.name,path:"".concat(i,"/").concat(r||n.name)}),this._queryHierarchyItemDataProvider.itemExists(f.path))throw new Error(st.QueryMoveOrRename_QueryItemAlreadyExists);this._updateQueryReferences(f);o=this._queryHierarchyItemDataProvider.getItem(i);l=o?o.id:i;y.label=1;case 1:return y.trys.push([1,3,,4]),[4,this.workItemTrackingClient.createQuery(f,this._projectId,l)];case 2:return v=y.sent(),this._querySearchDataProvider.getSearchStatus()===et.QuerySearchStatus.ResultsReady&&this._activeQueryDataProvider.getValue()===et.ActiveQueryView.All&&this.performSearch(this._querySearchDataProvider.getSearchText()),k.publishEvent(new k.TelemetryEventData(tt.WITCustomerIntelligenceArea.NEW_QUERIES_EXPERIENCE,tt.WITCustomerIntelligenceFeature.NEWQUERYEXPERIENCE_MOVE_QUERY,{sourcePath:e,targetPath:i,viaDragDrop:u,success:!0}),!0),[2,v];case 3:s=y.sent();this._updateQueryReferences(n);a.publishErrorToTelemetry(s);throw s;case 4:return[2]}})})},n.prototype.showErrorMessageForQueriesView=function(n){this._actionsHub.PushContributionErrorMessage.invoke({message:n,contribution:et.QueryContribution.Directory})},n.prototype.showErrorMessageForTriageView=function(n){this._actionsHub.PushContributionErrorMessage.invoke({message:n,contribution:et.QueryContribution.Triage})},n.prototype.dismissErrorMessageForQueriesView=function(){this._actionsHub.DismissContributionErrorMessage.invoke(et.QueryContribution.Directory)},n.prototype.dismissErrorMessageForTriageView=function(){this._actionsHub.DismissContributionErrorMessage.invoke(et.QueryContribution.Triage)},n.prototype.showInfoMessageForQueriesView=function(n){this._actionsHub.PushContributionInfoMessage.invoke({message:n,contribution:et.QueryContribution.Directory})},n.prototype.dismissInfoMessageForQueriesView=function(){this._actionsHub.DismissContributionInfoMessage.invoke(et.QueryContribution.Directory)},n.prototype._isTreeLoaded=function(n,t){var r=this,i;return t===void 0&&(t=0),this._queryHierarchyItemDataProvider.itemExists(n)?(i=this._queryHierarchyItemDataProvider.getItem(n),t>0?i.children&&i.children.every(function(n){return r._isTreeLoaded(n.id,t-1)}):!0):!1},n.prototype.ensureQueryItem=function(n,t){return t===void 0&&(t=0),__awaiter(this,void 0,void 0,function(){var r,i,u;return __generator(this,function(f){switch(f.label){case 0:if(!!this._isTreeLoaded(n,t))return[3,8];f.label=1;case 1:return(f.trys.push([1,6,,7]),ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_ENSUREQUERYITEM_REQUEST,!0),!(n.indexOf("#")!==-1))?[3,3]:(r={queryPath:n,depth:t},[4,b.getService(l.WebPageDataService).getDataAsync(dt,null,r)]);case 2:return i=f.sent(),this.invokeEnsureQueryItemActions(i),[3,5];case 3:return[4,this.workItemTrackingClient.getQuery(this._projectId,n,h.QueryExpand.Wiql,t)];case 4:i=f.sent();this.invokeEnsureQueryItemActions(i);f.label=5;case 5:return[3,7];case 6:u=f.sent();ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_ENSUREQUERYITEM_REQUEST,!1);throw u;case 7:ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_ENSUREQUERYITEM_REQUEST,!1);f.label=8;case 8:return[2]}})})},n.prototype.ensureQueryFolderItem=function(n){var t=this;return this.setFolderPath(n),this.ensureQueryItem(n,1).then(function(){var i=t._queryHierarchyItemDataProvider.getItem(n);t._actionsHub.QueryFolderItemLoaded.invoke(i)})},n.prototype.invokeEnsureQueryItemActions=function(n){this._actionsHub.InitializeQueryHierarchyItem.invoke([n]);n.isFolder&&n.hasChildren&&this._actionsHub.QueryFolderChildrenLoaded.invoke(n)},n.prototype.addTeamFavorite=function(n,t,i){var r=this,u={artifactId:n.id,artifactName:n.name,artifactProperties:"",artifactScope:{id:this._projectId,type:ft.QueryItemFavoriteConstants.FavoriteArtifactScopeType,name:null},artifactType:vt.FavoriteTypes.WIT_QUERYITEM};this.favoriteClient.createFavoriteOfOwner(u,ft.QueryItemFavoriteConstants.FavoriteOwnerScope,t).then(function(n){if(n){var u=r._queryFavoriteGroupDataProvider.get(t);r._addFavorite(u,__assign(__assign({},n),{parentId:t,parentName:i}))}},function(n){r.showErrorMessageForQueriesView(n.message)})},n.prototype.removeTeamFavorite=function(n){var t=this;this.favoriteClient.deleteFavoriteOfOwnerById(n.id,ft.QueryItemFavoriteConstants.FavoriteOwnerScope,n.parentId,n.artifactType,n.artifactScope.type,this._projectId).then(function(){var i=t._queryFavoriteGroupDataProvider.get(n.parentId);t._removeFavorite(i,n,!0)},function(n){t.showErrorMessageForQueriesView(n.message)})},n.prototype.removeUnfavoritedItems=function(n){var t,i,r;if(n&&n.length){for(t=0,i=n;t<i.length;t++)r=i[t],this._removeUnfavoritedItemsFromGroup(r);this._actionsHub.QueryFavoriteGroupsUpdated.invoke(n)}},n.prototype.setFolderPath=function(n){this._actionsHub.SetFolderPath.invoke(n)},n.prototype.setSearchText=function(n){this._querySearchDataProvider.getSearchText()&&nt.equals(n,this._querySearchDataProvider.getSearchText(),!0)||(this._actionsHub.SearchTextChanged.invoke(n),this._activeQueryDataProvider.getValue()===et.ActiveQueryView.All&&this.performSearch(this._querySearchDataProvider.getSearchText()))},n.prototype.performSearch=function(n){n&&(this._actionsHub.QuerySearchStarted.invoke(null),this._debouncedPerformSearch(n))},n.prototype.getUnsavedItemsMessage=function(){return v.getService().performAction(v.CommonActions.ACTION_WINDOW_UNLOAD,{})},n.prototype.setLastVisitedQueryItem=function(n){var t=this._queryFavoriteGroupDataProvider.get(at.QueriesConstants.LastVisitedQueryGroupKey),i={artifactId:n,artifactIsDeleted:!1,artifactName:st.LastVisitedGroupName,id:nt.generateUID(),parentName:t?t.name:st.LastVisitedGroupName,parentId:t?t.id:at.QueriesConstants.LastVisitedQueryGroupKey};t?t.favorites=[i]:t={favorites:[i],isExpanded:!0,name:st.LastVisitedGroupName,id:at.QueriesConstants.LastVisitedQueryGroupKey};this._actionsHub.QueryFavoriteGroupUpdated.invoke(t)},n.prototype._removeUnfavoritedItemsFromGroup=function(n){var t=n.favorites.filter(function(n){return!n.isRemoved}),i;t.length===0&&this._shouldShowEmptyContent(n.id)&&(t.push(this._getEmptyFavoriteContent(n.id,n.name)),i=this._getEmptyQueryItemContent(n.id),this._actionsHub.QueryFavoriteEmptyContentAdded.invoke(i));n.favorites=t;n.isEmpty=ot.QueryUtilities.isEmptyFavoriteGroup(n)},n.prototype._expandQueryFolder=function(n){this._actionsHub.QueryFolderExpanded.invoke(n)},n.prototype._handleToggleFavorite=function(){var n=this;this._actionsHub.FavoritesActions.ToggleFavorite.addListener(function(t){var i=n._queryFavoriteGroupDataProvider.get(at.QueriesConstants.MyFavoritesGroupKey);Promise.resolve().then(function(){t.favorited?n._addFavorite(i,__assign(__assign({},t.favorite),{parentId:at.QueriesConstants.MyFavoritesGroupKey,parentName:st.MyFavoritesGroupName})):n._removeFavorite(i,__assign(__assign({},t.favorite),{parentId:at.QueriesConstants.MyFavoritesGroupKey,parentName:st.MyFavoritesGroupName}),!1)})})},n.prototype._addFavorite=function(n,t){var r=n.favorites.filter(function(i){return!nt.equals(i.artifactId,ot.QueryUtilities.getEmptyQueryItemId(n.id),!0)&&!nt.equals(i.artifactId,t.artifactId,!0)}),u,i;r.push(t);u=__assign(__assign({},n),{isEmpty:!1,favorites:r});this._actionsHub.QueryFavoriteGroupUpdated.invoke(u);i=this._queryHierarchyItemDataProvider.getItem(ot.QueryUtilities.getEmptyQueryItemId(n.id));i&&this._actionsHub.QueryFavoriteEmptyContentRemoved.invoke(i)},n.prototype._removeFavorite=function(n,t,i){for(var r,f,e=[],u=0,o=n.favorites;u<o.length;u++)r=o[u],e.push(__assign(__assign({},r),{isRemoved:r.isRemoved||nt.equals(t.artifactId,r.artifactId,!0)}));f=__assign(__assign({},n),{favorites:e});i&&this._removeUnfavoritedItemsFromGroup(f);this._actionsHub.QueryFavoriteGroupUpdated.invoke(f)},n.prototype._getEmptyFavoriteContent=function(n,t){return{artifactId:ot.QueryUtilities.getEmptyQueryItemId(n),parentId:n,id:ot.QueryUtilities.getEmptyQueryItemId(n),parentName:t,isEmptyFolderContext:!0}},n.prototype._getEmptyQueryItemContent=function(n){return{id:ot.QueryUtilities.getEmptyQueryItemId(n),name:p.NoItemsInThisFolder,isEmptyFolderContext:!0}},n.prototype._shouldShowEmptyContent=function(n){return nt.equals(n,at.QueriesConstants.MyFavoritesGroupKey,!0)||nt.equals(n,ft.QueryItemFavoriteConstants.TeamFavoriteLoadingGroupKey,!0)},n.prototype._updateFavorites=function(n){for(var t,u,f,i=0,r=n;i<r.length;i++)t=r[i],t.favorites.length===0&&this._shouldShowEmptyContent(t.id)&&(u=this._getEmptyFavoriteContent(t.id,t.name),t.favorites.push(u),t.isEmpty=!0,f=this._getEmptyQueryItemContent(t.id),this._actionsHub.QueryFavoriteEmptyContentAdded.invoke(f));this._actionsHub.InitializeQueryFavoriteGroups.invoke(n)},n.prototype._getEmptyFolderContentItem=function(n){return{id:ot.QueryUtilities.getEmptyQueryItemId(n.id),name:p.NoItemsInThisFolder,path:"".concat(n.path,"/").concat(p.NoItemsInThisFolder),isEmptyFolderContext:!0,isChildrenLoaded:!1,depth:0,expanded:!1,expanding:!1,children:[],clauses:null,columns:[],createdBy:null,createdDate:null,filterOptions:0,hasChildren:!1,isDeleted:!1,isFolder:!1,isInvalidSyntax:!1,isPublic:!0,lastModifiedBy:null,lastModifiedDate:null,linkClauses:null,queryType:h.QueryType.Flat,queryRecursionOption:null,sortColumns:[],sourceClauses:null,targetClauses:null,wiql:"",_links:null,url:"",lastExecutedBy:null,lastExecutedDate:null}},n.prototype._getParentFolder=function(n){var i=n.lastIndexOf("/"),r,t;return i!==-1&&(r=n.substr(0,i),t=this._queryHierarchyItemDataProvider.getItem(r),t)?__assign({},t):null},n.prototype._searchQueryItems=function(n){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(r){switch(r.label){case 0:ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_SEARCHQUERYITEMS_REQUEST,!0);r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.workItemTrackingClient.searchQueries(this._projectId,n,ft.QueriesHubConstants.MaxQuerySearchResultCount,h.QueryExpand.Wiql)];case 2:return(t=r.sent(),ct.PerfScenarioManager.addSplitTiming(tt.PerformanceEvents.QUERIESHUB_ACTIONS_SEARCHQUERYITEMS_REQUEST,!1),t&&t.value)?(this._actionsHub.InitializeQueryHierarchyItem.invoke(t.value),[2,t]):[2,{value:[],count:0,hasMore:!1}];case 3:return i=r.sent(),this.showErrorMessageForQueriesView(i.message),[2,{value:[],count:0,hasMore:!1}];case 4:return[2]}})})},n.prototype._getQueryItems=function(n,t){return __awaiter(this,void 0,void 0,function(){var i,r,u,f=this;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.workItemTrackingBatchClient.getQueriesBatch(n)];case 1:return(i=e.sent(),i&&i.value)?(r=i.value.reduce(function(n,i){if(i.code===200)n.push(f._parseQueryHierarchyItemData(i.body));else if(t){var r=JSON.parse(i.body);f.showErrorMessageForQueriesView(r.value.Message)}return n},[]),[2,r]):[2,[]];case 2:return u=e.sent(),this.showErrorMessageForQueriesView(u.message),[2,[]];case 3:return[2]}})})},n.prototype._initializeQueryPermissionMetadata=function(){this._queryDataProvider&&this._queryDataProvider.queryItemPermissionSet&&this._actionsHub.InitializeQueryPermissionMetadata.invoke(this._queryDataProvider.queryItemPermissionSet)},n.prototype._initializeFavoritesCreatorFromDataProvider=function(){var n,t,i,r,u;if(this._queryDataProvider&&this._queryDataProvider.queryFavoriteGroups){for(n=[],t=0,i=this._queryDataProvider.queryFavoriteGroups;t<i.length;t++)r=i[t],u=r.id===at.QueriesConstants.LastVisitedQueryGroupKey,u||(n=n.concat(r.favorites));this.favoritesActionsCreator.initializeStoreFromExistingData(n)}else this.favoritesActionsCreator.initializeStore([vt.FavoriteTypes.WIT_QUERYITEM],{id:bt.navigation.projectId,name:bt.navigation.project,type:ft.QueryItemFavoriteConstants.FavoriteArtifactScopeType})},n.prototype._initializeAndRunQueryItemFromDataProvider=function(){var n,t,i;this._queryDataProvider&&this._queryDataProvider.query&&(n=w.ContractSerializer.deserialize(this._queryDataProvider.query,h.TypeInfo.QueryHierarchyItem,!1,!0),this._actionsHub.InitializeQueryHierarchyItem.invoke([n]),n.isFolder?this._actionsHub.QueryFolderChildrenLoaded.invoke(n):(t=o.ProjectCollection.getConnection(bt).getService(ht.WorkItemStore),i={persistenceId:n.id},t.beginQuery(this._projectId,n.wiql,null,function(){},i)))},n.prototype._parseQueryHierarchyItemData=function(n){var t=JSON.parse(n);return w.ContractSerializer.deserialize(t,h.TypeInfo.QueryHierarchyItem,!1,!0)},n.prototype._getQueryDataProvider=function(){return b.getService(l.WebPageDataService).getPageData(ft.DataProviderConstants.QueryDataProviderId)},n.prototype._getQueryTeamFavoritesDataProvider=function(){return b.getService(l.WebPageDataService).getDataAsync(ft.DataProviderConstants.QueryTeamFavoriesDataProviderId)},n.prototype.getAdhocQueryDefinition=function(n,t,i){var r;return nt.localeIgnoreCaseComparer(n,st.AssignedToMeQuery)===0||nt.ignoreCaseComparer(n,rt.QueryDefinition.ASSIGNED_TO_ME_ID)===0?(r=new rt.QueryDefinition(t,this._transform(i.assignedToMe)),r.specialQuery=!0,r.name=st.AssignedToMeQuery,r.sortPrefix=-1e5,r.storedPath=st.AssignedToMeQuery):(nt.localeIgnoreCaseComparer(n,st.FollowedWorkItemsQuery)===0||nt.ignoreCaseComparer(n,rt.QueryDefinition.FOLLOWED_WORKITEMS_ID)===0)&&lt.isFollowWorkItemEnabled(t.store.getTfsContext())?(r=new rt.QueryDefinition(t,this._transform(i.followedWorkItems)),r.specialQuery=!0,r.name=st.FollowedWorkItemsQuery,r.sortPrefix=-101):(nt.localeIgnoreCaseComparer(n,st.RecycleBin)===0||nt.ignoreCaseComparer(n,rt.QueryDefinition.RECYCLE_BIN_QUERY_ID)===0)&&(r=new rt.QueryDefinition(t,this._transform(i.recycleBin)),r.specialQuery=!0,r.name=st.RecycleBin),r},n.prototype.beginGetAdHocQueries=function(n){var i=n.relatedData[kt],t;return i?i:(t=new Promise(function(t,i){n.store.metadataCacheStampManager.addStampToParams(at.WITCommonConstants.AdhocQueries,null,function(r){var u={controller:"wit",action:"AdHocQueries",routeData:{project:n.guid}},f=n.guid;(new wt.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync(u,r,f,u.action,kt).then(function(n){var i=n.data;t(i)}).catch(function(n){return i(n)})})}),n.relatedData[kt]=t,t)},n.prototype.expandQueryFavoriteGroup=function(n){this._actionsHub.QueryFavoriteGroupExpanded.invoke(n);this._debouncedToggleFavoriteGroupMru(n,!0)},n.prototype.collapseQueryFavoriteGroup=function(n){this._actionsHub.QueryFavoriteGroupCollapsed.invoke(n);this._debouncedToggleFavoriteGroupMru(n,!1)},n.prototype._getApiLocation=function(n,t,i,r){var u={};return t||(u.team=""),n.store.getTfsContext().getActionUrl(i||"","wit",$.extend({project:n.guid,area:"api"},u,r))},n.prototype._transform=function(n){return n?{id:n.id,isFolder:n.folder,name:n.name,wiql:n.query,path:null,isPublic:!1,hasChildren:!1,children:null}:null},n}();t.ActionsCreator=gt});

define("WorkItemTracking/Scripts/Queries/Actions/NavigationActionsCreator",["require","exports","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Resources/VSS.Resources.Platform","VSS/Telemetry/Services","VSS/Utils/String","WorkItemTracking/Scripts/ActionUrls","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Dialogs/WITDialogs","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Queries/Models/Constants","WorkItemTracking/Scripts/Queries/QueryUtilities","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking","VSS/Navigation/NavigationHistoryService"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){Object.defineProperty(t,"__esModule",{value:!0});t.NavigationActionsCreator=void 0;var w=i.TfsContext.getDefault(),b=function(){function n(n,t,i,r){this._actionsCreator=n;this._queryHierarchyItemDataProvider=t;this._queryResultsProviderDataProvider=i;this.queryHubViewState=r}return n.prototype.navigateToWorkItem=function(n,t,i){if(i)return Promise.resolve(!1);var r={};return r[o.ActionParameters.VIEW]=o.ActionUrl.ACTION_EDIT,r[o.ActionParameters.ID]=n,r[o.ActionParameters.TRIAGE]=t?"true":null,this.navigate(r,!1)},n.prototype.navigateToNewQuery=function(n,t){return __awaiter(this,void 0,void 0,function(){var i,f,r,u;return __generator(this,function(e){switch(e.label){case 0:if(i={},i[o.ActionParameters.VIEW]=o.ActionUrl.ACTION_QUERY_EDIT,i[o.ActionParameters.NEW_QUERY]=!0,!!t)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._actionsCreator.ensureRootQueryFolders()];case 2:return f=e.sent(),r=this._queryHierarchyItemDataProvider.getMyQueriesFolderItem(),i[o.ActionParameters.PARENTID]=r.id,[2,this.navigate(i,n)];case 3:return u=e.sent(),this._actionsCreator.showErrorMessageForQueriesView(u.message),[3,4];case 4:return[3,6];case 5:return i[o.ActionParameters.PARENTID]=t,[2,this.navigate(i,n)];case 6:return[2]}})})},n.prototype.navigateToQueryPreservingSupportedState=function(n,t){var r=a.QueryUtilities.isQueriesFolderPivot(this.queryHubViewState.selectedPivot.value)?l.TriageViewPivotsKey.QueryResults:this.queryHubViewState.selectedPivot.value,i={};return i[o.ActionParameters.VIEW]=e.equals(r,o.ActionUrl.ACTION_SEARCH,!0)||e.equals(r,o.ActionUrl.ACTION_EDIT,!0)?o.ActionUrl.ACTION_QUERY:r,i[o.ActionParameters.ID]=n,i[l.QueriesHubConstants.WorkItemPaneViewOptionKey]=this.queryHubViewState.viewOptions.getViewOption(l.QueriesHubConstants.WorkItemPaneViewOptionKey),this.navigate(i,t)},n.prototype.navigateToRunQuery=function(n,t){var i={};return i[o.ActionParameters.ID]=n,i[o.ActionParameters.VIEW]=o.ActionUrl.ACTION_QUERY,this.navigate(i,t)},n.prototype.navigateToImportWorkItems=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(){return n={},n[o.ActionParameters.VIEW]=o.ActionUrl.ACTION_QUERY,n[o.ActionParameters.IMPORTDATA]="csv",[2,this.navigate(n,!1)]})})},n.prototype.navigateToEditQuery=function(n,t){var i={};return i[o.ActionParameters.ID]=n,i[o.ActionParameters.VIEW]=o.ActionUrl.ACTION_QUERY_EDIT,this.navigate(i,t)},n.prototype.navigateToView=function(n,t,i,r,u){return i=i||{},i[o.ActionParameters.VIEW]=n,this.navigate(i,t,r,u)},n.prototype.navigateToQueriesHub=function(n,t,i){if(n&&!a.QueryUtilities.isQueriesHubPivot(n))throw new Error("Only 'all', 'favorites' or empty view can be the view value in queries hub");return this.navigateToView(n,t,null,i)},n.prototype.navigate=function(n,t,i,u){var e=this,h;return i===void 0&&(i=!1),h=new Promise(function(n,i){t?e.checkAndPromptForUnsavedItems(function(){return n(null)},function(){var u=r.ProjectCollection.getConnection(w).getService(y.WorkItemStore),i=c.WorkItemManager.get(u),t=e._queryResultsProviderDataProvider.getValue();f.publishEvent(new f.TelemetryEventData(s.WITCustomerIntelligenceArea.NEW_QUERIES_EXPERIENCE,s.WITCustomerIntelligenceFeature.NEWQUERYEXPERIENCE_LEAVE_DIRTY,{queryId:t.queryDefinition.id,tempQueryId:t.queryDefinition.tempQueryId,dirtyWorkItemCount:i.getDirtyWorkItems().length,dirtyProviderCount:t.isDirty()}),!0);t.revertEditInfo(!1);i.resetDirtyWorkItems();n(null)},function(){return i(null)}):n(null)}),h.then(function(){return e.queryHubViewState&&(n[o.ActionParameters.FULLSCREEN]=e.queryHubViewState.viewOptions.getViewOption(o.ActionParameters.FULLSCREEN),n[l.QueriesHubConstants.WorkItemPaneViewOptionKey]=e.queryHubViewState.viewOptions.getViewOption(l.QueriesHubConstants.WorkItemPaneViewOptionKey),e.updateNavigationState(n,i,u)),!0},function(){return!t||!1})},n.prototype.updateNavigationState=function(n,t,i){var r=this;this.queryHubViewState.updateNavigationState(t?1:2,function(){r.queryHubViewState.selectedPivot.value=n[o.ActionParameters.VIEW];r.queryHubViewState.viewOptions.setViewOptions(n,i)})},n.prototype.navigateToQueriesPage=function(n,t){var i=a.QueryUtilities.getQueryHubDefaultAction();this.navigateToQueriesHub(i,n,t);f.publishEvent(new f.TelemetryEventData(s.WITCustomerIntelligenceArea.NEW_QUERIES_EXPERIENCE,s.WITCustomerIntelligenceFeature.NEWQUERYEXPERIENCE_NAVIGATE_QUERIESPIVOT,{view:i}),!1)},n.prototype.navigateToQueriesFolderPage=function(n,t,i,r){var u,f,s;return s=e.isGuid(n)?(u={},u[o.ActionParameters.ID]=n,u):(f={},f[o.ActionParameters.PATH]=n,f),this.navigateToView(l.QueriesHubConstants.QueryFoldersPageAction,t,s,i,r)},n.prototype.replaceUrlPathById=function(n){var t,i=p.getNavigationHistoryService(),r=i.getState();i.replaceState(__assign(__assign({},r),(t={},t[o.ActionParameters.ID]=n,t[o.ActionParameters.PATH]=null,t)))},n.prototype.checkAndPromptForUnsavedItems=function(n,t,i,f,o,s,l,a,p){var k=undefined,b=[],nt=6,it=r.ProjectCollection.getConnection(w).getService(y.WorkItemStore),d=c.WorkItemManager.get(it),g=this._queryResultsProviderDataProvider.getValue(),tt;g&&d&&(!o&&g.isDirty()&&(tt=e.format(v.QueryDirtyDocumentTitleFormat,g.getTitle()||v.UntitledQuery),b.push(tt)),d.isDirty(!0)&&(b=b.concat(d.getDirtyWorkItemTitles(nt))),b.length>0&&(k=this._createPromptMessageWithDirtyItems(l||u.UnsavedChangesWithNames,b,nt)));k?h.promptMessageDialog(k,s||u.UnsavedChangesMessageTitle,[{id:"leave",text:a||u.UnsavedChangesLeaveButton,reject:!1},{id:"stay",text:p||u.UnsavedChangesStayButton,reject:!0}]).then(function(){t&&t()},function(){i&&i()}):n&&n();f&&f(!!k)},n.prototype._createPromptMessageWithDirtyItems=function(n,t,i){for(var f,r=[],e=0;e<t.length;e++){if(r.length===i-1){r.push(u.UnsavedChangesMore);break}f=t[e];f.length>55&&(f=f.substr(0,52)+"...");r.push(f)}return r.length>0?n+"\n"+r.join("\n"):undefined},n}();t.NavigationActionsCreator=b});

define("Presentation/Scripts/TFS/TFS.Core.WebApi",["require","exports","VSS/WebApi/RestClient"],function(n,t,i){var r,u;Object.defineProperty(t,"__esModule",{value:!0});t.TemporaryDataHttpClient=t.IdentityMruHttpClient=void 0;r=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.beginGetMru=function(n){return this._beginRequest({area:t.IdentityMruArea,locationId:t.IdentityMruLocationId,httpMethod:"GET",responseIsCollection:!0,routeValues:{mruName:n}})},t.prototype.beginPostMruIdentity=function(n,i){return this._beginRequest({area:t.IdentityMruArea,locationId:t.IdentityMruLocationId,httpMethod:"POST",routeValues:{mruName:n},data:{identityIds:i}})},t.prototype.beginDeleteMruIdentity=function(n,i){return this._beginRequest({area:t.IdentityMruArea,locationId:t.IdentityMruLocationId,httpMethod:"DELETE",routeValues:{mruName:n},data:{identityIds:i}})},t.IdentityMruArea="core",t.IdentityMruLocationId="5EAD0B70-2572-4697-97E9-F341069A783A",t}(i.VssHttpClient);t.IdentityMruHttpClient=r;u=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.beginGetTemporaryData=function(n){return this._beginRequest({area:t.TemporaryDataArea,locationId:t.TemporaryDataLocationId,httpMethod:"GET",routeValues:{id:n}})},t.prototype.beginCreateTemporaryData=function(n){return this._beginRequest({area:t.TemporaryDataArea,locationId:t.TemporaryDataLocationId,httpMethod:"POST",data:n})},t.TemporaryDataArea="properties",t.TemporaryDataLocationId="B4B570EF-1775-4093-9218-AFB7E4C8AEF6",t}(i.VssHttpClient);t.TemporaryDataHttpClient=u});

define("WorkItemTracking/Scripts/Utils/WorkItemPermissionDataHelper",["require","exports","VSS/Service","VSS/Events/Page","VSS/Contributions/Services","VSS/Diag","VSS/Events/Services","VSS/Error"],function(n,t,i,r,u,f,e,o){var c,l,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemPermissionDataHelper=t.PermissionDataHelper=t.WorkItemPermissionActions=void 0;c=e.getService(),function(n){n.PERMISSION_DATA_AVAILABLE="work-item-permission-data-available"}(l=t.WorkItemPermissionActions||(t.WorkItemPermissionActions={}));s=function(){function n(){}return n.prototype.isPopulated=function(){return this._isDataAvailable()?!0:this._tryGetPermissionDataFromPageService()?!0:(this.initializeWorkItemPermissions(),!1)},n.prototype._isDataAvailable=function(){return!!this._permissionData},n.prototype.getWorkItemPermissions=function(){return this._permissionData},n.prototype.beginGetWorkItemPermissions=function(){var n=this;return this._loadingDataPromise||(this._loadingDataPromise=i.getService(u.ExtensionService).getContributions(["ms.vss-work-web.work-item-permissions-data-provider"],!0,!1,!1).then(function(){return n._tryGetPermissionDataFromPageService()&&c.fire(l.PERMISSION_DATA_AVAILABLE),n._permissionData})),this._loadingDataPromise},n.prototype.initializeWorkItemPermissions=function(){if(!this._isDataAvailable()&&!this._loadingDataPromise){if(this._tryGetPermissionDataFromPageService())return;this.beginGetWorkItemPermissions().then(null,function(n){o.publishErrorToTelemetry({name:"UnexpectedExceptionWhenAccessingWorkItemPermissionData",message:n})})}},n.prototype.hasWorkItemDeletePermission=function(){var n=this.getWorkItemPermissions();return!!(n&&n.workItemDeletePermission&&n.workItemDeletePermission.hasPermission)},n.prototype.hasWorkItemDestroyPermission=function(){var n=this.getWorkItemPermissions();return!!(n&&n.workItemDestroyPermission&&n.workItemDestroyPermission.hasPermission)},n.prototype._tryGetPermissionDataFromPageService=function(){var n=i.getService(u.WebPageDataService).getPageData("ms.vss-work-web.work-item-permissions-data-provider");return n?(this._permissionData=n,!0):!1},n}();t.PermissionDataHelper=s;h=new s;t.WorkItemPermissionDataHelper=h;r.getService().subscribe(r.CommonPageEvents.PageInteractive,function(){h.initializeWorkItemPermissions()})});

var __decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u};define("WorkItemTracking/Scripts/Queries/Actions/TriageViewActionsCreator",["require","exports","Presentation/Scripts/TFS/TFS.Core.WebApi","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","q","VSS/Flux/Action","VSS/Flux/Diag","VSS/Utils/String","WorkItemTracking/Scripts/OM/QueryItem","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/WorkItemPermissionDataHelper","WorkItemTracking/SharedScripts/WorkItemDialogShim"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){var v,y;Object.defineProperty(t,"__esModule",{value:!0});t.TriageViewActionsCreator=t.TriageViewActionsHub=void 0;v=function(){function n(){this.QueryInResultViewUpdated=new e.Action;this.WorkItemInEditViewUpdated=new e.Action;this.WorkItemDirtyStatusChanged=new e.Action;this.OnCommandExecute=new e.Action;this.OnToggleFilter=new e.Action;this.ProviderUpdated=new e.Action;this.OnSelectedWorkItemsChange=new e.Action;this.OnQueryStatusChanged=new e.Action;this.TempQueryWiqlAdded=new e.Action;this.CSVExportStatusChanged=new e.Action;this.WorkItemFilterCleared=new e.Action;this.WorkItemFilterApplied=new e.Action;this.WorkItemPermissionDataRetrieved=new e.Action}return __decorate([o.registerDiagActions],n)}();t.TriageViewActionsHub=v;y=function(){function n(n,t,i,r){this._actionsHub=n;this._actionsCreator=t;this._queryHierarchyItemDataProvider=i;this._tempQueryWiqlDataProvider=r}return n.prototype.applyFilters=function(n,t){this._actionsHub.WorkItemFilterApplied.invoke({isFiltering:Object.keys(t).length>0,filteredWorkItemIds:n,filterState:t})},n.prototype.clearFilter=function(){this._actionsHub.WorkItemFilterCleared.invoke({})},n.prototype.initializeWorkItemPermissions=function(){var n=this;l.WorkItemPermissionDataHelper.beginGetWorkItemPermissions().then(function(t){n._actionsHub.WorkItemPermissionDataRetrieved.invoke(t)})},n.prototype.updateNavigatorInTriageView=function(){this._actionsHub.QueryInResultViewUpdated.invoke({})},n.prototype.updateNavigatorInWorkItemEditView=function(){this._actionsHub.WorkItemInEditViewUpdated.invoke({})},n.prototype.onCommandExecute=function(n){this._actionsHub.OnCommandExecute.invoke(n)},n.prototype.showNewWorkItemDialog=function(n){a.createNewWorkItem(n)},n.prototype.onWorkItemDirtyStatusChanged=function(n){this._actionsHub.WorkItemDirtyStatusChanged.invoke(n)},n.prototype.onCSVExportStatusChanged=function(n){this._actionsHub.CSVExportStatusChanged.invoke(n)},n.prototype.toggleFilterBar=function(){this._actionsHub.OnToggleFilter.invoke({})},n.prototype.updateProvider=function(n){this._actionsHub.ProviderUpdated.invoke(n)},n.prototype.onSelectedWorkItemsChange=function(n){this._actionsHub.OnSelectedWorkItemsChange.invoke(n)},n.prototype.onQueryStatusChanged=function(n,t){this._actionsHub.OnQueryStatusChanged.invoke({primaryStatus:n,secondaryStatus:t})},n.prototype.ensureProvider=function(n,t){var i=this;t.tempQueryId?this._runQueryByTempQueryId(n,t.tempQueryId):t.newQuery?t.parentId?this._runNewQuery(n,t.parentId):this._actionsCreator.ensureRootQueryFolders().then(function(){i._runNewQuery(n,i._queryHierarchyItemDataProvider.getMyQueriesFolderItem().id)}):t.wiql?this._runQueryByWiql(n,t.wiql):t.id?this._runQueryById(n,t.id):t.searchText?this._runQueryBySearchText(n,t.searchText):t.importData?this._runImport(n):t.path&&this._runQueryByPath(n,t.path)},n.prototype._runNewQuery=function(n,t){var i=this;n.beginGetProvider(null,s.EmptyGuidString,null,function(n){i._actionsHub.ProviderUpdated.invoke(n)},t)},n.prototype._runQueryById=function(n,t){var i=this;n.beginGetProvider(null,t,null,function(n){n.resultsValid=!1;i._actionsHub.ProviderUpdated.invoke(n)},null)},n.prototype._runQueryByPath=function(n,t){var i=this;n.beginGetProvider(t,null,null,function(n){n.resultsValid=!1;i._actionsHub.ProviderUpdated.invoke(n)},null)},n.prototype._runQueryByWiql=function(n,t){var i=this,r=this._getCustomWiqlQueryData(t);n.beginGetProvider(null,h.QueryDefinition.CUSTOM_WIQL_QUERY_ID,r,function(n){n.queryDefinition.specialQuery=!0;n.queryDefinition.customQuery=!0;i._actionsHub.ProviderUpdated.invoke(n)},null)},n.prototype._runImport=function(n){var t=this,i=c.ImportWorkItems,r=n.createImportQueryDefinition(i);n.beginGetProvider(null,h.QueryDefinition.IMPORT_DATA_ID,r,function(n){var i=n;i.queryDefinition.specialQuery=!0;t._actionsHub.ProviderUpdated.invoke(n)},null)},n.prototype._runQueryBySearchText=function(n,t){var i=this,r=c.SearchResults,u=n.createSearchQueryDefinition(r);n.beginGetProvider(null,h.QueryDefinition.SEARCH_RESULTS_ID,u,function(n){var r=n;r.queryDefinition.specialQuery=!0;r.searchText!==t&&r.newSearch(t);i._actionsHub.ProviderUpdated.invoke(n)},null)},n.prototype._runQueryByTempQueryId=function(n,t){var i=this;this._getTempQueryData(n,t).then(function(r){var u=i._getCustomWiqlQueryData(r.queryText);u.queryType=r.queryType;n.beginGetProvider(null,h.QueryDefinition.CUSTOM_WIQL_QUERY_ID,u,function(n){n.queryDefinition.specialQuery=!0;n.queryDefinition.customQuery=!0;n.queryDefinition.tempQueryId=t;i._actionsHub.ProviderUpdated.invoke(n)},null)})},n.prototype._getTempQueryData=function(n,t){var o=this,e=f.defer(),s=this._tempQueryWiqlDataProvider.getQueryDataForTempId(t),h;return s?e.resolve(s):(h=u.ProjectCollection.getConnection(r.TfsContext.getDefault()).getHttpClient(i.TemporaryDataHttpClient),h.beginGetTemporaryData(t).then(function(n){var i={queryText:n.value.queryText,queryType:n.value.queryType};o._actionsHub.TempQueryWiqlAdded.invoke({tempId:t,wiql:i.queryText,queryType:i.queryType});e.resolve(i)},function(){o._actionsCreator.showErrorMessageForTriageView(c.CopyQueryURLNotFoundException)})),e.promise},n.prototype._getCustomWiqlQueryData=function(n){return{hasChildren:!1,id:h.QueryDefinition.CUSTOM_WIQL_QUERY_ID,isFolder:!1,isPublic:!1,name:c.AdhocQueryDefaultName,path:null,wiql:n}},n}();t.TriageViewActionsCreator=y});

define("Presentation/Scripts/TFS/Router/ContributionHubViewState",["require","exports","VSSPreview/Utilities/VssHubViewState"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.ContributionHubViewState=void 0;var r=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(i.VssHubViewState);t.ContributionHubViewState=r});

define("WorkItemTracking/Scripts/Queries/QueriesViewState",["require","exports","WorkItemTracking/Scripts/ActionUrls","Presentation/Scripts/TFS/Router/ContributionHubViewState","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.QueriesViewState=void 0;var e=function(n){function t(t){var r,o,e;t===void 0&&(t=null);r=this;t||(o={pivotNavigationParamDeserializer:function(n){return n.toLowerCase()},viewOptionNavigationParameters:[{key:i.ActionParameters.ACTION,rawString:!0,deserialize:function(n){return n.toLowerCase()},behavior:2},{key:i.ActionParameters.ID,rawString:!0,behavior:2},{key:i.ActionParameters.CONTEXT,rawString:!0,behavior:2},{key:i.ActionParameters.FULLSCREEN,rawString:!1,behavior:2},{key:i.ActionParameters.ISVSOPEN,rawString:!0,behavior:2},{key:i.ActionParameters.NEW_QUERY,rawString:!1,behavior:2},{key:i.ActionParameters.PARENTID,rawString:!0,behavior:2},{key:i.ActionParameters.PATH,rawString:!0,behavior:2},{key:i.ActionParameters.QUERYID,rawString:!0,behavior:2},{key:i.ActionParameters.SEARCHTEXT,rawString:!0,behavior:1},{key:i.ActionParameters.TEMPLATEID,rawString:!0,behavior:2},{key:i.ActionParameters.TEMPQUERYID,rawString:!0,behavior:2},{key:i.ActionParameters.TRIAGE,rawString:!0,behavior:2},{key:i.ActionParameters.WIQL,rawString:!0,behavior:2},{key:i.ActionParameters.WITD,rawString:!0,behavior:2},{key:i.ActionParameters.WORKITEMID,rawString:!0,behavior:2},{key:i.ActionParameters.NAME,rawString:!0,behavior:2}]},u.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.WebAccessWorkItemTrackingEnableCSVImport,!1)&&o.viewOptionNavigationParameters.push({key:i.ActionParameters.IMPORTDATA,rawString:!0,behavior:2}),t=o);r=__construct(this,n,[t]);for(e in r)r.hasOwnProperty(e)&&(this[e]=r[e]);return r}return __extends(t,n),t}(r.ContributionHubViewState);t.QueriesViewState=e});

define("WorkItemTracking/Scripts/Queries/Stores/QueryHierarchyItemStore",["require","exports","WorkItemTracking/Scripts/Queries/QueryUtilities","VSS/Flux/Store","VSS/Diag","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Utils/String"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.QueryHierarchyItemStore=void 0;var s=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._items=null,i._idToIndexStore={},i._pathToIndexStore={},i._idToPathStore={},t.InitializeQueryHierarchyItem.addListener(function(n){f.PerfScenarioManager.addSplitTiming(e.PerformanceEvents.QUERIESHUB_STORES_QUERYHIERARCHYITEMSTORE_INITIALIZEQUERYHIERARCHYITEM,!0);var t=i._createExtendedQueryHierarchyItems(n);i._onAdd(t);f.PerfScenarioManager.addSplitTiming(e.PerformanceEvents.QUERIESHUB_STORES_QUERYHIERARCHYITEMSTORE_INITIALIZEQUERYHIERARCHYITEM,!1)}),t.InitializeQueryRootHierarchyItem.addListener(function(n){var t=i._createExtendedQueryHierarchyItems(n);i._rootFolderItems=t}),t.QueryFolderChildrenLoaded.addListener(function(n){var t=[],r=function(n){var u=i._createExtendedQueryHierarchyItem(n),f,e,o;if(n.isFolder&&(u.isChildrenLoaded=n.hasChildren&&n.children&&n.children.length>0),t.push(u),u.hasChildren&&u.isChildrenLoaded)for(f=0,e=u.children;f<e.length;f++)o=e[f],r(o)};r(n);i._onAdd(t)}),t.QueryFolderEmptyContentLoaded.addListener(function(n){n&&n.isEmptyFolderContext&&i._onAdd(n)}),t.QueryFolderEmptyContentRemoved.addListener(function(n){n&&n.isEmptyFolderContext&&i._onRemove(n)}),t.QueryFolderDeleted.addListener(function(n){i._onRemove(n)}),t.QueryDeleted.addListener(function(n){i._onRemove(n)}),t.QueryItemCreated.addListener(function(n){i._onAdd(n)}),t.QueryItemUpdated.addListener(function(n){i._onAdd(n)}),t.QueryFavoriteEmptyContentAdded.addListener(function(n){n&&n.isEmptyFolderContext&&i._onAdd(n)}),t.QueryFavoriteEmptyContentRemoved.addListener(function(n){n&&n.isEmptyFolderContext&&i._onRemove(n)}),i}return __extends(t,n),t.prototype.isLoaded=function(){return this._items?!0:!1},t.prototype.areRootFolderItemsLoaded=function(){return this._rootFolderItems&&this._rootFolderItems.length>0?!0:!1},t.prototype.getMyQueriesFolderItem=function(){if(this.areRootFolderItemsLoaded()){var n=this._rootFolderItems.filter(function(n){return!n.isPublic&&n.isFolder});if(n&&n.length>0)return n[0]}return null},t.prototype.getSharedQueriesFolderItem=function(){if(this.areRootFolderItemsLoaded()){var n=this._rootFolderItems.filter(function(n){return n.isPublic&&n.isFolder});if(n&&n.length>0)return n[0]}return null},t.prototype.itemExists=function(n){return this._itemExistById(n)||this._itemExistByPath(n)},t.prototype.getItem=function(n){return this._getById(n)||this._getByPath(n)},t.prototype.getRootFolderItems=function(){return this._rootFolderItems},t.prototype.getAll=function(){var n=this;return this.isLoaded()?Object.keys(this._idToIndexStore).map(function(t){return n._items[n._idToIndexStore[t]]}):[]},t.prototype._getByPath=function(n){if(!this.isLoaded())return null;n=i.QueryUtilities.convertPathForStore(n);var t=this._pathToIndexStore[n];return typeof t=="undefined"?null:(u.Debug.assert(t<this._items.length,"QueryHierarchyItemStore: id index store out of range."),this._items[t])},t.prototype._getById=function(n){if(!this.isLoaded())return null;var t=this._idToIndexStore[n.toLowerCase()];return typeof t=="undefined"?null:(u.Debug.assert(t<this._items.length,"QueryHierarchyItemStore: id index store out of range."),this._items[t])},t.prototype._itemExistByPath=function(n){return this._getByPath(n)?!0:!1},t.prototype._itemExistById=function(n){return this._getById(n)?!0:!1},t.prototype._onAdd=function(n){var t,i,r,u;if(n){if(t=!1,this._items||(this._items=[],t=!0),Array.isArray(n))for(i=0,r=n;i<r.length;i++)u=r[i],t=this._addItem(u)||t;else t=this._addItem(n)||t;t&&this.emitChanged()}},t.prototype._onRemove=function(n){var t,i,r,u;if(n&&this.isLoaded()){if(t=!1,Array.isArray(n))for(i=0,r=n;i<r.length;i++)u=r[i],t=this._removeItem(u)||t;else t=this._removeItem(n)||t;t&&this.emitChanged()}},t.prototype._addItem=function(n){var t=n.id.toLowerCase(),r=i.QueryUtilities.convertPathForStore(n.path),u=this._items.length,h=this._getById(t),f,e,c,s,l;return h&&!this._isEqual(n,h)?(u=this._idToIndexStore[t],this._items[u]=n,f=this._idToPathStore[t],f!==undefined&&f!==r&&delete this._pathToIndexStore[f],this._idToPathStore[t]=r,this._pathToIndexStore[r]=u,e=this.getMyQueriesFolderItem(),e&&o.equals(e.id,t,!0)&&!this._isEqual(n,e)&&(c=this._rootFolderItems.findIndex(function(n){return!n.isPublic&&n.isFolder}),c>-1&&(this._rootFolderItems[c]=n)),s=this.getSharedQueriesFolderItem(),s&&o.equals(s.id,t,!0)&&!this._isEqual(n,s)&&(l=this._rootFolderItems.findIndex(function(n){return n.isPublic&&n.isFolder}),l>-1&&(this._rootFolderItems[l]=n)),!0):h?!1:(this._items.push(n),this._idToIndexStore[t]=u,this._pathToIndexStore[r]=u,this._idToPathStore[t]=r,!0)},t.prototype._removeItem=function(n){var t=n.id.toLowerCase(),r=this._idToPathStore[t],i=this._idToIndexStore[t];return typeof i=="number"?(delete this._idToIndexStore[t],delete this._idToPathStore[t],delete this._pathToIndexStore[r],i<this._items.length&&(this._items[i]=null),!0):!1},t.prototype._isEqual=function(n,t){return n.path===t.path&&n.name===t.name&&n.wiql===t.wiql&&n.isEmptyFolderContext===t.isEmptyFolderContext&&n.hasChildren===t.hasChildren&&(n.isChildrenLoaded===undefined||n.isChildrenLoaded===t.isChildrenLoaded)&&(n.isChildrenLoaded===undefined||(n.children&&n.children.length)===(t.children&&t.children.length))&&(n.isChildrenLoaded===undefined||this._isChildrenEqual(n.children,t.children))},t.prototype._isChildrenEqual=function(n,t){var r=!0,i;if(n&&t)for(i=0;i<n.length;i++)r=r&&n[i].name===t[i].name&&n[i].wiql===t[i].wiql&&n[i].path===t[i].path;return r},t.prototype._createExtendedQueryHierarchyItem=function(n){return n?__assign(__assign({},n),{isChildrenLoaded:undefined,isEmptyFolderContext:!1}):null},t.prototype._createExtendedQueryHierarchyItems=function(n){var t=this;return n?n.map(function(n){return t._createExtendedQueryHierarchyItem(n)}):null},t}(r.Store);t.QueryHierarchyItemStore=s});

define("Presentation/Scripts/TFS/Stores/Callback",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.Callback=void 0;var i=function(){function n(){this._callback=null}return n.prototype.register=function(n,t){t===void 0&&(t=null);this._callback=t?n.bind(t):n},n.prototype.unregister=function(){this._callback=null},n.prototype.invoke=function(n){this._callback&&this._callback(n)},n}();t.Callback=i});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("Presentation/Scripts/TFS/Stores/TreeStore",["require","exports","VSS/Flux/Store","VSS/Utils/String","Presentation/Scripts/TFS/Stores/Callback"],function(n,t,i,r,u){function l(n,i,r){var u,f;return i===void 0&&(i=t.DEFAULT_SEPARATOR),u=n.split(i),u[u.length-1]===""&&u.pop(),r?{folderParts:u,itemName:null}:(f=u.pop(),{folderParts:u,itemName:f})}var o,f,e,s,h,c;Object.defineProperty(t,"__esModule",{value:!0});t.defaultSplitItemPath=t.TreeStore=t.CompactMode=t.Item=t.Node=t.ActionAdapter=t.DEFAULT_SEPARATOR=void 0;t.DEFAULT_SEPARATOR="/";o=function(){function n(){this.itemsAdded=new u.Callback;this.itemsRemoved=new u.Callback;this.itemMoved=new u.Callback;this.itemRenamed=new u.Callback;this.foldersAdded=new u.Callback;this.folderRemoved=new u.Callback;this.folderMoved=new u.Callback;this.folderRenamed=new u.Callback;this.folderExpanded=new u.Callback;this.folderExpanding=new u.Callback;this.folderCollapsed=new u.Callback;this.expandAll=new u.Callback;this.collapseAll=new u.Callback;this.refreshItemsAndExpand=new u.Callback;this.refresh=new u.Callback;this.emitIfPending=new u.Callback}return n.prototype.dispose=function(){this.itemsAdded.unregister();this.itemsRemoved.unregister();this.itemMoved.unregister();this.itemRenamed.unregister();this.foldersAdded.unregister();this.folderRemoved.unregister();this.folderExpanded.unregister();this.folderExpanding.unregister();this.folderCollapsed.unregister();this.folderMoved.unregister();this.folderRenamed.unregister();this.expandAll.unregister();this.collapseAll.unregister();this.refreshItemsAndExpand.unregister();this.refresh.unregister();this.emitIfPending.unregister()},n}();t.ActionAdapter=o;f=function(){function n(n,t){this.name=n;this.getLookupName=t;this._expanded=!1;this._expanding=!1;this._folders={};this._foldersList=[];this._items=[];this._itemsLookup={}}return Object.defineProperty(n.prototype,"expanded",{get:function(){return this._expanded},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"expanding",{get:function(){return this._expanding},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"folders",{get:function(){return this._foldersList},enumerable:!1,configurable:!0}),n.prototype.expand=function(){this._expanded=!0;this._expanding=!1},n.prototype.startExpanding=function(){this._expanding=!0},n.prototype.collapse=function(){this._expanded=!1},n.prototype.folderCount=function(){return this._foldersList.length},n.prototype.itemCount=function(){return this._items.length},n.prototype.addItem=function(n){this._items.push(n);this._itemsLookup[this.getLookupName(n)]=!0},n.prototype.hasItem=function(n){var t=this.getLookupName(n);return this._itemsLookup[t]},n.prototype.removeItem=function(n){var t=this._items.indexOf(n);t>=0&&(this._items.splice(t,1),delete this._itemsLookup[this.getLookupName(n)])},n.prototype.addFolder=function(t){return this.addFolderNode(new n(t,this.getLookupName))},n.prototype.addFolderNode=function(n){if(this.hasFolder(n.name))throw new Error("Already have a folder named ".concat(n.name," in ").concat(this.name));return this._folders[this.getLookupName(n.name)]=n,this._foldersList.push(n),n},n.prototype.hasFolder=function(n){return this._folders.hasOwnProperty(this.getLookupName(n))},n.prototype.getFolder=function(n){var t=this.getLookupName(n);return this._folders.hasOwnProperty(t)&&this._folders[t]},n.prototype.removeFolder=function(n){this.hasFolder(n)&&(delete this._folders[n],this._foldersList=this._foldersList.filter(function(t){return t.name!==n}))},n.prototype.sort=function(){this._items.sort(r.ignoreCaseComparer);this._foldersList.sort(function(n,t){return r.ignoreCaseComparer(n.name,t.name)})},n}();t.Node=f;e=function(){function n(n,t,i,r,u,f,e,o){this.name=n;this.fullName=t;this.isFolder=i;this.depth=r;this.expanded=u;this.expanding=f;this.setSize=e;this.indexInParent=o}return n.folder=function(t,i,r,u,f,e,o){return new n(t,i,!0,r,u,f,e,o)},n.item=function(t,i,r,u,f){return new n(t,i,!1,r,!1,!1,u,f)},n}();t.Item=e,function(n){n.singleFolders=function(n){return n.itemCount()===0&&n.folderCount()===1};n.singleFoldersExceptFirstlevel=function(t,i){return n.singleFolders(t,i)&&i>0};n.none=function(){return!1}}(s=t.CompactMode||(t.CompactMode={}));h=function(n){function i(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);if(i._initializeOptions(t),i._reset(),i.emitManager=new c(!i._options.compareChildren,function(){return i.emitChanged()}),!i._options.adapter)throw new Error("Adapter is required in TreeStore options.");return i._adapter=i._options.adapter,i._adapter.refresh.register(i._onRefresh,i),i._adapter.refreshItemsAndExpand.register(i._onItemsRefreshedExpand,i),i._adapter.itemsAdded.register(i._onItemsAdded,i),i._adapter.itemsRemoved.register(i._onItemsRemoved,i),i._adapter.itemMoved.register(i._onItemMoved,i),i._adapter.itemRenamed.register(i._onItemRenamed,i),i._adapter.foldersAdded.register(i._onFoldersAdded,i),i._adapter.folderRemoved.register(i._onFolderRemoved,i),i._adapter.folderRenamed.register(i._onFolderRenamed,i),i._adapter.folderExpanded.register(i._onFolderExpanded,i),i._adapter.folderMoved.register(i._onFolderMoved,i),i._adapter.folderCollapsed.register(i._onFolderCollapsed,i),i._adapter.expandAll.register(i._onExpandAll,i),i._adapter.collapseAll.register(i._onCollapseAll,i),i._adapter.folderExpanding.register(i._onFolderExpanding,i),i._adapter.emitIfPending.register(i.emitIfPending,i),i}return __extends(i,n),i.prototype.dispose=function(){this._adapter&&(this._adapter.dispose&&this._adapter.dispose(),this._adapter=null);this._options=null},i.prototype.emitIfPendingInternal=function(){this._options.isDeferEmitChangedMode||this.emitIfPending()},i.prototype.emitIfPending=function(){this.emitManager.emitIfPending()},i.prototype.getAll=function(){var n=[],t=this._root.folders.length+this._root.items.length;return this._visit(this._root,-1,-1,null,null,n,!1,t,0),n},i.prototype.getVisible=function(){var n=[],t=this._root.folders.length+this._root.items.length;return this._visit(this._root,-1,-1,null,null,n,!0,t,0),n},i.prototype._visit=function(n,t,i,r,u,o,s,h,c){var nt=this,k,l,a,y,d,g;s===void 0&&(s=!1);var w=n!==this._root,b=this._options.canCompactNodeIntoChild(n,t),p=this._maybePrepend(r,n.name);w&&!b&&(k=p||this._options.separator,o.push(e.folder(this._maybePrepend(u,n.name),k,i,n.expanded,n.expanding,h,c)));l=__spreadArray(__spreadArray([],n.folders,!0),n.items,!0);this._options.compareChildren&&l.sort(function(n,t){return nt._options.compareChildren(p,n,t)});var v=w&&b,tt=v?0:1,it=v?this._maybePrepend(u,n.name):null;for(a=0;a<l.length;++a)y=l[a],y instanceof f?(!s||s&&n.expanded||v)&&(d=v?h:l.length,g=v?c:a,this._visit(y,t+1,i+tt,p,it,o,s,d,g)):(!s||n.expanded)&&o.push(e.item(y,this._maybePrepend(p,y),i+1,l.length,a))},i.prototype._maybePrepend=function(n,t){return n!==null?n+this._options.separator+t:t},i.prototype._onItemsRefreshedExpand=function(n){var t,i,r;for(this._reset(),t=0,i=n;t<i.length;t++)r=i[t],this._addItem(r);this._onExpandAll();this.emitIfPendingInternal()},i.prototype._onRefresh=function(){this._reset();this.emitManager.setPending();this.emitIfPendingInternal()},i.prototype._reset=function(){this._root=new f(null,this._options.getLookupName);this._root.expand()},i.prototype._onItemsAdded=function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],this._addItem(r);this.emitIfPendingInternal()},i.prototype._onItemsRemoved=function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],this._removeItem(r);this.emitIfPendingInternal()},i.prototype._onItemMoved=function(n){var t=n.source,r=n.target,u=this._options.splitItemPath(t).itemName,i=this._findNodeOrDeepestParent(r);this._removeItem(t);i.addItem(u);this.emitManager.setSortPending(i);this.emitIfPendingInternal()},i.prototype._onItemRenamed=function(n){var t=n.original,i=n.renamed;this._removeItem(t);this._addItem(i);this.emitIfPendingInternal()},i.prototype._onFoldersAdded=function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],this._addFolder(r);this.emitIfPendingInternal()},i.prototype._onFolderRemoved=function(n){this._removeItemOrFolder(n,!0);this.emitIfPendingInternal()},i.prototype._onFolderMoved=function(n){var t=n.source,r=n.target,u=this._findNodeOrDeepestParent(t),i=this._findNodeOrDeepestParent(r);this._removeItemOrFolder(t,!0);i.addFolderNode(u);this.emitManager.setSortPending(i);this.emitIfPendingInternal()},i.prototype._onFolderRenamed=function(n){var t=n.original,i=n.renamed,r=this._findNodeOrDeepestParent(t),u=this._findNodeOrDeepestParent(i),f;this._removeItemOrFolder(t,!0);f=this._options.splitItemPath(i).itemName;r.name=f;u.addFolderNode(r);this.emitManager.setSortPending(u);this.emitIfPendingInternal()},i.prototype._onFolderExpanding=function(n){var t=this._findNodeOrDeepestParent(n);t&&!t.expanding&&(t.startExpanding(),this.emitManager.setPending());this.emitIfPendingInternal()},i.prototype._onFolderExpanded=function(n){this._visitPath(n,function(n){return n.expand()},null);this.emitManager.setPending();this.emitIfPendingInternal()},i.prototype._onFolderCollapsed=function(n){this._visitPath(n,null,function(n){return n.collapse()});this.emitManager.setPending();this.emitIfPendingInternal()},i.prototype._findNodeOrDeepestParent=function(n){return this._visitPath(n,null,null)},i.prototype._visitPath=function(n,t,i){for(var e,o,s=this._options.splitItemPath(n,this._options.separator,!0),r=this._root,u=0,f=s.folderParts;u<f.length;u++){if(e=f[u],o=r,r=r.getFolder(e),!r)return o;t&&t(r)}return i&&i(r),r},i.prototype._onExpandAll=function(){this._visitAll(function(n){return n.expand()});this.emitManager.setPending();this.emitIfPendingInternal()},i.prototype._onCollapseAll=function(){this._visitAll(function(n){return n.collapse()});this.emitManager.setPending();this.emitIfPendingInternal()},i.prototype._visitAll=function(n){for(var r=[this._root],t,i,u,f;r.length;){for(t=r.pop(),i=0,u=t.folders;i<u.length;i++)f=u[i],r.push(f);t!==this._root&&n(t)}},i.prototype._addItem=function(n){for(var f,i=this._options.splitItemPath(n,this._options.separator,!1),t=this._root,r=0,u=i.folderParts;r<u.length;r++)f=u[r],t=this.getOrAddFolder(t,f);t.hasItem(i.itemName)||(t.addItem(i.itemName),this.emitManager.setSortPending(t))},i.prototype.getOrAddFolder=function(n,t){var i=n.getFolder(t);return i||(i=n.addFolder(t),this.emitManager.setSortPending(n)),i},i.prototype._removeItem=function(n){this._removeItemOrFolder(n,!1)},i.prototype._removeItemOrFolder=function(n,t){for(var l,e,r,o=this._options.splitItemPath(n),a=o.folderParts,s=o.itemName,h=this._root,i=this._root,u=[],f=0,c=a;f<c.length;f++)if(l=c[f],i=i.getFolder(l),u.push({current:i,previous:h}),h=i,!i)return;if(t?i.removeFolder(s):i.removeItem(s),this.emitManager.setPending(),!this._options.keepEmptyFolders)while(u.length)e=u.pop(),r=e.current,r.itemCount()===0&&r.folderCount()===0&&(e.previous.removeFolder(r.name),this.emitManager.setPending())},i.prototype._addFolder=function(n){for(var u,f=this._options.splitItemPath(n,this._options.separator,!0),i=this._root,t=0,r=f.folderParts;t<r.length;t++)u=r[t],i=this.getOrAddFolder(i,u)},i.prototype.updateOptions=function(n){this._options=this._options&&__assign(__assign({},this._options),n)},i.prototype._initializeOptions=function(n){this._options=__assign({splitItemPath:l,separator:t.DEFAULT_SEPARATOR,getLookupName:function(n){return n},canCompactNodeIntoChild:s.singleFolders},n)},i}(i.Store);t.TreeStore=h;c=function(){function n(n,t){this.shouldSort=n;this.emitChanged=t;this.nodesSortPending=[]}return n.prototype.setPending=function(){this.isRemovalEmitPending=!0},n.prototype.setSortPending=function(n){this.shouldSort&&this.nodesSortPending.indexOf(n)<0&&this.nodesSortPending.push(n)},n.prototype.emitIfPending=function(){var n,t,i;if(this.isRemovalEmitPending||this.nodesSortPending.length){for(n=0,t=this.nodesSortPending;n<t.length;n++)i=t[n],i.sort();this.emitChanged();this.isRemovalEmitPending=!1;this.nodesSortPending=[]}},n}();t.defaultSplitItemPath=l});

define("WorkItemTracking/Scripts/Queries/Stores/QueryHierarchyStore",["require","exports","Presentation/Scripts/TFS/Stores/TreeStore","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/CustomerIntelligence"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.QueryHierarchyAdapter=t.QueryHierarchyStore=void 0;f=function(n){function t(t){return n.call(this,{adapter:t,keepEmptyFolders:!0})||this}return __extends(t,n),t.prototype.isLoaded=function(){return this._root.folderCount()>0},t.prototype._visit=function(n,t,r,u,f,e,o,s,h){var v,l,y,p,c,a;if(o===void 0&&(o=!1),v=n!==this._root,l=this._maybePrepend(u,n.name),v&&(y=l||this._options.separator,e.push(i.Item.folder(this._maybePrepend(f,n.name),y,r,n.expanded,n.expanding,s,h))),!o||n.expanded){for(c=0;c<n.folders.length;++c)p=n.folders[c],this._visit(p,t+1,r+1,l,null,e,o,n.folders.length+n.items.length,c);for(c=0;c<n.items.length;++c)a=n.items[c],e.push(i.Item.item(a,this._maybePrepend(l,a),r+1,n.folders.length+n.items.length,c+n.folders.length))}},t}(i.TreeStore);t.QueryHierarchyStore=f;e=function(n){function t(t){var i=__construct(this,n,[]);for(var f in i)i.hasOwnProperty(f)&&(this[f]=i[f]);return t.InitializeQueryHierarchy.addListener(function(n){if(r.PerfScenarioManager.addSplitTiming(u.PerformanceEvents.QUERIESHUB_STORES_QUERYHIERARCHYSTORE_INITIALIZEQUERYHIERARCHY,!0),n){var t=i._getFoldersAndItems(n);i.foldersAdded.invoke(t.folders);i.itemsAdded.invoke(t.items)}else i.emitIfPending.invoke(null);r.PerfScenarioManager.addSplitTiming(u.PerformanceEvents.QUERIESHUB_STORES_QUERYHIERARCHYSTORE_INITIALIZEQUERYHIERARCHY,!1)}),t.QueryFolderChildrenLoaded.addListener(function(n){var t=[],r=[],u=function(n){var e,f,o,s;if(n.isFolder&&n.hasChildren&&n.children&&n.children.length)for(e=i._getFoldersAndItems(n.children),t=t.concat(e.folders),r=r.concat(e.items),f=0,o=n.children;f<o.length;f++)s=o[f],u(s)};u(n);i.foldersAdded.invoke(t);i.itemsAdded.invoke(r)}),t.QueryFolderEmptyContentLoaded.addListener(function(n){if(n&&n.isEmptyFolderContext){var t=i._getFoldersAndItems([n]);i.itemsAdded.invoke(t.items)}}),t.QueryFolderEmptyContentRemoved.addListener(function(n){n&&n.isEmptyFolderContext&&i.itemsRemoved.invoke([n.path])}),t.QueryFolderDeleted.addListener(function(n){i.folderRemoved.invoke(n.path)}),t.QueryDeleted.addListener(function(n){i.itemsRemoved.invoke([n.path])}),t.QueryItemCreated.addListener(function(n){n.isFolder?i.foldersAdded.invoke([n.path]):i.itemsAdded.invoke([n.path])}),t.QueryItemMoved.addListener(function(n){var u=n.isFolder,t=n.originalPath,r=n.updatedPath;u?i.folderMoved.invoke({source:t,target:r}):i.itemMoved.invoke({source:t,target:r})}),t.QueryItemRenamed.addListener(function(n){var u=n.isFolder,t=n.originalPath,r=n.renamedPath;u?i.folderRenamed.invoke({original:t,renamed:r}):i.itemRenamed.invoke({original:t,renamed:r})}),i.registerQueryFolderExpandCollapsedEvents(t),i}return __extends(t,n),t.prototype.registerQueryFolderExpandCollapsedEvents=function(n){var t=this;n.ExpandQueryFolder.addListener(function(n){t.folderExpanding.invoke(n.path)});n.QueryFolderExpanded.addListener(function(n){t.folderExpanded.invoke(n.path)});n.QueryFolderCollapsed.addListener(function(n){t.folderCollapsed.invoke(n.path)})},t.prototype._getFoldersAndItems=function(n){var t=n.filter(function(n){return n.isFolder}),i=n.filter(function(n){return!n.isFolder}),r=t.map(function(n){return n.path}),u=i.map(function(n){return n.path});return{folders:r,items:u}},t}(i.ActionAdapter);t.QueryHierarchyAdapter=e});

define("WorkItemTracking/Scripts/Queries/Stores/QueryFavoriteGroupStore",["require","exports","VSS/Flux/Store","VSS/Utils/Array","VSS/Utils/String","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Utils/PerfScenarioManager","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.QueryFavoriteGroupStore=void 0;var s=function(n){function t(t,i){var r=__construct(this,n,[]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.filterProvider=i,r._items=null,t.InitializeQueryFavoriteGroups.addListener(function(n){e.PerfScenarioManager.addSplitTiming(f.PerformanceEvents.QUERIESHUB_STORES_QUERYFAVORITEGROUPSTORE_INITIALIZEQUERYFAVORITEGROUPS,!0);r._onAdd(n);e.PerfScenarioManager.addSplitTiming(f.PerformanceEvents.QUERIESHUB_STORES_QUERYFAVORITEGROUPSTORE_INITIALIZEQUERYFAVORITEGROUPS,!1)}),t.QueryFavoriteGroupUpdated.addListener(function(n){r._onAdd(n)}),t.QueryFavoriteLoadingGroupRemoved.addListener(function(n){r._onRemoveLoadingFavoriteGroup(n)}),t.QueryFavoriteGroupsUpdated.addListener(function(n){r._onAdd(n)}),t.QueryFavoriteGroupExpanded.addListener(function(n){var t=r._items[n];t.isExpanded=!0;r._onAdd(t)}),t.QueryFavoriteGroupCollapsed.addListener(function(n){var t=r._items[n];t.isExpanded=!1;r._onAdd(t)}),t.SearchTextChanged.addListener(function(n){r.filterProvider.setFilterText(n);r.emitChanged()}),t.QueryItemRenamed.addListener(function(n){var t=n.id,i=n.name;r._onRenamed(t,i)}),t.QueryFolderDeleted.addListener(function(n){n.children&&n.children.length>0&&r._onRemove(n.children)}),r}return __extends(t,n),t.prototype.isLoaded=function(){if(!this._items)return!1;var n=!!this._items[o.QueriesConstants.LastVisitedQueryGroupKey],t=Object.keys(this._items).length;return t>1||!n},t.prototype.getFiltered=function(){return this.isLoaded()?this._getFavoriteGroups(!0):[]},t.prototype.getTeams=function(){return this.getAll().filter(function(n){return n.id!==o.QueriesConstants.MyFavoritesGroupKey&&n.id!==o.QueriesConstants.LastVisitedQueryGroupKey})},t.prototype.getAll=function(){return this.isLoaded()?this._getFavoriteGroups(!1):[]},t.prototype.get=function(n){return this.isLoaded()&&this._items[n]||null},t.prototype.isFiltering=function(){return this.filterProvider.isFiltering()},t.prototype._getFavoriteGroups=function(n){var r=this,t=Object.keys(this._items).map(function(n){return r._items[n]}),i;return n&&this.filterProvider.isFiltering()?(i=this.filterProvider.getMatchedItemIds(),this._getMatchedFavoriteGroup(t,i)):t},t.prototype._getMatchedFavoriteGroup=function(n,t){for(var f,e,o=[],i=0,s=n;i<s.length;i++)f=s[i],e=f.favorites.filter(function(n){return r.contains(t,n.artifactId,u.ignoreCaseComparer)}),e.length>0&&o.push(__assign(__assign({},f),{favorites:e}));return o},t.prototype._onAdd=function(n){var t,i,r;if(n){if(this._items||(this._items={}),Array.isArray(n))for(t=0,i=n;t<i.length;t++)r=i[t],this._addItem(r);else this._addItem(n);this.filterProvider.search();this.emitChanged()}},t.prototype._onRenamed=function(n,t){var r,e,c,i,o,f,s,h;for(this.filterProvider.clearDataProvider(),r=0,e=Object.keys(this._items);r<e.length;r++)if(c=e[r],i=this._items[c],i.favorites&&(o=i.favorites.filter(function(t){return u.equals(t.artifactId,n,!0)}),o.length>0)){for(f=0,s=o;f<s.length;f++)h=s[f],u.equals(n,h.artifactId,!0)&&(h.artifactName=t);this._sort(i.favorites);this.filterProvider.setItems(i.favorites)}this.emitChanged()},t.prototype._onRemove=function(n){var o=n.map(function(n){return n.id}),i,f,e,t;for(this.filterProvider.clearDataProvider(),i=0,f=Object.keys(this._items);i<f.length;i++)e=f[i],t=this._items[e],t.favorites&&(t.favorites=t.favorites.filter(function(n){return!r.contains(o,n.artifactId,u.ignoreCaseComparer)}),this._sort(t.favorites),this.filterProvider.setItems(t.favorites));this.emitChanged()},t.prototype._onRemoveLoadingFavoriteGroup=function(n){n&&this._items[n.id]&&delete this._items[n.id];this.emitChanged()},t.prototype._addItem=function(n){var t=n.id;return n.favorites&&this._sort(n.favorites),this._items[t]=n,this.filterProvider.setItems(n.favorites),!0},t.prototype._sort=function(n){n.sort(function(n,t){return u.ignoreCaseComparer(n.artifactName,t.artifactName)})},t}(i.Store);t.QueryFavoriteGroupStore=s});

define("WorkItemTracking/Scripts/Queries/Stores/QueryPermissionMetadataStore",["require","exports","VSS/Flux/Store"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.QueryPermissionMetadataStore=void 0;var r=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return t.InitializeQueryPermissionMetadata.addListener(function(n){i._queryItemPermissionSet=n;i.emitChanged()}),i}return __extends(t,n),t.prototype.getAll=function(){return this._queryItemPermissionSet},t}(i.Store);t.QueryPermissionMetadataStore=r});

define("WorkItemTracking/Scripts/Queries/Stores/QueryErrorMessageStore",["require","exports","VSS/Flux/Store","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.QueryErrorMessageStore=void 0;var f=function(n){function t(t){var i=__construct(this,n,[]);for(var f in i)i.hasOwnProperty(f)&&(this[f]=i[f]);return i._errorMessagesForView={},i._setGlobalErrorMessage=function(n,t){if(i._globalErrorMessage!==n)if(i._globalErrorMessage=n,t)i.emitChanged();else return!0;return!1},t.PushContributionErrorMessage.addListener(function(n){i._errorMessagesForView[n.contribution]=n.message;i.emitChanged()}),t.DismissContributionErrorMessage.addListener(function(n){var t=i._setGlobalErrorMessage(null,!1);i._errorMessagesForView[n]&&(delete i._errorMessagesForView[n],t=!0);t&&i.emitChanged()}),t.FavoritesActions.FavoritingFailed.addListener(function(n){i._setGlobalErrorMessage(r.format(u.FavoriteQueryFailed,n.favoriteItem.favorite.artifactName),!0)}),t.FavoritesActions.UnfavoritingFailed.addListener(function(n){i._setGlobalErrorMessage(r.format(u.UnfavoriteQueryFailed,n.favoriteItem.favorite.artifactName),!0)}),i}return __extends(t,n),t.prototype.getErrorForContribution=function(n){return this._globalErrorMessage?this._globalErrorMessage:this._errorMessagesForView[n]?this._errorMessagesForView[n]:null},t}(i.Store);t.QueryErrorMessageStore=f});

define("WorkItemTracking/Scripts/Queries/Stores/QueryInfoMessageStore",["require","exports","VSS/Flux/Store"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.QueryInfoMessageStore=void 0;var r=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._infoMessagesForView={},t.PushContributionInfoMessage.addListener(function(n){i._infoMessagesForView[n.contribution]=n.message;i.emitChanged()}),t.DismissContributionInfoMessage.addListener(function(n){var t=!1;i._infoMessagesForView[n]&&(delete i._infoMessagesForView[n],t=!0);t&&i.emitChanged()}),i}return __extends(t,n),t.prototype.getInfoForContribution=function(n){return this._infoMessagesForView[n]?this._infoMessagesForView[n]:null},t}(i.Store);t.QueryInfoMessageStore=r});

define("WorkItemTracking/Scripts/Queries/Stores/QueryResultsProviderStore",["require","exports","VSS/Utils/String","VSS/Flux/Store","VSS/Events/Document","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/CustomerIntelligence"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.QueryResultsProviderStore=void 0;var s=function(n){function t(t,i){var r=__construct(this,n,[]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return i.ProviderUpdated.addListener(function(n){e.PerfScenarioManager.addSplitTiming(o.PerformanceEvents.QUERIESHUB_STORES_QUERYRESULTSPROVIDERSTORE_CHANGEQUERYRESULTSPROVIDER,!0);r._unregisterRunningDocumentEntry();r._registerRunningDocumentEntry(n);r._queryResultsProvider&&n&&r._queryResultsProvider!==n&&r._queryResultsProvider.dispose();r._queryResultsProvider=n;r.emitChanged();e.PerfScenarioManager.addSplitTiming(o.PerformanceEvents.QUERIESHUB_STORES_QUERYRESULTSPROVIDERSTORE_CHANGEQUERYRESULTSPROVIDER,!1)}),t.QueryItemUpdated.addListener(function(){r.clear(!1)}),r}return __extends(t,n),t.prototype.getValue=function(){return this._queryResultsProvider},t.prototype.clear=function(n){this._unregisterRunningDocumentEntry();this._queryResultsProvider=undefined;n&&this.emitChanged()},t.prototype._registerRunningDocumentEntry=function(n){n&&(this._runningDocumentEntry||(this._runningDocumentEntry=u.getRunningDocumentsTable().add("QueryResultsProvider",{isDirty:function(){return n.isDirty()},beginSave:function(t,i){n.isDirty()&&n.beginSave(t,i)},getDirtyDocumentTitles:function(t){return t?[i.format(f.QueryDirtyDocumentTitleFormat,n.getTitle())]:[]}})))},t.prototype._unregisterRunningDocumentEntry=function(){this._runningDocumentEntry&&(u.getRunningDocumentsTable().remove(this._runningDocumentEntry),this._runningDocumentEntry=null)},t}(r.Store);t.QueryResultsProviderStore=s});

define("WorkItemTracking/Scripts/Queries/Stores/QuerySearchStore",["require","exports","VSS/Flux/Store","WorkItemTracking/Scripts/Queries/Models/Models","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Utils/String"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.QuerySearchStore=void 0;var o=function(n){function t(t){var i=__construct(this,n,[]);for(var e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);return i._emptySearchResult={value:[],count:0,hasMore:!1},i._searchResults=i._emptySearchResult,i._searchStatus=r.QuerySearchStatus.None,t.SearchTextChanged.addListener(function(n){i._searchText=n&&n.trim()?n.trim():null;i._searchResults=i._emptySearchResult;i._searchStatus=n&&n.trim()?r.QuerySearchStatus.Pending:r.QuerySearchStatus.None;i.emitChanged()}),t.QuerySearchStarted.addListener(function(){i._searchStatus=r.QuerySearchStatus.InProgress;i.emitChanged()}),t.QuerySearchFinished.addListener(function(n){i._searchStatus=r.QuerySearchStatus.ResultsReady;i._searchResults=n;n&&u.publishEvent(new u.TelemetryEventData(f.WITCustomerIntelligenceArea.NEW_QUERIES_EXPERIENCE,f.WITCustomerIntelligenceFeature.QUERY_SEARCH,{searchText:i._searchText||"",resultCount:n.count||0,hasMoreResults:n.hasMore||!1}));i.emitChanged()}),i}return __extends(t,n),t.prototype.getResults=function(){return this.sortQueries(this._searchResults.value)},t.prototype.hasMoreResults=function(){return this._searchResults.hasMore},t.prototype.getSearchStatus=function(){return this._searchStatus},t.prototype.getSearchText=function(){return this._searchText},t.prototype.sortQueries=function(n){return n.sort(function(n,t){return n.isPublic&&!t.isPublic?1:!n.isPublic&&t.isPublic?-1:e.ignoreCaseComparer(n.path,t.path)})},t}(i.Store);t.QuerySearchStore=o});

define("WorkItemTracking/Scripts/Queries/Stores/ActiveQueryViewStore",["require","exports","VSS/Flux/Store","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/CustomerIntelligence"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.ActiveQueryViewStore=void 0;var f=function(n){function t(t){var i=__construct(this,n,[]);for(var f in i)i.hasOwnProperty(f)&&(this[f]=i[f]);return t.QueryViewChanged.addListener(function(n){r.PerfScenarioManager.addSplitTiming(u.PerformanceEvents.QUERIESHUB_STORES_ACTIVEQUERYVIEWSTORE_CHANGEQUERYVIEW,!0);i.onChange(n);r.PerfScenarioManager.addSplitTiming(u.PerformanceEvents.QUERIESHUB_STORES_ACTIVEQUERYVIEWSTORE_CHANGEQUERYVIEW,!1)}),i}return __extends(t,n),t}(i.DefaultStore);t.ActiveQueryViewStore=f});

define("WorkItemTracking/Scripts/Queries/Stores/WorkItemFilterStore",["require","exports","VSS/Flux/Store"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemFilterStore=void 0;var r=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return t.WorkItemFilterCleared.addListener(function(){i._workItemFilterData={isFiltering:!1,filteredWorkItemIds:[],filterState:null}}),t.WorkItemFilterApplied.addListener(function(n){i._workItemFilterData=n}),i}return __extends(t,n),t.prototype.getWorkItemFilterData=function(){return this._workItemFilterData},t}(i.Store);t.WorkItemFilterStore=r});

define("WorkItemTracking/Scripts/Queries/Stores/TempQueryDataStore",["require","exports","VSS/Flux/Store"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.TempQueryDataStore=void 0;var r=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._tempIdToWiql={},t.TempQueryWiqlAdded.addListener(function(n){i._tempIdToWiql[n.tempId]={queryText:n.wiql,queryType:n.queryType}}),i}return __extends(t,n),t.prototype.getQueryDataForTempId=function(n){return this._tempIdToWiql[n]},t}(i.Store);t.TempQueryDataStore=r});

define("WorkItemTracking/Scripts/Queries/Stores/QueryFolderStore",["require","exports","VSS/Flux/Store"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.QueryFolderStore=void 0;var r=function(n){function t(t,i){var r=__construct(this,n,[]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.filterProvider=i,t.QueryFolderItemLoaded.addListener(function(n){r._folderIdOrPath&&n&&n.children&&(n.path===r._folderIdOrPath||n.id===r._folderIdOrPath)&&(r.filterProvider.clearDataProvider(),r.filterProvider.setItems(n.children),r.filterProvider.search())}),t.SetFolderPath.addListener(function(n){r.setFolderPath(n)}),t.SearchTextChanged.addListener(function(n){r.filterProvider.setFilterText(n);r.emitChanged()}),t.QueryItemCreated.addListener(function(n){r.filterProvider.setItems([n]);r.filterProvider.search();r.emitChanged()}),t.QueryItemRenamed.addListener(function(n){r.filterProvider.clearDataProvider();r.filterProvider.setItems([n]);r.filterProvider.search();r.emitChanged()}),r}return __extends(t,n),t.prototype.getFilteredIds=function(){return this.filterProvider.getMatchedItemIds()},t.prototype.isFiltering=function(){return this.filterProvider.isFiltering()},t.prototype.setFolderPath=function(n){this._folderIdOrPath=n},t}(i.Store);t.QueryFolderStore=r});

define("WorkItemTracking/Scripts/Queries/QueriesFilterProvider",["require","exports","VSS/Search"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.QueriesFilterProvider=void 0;var r=function(){function n(){this._searchStrategy=new i.IndexedSearchStrategy(null,{specialCharacters:[],delimiter:/[\s\\/]/});this._matchedItemIds=[];this.setItems([])}return n.prototype.setFilterText=function(n){this._filterText=n&&n.trim()||"";this.search()},n.prototype.search=function(){this.isFiltering()&&(this._matchedItemIds=this._searchStrategy.search(this._filterText))},n.prototype.isFiltering=function(){return!!this._filterText},n.prototype.getMatchedItemIds=function(){return this._matchedItemIds},n.prototype.clearDataProvider=function(){this._searchStrategy.clearStrategyStore()},n.prototype.setItems=function(n){this._searchStrategy.processItems(this.createSearchableObjects(n))},n}();t.QueriesFilterProvider=r});

define("WorkItemTracking/Scripts/Queries/FavoriteQueriesFilterProvider",["require","exports","VSS/Search","WorkItemTracking/Scripts/Queries/QueriesFilterProvider"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.FavoriteQueriesFilterProvider=void 0;var u=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.queryHierarchyItemDataProvider=t,i}return __extends(t,n),t.prototype.createSearchableObjects=function(n){for(var t,u,f,e=[],o={},r=0,s=n;r<s.length;r++)(t=s[r],!t.artifactName||t.isRemoved||t.artifactIsDeleted||o[t.artifactId.toLowerCase()])||(u=this.queryHierarchyItemDataProvider.getItem(t.artifactId),u&&(o[t.artifactId.toLowerCase()]=!0,f=new i.SearchableObject(t.artifactId,[]),f.addTerm(u.name),e.push(f)));return e},t}(r.QueriesFilterProvider);t.FavoriteQueriesFilterProvider=u});

define("WorkItemTracking/Scripts/Queries/FolderQueriesFilterProvider",["require","exports","VSS/Search","WorkItemTracking/Scripts/Queries/QueriesFilterProvider"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.FolderQueriesFilterProvider=void 0;var u=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.createSearchableObjects=function(n){for(var r,u,f=[],t=0,e=n;t<e.length;t++)r=e[t],u=new i.SearchableObject(r.id,[]),u.addTerm(r.name),f.push(u);return f},t}(r.QueriesFilterProvider);t.FolderQueriesFilterProvider=u});

define("WorkItemTracking/Scripts/Queries/Stores/StoresHub",["require","exports","WorkItemTracking/Scripts/Queries/Stores/QueryHierarchyItemStore","WorkItemTracking/Scripts/Queries/Stores/QueryHierarchyStore","WorkItemTracking/Scripts/Queries/Stores/QueryFavoriteGroupStore","WorkItemTracking/Scripts/Queries/Stores/QueryPermissionMetadataStore","WorkItemTracking/Scripts/Queries/Stores/QueryErrorMessageStore","WorkItemTracking/Scripts/Queries/Stores/QueryInfoMessageStore","WorkItemTracking/Scripts/Queries/Stores/QueryResultsProviderStore","WorkItemTracking/Scripts/Queries/Stores/QuerySearchStore","Favorites/Controls/FavoritesStore","WorkItemTracking/Scripts/Queries/Stores/ActiveQueryViewStore","WorkItemTracking/Scripts/Queries/Stores/WorkItemFilterStore","WorkItemTracking/Scripts/Queries/Stores/TempQueryDataStore","WorkItemTracking/Scripts/Queries/Stores/QueryFolderStore","WorkItemTracking/Scripts/Queries/FavoriteQueriesFilterProvider","WorkItemTracking/Scripts/Queries/FolderQueriesFilterProvider"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){Object.defineProperty(t,"__esModule",{value:!0});t.StoresHub=void 0;var b=function(){function n(n,t){this.queryHierarchyItemStore=new i.QueryHierarchyItemStore(n);this.queryHierarchyStore=new r.QueryHierarchyStore(new r.QueryHierarchyAdapter(n));this.queryFavoriteGroupStore=new u.QueryFavoriteGroupStore(n,new p.FavoriteQueriesFilterProvider(this.queryHierarchyItemStore));this.queryPermissionMetadataStore=new f.QueryPermissionMetadataStore(n);this.queryErrorMessageStore=new e.QueryErrorMessageStore(n);this.queryInfoMessageStore=new o.QueryInfoMessageStore(n);this.favoritesStore=new c.FavoritesStore(n.FavoritesActions);this.queryResultsProviderStore=new s.QueryResultsProviderStore(n,t);this.querySearchStore=new h.QuerySearchStore(n);this.activeQueryViewStore=new l.ActiveQueryViewStore(n);this.workItemFilterStore=new a.WorkItemFilterStore(t);this.tempQueryDataStore=new v.TempQueryDataStore(t);this.queryFolderStore=new y.QueryFolderStore(n,new w.FolderQueriesFilterProvider)}return n}();t.StoresHub=b});

define("Presentation/Scripts/TFS/Components/Contribution",["require","exports","react","VSS/Contributions/Controls"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.Component=void 0;var u=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._controlPromise=null,t}return __extends(t,n),t.prototype.render=function(){var t=this,n={ref:function(n){t.onRef(n)}};return this.props.cssClass&&(n.className=this.props.cssClass),i.createElement("div",n,null)},t.prototype.shouldComponentUpdate=function(n){return this.props.contribution!==n.contribution||this.props.cssClass!==n.cssClass||this.props.webContext!==n.webContext||this.props.instanceId!==n.instanceId},t.prototype.componentWillUnmount=function(){this.tryDisposeControl()},t.prototype.onRef=function(n){if(n){this.tryDisposeControl();var t=this.props.contributionHostBehavior||{showLoadingIndicator:!1,showErrorIndicator:!1,slowWarningDurationMs:0};this._controlPromise=r.createContributedControl($(n),this.props.contribution,this.props.initialConfig,this.props.webContext,this.props.instanceId,t)}},t.prototype.tryDisposeControl=function(){this._controlPromise&&this._controlPromise.then(function(n){n&&$.isFunction(n.dispose)&&n.dispose()})},t}(i.Component);t.Component=u});

define("Presentation/Scripts/TFS/TFS.React",["require","exports","react","VSS/Events/Services"],function(n,t,i,r){var u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.TfsComponent=t.Store=t.Action=void 0;u=function(){function n(t){this._listeners=[];this._scope=t||n.DefaultScope}return n.prototype.invoke=function(t){if(n.Executing[this._scope])throw new Error("Cannot invoke an action from inside another action.");n.Executing[this._scope]=!0;try{this._listeners.forEach(function(n){n(t)})}finally{n.Executing[this._scope]=!1}},n.prototype.addListener=function(n,t){this._listeners.push(t?n.bind(t):n)},n.DefaultScope="Default",n.Executing={},n}();t.Action=u;f=function(){function n(n,t){this._changedEvent=n;this._eventManager=t&&t.eventManager?t.eventManager:r.getService()}return n.prototype.addChangedListener=function(n){this.addListener(this._changedEvent,n)},n.prototype.removeChangedListener=function(n){this.removeListener(this._changedEvent,n)},n.prototype.emitChanged=function(n){this.emit(this._changedEvent,this,n)},n.prototype.emit=function(n,t,i){this._eventManager.fire(n,t,i)},n.prototype.addListener=function(n,t){this._eventManager.attachEvent(n,t)},n.prototype.removeListener=function(n,t){this._eventManager.detachEvent(n,t)},n}();t.Store=f;e=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.render=function(){var t=this,n={ref:function(n){return t.onRender(n)}};return this.props.containerCssClass&&(n.className=this.props.containerCssClass),i.createElement("div",n)},t.prototype.onRender=function(){},t}(i.Component);t.TfsComponent=e});

define("Presentation/Scripts/TFS/Components/PivotFilter",["require","exports","Presentation/Scripts/TFS/TFS.React","VSS/Controls","VSS/Controls/Navigation","VSS/Utils/Array"],function(n,t,i,r,u,f){function o(n,t){return n.encoded===t.encoded&&n.id===t.id&&n.selected===t.selected&&n.text===t.text&&n.title===t.title&&n.value===t.value}Object.defineProperty(t,"__esModule",{value:!0});t.Component=void 0;var e=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.shouldComponentUpdate=function(n){return this.props.name!==n.name||this.props.title!==n.title||this.props.behavior!==n.behavior||this.props.align!==n.align||this.props.hideFilter!==n.hideFilter||this.props.useBowtieStyle!==n.useBowtieStyle||!f.arrayEquals(this.props.items,n.items,o)},t.prototype.onRender=function(n){this._pivotFilterControl||(this._pivotFilterControl=r.create(u.PivotFilter,$(n),{behavior:this.props.behavior||"dropdown",text:this.props.title,align:this.props.align||"right-bottom",useBowtieStyle:!!this.props.useBowtieStyle,change:this.props.changedHandler,items:this.props.items}));this.props.items&&this._pivotFilterControl.updateItems(this.props.items);this.props.hideFilter?this._pivotFilterControl.hideElement():this._pivotFilterControl.showElement()},t}(i.TfsComponent);t.Component=e});

define("Presentation/Scripts/TFS/Components/PivotTabs",["require","exports","react","OfficeFabric/FocusZone","OfficeFabric/Link","OfficeFabric/CommandBar","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","VSS/LoaderPlugins/Css!Presentation/Components/PivotTabs"],function(n,t,i,r,u,f,e){function o(n){return"pivotview-header-".concat(n)}var s,h;Object.defineProperty(t,"__esModule",{value:!0});t.PivotTabs=t.getTabHeaderId=void 0;t.getTabHeaderId=o;s=function(n){return i.createElement("div",{className:"views pivot-views-container"},i.createElement(r.FocusZone,{className:"tfs-pivot-tabs-view pivot-view",direction:r.FocusZoneDirection.horizontal},i.createElement("nav",{"aria-label":e.PivotTabNavigationAriaLabel},i.createElement("div",{className:"tablist",role:"tablist"},n.items.map(function(t){return i.createElement(h,{key:t.tabKey,tabKey:t.tabKey,title:t.title,ariaLabel:t.ariaLabel?t.ariaLabel:t.title,isSelected:t.tabKey===n.selectedKey,linkUrl:n.getLink(t.tabKey),onClick:n.getClickHandler(t.tabKey)})})))),n.commandBarItems&&n.commandBarItems.length>0&&i.createElement("div",{className:"tfs-pivot-command-bar-container"},i.createElement("div",{className:"bowtie-icon bowtie-separator"}),i.createElement(f.CommandBar,{className:"tfs-pivot-command-bar",items:n.commandBarItems})))};t.PivotTabs=s;h=function(n){var t="pivotTab-link"+(n.isSelected?" is-selected":"");return i.createElement(u.Link,{role:"tab",id:o(n.tabKey),"aria-selected":n.isSelected,"aria-label":n.ariaLabel,className:t,onClick:n.onClick,href:n.linkUrl},n.title)}});

define("Presentation/Scripts/TFS/Router/PerformanceUtilities",["require","exports","VSS/Performance"],function(n,t,i){function u(n,t){var r=t?"".concat(n,".Start"):"".concat(n,".Complete");i.getScenarioManager().split(r)}Object.defineProperty(t,"__esModule",{value:!0});t.addSplitTiming=t.PerformanceEvents=void 0;var r;(function(n){n.Mount="ContributionHubViewStateRouter.Mount";n.InitializeRouter="ContributionHubViewStateRouter.Initialize.TabGroups";n.InitializeContributedActions="ContributionHubViewStateRouter.Initialize.ContributedActions";n.InitializeContributionComponent="ContributionComponent.Initialize.{0}"})(r=t.PerformanceEvents||(t.PerformanceEvents={}));t.addSplitTiming=u});

define("Presentation/Scripts/TFS/Router/ContributionComponent",["require","exports","Presentation/Scripts/TFS/Router/PerformanceUtilities","VSS/Contributions/Controls","VSS/Error","VSS/Utils/String","react"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.ContributionComponent=void 0;var o=function(n){function t(t,o){var s=__construct(this,n,[t,o]),h,l,c;for(h in s)s.hasOwnProperty(h)&&(this[h]=s[h]);return s.state={component:e.createElement("div",null)},l=s.props.contributionHostBehavior||{showLoadingIndicator:!1,showErrorIndicator:!1,slowWarningDurationMs:0},s._$contributionContainer=$("<div>"),c=f.format(i.PerformanceEvents.InitializeContributionComponent,s.props.contribution.id),i.addSplitTiming(c,!0),r.createContributedControl(s._$contributionContainer,s.props.contribution,s.props.initialConfig,s.props.webContext,s.props.instanceId,l).then(function(n){i.addSplitTiming(c,!1);s.setState({component:n})},function(n){u.publishErrorToTelemetry({name:"CreateContributionError",message:n.message})}),s}return __extends(t,n),t.prototype.render=function(){return this.state.component},t.prototype.componentWillUnmount=function(){this._$contributionContainer&&(this._$contributionContainer.remove(),this._$contributionContainer=null)},t}(e.Component);t.ContributionComponent=o});

define("Presentation/Scripts/TFS/Components/PivotView",["require","exports","react","Presentation/Scripts/TFS/Components/Contribution","Presentation/Scripts/TFS/Components/PivotFilter","Presentation/Scripts/TFS/Components/PivotTabs","Presentation/Scripts/TFS/Router/ContributionComponent","VSS/Flux/Action","VSS/Flux/Store","VSS/Context","VSS/Locations","VSS/Navigation/Services","VSS/Utils/Array","VSS/Diag","OfficeFabric/Utilities","VSS/LoaderPlugins/Css!Presentation/Components/PivotView"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var p,w,b;Object.defineProperty(t,"__esModule",{value:!0});t.ActionsHub=t.Component=void 0;var k=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(r.Component),d=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(e.ContributionComponent),g=function(n){function t(t){var i=__construct(this,n,[t]),r,u,f;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onNavigate=function(n,t){var r=t.action;i.props.items.some(function(n){return n.tabKey===r})&&i.setState(i._getState(r))},u=i.props.actions||new p,i._pivotItems=new w(u),i._pivotDataElements=new b(u),f=i.props.selectedTabKey||l.getHistoryService().getCurrentState().action||(i.props.items.length>0?i.props.items[0].tabKey:""),i.state=i._getState(f),i}return __extends(t,n),t.prototype.render=function(){var s=this,n=a.first(this.props.items,function(n){return n.tabKey===s.state.selectedTabKey}),t,r,e,o;return n||(n=this.props.items[0]),t=null,n&&n.contribution&&(r={tabKey:n.tabKey},t=this.props.useContributionComponent?i.createElement(d,{key:n.contribution.id,contribution:n.contribution,initialConfig:r}):i.createElement(k,{contribution:n.contribution,initialConfig:r})),e=null,this.state.filters&&this.state.filters.length>0&&(e=i.createElement("div",{className:"pivot-view-component filters"},i.createElement("div",{className:"filter-area"},this.state.filters.map(function(n){return i.createElement("div",{className:"filter",key:n.key},i.createElement(u.Component,__assign({},n)))})))),o=n?f.getTabHeaderId(n.tabKey):null,i.createElement("div",{className:this.props.className},i.createElement("div",{className:"hub-pivot"},i.createElement(f.PivotTabs,{items:this.props.items,commandBarItems:this.props.commandBarItems,selectedKey:n&&n.tabKey,getLink:this._getLink,getClickHandler:this._getClickHandler}),i.createElement("div",{className:"pivot-view-component data"},this.state.dataElement),e),i.createElement("div",{className:"hub-pivot-content",role:"tabpanel",id:"pivotview-tabpanel","aria-labelledby":o},t))},t.prototype.componentDidMount=function(){this._pivotItems.initialize();this._pivotDataElements.initialize();l.getHistoryService().attachNavigate(this._onNavigate);this._pivotItems.addChangedListener(this._onStoresUpdated);this._pivotDataElements.addChangedListener(this._onStoresUpdated)},t.prototype.componentWillUnmount=function(){l.getHistoryService().detachNavigate(this._onNavigate);this._pivotItems.removeChangedListener(this._onStoresUpdated);this._pivotDataElements.removeChangedListener(this._onStoresUpdated);this._pivotItems.dispose();this._pivotDataElements.dispose()},t.prototype._onStoresUpdated=function(){this.setState(this._getState(this.state.selectedTabKey))},t.prototype._getState=function(n){return{selectedTabKey:n,filters:this._pivotItems.getPivotItems(n),dataElement:this._pivotDataElements.getPivotDataElement(n)}},t.prototype._getLink=function(n){var t=a.first(this.props.items,function(t){return t.tabKey===n});if(v.Debug.assertIsNotNull(t,"Item is not available for key: "+n),t.uri)return t.uri;var i=l.getHistoryService(),u=t.contribution.properties.action||"contribution",f=i.getCurrentState(),r=i.getFragmentActionLink(u,f);return t.contribution.properties.target&&(r=c.urlHelper.getMvcUrl({webContext:h.getDefaultWebContext(),controller:t.contribution.properties.target.controller,action:t.contribution.properties.target.action})),r},t.prototype._getClickHandler=function(n){var t=a.first(this.props.items,function(t){return t.tabKey===n});return v.Debug.assertIsNotNull(t,"Item is not available for key: "+n),t.onClick},__decorate([y.autobind],t.prototype,"_onStoresUpdated",null),__decorate([y.autobind],t.prototype,"_getLink",null),__decorate([y.autobind],t.prototype,"_getClickHandler",null),t}(i.Component);t.Component=g;p=function(){function n(){this.UpdatePivotItems=new o.Action;this.UpdatePivotDataElement=new o.Action}return n}();t.ActionsHub=p;w=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._tabKeysToPivotItems={},i._initialized=!1,i._onUpdatePivotItems=function(n){n.tabKey&&n.tabKey.length>0&&(i._tabKeysToPivotItems[n.tabKey]=n.items,i.emitChanged())},i._actions=t,i.initialize(),i}return __extends(t,n),t.prototype.initialize=function(){this._actions&&!this._initialized&&(this._actions.UpdatePivotItems.addListener(this._onUpdatePivotItems),this._initialized=!0)},t.prototype.getPivotItems=function(n){return!n||n.length===0?[]:this._tabKeysToPivotItems[n]||[]},t.prototype.dispose=function(){this._actions&&this._initialized&&(this._actions.UpdatePivotItems.removeListener(this._onUpdatePivotItems),this._initialized=!1)},t}(s.Store);b=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._tabKeysToPivotDataElement={},i._initialized=!1,i._onUpdatePivotDataElement=function(n){n.tabKey&&n.tabKey.length>0&&(i._tabKeysToPivotDataElement[n.tabKey]=n.element,i.emitChanged())},i._actions=t,i.initialize(),i}return __extends(t,n),t.prototype.initialize=function(){this._actions&&!this._initialized&&(this._actions.UpdatePivotDataElement.addListener(this._onUpdatePivotDataElement),this._initialized=!0)},t.prototype.getPivotDataElement=function(n){return!n||n.length===0?null:this._tabKeysToPivotDataElement[n]||null},t.prototype.dispose=function(){this._actions&&this._initialized&&(this._actions.UpdatePivotDataElement.removeListener(this._onUpdatePivotDataElement),this._initialized=!1)},t}(s.Store)});

define("WorkItemTracking/Scripts/Queries/Actions/ActionsHub",["require","exports","Favorites/Controls/FavoritesActions","Presentation/Scripts/TFS/Components/PivotView","VSS/Flux/Action"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.ActionsHub=void 0;var f=function(){function n(){this.QueryViewChanged=new u.Action;this.InitializeQueryHierarchy=new u.Action;this.ExpandQueryFolder=new u.Action;this.QueryFolderExpanded=new u.Action;this.QueryFolderCollapsed=new u.Action;this.InitializeQueryHierarchyItem=new u.Action;this.InitializeQueryRootHierarchyItem=new u.Action;this.QueryDeleted=new u.Action;this.QueryItemCreated=new u.Action;this.QueryItemUpdated=new u.Action;this.QueryItemMoved=new u.Action;this.QueryItemRenamed=new u.Action;this.QueryFolderDeleted=new u.Action;this.QueryFolderChildrenLoaded=new u.Action;this.QueryFolderEmptyContentLoaded=new u.Action;this.QueryFolderEmptyContentRemoved=new u.Action;this.QueryFolderItemLoaded=new u.Action;this.InitializeQueryFavoriteGroups=new u.Action;this.QueryFavoriteGroupUpdated=new u.Action;this.QueryFavoriteLoadingGroupRemoved=new u.Action;this.QueryFavoriteGroupsUpdated=new u.Action;this.QueryFavoriteGroupExpanded=new u.Action;this.QueryFavoriteGroupCollapsed=new u.Action;this.QueryFavoriteEmptyContentAdded=new u.Action;this.QueryFavoriteEmptyContentRemoved=new u.Action;this.InitializeQueryPermissionMetadata=new u.Action;this.PushContributionErrorMessage=new u.Action;this.DismissContributionErrorMessage=new u.Action;this.PushContributionInfoMessage=new u.Action;this.DismissContributionInfoMessage=new u.Action;this.SearchTextChanged=new u.Action;this.QuerySearchStarted=new u.Action;this.QuerySearchFinished=new u.Action;this.PivotViewActions=new r.ActionsHub;this.FavoritesActions=new i.FavoritesActions;this.SetFolderPath=new u.Action}return n}();t.ActionsHub=f});

define("WorkItemTracking/Scripts/Queries/Components/QueriesHubContext",["require","exports","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Queries/Actions/ActionsCreator","WorkItemTracking/Scripts/Queries/Actions/NavigationActionsCreator","WorkItemTracking/Scripts/Queries/Actions/TriageViewActionsCreator","WorkItemTracking/Scripts/Queries/QueriesViewState","WorkItemTracking/Scripts/Queries/Stores/StoresHub","WorkItemTracking/Scripts/Utils/PerfScenarioManager","prop-types","WorkItemTracking/Scripts/Queries/Actions/ActionsHub"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.QueriesHubContextPropTypes=t.QueriesHubContext=void 0;var l=function(){function n(){}return n.getInstance=function(){if(!n._instance){s.PerfScenarioManager.addSplitTiming(i.PerformanceEvents.QUERIESHUB_INITIALIZE_QUERIESHUBCONTEXT,!0,undefined,!1);var h=new c.ActionsHub,l=new f.TriageViewActionsHub,t=new o.StoresHub(h,l),v=new e.QueriesViewState,a=new r.ActionsCreator(h,t.queryHierarchyItemStore,t.queryHierarchyStore,t.queryFavoriteGroupStore,t.querySearchStore,t.activeQueryViewStore,t.queryResultsProviderStore,t.favoritesStore);n._instance={actions:h,stores:t,actionsCreator:a,triageViewActions:l,triageViewActionCreator:new f.TriageViewActionsCreator(l,a,t.queryHierarchyItemStore,t.tempQueryDataStore),navigationActionsCreator:new u.NavigationActionsCreator(a,t.queryHierarchyItemStore,t.queryResultsProviderStore,v),queryHubViewState:v};s.PerfScenarioManager.addSplitTiming(i.PerformanceEvents.QUERIESHUB_INITIALIZE_QUERIESHUBCONTEXT,!1,undefined,!1)}return n._instance},n.dispose=function(){n._instance=null},n}();t.QueriesHubContext=l;t.QueriesHubContextPropTypes={actions:h.object.isRequired,stores:h.object.isRequired,actionsCreator:h.object.isRequired,triageViewActions:h.object.isRequired,triageViewActionCreator:h.object.isRequired,queryHubViewState:h.object.isRequired,navigationActionsCreator:h.object.isRequired}});

define("WorkItemTracking/Scripts/RecycleBinConstants",["require","exports","WorkItemTracking/Scripts/CustomerIntelligence"],function(n,t,i){var r,u;Object.defineProperty(t,"__esModule",{value:!0});t.RecycleBinTelemetryConstants=t.RecycleBinConstants=void 0,function(n){n.EVENT_DELETE_STARTED="recycle-bin-delete-started";n.EVENT_DELETE_FAILED="recycle-bin-delete-failed";n.EVENT_DELETE_FAILED_TEXT_ONLY="recycle-bin-delete-failed-textonly";n.EVENT_DELETE_SUCCEEDED="recycle-bin-delete-succeeded";n.EVENT_DESTROY_STARTED="recycle-bin-destroy-started";n.EVENT_DESTROY_FAILED="recycle-bin-destroy-failed";n.EVENT_DESTROY_SUCCEED="recycle-bin-destroy-succeed";n.EVENT_RESTORE_STARTED="recycle-bin-restore-started";n.EVENT_RESTORE_FAILED="recycle-bin-restore-failed";n.EVENT_RESTORE_SUCCEED="recycle-bin-restore-succeed";n.CLEANUP_SETTING_REGISTRYKEY="/Service/WorkItemTracking/Settings/MaxDaysWorkItemInRecyclebin";n.DROPPED_ON_RECYCLE_BIN_DATAKEY="dropped-on-recycle-bin"}(r=t.RecycleBinConstants||(t.RecycleBinConstants={})),function(n){n.CI_AREA=i.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING;n.WORKITEM_DELETE="WorkItemDelete";n.WORKITEM_DELETE_PROMPT="WorkItemDelete.Prompt";n.WORKITEM_RESTORE="WorkItemRestore";n.WORKITEM_DESTROY="WorkItemDestroy";n.WORKITEM_DELETE_CLIENT_DENIED="WorkItemDeleteClientDenied";n.KANBAN_SOURCE="Kanban";n.TASK_BOARD_SOURCE="TaskBoard";n.BACKLOG_SOURCE="Backlog";n.ITERATION_BACKLOG_SOURCE="IterationBacklog";n.WORK_ITEMS_VIEW_SOURCE="WorkItemsView";n.WORK_ITEMS_FORM_SOURCE="WorkItemsForm";n.UNKNOWN="Unknown";n.DRAGDROP="Dragdrop";n.CONTEXT_MENU="ContextMenu";n.TOOLBAR="Toolbar";n.DELETE_KEY="DeleteKey"}(u=t.RecycleBinTelemetryConstants||(t.RecycleBinTelemetryConstants={}))});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.RecycleBin",["require","exports","VSS/Controls","VSS/Controls/Dialogs","VSS/Events/Services","VSS/Utils/Core","VSS/Utils/UI","VSS/Events/Action","VSS/Navigation/Services","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.WebSettingsService","VSS/VSS","VSS/Service","VSS/Telemetry/Services","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Utils/WorkItemPermissionDataHelper","WorkItemTracking/Scripts/RecycleBinConstants","WorkItemTracking/Scripts/ActionUrls","jQueryUI/droppable","VSS/LoaderPlugins/Css!WorkItemArea"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){var tt,ut,rt,ft,et,ot,it;Object.defineProperty(t,"__esModule",{value:!0});t.RecycleBinTelemetry=t.DestroyConfirmationDialog=t.RestoreConfirmationDialog=t.DeleteConfirmationDialog=t.BaseConfirmationDialog=t.RecycleBin=t.recyclebinSettings=void 0;tt=u.getService();t.recyclebinSettings={};ut=function(n){function i(t){return n.call(this,t)||this}return __extends(i,n),i.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._createLayout();f.delay(this,0,function(){t.getElement().droppable({hoverClass:"dragHover",scope:t._options.dragDropScope,drop:function(n,i){t._dropHandler(i)},accept:function(){if(i._hasPermission===undefined){if(!d.WorkItemPermissionDataHelper.isPopulated())return!0;i._hasPermission=d.WorkItemPermissionDataHelper.hasWorkItemDeletePermission()}return i._hasPermission},tolerance:"pointer"})})},i.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:i.coreCssClass},t))},i.prototype._createLayout=function(){var n=i._createRecycleBinPath(this._options.tfsContext,this._options.useRelativePathToRecycleBinPage),t=$("<a>"),r=$("<div>").addClass("recycle-bin-icon").appendTo(t),u=$("<div>").addClass("content").text(w.RecycleBin).appendTo(t);this.getElement().append(t).attr("tabindex","0").attr("role","button").on("keydown click",function(t){switch(t.type){case"keydown":t.keyCode===e.KeyCode.ENTER&&(window.location.href=n);break;case"click":t.ctrlKey===!0?o.getService().performAction(o.CommonActions.ACTION_WINDOW_OPEN,{url:n,target:"_blank"}):window.location.href=n;t.stopPropagation();t.preventDefault()}})},i.prototype._dropHandler=function(n){var t=n.helper.data(this._options.dataKey),r=[],u;t&&($.isArray(t)?r=t.slice():r.push(t),u=!1,$.isFunction(this._options.notifyPageRefreshRequired)&&(u=this._options.notifyPageRefreshRequired(r)),i.beginDeleteWorkItems(g.RecycleBinTelemetryConstants.DRAGDROP,this._options.sourceAreaName,this._options.tfsContext,r,this._options.readWorkItemsBeforeDeletion,u),n.helper.data(g.RecycleBinConstants.DROPPED_ON_RECYCLE_BIN_DATAKEY,!0))},i._createRecycleBinPath=function(n,t){var i,u=(i={},i[nt.ActionUrl.ACTION]=nt.ActionUrl.ACTION_QUERY,i[nt.ActionParameters.PATH]=w.RecycleBin,i),r=s.HistoryService.serializeState(u);return t?"#"+r:n.getActionUrl(null,"Queries")+"?"+r},i.beginDeleteWorkItems=function(n,t,r,u,f,e,o,s,h,c){var a=this;u=u.filter(function(n){return n>0});var v=i._getWorkItemManager(r.contextData),b=function(n){var t=w.WorkItemBulkDeleteError;return u.length==1&&(t=p.format(w.WorkItemDeleteError,u[0],n)),p.htmlEncode(t)},k=function(i){tt.fire(g.RecycleBinConstants.EVENT_DELETE_SUCCEEDED,a,{refreshRequired:e,workItemIds:u,deleteFromForm:o});it.publish(g.RecycleBinTelemetryConstants.WORKITEM_DELETE,n,t,i.length,!0);$.isFunction(h)&&h(i)},l=function(r){r.message=b(r.message);o||(tt.fire(g.RecycleBinConstants.EVENT_DELETE_FAILED,i._createDeleteErrorMessageDom(r.message)),tt.fire(g.RecycleBinConstants.EVENT_DELETE_FAILED_TEXT_ONLY,r.message));it.publish(g.RecycleBinTelemetryConstants.WORKITEM_DELETE,n,t,u.length,!1);$.isFunction(c)&&c(r)},y=function(){var n=function(n){a._handleSuccessfulCallback(n,204,k,l,e)};v.store.beginDeleteWorkItemsBatch(u,n,l)};if(d.WorkItemPermissionDataHelper.isPopulated()&&!d.WorkItemPermissionDataHelper.hasWorkItemDeletePermission()){it.publish(g.RecycleBinTelemetryConstants.WORKITEM_DELETE_CLIENT_DENIED,n,t,u.length,!1);l(new Error(w.WorkItemDelete_NoPermission));return}tt.fire(g.RecycleBinConstants.EVENT_DELETE_STARTED,{workItemIds:u,deleteFromForm:o});f?v.beginGetWorkItems(u,function(n){if(s){var t=a._filterOutTestWorkItems(n,s);t.length>0&&(l(new Error),u=u.filter(function(n){return t.indexOf(n)<0}))}y()},l):y()},i._filterOutTestWorkItems=function(n,t){var i=[];return n&&$.each(n,function(n,r){t&&r.workItemType&&t.indexOf(r.workItemType.name)>-1&&i.push(r.id)}),i},i._createDeleteErrorMessageDom=function(n){var t=$("<div>");return t.append($("<span>").text(n+" "+w.WorkItemDeleteError_MoreInfo+" ")).append($("<a>").attr("href",i._fwlink).attr("target","_blank").attr("rel","noopener noreferrer").text(w.WorkItemDeleteError_ClickHere).click(function(n){n.stopPropagation()})),t},i.beginRestoreWorkItems=function(n,t,r,u,f,e){var s=this,h=i._getWorkItemManager(r.contextData),c=function(n){var t=w.WorkItemBulkRestoreError;return u.length==1&&(t=p.format(w.WorkItemRestoreError,u[0],n)),p.htmlEncode(t)},l=function(i){tt.fire(g.RecycleBinConstants.EVENT_RESTORE_SUCCEED,i);it.publish(g.RecycleBinTelemetryConstants.WORKITEM_RESTORE,n,t,i.length,!0);$.isFunction(f)&&f(i)},o=function(i){i.message=c(i.message);tt.fire(g.RecycleBinConstants.EVENT_RESTORE_FAILED,i.message);it.publish(g.RecycleBinTelemetryConstants.WORKITEM_RESTORE,n,t,u.length,!1);$.isFunction(e)&&e(i)};tt.fire(g.RecycleBinConstants.EVENT_RESTORE_STARTED,{workItemIds:u});h.store.beginRestoreWorkItemsBatch(u,function(n){s._handleSuccessfulCallback(n,200,l,o)},o)},i.beginDestroyWorkItems=function(n,t,r,u,f,e){var s=this,h=i._getWorkItemManager(r.contextData),c=function(n){var t=w.WorkItemBulkDestroyError;return u.length==1&&(t=p.format(w.WorkItemDestroyError,u[0],n)),p.htmlEncode(t)},l=function(i){tt.fire(g.RecycleBinConstants.EVENT_DESTROY_SUCCEED,i);it.publish(g.RecycleBinTelemetryConstants.WORKITEM_DESTROY,n,t,i.length,!0);$.isFunction(f)&&f(i)},o=function(i){i.message=c(i.message);tt.fire(g.RecycleBinConstants.EVENT_DESTROY_FAILED,i.message);it.publish(g.RecycleBinTelemetryConstants.WORKITEM_DESTROY,n,t,u.length,!1);$.isFunction(e)&&e(i)};tt.fire(g.RecycleBinConstants.EVENT_DESTROY_STARTED,{workItemIds:u});h.store.beginDestroyWorkItemsBatch(u,function(n){s._handleSuccessfulCallback(n,204,l,o)},o)},i._getWorkItemManager=function(n){var t=v.VssConnection.getConnection(n),i=t.getService(b.WorkItemStore);return k.WorkItemManager.get(i)},i._handleSuccessfulCallback=function(n,t,i,r){for(var u,s,f=[],e=[],o=0,h=n.length;o<h;o++)u=n[o],u.code===t?f.push(u):e.push(u);e.length>0&&$.isFunction(r)&&(s=$.parseJSON(e[0].body),r(new Error(s.value.Message)));f.length>0&&$.isFunction(i)&&i(f)},i.beginGetCleanUpSetting=function(n,i){var r=function(t){var i=0;t&&t.value&&t.value.match(/^\d+$/i)&&(i=parseInt(t.value,10));n(i)};a.queueRequest(this,t.recyclebinSettings,"recyclebinCleanUpSettings",r,i,function(n){c.ProjectCollection.getDefaultConnection().getService(l.WebSettingsService).beginReadSetting(g.RecycleBinConstants.CLEANUP_SETTING_REGISTRYKEY,l.WebSettingsScope.Root,n)})},i._fwlink="https://go.microsoft.com/fwlink/?LinkId=723407",i.coreCssClass="recycle-bin",i}(i.Control);t.RecycleBin=ut;a.classExtend(ut,h.TfsContext.ControlExtensions);rt=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:500,height:"auto"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);var t=$("<table>").addClass("recycle-bin-base-dialog-content"),i=$("<tr>"),r=$("<td>").addClass("bowtie-icon bowtie-status-warning");i.append(r).append(this.getConfirmationMessage());t.append(i);this.getElement().append(t)},t.prototype.getConfirmationMessage=function(){return null},t.prototype.getDialogResult=function(){return!0},t}(r.ConfirmationDialogO);t.BaseConfirmationDialog=rt;ft=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getConfirmationMessage=function(){var r=this,u=w.DeleteWorkItemDialogConfirmationText,n=$("<td>").addClass("delete-warning-message").html(u),t,i;return n.append("<br>"),t=$("<div>"),n.append(t),this._options.refreshWarningMessage&&(n.append("<br>"),n.append(this._options.refreshWarningMessage)),i=function(n){var i=n>0?p.format(w.DeleteWorkItemDialogConfirmationTextWithCleanUpScheduled,r._buildLearnMoreLink()):w.DeleteWorkItemDialogConfirmationTextWithoutCleanUpScheduled;t.append("<br>");t.append(i)},ut.beginGetCleanUpSetting(i),n},t.prototype._buildLearnMoreLink=function(){var n=$("<div>"),i=$("<a>").attr("href",t.learnMoreLink).attr("tabindex","0").attr("target","_blank").attr("rel","noopener noreferrer").text(w.DeleteWorkItemDialogConfirmationTextLearnMoreLink);return n.append(i),n.html()},t.showDialog=function(n,i){var u="";n&&(u=w.DeleteWorkItemDialogRefreshWarningMessage);r.show(t,{okCallback:function(){$.isFunction(i)&&i()},title:w.DeleteWorkItemDialogTitle,okText:w.DeleteWorkItemDeleteButtonText,refreshWarningMessage:u})},t.learnMoreLink="https://go.microsoft.com/fwlink/?LinkId=723407",t}(rt);t.DeleteConfirmationDialog=ft;a.classExtend(ft,h.TfsContext.ControlExtensions);et=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getConfirmationMessage=function(){var n=$("<td>").addClass("restore-warning-message").html(w.RestoreWorkItemDialogConfirmationText);return n.append("<br>"),n},t.showDialog=function(n){r.show(t,{okCallback:function(){$.isFunction(n)&&n()},title:w.RestoreWorkItemDialogTitle,okText:w.RestoreWorkItemDeleteButtonText})},t}(rt);t.RestoreConfirmationDialog=et;ot=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getConfirmationMessage=function(){var n=$("<td>").addClass("destroy-warning-message").html(w.DestroyWorkItemDialogConfirmationText);return n.append("<br>"),n},t.showDialog=function(n){r.show(t,{okCallback:function(){$.isFunction(n)&&n()},title:w.DestroyWorkItemDialogTitle,okText:w.DestroyWorkItemDeleteButtonText})},t}(rt);t.DestroyConfirmationDialog=ot;it=function(){function n(){}return n.publish=function(n,t,i,r,u,f){f===void 0&&(f=!1);var e={SourceName:i,SourceAction:t,ItemCount:r,Success:u};y.publishEvent(new y.TelemetryEventData(g.RecycleBinTelemetryConstants.CI_AREA,n,e),f)},n}();t.RecycleBinTelemetry=it;a.tfsModuleLoaded("TFS.WorkItemTracking.Controls.RecycleBin",t)});

define("WorkItemTracking/Scripts/Utils/Events",["require","exports"],function(n,t){var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.QueryUIEvents=t.QueryResultsGridEvents=t.FullScreenEvents=t.WorkItemEvents=void 0,function(n){n.BEFORE_BULK_EDIT="BeforeWorkItemBulkEdit";n.AFTER_BULK_EDIT="AfterWorkItemBulkEdit";n.BULK_EDIT_ERROR="WorkItemBulkEditError"}(i=t.WorkItemEvents||(t.WorkItemEvents={})),function(n){n.EXIT_FULL_SCREEN="wit-exit-fullscreen";n.FULL_SCREEN_EXITED="wit-fullscreen-mode-exited"}(r=t.FullScreenEvents||(t.FullScreenEvents={})),function(n){n.RESULTS_MODEL_CHANGED="queryResultsModelChanged"}(u=t.QueryResultsGridEvents||(t.QueryResultsGridEvents={})),function(n){n.EVENT_FOLDERTREE_SET_FOCUS_ITEM="query-folder-set-focus-item";n.EVENT_QUERYEDITOR_SET_FOCUS_ON_FIRST_ITEM="query-editor-set-focus-on-first-item";n.EVENT_SOURCE_QUERYFOLDERTREE="query-event-source-query-folder-tree";n.EVENT_SOURCE_TOOLBAR="query-event-source-toolbar"}(f=t.QueryUIEvents||(t.QueryUIEvents={}))});

define("Agile/Scripts/Backlog/Events",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogNotifications=void 0;var i=function(){function n(){}return n.BACKLOG_GRID_SELECTION_CHANGED="backlog-grid-selection-changed",n}();t.BacklogNotifications=i});

define("Agile/Scripts/BoardAnnotationsIdentifier",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.BoardAnnotationsIdentifier=void 0;var i=function(){function n(){}return n.ChecklistAnnotation="Microsoft.VSTS.Agile.ChecklistAnnotation",n.GitHubLinksAnnotation="Microsoft.VSTS.Boards.GitHubLinksAnnotation",n.TestAnnotation="Microsoft.VSTS.TestManagement.TestAnnotation",n.CardAnnotation="Microsoft.VSTS.Agile.{0}Annotation",n}();t.BoardAnnotationsIdentifier=i});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/DataProvider/RequestCache",["require","exports","q","VSS/Utils/Array","VSS/Utils/String"],function(n,t,i,r,u){var o;Object.defineProperty(t,"__esModule",{value:!0});t.RequestCache=t.CacheRequestStatus=void 0,function(n){n[n.Queued=0]="Queued";n[n.Active=1]="Active"}(o=t.CacheRequestStatus||(t.CacheRequestStatus={}));var f=function(n){return"".concat(n.tool,"/").concat(n.type,"/").concat(n.id)},e=function(n,t){if(n||t)if(n){if(!t)return 1}else return-1;else return 0;var i=u.ignoreCaseComparer(f(n),f(t));return i!==0?i:u.ignoreCaseComparer(n.linkType,t.linkType)},s=function(n,t){return n&&t&&u.ignoreCaseComparer(n.refName,t.refName)},h=function(){function n(n){this._cache={};this._queuedRequests=[];this._delay=n}return n.prototype.getArtifacts=function(t,u,o){for(var l=t.slice(0),a=[],p=[],v=[],s=null,h,y,w,c;l.length>0;){if(h=l.shift(),y=this._cache[f(h)],y){if(c=n._findOrExtendRequest(h,u,y),c){v.push(c.result);w=r.intersect([h].concat(l),c.linkedArtifacts,e);l=r.subtract(l,w,e);continue}}else if(s||this._queuedRequests.length>0){s=s||this._queuedRequests[0];n._extendRequest(h,u,s);p.push(h);continue}a.push(h)}return s&&(v.push(s.result),this._addToCache(p,s)),a.length>0&&(c=this._createNewRequest(a,u,o),v.push(c.result),this._addToCache(a,c)),i.all(v).then(function(n){return r.unique([].concat.apply([],n).filter(function(n){return r.contains(t,n,e)}),e)})},n.prototype._addToCache=function(n,t){for(var u=0,e=n;u<e.length;u++){var s=e[u],o=f(s),i=this._cache[o];i||(i=[],this._cache[o]=i);i.length!==0&&r.contains(i,t)||i.push(t)}},n.prototype._createNewRequest=function(n,t,u){var s=this,e={linkedArtifacts:n.slice(0),columns:t,status:o.Queued,result:i.delay(this._delay).then(function(){return e.status=o.Active,r.remove(s._queuedRequests,e),u(e.linkedArtifacts,e.columns).then(function(n){for(var r,t=0,i=e.linkedArtifacts;t<i.length;t++)r=i[t],delete s._cache[f(r)];return n})})};return this._queuedRequests.push(e),e},n._extendRequest=function(n,t,i){r.contains(i.linkedArtifacts,n,e)||i.linkedArtifacts.push(n);i.columns=r.union(i.columns,t,s)},n._requestContainsRequestedColumns=function(n,t){return r.intersect(n,t.columns,s).length===n.length},n._findOrExtendRequest=function(t,i,r){for(var e,h,u,f=0,s=r;f<s.length;f++)if(u=s[f],n._requestContainsRequestedColumns(i,u))return u;for(e=0,h=r;e<h.length;e++)if(u=h[e],u.status===o.Queued)return n._extendRequest(t,i,u),u;return null},n._getArtifactIdsForRequest=function(n){return n.linkedArtifacts.map(function(n){return f(n)})},n}();t.RequestCache=h});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/DataProvider/ContributedDataProviderAdapter",["require","exports","VSS/Service","VSS/Context","VSS/Utils/String","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Diag","VSS/Error","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","TFS/WorkItemTracking/ExtensionContracts","Presentation/Scripts/TFS/TFS.Core.Utils"],function(n,t,i,r,u,f,e,o,s,h,c,l){function y(n){return p(n).then(function(n){return f.getBackgroundHost(n)}).then(function(n){return n.getRegisteredInstance("ArtifactLinkProvider",r.getDefaultWebContext())}).then(function(t){return new a(n,t)})}function p(n){return i.getService(e.ExtensionService).getContributionsForTargets([v]).then(function(t){var i=t.filter(function(t){return u.ignoreCaseComparer(n,t.properties.toolId)==0}),r;if(i.length===0){r=new Error("No contribution found which supports tool: '"+n+"'");s.publishErrorToTelemetry(r);throw r;}return i.length>1&&s.publishErrorToTelemetry(new Error("Multiple contributions registered for tool "+n+". Taking the first one and ignoring others.")),i[0]})}var v,a;Object.defineProperty(t,"__esModule",{value:!0});t.ContributedDataProviderAdapter=t.getContributedLinkedArtifactDataProvider=void 0;v="ms.vss-work-web.workitem-artifact-links";t.getContributedLinkedArtifactDataProvider=y;a=function(){function n(n,t){this.supportedTool=n;this._artifactLinkProvider=t}return n.prototype.beginGetDisplayData=function(n){var t=this;return this._artifactLinkProvider.getDisplayData(l.makeCopy(n)).then(function(i){for(var u,f={},r=0,e=n;r<e.length;r++)u=e[r],f[u.id]=u;return i.map(function(n){try{t._verifyDataReturnedByExtension(n,f[n.id])}catch(i){n.error=i}return t._toInternalDisplayData(n)})},function(t){return s.publishErrorToTelemetry(t),n.map(function(){return t})})},n.prototype._verifyDataReturnedByExtension=function(n,t){if(u.ignoreCaseComparer(n.linkType,t.linkType)!=0||u.ignoreCaseComparer(n.tool,t.tool)!=0||u.ignoreCaseComparer(n.type,t.type)!=0||u.ignoreCaseComparer(n.id,t.id)!=0){var i=new Error("Read-only fields in LinkedArtifact id ${originalLinkedArtifact.id} changed by extension.");s.publishErrorToTelemetry(i);throw i;}},n.prototype._toInternalDisplayData=function(n){return{uri:n.uri,tool:n.tool,type:n.type,id:n.id,linkType:n.linkType,linkTypeDisplayName:n.linkTypeDisplayName,comment:n.comment,primaryData:this._toInternalLinkedArtifactPrimaryData(n.primaryData,n),additionalData:this._toInternalAdditionalDataDictionary(n.additionalData),error:n.error}},n.prototype._toInternalLinkedArtifactPrimaryData=function(n,t){return{typeIcon:n.typeIcon,displayId:n.displayId,title:n.title,href:n.href,typeName:t.linkTypeDisplayName,callback:null,miscData:null}},n.prototype._toInternalAdditionalDataDictionary=function(n){var t={};return!n[c.KnownColumns.State]||(t[h.InternalKnownColumns.State.refName]=n[c.KnownColumns.State]),!n[c.KnownColumns.LastUpdate]||(t[h.InternalKnownColumns.LastUpdate.refName]=n[c.KnownColumns.LastUpdate]),t},n}();t.ContributedDataProviderAdapter=a});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/DataProvider/DataProvider.Registration",["require","exports","q","VSS/VSS","VSS/Artifacts/Constants","Presentation/Scripts/TFS/Controls/LinkedArtifacts/DataProvider/ContributedDataProviderAdapter"],function(n,t,i,r,u,f){function h(n){n=n.toLowerCase();var r=o[n];return!r?f.getContributedLinkedArtifactDataProvider(n).then(function(n){return n},function(){return i.reject({message:"No linked artifacts provider registered for tool '".concat(n,"'."),type:t.ERROR_NODATAPROVIDERREGISTERED_TYPE})}):r.instancePromise?r.instancePromise:c(r,n)}function c(n,t){var u=i.defer();return r.using(n.requiredModules,function(n){try{u.resolve(new n.default)}catch(t){u.reject(t)}},function(n){u.reject(n)}),n.instancePromise=u.promise.timeout(s,"Could not resolve linked artifacts for tool '".concat(t,"' provider within ").concat(s,"ms")),n.instancePromise.then(function(n){return n},function(){n.instancePromise=null})}function l(n){return!!o[n.toLowerCase()]}var e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.inBuiltDataProviderExistsForTool=t.getLinkedArtifactProvider=t.ERROR_NODATAPROVIDERREGISTERED_TYPE=void 0;o=(e={},e[u.ToolNames.WorkItemTracking.toLowerCase()]={requiredModules:["WorkItemTracking/Scripts/DataProviders/LinkedWorkItemDataProvider"]},e[u.ToolNames.RemoteWorkItemTracking.toLowerCase()]={requiredModules:["WorkItemTracking/Scripts/DataProviders/RemoteLinkedWorkItemDataProvider"]},e[u.ToolNames.TeamBuild.toLowerCase()]={requiredModules:["Build.Common/Scripts/DataProvider/LinkedArtifactsDataProvider"]},e[u.ToolNames.Git.toLowerCase()]={requiredModules:["VersionControl/Scripts/DataProviders/GitDataProvider"]},e[u.ToolNames.VersionControl.toLowerCase()]={requiredModules:["VersionControl/Scripts/DataProviders/VersionControlDataProvider"]},e[u.ToolNames.Requirements.toLowerCase()]={requiredModules:["Requirements/Scripts/DataProviders/ExternalLinkDataProvider"]},e[u.ToolNames.Hyperlink.toLowerCase()]={requiredModules:["Requirements/Scripts/DataProviders/ExternalLinkDataProvider"]},e[u.ToolNames.TestManagement.toLowerCase()]={requiredModules:["TestManagement/Scripts/DataProviders/TestManagementDataProvider"]},e[u.ToolNames.Wiki.toLowerCase()]={requiredModules:["Wiki/Scripts/LinkedArtifactsDataProvider"]},e[u.ToolNames.GitHub.toLowerCase()]={requiredModules:["WorkItemTracking/Scripts/DataProviders/GitHubDataProvider"]},e);s=3e4;t.ERROR_NODATAPROVIDERREGISTERED_TYPE="NoDataProviderRegisteredError";t.getLinkedArtifactProvider=h;t.inBuiltDataProviderExistsForTool=l});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Constants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.ArtifactLinkTypes=void 0;var i;(function(n){n.WorkItemAsArtifactLinkType="WorkItemAsArtifactLink"})(i=t.ArtifactLinkTypes||(t.ArtifactLinkTypes={}))});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/ArtifactResolver",["require","exports","q","VSS/Utils/Array","VSS/Utils/String","VSS/Error","VSS/Controls/Notifications","Presentation/Scripts/TFS/Controls/LinkedArtifacts/DataProvider/RequestCache","Presentation/Scripts/TFS/Controls/LinkedArtifacts/DataProvider/DataProvider.Registration","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Constants","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","VSS/Utils/Accessibility"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){Object.defineProperty(t,"__esModule",{value:!0});t.ArtifactResolver=void 0;var v=4,y=function(){function n(){this._requestCaches={}}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.invalidateArtifactCacheEntry=function(t,i,r){t.invalidate(n._getWriteArtifactCacheKey(i,r))},n.getArtifactCacheEntry=function(t,i,r){return t.get(n._getWriteArtifactCacheKey(i,r))},n.prototype.resolveArtifacts=function(t,o,c,a,v,y){var p=this,d=t.slice(0),w=[],b=this._groupLinkedArtifactsByTool(d),g=Object.keys(b),nt=g.map(function(t){return p._getDataProvider(t).then(function(f){var s,k,d,g,nt,tt;return f?(s=b[t],f.artifactLimit&&s.length>=f.artifactLimit&&(s=n._getLimitedNumberOfArtifacts(f.artifactLimit,s),w.push({type:e.MessageAreaType.Warning,text:l.LinkedArtifacts_TooManyLinks})),k=v&&v(t),d=[],y&&(g=[],d=s.map(function(n){var t=p._getArtifactFromCache(y,n,o);return t&&k&&(!f.filter||!f.filter(t,k,c))?(g.push(n),null):t}).filter(function(n){return!!n}),nt=function(n,t){return u.equals(n.uri,t.uri,!0)&&u.equals(n.linkType,t.linkType,!0)?0:1},s=r.subtract(s,d,nt),s=r.subtract(s,g,nt)),s.length===0)?i(d):(tt=p._getRequestCacheForTool(t),tt.getArtifacts(s,o,p._retrieveItemsFromDataProvider.bind(p,f,a,k,c)).then(function(t){for(var i,r=0,u=t;r<u.length;r++)i=u[r],p._ensureCommentDataForArtifact(i),y&&i.linkType!==h.ArtifactLinkTypes.WorkItemAsArtifactLinkType&&y.set(n._getWriteArtifactCacheKey(i,o),i);return k&&f.filter&&(t=t.filter(function(n){return f.filter(n,k,c)})),t.concat(d)})):(w.push({type:e.MessageAreaType.Error,text:u.format(l.LinkedArtifacts_DataProvider_Null,t)}),b[t].map(function(n){return p._defaultDisplayFromLinkedArtifact(n)}))},function(n){return n.type===s.ERROR_NODATAPROVIDERREGISTERED_TYPE?(w.push({type:e.MessageAreaType.Error,text:u.format(l.LinkedArtifacts_DataProvider_NotRegistered,t)}),b[t].map(function(n){return p._defaultDisplayFromLinkedArtifact(n)})):(w.push({type:e.MessageAreaType.Error,text:l.LinkedArtifacts_DataProvider_CouldNotBeResolved}),n.name="DataProviderNotResolvedError",f.publishErrorToTelemetry(n),[])})}),k=[];return i.allSettled(nt).then(function(n){for(var i,u,t=0,r=n;t<r.length;t++)i=r[t],i.state==="fulfilled"?(u=i.value,k=k.concat(u)):w.push({type:e.MessageAreaType.Error,text:i.reason});return{resolvedArtifacts:k,messages:w}})},n.prototype._retrieveItemsFromDataProvider=function(n,t,i,r,u,f){var o=this,e=n.beginGetDisplayData(u,f,t,r).then(function(t){return i||o._reportErrorsForUnresolvedArtifacts(n.supportedTool,u,t),t});return a.ProgressAnnouncer.forPromise(e,{announceStartMessage:l.LinkedArtifacts_LoadingStart,announceEndMessage:l.LinkedArtifacts_LoadingEnd,announceErrorMessage:l.LinkedArtifacts_LoadingError}),e},n.prototype._defaultDisplayFromLinkedArtifact=function(n){return{id:n.id,linkType:n.linkType,linkTypeDisplayName:n.linkTypeDisplayName,primaryData:{displayId:n.id,href:null,title:n.uri,typeIcon:null},tool:n.tool,type:n.type}},n.prototype._ensureCommentDataForArtifact=function(n){n.comment&&(n.additionalData||(n.additionalData={}),n.additionalData[c.InternalKnownColumns.Comment.refName]||(n.additionalData[c.InternalKnownColumns.Comment.refName]={styledText:{text:n.comment},title:n.comment}))},n.prototype._getDataProvider=function(n){return s.getLinkedArtifactProvider(n)},n.prototype._groupLinkedArtifactsByTool=function(n){for(var t,i={},r=0,u=n;r<u.length;r++)t=u[r],i[t.tool]=(i[t.tool]||[]).concat([t]);return i},n.prototype._getArtifactFromCache=function(t,i,r){var u=n._getArtifactCacheKey(i),f=t.get(u);return f?f:(u=n._getArtifactCacheKey(i,r),t.get(u))},n.prototype._getRequestCacheForTool=function(n){return this._requestCaches[n]||(this._requestCaches[n]=new o.RequestCache(v)),this._requestCaches[n]},n.prototype._reportErrorsForUnresolvedArtifacts=function(n,t,i){var c=r.subtract(t,i,function(n,t){return u.ignoreCaseComparer(n.uri,t.uri)}),o,l,e,s,h;if(c.length!==t.length)for(o=this._groupLinkedArtifactsByTool(c),l=Object.keys(o),e=0,s=l;e<s.length;e++)h=s[e],f.publishErrorToTelemetry({message:u.localeFormat("'{0}' dataprovider did not resolve following artifacts '{1}'",h,JSON.stringify(o[h])),name:"ToolDidNotResolveArtifacts"})},n._getLimitedNumberOfArtifacts=function(t,i){var s=n.groupLinkedArtifactsByLinkType(i),r,u,e,o,f;for(s.sort(function(n,t){return n.linkedArtifacts.length-t.linkedArtifacts.length}),r=[],u=0,e=s;u<e.length;u++){for(o=e[u],f=0;f<o.linkedArtifacts.length&&r.length<t;++f)r.push(o.linkedArtifacts[f]);if(r.length===t)break}return r},n.groupLinkedArtifactsByLinkType=function(n){for(var f={},e=[],i=0,o=n;i<o.length;i++){var r=o[i],u=r.linkType||"",t=f[u];t||(t={displayName:r.linkTypeDisplayName,linkType:u,linkedArtifacts:[]},f[u]=t,e.push(t));t.linkedArtifacts.push(r)}return e},n._getArtifactCacheKey=function(n,t){var i="".concat(n.uri||n.id,"-").concat(n.linkType),r;return t?(r=t.map(function(n){return n.refName}).join(),"".concat(i,"-").concat(r)):i},n._getWriteArtifactCacheKey=function(n,t){return n.isColumnDependent?this._getArtifactCacheKey(n,t):this._getArtifactCacheKey(n)},n}();t.ArtifactResolver=y});

define("WorkItemTracking/Scripts/Controls/Query/ParentFieldProvider",["require","exports","VSS/Diag","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/ArtifactResolver","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","VSS/Artifacts/Constants","WorkItemTracking/Scripts/OM/WorkItemConstants"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.ParentFieldProvider=void 0;var o=function(){function n(){this._cache={}}return n.prototype.set=function(n,t){this._cache[n]=t},n.prototype.get=function(n){return this._cache[n]},n.prototype.invalidate=function(n){delete this._cache[n]},n}(),s=function(){function n(n,t){i.Debug.assertParamIsObject(n,"tfsContext");this._tfsContext=n;this._projectName=t}return n.prototype.get=function(n){if(this._artifactCache!==undefined){var t=r.ArtifactResolver.getArtifactCacheEntry(this._artifactCache,this.createLinkedArtifact(n),[]);if(t)return this.createParentInfo(t)}return undefined},n.prototype.load=function(n){var t=this;return new Promise(function(i){if(n.length){var u=[];n.forEach(function(n){u.push(t.createLinkedArtifact(n))});t._artifactCache||(t._artifactCache=new o);r.ArtifactResolver.getInstance().resolveArtifacts(u,[],t.createHostArtifact(),t._tfsContext,undefined,t._artifactCache).then(function(n){var r=[];n.resolvedArtifacts&&n.resolvedArtifacts.forEach(function(n){n.error||r.push(t.createParentInfo(n))});i(r)})}else i([])})},n.prototype.invalidate=function(n){this._artifactCache&&r.ArtifactResolver.invalidateArtifactCacheEntry(this._artifactCache,this.createLinkedArtifact(n),[])},n.prototype.createParentInfo=function(n){return{id:Number(n.id),type:n.error?"":n.primaryData.typeName,project:n.error?"":n.miscData.TeamProject,title:n.error?"":n.primaryData.title,error:n.error}},n.prototype.createLinkedArtifact=function(n){return{id:""+n,linkTypeDisplayName:"",uri:""+n,linkType:e.LinkTypeName.Parent_Link_Name,tool:f.ToolNames.WorkItemTracking,type:f.ArtifactTypeNames.WorkItem,isColumnDependent:!0}},n.prototype.createHostArtifact=function(){var n;return{id:"",tool:f.ToolNames.WorkItemTracking,type:f.ArtifactTypeNames.WorkItem,additionalData:(n={},n[u.HostArtifactAdditionalData.ProjectName]=this._projectName,n)}},n}();t.ParentFieldProvider=s});

define("Agile/Scripts/Common/BoardParentDataProvider",["require","exports","WorkItemTracking/Scripts/Controls/Query/ParentFieldProvider","WorkItemTracking/Scripts/OM/WorkItemManager","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/TFS.WorkItemTracking","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.BoardParentDataProvider=void 0;var s=function(){function n(n){this._provider=null;this._workItemSource=n}return n.getInstance=function(){return n._dataProvider},n.clear=function(){n._dataProvider&&(n._dataProvider._provider=null,n._dataProvider._workItemSource=null,n._dataProvider=null)},n.create=function(t){n._dataProvider=new n(t)},n.prototype.get=function(n){var t=this;return new Promise(function(i){var r=t.getCached(n);r?i(r):t._provider.load([n]).then(function(n){i(n[0])})})},n.prototype.getCached=function(n){var h=r.WorkItemManager.get(f.ProjectCollection.getDefaultConnection().getService(e.WorkItemStore)),t=h.getWorkItem(n),s;return t?{id:n,type:t.workItemType.name,project:t.project.name,title:t.getTitle()}:this._workItemSource.hasWorkItem(n)?{id:n,type:this._workItemSource.getFieldValue(n,o.CoreFieldRefNames.WorkItemType),project:this._workItemSource.getFieldValue(n,o.CoreFieldRefNames.TeamProject)||u.TfsContext.getDefault().navigation.project,title:this._workItemSource.getFieldValue(n,o.CoreFieldRefNames.Title)}:(this._provider||(s=u.TfsContext.getDefault(),this._provider=new i.ParentFieldProvider(s,s.navigation.project)),this._provider.get(n))},n.prototype.invalidate=function(n){this._provider&&this._provider.invalidate(n)},n}();t.BoardParentDataProvider=s});

define("Agile/Scripts/Common/EmbeddedHelper",["require","exports","VSS/Navigation/Services","VSS/Utils/String"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.EmbeddedHelper=void 0;var u;(function(n){function f(){var n=i.getHistoryService().getCurrentState();t=n&&r.localeIgnoreCaseComparer(n[e],"true")===0}function o(){return u||(f(),u=!0),t}var e="embedded",t,u;n.initialize=f;n.isEmbedded=o})(u=t.EmbeddedHelper||(t.EmbeddedHelper={}))});

define("TFS/WorkItemTracking/DataProviderContracts",["require","exports"],function(n,t){"use strict";var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.ResultSet=t.OperationType=t.ExternalArtifactType=t.ConnectionErrorType=void 0,function(n){n[n.BadCredentials=0]="BadCredentials";n[n.AppUninstalled=1]="AppUninstalled";n[n.OAuthConfigurationDeleted=2]="OAuthConfigurationDeleted";n[n.UnreachableRepositories=3]="UnreachableRepositories";n[n.NoRepositories=4]="NoRepositories";n[n.RepositoriesMappedToDifferentOrganization=5]="RepositoriesMappedToDifferentOrganization"}(i=t.ConnectionErrorType||(t.ConnectionErrorType={})),function(n){n[n.Unknown=0]="Unknown";n[n.PullRequest=1]="PullRequest";n[n.Commit=2]="Commit";n[n.Issue=3]="Issue"}(r=t.ExternalArtifactType||(t.ExternalArtifactType={})),function(n){n[n.Create=0]="Create";n[n.Update=1]="Update";n[n.Delete=2]="Delete"}(u=t.OperationType||(t.OperationType={})),function(n){n[n.All=0]="All";n[n.Top=1]="Top"}(f=t.ResultSet||(t.ResultSet={}));t.TypeInfo={ConnectionErrorType:{enumValues:{badCredentials:0,appUninstalled:1,oAuthConfigurationDeleted:2,unreachableRepositories:3,noRepositories:4,repositoriesMappedToDifferentOrganization:5}},ExternalArtifactType:{enumValues:{unknown:0,pullRequest:1,commit:2,issue:3}},ExternalConnection:{},ExternalConnectionData:{},ExternalConnectionOperation:{},ExternalConnectionProvisionResult:{},ExternalLinkedArtifact:{},ExternalLinkedArtifactIdentifier:{},GitHubLinkItemsRequest:{},GitHubLinkItemsResponse:{},GitHubLinksAnnotationItemSourceDataProviderResponse:{},GitHubRepositoryListDataProviderRequest:{},GitHubRepositoryResponse:{},GitHubUnifiedInstallationResponse:{},OperationType:{enumValues:{create:0,update:1,"delete":2}},RepositoryListData:{},ResultSet:{enumValues:{all:0,top:1}},ResultSetItem:{},SaveExternalConnectionRequest:{},WorkItemsRecencyDataProviderData:{}};t.TypeInfo.ExternalConnection.fields={connectionErrorType:{enumType:t.TypeInfo.ConnectionErrorType}};t.TypeInfo.ExternalConnectionData.fields={externalConnections:{isArray:!0,typeInfo:t.TypeInfo.ExternalConnection}};t.TypeInfo.ExternalConnectionOperation.fields={operation:{enumType:t.TypeInfo.OperationType}};t.TypeInfo.ExternalConnectionProvisionResult.fields={provisionedConnection:{typeInfo:t.TypeInfo.ExternalConnection}};t.TypeInfo.ExternalLinkedArtifact.fields={date:{isDate:!0},itemType:{enumType:t.TypeInfo.ExternalArtifactType}};t.TypeInfo.ExternalLinkedArtifactIdentifier.fields={itemType:{enumType:t.TypeInfo.ExternalArtifactType}};t.TypeInfo.GitHubLinkItemsRequest.fields={identifiers:{isArray:!0,typeInfo:t.TypeInfo.ExternalLinkedArtifactIdentifier}};t.TypeInfo.GitHubLinkItemsResponse.fields={resolvedLinkItems:{isArray:!0,typeInfo:t.TypeInfo.ExternalLinkedArtifact}};t.TypeInfo.GitHubLinksAnnotationItemSourceDataProviderResponse.fields={links:{isDictionary:!0,dictionaryValueFieldInfo:{isArray:!0,typeInfo:t.TypeInfo.ExternalLinkedArtifactIdentifier}}};t.TypeInfo.GitHubRepositoryListDataProviderRequest.fields={resultSet:{enumType:t.TypeInfo.ResultSet}};t.TypeInfo.GitHubRepositoryResponse.fields={externalConnectionProvisionResult:{typeInfo:t.TypeInfo.ExternalConnectionProvisionResult},repositoryData:{typeInfo:t.TypeInfo.RepositoryListData}};t.TypeInfo.GitHubUnifiedInstallationResponse.fields={externalConnectionProvisionResult:{typeInfo:t.TypeInfo.ExternalConnectionProvisionResult}};t.TypeInfo.RepositoryListData.fields={currentResults:{typeInfo:t.TypeInfo.ResultSetItem},resultSets:{isArray:!0,typeInfo:t.TypeInfo.ResultSetItem}};t.TypeInfo.ResultSetItem.fields={key:{enumType:t.TypeInfo.ResultSet}};t.TypeInfo.SaveExternalConnectionRequest.fields={externalConnection:{typeInfo:t.TypeInfo.ExternalConnectionOperation}};t.TypeInfo.WorkItemsRecencyDataProviderData.fields={workItemLinksChangedDate:{isDate:!0},workItemsChangedDate:{isDate:!0}}});

define("WorkItemTracking/Scripts/Utils/GitHubArtifactLink",["require","exports","VSS/Artifacts/Constants","VSS/Artifacts/Services","WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Utils","VSS/Error","TFS/WorkItemTracking/DataProviderContracts","VSS/Diag","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u,f,e,o,s){function h(n,t,i){return r.LinkingUtilities.encodeUri({tool:n,type:t,id:[i.repoInternalId,i.numberOrSHA].join(r.LinkingUtilities.URI_SEPARATOR)})}function c(n){try{var t=r.LinkingUtilities.decodeUri(n.linkData.FilePath),i=n.linkData.externalLinkContext||a(t);return{comment:n.getComment(),id:t.id,tool:t.tool,type:t.type,uri:t.uri,linkType:n.getArtifactLinkType(),linkTypeDisplayName:u.getRegisteredLinkName(n.getArtifactLinkType(),n.workItem.store),externalLinkedArtifactContext:i}}catch(e){return f.publishErrorToTelemetry(new Error("Invalid artifact link: ".concat(n.linkData.FilePath," "))),null}}function l(n){try{var t=h(i.ToolNames.GitHub,e.ExternalArtifactType[n.itemType],n);return{linkTypeDisplayName:y(n.itemType),externalLinkedArtifactContext:n,uri:t}}catch(r){return f.publishErrorToTelemetry(new Error("Invalid identifier: ".concat(JSON.stringify(n)," "))),null}}function a(n){var t,u;if(n.tool!==i.ToolNames.GitHub||(t=n.id,u=t.split(r.LinkingUtilities.URI_SEPARATOR),!u||u.length<2))return undefined;var f=t.split(r.LinkingUtilities.URI_SEPARATOR),e=f[0],o=f[1];return{itemType:v(n.type),repoInternalId:e,numberOrSHA:o}}function v(n){switch(n){case i.ArtifactTypeNames.Commit:return e.ExternalArtifactType.Commit;case i.ArtifactTypeNames.PullRequest:return e.ExternalArtifactType.PullRequest;case i.ArtifactTypeNames.Issue:return e.ExternalArtifactType.Issue}o.Debug.fail("Unsupported artifact type ".concat(n))}function y(n){switch(n){case e.ExternalArtifactType.Commit:return s.LinksControlGitHubCommitText;case e.ExternalArtifactType.PullRequest:return s.LinksControlGitHubPullRequestText;case e.ExternalArtifactType.Issue:return s.LinksControlGitHubIssueText}o.Debug.fail("Unsupported external artifact type ".concat(n))}function p(n){switch(n){case e.ExternalArtifactType.Commit:return"BranchCommit";case e.ExternalArtifactType.PullRequest:return"BranchPullRequest";case e.ExternalArtifactType.Issue:return"WorkItem";default:return"ErrorBadge"}}Object.defineProperty(t,"__esModule",{value:!0});t.getArtifactTypeFabricIconName=t.createGitHubArtifactFromExternalLinkedArtifactIdentifier=t.createGitHubArtifactFromExternalLink=t.createGitHubArtifactUrlFromIdentifier=void 0;t.createGitHubArtifactUrlFromIdentifier=h;t.createGitHubArtifactFromExternalLink=c;t.createGitHubArtifactFromExternalLinkedArtifactIdentifier=l;t.getArtifactTypeFabricIconName=p});

define("WorkItemTracking/Scripts/Controls/Links/LinkMapper",["require","exports","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/Error","VSS/Utils/String","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Utils","WorkItemTracking/Scripts/Utils/GitHubArtifactLink"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.LinkMapper=void 0;var h=function(){function n(n){this._workItemStore=n}return n.prototype.mapLinks=function(n,t){var r=this,i;return(t===void 0&&(t=!0),!n)?null:(i=n.map(function(n){return{link:n,mappedLink:r.mapLink(n,t)}}),t&&(i=i.filter(function(n){return!!n&&!!n.mappedLink})),i)},n.prototype.mapLink=function(n,t){if(t===void 0&&(t=!0),t&&(n.isRemoved()||n.deleted))return null;var i;if(n instanceof e.WorkItemLink)i=this._mapWorkItemLink(n);else if(n instanceof e.ExternalLink)i=this._mapExternalLink(n);else if(n instanceof e.Hyperlink)i=this._mapHyperLink(n);else{if(n instanceof e.Attachment)return null;u.publishErrorToTelemetry(new Error("Unexpected link type encountered"))}return i?(this._mapCommonData(n,i),i):(u.publishErrorToTelemetry(new Error("Could not map link")),null)},n.prototype._mapWorkItemLink=function(n){var e=this._workItemStore.findLinkTypeEnd(n.linkData.LinkType),s=e.linkType.isDirectional,o,t,u;return o=s?e.immutableName:e.linkType.referenceName,t={id:n.linkData.ID.toString(10),tool:i.ToolNames.WorkItemTracking,type:i.ArtifactTypeNames.WorkItem,linkType:o,linkTypeDisplayName:e.name,uri:r.LinkingUtilities.encodeUri({tool:i.ToolNames.WorkItemTracking,type:i.ArtifactTypeNames.WorkItem,id:n.linkData.ID.toString(10)}),isLocked:n.isLocked},u=n.remoteHostId,u&&f.isGuid(u)&&!f.isEmptyGuid(u)&&(t.uri=r.LinkingUtilities.encodeUri({tool:"".concat(i.ToolNames.RemoteWorkItemTracking," - ").concat(u),type:i.ArtifactTypeNames.WorkItem,id:n.linkData.ID.toString(10)}),t.tool=i.ToolNames.RemoteWorkItemTracking,t.remoteHostId=u,t.remoteProjectId=n.remoteProjectId,t.remoteHostUrl=n.remoteHostUrl,t.remoteHostName=n.remoteHostName,t.remoteStatus=n.remoteStatus),t},n.prototype._mapExternalLink=function(n){return s.createGitHubArtifactFromExternalLink(n)},n.prototype._mapHyperLink=function(n){return{comment:n.getComment(),id:n.getLocation(),linkType:n.getArtifactLinkType(),linkTypeDisplayName:o.getRegisteredLinkName(n.getArtifactLinkType(),n.workItem.store),tool:i.ToolNames.Hyperlink,type:n.getArtifactLinkType(),uri:n.getLocation()}},n.prototype._mapCommonData=function(n,t){t.comment=n.getComment()},n}();t.LinkMapper=h});

define("WorkItemTracking/Scripts/Utils/AreaPathHelper",["require","exports"],function(n,t){function i(n){var t=n?n.split("\\"):[""];return t[t.length-1]}Object.defineProperty(t,"__esModule",{value:!0});t.getAreaPathLeafNode=void 0;t.getAreaPathLeafNode=i});

define("WorkItemTracking/Scripts/Filtering/AreaPathFilterProvider",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Filtering/FieldFilterProvider","WorkItemTracking/Scripts/Utils/AreaPathHelper"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.AreaPathFilterProvider=void 0;var f=function(n){function t(){return n.call(this,i.CoreFieldRefNames.AreaPath)||this}return __extends(t,n),t.prototype.matchesFilter=function(n){var t=u.getAreaPathLeafNode(n);return t in this._filterValueMap?!0:!1},t}(r.FieldFilterProvider);t.AreaPathFilterProvider=f});

define("WorkItemTracking/Scripts/Filtering/IterationPathFilterProvider",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","WorkItemTracking/Scripts/Filtering/FieldFilterProvider","VSS/Utils/String","WorkItemTracking/Scripts/OM/WiqlOperators"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.IterationPathFilterProvider=void 0;var h=function(n){function t(t){var r=n.call(this,i.CoreFieldRefNames.IterationPath)||this;return r._teamId=t,r}return __extends(t,n),t.prototype.setFilter=function(t){var c,i,e,h;for(n.prototype.setFilter.call(this,t),c=Object.keys(this._filterValueMap),i=0,e=c;i<e.length;i++)if(h=e[i],o.equals(h,s.WiqlOperators.MacroCurrentIteration,!0)){var a=r.ProjectCollection.getConnection(u.TfsContext.getDefault()).getService(f.TeamAwarenessService),l=a.getTeamSettings(this._teamId),v=l.currentIteration&&l.currentIteration.friendlyPath;delete this._filterValueMap[h];this._filterValueMap[v]=!0}},t}(e.FieldFilterProvider);t.IterationPathFilterProvider=h});

define("WorkItemTracking/Scripts/Utils/PageWorkItemHelper",["require","exports","VSS/Service","TFS/WorkItemTracking/Contracts","TFS/WorkItemTracking/RestClient","Presentation/Scripts/TFS/TFS.Host.TfsContext"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.PageWorkItemHelper=void 0;var e=function(){function n(){}return n.pageWorkItems=function(t,i,r){for(var o,s=n,f=[],u=[],e=0,h=t;e<h.length;e++)o=h[e],u.length>=200?(f.push(s._pageWorkItems(u,i,r)),u=[o]):u.push(o);return u.length>0&&f.push(s._pageWorkItems(u,i,r)),Promise.all(f).then(function(n){for(var u,t=[],i=0,r=n;i<r.length;i++)u=r[i],t.push.apply(t,u);return t})},n._pageWorkItems=function(t,i,u){return __awaiter(this,void 0,void 0,function(){var f;return __generator(this,function(e){switch(e.label){case 0:return f=n._getHttpClient(),[4,f.getWorkItemsBatch({$expand:undefined,asOf:undefined,errorPolicy:r.WorkItemErrorPolicy.Omit,fields:u,ids:t},i)];case 1:return[2,e.sent()]}})})},n._getHttpClient=function(){var n=f.TfsContext.getDefault(),t=new i.VssConnection(n.contextData);return t.getHttpClient(u.WorkItemTrackingHttpClient)},n}();t.PageWorkItemHelper=e});

define("Agile/Scripts/Resources/TFS.Resources.AgileTaskboard",["require","exports"],function(require,exports){var e=exports;e.Taskboard_ContextMenu_Label="Actions";e.Taskboard_PeopleClassification_ReorderMessage="Ordering cards is disabled, because the task board is grouped by people.";e.Move_Required_Fields_Dialog_Ignore_Button="Ignore";e.Taskboard_AccessibilityTableSummary="The column headers represent the State values, and the row headers represent the following field: {0}. Each intersection of these fields can contain more than one work item.";e.Tile_AriaDescribedBy_AssignToSuffix="assign to";e.Taskboard_Expand="Expand all";e.SettingsMenubarLabel="Settings";e.TaskboardColumn_AriaLabel="Column";e.No_WIP_Limit_Count_Tooltip_Plural="{0} items";e.TaskboardCard_AriaRoleDescription="Card";e.No_WIP_Limit_Count_Tooltip_Single="{0} item";e.Move_Required_Fields_Dialog="Moving a work item across columns requires certain fields to be filled. If you choose not to complete the field(s), this work item move will not be saved.";e.Error_WorkItemNotLoaded="The following work item could not be loaded: {0}.";e.NotStartedWorkItems="{0} not started";e.Tile_AriaDescribedBy_ChangeParentSuffix="parent";e.Taskboard_MaximizeRow_AriaLabel="Expand {0}";e.Taskboard_FilterValue_All="All";e.Taskboard_Collapse="Collapse all";e.Taskboard_AriaDescribedBytext="On a card, press enter or space to open the workItem, use shift F10 for context menu, use tab to navigate between cards, use control arrow keys to reorder cards or change column, use control shift up or down to change {0}";e.TaskboardLoading_NewItemButtonStart="New item experience loading";e.TaskboardLoading_NewItemButtonError="Error loading new item experience";e.TileContextMenu_OpenItem="Open";e.Limit_Tooltip_Single_Plural="{0} item out of work in progress limit of {1} items";e.TaskboardLoading_NewItemButtonEnd="New item experience has loaded";e.ActiveChildWorkItemsWarning="The state of the {0} is {1} but has pending work";e.Taskboard_MaximizeRow="Expand this row";e.Limit_Tooltip_Single_Single="{0} item out of work in progress limit of {1} item";e.Taskboard_SavingTile="Saving...";e.Taskboard_RedirectToDefaultIteration="The board you requested is either hidden for your team or cannot be found. We\u0027re showing you the current iteration instead. If you navigated here from a bookmark, you will need to update your bookmark.";e.Taskboard_MinimizeRow="Collapse this row";e.RemainingWork=" ({0})";e.InProgressWorkItems="{0} in progress";e.Taskboard_Unparented="Unparented";e.Move_Required_Fields_Dialog_Title="Missing field(s)";e.TileContextMenu_EditTitle="Edit title";e.Move_Required_Fields_Dialog_Edit_Button="Enter missing fields";e.Taskboard_TeamMembers="Team members";e.Error_FieldNotLoaded="The following field could not be loaded: {0}.";e.Limit_Tooltip_Plural_Plural="{0} items out of work in progress limit of {1} items";e.AddNewCardDisplayText="New item";e.Taskboard_MinimizeRow_AriaLabel="Collapse {0}";e.Limit_Tooltip_Plural_Single="{0} items out of work in progress limit of {1} item";e.Taskboard_ErrorTile="Error";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Agile/Scripts/Common/WorkItemChanges",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","VSS/Diag"],function(n,t,i,r,u){var e,o,f,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.TopLevelItemsSelectionFilter=t.LocationSelector=t.BacklogLevelHelper=t.LocationValidator=t.LocationEnumerator=void 0;e=function(){function n(n){this._itemHierarchy=n}return n.prototype.getLocationsForExplicitReparent=function(n){var t=this._itemHierarchy.children(n);return[{parentId:n,previousId:t&&t.length&&t[t.length-1]||null,nextId:null}]},n.prototype.getLocations=function(n,t){var i=[],f,u,e,o;if(n===0)return f=this._itemHierarchy.children(0),i.push({parentId:0,previousId:null,nextId:f&&f.length>0?f[0]:null}),i;var i=[],r=this._itemHierarchy.children(n),s=r&&r.length===1&&t&&t.length===1&&r[0]===t[0];if(r&&r.length&&!s)i.push({parentId:n,previousId:null,nextId:r[0]});else{s||i.push({parentId:n,previousId:null,nextId:null});u=n;do e=this._itemHierarchy.parent(u),o=this._itemHierarchy.nextSibling(u)||null,i.push({parentId:e||0,previousId:u,nextId:o}),u=e;while(e!==0&&!o)}return i},n}();t.LocationEnumerator=e;o=function(){function n(n,t){this._itemHierarchy=t;this._levelHelper=new f(n)}return n.prototype.isValid=function(n,t){var s,a,h,v,u,e,r,i,g;if(!n||n.length===0)return!1;var p=this._itemHierarchy.previousSibling(n[0]),f=null,c=!1,w=!0,b=!0,l=!0,o={};for(s=0,a=n;s<a.length;s++)u=a[s],o[u]=!0;for(h=0,v=n;h<v.length;h++){if((u=v[h],u<=0)||(f=this._itemHierarchy.getData(u),!f||!f.type))return!1;t.parentId!==this._itemHierarchy.parent(u)&&(c=!0);f.isOwned?b=!1:l=!1;this._itemHierarchy.previousSibling(u)!==p&&(w=!1);p=u}if(w&&(o[t.previousId]||o[t.nextId]))return!1;if(c){if(!this._isValidParentType(f,t))return!1;if(t.parentId){e=t.parentId;do{if(o[e])return!1;e=this._itemHierarchy.parent(e)}while(e)}}if(b){if(!c||t.nextId)return!1}else if(t.previousId||t.nextId){if(r=t.previousId?this._itemHierarchy.getData(t.previousId):null,i=t.nextId?this._itemHierarchy.getData(t.nextId):null,r&&!r.type||i&&!i.type)return!1;var y=this._levelHelper.getLevel(f.type),k=r&&this._levelHelper.getLevel(r.type)===y,d=i&&this._levelHelper.getLevel(i.type)===y,nt=y===this._levelHelper.getRequirementLevel()+1;if(!r&&i){if(g=this._levelHelper.getRequirementLevel()+1,i.isOwned&&(!l||!d&&this._levelHelper.getLevel(i.type)!==g))return!1}else if(r&&i)if(r.isOwned&&k||i.isOwned&&d){if(!l&&i.isOwned)return!1}else return!1;else if(!r.isOwned||!nt&&!k)return!1}return!0},n.prototype._isValidParentType=function(n,t){var i=this._levelHelper.getLevel(n.type),u,r;if(!t.parentId)return i===this._levelHelper.getTopLevel();if(u=this._itemHierarchy.getData(t.parentId),r=this._levelHelper.getLevel(u.type),i===r+1)return!0;if(i===r&&i===this._levelHelper.getRequirementLevel()){var f=t.previousId?this._itemHierarchy.getData(t.previousId):null,e=t.nextId?this._itemHierarchy.getData(t.nextId):null,o=f&&this._levelHelper.getLevel(f.type)===i,s=e&&this._levelHelper.getLevel(e.type)===i;return o||s}return!1},n}();t.LocationValidator=o;f=function(){function n(n){var u=this,f,t;this._workItemLevelMap={};this._backlogLevelMap={};f=r.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels();t=1;f.forEach(function(r){u._backlogLevelMap[r.name.toLocaleUpperCase()]=t;r.workItemTypes.forEach(function(n){u._workItemLevelMap[n.toLocaleUpperCase()]=t});n&&i.localeIgnoreCaseComparer(n.name,r.name)===0&&(u._topLevel=t);t++});this._requirementLevel=t-2}return n.prototype.getLevel=function(n){return n&&this._workItemLevelMap.hasOwnProperty(n.toLocaleUpperCase())?this._workItemLevelMap[n.toLocaleUpperCase()]:-1},n.prototype.getLevelForBacklog=function(n){return n&&this._backlogLevelMap.hasOwnProperty(n.toLocaleUpperCase())&&this._backlogLevelMap[n.toLocaleUpperCase()]||-1},n.prototype.getRequirementLevel=function(){return this._requirementLevel},n.prototype.getTopLevel=function(){return this._topLevel},n.ROOT_LEVEL=1,n}();t.BacklogLevelHelper=f;s=function(){function n(n){this._itemHierarchy=n}return n.prototype.select=function(n,t){var s=this,f,e,i,o,h,c,l,r,a;if(f=!0,e={},n&&n.length&&n.length>0)e[this._itemHierarchy.parent(n[0])]=!0;else return null;for(i=0,o=n;i<o.length;i++)if(h=o[i],c=this._itemHierarchy.parent(h),!e[c]){f=!1;break}return f&&(l=this._itemHierarchy.parent(n[0]),r=t.filter(function(n){return n.parentId===l}),r&&r.length)?r[0]:(a=t.sort(function(n,t){return s._itemHierarchy.depth(n.parentId)-s._itemHierarchy.depth(t.parentId)}),a[0])},n}();t.LocationSelector=s;h=function(){function n(n,t){this._pagingDelegate=t;this._itemHierarchy=n;this._levelHelper=new f}return n.prototype.filter=function(n){var e,v,y,o,p,r,f,s,h,w,nt,b;if(n&&n.length>0){var c={},k=[],d=[],g={},l={},a={},i,t;for(e=0,v=n;e<v.length;e++){for(r=v[e],l[r]=!0,t=this._itemHierarchy.parent(r),i=r;t>0;)t=this._itemHierarchy.parent(r),l[t]&&(i=t),r=t;a[i]||(a[i]=!0)}for(o=0,p=n;o<p.length;o++){if(r=p[o],f=this._itemHierarchy.getData(r).type,!f||f==="")return this._pagingDelegate(Object.keys(a).map(function(n){return+n}),function(){}),[];for(s=this._levelHelper.getLevel(f),i=r,t=this._itemHierarchy.parent(r);t>0;)t=this._itemHierarchy.parent(r),l[t]&&(f=this._itemHierarchy.getData(t).type,s=this._levelHelper.getLevel(f),i=t),r=t;c[i]=s;y=s;g[i]||(this._itemHierarchy.getData(i).isOwned?k.push(i):d.push(i),g[i]=!0)}for(h=0,w=Object.keys(c);h<w.length;h++){if(nt=w[h],b=c[nt],y!==b)return[];y=b}return k.concat(d)}return[]},n}();t.TopLevelItemsSelectionFilter=h});

define("Agile/Scripts/Card/Cards",["require","exports","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/Diag","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Core.Utils","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WorkItemManager","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/LoaderPlugins/Css!Cards"],function(n,t,i,r,u,f,e,o,s,h,c,l){var nt,a,v,w,b,y,p,k,tt,it,d,g;Object.defineProperty(t,"__esModule",{value:!0});t.WitCardField=t.WitCardFieldDefinition=t.CardFieldDisplayType=t.CardFieldDisplayFormats=t.CardSettingsProvider=t.CardSettings=t.CardField=t.BoardCardSettings=t.FieldSetting=t.CardFieldDefinition=t.CardFieldType=t.Notifications=void 0,function(n){n.CardWorkItemListBeginEdit="VSS.Agile.Boards.CardWorkItemListBeginEdit";n.CardWorkItemListEndEdit="VSS.Agile.Boards.CardWorkItemListEndEdit";n.CardWorkItemListAddChild="VSS.Agile.Boards.CardWorkItemListAddChild"}(nt=t.Notifications||(t.Notifications={})),function(n){n[n.String=1]="String";n[n.Integer=2]="Integer";n[n.DateTime=3]="DateTime";n[n.PlainText=5]="PlainText";n[n.Html=7]="Html";n[n.TreePath=8]="TreePath";n[n.Double=10]="Double";n[n.Guid=11]="Guid";n[n.Boolean=12]="Boolean";n[n.Identity=13]="Identity"}(a=t.CardFieldType||(t.CardFieldType={}));v=function(){function n(n,t,i,r){this._refName=n;this._displayName=t;this._type=i;this._isEditable=r}return n.prototype.displayName=function(){return this._displayName},n.prototype.referenceName=function(){return this._refName},n.prototype.type=function(){return this._type},n.prototype.isIdentity=function(){return this._type===a.Identity},n.prototype.isEditable=function(){return this._isEditable},n.prototype.isValid=function(){return!1},n.prototype.convertToExternal=function(){return null},n.prototype.convertToInternal=function(){return null},n}();t.CardFieldDefinition=v;w=function(){function n(){}return n}();t.FieldSetting=w;b=function(){function n(){this.cards={}}return n.prototype.addVal=function(n,t){this.cards[n]=t},n}();t.BoardCardSettings=b;y=function(){function n(){}return n.prototype.referenceName=function(){return null},n.prototype.itemId=function(){return null},n.prototype.definition=function(){return null},n.prototype.fieldSetting=function(){return null},n.prototype.getAllowedValues=function(){return null},n.prototype.setAdditionalValues=function(){return null},n.prototype.getAdditionalValues=function(){return null},n.prototype.hasAllowedValues=function(){return!1},n.prototype.isEditable=function(){return!1},n.prototype.isRequired=function(){return!1},n.prototype.isLimitedToAllowedValues=function(){return!1},n.prototype.getFilterByScope=function(){return null},n.prototype.value=function(){return null},n}();t.CardField=y;p=function(){function n(n){this.fields=n}return n.prototype.containsField=function(n){return this.getField(n)!==null},n.prototype.getField=function(n){var t=this.fields.filter(function(t){return r.ignoreCaseComparer(t.fieldIdentifier,n)===0});return t.length>0?t[0]:null},n.prototype.isShowEmptyFieldsEnabled=function(){for(var t=this.fields.length-1;t>=0;t--)if(this.fields[t].hasOwnProperty(n.SHOW_EMPTY_FIELDS))return o.BoolUtils.parse(this.fields[t][n.SHOW_EMPTY_FIELDS]);return!1},n.FIELD_IDENTIFIER="fieldIdentifier",n.DISPLAY_FORMAT="displayFormat",n.SHOW_EMPTY_FIELDS="showEmptyFields",n.FIELD_DISPLAY_TYPE="displayType",n}();t.CardSettings=p;k=function(){function n(n){this._originalCardSettings=JSON.parse(JSON.stringify(n));this._boardCardSettings=n;this._itemTypeToCardSettingsMap={}}return n.prototype.getCardSettingsForItemType=function(n){if(!this._itemTypeToCardSettingsMap[n]){var t=this._boardCardSettings.cards[n];(!t||t.length<1)&&(t=[{fieldIdentifier:c.CoreFieldRefNames.Title},{fieldIdentifier:c.CoreFieldRefNames.AssignedTo}]);this._itemTypeToCardSettingsMap[n]=new p(t)}return this._itemTypeToCardSettingsMap[n]},n.prototype.getCardSettings=function(){return this._boardCardSettings},n.prototype.setCardSettings=function(n){this._originalCardSettings=JSON.parse(JSON.stringify(n));this._boardCardSettings=n},n.prototype.areCardSettingsEqual=function(n){return i.equals(this._originalCardSettings,n)},n.prototype.dispose=function(){this._itemTypeToCardSettingsMap=null;this._boardCardSettings=null;this._originalCardSettings=null},n}();t.CardSettingsProvider=k,function(n){var t;(function(n){n[n.AvatarOnly=0]="AvatarOnly";n[n.FullName=1]="FullName";n[n.AvatarAndFullName=2]="AvatarAndFullName"})(t=n.AssignedToFieldFormats||(n.AssignedToFieldFormats={}))}(tt=t.CardFieldDisplayFormats||(t.CardFieldDisplayFormats={})),function(n){n[n.CORE=0]="CORE";n[n.ADDITIONAL=1]="ADDITIONAL";n[n.COREANDADDITIONAL=2]="COREANDADDITIONAL"}(it=t.CardFieldDisplayType||(t.CardFieldDisplayType={}));d=function(n){function t(t,i,r,u,f){var e=n.call(this,t,i,f?a.Identity:r,u)||this;return(u===undefined||r===undefined||i===undefined)&&e._initialize(),e}return __extends(t,n),t.prototype._initialize=function(){var n=this;this._witStore=e.ProjectCollection.getDefaultConnection().getService(s.WorkItemStore);this._witStore&&this._witStore.beginGetFields().then(function(){n._witFieldDef=n._witStore.getFieldDefinition(n._refName);!n._displayName&&n._witFieldDef&&(n._displayName=n._witFieldDef.name);!n._type&&n._witFieldDef&&(n._type=n._witFieldDef.type)})},t.prototype.displayName=function(){return this._displayName},t.prototype.referenceName=function(){return this._refName},t.prototype.type=function(){return this._type},t.prototype.isEditable=function(){return this._witFieldDef&&(this._isEditable=this._witFieldDef.isEditable()),this._isEditable},t.prototype.isValid=function(n){var t=this.type()===a.Identity?a.String:this.type();return!s.Field.convertValueToInternal(this._witStore,n,t).status},t.prototype.convertToExternal=function(n){var r="",t;switch(this.type()){case a.Identity:n=n?n:l.AssignedToEmptyText;r=i.convertValueToDisplayString(n);break;case a.DateTime:t=null;n instanceof Date?t=n:(typeof n=="number"||typeof n=="string")&&(t=new Date(n));t!=null&&(r=u.localeFormat(t,"d"));break;default:r=i.convertValueToDisplayString(n)}return r},t.prototype.convertToInternal=function(n){switch(this.type()){case a.Identity:r.localeIgnoreCaseComparer(n,l.AssignedToEmptyText)||(n="")}return n},t}(v);t.WitCardFieldDefinition=d;g=function(n){function t(t,i,r){var u=this,e;u=__construct(this,n,[]);for(e in u)u.hasOwnProperty(e)&&(this[e]=u[e]);return u._id=t,u._cardFieldDef=i,u._cardFieldSetting=r,u}return __extends(t,n),t.prototype.referenceName=function(){return this._cardFieldDef.referenceName()},t.prototype.itemId=function(){return this._id},t.prototype.definition=function(){return this._cardFieldDef},t.prototype.fieldSetting=function(){return this._cardFieldSetting},t.prototype.isEditable=function(){var n=this._getWitField();return n?n.isEditable():this._cardFieldDef.isEditable()},t.prototype.isRequired=function(){var n=!0,t=this._getWitField();if(t)n=t.isRequired();else switch(this.referenceName()){case c.CoreFieldRefNames.Title:case c.CoreFieldRefNames.AssignedTo:case c.CoreFieldRefNames.State:case c.CoreFieldRefNames.AreaPath:case c.CoreFieldRefNames.IterationPath:n=!0}return n},t.prototype.getAllowedValues=function(){var n=this._getWitField();return n?n.getAllowedValues():[]},t.prototype.hasAllowedValues=function(){var n=!1,t=this._getWitField();if(t)n=t.hasList();else switch(this.referenceName()){case c.CoreFieldRefNames.AssignedTo:case c.CoreFieldRefNames.State:case c.CoreFieldRefNames.AreaPath:case c.CoreFieldRefNames.IterationPath:n=!0}return n},t.prototype.isLimitedToAllowedValues=function(){var n=this._getWitField();return n?n.isLimitedToAllowedValues():!1},t.prototype.value=function(n){var t=this._getWitField();return t&&(n===undefined?n=t.getValue():t.setValue(n)),n},t.prototype.setAdditionalValues=function(n){this._additionalFieldValues=n},t.prototype.getAdditionalValues=function(){return this._additionalFieldValues},t.prototype.getFilterByScope=function(){var n=this._getWitField();return n&&n.filterByScope},t.prototype._getWitField=function(){if(!this._witField){var t=h.WorkItemManager.get(e.ProjectCollection.getDefaultConnection().getService(s.WorkItemStore)),n=t.getWorkItem(this._id);n&&(this._witField=n.getField(this._cardFieldDef.referenceName()))}return this._witField},t}(y);t.WitCardField=g});

define("Presentation/Scripts/TFS/TFS.NotificationEventNames",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.EventNames=void 0;var i;(function(n){n.NotificationDismissed="notification-dismissed";n.ClientNotificationDismissed="local-notification-dismissed"})(i=t.EventNames||(t.EventNames={}))});

define("Presentation/Scripts/TFS/Resources/TFS.Resources.Discussion",["require","exports"],function(require,exports){var e=exports;e.DeleteActionTooltip="Delete this comment";e.DiscussionCommentReactivate="Reactivate";e.DiscussionStatus="Status:";e.DiscussionCommentUpdate="Update";e.DiscussionCommentResolve="Resolve";e.DiscussionCommentReplyAndResolve="Reply \u0026 resolve";e.OverviewDiscussionCommentHint="Add a comment...";e.EditedComment="edited";e.DiscussionCommentCancel="Cancel";e.DiscussionCommentDelete="Delete";e.DeleteAction="delete";e.SelectionCommentTooltip="Comment on the selected text";e.AddCommentEditorCommand="Add a Comment";e.CommentHeaderAriaLabel="{0} commented {1}.";e.DiscussionStatusClosed="Closed";e.ReplyAction="reply";e.DiscussionStatusActive="Active";e.DiscussionThreadNewComment="1 new comment has been posted to this thread";e.CancelAction="cancel";e.DiscussionThreadUnsavedComments="Some of your comments could not be saved:";e.CommentFeedbackDialog_WrongWordLabelText="Line was correct but position in line was not";e.DiscussionCommentDeleted="Comment deleted";e.CreateWorkItemTooltip="Create a work item from this comment";e.SavePending="saving...";e.CommentFeedbackDialog_SecondaryText="Where did you expect to see this comment?";e.DiscussionCommentUpdateAndResolve="Update \u0026 resolve";e.CommentFeedbackDialog_Title="Comment tracked to the wrong place";e.DiscussionCommentSave="Comment";e.SelectDiscussionStatusTooltip="Select a status for this discussion";e.DiscussionCommentEdit="Edit";e.DiscussionCommentHint="Write a reply...";e.DiscussionThreadUnsavedComment="{0}, line: {1}";e.CommentFeedbackActionTooltip="Send feedback on the position of this comment";e.CreateWorkItemMenuHeader="Create a new:";e.DiscussionCommentUpdateAndReactivate="Update \u0026 reactivate";e.DiscussionStatusWontfix="Won\u0027t fix";e.DiscussionCommentReply="Reply";e.DeletePending="deleting...";e.SaveAction="save";e.SaveActionWithShortcut="save (enter)";e.DiscussionStatusResolved="Resolved";e.DiscussionStatusPending="Pending";e.DiscussionCommentReplyAndReactivate="Reply \u0026 reactivate";e.AddCommentTooltip="Click to add a comment";e.CommentFeedbackDialog_OkText="Send feedback";e.CancelActionWithShortcut="cancel (esc)";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/TFS.UI.Controls.Common",["require","exports","VSS/Utils/Core","VSS/Utils/String","VSS/Diag","VSS/Resources/VSS.Resources.Platform","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Controls","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.NotificationEventNames","Presentation/Scripts/TFS/TFS.WebSettingsService","VSS/Utils/UI","VSS/Controls/StatusIndicator","VSS/Controls/Dialogs","VSS/Controls/Notifications","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","Presentation/Scripts/TFS/Resources/TFS.Resources.Discussion","VSS/Service","VSS/Events/Action","VSS/Events/Services","VSS/Telemetry/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){var et,ot,ut,st,rt;Object.defineProperty(t,"__esModule",{value:!0});t.IFrameControl=t.CommonMenuItems=t.ResponsiveGrid=t.CommentFeedbackDialog=t.AccountTrialDialog=t.DismissableMessageAreaControl=void 0;var it=i.delegate,tt=l.domElem,ft=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(){this._isDismissedOnClient()||(n.prototype.initialize.call(this),this._initializeMessageAreaOptions(),this._messageArea=o.Enhancement.enhance(y.MessageAreaControl,this.getElement(),this._options),this._dismissDelegate=it(this,this._dismissMessage),this._bind(y.MessageAreaControl.EVENT_DISPLAY_CLEARED,this._dismissDelegate))},t.prototype.reconfigure=function(n){if($.extend(this._options,n),this._initializeMessageAreaOptions(),this._unbind(y.MessageAreaControl.EVENT_DISPLAY_CLEARED,this._dismissDelegate),this._isDismissedOnClient()){this._messageArea.clear();return}this._options.message?this._messageArea.setMessage(this._options.message):this._messageArea.clear();this._bind(y.MessageAreaControl.EVENT_DISPLAY_CLEARED,this._dismissDelegate)},t.isDismissedOnClient=function(n,t){var i=k.getApplicationService(c.WebSettingsService).readLocalSetting(p.Messages.DismissNotificationRegistryPath+n,t,!1);return i==="true"},t.prototype._isDismissedOnClient=function(){if(this._options&&this._options.clientDismissable&&this._options.message&&this._options.message.id)return t.isDismissedOnClient(this._options.message.id,this._options.message.scope)},t.prototype._initializeMessageAreaOptions=function(){var n=this._options;if(n){n.message&&typeof n.message.header=="string"&&(n.message.header=$(tt("span")).html(n.message.header));n.message&&typeof n.message.content=="string"&&(n.message.content=$(tt("span")).html(n.message.content));return}},t.prototype._dismissMessage=function(){if(this._options&&this._options.message&&this._options.message.id){var n=this._options.clientDismissable?h.EventNames.ClientNotificationDismissed:h.EventNames.NotificationDismissed;g.getService().fire(n,this._options.message.id,this._options.message.scope)}},t}(o.BaseControl);t.DismissableMessageAreaControl=ft;o.Enhancement.registerEnhancement(ft,".tfs-host-notifications");et=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:450,minWidth:450,height:260,minHeight:260,allowMultiSelect:!1,contentHeader:f.TrialHeader,contentDescription:f.TrialStartToday,buttons:{saveButton:{id:"ok",text:f.StartTrial,click:it(this,this._onSaveClick)},cancelButton:{id:"cancel",text:f.ModalDialogCancelButton,click:it(this,this.onCancelClick)}}},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.buildDialogElements()},t.prototype.buildDialogElements=function(){var n,t;this._$data=$("<div>").addClass("trial-account-dialog");n=$("<div>").append(this._$data).addClass("admin-dialog").css("height","100%");this.getElement().append(n);this._$waitControl=o.create(a.WaitControl,this.getElement(),{target:this._$data,cancellable:!1,message:f.DefaultWaitMessage});t=$("<div>").appendTo(this._$data).addClass("trial-account-header-section");this._options.mainTitle&&$("<div>").appendTo(t).addClass("dialog-header").text(this._options.mainTitle);this.setTitle(this._options.contentHeader);this._$dataDiv=$("<div>").appendTo(this._$data).attr("id","main-context");this._$trialTextDiv=$("<div>").appendTo(this._$dataDiv).addClass("message-trial");this._createTrialHeader();this._createErrorFooter();this._hideError()},t.prototype._updateTrialButtons=function(n){this.updateOkButton(n)},t.prototype._onCloseClick=function(){this.close()},t.prototype._onCancelClick=function(){this.close()},t.prototype._onSaveClick=function(){this._hideError();this._updateTrialButtons(!1);this._$waitControl.startWait();e.postMSJSON(s.TfsContext.getDefault().getActionUrl("EnableAccountTrialMode","account",{area:"api"}),null,it(this,this._postTrialSuccess),it(this,this._postTrialFailure))},t.prototype._postTrialSuccess=function(){this._$waitControl.endWait();d.getService().performAction(d.CommonActions.ACTION_WINDOW_RELOAD)},t.prototype._postTrialFailure=function(n){this._$waitControl.endWait();switch(n.type){case"Microsoft.VisualStudio.Services.Account.AccountTrialException":this._showError(n.message);break;default:this._showError(f.StartTrialFail)}},t.prototype._showError=function(n){this._$errorMessageDiv.show();this._$errorMessageText.text(n)},t.prototype._hideError=function(){this._$errorMessageDiv.hide()},t.prototype._createErrorFooter=function(){this._$errorMessageDiv=$("<div>").appendTo($("#main-context")).attr("id","account-error-trial").addClass("error-message-div-trial");this._$errorMessageImgDiv=$("<div>").appendTo(this._$errorMessageDiv).addClass("trial-err-footer-img");this._$errorMessageImg=$("<span/>").appendTo(this._$errorMessageImgDiv).addClass("trial-error-message-icon").addClass("trial-error-message-img");this._$errorMessageText=$("<div>").appendTo(this._$errorMessageDiv).addClass("error-message-account-trial")},t.prototype._createTrialHeader=function(){var i=$("<div>").appendTo(this._$trialTextDiv).addClass("trial-text-header-div"),t=$("<div>").appendTo(this._$trialTextDiv).addClass("trial-text-header-div"),n;t.addClass("description-trial").html(r.format(this._options.contentDescription,this._options.EndDateIfTrialStarted));n=$("<div>").appendTo(this._$trialTextDiv).addClass("trial-text-header-div");n.addClass("description-frature-trial-once").html(f.PutAccountTrialOnce);n=$("<div>").appendTo(this._$trialTextDiv).addClass("trial-text-header-div");n.addClass("detail-feature-trial").html(r.format(f.AllFeaturesEnableDuringTrial,this._options.TrialFeatureUrl))},t}(v.ModalDialogO);t.AccountTrialDialog=et;ot=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._thread=t.thread||null,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"comment-feedback-dialog",title:b.CommentFeedbackDialog_Title,okText:b.CommentFeedbackDialog_OkText,resizable:!1,draggable:!0,useBowtieStyle:!0,bowtieVersion:2,width:560},t))},t.prototype.initialize=function(){var i="commentFeedbackInput"+o.getId(),r="commentFeedbackCheckbox"+o.getId(),u=$(tt("div","form-section")).appendTo(this._element),f,t;$(tt("label")).attr("for",i).text(b.CommentFeedbackDialog_SecondaryText).appendTo(u);this._$commentFeedbackInput=$(tt("textarea","comment-feedback-dialog-input")).attr("type","text").attr("id",i).height(100).appendTo(u);f=$(tt("div","form-section")).appendTo(this._element);t=$(tt("div","checkbox-pair")).appendTo(f);this._$wrongWordCheckbox=$(tt("input")).addClass("checkbox-input comment-feedback-dialog-wrong-word-checkbox").attr("type","checkbox").attr("id",r).appendTo(t);this._$wrongWordLabel=$(tt("label")).attr("for",r).addClass("checkbox-label comment-feedback-dialog-wrong-word-label-text").text(b.CommentFeedbackDialog_WrongWordLabelText).appendTo(t);n.prototype.initialize.call(this);this.updateOkButton(!0)},t.prototype.onOkClick=function(){var t=this._$commentFeedbackInput.val(),i=this._$wrongWordCheckbox&&this._$wrongWordCheckbox.is(":checked"),n;this._thread&&this._thread.firstComparingIteration&&this._thread.secondComparingIteration&&(n=new nt.TelemetryEventData("CommentTracking","CommentFeedbackDialog",{threadId:this._thread.id,artifactUri:this._thread.artifactUri,itemPath:this._thread.itemPath,originalFirstIteration:this._thread.firstComparingIteration,originalSecondIteration:this._thread.secondComparingIteration,trackedFirstIteration:this._thread.trackingCriteria.firstComparingIteration,trackedSecondIteration:this._thread.trackingCriteria.secondComparingIteration,feedbackContent:t,wrongWordBoxWasChecked:i}),nt.publishEvent(n));this.close()},t}(v.ModalDialogO);t.CommentFeedbackDialog=ot;ut=function(){function n(){var n=this;this._gridElement=$(".responsive-grid:first");this._gridElement.length===1&&(this._adjustGridSections(),$(window).resize(function(){n._adjustGridSections()}))}return n.prototype._adjustGridSections=function(){this._adjustGridWidth();this._adjustSection3Top()},n.prototype._adjustGridWidth=function(){this._gridElement.width()===640&&this.getSection(3).children().length===0?this.getSection(2).css({width:"640px"}):this.getSection(2).css({width:"320px"})},n.prototype._adjustSection3Top=function(){var t=$(".grid-cell",this.getSection(3)),n=this.getSection(3);this._gridElement.width()===960&&this.getSection(2).height()-this.getSection(1).height()>=160?(n.width()===960&&n.css({width:"640px"}),t.css({top:this.getSection(1).height()-this.getSection(2).height()+"px"})):this._gridElement.width()===960&&this.getSection(2).height()==this.getSection(1).height()?n.width()===640&&(n.css({width:"960px"}),t.css({top:""})):(n.css({width:""}),t.css({top:""}))},n.GetInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.scanViewImports=function(){var n=this;$(function(){var t=$(".grid-view-item");$.each(t,function(t,i){var r=parseInt($(i).attr("data-grid-cell-section")),u=parseInt($(i).attr("data-grid-cell-columns")),f=parseInt($(i).attr("data-grid-cell-rows")),e=$(i).attr("data-grid-cell-adjustHeight").toLowerCase()==="true"?!0:!1;$(i).remove();n.addControlInGrid(r,f,u,e,i);$(i).removeClass("grid-item-hidden").removeClass("grid-view-item")});n._adjustGridSections()})},n.prototype.getElement=function(){return this._gridElement},n.prototype.getSection=function(n){return $(".section"+n,this._gridElement)},n.prototype.addControlInGrid=function(n,t,i,r,u){var f=this.createContainer(n,t,i),e;return u&&($(f).append(u),r&&(e=this._getAdjustedContainerHeight(u)+"px",$(f).css({height:e}))),this._adjustGridSections(),f},n.prototype.createContainer=function(t,i,r){var o=this.getSection(t),u=$('<div class="grid-cell"><\/div>'),f,e;return $(o).append(u),f=r*n.cellSize+"px",e=i*n.cellSize+"px",$(u).css({width:f,height:e}),this._adjustGridSections(),u},n.prototype.createInGrid=function(n,t,i,r,u){var f=this.addControlInGrid(n,t,i,!1);return this._adjustGridSections(),o.BaseControl.createIn(r,f,u)},n.prototype.adjustHeight=function(n){var t=$(n).parent(".grid-cell"),i;t.length>0&&(i=this._getAdjustedContainerHeight(t)+"px",$(t).css({height:i}));this._adjustGridSections()},n.prototype.removeContainer=function(n){$(n).parent(".grid-cell").remove();this._adjustGridSections()},n.prototype.getContainer=function(n){return $(n).parent(".grid-cell")},n.prototype._getAdjustedContainerHeight=function(t){$(t).css({height:"auto"});var i=$(t).height();return i<=0?0:Math.ceil(i/n.cellSize)*n.cellSize},n.cellSize=160,n}();t.ResponsiveGrid=ut;$(function(){ut.GetInstance().scanViewImports()});st=function(){function n(){}return n.addToMyFavs=function(){return{id:n.ADD_TO_MY_FAVORITES_ACTION,text:w.AddToMyFavoritesTitle,title:w.AddToMyFavoritesTooltipText,icon:"bowtie-icon bowtie-favorite",groupName:"favorites"}},n.addToTeamFavs=function(t){return{id:n.ADD_TO_TEAM_FAVORITES_ACTION,text:w.AddToTeamFavoritesTitle,title:w.AddToTeamFavoritesTooltipText,disabled:t===null||t===undefined?!1:t,groupName:"favorites"}},n.removeFromMyFavs=function(){return{id:n.REMOVE_FROM_MY_FAVORITES_ACTION,text:w.RemoveFromMyFavoritesTitle,title:w.RemoveFromMyFavoritesTooltipText,icon:"bowtie-icon bowtie-favorite-outline",groupName:"favorites"}},n.removeFromTeamFavs=function(t){return{id:n.REMOVE_FROM_TEAM_FAVORITES_ACTION,text:w.RemoveFromTeamFavoritesTitle,title:w.RemoveFromTeamFavoritesTooltipText,disabled:t===null||t===undefined?!1:t,groupName:"favorites"}},n.security=function(){return{id:n.ITEM_SECURITY_ACTION,text:w.ItemSecurityTitle,title:w.ItemSecurityTooltipText,icon:"bowtie-icon bowtie-security ",groupName:"security"}},n.pinToHomePage=function(t){return{id:n.PIN_TO_HOMEPAGE_ACTION,text:w.PinToHomepageTitle,title:w.PinToHomepageTooltipText,icon:"icon-pin",disabled:t===null||t===undefined?!1:t,groupName:"pinning"}},n.unpinFromHomePage=function(t){return{id:n.UNPIN_FROM_HOMEPAGE_ACTION,text:w.UnpinFromHomepageTitle,title:w.UnpinFromHomepageTooltipText,icon:"icon-unpin",disabled:t===null||t===undefined?!1:t,groupName:"pinning"}},n.ADD_TO_MY_FAVORITES_ACTION="add-to-my-favorites",n.ADD_TO_TEAM_FAVORITES_ACTION="add-to-team-favorites",n.REMOVE_FROM_MY_FAVORITES_ACTION="remove-from-my-favorites",n.REMOVE_FROM_TEAM_FAVORITES_ACTION="remove-from-team-favorites",n.PIN_TO_HOMEPAGE_ACTION="pin-to-homepage",n.UNPIN_FROM_HOMEPAGE_ACTION="unpin-from-homepage",n.ITEM_SECURITY_ACTION="item-security",n}();t.CommonMenuItems=st;rt=function(n){function t(t){var i=this,r;i=__construct(this,n,[t]);for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i}return __extends(t,n),t.prototype.initialize=function(){var n=$("<iframe "+this._getSandboxAttributes()+">").attr("src",this._options.contentUrl);this.getElement().append(n)},t.prototype._getSandboxAttributes=function(){return l.BrowserCheckUtils.isFirefox()?"":"sandbox='allow-scripts allow-popups allow-same-origin '"},t.CORE_CSS_CLASS="iframe-control",t}(o.BaseControl);t.IFrameControl=rt;o.Enhancement.registerEnhancement(rt,"."+rt.CORE_CSS_CLASS)});

define("Agile/Scripts/Common/AutoRefreshThrottler",["require","exports","VSS/Utils/Core"],function(n,t,i){var r,u;Object.defineProperty(t,"__esModule",{value:!0});t.AutoRefreshThrottler=t.AutoRefreshEventPayload=void 0;r=function(){function n(n,t,i,r,u,f){this.id=n;this.changeType=t;this.revision=i;this.stackRank=r;this.changedChildren=u;this.changedTypeOrTitle=f;this.wasWorkItemAttached=!1;this.forceRefresh=!1}return n}();t.AutoRefreshEventPayload=r;u=function(){function n(n){this._eventsQueue=[];this._isProcessingEvents=!1;this._windowStartTime=(new Date).getTime();this._itemsRefreshedCount=0;this._isThrottling=!1;this._lastEventProcessStartTime=-1;this._isFFEnabled=this.checkFFStatus();this._eventsHelper=n;this._autoRefreshItemsCompletedDelegate=i.delegate(this,this._onAutoRefreshItemsCompleted)}return n.prototype.process=function(n){this._eventsQueue.push(n);this._tryProcessEvents()},n.prototype._onAutoRefreshItemsCompleted=function(n,t){this._isProcessingEvents=!1;this._itemsRefreshedCount+=t;this._tryProcessEvents()},n.prototype._tryProcessEvents=function(){if(this._isFFEnabled&&this._isProcessingEvents){var t=(new Date).getTime();t-this._lastEventProcessStartTime>n.MaxTimeToProcessEvent_In_Milliseconds&&(this._isProcessingEvents=!1,this.logPipelineUnblockedTelemetry())}this._isFFEnabled?this._eventsQueue.length>0&&!this._isProcessingEvents&&(this._setWindowReference(),this._itemsRefreshedCount<n.Items_Refresh_Threshold?(this._isProcessingEvents=!0,this._lastEventProcessStartTime=(new Date).getTime(),this._processNextEvent(),this._logIfThrottlingStopped()):this._delayProcessing()):this._processNextEvent()},n.prototype._processNextEvent=function(){var n=this._eventsQueue.shift();this.fireItemsNeedAutoRefresh(n)},n.prototype._delayProcessing=function(){this._delayedFunction&&this._delayedFunction.isPending()||(this._delayedFunction=i.delay(this,this._windowStartTime+n.Window_Length_In_Milliseconds-(new Date).getTime(),this._tryProcessEvents),this._logIfThrottlingStarted())},n.prototype._isNewWindow=function(){var t=(new Date).getTime();return t>=this._windowStartTime+n.Window_Length_In_Milliseconds},n.prototype._setWindowReference=function(){this._isNewWindow()&&(this._itemsRefreshedCount=0,this._windowStartTime=(new Date).getTime())},n.prototype._logIfThrottlingStopped=function(){this._eventsQueue.length===0&&this._isThrottling&&(this._isThrottling=!1,this.logThrottlingStoppedTelemetry())},n.prototype._logIfThrottlingStarted=function(){!this._isThrottling&&this._eventsQueue.length>0&&(this._isThrottling=!0,this.logThrottlingStartedTelemetry())},n.prototype.getRemainingItems=function(){for(var r,t=0,n=0,i=this._eventsQueue;n<i.length;n++)r=i[n],t+=r.length;return t},n.prototype.dispose=function(){this._delayedFunction&&this._delayedFunction.isPending()&&this._delayedFunction.cancel()},n.prototype.attachAutoRefreshCompletedEvent=function(n){this._eventsHelper.attachEvent(n,this._autoRefreshItemsCompletedDelegate)},n.prototype.detachAutoRefreshCompletedEvent=function(n){this._autoRefreshItemsCompletedDelegate&&(this._eventsHelper.detachEvent(n,this._autoRefreshItemsCompletedDelegate),this._autoRefreshItemsCompletedDelegate=null)},n.Items_Refresh_Threshold=500,n.Window_Length_In_Milliseconds=3e5,n.MaxTimeToProcessEvent_In_Milliseconds=500,n}();t.AutoRefreshThrottler=u});

define("Agile/Scripts/Board/BoardsAutoRefreshCommon",["require","exports","VSS/Telemetry/Services","Agile/Scripts/Common/CustomerIntelligence","Agile/Scripts/Common/EmbeddedHelper","Agile/Scripts/Common/AutoRefreshThrottler"],function(n,t,i,r,u,f){function a(n,t,f,e){e===void 0&&(e=!1);f.EventType=n;f.ExtensionId=t;f.IsEmbedded=u.EmbeddedHelper.isEmbedded();i.publishEvent(new i.TelemetryEventData(r.AgileCustomerIntelligenceArea.AGILE,r.AgileCustomerIntelligenceFeature.KANBANBOARD_AUTOREFRESH,f),e)}var o,s,h,c,e,l;Object.defineProperty(t,"__esModule",{value:!0});t.PublishAutoRefreshTelemetry=t.AutoRefreshState=t.BoardsAutoRefreshEventPayload=t.TracePoints=t.EventType=t.Events=t.Settings=void 0,function(n){n.BoardSettingsChangedInCurrentSession="VSS.Agile.Boards.SettingsChangedInCurrentSession"}(o=t.Settings||(t.Settings={})),function(n){n.ItemsNeedAutoRefresh="VSS.Agile.Boards.ItemsNeedAutoRefresh";n.CommonSettingsChanged="VSS.Agile.Boards.CommonSettingsChanged";n.SignalRConnectionRevived="VSS.Agile.Boards.SignalRConnectionRevived";n.SignalRConnectionStartTimedOut="VSS.Agile.Boards.SignalRConnectionStartTimedOut";n.SignalRConnectionStarted="VSS.Agile.Boards.SignalRConnectionStarted";n.ItemsAutoRefreshCompleted="VSS.Agile.Boards.ItemsAutoRefreshCompleted";n.RefreshBoard="VSS.Agile.Boards.RefreshBoard"}(s=t.Events||(t.Events={})),function(n){n.ItemUpdated="Updated";n.ItemAdded="Added";n.ItemDeleted="Deleted";n.ItemRestored="Restored";n.ItemCreated="Created";n.ItemRemoved="Removed"}(h=t.EventType||(t.EventType={})),function(n){n.ErrorInUpdate="Board.autorefresh.update.error";n.WarningInUpdateNotOnBoard="Board.autorefresh.update.warning.notonboard";n.WarningInUpdateAlreadyFresh="Board.autorefresh.update.warning.alreadyfresh";n.ErrorInAdd="Board.autorefresh.add.error";n.WarningInAddAlreadyOnBoard="Board.autorefresh.add.warning.alreadyonboard";n.WarningInDeleteNotOnBoard="Board.autorefresh.delete.warning.notonboard";n.ErrorInRestore="Board.autorefresh.restore.error";n.InfoInRestoreAlreadyOnBoard="Board.autorefresh.restore.info.alreadyonboard";n.ErrorUnknownEventType="Board.autorefresh.error.unknowneventtype"}(c=t.TracePoints||(t.TracePoints={}));e=function(n){function t(t){return n.call(this,t.id,t.changeType,t.revision,t.stackRank,t.changedChildren,t.changedTypeOrTitle)||this}return __extends(t,n),t}(f.AutoRefreshEventPayload);t.BoardsAutoRefreshEventPayload=e,function(n){n[n.ENABLED=0]="ENABLED";n[n.DISABLED=1]="DISABLED"}(l=t.AutoRefreshState||(t.AutoRefreshState={}));t.PublishAutoRefreshTelemetry=a});

define("Presentation/Scripts/TFS/TFS.OM.Identities.Mru",["require","exports","VSS/VSS","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Events/Handlers","VSS/Service","Presentation/Scripts/TFS/TFS.Core.WebApi","VSS/Telemetry/Services","Presentation/Scripts/TFS/TFS.OM.Identities"],function(n,t,i,r,u,f,e,o,s,h){var a,v,c,l,y;Object.defineProperty(t,"__esModule",{value:!0});t.BaseIdentityProvider=t.IdentityMru=t.IdentityMruService=t.IdentityMruStore=void 0;a=u.TfsContext;v=function(){function n(){}return n.getGlobalMruName=function(){return u.TfsContext.getDefault().navigation.serviceHost.instanceId},n.beginGetIdentityMru=function(t,i,r,u,f){var o,a,v;if(i===void 0&&(i=!0),o=n.identityMruMap[t],o&&i)$.isFunction(r)&&r(o);else{if(o){if(o.isRefreshing()){$.isFunction(r)&&r(o);return}o.setRefreshing(!0)}a=e.getCollectionService(c,f);v=new Date;a.beginGetMru(t,function(i){var f=new Date,u;h.IdentityHelper.preProcessIdentities(i,!0);o?(o.refresh(i,!0),o.setRefreshing(!1)):(o=new l(t,i),n.identityMruMap[t]=o);u={elapsedTime:f.getTime()-v.getTime()};s.publishEvent(new s.TelemetryEventData("IdentityMru","IdentityMruLoadTime",u));$.isFunction(r)&&r(o)},u)}},n.getIdentityMru=function(t,i){return t||(t=n.getGlobalMruName()),n.identityMruMap[t]||(n.identityMruMap[t]=new l(t,[]),n.beginGetIdentityMru(t,!1,undefined,undefined,i)),n.identityMruMap[t]},n.identityMruMap={},n}();t.IdentityMruStore=v;c=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this._httpClient=t.getHttpClient(o.IdentityMruHttpClient)},t.prototype.beginGetMru=function(n,t,r){this._httpClient.beginGetMru(n).then(function(n){$.isFunction(t)&&t(n)},r||i.handleError)},t.prototype.beginPostMruIdentity=function(n,t,r,u){this._httpClient.beginPostMruIdentity(n,t).then(function(){$.isFunction(r)&&r()},u||i.handleError)},t.prototype.beginDeleteMruIdentity=function(n,t,r,u){this._httpClient.beginDeleteMruIdentity(n,t).then(function(){$.isFunction(r)&&r()},u||i.handleError)},t}(e.VssService);t.IdentityMruService=c;l=function(){function n(n,t){this._mruName=n;this._refreshing=!1;this._events=new f.NamedEventCollection;this.refresh(t)}return n.prototype.refresh=function(n,t){var i=this;this._mruItems=n;this._idToMruItemMap={};$.each(this._mruItems,function(n,t){i._idToMruItemMap[t.id]=t});t&&this.fireMruRefreshed()},n.prototype.addItems=function(n){var u=this,t=[],i=[],f,r;$.each(n,function(n,r){r.id&&(t.push(r.id),i.push(r),u._idToMruItemMap[r.id]=r)});this._mruItems=h.IdentityHelper.union(this._mruItems,i);t.length>0&&(f=a.getDefault(),r=e.getCollectionService(c),r.beginPostMruIdentity(this._mruName,t))},n.prototype.removeItems=function(n){var i=this,t=[],r=[],f,u;$.each(n,function(n,u){u.id&&i.isItemInMru(u)&&(t.push(u.id),r.push(u),delete i._idToMruItemMap[u.id])});this._mruItems=h.IdentityHelper.subtract(this._mruItems,r);t.length>0&&(f=a.getDefault(),u=e.getCollectionService(c),u.beginDeleteMruIdentity(this._mruName,t))},n.prototype.setRefreshing=function(n){this._refreshing=n},n.prototype.isRefreshing=function(){return this._refreshing},n.prototype.isItemInMru=function(n){return n&&n.id&&this._idToMruItemMap[n.id]?!0:!1},n.prototype.getMruItems=function(){return this._mruItems},n.prototype.attachMruRefreshed=function(t){this._events.subscribe(n.MRU_REFRESHED_EVENT,t)},n.prototype.detachMruRefreshed=function(t){this._events.unsubscribe(n.MRU_REFRESHED_EVENT,t)},n.prototype.fireMruRefreshed=function(){this._events.invokeHandlers(n.MRU_REFRESHED_EVENT,this.getMruItems())},n.MRU_REFRESHED_EVENT="mru-refreshed",n}();t.IdentityMru=l;y=function(){function n(){}return n.prototype.beginAadIdentitySearch=function(n,t,i,f,e){var e=e||u.TfsContext.getDefault(),o=e.getActionUrl("searchAadIdentities","identity",{project:"",team:"",area:"api"});r.getMSJSON(o,{searchTerm:n,identityType:t},i,f)},n.prototype.beginTfsIdentitySearch=function(n,t,i,f,e){var e=e||u.TfsContext.getDefault(),o=e.getActionUrl("searchIdentities","wit",{project:"",team:"",area:"api"});r.getMSJSON(o,{searchTerm:n,identityType:t},i,f)},n}();t.BaseIdentityProvider=y});

/*!
 * jQuery UI Menu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/menu",["jquery", "./core", "./widget", "./position"], n) : n(jQuery) })(function (n) { return n.widget("ui.menu", { version: "1.11.4", defaultElement: "<ul>", delay: 300, options: { icons: { submenu: "ui-icon-carat-1-e" }, items: "> *", menus: "ul", position: { my: "left-1 top", at: "right top" }, role: "menu", blur: null, focus: null, select: null }, _create: function () { this.activeMenu = this.element; this.mouseHandled = !1; this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({ role: this.options.role, tabIndex: 0 }); this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"); this._on({ "mousedown .ui-menu-item": function (n) { n.preventDefault() }, "click .ui-menu-item": function (t) { var i = n(t.target); !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && n(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && this.active.parents(".ui-menu").length === 1 && clearTimeout(this.timer))) }, "mouseenter .ui-menu-item": function (t) { if (!this.previousFilter) { var i = n(t.currentTarget); i.siblings(".ui-state-active").removeClass("ui-state-active"); this.focus(t, i) } }, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function (n, t) { var i = this.active || this.element.find(this.options.items).eq(0); t || this.focus(n, i) }, blur: function (t) { this._delay(function () { n.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t) }) }, keydown: "_keydown" }); this.refresh(); this._on(this.document, { click: function (n) { this._closeOnDocumentClick(n) && this.collapseAll(n); this.mouseHandled = !1 } }) }, _destroy: function () { this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(); this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () { var t = n(this); t.data("ui-menu-submenu-carat") && t.remove() }); this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content") }, _keydown: function (t) { var i, u, r, f, e = !0; switch (t.keyCode) { case n.ui.keyCode.PAGE_UP: this.previousPage(t); break; case n.ui.keyCode.PAGE_DOWN: this.nextPage(t); break; case n.ui.keyCode.HOME: this._move("first", "first", t); break; case n.ui.keyCode.END: this._move("last", "last", t); break; case n.ui.keyCode.UP: this.previous(t); break; case n.ui.keyCode.DOWN: this.next(t); break; case n.ui.keyCode.LEFT: this.collapse(t); break; case n.ui.keyCode.RIGHT: this.active && !this.active.is(".ui-state-disabled") && this.expand(t); break; case n.ui.keyCode.ENTER: case n.ui.keyCode.SPACE: this._activate(t); break; case n.ui.keyCode.ESCAPE: this.collapse(t); break; default: e = !1; u = this.previousFilter || ""; r = String.fromCharCode(t.keyCode); f = !1; clearTimeout(this.filterTimer); r === u ? f = !0 : r = u + r; i = this._filterMenuItems(r); i = f && i.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : i; i.length || (r = String.fromCharCode(t.keyCode), i = this._filterMenuItems(r)); i.length ? (this.focus(t, i), this.previousFilter = r, this.filterTimer = this._delay(function () { delete this.previousFilter }, 1e3)) : delete this.previousFilter } e && t.preventDefault() }, _activate: function (n) { this.active.is(".ui-state-disabled") || (this.active.is("[aria-haspopup='true']") ? this.expand(n) : this.select(n)) }, refresh: function () { var i, t, u = this, f = this.options.icons.submenu, r = this.element.find(this.options.menus); this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length); r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({ role: this.options.role, "aria-hidden": "true", "aria-expanded": "false" }).each(function () { var t = n(this), i = t.parent(), r = n("<span>").addClass("ui-menu-icon ui-icon " + f).data("ui-menu-submenu-carat", !0); i.attr("aria-haspopup", "true").prepend(r); t.attr("aria-labelledby", i.attr("id")) }); i = r.add(this.element); t = i.find(this.options.items); t.not(".ui-menu-item").each(function () { var t = n(this); u._isDivider(t) && t.addClass("ui-widget-content ui-menu-divider") }); t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({ tabIndex: -1, role: this._itemRole() }); t.filter(".ui-state-disabled").attr("aria-disabled", "true"); this.active && !n.contains(this.element[0], this.active[0]) && this.blur() }, _itemRole: function () { return { menu: "menuitem", listbox: "option" }[this.options.role] }, _setOption: function (n, t) { n === "icons" && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu); n === "disabled" && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t); this._super(n, t) }, focus: function (n, t) { var i, r; this.blur(n, n && n.type === "focus"); this._scrollIntoView(t); this.active = t.first(); r = this.active.addClass("ui-state-focus").removeClass("ui-state-active"); this.options.role && this.element.attr("aria-activedescendant", r.attr("id")); this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"); n && n.type === "keydown" ? this._close() : this.timer = this._delay(function () { this._close() }, this.delay); i = t.children(".ui-menu"); i.length && n && /^mouse/.test(n.type) && this._startOpening(i); this.activeMenu = t.parent(); this._trigger("focus", n, { item: t }) }, _scrollIntoView: function (t) { var e, o, i, r, u, f; this._hasScroll() && (e = parseFloat(n.css(this.activeMenu[0], "borderTopWidth")) || 0, o = parseFloat(n.css(this.activeMenu[0], "paddingTop")) || 0, i = t.offset().top - this.activeMenu.offset().top - e - o, r = this.activeMenu.scrollTop(), u = this.activeMenu.height(), f = t.outerHeight(), i < 0 ? this.activeMenu.scrollTop(r + i) : i + f > u && this.activeMenu.scrollTop(r + i - u + f)) }, blur: function (n, t) { (t || clearTimeout(this.timer), this.active) && (this.active.removeClass("ui-state-focus"), this.active = null, this._trigger("blur", n, { item: this.active })) }, _startOpening: function (n) { (clearTimeout(this.timer), n.attr("aria-hidden") === "true") && (this.timer = this._delay(function () { this._close(); this._open(n) }, this.delay)) }, _open: function (t) { var i = n.extend({ of: this.active }, this.options.position); clearTimeout(this.timer); this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"); t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i) }, collapseAll: function (t, i) { clearTimeout(this.timer); this.timer = this._delay(function () { var r = i ? this.element : n(t && t.target).closest(this.element.find(".ui-menu")); r.length || (r = this.element); this._close(r); this.blur(t); this.activeMenu = r }, this.delay) }, _close: function (n) { n || (n = this.active ? this.active.parent() : this.element); n.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active") }, _closeOnDocumentClick: function (t) { return !n(t.target).closest(".ui-menu").length }, _isDivider: function (n) { return !/[^\-\u2014\u2013\s]/.test(n.text()) }, collapse: function (n) { var t = this.active && this.active.parent().closest(".ui-menu-item", this.element); t && t.length && (this._close(), this.focus(n, t)) }, expand: function (n) { var t = this.active && this.active.children(".ui-menu ").find(this.options.items).first(); t && t.length && (this._open(t.parent()), this._delay(function () { this.focus(n, t) })) }, next: function (n) { this._move("next", "first", n) }, previous: function (n) { this._move("prev", "last", n) }, isFirstItem: function () { return this.active && !this.active.prevAll(".ui-menu-item").length }, isLastItem: function () { return this.active && !this.active.nextAll(".ui-menu-item").length }, _move: function (n, t, i) { var r; this.active && (r = n === "first" || n === "last" ? this.active[n === "first" ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[n + "All"](".ui-menu-item").eq(0)); r && r.length && this.active || (r = this.activeMenu.find(this.options.items)[t]()); this.focus(i, r) }, nextPage: function (t) { var i, r, u; if (!this.active) { this.next(t); return } this.isLastItem() || (this._hasScroll() ? (r = this.active.offset().top, u = this.element.height(), this.active.nextAll(".ui-menu-item").each(function () { return i = n(this), i.offset().top - r - u < 0 }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]())) }, previousPage: function (t) { var i, r, u; if (!this.active) { this.next(t); return } this.isFirstItem() || (this._hasScroll() ? (r = this.active.offset().top, u = this.element.height(), this.active.prevAll(".ui-menu-item").each(function () { return i = n(this), i.offset().top - r + u > 0 }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items).first())) }, _hasScroll: function () { return this.element.outerHeight() < this.element.prop("scrollHeight") }, select: function (t) { this.active = this.active || n(t.target).closest(".ui-menu-item"); var i = { item: this.active }; this.active.has(".ui-menu").length || this.collapseAll(t, !0); this._trigger("select", t, i) }, _filterMenuItems: function (t) { var i = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"), r = new RegExp("^" + i, "i"); return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function () { return r.test(n.trim(n(this).text())) }) } }) });

/*!
 * jQuery UI Autocomplete 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/autocomplete",["jquery", "./core", "./widget", "./position", "./menu"], n) : n(jQuery) })(function (n) { return n.widget("ui.autocomplete", { version: "1.11.4", defaultElement: "<input>", options: { appendTo: null, autoFocus: !1, delay: 300, minLength: 1, position: { my: "left top", at: "left bottom", collision: "none" }, source: null, change: null, close: null, focus: null, open: null, response: null, search: null, select: null }, requestIndex: 0, pending: 0, _create: function () { var t, i, r, u = this.element[0].nodeName.toLowerCase(), f = u === "textarea", e = u === "input"; this.isMultiLine = f ? !0 : e ? !1 : this.element.prop("isContentEditable"); this.valueMethod = this.element[f || e ? "val" : "text"]; this.isNewMenu = !0; this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"); this._on(this.element, { keydown: function (u) { if (this.element.prop("readOnly")) { t = !0; r = !0; i = !0; return } t = !1; r = !1; i = !1; var f = n.ui.keyCode; switch (u.keyCode) { case f.PAGE_UP: t = !0; this._move("previousPage", u); break; case f.PAGE_DOWN: t = !0; this._move("nextPage", u); break; case f.UP: t = !0; this._keyEvent("previous", u); break; case f.DOWN: t = !0; this._keyEvent("next", u); break; case f.ENTER: this.menu.active && (t = !0, u.preventDefault(), this.menu.select(u)); break; case f.TAB: this.menu.active && this.menu.select(u); break; case f.ESCAPE: this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term), this.close(u), u.preventDefault()); break; default: i = !0; this._searchTimeout(u) } }, keypress: function (r) { if (t) { t = !1; (!this.isMultiLine || this.menu.element.is(":visible")) && r.preventDefault(); return } if (!i) { var u = n.ui.keyCode; switch (r.keyCode) { case u.PAGE_UP: this._move("previousPage", r); break; case u.PAGE_DOWN: this._move("nextPage", r); break; case u.UP: this._keyEvent("previous", r); break; case u.DOWN: this._keyEvent("next", r) } } }, input: function (n) { if (r) { r = !1; n.preventDefault(); return } this._searchTimeout(n) }, focus: function () { this.selectedItem = null; this.previous = this._value() }, blur: function (n) { if (this.cancelBlur) { delete this.cancelBlur; return } clearTimeout(this.searching); this.close(n); this._change(n) } }); this._initSource(); this.menu = n("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({ role: null }).hide().menu("instance"); this._on(this.menu.element, { mousedown: function (t) { t.preventDefault(); this.cancelBlur = !0; this._delay(function () { delete this.cancelBlur }); var i = this.menu.element[0]; n(t.target).closest(".ui-menu-item").length || this._delay(function () { var t = this; this.document.one("mousedown", function (r) { r.target === t.element[0] || r.target === i || n.contains(i, r.target) || t.close() }) }) }, menufocus: function (t, i) { var r, u; if (this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type))) { this.menu.blur(); this.document.one("mousemove", function () { n(t.target).trigger(t.originalEvent) }); return } u = i.item.data("ui-autocomplete-item"); !1 !== this._trigger("focus", t, { item: u }) && t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(u.value); r = i.item.attr("aria-label") || u.value; r && n.trim(r).length && (this.liveRegion.children().hide(), n("<div>").text(r).appendTo(this.liveRegion)) }, menuselect: function (n, t) { var i = t.item.data("ui-autocomplete-item"), r = this.previous; this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = r, this._delay(function () { this.previous = r; this.selectedItem = i })); !1 !== this._trigger("select", n, { item: i }) && this._value(i.value); this.term = this._value(); this.close(n); this.selectedItem = i } }); this.liveRegion = n("<span>", { role: "status", "aria-live": "assertive", "aria-relevant": "additions" }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body); this._on(this.window, { beforeunload: function () { this.element.removeAttr("autocomplete") } }) }, _destroy: function () { clearTimeout(this.searching); this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"); this.menu.element.remove(); this.liveRegion.remove() }, _setOption: function (n, t) { this._super(n, t); n === "source" && this._initSource(); n === "appendTo" && this.menu.element.appendTo(this._appendTo()); n === "disabled" && t && this.xhr && this.xhr.abort() }, _appendTo: function () { var t = this.options.appendTo; return t && (t = t.jquery || t.nodeType ? n(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t }, _initSource: function () { var i, r, t = this; n.isArray(this.options.source) ? (i = this.options.source, this.source = function (t, r) { r(n.ui.autocomplete.filter(i, t.term)) }) : typeof this.options.source == "string" ? (r = this.options.source, this.source = function (i, u) { t.xhr && t.xhr.abort(); t.xhr = n.ajax({ url: r, data: i, dataType: "json", success: function (n) { u(n) }, error: function () { u([]) } }) }) : this.source = this.options.source }, _searchTimeout: function (n) { clearTimeout(this.searching); this.searching = this._delay(function () { var t = this.term === this._value(), i = this.menu.element.is(":visible"), r = n.altKey || n.ctrlKey || n.metaKey || n.shiftKey; t && (!t || i || r) || (this.selectedItem = null, this.search(null, n)) }, this.options.delay) }, search: function (n, t) { return (n = n != null ? n : this._value(), this.term = this._value(), n.length < this.options.minLength) ? this.close(t) : this._trigger("search", t) === !1 ? void 0 : this._search(n) }, _search: function (n) { this.pending++; this.element.addClass("ui-autocomplete-loading"); this.cancelSearch = !1; this.source({ term: n }, this._response()) }, _response: function () { var t = ++this.requestIndex; return n.proxy(function (n) { t === this.requestIndex && this.__response(n); this.pending--; this.pending || this.element.removeClass("ui-autocomplete-loading") }, this) }, __response: function (n) { n && (n = this._normalize(n)); this._trigger("response", null, { content: n }); !this.options.disabled && n && n.length && !this.cancelSearch ? (this._suggest(n), this._trigger("open")) : this._close() }, close: function (n) { this.cancelSearch = !0; this._close(n) }, _close: function (n) { this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", n)) }, _change: function (n) { this.previous !== this._value() && this._trigger("change", n, { item: this.selectedItem }) }, _normalize: function (t) { return t.length && t[0].label && t[0].value ? t : n.map(t, function (t) { return typeof t == "string" ? { label: t, value: t } : n.extend({}, t, { label: t.label || t.value, value: t.value || t.label }) }) }, _suggest: function (t) { var i = this.menu.element.empty(); this._renderMenu(i, t); this.isNewMenu = !0; this.menu.refresh(); i.show(); this._resizeMenu(); i.position(n.extend({ of: this.element }, this.options.position)); this.options.autoFocus && this.menu.next() }, _resizeMenu: function () { var n = this.menu.element; n.outerWidth(Math.max(n.width("").outerWidth() + 1, this.element.outerWidth())) }, _renderMenu: function (t, i) { var r = this; n.each(i, function (n, i) { r._renderItemData(t, i) }) }, _renderItemData: function (n, t) { return this._renderItem(n, t).data("ui-autocomplete-item", t) }, _renderItem: function (t, i) { return n("<li>").text(i.label).appendTo(t) }, _move: function (n, t) { if (!this.menu.element.is(":visible")) { this.search(null, t); return } if (this.menu.isFirstItem() && /^previous/.test(n) || this.menu.isLastItem() && /^next/.test(n)) { this.isMultiLine || this._value(this.term); this.menu.blur(); return } this.menu[n](t) }, widget: function () { return this.menu.element }, _value: function () { return this.valueMethod.apply(this.element, arguments) }, _keyEvent: function (n, t) { (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(n, t), t.preventDefault()) } }), n.extend(n.ui.autocomplete, { escapeRegex: function (n) { return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") }, filter: function (t, i) { var r = new RegExp(n.ui.autocomplete.escapeRegex(i), "i"); return n.grep(t, function (n) { return r.test(n.label || n.value || n) }) } }), n.widget("ui.autocomplete", n.ui.autocomplete, { options: { messages: { noResults: "No search results.", results: function (n) { return n + (n > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate." } } }, __response: function (t) { var i; (this._superApply(arguments), this.options.disabled || this.cancelSearch) || (i = t && t.length ? this.options.messages.results(t.length) : this.options.messages.noResults, this.liveRegion.children().hide(), n("<div>").text(i).appendTo(this.liveRegion)) } }), n.ui.autocomplete });

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/TFS.UI.Controls.Identities",["require","exports","VSS/Utils/Core","VSS/Utils/String","VSS/Diag","VSS/Resources/VSS.Resources.Platform","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Controls","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/UI","VSS/Controls/Notifications","VSS/Controls/StatusIndicator","VSS/Events/Services","Presentation/Scripts/TFS/TFS.OM.Identities","VSS/Utils/Html","VSS/Telemetry/Services","VSS/Controls/PopupContent","Presentation/Scripts/TFS/TFS.OM.Identities.Mru","jQueryUI/autocomplete"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){var k,tt,it;Object.defineProperty(t,"__esModule",{value:!0});t.IdentityViewControl=t.IdentitySearchMode=t.MruIdentityPickerControl=void 0;var d=i.delegate,nt=h.domElem,g=h.KeyCode,rt=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"mru-identity-picker input-text-box",pageSize:t.IDENTITY_PICKER_PAGE_SIZE,showDrop:!0,showSelectionAvatar:!0,enableTfsSearch:!0,enableAadSearch:s.TfsContext.getDefault().isAADAccount,identityProvider:new b.BaseIdentityProvider},i))},t.prototype.initialize=function(){var i=this,r;if(n.prototype.initialize.call(this),this._identityMru=this._options.identityMru,this._selectedItem=this._options.selectedItem,this._enabled=typeof this._options.enabled=="boolean"?this._options.enabled:!0,this._searchItems=[],this._identityFilter=this._options.identityFilter||v.IdentityFilter.All,this._searchTerm="",this._prevSearchTerm="",this._searchMode=this._getDefaultSearchMode(),this._deleteItemsQueue=[],this._identityProvider=this._options.identityProvider,this._tfsContext=this._options.tfsContext,r=this._options.items||this._identityMru.getMruItems().slice(0),this._items=this._filterItems(r),this._mruRefreshedDelegate=d(this,this.setSource),this._identityMru.attachMruRefreshed(this._mruRefreshedDelegate),this._$wrapper=$("<div>").addClass("wrap"),this._$wrapper.bind("click",function(n){i._enabled&&!$(n.target).hasClass("mru-identity-picker-input")&&i._input.focus()}),this._input=$("<input>").attr("type","text").addClass("mru-identity-picker-input").appendTo($("<div>").addClass("text-wrapper").appendTo(this._$wrapper)),this._options.id&&this._input.attr("id",this._options.id+"_txt"),this._showUnsetImage=this._options.showUnsetImage===!0,this._watermarkText=this._options.watermark!==undefined&&typeof this._options.watermark=="string"?this._options.watermark:f.MruIdentityPickerWatermark,this._unsetIdentityImageResource=this._options.unsetIdentityImageResource!==undefined&&typeof this._options.unsetIdentityImageResource=="string"?this._options.unsetIdentityImageResource:t.DefaultUnsetIdentityImageResource,this._enabled&&h.Watermark(this._input,{watermarkText:this._watermarkText}),this._input.attr("title",f.MruIdentityPickerTooltip),this._enabled||this.setEnabled(this._enabled),this._input.attr("autocomplete","off"),this._bind(this._input,"keydown",d(this,this._onInputKeyDown)),this._input.focus(function(){i._enabled&&i._onInputFocus()}),this._input.mousedown(function(){i._enabled&&!i._input.is(":focus")&&i._input.focus()}),this._bind(this._input,"blur",d(this,this._onInputBlur)),this._options.showDrop){this._dropButton=$(nt("div","drop")).appendTo(this.getElement());this._bind(this._dropButton,"click",d(this,this._onDropClick));this._dropButton.on("mousedown",function(n){n.preventDefault()});this._enabled?this._element.addClass("drop"):this._dropButton.hide()}this._$wrapper.appendTo(this.getElement());this._listContainer=this._options.pickerContainer||this.getElement();this._identityPickerListView=o.BaseControl.createIn(tt,this._listContainer,{identityMru:this._identityMru,pageSize:this._options.pageSize,items:this._items,onItemSelect:function(n){i._selectItem(n,{highlightText:!0})},onItemDelete:function(n){i._removeItem(n)},onTfsIdentitySearch:function(){i._beginTfsIdentitySearch(i._searchTerm)},onAadIdentitySearch:function(){i._beginAadIdentitySearch(i._searchTerm)}});this._selectedItem&&this.setValue(this._selectedItem);this._hideDropDown();s.TfsContext.getDefault().isHosted&&this._options.enableAadSearch&&this._checkForGuestUsers()},t.prototype._checkForGuestUsers=function(){function i(t){n._options.enableAadSearch=!t.isGuest}function r(){n._options.enableAadSearch=!1}var n=this,t=s.TfsContext.getDefault(),u=t.getActionUrl("IsGuestAadUser","identity",{project:"",team:"",area:"api"});e.getMSJSON(u,{userEmail:t.currentIdentity.email},i,r)},t.prototype.dispose=function(){this._identityMru.detachMruRefreshed(this._mruRefreshedDelegate);n.prototype.dispose.call(this)},t.prototype.getItems=function(){return this._items},t.prototype.setSource=function(n){this._items=this._filterItems(v.IdentityHelper.union(n,this._items))},t.prototype.focus=function(){this._input.focus()},t.prototype.getIdentityMru=function(){return this._identityMru},t.prototype.setEnabled=function(n){n?(this._input.removeAttr("readonly"),this._input.removeClass("disabled"),this.getElement().removeClass("readonly"),h.Watermark(this._input,{watermarkText:this._watermarkText}),this._options.showDrop&&(this._dropButton.show(),this._element.addClass("drop"))):(h.Watermark(this._input,{watermarkText:""}),this._input.attr("readonly","readonly"),this._input.addClass("disabled"),this.getElement().addClass("readonly"),this._options.showDrop&&(this._dropButton.hide(),this._element.addClass("drop")));this._enabled=n},t.prototype.getInput=function(){return this._input},t.prototype.getInputText=function(){return $.trim(this._input.val())},t.prototype.setInputText=function(n,t){this._input.val(n);$.trim(n)===""&&this._input.trigger("blur");this._searchTerm=n;this._hideDropDown();t&&this._fireChange({selectedItem:this._selectedItem})},t.prototype.getValue=function(){return this._selectedItem?this._selectedItem:{id:"",displayName:this.getInputText(),uniqueName:""}},t.prototype.setValue=function(n,t){t===void 0&&(t=!0);n?(typeof n=="string"&&(n=v.IdentityHelper.parseUniquefiedIdentityName(n)),(n.id||n.uniqueName)&&(this._items=v.IdentityHelper.union(this._items,[n])),this._selectItem(n,{fireChange:t})):this.clear()},t.prototype.setInvalid=function(n){this._element.toggleClass("invalid",n);this._input.attr("aria-invalid",n?"true":"false")},t.prototype.clear=function(n){n===void 0&&(n=!0);this._selectedItem=null;this._searchItems=[];this._markUnresolved();this.setInputText("",n);this._input.attr("title",f.MruIdentityPickerTooltip);this._searchTerm=""},t.prototype.getSearchResult=function(n,t){if(t==="")return[];var r=$.ui.autocomplete.escapeRegex(t),i=new RegExp("(^)"+r,"i");return $.grep(n,function(n){var t=n.uniqueName||"";return t.indexOf("\\")>=0&&(t=t.substr(t.indexOf("\\")+1)),i.test(n.displayName)||i.test(t)})},t.prototype._filterItems=function(n){switch(this._identityFilter){case v.IdentityFilter.Users:return $.map(n,function(n){return n.isContainer?null:n});case v.IdentityFilter.Groups:return $.map(n,function(n){return n.isContainer?n:null});default:return n}},t.prototype._beginAadIdentitySearch=function(n){function e(n){var f=new Date;t._searchItems=v.IdentityHelper.union(n,t._searchItems);t._search({force:!0,showDropDown:!0,searchMode:k.None,fireChange:!1});i={elapsedTime:f.getTime()-r.getTime()};p.publishEvent(new p.TelemetryEventData("IdentityPicker","AadIdentitySearchTime",i));u.logTracePoint("IdentityPicker.AadIdentitySearchEnd")}function o(){t._identityPickerListView.showError(f.AADServiceUnavailable);u.logTracePoint("IdentityPicker.AadIdentitySearchEnd")}var t=this,i,r;u.logTracePoint("IdentityPicker.AadIdentitySearchStart");this._prevSearchTerm=n;this._identityPickerListView.showLoading();i={searchTerm:n.length};p.publishEvent(new p.TelemetryEventData("IdentityPicker","AadIdentitySearch",i));r=new Date;n=n.replace("'","''");this._identityProvider.beginAadIdentitySearch(n,this._identityFilter,e,o,this._tfsContext)},t.prototype._beginTfsIdentitySearch=function(n){function f(n){var f=new Date;v.IdentityHelper.preProcessIdentities(n);t._searchMode=t._options.enableAadSearch?k.SearchAad:k.None;t._searchItems=n;t._search({force:!0,showDropDown:!0,searchMode:t._searchMode,fireChange:!1});i={elapsedTime:f.getTime()-r.getTime()};p.publishEvent(new p.TelemetryEventData("IdentityPicker","IdentitySearchTime",i));u.logTracePoint("IdentityPicker.TfsIdentitySearchEnd")}function e(){t._identityPickerListView.showError();u.logTracePoint("IdentityPicker.TfsIdentitySearchEnd")}var t=this,i,r;u.logTracePoint("IdentityPicker.TfsIdentitySearchStart");this._prevSearchTerm=n;this._identityPickerListView.showLoading();i={searchTerm:n.length};p.publishEvent(new p.TelemetryEventData("IdentityPicker","IdentitySearch",i));r=new Date;this._identityProvider.beginTfsIdentitySearch(n,this._identityFilter,f,e,this._tfsContext)},t.prototype._hideDropDown=function(){this._dropdownVisible=!1;this._identityPickerListView.hideElement();this._detachGlobalEvents()},t.prototype._showDropDown=function(){this._dropdownVisible=!0;this._identityPickerListView.showElement();this._identityPickerListView.setPosition();this._attachGlobalEvents()},t.prototype._selectItem=function(n,t){var f=this,r,u,i;if(n){if(r=!0,t&&typeof t.fireChange=="boolean"&&(r=t.fireChange),this._markUnresolved(),this._selectedItem=n,this.setInputText(n.displayName,r),this._input.attr("aria-owns","items-container-id"),this._input.attr("aria-autocomplete","list"),this._input.attr("role","combobox"),this._input.attr("title",v.IdentityHelper.getFriendlyDistinctDisplayName(n)),u=v.IdentityHelper.getIdentityImageUrl(n,v.IdentityImageMode.ShowGenericImage),this._options.showSelectionAvatar&&u&&n.showGenericImage!==!1){this._resolvedIdentityImage=$("<div>").addClass("img-container loading").prependTo(this._$wrapper);i=$("<img>").attr("alt",n.displayName).attr("title",v.IdentityHelper.getFriendlyDistinctDisplayName(n)).appendTo(this._resolvedIdentityImage);i.one("load",function(){f._resolvedIdentityImage.removeClass("loading")});i.one("error",function(){f._resolvedIdentityImage.removeClass("loading");var n=s.TfsContext.getDefault();i.attr("src",n.configuration.getResourcesFile("User.svg"))});i.attr("src",u);this._$wrapper.addClass("resolved")}t&&t.highlightText&&this._input.select();$.isFunction(this._options.selectionChanged)&&this._options.selectionChanged(n)}},t.prototype._onInputKeyDown=function(n){function o(){return u._identityPickerListView.searchMode===k.SearchAad?(u._beginAadIdentitySearch(u._searchTerm),!0):u._identityPickerListView.searchMode===k.SearchTfs?(u._beginTfsIdentitySearch(u._searchTerm),!1):void 0}var t=this,u=this,s,f,h,e,r,c;if(n.ctrlKey&&(n.keyCode===89||n.keyCode===90))return!1;switch(n.keyCode){case g.UP:if(this._dropdownVisible)return s=this._identityPickerListView.selectPrev(),f=this._identityPickerListView.getSelectedItem(),f&&this._input.attr("aria-activedescendant",f.id),s;case g.DOWN:if(this._dropdownVisible)return h=this._identityPickerListView.selectNext(),e=this._identityPickerListView.getSelectedItem(),e&&this._input.attr("aria-activedescendant",e.id),h;this._openDropdownAndHideSelection();case g.PAGE_UP:if(this._dropdownVisible)return this._identityPickerListView.prevPage();case g.PAGE_DOWN:if(this._dropdownVisible)return this._identityPickerListView.nextPage();case g.TAB:return this._dropdownVisible&&(r=this._identityPickerListView.getSelectedItem(),r&&i.delay(this,0,function(){t._selectItem(r)}),this._hideDropDown()),!0;case g.ENTER:return this._dropdownVisible?(r=this._identityPickerListView.getSelectedItem(),r?this._selectItem(r,{highlightText:!0}):o(),!1):!0;case g.ESCAPE:return this._selectedItem&&this._selectItem(this._selectedItem),this._hideDropDown(),!1;case g.DELETE:return this._dropdownVisible?(r=this._identityPickerListView.getSelectedItem(),r&&this._identityMru.isItemInMru(r)&&this._getCaretPosition()===this._input.val().length?(this._removeItem(r),this._identityPickerListView.removeItem(this._identityPickerListView.getSelectedIndex()),!1):(i.delay(this,0,function(){t._selectedItem=null;t._markUnresolved();t._search({showDropDown:t._dropdownVisible})}),!0)):(i.delay(this,0,function(){t._selectedItem=null;t._markUnresolved();t._search({showDropDown:!0})}),!0);case g.QUESTION_MARK:this._dropdownVisible&&n.ctrlKey&&o();default:return c=this.getInputText(),i.delay(this,0,function(){c!==t.getInputText()&&(t._prevSearchTerm&&t.getInputText().indexOf(t._prevSearchTerm)!==0&&(t._prevSearchTerm="",t._searchMode=t._getDefaultSearchMode()),t._selectedItem=null,t._markUnresolved(),t._search({showDropDown:!0}))}),!0}},t.prototype._markUnresolved=function(){this._resolvedIdentityImage&&(this._resolvedIdentityImage.remove(),this._resolvedIdentityImage=null);this._hideUnassignedIdentityImage(!1);this._$wrapper.removeClass("resolved")},t.prototype._hideUnassignedIdentityImage=function(n){this._unsetIdentityImage&&(this._unsetIdentityImage.remove(),this._unsetIdentityImage=null,n&&this._$wrapper.hasClass("resolved")&&this._$wrapper.removeClass("resolved"))},t.prototype._getCaretPosition=function(){var n=this._input[0];return n.selectionStart},t.prototype._removeItem=function(n){var t=this;n&&this._identityMru.isItemInMru(n)&&(this._deleteItemsQueue.push(n),this._deletingTimeout!==null&&(clearTimeout(this._deletingTimeout),this._deletingTimeout=null),this._deletingTimeout=setTimeout(function(){t._identityMru.removeItems(t._deleteItemsQueue);t._deleteItemsQueue=[]},500),this._items=v.IdentityHelper.subtract(this._items,[n]),this._searchItems=v.IdentityHelper.subtract(this._searchItems,[n]))},t.prototype._openDropdownAndHideSelection=function(){var n=this;this._search({force:!0,showDropDown:!1,fireChange:!1});this._markUnresolved();this._showDropDown();i.delay(this,0,function(){n._input.select()});this._selectedItem&&this._input.attr("aria-activedescendant",this._selectedItem.id)},t.prototype._onDropClick=function(){this._dropdownVisible?(this._hideDropDown(),this._selectedItem&&this._selectItem(this._selectedItem)):(this._openDropdownAndHideSelection(),this._enabled=!1,this._input.focus(),this._enabled=!0)},t.prototype._onInputFocus=function(){this._element.addClass("focus");this.getInputText()?this._openDropdownAndHideSelection():this._hideUnassignedIdentityImage(!0);$.isFunction(this._options.onInputFocus)&&this._options.onInputFocus()},t.prototype._onInputBlur=function(){var t=this,n,r;this._element.removeClass("focus");$(".identity-picker-list-view:hover",this._element).length===0?(this._hideDropDown(),this._selectedItem?this._selectItem(this._selectedItem):this._enabled&&this._showUnsetImage&&(this._hideUnassignedIdentityImage(!0),n=this._tfsContext.configuration.getResourcesFile(this._unsetIdentityImageResource),this._unsetIdentityImage=$("<div>").addClass("img-container").prependTo(this._$wrapper),r=$("<img>").attr("title",this._watermarkText).appendTo(this._unsetIdentityImage).attr("src",n),this._$wrapper.addClass("resolved")),$.isFunction(this._options.onInputBlur)&&this._options.onInputBlur()):(this._enabled=!1,this._input.focus(),i.delay(this,0,function(){t._enabled=!0}))},t.prototype._getDefaultSearchMode=function(){return this._options.enableTfsSearch?k.SearchTfs:this._options.enableAadSearch?k.SearchAad:k.None},t.prototype._search=function(n){var t=this,e,o,i,s,r;u.logTracePoint("IdentityPicker.SearchStarted");e=function(){return t._searchTerm?n&&n.searchMode?n.searchMode:t._prevSearchTerm&&t._searchTerm.indexOf(t._prevSearchTerm)===0?t._searchMode:t._getDefaultSearchMode():k.None};(n&&n.force||this._searchTerm!==this.getInputText())&&(this._searchTerm=this.getInputText(),o=e(),i=this._items,this._searchTerm?(s=v.IdentityHelper.union(this._searchItems,this._items),i=this.getSearchResult(s,this._searchTerm)):this._searchItems=[],this._identityPickerListView.update(i,this._searchTerm,o),this._selectedItem||this._input.attr("title",this._searchTerm===""?f.MruIdentityPickerTooltip:this._searchTerm),n&&n.showDropDown&&this._searchTerm?this._showDropDown():this._hideDropDown(),r=!0,n&&typeof n.fireChange=="boolean"&&(r=n.fireChange),r&&this._fireChange({selectedItem:this._selectedItem}),u.logTracePoint("IdentityPicker.SearchEnd"))},t.prototype._fireChange=function(n){$.isFunction(this._options.change)&&this._options.change(n)},t.prototype._attachGlobalEvents=function(){this._bind(this.getElement().parents(),"scroll",d(this,this._hideDropDown));this._bind(this.getElement().parents(),"resize",d(this,this._hideDropDown));a.getService().attachEvent("dialog-move",d(this,this._hideDropDown))},t.prototype._detachGlobalEvents=function(){this._unbind(this.getElement().parents(),"scroll",d(this,this._hideDropDown));this._unbind(this.getElement().parents(),"resize",d(this,this._hideDropDown));a.getService().detachEvent("dialog-move",d(this,this._hideDropDown))},t.IDENTITY_PICKER_PAGE_SIZE=8,t.DefaultUnsetIdentityImageResource="notassigned-user.svg",t}(o.BaseControl);t.MruIdentityPickerControl=rt,function(n){n[n.None=1]="None";n[n.SearchTfs=2]="SearchTfs";n[n.SearchAad=3]="SearchAad"}(k=t.IdentitySearchMode||(t.IdentitySearchMode={}));tt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._scrollTimeout=null,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"identity-picker-list-view",pageSize:10},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._identityMru=this._options.identityMru;this._element.on("mousedown",function(n){n.preventDefault()});this._element.attr("role","menu");this._element.attr("aria-hidden","true");this.update(this._options.items,this._options.highlightTerm)},t.prototype.setPosition=function(){var i=this._element.parent().outerWidth()-2,u;this._element.width(i<t.MIN_WIDTH?t.MIN_WIDTH:i);h.Positioning.position(this.getElement(),this._element.parent(),{elementAlign:"left-top",baseAlign:"left-bottom"});var n=this._element.parent().offset().top,f=this._element.offset().top,r=this._element.height();f<n&&n<r&&(u=this._itemsContainer.height(),this._itemsContainer.height(u-(r-n)))},t.prototype.update=function(n,t,i){i===void 0&&(i=k.SearchTfs);this._items=n||[];this._highlightTerm=t||"";this._itemsUIArr=[];this._selectedIndex=null;this.searchMode=i;this._render();this.setSelectedIndex(0,!1)},t.prototype.getListItems=function(){return this._items},t.prototype.showLoading=function(){var n=$(".search",this._element).empty(),t=o.BaseControl.createIn(l.StatusIndicator,n,{center:!0,message:f.Loading});t.start()},t.prototype.showError=function(n){var t=$(".search",this._element).empty().addClass("search-error").unbind("click").removeClass("search-tfs-noresult"),i;this.searchMode=k.None;i=o.BaseControl.createIn(c.MessageAreaControl,t,{closeable:!1,message:{header:$("<span>").html(n||f.MruIdentityPickerError),type:c.MessageAreaType.Warning},showIcon:!0})},t.prototype.nextPage=function(){var n=this._selectedIndex+this._options.pageSize;return this._loadNextPage(!0),this.setSelectedIndex(n<this._itemsUIArr.length?n:this.searchMode===k.None?this._itemsUIArr.length-1:-1,!0,h.Positioning.VerticalScrollBehavior.Top),!1},t.prototype.prevPage=function(){var n=this._selectedIndex-this._options.pageSize;return this.setSelectedIndex(n>=0?n:0,!0,h.Positioning.VerticalScrollBehavior.Top),!1},t.prototype.selectNext=function(){return(this._selectedIndex<this._numItemsDisplayed-1||this._selectedIndex===this._items.length-1)&&this.setSelectedIndex(this._selectedIndex+1,!0),!1},t.prototype.selectPrev=function(){return this._selectedIndex>0&&this.setSelectedIndex(this._selectedIndex-1,!0,h.Positioning.VerticalScrollBehavior.Top),!1},t.prototype.getSelectedIndex=function(){return this._selectedIndex},t.prototype.getSelectedItem=function(){return this._selectedIndex>=this._items.length?null:this._items[this._selectedIndex]},t.prototype.setSelectedIndex=function(n,t,i){i===void 0&&(i=h.Positioning.VerticalScrollBehavior.Bottom);n>=0&&n<this._itemsUIArr.length&&(this._selectedIndex=n,$("li",this._itemsContainer).removeClass("selected"),$("li").attr("aria-selected","false"),$(".search",this._element).removeClass("selected"),this._itemsUIArr[this._selectedIndex].addClass("selected"),this._element.css("display")!=="none"&&this._itemsUIArr[this._selectedIndex].attr("aria-selected","true"),t&&this._scrollItemIntoView(this._selectedIndex,i))},t.prototype.removeItem=function(n){n<this._items.length&&n>=0&&(this._itemsUIArr[n].remove(),this._items.splice(n,1),this._itemsUIArr.splice(n,1),this._numItemsDisplayed--,this._loadNextPage(),n===this._selectedIndex&&this.setSelectedIndex(n,!0),this._numItemsDisplayed>0&&this._numItemsDisplayed<this._items.length?this._$itemsStatus.text(r.format(f.MruIdentityPickerStatus,this._items.length)):this._$itemsStatus.hide(),this.setPosition())},t.prototype.hideElement=function(){this._element.attr("aria-hidden","true");n.prototype.hideElement.call(this)},t.prototype.showElement=function(){this._element.attr("aria-hidden","false");n.prototype.showElement.call(this)},t.prototype._render=function(){var t=this,o=this._element.parent(),i,n,u,e;if(this._element.detach(),this._element.empty(),this._itemsContainer=$(nt("ul","items")),this._itemsContainer.attr("id","items-container-id"),this._element.append(this._itemsContainer),this._itemsContainer.scroll(function(n){t._onScroll(n)}),this._items.length==0)this._numItemsDisplayed=0;else for(this._numItemsDisplayed=Math.min(this._items.length,this._options.pageSize),i=0;i<Math.min(this._items.length,this._options.pageSize);i++)this._itemsContainer.append(this._createItem(i));this._$itemsStatus=$("<div>").addClass("search-result-status").appendTo(this._element);this._numItemsDisplayed>0&&this._numItemsDisplayed<this._items.length?this._$itemsStatus.text(r.format(f.MruIdentityPickerStatus,this._items.length)):this._$itemsStatus.hide();this.searchMode!==k.None?(u=this.searchMode===k.SearchTfs?f.MruIdentityPickerTfsSearchTitle:f.MruIdentityPickerAadSearchTitle,n=$("<div>").addClass("search").attr("title",u).attr("role","menu"),this.searchMode===k.SearchAad&&this._items.length==0?(e=f.MruIdentityPickerNoResult,n=n.addClass("search-tfs-noresult").text(e).append("<br />").append(u).appendTo(this._element)):n=n.text(u).appendTo(this._element),n.append($("<span>").addClass("bowtie-icon bowtie-search")),n.click(function(){t.searchMode===k.SearchTfs&&$.isFunction(t._options.onTfsIdentitySearch)?t._options.onTfsIdentitySearch():t.searchMode===k.SearchAad&&$.isFunction(t._options.onAadIdentitySearch)&&t._options.onAadIdentitySearch()}),this._itemsUIArr.push(n),n.hover(function(){n.addClass("hover")},function(){n.removeClass("hover")})):this._items.length===0&&(n=$("<div>").addClass("no-result").text(f.MruIdentityPickerNoResult).appendTo(this._element));o.append(this._element)},t.prototype._createItem=function(n){var r=this,t=this._items[n],e=$.ui.autocomplete.escapeRegex(this._highlightTerm),a=new RegExp("(^)"+e,"i"),c=new RegExp("(^)"+e,"i"),o=v.IdentityHelper.getFriendlyUniqueName(t),u,h;o.indexOf("\\")>=0&&(c=new RegExp("(\\\\)"+e,"i"));var p=t.displayName.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(a,function(n){return"<b>"+n+"<\/b>"}),w=o.replace(c,function(n){return o.indexOf("\\")>=0?(n=n.replace("\\",""),"\\<b>"+n+"<\/b>"):"<b>"+n+"<\/b>"}),l=v.IdentityHelper.getIdentityImageUrl(t,v.IdentityImageMode.ShowGenericImage),i=$(y.TemplateEngine.tmpl('<li title="${tooltip}" class="${itemClass} list-item"  id="${id}" role="menuitem" alt="${tooltip}">   <div class="item-image-container loading ${imgClass}" aria-hidden="true">       <img alt="${alt}" class="identity-picture small" />   <\/div>   <div class="item-text-container">       <div class="title" >{{html title}}<\/div>       <div class="subtitle" >{{html subtitle}}<\/div>   <\/div>   <div class="icon icon-delete-small" title="${iconTitle}" aria-hidden="true"><\/div><\/li>',{id:t.id,title:p,subtitle:w,alt:t.displayName,tooltip:v.IdentityHelper.getFriendlyDistinctDisplayName(t),iconTitle:f.MruIdentityPickerRemoveItemTitle,imgClass:l&&t.showGenericImage!==!1?"":"hidden",itemClass:this._identityMru.isItemInMru(t)?"mru-item":"non-mru-item"}));this._itemsUIArr.push(i);u=i.find("img.identity-picture");h=i.find("div.item-image-container");u.one("load",function(){h.removeClass("loading")});u.one("error",function(){h.removeClass("loading");var n=s.TfsContext.getDefault();u.attr("src",n.configuration.getResourcesFile("User.svg"))});return u.attr("src",l),$(".icon.icon-delete-small",i).click(function(){if($.isFunction(r._options.onItemDelete)){r._options.onItemDelete(t);r.removeItem(i.index())}return!1}),i.click(function(){if($.isFunction(r._options.onItemSelect))r._options.onItemSelect(t)}),i.hover(function(){i.addClass("hover")},function(){i.removeClass("hover")}),i},t.prototype._scrollItemIntoView=function(n,t){h.Positioning.scrollIntoViewVertical(this._itemsUIArr[n],t)},t.prototype._onScroll=function(){return this._scrollTimeout!==null&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null),this._scrollTimeout=setTimeout(d(this,this._loadNextPage),100),!1},t.prototype._loadNextPage=function(n){var t,i;if(n===void 0&&(n=!1),n||this._isCloseToBottom()){for(t=this._numItemsDisplayed;t<this._numItemsDisplayed+Math.min(this._items.length-this._numItemsDisplayed,this._options.pageSize);t++)this.searchMode!==k.None&&(i=this._itemsUIArr.pop()),this._itemsContainer.append(this._createItem(t)),i&&this._itemsUIArr.push(i);this._numItemsDisplayed+=Math.min(this._items.length-this._numItemsDisplayed,this._options.pageSize);this._numItemsDisplayed>0&&this._numItemsDisplayed<this._items.length&&this._$itemsStatus.text(r.format(f.MruIdentityPickerStatus,this._items.length))}this._scrollTimeout!==null&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null)},t.prototype._isCloseToBottom=function(){return this._itemsContainer.scrollTop()+this._itemsContainer.outerHeight()>=this._itemsContainer[0].scrollHeight-5},t.AVATAR_WIDTH=40,t.TEXT_MARGIN=25,t.MIN_WIDTH=250,t.enhancementTypeName="tfs.identityPickerListViewControl",t}(o.BaseControl);it=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.getIdentityViewElement=function(n,i){var r=$("<div>"),u=o.BaseControl.createIn(t,r,$.extend({identifier:n},i));return u.getElement()},t.renderIdentityCellContents=function(n,i,r,u,f,e,s,h,c){var l,v,a;return c===void 0&&(c=!1),l=n._drawCell(i,r,u,f,e,s,h),v=n.getColumnText(r,e,h),l&&(l.addClass("identity-grid-cell"),l.empty(),a=o.create(t,l,{identifier:v,showImage:c,showTooltip:!1}),a.tooltipInfo&&a.tooltipInfo.tooltipText&&(l.data("tooltip-text",a.tooltipInfo.tooltipText),l.data("tooltip-show-on-overflow",a.tooltipInfo.showOnOverflow))),l},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"identity-view-control",showImage:!0},t))},t.prototype.initialize=function(){var u,l,f,c,o,s,h;n.prototype.initialize.call(this);this.tooltipInfo={tooltipText:"",showOnOverflow:!1};var t=this._options,e=this.getElement(),i=null;$.isPlainObject(t.identifier)?i=t.identifier:typeof t.identifier=="string"&&(i=v.IdentityHelper.parseUniquefiedIdentityName(t.identifier));u="";l=!1;i&&(u=i.displayName,f=v.IdentityHelper.getFriendlyDistinctDisplayName(i),c=r.localeIgnoreCaseComparer(u,f)!==0,t.showTooltip!==!1?w.RichContentTooltip.add(f,e,u===f?{onlyShowWhenOverflows:e}:undefined):f&&(this.tooltipInfo.tooltipText=f,this.tooltipInfo.showOnOverflow=!c));o=!1;t.showImage&&i&&(s=v.IdentityHelper.getIdentityImageUrl(i,undefined,t.size),s&&(o=!0,h=$("<img />").attr("src",s),h.appendTo(e),t.showTooltip!==!1&&w.RichContentTooltip.add(u,h)));o||e.addClass("no-image");$("<span>").text(u).appendTo(e)},t}(o.Control);t.IdentityViewControl=it});

define("Agile/Scripts/Card/CardUtils",["require","exports","Agile/Scripts/Common/Utils","Agile/Scripts/Common/Agile","Agile/Scripts/Card/Cards","VSS/Identities/Picker/Controls","VSS/Controls/PopupContent","VSS/Utils/Array","VSS/Utils/Date","VSS/Utils/String","VSS/Utils/UI","VSS/Locations","Presentation/Scripts/TFS/TFS.UI.Controls.Identities","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/OM/WiqlOperators","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){function b(n){return n?[i.DatabaseCoreFieldRefName.Id,i.DatabaseCoreFieldRefName.Title,i.DatabaseCoreFieldRefName.AssignedTo,n,i.DatabaseCoreFieldRefName.Tags]:[i.DatabaseCoreFieldRefName.Id,i.DatabaseCoreFieldRefName.Title,i.DatabaseCoreFieldRefName.AssignedTo,i.DatabaseCoreFieldRefName.Tags]}function tt(n,t){var i=b(t);return o.contains(i,n,h.ignoreCaseComparer)}function it(n,t){var i;return Math.abs(n.outerHeight()-t.outerHeight())>2?(n.children(".multi-line-ellipsis").length===0&&(i=$("<div>...<\/div>"),i.addClass("multi-line-ellipsis"),n.append(i)),e.RichContentTooltip.add(t.text(),t)):n.children(".multi-line-ellipsis").length!==0?(n.children(".multi-line-ellipsis").remove(),null):void 0}function rt(n,t,i,r,f){n.forEach(function(n){var e,s=n[u.CardSettings.FIELD_IDENTIFIER],o;s&&(e=f(s));e?(o=nt(e,t,i,r),o&&(n.isEditable=o.toString())):n.isEditable=r.toString()})}function ut(n,t){return k(n,t,u.CardFieldDisplayType.ADDITIONAL)}function ft(n,t){return k(n,t,u.CardFieldDisplayType.CORE)}function et(n,t,i){var f=u.CardFieldDisplayFormats.AssignedToFieldFormats,e=t!==f.FullName,r;return r=a.IdentityViewControl.getIdentityViewElement(n,{showImage:e,size:i}),t===f.AvatarOnly&&r.find("span").addClass("avatar-only"),r.find("span").addClass("ellipsis"),r.html()}function k(n,t,i){var r=!1,u=d(n,t);return u!==null&&u!==i&&(r=!0),r}function d(n,t){var i=null;return h.ignoreCaseComparer(n[u.CardSettings.FIELD_IDENTIFIER],"")!==0&&(i=n&&n[u.CardSettings.FIELD_DISPLAY_TYPE]?u.CardFieldDisplayType[n[u.CardSettings.FIELD_DISPLAY_TYPE].toUpperCase()]:o.contains(t,n[u.CardSettings.FIELD_IDENTIFIER],h.ignoreCaseComparer)?u.CardFieldDisplayType.CORE:u.CardFieldDisplayType.ADDITIONAL),i}function ot(n,t){$.map(n,function(n){var i=new u.WitCardFieldDefinition(n.ReferenceName,n.Name,n.Type,n.IsEditable,n.IsIdentity);t[n.ReferenceName.toUpperCase()]=i})}function st(n,t){var i={};return n.forEach(function(n){var r=n[u.CardSettings.FIELD_IDENTIFIER].toUpperCase(),f=t(r);i[r]=f}),i}function ht(n,t){var i=null,r,u,f;return n instanceof Date?i=n:typeof n=="number"?i=new Date(n):typeof n=="string"&&(r=n,r=$.trim(r),h.startsWith(r,p.WiqlOperators.MacroToday,h.ignoreCaseComparer)?(r=r.replace(/\s/g,""),r=r.substr(p.WiqlOperators.MacroToday.length),r===""?i=new Date:(u=r.match(/([+-])(\d+)/),u&&(f=parseInt(u[2]),u[1]==="-"&&(f*=-1),i=new Date,i=s.addDays(i,f,!0))),i&&(i=s.convertClientTimeToUserTimeZone(i,!0))):i=t?s.parseDateString(n,undefined,!0):new Date(r)),i}function ct(n){if(!n)return!1;var t=w.BacklogConfigurationService.getBacklogFieldName(w.BacklogFieldTypes.Order);if(h.ignoreCaseComparer(t,n)===0)return!0;switch(n.toLowerCase()){case v.CoreFieldRefNames.AreaId.toLowerCase():case v.CoreFieldRefNames.IterationId.toLowerCase():case v.CoreFieldRefNames.Rev.toLowerCase():case v.CoreFieldRefNames.RevisedDate.toLowerCase():case v.CoreFieldRefNames.NodeName.toLowerCase():case v.CoreFieldRefNames.TeamProject.toLowerCase():case v.CoreFieldRefNames.Watermark.toLowerCase():case v.CoreFieldRefNames.ExternalLinkCount.toLowerCase():case v.CoreFieldRefNames.HyperLinkCount.toLowerCase():case v.CoreFieldRefNames.RelatedLinkCount.toLowerCase():case v.CoreFieldRefNames.RemoteLinkCount.toLowerCase():case v.CoreFieldRefNames.AttachedFileCount.toLowerCase():case v.CoreFieldRefNames.AuthorizedAs.toLowerCase():case v.CoreFieldRefNames.AuthorizedDate.toLowerCase():return!0;default:return!1}}function lt(n,t){var i=t;if(n)switch(n.toLowerCase()){case"true":i=!0;break;case"false":i=!1}return i}function at(n,t,i,r){return!r&&g(n,t,i)?!1:!0}function g(n,t,r){return n<0&&h.ignoreCaseComparer(t,i.DatabaseCoreFieldRefName.Title)===0&&r&&r.keyCode===c.KeyCode.ENTER}function nt(n,t,r,u){var f=u,e;return f&&(e=n.referenceName(),(h.ignoreCaseComparer(r,e)===0||h.ignoreCaseComparer(i.DatabaseCoreFieldRefName.ChangedBy,e)===0)&&(f=!1),f&&(f=n.isEditable()&&yt(n.type()))),f}function vt(n,t,i){return{identityType:{User:!0,Group:!0},operationScope:{Source:!0,IMS:!0},item:n&&(n.uniqueName||n.displayName)||f.EntityFactory.createStringEntity(y.AssignedToEmptyText,l.urlHelper.getVersionedContentUrl("notassigned-user.svg")),size:t||f.IdentityPickerControlSize.Small,displayType:i||f.EDisplayControlType.AvatarText,friendlyDisplayName:n&&n.displayName||y.AssignedToEmptyText,turnOffHover:!0,consumerId:r.IdentityControlConsumerIds.CardFieldDisplayControl}}function yt(n){var t=!1;switch(n){case u.CardFieldType.Boolean:case u.CardFieldType.Double:case u.CardFieldType.Guid:case u.CardFieldType.Identity:case u.CardFieldType.Integer:case u.CardFieldType.PlainText:case u.CardFieldType.String:case u.CardFieldType.DateTime:case u.CardFieldType.TreePath:t=!0;break;case u.CardFieldType.Html:t=!1}return t}Object.defineProperty(t,"__esModule",{value:!0});t.setupCommonIdentityDisplayControlOptions=t.isFieldEditable=t.shouldCreateNewCardAfterEdit=t.shouldFocusOnCardAfterEdit=t.getBoolShowEmptyFieldsFromString=t.isFieldBlackListed=t.buildDate=t.constructFieldDefinitionMap=t.initializeFieldDefinitions=t.getFieldDisplayType=t.buildIdentityViewHtml=t.shouldRenderAsAdditionalField=t.shouldRenderAsCoreField=t.populateFieldSettings=t.applyEllipsis=t.isCoreField=t.getCoreFieldNames=void 0;t.getCoreFieldNames=b;t.isCoreField=tt;t.applyEllipsis=it;t.populateFieldSettings=rt;t.shouldRenderAsCoreField=ut;t.shouldRenderAsAdditionalField=ft;t.buildIdentityViewHtml=et;t.getFieldDisplayType=d;t.initializeFieldDefinitions=ot;t.constructFieldDefinitionMap=st;t.buildDate=ht;t.isFieldBlackListed=ct;t.getBoolShowEmptyFieldsFromString=lt;t.shouldFocusOnCardAfterEdit=at;t.shouldCreateNewCardAfterEdit=g;t.isFieldEditable=nt;t.setupCommonIdentityDisplayControlOptions=vt});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("Agile/Scripts/TFS.Agile.Boards",["require","exports","Agile/Scripts/BoardAnnotationsIdentifier","Agile/Scripts/Common/BoardParentDataProvider","Agile/Scripts/Common/EmbeddedHelper","Agile/Scripts/Generated/HubConstants","Agile/Scripts/Sources/AgileDataSource","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","VSS/Context","VSS/Contributions/Services","VSS/Error","WorkItemTracking/Scripts/Controls/Links/LinkMapper","WorkItemTracking/Scripts/Filtering/AreaPathFilterProvider","WorkItemTracking/Scripts/Filtering/AssignedToFilterProvider","WorkItemTracking/Scripts/Filtering/FieldFilterProvider","WorkItemTracking/Scripts/Filtering/FilterManager","WorkItemTracking/Scripts/Filtering/IterationPathFilterProvider","WorkItemTracking/Scripts/Filtering/TagsFilterProvider","WorkItemTracking/Scripts/Filtering/TextFilterProvider","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Utils/PageWorkItemHelper","WorkItemTracking/Scripts/Utils/TelemetryUtils","VSS/Controls/Notifications","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/Utils/Array","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Agile/Scripts/Resources/TFS.Resources.AgileControls","Agile/Scripts/Resources/TFS.Resources.Agile","Agile/Scripts/Resources/TFS.Resources.AgileTaskboard","VSS/Diag","VSS/Service","VSS/Events/Action","VSS/Events/Document","VSS/Events/Handlers","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/TFS.WorkItemTracking","Agile/Scripts/Common/Agile","Agile/Scripts/Common/WorkItemChanges","Agile/Scripts/Common/Utils","Presentation/Scripts/TFS/TFS.Core.Utils","Agile/Scripts/Card/Cards","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.WebSettingsService","Presentation/Scripts/TFS/TFS.UI.Controls.Common","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","TFS/WorkItemTracking/RestClient","VSS/Performance","VSS/Telemetry/Services","q","TFS/Work/RestClient","Agile/Scripts/Board/BoardsAutoRefreshCommon","Agile/Scripts/Card/CardUtils","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/FeatureAvailability/Services","Agile/Scripts/Common/CustomerIntelligence","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Agile/Scripts/BoardAnnotationsIdentifier","VSS/LoaderPlugins/Css!Agile"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki){var tr,vr,sr,gi,dr,di,hr,yr,pr,gr,iu,ir,nu,cr,tu,fr,ur,nr,wr,br,lr,ar,kr;Object.defineProperty(t,"__esModule",{value:!0});t.BoardMemberFilterDataSource=t.BoardSettingsManager=t.BoardValidator=t.BoardRowValidator=t.BoardColumnValidator=t.KanbanTelemetry=t.Board=t.BoardNode=t.BoardNodeLayoutStyle=t.BoardMember=t.BoardFieldType=t.BoardColumnType=t.ColumnType=t.BoardAnnotationSettingsProvider=t.WorkItemSource=t.WitBoardCardField=t.WorkItemItemAdapter=t.ItemSource=t.AnnotationItemSource=t.Item=t.FunctionCollection=t.BoardMembershipEvaluator=t.Notifications=t.BoardAnnotationsIdentifier=t.maxBacklogOrderValue=t.unparentedId=t.parentItemFieldRefName=t.annotationItemSourceTypeFactory=void 0;var er=rt.delegate,rr=wt.TfsContext.getDefault(),or=gt.DatabaseCoreFieldRefName;t.parentItemFieldRefName="System.ParentItem";t.unparentedId=-1;t.maxBacklogOrderValue=Math.pow(2,32);Object.defineProperty(t,"BoardAnnotationsIdentifier",{enumerable:!0,get:function(){return ki.BoardAnnotationsIdentifier}}),function(n){n.BoardMemberAdded="VSS.Agile.Boards.BoardMemberAdded";n.BoardItemAdded="VSS.Agile.Boards.BoardItemAdded";n.BoardItemUpdated="VSS.Agile.Boards.BoardItemUpdated";n.BoardItemRemoved="VSS.Agile.Boards.BoardItemRemoved";n.BoardItemNeedsUpdate="VSS.Agile.Boards.BoardItemNeedsUpdate";n.BoardItemSourceChanged="VSS.Agile.Boards.BoardItemSourceChanged";n.BoardItemsUpdated="VSS.Agile.Boards.BoardItemsUpdated";n.BoardModelUpdated="VSS.Agile.Boards.BoardModelUpdated";n.BoardUpdated="VSS.Agile.Boards.BoardUpdated";n.BoardMemberItemCountChanged="VSS.Agile.Boards.BoardMemberItemCountChanged";n.BoardTileMoveLock="VSS.Agile.Boards.BoardTileMoveLock";n.BoardTileMoveUnlock="VSS.Agile.Boards.BoardTileMoveUnlock";n.BoardTileMoved="VSS.Agile.Boards.BoardTileMoved";n.BoardNewItemEdited="VSS.Agile.Boards.BoardNewItemEdited";n.BoardAddNewIncomingItem="VSS.Agile.Boards.BoardAddNewIncomingItem";n.BoardItemFilteringComplete="VSS.Agile.Boards.BoardItemFilteringComplete";n.BoardRedraw="VSS.Agile.Boards.Redraw";n.BoardHeightChanged="VSS.Agile.Boards.BoardHeightChanged";n.BoardContainerResized="VSS.Agile.Boards.BoardContainerResized";n.BoardExpandMember="VSS.Agile.Boards.ExpandMemeber";n.BoardLayoutUpdated="VSS.Agile.Boards.LayoutUpdated";n.BoardCriteriaFilterChanged="TFS.Agile.Boards.BoardFilterChanged";n.BoardMessageDisplay="VSS.Agile.Boards.BoardMessageDisplay";n.ToggleBoardsHubFilterON="TFS.Agile.BoardsHub.ToggleFilterON"}(tr=t.Notifications||(t.Notifications={}));vr=function(n){function t(t){var i=n.call(this,kt.BacklogContext.getInstance().team.id)||this;return t&&i._beginGetSettings(t),i}return __extends(t,n),t.prototype._isIterationValid=function(t){var i=t.fieldValue(or.IterationPath);return n.prototype._isBacklogIterationPathValid.call(this,i)},t.prototype._isWorkItemTypeValid=function(n){var t=kt.BacklogContext.getInstance();return t.backlogContainsWorkItemType(n.fieldValue(or.WorkItemType))},t.prototype._isValid=function(n){var i=this._teamSettings.teamFieldName,r=n.fieldValue(i),t=this._isWorkItemTypeValid(n);return t&&!n.isNew()&&(t=this._isTeamFieldValid(r)&&this._isIterationValid(n)),t},t}(kt.BaseBacklogMembershipEvaluator);t.BoardMembershipEvaluator=vr;sr=function(){function n(){}return n.compareValues=function(n,t,i){switch(typeof n){case"string":return i?ut.localeIgnoreCaseComparer(n,t):ut.localeComparer(n,t);case"number":return n-t;case"boolean":return n===t?0:n?1:0;case"object":return n instanceof Date?ft.defaultComparer(n,t):$.isFunction(n.compare)?n.compare(t):0;default:return 0}},n.typeChecked=function(n){return function(t,i,r){var f=typeof t,u=typeof i;return t===null||f==="undefined"?i===null||u==="undefined"?0:-1:i===null||u==="undefined"?1:f!==u?0:n(t,i,r)}},n.proposedInProgressItemComparer=function(n,i,r){var h=n.itemSource,c=n.fields.orderField,f=h.getAncestors(i.id()),e=h.getAncestors(r.id()),l,a,o,s,u,v;if((i.getTempId()<0||r.getTempId()<0)&&!(i.fieldValue(c)&&r.fieldValue(c)))return i.getTempId()-r.getTempId();for(v=Math.max(f.length,e.length),u=0;u<v;u++){if(f[u]===null||f[u]===undefined)return-1;if(e[u]===null||e[u]===undefined)return 1;if(f[u]!==e[u])return l=h.getCachedItem(f[u]),a=h.getCachedItem(e[u]),o=l.fieldValue(c),(o===null||o===undefined)&&(o=t.maxBacklogOrderValue),s=a.fieldValue(c),(s===null||s===undefined)&&(s=t.maxBacklogOrderValue),o-s||l.id()-a.id()}},n.completedItemComparer=function(n,t,i){var u=n.fields.closedDateField,f=t.fieldValue(u),r=i.fieldValue(u);return f?r?r-f||t.id()-i.id():1:r?-1:t.id()-i.id()},n.orderItemsByFields=function(t,i,r){for(var h,c,e,o=0,l=n.typeChecked(n.compareValues),f=t.fields,u=0,s=f.length;!o&&u<s;u+=1)e=f[u].fieldName,h=i.fieldValue(e),c=r.fieldValue(e),o=l(h,c,f[u].caseInsensitive)*(f[u].order===n.SORT_ASCENDING?1:-1);return o},n.checklistComparer=function(n,t,i){var r=t.fieldValue(n.orderFieldName),u=i.fieldValue(n.orderFieldName);return r&&u?r-u:r?-1:u?1:t.id()-i.id()},n.getFunction=function(n){var i=n.id,r=n.data,t,u;return i=i.charAt(0).toLowerCase()+i.slice(1),t=this[i],r&&(u=t.initialize,t=rt.curry(t,r),t.initialize=u),t},n.SORT_ASCENDING=0,n.teamMembership=function(){var n,t;return t=function(t,i){n.evaluate(t,i)},t.initialize=function(t){n=new vr(t)},t}(),n}();t.FunctionCollection=sr;gi=function(){function n(){this._operations=[]}return n.prototype.id=function(){return 0},n.prototype.isReadOnly=function(){return!1},n.prototype.getTempId=function(){return 0},n.prototype.getParentId=function(){return this._parentId},n.prototype.setParentId=function(n){this._parentId=n},n.prototype.type=function(){return null},n.prototype.setPendingAutoRefreshEvent=function(){},n.prototype.getPendingAutoRefreshEvent=function(){return null},n.prototype.skipPlacement=function(){return!1},n.prototype.fieldValue=function(){},n.prototype.fieldValues=function(){},n.prototype.field=function(){return null},n.prototype.children=function(){return[]},n.prototype.discardChildItem=function(){return null},n.prototype.beginAddNewChild=function(){return null},n.prototype.beginGetChildren=function(){return null},n.prototype.beginRefresh=function(){return null},n.prototype.beginSave=function(){},n.prototype.isValidValue=function(){},n.prototype.isNew=function(){return!1},n.prototype.message=function(){return""},n.prototype.operation=function(){return this._operations.length?this._operations[0]:null},n.prototype.reset=function(){},n.prototype.discard=function(){},n.prototype.dispose=function(){var n,t;if(this._operations)for(n=yt.getRunningDocumentsTable();this._operations.length>0;)t=this._operations[0],this.removeOperation(n,t.running,0)},n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype.postRemoveCleanup=function(){},n.prototype._fireEvent=function(n,t,i){if(this._events){var r;if(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r)return!1}},n.prototype.attachEvent=function(n,t){this._events||(this._events=new pt.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n.prototype._startOperation=function(t,i,r){var f=this,e,o=yt.getRunningDocumentsTable(),u={type:t,message:i,complete:function(){var t=et.indexOf(f._operations,u);t!==-1&&(f.removeOperation(o,e,t),f._fireEvent(n.EVENT_OPERATION_COMPLETE,f,u),$.isFunction(r)&&r(u))},abort:function(){var n=et.indexOf(f._operations,u);n!==-1&&f.removeOperation(o,e,n)}};return this._operations.push(u),this._fireEvent(n.EVENT_OPERATION_STARTING,this,u),e=o.add("WorkItemItemAdapter",{isDirty:function(){return!0}}),u.running=e,u},n.prototype.removeOperation=function(n,t,i){n.remove(t);this._operations.splice(i,1)},n.EVENT_ITEM_CHANGED="item-changed",n.EVENT_OPERATION_STARTING="item-operation-starting",n.EVENT_OPERATION_COMPLETE="item-operation-complete",n}();t.Item=gi;dr=function(){function n(n){this.parentSource=n}return n.prototype.updateItem=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},n}();t.AnnotationItemSource=dr;di=function(){function n(n,t,i){var e=this,r,u,f;for(this._teamId=t,this._annotationItemSources={},i&&i.forEach(function(n){e._annotationItemSources[n.type()]=n}),this._configuration=n,r=0,u=Object.keys(n.transitions);r<u.length;r++)f=u[r],n.transitions[gt.WorkItemUtils.getKeyFromWorkItemTypeName(f)]=n.transitions[f]}return n.getItemSourceInitializationFuntion=function(t){return!n._itemSourceModuleMap[t],n._itemSourceModuleMap[t]},n.registerItemSourceInitializationFunction=function(t,i){n._itemSourceModuleMap[t]=i},n.prototype.registerAnnotationItemSource=function(n,t){this.isDisposed||(this._annotationItemSources[n]=t)},n.prototype.unregisterAnnotationItemSource=function(n){!this.isDisposed&&this._annotationItemSources.hasOwnProperty(n)&&(this._annotationItemSources[n].dispose(),this._annotationItemSources[n]=null)},n.prototype.getRegisteredAnnotationItemSource=function(n){return this._annotationItemSources&&this._annotationItemSources.hasOwnProperty(n)?this._annotationItemSources[n]:null},n.prototype.updateAnnotationItemSourcesData=function(n){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(i){switch(i.label){case 0:return[4,this._invokeAnnotationItemSource(function(i){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,i.updateItem(n)];case 1:return t.sent(),[2]}})})})];case 1:return i.sent(),[2]}})})},n.prototype.retrieveAnnotationItemSourceData=function(n,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this._invokeAnnotationItemSource(function(i){return i.beginGetItems(n,t)})];case 1:return i.sent(),[2]}})})},n.prototype._invokeAnnotationItemSource=function(i){return __awaiter(this,void 0,void 0,function(){var e,r,u,o,f,s,h=this;return __generator(this,function(c){switch(c.label){case 0:e=function(u){var f;return __generator(this,function(e){switch(e.label){case 0:return(r._annotationItemSources.hasOwnProperty(u)&&r._annotationItemSources[u])?[4,i(r._annotationItemSources[u])]:[3,2];case 1:return e.sent(),[3,3];case 2:f=n.getItemSourceInitializationFuntion(u);$.isFunction(f)&&f(function(){return __awaiter(h,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return!this.isDisposed?(this._annotationItemSources[u]=t.annotationItemSourceTypeFactory.createInstance(u,[this,this._teamId]),[4,i(this._annotationItemSources[u])]):[3,2];case 1:n.sent();n.label=2;case 2:return[2]}})})});e.label=3;case 3:return[2]}})};r=this;u=[];for(o in this._annotationItemSources)u.push(o);f=0;c.label=1;case 1:return(f<u.length)?(s=u[f],[5,e(s)]):[3,4];case 2:c.sent();c.label=3;case 3:return f++,[3,1];case 4:return[2]}})})},n.prototype.dispose=function(){for(var n in this._annotationItemSources)this._annotationItemSources.hasOwnProperty(n)&&this._annotationItemSources[n]&&this._annotationItemSources[n].dispose();this._annotationItemSources=null;this._disposed=!0},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!1,configurable:!0}),n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype._fireEvent=function(n,t,i){if(this._events){var r;if(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r)return!1}},n.prototype.attachEvent=function(n,t){this._events||(this._events=new pt.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n.Events={ItemChange:"item-change"},n.ChangeTypes=$.extend({MessageChange:"message-change",ChecklistChanged:"checklist-changed",AnnotationItemSourceChanged:"annotation-item-source-changed"},d.WorkItemChangeType),n._itemSourceModuleMap={},n}();t.ItemSource=di;t.annotationItemSourceTypeFactory=new ni.TypeFactory;hr=function(n){function i(t,i,r,u,f){var e=__construct(this,n,[]);for(var o in e)e.hasOwnProperty(o)&&(this[o]=e[o]);return e._mostRecentAutoRefreshEvent=null,e._workItemSource=t,e._id=i,e._fieldMap={},e._reorderManager=r,e._wiManager=g.WorkItemManager.get(ii.ProjectCollection.getDefaultConnection().getService(bt.WorkItemStore)),e._workItemData=f,u?e._setWorkItem(u):e._trySetWorkItem(),e._skipPlacement=!1,e}return __extends(i,n),i.prototype.id=function(){return this._workItem?this._workItem.getUniqueId():this._id},i.prototype.isReadOnly=function(){return this._workItem?this._workItem.isReadOnly():!1},i.prototype.type=function(){return this.fieldValue(or.WorkItemType)},i.prototype.getAnnotationItemSource=function(n){return this._workItemSource.getRegisteredAnnotationItemSource(n)},i.prototype.getOrder=function(){return this._order?this._order:0},i.prototype.setOrder=function(n){this._order=n},i.prototype.getTempId=function(){return this._workItem?this._workItem.tempId:0},i.prototype.setPendingAutoRefreshEvent=function(n){this._mostRecentAutoRefreshEvent=n},i.prototype.getPendingAutoRefreshEvent=function(){return this._mostRecentAutoRefreshEvent},i.prototype.fieldValue=function(n,i,r,u){var f,o,e;if(n===t.parentItemFieldRefName)return this._workItemSource.getParentId(this.id());if(i===undefined&&(o=this._getOrderFieldReferenceName(),ut.ignoreCaseComparer(n,o)===0&&this._order!==undefined&&this._order!==null))return this._order;if(this._workItem)return(i!==undefined&&(this._workItem.setFieldValue(n,i,u),r&&this._raiseItemChanged({change:di.ChangeTypes.Refresh})),e=this._workItem.getField(n),e&&(f=e.getValue()),f!==null&&f!==undefined&&!(f instanceof Date))?f.valueOf():f;if(typeof i!="undefined")this._pendingChanges||(this._pendingChanges={}),this._pendingChanges[n]=i,this._raiseItemChanged({change:di.ChangeTypes.FieldChange}),r&&this._raiseItemChanged({change:di.ChangeTypes.Refresh});else return this._pendingChanges&&this._pendingChanges.hasOwnProperty(n)?this._pendingChanges[n]:this._workItemData?this._workItemData.fields?this._workItemData.fields[n]:null:this._workItemSource.getPayloadFieldValue(this._id,n)},i.prototype.isWorkItemPaged=function(){return this._workItemSource.isWorkItemPaged(this._id)},i.prototype.fieldValues=function(n){for(var i,t=0;t<n.length;t++)i=n[t],this.fieldValue(i.fieldName,i.fieldValue)},i.prototype.children=function(){return this._workItemSource.getChildren(this._id)},i.prototype.beginAddNewChild=function(n,t){return this._workItemSource.beginCreateNewChildItem(n,this.id(),t)},i.prototype.discardChildItem=function(n){return this._workItemSource.discardChildItem(this.id(),n)},i.prototype.beginGetChildren=function(){var t=this,n=hi.defer();return this._workItemSource.beginGetChildren([this._id]).then(function(i){n.resolve(i[t._id])},function(){n.reject("no child data available")}),n.promise},i.prototype.beginRefresh=function(){var t=this,n=hi.defer();return this._wiManager.beginGetWorkItem(this._id,function(i){t._setWorkItem(i);n.resolve(t)},function(t){n.reject(t)},!1,null,!0),n.promise},i.prototype.beginSave=function(n,t){var i=this;var f,r=this,u=function(n){return function(){$.isFunction(n)&&n.apply(r,arguments);f.complete()}},e=function(n){return function(){r._workItemSource.fireSaveCompleted(r);u(n).call(r,arguments)}};f=this._startOperation(ct.Taskboard_SavingTile,ct.Taskboard_SavingTile);this.beginRefresh().then(function(r){var f=i.id();i.id()<=0?r._workItem.beginSave(function(t){i.pinAndUnblockReorderOperation(t.workItems[0],f);e(n).call(i,t)},function(n){u(t).call(i,n);n&&i.message(n.message)}):r._workItem.beginSave(e(n),u(t),"KanbanBoard")},function(n){u(function(n){this._reorderManager.dequeueReorder([r.id()]);r.message(n.message);$.isFunction(t)&&t.apply(r,arguments)}).call(i,n)})},i.prototype.skipPlacement=function(n){return typeof n!="undefined"&&(this._skipPlacement=n),this._skipPlacement},i.prototype.source=function(){return this._workItemSource},i.prototype.field=function(n){var t=this._fieldMap[n],i;return t||(i=this._getCardSetting().getField(n),t=new yr(this,this._workItemSource.getFieldDefinition(n),i),this._fieldMap[n]=t),t},i.prototype.beginReorder=function(n,t,i,r){var u=this,e;this.isNew()&&(e=this._workItemSource.getAncestors(n.NextId),n.NextId=e[0]);var o=Date.now(),s=this._startOperation(ct.Taskboard_SavingTile,ct.Taskboard_SavingTile),f={ParentId:n.ParentId,Ids:[this.id()],PreviousId:n.PreviousId,NextId:n.NextId,completedCallback:function(n,f){var e,h,c;f.success?(u.message(null),u._onReorderComplete(f),e=Date.now(),h=e-o,$.isFunction(t)&&t.call(u,h)):f.error&&(r||(u.message(f.error.message),f.error.serverError.typeKey==="SameTypeHierarchyException"&&(c=$("<a>").attr("href","https://aka.ms/AA56xmh").attr("target","_blank").text(ht.FWLink_LearnMore),$(".message-header").append(c))),$.isFunction(i)&&i.call(u));s.complete()},continueOnFailure:r};lt.logVerbose(ut.format("beginReorder {0},{1},{2},{3}",f.ParentId,f.Ids,f.PreviousId,f.NextId));this._reorderManager.queueReorder(f)},i.prototype.isValidValue=function(n,t,i){var u,r,f=this.fieldValue(or.WorkItemType);return(u=this._workItemSource.getValidStateTransitions(f),$.each(u,function(n,i){if(ut.localeIgnoreCaseComparer(t,n)===0)return r=i,!1}),r)?et.contains(r,i):!1},i.prototype.isNew=function(){return this.id()<0?!0:!1},i.prototype.isValid=function(){return this._workItem?this._workItem.isValid():!1},i.prototype.isWorkItemAttached=function(){return this._workItem?!0:!1},i.prototype.message=function(n,t){return typeof n!="undefined"&&this._setMessage(n,t),this._getMessage()},i.prototype.messageClick=function(){return this._messageClick},i.prototype.reset=function(n){var t=n?this.message():null;this._workItem?this._workItem.reset():(this._pendingChanges&&delete this._pendingChanges,this._workItemSource.fireResetEvent(this));this.message(t)},i.prototype.discard=function(){this._workItem&&this._workItem.discardIfNew()},i.prototype.unpinIfOpened=function(n,t){var i=this;this._workItem&&(this.isWorkItemPaged()?(this._wiManager.unpin(this._workItem),this._trySetWorkItem()):this._workItem.extensions&&this._workItem.extensions.length>0&&(this._workItem.getField(n)._reset(),this._workItem.beginResetExtension(t,function(){return i._wiManager.setWorkItem(i._workItem)})))},i.prototype.dispose=function(){n.prototype.dispose.call(this);this._reorderManager.dequeueReorder([this.id(),this.getTempId()]);this._detachWorkItemEvents();this._onTrySetWorkItem&&(this._wiManager.detachWorkItemChanged(this._onTrySetWorkItem),this._onTrySetWorkItem=null);this._workItem&&this._wiManager.unpin(this._workItem);this._fieldMap=null},i.prototype.pinAndUnblockReorderOperation=function(n,t){this._wiManager.pin(n);this._reorderManager.changeReorderId(t,n.id);this._reorderManager.unblockReadyOperations()},i.prototype.postRemoveCleanup=function(){var n=this.getParentId();n&&(this._workItemSource.disassociate(n,this._id),this._raiseChecklistChanged(n))},i.prototype._getCardSetting=function(){return this._cardSetting||(this._cardSetting=this._workItemSource.boardCardsSetting().getCardSettingsForItemType(this.type())),this._cardSetting},i.prototype._onReorderComplete=function(n){var t=this;n.success&&$.each(n.updatedWorkItemIds,function(i,r){var u=t._workItemSource.getCachedItem(r);u&&u.setOrder(n.updatedWorkItemOrders[i])})},i.prototype._getOrderFieldReferenceName=function(){return this._workItemSource.getProcessFieldTypeReferenceName(o.BacklogFieldTypes.Order)},i.prototype.getEffortFieldRefName=function(){return this._workItemSource.getProcessFieldTypeReferenceName(o.BacklogFieldTypes.Effort)},i.prototype._trySetWorkItem=function(){var n=this;this._workItem=this._wiManager.getWorkItem(this._id);this._workItem?this._setWorkItem(this._workItem):(this._onTrySetWorkItem=function(t,i){i.workItem.id===n._id&&(n._wiManager.detachWorkItemChanged(n._onTrySetWorkItem),n._setWorkItem(i.workItem),n._onTrySetWorkItem=null)},this._wiManager.attachWorkItemChanged(this._onTrySetWorkItem))},i.prototype._getMessage=function(){var n;return this._workItem?(n=this._workItem.getError(),n&&n.message):this._message},i.prototype._setMessage=function(n,t){this._workItem?n?this._workItem.setError(new Error(n)):this._workItem.clearError():(this._message=n,this._raiseItemChanged({change:di.ChangeTypes.MessageChange}));this._messageClick=t},i.prototype._raiseItemChanged=function(n){this._fireEvent(gi.EVENT_ITEM_CHANGED,this,__assign({item:this},n))},i.prototype._setWorkItem=function(n){this._workItem=n;n.extensions.length===0&&n.store.beginGetWorkItemTypeExtensions(n.extensionIds,function(t){n.setExtensions(t)});this._wiManager.pin(n);this._pendingChanges&&($.each(this._pendingChanges,function(t,i){n.setFieldValue(t,i)}),delete this._pendingChanges);this._detachWorkItemEvents();this._attachWorkItemEvents()},i.prototype._attachWorkItemEvents=function(){this._onWorkItemChangedDelegate=er(this,this._onWorkItemChanged);this._workItem.attachWorkItemChanged(this._onWorkItemChangedDelegate)},i.prototype._detachWorkItemEvents=function(){this._workItem&&(this._workItem.detachWorkItemChanged(this._onWorkItemChangedDelegate),this._onWorkItemChangedDelegate=null)},i.prototype._onWorkItemChanged=function(n,t){var i,r;switch(t.change){case di.ChangeTypes.Opened:case di.ChangeTypes.Reset:case di.ChangeTypes.Refresh:this._message=null;this.handleRefresh(t);break;case di.ChangeTypes.FieldChange:case di.ChangeTypes.ErrorChanged:this._raiseItemChanged(t);break;case di.ChangeTypes.Saved:this._workItemSource.updatePayloadData(this._workItem);i={workItem:this._workItem,links:t.changedWorkItemLinks,externalLinkChanged:t.externalLinkChanged};this._workItemSource.retrieveAnnotationItemSourceData([this._workItem.id],i);r=t.changedWorkItemLinks;this._handleLinkChanges(r)||this._raiseChecklistChanged(this.getParentId());this._raiseItemChanged(t);break;case di.ChangeTypes.SaveCompleted:this._workItemSource.updateParentPayloadData(t);break;case di.ChangeTypes.Discarded:this._reorderManager.dequeueReorder([t.workItem.getUniqueId()])}},i.prototype.handleRefresh=function(n){var t=this;return new Promise(function(i,r){return __awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this._workItemSource.updateAnnotationItemSourcesData(this._workItem)];case 1:return u.sent(),this._raiseItemChanged(n),i(),[3,3];case 2:return t=u.sent(),c.publishErrorToTelemetry(t),r(),[3,3];case 3:return[2]}})})})},i.prototype._handleLinkChanges=function(n){var r=!1,t,u,i;if(n)for(t=0,u=n.length;t<u;t++)i=n[t].targetId,n[t].linkData.LinkType===gt.WorkItemUtils.PARENT_LINKTYPE_ID?(n[t].command==="remove"?this._workItemSource.disassociate(i,this._id):n[t].command==="add"&&this._workItemSource.setChild(i,this._id),this._raiseChecklistChanged(i),r=!0):n[t].linkData.LinkType===gt.WorkItemUtils.CHILD_LINKTYPE_ID&&(n[t].command==="add"?this._workItemSource.beginGetChildren([this._id],!0):n[t].command==="remove"&&this._workItemSource.disassociate(this._id,i),this._raiseChecklistChanged(this._id),r=!0);return r},i.prototype._raiseChecklistChanged=function(n){var t,i;n&&(t=this._workItemSource.getCachedItem(n),t&&(i=yi.FeatureAvailabilityService.isFeatureEnabled(vi.FeatureAvailabilityFlags.WebAccessAgileCardAnnotations),i?t.fire(gi.EVENT_ITEM_CHANGED,t,{item:t,change:di.ChangeTypes.ChecklistChanged,workItemType:this._workItemData?this._workItemData.fields[fi.CoreFieldRefNames.WorkItemType]:this._workItem.workItemType.name}):t.fire(gi.EVENT_ITEM_CHANGED,t,{item:t,change:di.ChangeTypes.ChecklistChanged})))},i.prototype._parseArtifactLinks=function(){var n,t,i;return this._workItem?(n=this._workItem.getLinks(),!n||n.length<=0)?null:(t=new l.LinkMapper(this._workItem.store),i=t.mapLinks(n)||[],i.map(function(n){return n.mappedLink})):null},i.prototype.getArtifactLinks=function(n){this._workItemSource.beginGetItem(this._id,function(t){n(t._parseArtifactLinks()||[])})},i}(gi);t.WorkItemItemAdapter=hr;yr=function(n){function t(t,i,r){var u=n.call(this,t.id(),i,r)||this;return u._card=t,u}return __extends(t,n),t.prototype.value=function(n){return n!==undefined?this._card.fieldValue(this.referenceName(),n):n=this._card.fieldValue(this.referenceName()),n},t.prototype.isEditable=function(){switch(this.referenceName()){case this._card.getEffortFieldRefName():return!0;default:return n.prototype.isEditable.call(this)}},t.prototype.getAllowedValues=function(t){return ut.ignoreCaseComparer(this.referenceName(),this._card.getEffortFieldRefName())?n.prototype.getAllowedValues.call(this,t):["1","2","3","5","8","13"]},t.prototype.hasAllowedValues=function(){return this.definition().type()===ti.CardFieldType.Identity?!0:ut.ignoreCaseComparer(this.referenceName(),this._card.getEffortFieldRefName())?n.prototype.hasAllowedValues.call(this):!0},t}(ti.WitCardField);t.WitBoardCardField=yr;pr=function(n){function u(t,i){var r=n.call(this,t,i.teamId)||this;return r._reorderManager=i,r._initialize(t),r}return __extends(u,n),u.prototype._initialize=function(n){var t=this,r,u,f;n.payload.hierarchy&&(this._parentIds={},$.each(n.payload.hierarchy,function(n,i){t._parentIds[i]=!0}));this._orderedIncomingIds=n.payload.orderedIncomingIds;this._lastIncomingPagedIndex=-1;this._orderedOutgoingIds=n.payload.orderedOutgoingIds;this._lastOutgoingPagedIndex=-1;this._lastFilter="";this._lastFilteredPagedIndex=-1;this._idsForLastFilter=[];this._items=new ni.Dictionary;this._store=ii.ProjectCollection.getDefaultConnection().getService(bt.WorkItemStore);this._witManager=g.WorkItemManager.get(this._store);this._workItemChangedDelegate=er(this,this._workItemChanged);this._witManager.attachWorkItemChanged(this._workItemChangedDelegate);this._pageData={};this._childrenIds={};this._pageColumns={};this._fieldDefMap={};this._processFieldTypeMap={};n.itemTypes&&(u=yi.FeatureAvailabilityService.isFeatureEnabled(vi.FeatureAvailabilityFlags.WebAccessAgileCardAnnotations),r=u?ur.BoardAnnotationSettings.isAnyAnnotationEnabled():ur.BoardAnnotationSettings.isAnnotationApplicable(i.BoardAnnotationsIdentifier.ChecklistAnnotation),this._workItemTypes=n.itemTypes,r&&(f=gt.BacklogLevelUtils.getDescendentBacklogLevelConfigurationForWorkItemType(this._workItemTypes[0]),this._descendentBacklogDefaultWorkItemType=f.defaultWorkItemType),this._store.beginGetProject(wt.TfsContext.getDefault().navigation.projectId,function(n){n.beginGetWorkItemTypes(r?t._workItemTypes.concat(t._descendentBacklogDefaultWorkItemType):t._workItemTypes,function(){});n.nodesCacheManager.beginGetNodes()}),r&&(this._checklistOrderFieldName=o.BacklogConfigurationService.getBacklogFieldName(o.BacklogFieldTypes.Order),this._checklistComparer=sr.getFunction({id:"checklistComparer",data:{orderFieldName:this._checklistOrderFieldName}})));n.fieldDefinitions&&ai.initializeFieldDefinitions(n.fieldDefinitions,this._fieldDefMap)},u.prototype.dispose=function(){this._workItemChangedDelegate&&(this._witManager.detachWorkItemChanged(this._workItemChangedDelegate),this._workItemChangedDelegate=null);this._fieldDefMap=null;n.prototype.dispose.call(this)},u.prototype.type=function(){return u.itemSourceType},u.prototype._getWitHttpClient=function(){return this._witHttpClient||(this._witHttpClient=this._store.tfsConnection.getHttpClient(ei.WorkItemTrackingHttpClient)),this._witHttpClient},u.prototype.boardCardsSetting=function(n){return n!==undefined&&(this._boardCardsSetting=n),this._boardCardsSetting},u.prototype.raiseEventForAnnotationItemSource=function(n,t){var i=this;n.forEach(function(n){var r=i._items.get(n);r.fire(gi.EVENT_ITEM_CHANGED,i,{item:r,change:di.ChangeTypes.AnnotationItemSourceChanged,annotationItemSource:t})})},u.prototype.getProcessFieldTypeReferenceName=function(n){var t=this._processFieldTypeMap[n];return t||(t=o.BacklogConfigurationService.getBacklogFieldName(n),this._processFieldTypeMap[n]=t),t},u.prototype.isParent=function(n){return this._parentIds?this._parentIds.hasOwnProperty(n):!1},u.prototype.getParent=function(n){return this._configuration.payload.hierarchy?this._configuration.payload.hierarchy[n]:null},u.prototype.getCachedItem=function(n){return this._items.get(n)},u.prototype.getCachedItems=function(){return this._items.values()},u.prototype.getAncestors=function(n){var i=this.getParent(n),t;return i?(t=this.getAncestors(i),t.push(n)):t=[n],t},u.prototype.getItemTypes=function(){return this._workItemTypes},u.prototype.getItemCount=function(){return this._items.count()},u.prototype.getFieldDefinition=function(n){var t=this._fieldDefMap[n.toUpperCase()];return t||(t=new ti.WitCardFieldDefinition(n),this._fieldDefMap[n.toUpperCase()]=t),t},u.prototype.getFieldDefinitions=function(){return this._fieldDefMap},u.prototype.getFieldValuesOfAllBoardItems=function(n){for(var i,e,r,u=[],o=this.getItemTypes(),t=0,f=this._items.values();t<f.length;t++)i=f[t],e=i.type(),et.contains(o,e,ut.localeIgnoreCaseComparer)&&(r=i.fieldValue(n),r&&u.push(r));return et.unique(u,ut.localeIgnoreCaseComparer)},u.prototype.beginGetItem=function(n,t,i){var r=this;this._witManager.beginGetWorkItem(n,function(i){r._witManager.pin(i);t(r.createItem(n))},i,!1,null,!0)},u.prototype.beginGetItems=function(n,t){var i=this,r;this._configuration.itemIds?this._witManager.beginGetWorkItems(this._configuration.itemIds,function(t){r=$.map(t,function(n){return i._witManager.pin(n),i.createItem(n)});n(r)},t,{includeExtensionFields:!0}):this._configuration.payload?(this._pageColumns=this._configuration.payload.columns,this.buildCache(this._configuration.payload.rows),r=$.map(this._pageData,function(n,t){var r=+t,u=i.createItem(r);return i.isParent(r)?null:u}),n(r)):n([])},u.prototype.createItem=function(n,t){var i;return i={},this._items.tryGetValue(n,i)||(i.value=new hr(this,n,this._reorderManager,t),this._items.set(n,i.value)),i.value},u.prototype.clearItems=function(){for(var t=this._items.values(),n=0,i=t.length;n<i;n++)t[n].dispose();this._items.clear()},u.prototype.clearItem=function(n){var t={};this._items.tryGetValue(n,t)&&t.value.dispose();this._items.remove(n)},u.prototype._getChildIDsWiql=function(n){if(!n||n.length===0)return"";return ut.format("SELECT [{0}] FROM WorkItemLinks WHERE ([Source].[System.Id] IN ({1})) AND ([System.Links.LinkType] = '{2}') AND ([Target].[System.WorkItemType] = '{3}') mode(MustContain)",fi.CoreFieldRefNames.Id,n.toString(),gt.WorkItemUtils.CHILD_LINK_NAME,this._descendentBacklogDefaultWorkItemType)},u.prototype._getChildIDsWithTypeWiql=function(n,t){if(!n||n.length===0)return"";return ut.format("SELECT [{0}] FROM WorkItemLinks WHERE ([Source].[System.Id] IN ({1})) AND ([System.Links.LinkType] = '{2}') AND ([Target].[System.WorkItemType] IN ({3})) mode(MustContain)",fi.CoreFieldRefNames.Id,n.toString(),gt.WorkItemUtils.CHILD_LINK_NAME,t)},u.prototype._beginGetChildIDs=function(n){var t,i;return(t=hi.defer(),!n||n.length===0)?(t.resolve({}),t.promise):(i=this._getChildIDsWiql(n),this._getWitHttpClient().queryByWiql({query:i},rr.navigation.project).then(function(n){var i={};$.each(n.workItemRelations,function(n,t){if(t.source&&t.target){var r=t.source.id,u=t.target.id;i[r]||(i[r]=[]);i[r].push(u)}});t.resolve(i)}),t.promise)},u.prototype._beginGetChildIDsWithType=function(n,t){var i,r,u;return(i=hi.defer(),!n||n.length===0)?(i.resolve({}),i.promise):(r=$.map(t,function(n){return"'"+n+"'"}),u=this._getChildIDsWithTypeWiql(n,r),this._getWitHttpClient().queryByWiql({query:u},rr.navigation.project).then(function(n){var t={};$.each(n.workItemRelations,function(n,i){if(i.source&&i.target){var r=i.source.id,u=i.target.id;t[r]||(t[r]=[]);t[r].push(u)}});i.resolve(t)}),i.promise)},u.prototype.beginGetParents=function(n,t){var r=this,i=hi.defer();return!this._parentChildMap&&n&&n.length>0?this.beginGetParentChildMap(n,t).then(function(){i.resolve(r._parentChildMap)}):i.resolve(this._parentChildMap),i.promise},u.prototype.setParentChildMap=function(n){n&&(this._parentChildMap=[],n.length>0&&(n[0].id!==t.unparentedId&&this._parentChildMap.push({childWorkItemIds:[t.unparentedId],id:t.unparentedId,title:st.Kanban_Unparented,workItemTypeName:""}),this._parentChildMap=this._parentChildMap.concat(n),this._setChildParentMap(this._parentChildMap)))},u.prototype.getParentId=function(n){return this._childParentMap?this._childParentMap[n]?this._childParentMap[n]:t.unparentedId:null},u.prototype.beginGetParentChildMapInternal=function(n){var t=kt.BacklogContext.getInstance(),i=t.level.id,r={projectId:rr.contextData.project.id,teamId:t.team.id},u=new at.VssConnection(rr.contextData),f=u.getHttpClient(ci.WorkHttpClient);return f.getBoardMappingParentItems(r,i,n)},u.prototype.beginGetParentChildMap=function(n,t){for(var o,r=this,f=u.checklistPageSize,s=n.length,e=[],i=0;i<s;i+=f)o=n.slice(i,i+f),e.push(this.beginGetParentChildMapInternal(o));return hi.all(e).then(function(n){for(var t=0,i=n.length;t<i;t++)r._mergeParentChildMap(n[t]);return r._parentChildMap},function(n){return $.isFunction(t)&&t(n.message,it.MessageAreaType.Error),r._parentChildMap})},u.prototype._mergeParentChildMap=function(n){var u,t,f,i,r;if(!this._parentChildMap){this.setParentChildMap(n);return}for(u={},this._parentChildMap.forEach(function(n,t){u[n.id]=t}),t=0,f=n;t<f.length;t++)i=f[t],r=u[i.id],r!==undefined?this._parentChildMap[r].childWorkItemIds=this._parentChildMap[r].childWorkItemIds.concat(i.childWorkItemIds):this._parentChildMap.push(i);this._setChildParentMap(this._parentChildMap)},u.prototype._setChildParentMap=function(n){var t,r,u,i,f,e;if(n&&n.length>0)for(this._childParentMap={},t=0,r=n;t<r.length;t++)for(u=r[t],i=0,f=u.childWorkItemIds;i<f.length;i++)e=f[i],this._childParentMap[e]=u.id},u.prototype.beginGetChildren=function(n,t){var i=this,e=hi.defer(),s=[],r,u={},f,o=!1,h,c,l;return t?o=!0:n&&n.length&&$.each(n,function(n,t){var r=i._childrenIds[t],h,f,e,s;if(r&&r.length>0){for(h=u[t]=[],f=0;f<r.length;f++)if(e={},i._items.tryGetValue(r[f],e)){if(s=e.value,!s)return o=!0,!1;h.push(s)}}else return o=!0,!1}),o?(u={},c=yi.FeatureAvailabilityService.isFeatureEnabled(vi.FeatureAvailabilityFlags.WebAccessAgileCardAnnotations),c?(l=c?ur.BoardAnnotationSettings.getApplicableAnnotationNames():[],h=this._beginGetChildIDsWithType(n,l)):h=this._beginGetChildIDs(n),h.then(function(t){if($.each(n,function(n,i){r=t[i];r&&r.length&&et.addRange(s,r)}),s.length>0){var o=[fi.CoreFieldRefNames.Id,fi.CoreFieldRefNames.Title,fi.CoreFieldRefNames.State,fi.CoreFieldRefNames.WorkItemType,fi.CoreFieldRefNames.AssignedTo,i._checklistOrderFieldName];i._beginGetChildItems(s,o).then(function(o){var s=oi.getScenarioManager().startScenario(nr.CI_AREA_AGILE,nr.Perf_Scenario_AnnotationsSummaryRendering);$.each(n,function(n,e){if(r=t[e],r&&r.length){u[e]=$.map(r,function(n){return o[n].setParentId(e),o[n]});i._clearChildren(e);i._setChildrenIds(e,u[e]);f=i._items.get(e);var s={},h=yi.FeatureAvailabilityService.isFeatureEnabled(vi.FeatureAvailabilityFlags.WebAccessAgileCardAnnotations);h?$.each(o,function(n,t){var r=t.type(),u=r.toLocaleLowerCase();s[u]||(s[u]=!0,f.fire(gi.EVENT_ITEM_CHANGED,i,{item:f,change:di.ChangeTypes.ChecklistChanged,workItemType:r}))}):f.fire(gi.EVENT_ITEM_CHANGED,i,{item:f,change:di.ChangeTypes.ChecklistChanged})}});s.end();e.resolve(u)})}else e.resolve(u)})):e.resolve(u),e.promise},u.prototype.getChildren=function(n){var r=this,i=[],t=this._childrenIds[n];return t&&t.length&&$.each(t,function(n,t){var u=r._items.get(t);u&&et.add(i,u)}),i},u.prototype.setChild=function(n,t){var f=this,i=this._childrenIds[n],r,u;i?i.indexOf(t)>=0||(i.push(t),r=[],$.each(i,function(n,t){et.add(r,f._items.get(t))}),this._setChildrenIds(n,r)):this._childrenIds[n]=[t];u=this._items.get(t);u.setParentId(n)},u.prototype.sortChildrenIds=function(n){var t=this.getChildren(n);this._setChildrenIds(n,t)},u.prototype._clearChildren=function(n){var i=this,t=this._childrenIds[n];t&&t.length&&$.each(t,function(n,t){i.clearItem(t)});this._childrenIds[n]=[]},u.prototype._setChildrenIds=function(n,t){var r=this,i;this._childrenIds[n]=[];t.sort(this._checklistComparer);t&&t.length&&($.each(t,function(n,t){r._items.set(t.id(),t)}),i=$.map(t,function(n){return n.id()}),this._childrenIds[n]=i)},u.prototype._beginGetChildItems=function(n,t){var u=this,i=hi.defer(),r={};return n&&n.length?nt.PageWorkItemHelper.pageWorkItems(n,null,t).then(function(n){$.each(n,function(n,t){r[t.id]=new hr(u,t.id,u._reorderManager,null,t)});i.resolve(r)}):i.resolve(r),i.promise},u.prototype._getParentOptionFields=function(n){return gt.WorkItemUtils.getParentOptionFields(n)},u.prototype.beginPageItems=function(n,t,i,r,u,f,e,o){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(h){switch(h.label){case 0:return[4,this._updateFilteredIds(n,u)];case 1:return(h.sent(),s=this.getNextPageIds(i,r),!(this._parentChildMap&&s.length>0))?[3,3]:[4,this.beginGetParentChildMap(s,null)];case 2:h.sent();h.label=3;case 3:return[2,this._beginPageItems(n,t,s,f,e,o)]}})})},u.prototype._updateFilteredIds=function(n,t){return __awaiter(this,void 0,void 0,function(){function u(n){if(!n)return"";for(n=n.trim();n.indexOf("'")>0;)n=n.replace("'"," ");return n}var r,i;return __generator(this,function(f){switch(f.label){case 0:return(t=u(t),t===this._lastFilter)?[2,Promise.resolve()]:t?[4,this._getMatchingWorkItemIds(n,t)]:[3,2];case 1:return i=f.sent(),[3,3];case 2:i=[];f.label=3;case 3:return r=i,this._lastFilter=t,this._lastFilteredPagedIndex=-1,this._idsForLastFilter=r,[2]}})})},u.prototype._getMatchingWorkItemIds=function(n,t){return __awaiter(this,void 0,void 0,function(){var i,r,u,f;return __generator(this,function(e){switch(e.label){case 0:return(i=this._items.keys(),i.indexOf(t)>-1)?[2,Promise.resolve([])]:(r=this._getWitHttpClient(),u=this._buildWiqlForTextFilter(t,i),[4,r.queryByWiql({query:u},n)]);case 1:return f=e.sent(),[2,f.workItems.map(function(n){return n.id})]}})})},u.prototype._buildWiqlForTextFilter=function(n,t){function r(n){var t=Math.floor(Number(n));return isFinite(t)?t<=0?!1:String(t)!==n?!1:!0:!1}var i=r(n)?"OR [System.Id] = ".concat(n):"";return"\n            SELECT [System.Id]\n            FROM WorkItems\n            WHERE [System.TeamProject] = @project\n                AND [System.Id] NOT IN (".concat(t.join(","),")\n                AND (\n                    [System.Title] = '").concat(n,"'\n                    ").concat(i,"\n                )")},u.prototype.getNextPageIds=function(n,t){var i,r,u,f,e;return i=this._lastFilteredPagedIndex+1,r=this._idsForLastFilter.slice(i,i+t),this._lastFilteredPagedIndex+=r.length,u=t-r.length,ut.localeIgnoreCaseComparer(n,ir.INCOMING)===0?(i=this._lastIncomingPagedIndex+1,f=this._orderedIncomingIds.slice(i,i+u),this._lastIncomingPagedIndex+=f.length,__spreadArray(__spreadArray([],r,!0),f,!0)):ut.localeIgnoreCaseComparer(n,ir.OUTGOING)===0?(i=this._lastOutgoingPagedIndex+1,e=this._orderedOutgoingIds.slice(i,i+u),this._lastOutgoingPagedIndex+=e.length,__spreadArray(__spreadArray([],r,!0),e,!0)):[]},u.prototype.canPageItems=function(n){var t=!1;return ut.localeIgnoreCaseComparer(n,ir.INCOMING)===0?t=this._orderedIncomingIds.length>0&&this._lastIncomingPagedIndex+1<this._orderedIncomingIds.length:ut.localeIgnoreCaseComparer(n,ir.OUTGOING)===0&&(t=this._orderedOutgoingIds.length>0&&this._lastOutgoingPagedIndex+1<this._orderedOutgoingIds.length),t},u.prototype.getValidStateTransitions=function(n){return this._configuration.transitions[gt.WorkItemUtils.getKeyFromWorkItemTypeName(n)]},u.prototype.updateTransitions=function(n,t){var i=this._configuration.transitions,r=this.getItemTypes();r.forEach(function(r){var f=gt.WorkItemUtils.getKeyFromWorkItemTypeName(r),u=i[f],h=u[n],e,o,s;for(e in u)u.hasOwnProperty(e)&&(o=u[e],s=et.indexOf(o,n),s>-1&&(o[s]=t));i[f][t]=h;delete i[f][n]})},u.prototype.getPayloadFieldValue=function(n,t){var i;return this._pageData[n]?($.each(this._pageColumns,function(n,r){if(r===t)return i=n,!1}),this._pageData[n][i]):null},u.prototype.isWorkItemPaged=function(n){return!!this._pageData[n]},u.prototype.updatePayloadData=function(n){var i,t,r;if(n&&(i=this._pageData[n.id],i))for(t=0,r=this._pageColumns.length;t<r;t++)i[t]=n.getFieldValue(this._pageColumns[t])},u.prototype.updateParentPayloadOnDelete=function(n){var t=this,i=this._getColumnIndex(fi.CoreFieldRefNames.Parent),u;i!==-1&&(u=r.BoardParentDataProvider.getInstance(),u&&u.invalidate(n),Object.keys(this._pageData).forEach(function(r){var u=Number(r),f=Number(t._pageData[u][i]);f===n&&(t._pageData[u][i]=undefined,t._forceRefresh(u))}))},u.prototype.updateParentPayloadData=function(n){var u=this,f=n.changedFields&&(n.changedFields.hasOwnProperty(fi.CoreFieldRefNames.Title)||n.changedFields.hasOwnProperty(fi.CoreFieldRefNames.WorkItemType)||n.changedFields.hasOwnProperty(fi.CoreFieldRefNames.TeamProject)),e=(n.changedWorkItemLinks||[]).some(function(n){return n.linkData.LinkType===gt.WorkItemUtils.CHILD_LINKTYPE_ID}),i,t,r;(f||e)&&(i=this._getColumnIndex(fi.CoreFieldRefNames.Parent),i!==-1)&&(t={},e&&n.changedWorkItemLinks.forEach(function(n){n.linkData.LinkType===gt.WorkItemUtils.CHILD_LINKTYPE_ID&&(n.command==="add"?t[n.targetId]=n.sourceId:n.command==="remove"&&(t[n.targetId]=undefined))}),f&&(r=n.workItem,r.getLinks().forEach(function(n){n.linkData.LinkType===gt.WorkItemUtils.CHILD_LINKTYPE_ID&&(t[n.linkData.ID]=r.id)})),Object.keys(t).forEach(function(n){var r=Number(n),f=u._pageData[r];f&&(f[i]=t[r]);u._forceRefresh(r)}))},u.prototype._forceRefresh=function(n){var t=this._items.get(n);t&&t._fireEvent(gi.EVENT_ITEM_CHANGED,t,{item:t,change:di.ChangeTypes.Refresh})},u.prototype.buildCache=function(n){var t,f,r,u,i;if(n)for(t=0,f=n.length;t<f;t++)r=n[t],u=r[0],this._pageData[u]=r,i=this._witManager.getWorkItem(u),i&&i.isDirty()&&this.updatePageRow(i);this._updatePagingIndices()},u.prototype.updatePageRow=function(n){var f,r,t,e,u,i;if(f=n.getUniqueId(),r=this._pageData[f],r)for(u=this._pageColumns,t=0,e=u.length;t<e;t++)i=n.getField(u[t]),r[t]=i?i.fieldDefinition.id===fi.CoreField.Id?n.getUniqueId():i.getValue():null},u.prototype.fireResetEvent=function(n){this._fireChangeEvent(n,di.ChangeTypes.Reset)},u.prototype.fireDiscardedEvent=function(n){this._fireChangeEvent(n,di.ChangeTypes.Discarded)},u.prototype.fireSaveCompleted=function(n){this._fireChangeEvent(n,di.ChangeTypes.SaveCompleted)},u.prototype.beginCreateNewItem=function(n,t){var r=this,i=hi.defer(),u=function(n){var t={};r._items.tryGetValue(n.getUniqueId(),t);i.resolve(t.value)};return gt.WorkItemUtils.beginGetWorkItemType(t).then(function(t){gt.WorkItemUtils.beginCreateWorkItem(n,t,{parenting:{id:0,fields:null},useDefaultIteration:!0}).then(function(n){u(n)},function(n){i.reject(n)})},function(n){i.reject(n)}),i.promise},u.prototype.beginCreateNewChildItem=function(n,t,i){var r=this,u=hi.defer(),f=function(n){r._childrenIds[t]||(r._childrenIds[t]=[]);r._childrenIds[t].push(n.getUniqueId());u.resolve(r._items.get(n.getUniqueId()))};return this._store.beginGetLinkTypes(function(){gt.WorkItemUtils.beginGetWorkItemType(i).then(function(i){gt.WorkItemUtils.beginCreateWorkItem(n,i,{parenting:{id:t,fields:r._getParentOptionFields(n)},useDefaultIteration:!1}).then(function(n){f(n)},function(n){u.reject(n)})},function(n){u.reject(n)})},function(n){u.reject(n)}),u.promise},u.prototype.discardChildItem=function(n,t){if(this._items&&this._items.get(t))this.clearItem(t);else return!1;return this._removeChild(this._childrenIds[n],t)},u.prototype._removeChild=function(n,t){var i;return n&&n.length>0&&(i=et.indexOf(n,t))>=0?(n.splice(i,1),!0):!1},u.prototype.disassociate=function(n,t){return this._removeChild(this._childrenIds[n],t)},u.prototype._fireChangeEvent=function(n,t){this._fireEvent(di.Events.ItemChange,this,{change:t,id:n.id(),getItem:function(){return n}})},u.prototype._beginPageItems=function(n,t,i,r,u,o){var s,h=this,c=Date.now(),l=kt.BacklogContext.getInstance(),a=(s={},s[f.BoardsHubConstants.HubCategoryReferenceName]=l.level.id,s[f.BoardsHubConstants.WorkItemIds]=i,s),v=function(n){var l=Date.now(),a=l-c,u,t,e,f,s;for(h._publishPagingTelemetry(a,i.length,o),h._updatePagedData(n.payload),u=[],t=0,e=n.payload.rows.length;t<e;t++)f=n.payload.rows[t][0],s=h.createItem(f),h.isParent(f)||u.push(s);r(u)};return e.getDataAsync("ms.vss-work-web.team-board-page-board-work-items-data-provider",a).then(function(n){v(n)},u)},u.prototype._publishPagingTelemetry=function(n,t,i){lt.logVerbose("Number of work items(page size): "+t+" Total Paging Time: "+n);var r=$.extend(i||{},{PageSize:t,PagingDuration:n});nr.publish(nr.KANBAN_PAGINGCOLUMNS,r)},u.prototype._updatePagedData=function(n){for(var i=this,t=0,r=n.rows.length;t<r;t++)this._pageData[n.rows[t][0]]=n.rows[t];n.hierarchy&&$.each(n.hierarchy,function(n,t){i._parentIds[t]=!0;i._configuration.payload.hierarchy[n]=t})},u.prototype._updatePagingIndices=function(){var n=0,t=0;if(this._orderedIncomingIds)for(n=0,t=this._orderedIncomingIds.length;n<t;n++)this._pageData.hasOwnProperty(this._orderedIncomingIds[n])&&this._lastIncomingPagedIndex++;if(this._orderedOutgoingIds)for(n=0,t=this._orderedOutgoingIds.length;n<t;n++)this._pageData.hasOwnProperty(this._orderedOutgoingIds[n])&&this._lastOutgoingPagedIndex++},u.prototype._workItemChanged=function(n,t){var e=this,i,r,u,f;(i=t.workItem.getUniqueId(),r=t.workItem.tempId,this.isParent(i))||(u=function(){return e.createItem(i,t.workItem)},f={},i>0&&this._items.tryGetValue(r,f)&&(this._updateItemID(r,i),i=r,u=function(){return f.value}),t=$.extend({},t,{id:i,getItem:u}),this._fireEvent(di.Events.ItemChange,this,t))},u.prototype._updateItemID=function(n,t){var i,f,r={},u;this._items.tryGetValue(n,r)&&(r.value._id=t,this._items.set(t,r.value),this._items.remove(n));for(u in this._childrenIds)if(this._childrenIds.hasOwnProperty(u)&&(i=this._childrenIds[u],(f=et.indexOf(i,n))>=0)){i.splice(f,1,t);break}},u.prototype._updateWorkItemPayload=function(n,t,i,r){var u=n.get(t.fields[fi.CoreField.Id]);u.updateWorkItemPayload(t,i,r)},u.prototype._shouldRefreshWorkItem=function(n,t,i,r){return parseInt(n.stackRank)===i?!1:r&&n.revision===2?!1:(n.changedChildren||n.changedTypeOrTitle)&&this._getColumnIndex(fi.CoreFieldRefNames.Parent)>=0?!0:n.forceRefresh||!n.wasWorkItemAttached||t<n.revision},u.prototype._beginWorkItemsRefresh=function(n,t,i){var u=this,r;if(n&&(r=n.keys().map(function(n){return parseInt(n,10)}),r&&r.length>0)){var c=ii.ProjectCollection.getDefaultConnection().getService(bt.WorkItemStore),e=[],f=0,o=function(){r.length===e.length+f&&(f===0&&$.isFunction(t)?t.call(u):f>0&&$.isFunction(i)&&i.call(u,e))},s=function(n){e.push(n.id);o()},h=function(){f++;o()};c.beginGetWorkItemData(r,function(t){var f={},e,i,r;if($.isArray(t))for(e in t)i=t[e],r=i.fields[fi.CoreField.Id],f[r]=i,u._updateWorkItemPayload(n,i,s,h);else i=t,r=i.fields[fi.CoreField.Id],f[r]=i,u._updateWorkItemPayload(n,t,s,h);u._updateChildren(f)},function(){f=r.length;o()},undefined,undefined,!0)}},u.prototype._updateChildren=function(n){var t=this,i=this._getColumnIndex(fi.CoreFieldRefNames.Parent),u,r;i!==-1&&(u={},Object.keys(n).forEach(function(t){var i=n[+t];i&&i.relations&&i.relations.forEach(function(n){n.LinkType===d.CoreLinkTypes.Child&&(u[n.ID]=+t)})}),r=[],Object.keys(this._pageData).forEach(function(f){var e=+f,o=u[e];o?(r.push(e),t._pageData[e][i]=o):(o=t._pageData[e][i],o&&n[+o]&&(r.push(e),t._pageData[e][i]=undefined))}),r.forEach(function(n){t._forceRefresh(n)}))},u.prototype._getColumnIndex=function(n){var t=-1;return $.each(this._pageColumns,function(i,r){if(r===n)return t=i,!1}),t},u.prototype.autoRefreshItems=function(n){var i=this,r=this,t=hi.defer(),u=function(n){t.reject(n)},f=function(u){var e=new ni.Dictionary;for(var f in u){var h=n.get(u[f].id),o=i._items.get(u[f].id),s=0;o&&(s=o.getOrder());r._shouldRefreshWorkItem(h,u[f].revision,s,u[f].tempId<0)?(e.add(u[f].id,u[f]),o&&o.setOrder(null)):lt.logTracePoint(li.TracePoints.WarningInUpdateAlreadyFresh)}e.count()>0?i._beginWorkItemsRefresh(e,function(){t.resolve({successCount:e.count(),failureCount:0})},function(n){t.resolve({successCount:n.length,failureCount:e.count()-n.length})}):t.resolve({successCount:0,failureCount:0})};return this._witManager.beginGetWorkItems(n.keys().map(function(n){return parseInt(n,10)}),f,u,{includeExtensionFields:!0,excludeFromUserRecentActivity:!0}),t.promise},u.itemSourceType="wit",u.checklistPageSize=200,u}(di);t.WorkItemSource=pr;gr=function(){function n(n){this._boardAnnotationSettingsOptions=n;this._applicableAnnotationIds=[];this._applicableAnnotationNames=[];this._applicableAnnotationItemSources=[];this._constructApplicableAnnotationsAndItemSourcesList()}return n.prototype.getApplicableAnnotationSettings=function(){var t=this,n=[];return this._boardAnnotationSettingsOptions.annotationSettings.forEach(function(i){et.contains(t._applicableAnnotationIds,i.id)&&n.push(i)}),n},n.prototype.getDisplayName=function(n){for(var t=0,i=this._boardAnnotationSettingsOptions.annotationSettings.length;t<i;t++)if(ut.equals(n,this._boardAnnotationSettingsOptions.annotationSettings[t].id,!0))return this._boardAnnotationSettingsOptions.annotationSettings[t].displayNameInSettingsPage;return n},n.prototype.getPreviewIcon=function(n){for(var t=0,i=this._boardAnnotationSettingsOptions.annotationSettings.length;t<i;t++)if(ut.equals(n,this._boardAnnotationSettingsOptions.annotationSettings[t].id,!0))return this._boardAnnotationSettingsOptions.annotationSettings[t].previewIcon;return $("<div>")},n.prototype.isAnnotationApplicable=function(n){return et.contains(this._applicableAnnotationIds,n)},n.prototype.isAnnotationRegistered=function(n){for(var t=0,i=this._boardAnnotationSettingsOptions.annotationSettings.length;t<i;t++)if(ut.equals(n,this._boardAnnotationSettingsOptions.annotationSettings[t].id,!0))return!0;return!1},n.prototype.getApplicableAnnotationIds=function(){return this._applicableAnnotationIds},n.prototype.getApplicableAnnotationNames=function(){return this._applicableAnnotationNames},n.prototype.isAnnotationItemSourceApplicable=function(n){return et.contains(this._applicableAnnotationItemSources,n)},n.prototype.getApplicableAnnotationItemSources=function(){return this._applicableAnnotationItemSources},n.prototype.isAnyAnnotationEnabled=function(){return this._applicableAnnotationIds.length>0},n.prototype.getAnnotationItemSources=function(n){var t;return this._boardAnnotationSettingsOptions.annotationSettings.forEach(function(i){if(i.id===n){t=i.annotationItemSourceIds;return}}),t},n.prototype.dispose=function(){this._applicableAnnotationIds=null;this._applicableAnnotationItemSources=null;this._boardAnnotationSettingsOptions=null},n.prototype._constructApplicableAnnotationsAndItemSourcesList=function(){var n=this,t=kt.BacklogContext.getInstance();this._boardAnnotationSettingsOptions.annotationSettings.forEach(function(i){i.isEnabled&&(i.isApplicableForRequirementBacklog&&t.isRequirement||i.isApplicableForPortfolioBacklogs&&t.isPortfolioInContext())&&(n._applicableAnnotationIds.push(i.id),n._applicableAnnotationNames.push(i.workItemTypeName),n._applicableAnnotationItemSources=et.union(n._applicableAnnotationItemSources,i.annotationItemSourceIds))})},n}();t.BoardAnnotationSettingsProvider=gr,function(n){n[n.INCOMING=0]="INCOMING";n[n.INPROGRESS=1]="INPROGRESS";n[n.OUTGOING=2]="OUTGOING"}(iu=t.ColumnType||(t.ColumnType={}));ir=function(){function n(){}return n.INCOMING="incoming",n.INPROGRESS="inprogress",n.OUTGOING="outgoing",n}();t.BoardColumnType=ir;nu=function(){function n(){}return n.ColumnField="ColumnField",n.RowField="RowField",n.DoneField="DoneField",n}();t.BoardFieldType=nu;cr=function(){function n(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this._id=t;this._node=i;this._values=r;this._title=u||r[0];this._childNode=f||null;this._layoutOptions=e;this._metadata=o;this._handlesNull=s;this._items=new ni.Dictionary;this._ordering=h;this._limits=c;this._previousMember=l;this._nextMember=a;this._canAddNewItemButton=v;this._description=y;this._itemsLoadComplete=!1;this._filterableFieldNamesByItemType=p;this.isFilterable()&&this._setupFilteringCapability();this._acquired=new ni.Dictionary;this._released=new ni.Dictionary;this._filtered=new ni.Dictionary}return n.prototype.isTopLevel=function(){var n=this._node.parentMember();return n?!1:!0},n.prototype.isFilterable=function(){return!this._childNode},n.prototype.getRootNodeFieldName=function(){return this.isTopLevel()?this.node().fieldName():this.node().parentMember().getRootNodeFieldName()},n.prototype.getRootMember=function(){for(var n=this;n.node().parentMember();)n=n.node().parentMember();return n},n.prototype.getColumnMember=function(){for(var n=this;!n.metadata();)n=n.node().parentMember();return n},n.prototype.executeUp=function(n){for(var t=this;t.node().parentMember();)n(t),t=t.node().parentMember()},n.prototype.getTopLevelMemberValue=function(n){return ut.ignoreCaseComparer(this.node().fieldName(),n)===0||this.isTopLevel()?this.values()[0]:this.node().parentMember().getTopLevelMemberValue(n)},n.prototype.isFiltered=function(){return this._filterManager&&this._filterManager.isFiltering()},n.prototype.id=function(){return this._id},n.prototype.node=function(){return this._node},n.prototype.itemSource=function(){return this.node().board().itemSource()},n.prototype.filterManager=function(){return this._filterManager},n.prototype.title=function(n){return n!==undefined&&(this._title=n),this._title},n.prototype.canAddNewItemButton=function(){return this._canAddNewItemButton},n.prototype.values=function(){return this._values},n.prototype.childNode=function(){return this._childNode},n.prototype.previousMember=function(n){return n!==undefined&&(this._previousMember=n),this._previousMember},n.prototype.nextMember=function(n){return n!==undefined&&(this._nextMember=n),this._nextMember},n.prototype.memberInPreviousLane=function(n){return n!==undefined&&(this._memberInPreviousLane=n),this._memberInPreviousLane},n.prototype.memberInNextLane=function(n){return n!==undefined&&(this._memberInNextLane=n),this._memberInNextLane},n.prototype.description=function(){return this._description},n.prototype.isMatch=function(n){return this.handlesNull()&&(n===null||n===undefined||n==="")?!0:Boolean(n)?et.contains(this._values,n,ut.localeIgnoreCaseComparer):void 0},n.prototype.getFieldUpdateList=function(n){var r;n===void 0&&(n=!1);for(var u=[],i=this.node(),t=this,e=0,f={};i!=null&&t!=null;)r=i.fieldName(),(n||!f[r])&&(u[e++]={fieldName:r,fieldValue:t.values()[0]},f[r]=!0),t=i.parentMember(),t&&(i=t.node());return u},n.prototype.itemComparer=function(){var t,n;return this._itemComparer||(t=this._node.board(),n=$.extend({},this._ordering),n.data=$.extend({itemSource:t.itemSource()},n.data),this._itemComparer=sr.getFunction(n)),this._itemComparer},n.prototype.layoutOptions=function(){return this._layoutOptions},n.prototype.metadata=function(){return this._metadata},n.prototype.handlesNull=function(){return this._handlesNull},n.prototype.rootColumnType=function(){return this.getRootMember().metadata()?this.getRootMember().metadata().boardColumnType:""},n.prototype.isPagingEnabled=function(){return this.isIncoming()||this.isOutgoing()},n.prototype.isIncoming=function(){var n=this.rootColumnType();return ut.ignoreCaseComparer(n,ir.INCOMING)===0},n.prototype.isInProgress=function(){var n=this.rootColumnType();return ut.ignoreCaseComparer(n,ir.INPROGRESS)===0},n.prototype.isOutgoing=function(){var n=this.rootColumnType();return ut.ignoreCaseComparer(n,ir.OUTGOING)===0},n.prototype.isCollapsible=function(){return this.isIncoming()||this.isOutgoing()},n.prototype.limits=function(n){return n!==undefined&&(this._limits=n),this._limits},n.prototype.item=function(n){return this._items.get(n)},n.prototype.items=function(){return this._items.values()},n.prototype.unpinOpenedItems=function(n,t){var i=[];fr.getLeafMembers(this._node,i);i.forEach(function(i){var r=i.items();r&&r.length>0&&r.forEach(function(i){i.unpinIfOpened(n,t)})})},n.prototype.startReceivingNewItems=function(){this._shouldReceiveNewItems=!0},n.prototype.stopReceivingNewItems=function(){this._shouldReceiveNewItems=!1},n.prototype.shouldReceiveNewItems=function(){return this._shouldReceiveNewItems},n.prototype.getItemContainer=function(n){return this._childNode?this._childNode.getItemContainer(n):this},n.prototype.updateItem=function(t,i,r){var u=t.id();r&&(this===r?this._released.containsKey(u)&&(this._released.remove(u),this._releaseAcquisition(u)):(r.removeItem(t,!0),this._acquired.containsKey(u)&&(this._acquired.remove(u),this._releaseAcquisition(u))));this._items.set(u,t);this.isFiltered()&&!this._filtered.containsKey(u)&&this._filtered.add(u,!0);r?this._fireItemUpdated(t):this._fireItemAdded(t,i)},n.prototype.removeItem=function(n,t){var i=n.id();this._items.remove(i);this._filtered.containsKey(i)&&this._filtered.remove(i);this._released.containsKey(i)&&(this._released.remove(i),t||this._releaseAcquisition(i));this._fireItemRemoved(n,t)},n.prototype.validateName=function(n,t){var i=this,u=this.node().board(),r=u.getBoardSettings();return this.metadata()?wr.getTitleValidationErrors(n,r.columns.filter(function(n){return n.name!==i.title()})):br.getTitleValidationErrors(n,r.rows.filter(function(n){return n.name!==i.title()}),t)},n.prototype.beginUpdateTitle=function(n){var t=this,f=this.node().board(),i=f.getBoardSettings(),e=hi.defer(),y=Date.now(),r,a,c,u,l,v,h;if(this.metadata()){for(c=function(n){var u,o,f;for(t._updateMemberAcquisitionStatus(s,!1),u=0,o=i.columns.length;u<o;u++)if(f=i.columns[u],ut.equals(f.id,t.id(),!0)){f.name=r;break}t.title(r);e.reject(n)},u=0,l=i.columns.length;u<l;u++)if(a=i.columns[u],ut.equals(a.id,this.id(),!0)){r=a.name;a.name=n;break}this.title(n);var o=this.node(),p=o.parentMember()?o.parentMember().node():o,s=[];fr.getLeafMembers(p,s);this._updateMemberAcquisitionStatus(s,!0,this.id());(new ar).beginUpdateColumns(i.columns,i.id).then(function(u){ur.invalidateStore(i.extensionId);var h=o.fieldName();t._updateNodeMemberValues(f.rootNode(),o.layoutStyle(),r,n);f.itemSource().updateTransitions(r,n);t.getRootMember().unpinOpenedItems(h,i.extensionId);t._updateMemberItemContainer(s,h,n,t.id());t._updateMemberAcquisitionStatus(s,!1,t.id());f.setBoardColumnSettings(u);nr.OnColumnRenamedInline(y);e.resolve(!0)},c)}else{for(c=function(n){var u,o,f;for(t._updateMemberAcquisitionStatus(h,!1),u=0,o=i.rows.length;u<o;u++)if(f=i.rows[u],ut.equals(f.id,t.id(),!0)){f.name=r;break}t.title(r);e.reject(n)},u=0,l=i.rows.length;u<l;u++)if(v=i.rows[u],ut.equals(v.id,this.id(),!0)){r=v.name;v.name=n;break}this.title(n);h=this.childNode().members();this._updateMemberAcquisitionStatus(h,!0);(new ar).beginUpdateRows(i.rows,i.id).then(function(u){ur.invalidateStore(i.extensionId);var o=t.node(),s=o.fieldName();t._updateNodeMemberValues(f.rootNode(),o.layoutStyle(),r,n);t.getRootMember().unpinOpenedItems(s,i.extensionId);t._updateMemberItemContainer(h,s,n);t._updateMemberAcquisitionStatus(h,!1);f.setBoardRowSettings(u);nr.OnLaneRenamedInline(y);e.resolve(!0)},c)}return e.promise},n.prototype.changeItemId=function(n,t){this._items.set(t,this._items.get(n));this._released.containsKey(n)&&this._released.set(t,this._released.get(n));this._acquired.containsKey(n)&&this._acquired.set(t,this._acquired.get(n));this._filtered.containsKey(n)&&this._filtered.set(t,this._filtered.get(n));this._items.remove(n);this._released.remove(n);this._acquired.remove(n);this._filtered.remove(n);this._fireItemUpdated(this._items.get(t),n)},n.prototype.clear=function(){var n=this;$.each(this._items.values(),function(t,i){n.removeItem(i)})},n.prototype.acquire=function(n){this._logAcquisition(n,"Acquiring item");var r=this._node.board(),u=r.acquisitions(),i,t;i={};u.tryGetValue(n,i)?(t=i.value,t.release.cancel(),t.member!==this&&t.member.release(n,!1)):r.currentContainer(n).release(n);this._acquired.set(n,!0);this._setupRelease(u,n);this._fireItemCountChanged()},n.prototype.scheduleRelease=function(n){this._logAcquisition(n,"Setup delayed release");var t;(this._acquired.containsKey(n)||this._items.containsKey(n))&&(t=this._node.board().acquisitions(),this._setupRelease(t,n).start())},n.prototype.getItemCount=function(){var n={owned:this._items.count(),acquired:this._acquired.count(),released:this._released.count(),wip:this._items.count(),filtered:0,count:0};return n.filtered=this.isFiltered()?this._filtered.count():this._items.count(),this._childNode&&$.each(this._childNode.members(),function(t,i){var r=i.getItemCount();n.owned+=r.owned;n.acquired+=r.acquired;n.released+=r.released;n.filtered+=r.filtered}),n.count=n.filtered+n.acquired-n.released,n.wip=n.owned+n.acquired-n.released,n},n.prototype.getFirstAncestorWithItemLimit=function(){var n=this._node.parentMember();return n?n.hasItemLimit()?n:n.getFirstAncestorWithItemLimit():null},n.prototype.getBoardMemberAncestorByLayout=function(n){var t=this._node.parentMember();return t?t.layoutOptions()&&ut.ignoreCaseComparer(t.layoutOptions().cssClass,n)===0?t:t.getBoardMemberAncestorByLayout(n):null},n.prototype.hasItemLimit=function(){return this._limits&&this._limits.limit!==undefined},n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype._fireEvent=function(n,t,i){if(this._events){var r;if(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r)return!1}},n.prototype.attachEvent=function(n,t){this._events||(this._events=new pt.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n.prototype.onItemsLoaded=function(){this._itemsLoadComplete=!0},n.prototype.setLocalTextFilter=function(n){if(this._localTextFilter=n.trim(),this._searchStartTime=Date.now(),this._filterManager){var t=this._filterManager.getFilters();this._addMemberFilterStringToFilterState(t);this._filterManager.setFilters(t);this._onBoardItemSearchComplete(this._filterManager.filter())}},n.prototype.getLocalTextFilter=function(){var n;return(n=this._localTextFilter)!==null&&n!==void 0?n:undefined},n.prototype.clearLocalTextFilter=function(){if(this._localTextFilter="",this._filtered.clear(),this._filterManager){var t=this._filterManager.getFilters(),n=t[k.TextFilterProvider.PROVIDER_TYPE];n&&(n.values=n.values.slice(0,1));this._filterManager.setFilters(t);this.calculateFilteredItems()}},n.prototype.isDataSetComplete=function(){return this._itemsLoadComplete&&Boolean(this.itemSource())},n.prototype._addMemberFilterStringToFilterState=function(n){var t=n[k.TextFilterProvider.PROVIDER_TYPE],i;t?(i=t.values,i[1]=this._localTextFilter):n[k.TextFilterProvider.PROVIDER_TYPE]={values:["",this._localTextFilter]}},n.prototype.filterItems=function(n){var t=oi.getScenarioManager().startScenario(nr.CI_AREA_AGILE,nr.Perf_Scenario_CriteriaFilterTiles),i=!1;return this._filterManager&&(t.addSplitTiming(nr.Perf_Split_PreCriteriaFilter),!this._localTextFilter||this._addMemberFilterStringToFilterState(n),p.isFilterStateEmpty(n)?this._filterManager.clearFilters():(this._filterManager.setFilters(n),t.addSplitTiming(nr.Perf_Split_PostCriteriaFilter),i=!0),this.calculateFilteredItems(),t.end()),i},n.prototype.ensureSearchIndex=function(){this.isFilterable()&&this._filterManager&&(this._localTextFilter=this._localTextFilter||"",this.setLocalTextFilter(this._localTextFilter))},n.prototype.calculateFilteredItems=function(){if(this._filterManager){var n=this._filterManager.filter();this._fireEvent(tr.BoardItemFilteringComplete,this,n);this._updateFilteredItemsMap(n)}},n.prototype.dispose=function(){this._events&&(this._events.unsubscribeAll(),this._events=null)},n.prototype._setupFilteringCapability=function(){var n=this.node().board();this._filterManager=new p.FilterManager(new kr(n.itemTypes(),this,this._filterableFieldNamesByItemType));wi.FeatureAvailabilityService.isFeatureEnabled(bi.FeatureAvailabilityFlags.UseTokenFiltering,!1)?this._filterManager.registerFilterProvider(k.TextFilterProvider.PROVIDER_TYPE,new k.TextFilterProvider):this._filterManager.registerFilterProvider(k.TextFilterProvider.PROVIDER_TYPE,new k.SubstringTextFilterProvider);this._filterManager.registerFilterProvider(fi.CoreFieldRefNames.AssignedTo,new v.AssignedToFilterProvider);this._filterManager.registerFilterProvider(fi.CoreFieldRefNames.WorkItemType,new y.FieldFilterProvider(fi.CoreFieldRefNames.WorkItemType));this._filterManager.registerFilterProvider(fi.CoreFieldRefNames.State,new y.FieldFilterProvider(fi.CoreFieldRefNames.State));this._filterManager.registerFilterProvider(fi.CoreFieldRefNames.IterationPath,new w.IterationPathFilterProvider(n.teamId));this._filterManager.registerFilterProvider(fi.CoreFieldRefNames.AreaPath,new a.AreaPathFilterProvider);n.isRootBacklogLevel()||this._filterManager.registerFilterProvider(t.parentItemFieldRefName,new y.FieldFilterProvider(t.parentItemFieldRefName));this._filterManager.registerFilterProvider(fi.CoreFieldRefNames.Tags,new b.TagsFilterProvider);this._filterManager.activate()},n.prototype._updateFilteredItemsMap=function(n){var t,i,r;for(this._filtered.clear(),t=0,i=n;t<i.length;t++)r=i[t],this._filtered.add(r,!0);this._fireItemCountChanged()},n.prototype._onBoardItemSearchComplete=function(n){var t=Date.now();this._fireEvent(tr.BoardItemFilteringComplete,this,n);var i=Date.now(),r=t-this._searchStartTime,u=i-t,f=i-this._searchStartTime;this._updateFilteredItemsMap(n);lt.logVerbose(this.rootColumnType()+" Total Search Time: "+f+", Core: "+r+", Rendering: "+u+", Filter: "+this._localTextFilter+", #Match: "+n.length)},n.prototype._updateNodeMemberValues=function(n,t,i,r){var f=this,u=n;u.members().forEach(function(n){if(u.layoutStyle()===t){var e=n.values(),o=e.indexOf(i);o>-1&&(n.title(r),e[o]=r)}n.childNode()&&f._updateNodeMemberValues(n.childNode(),t,i,r)})},n.prototype._updateMemberItemContainer=function(n,t,i,r){var u=this;n.forEach(function(n){var f;r?(ut.equals(n.id(),r)||ut.isEmptyGuid(n.id())&&ut.equals(n.node().parentMember().id(),r))&&(f=n.items(),f.forEach(function(r){return n.node().updateItemContainer(r,t,i,!0)})):n.childNode()?u._updateMemberItemContainer(n.childNode().members(),t,i):(f=n.items(),f.forEach(function(r){return n.node().updateItemContainer(r,t,i,!0)}))})},n.prototype._updateMemberAcquisitionStatus=function(n,t,i){var r=this;n.forEach(function(n){i?(ut.equals(n.id(),i)||ut.isEmptyGuid(n.id())&&ut.equals(n.node().parentMember().id(),i))&&(n.disableAcquisitions=t):n.childNode()?r._updateMemberAcquisitionStatus(n.childNode().members(),t):n.disableAcquisitions=t})},n.prototype._logAcquisition=function(n,t){lt.logVerbose(ut.format("[{0},{1}] ",n,this._title)+t)},n.prototype._setupRelease=function(n,t){var i={member:this,release:new rt.DelayedFunction(this,100,"release-item",this.release,[t,!0])};return n.set(t,i),i.release},n.prototype.release=function(n,t){this._logAcquisition(n,"Releasing item");var u=this._node.board(),f,r,i;r={};this._acquired.containsKey(n)?(this._acquired.remove(n),f=u.acquisitions(),f.tryGetValue(n,r)&&(this._releaseAcquisition(n),t&&(this._logAcquisition(n,"Returning item to owner"),i=u.currentContainer(n),i._released.clear(n),i._fireItemCountChanged()))):this._items.containsKey(n)&&this._released.set(n,!0);this._logAcquisition(n,"Released item");this._fireItemCountChanged()},n.prototype._releaseAcquisition=function(n){var t=this._node.board().acquisitions();t.containsKey(n)&&(t.get(n).release.cancel(),t.remove(n))},n.prototype._resetIndexState=function(){this._filterManager&&this._filterManager.dataUpdated();lt.logVerbose("Search index is now stale")},n.prototype._fireItemAdded=function(n,t){this._fireItemChange(tr.BoardItemAdded,{item:n,deferPlacement:t});n.isNew()||this._resetIndexState()},n.prototype._fireItemUpdated=function(n,t){this._fireItemChange(tr.BoardItemUpdated,{item:n,oldId:t});this._resetIndexState()},n.prototype._fireItemRemoved=function(n,t){this._fireItemChange(tr.BoardItemRemoved,{item:n,isMove:t});n.isNew()||this._resetIndexState()},n.prototype._fireItemChange=function(n,t){this._fireEvent(n,this,t);this._fireItemCountChanged()},n.prototype._fireItemCountChanged=function(){this._updateCountForSwimlane();this._updateCountForWIPLimit()},n.prototype._updateCountForSwimlane=function(){var n=this.getBoardMemberAncestorByLayout("swimlane");n&&n._fireEvent(tr.BoardMemberItemCountChanged,n,n.getItemCount())},n.prototype._updateCountForWIPLimit=function(){var n,t;this.hasItemLimit()?(n=this.getItemCount(),this._logAcquisition(0,"Firing item count changed: "+ut.format("Owned:{0}, Acquired:{1}, Released:{2}",n.owned,n.acquired,n.released)),this._fireEvent(tr.BoardMemberItemCountChanged,this,n)):(t=this.getFirstAncestorWithItemLimit(),t&&t._fireItemCountChanged())},n}();t.BoardMember=cr;tu=function(){function n(){}return n.HORIZONTAL="horizontal",n.VERTICAL="vertical",n}();t.BoardNodeLayoutStyle=tu;fr=function(){function n(t,i,r,u){var f=this,e;this._parentMember=r;this._board=t;this._fieldName=i.fieldName;this._layoutStyle=i.layoutStyle;this._itemDriven=i.isItemDriven;this._childNodeMembers=[];this._childNodes=[];e=function(i,r){var e=r.childNode?new n(t,r.childNode,null,u):null,o;e&&f._childNodes.push(e);o=f.addMember(r.id,r.values,r.title,e,r.layoutOptions,r.metadata,r.handlesNull,r.itemOrdering,r.limits,null,null,r.canAddNewItemButton,r.description,u);f._childNodeMembers.push(o);e&&e.parentMember(o)};i.members&&(this._members=[],$.each(i.members,e))}return n.getLeafMembers=function(n,t){var i=this;$.each(n.members(),function(n,r){r.childNode()?i.getLeafMembers(r.childNode(),t):t.push(r)})},n.setLeafMembersPrevAndNext=function(t){var i=null,f=!1,r,u;r=t.members()[1].childNode();r!=null&&r.layoutStyle()==="vertical"&&(u=null,$.each(r.members(),function(r,f){ut.isEmptyGuid(f.id())?u=f:(i=[t.members()[0]],n.getLeafMembers(f.childNode(),i),i.push(t.members()[2]),n._setMembersPrevAndNext(i))}),i=[t.members()[0]],n.getLeafMembers(u.childNode(),i),i.push(t.members()[2]),n._setMembersPrevAndNext(i),f=!0,n.setNextAndPreviousLaneMembers(r.members()));f||(i=[],n.getLeafMembers(t,i),n._setMembersPrevAndNext(i))},n.setNextAndPreviousLaneMembers=function(t){var i=null,r=null;t.length>1&&t.forEach(function(t){i=r;r=[];n.getLeafMembers(t.childNode(),r);i&&i.length>0&&n.setNextAndPreviousLaneMembersForGivenLanes(r,i)})},n.setNextAndPreviousLaneMembersForGivenLanes=function(n,t){n.forEach(function(n,i){n.memberInPreviousLane(t[i])});t.forEach(function(t,i){t.memberInNextLane(n[i])})},n._setMembersPrevAndNext=function(n){$.each(n,function(t,i){i.previousMember(t>0?n[t-1]:null);i.nextMember(t+1<n.length?n[t+1]:null)})},n.prototype.board=function(){return this._board},n.prototype.fieldName=function(){return this._fieldName},n.prototype.parentMember=function(n){return n&&(this._parentMember=n),this._parentMember},n.prototype.layoutStyle=function(){return this._layoutStyle},n.prototype.members=function(){return this._members},n.prototype.allFilterableMembers=function(n){n===void 0&&(n=!0);var t=[];return $.each(this._members,function(i,r){var u,f;r.isFilterable()&&t.push(r);n&&(u=r.childNode(),u&&(f=u.allFilterableMembers(),t=t.concat(f||[])))}),t},n.prototype.addMember=function(t,i,r,u,f,e,o,s,h,c,l,a,v,y){var p=new cr(t,this,i,r,u,f,e,o,s,h,c,l,a,v,y);return this._members.push(p),this._fireEvent(tr.BoardMemberAdded,this,{member:p}),p},n.prototype.isItemDriven=function(){return this._itemDriven===!0},n.prototype.updateItemContainer=function(n,t,i,r){var u=gt.ControlUtils.getParentFieldReferenceName(t);u&&ut.equals(n.fieldValue(t),n.fieldValue(u))&&n.fieldValue(u,i,!1,r);n.fieldValue(t,i,!0,r)},n.prototype.getItemContainer=function(n){var t=n.fieldValue(this._fieldName),i,r;return typeof t=="boolean"&&(t=t.toString()),!t&&n.isNew()&&(t=this._members[0].title()),$.each(this._members||[],function(r,u){if(u.isMatch(t))return i=u.getItemContainer(n),!1}),!i&&this._itemDriven&&(r=this.addMember(null,[t],t,null,{width:"single"},null,null,null,this._members.length>0?this._members[this._members.length-1]:null),i=r.getItemContainer(n)),i},n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype._fireEvent=function(n,t,i){if(this._events){var r;if(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r)return!1}},n.prototype.attachEvent=function(n,t){this._events||(this._events=new pt.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n.prototype.dispose=function(){var n,u,i,f,t,r,e,o;if(this._members)for(n=0,u=this._members;n<u.length;n++)t=u[n],t.dispose();if(this._childNodeMembers)for(i=0,f=this._childNodeMembers;i<f.length;i++)t=f[i],t.dispose();if(this._childNodes)for(r=0,e=this._childNodes;r<e.length;r++)o=e[r],o.dispose();this._members=[];this._childNodeMembers=[];this._childNodes=[]},n}();t.BoardNode=fr;ur=function(){function n(n,t,i){var r,u;this._lockedItems=[];this._isRootBacklogLevel=null;this._eventsHelper=t;r=n.board;this._boardSettings=n.boardSettings;this._itemTypes=n.itemTypes||(n.itemSource?n.itemSource.itemTypes:null);this._items=null;this._events=null;this._teamId=this._boardSettings.teamId;this._id=r.id;this._pageSize=r.pageSize;this._filterPageSize=r.filterPageSize;this._node=new fr(this,r.node,null,r.filterableFieldNamesByItemType);fr.setLeafMembersPrevAndNext(this._node);this._fields=r.fields;this._membershipEvaluator=sr.getFunction(r.membership);this._acquisitions=new ni.Dictionary({throwOnKeyMissing:!0});this._workItemIdsTypeChanged={};this._pendingBoardRefresh=!1;i&&(i.clearItems(),this.setItemSource(i));this._onBoardTileMoveLockDelegate=er(this,this._onBoardTileMoveLock);this._onBoardTileMoveUnlockDelegate=er(this,this._onBoardTileMoveUnlock);u=vt.getService();u.registerActionWorker(tr.BoardTileMoveLock,this._onBoardTileMoveLockDelegate,vt.ActionService.MaxOrder);u.registerActionWorker(tr.BoardTileMoveUnlock,this._onBoardTileMoveUnlockDelegate,vt.ActionService.MaxOrder)}return n.createBoard=function(t,i,r){return new n(t,i,r)},n.beginGetModel=function(n,t,i){var r=kt.BacklogContext.getInstance();ui.DismissableMessageAreaControl.isDismissedOnClient(kt.NotificationGuids.LimitedPortfolioAccess,ri.WebSettingsScope.User)||(r.isPortfolioInContext()?$(".tfs-basic-user-limited-portfolio-access-notification").addClass("visible").show():$(".tfs-basic-user-limited-portfolio-access-notification").removeClass("visible").hide());at.getService(h.WebPageDataService,s.getDefaultWebContext()).getDataAsync(f.BoardsHubConstants.TEAM_BOARD_CONTENT_DATAPROVIDER_ID,null,null).then(function(n){n.exceptionInfo&&n.exceptionInfo.exceptionMessage?i({message:n.exceptionInfo.exceptionMessage,stack:n.exceptionInfo.stackTrace}):t(n.boardModel)},i)},n.prototype._onBoardTileMoveLock=function(n){this._lockedItems.push(n.id)},n.prototype._onBoardTileMoveUnlock=function(n){for(var t=this._lockedItems.indexOf(n.id),i=!1;t>-1;)this._lockedItems.splice(t,1),i=!0,t=this._lockedItems.indexOf(n.id);i&&this._pendingBoardRefresh&&(this._pendingBoardRefresh=!1,this._eventsHelper.fire(li.Events.RefreshBoard,this))},n.prototype.hasLockedItems=function(){return this._lockedItems.length>0},n.prototype.setPendingBoardRefresh=function(n){this._pendingBoardRefresh=n},n.invalidateStore=function(n){var t=ii.ProjectCollection.getDefaultConnection().getService(bt.WorkItemStore);t.invalidateExtensions([n]);g.WorkItemManager.get(t).resetCache()},n.prototype.dispose=function(){this._itemSource&&(this._itemSource.detachEvent(di.Events.ItemChange,this._itemChangeHandler),this._itemSource.dispose(),this._itemSource=null,$.each(this._itemContainer.values(),function(n,t){t.clear()}));this._workItemIdsTypeChanged={};this._backlogLevelHelper=null;this._cardSettingsProvider&&(this._cardSettingsProvider.dispose(),this._cardSettingsProvider=null);var n=vt.getService();n.unregisterActionWorker(tr.BoardTileMoveLock,this._onBoardTileMoveLockDelegate);n.unregisterActionWorker(tr.BoardTileMoveUnlock,this._onBoardTileMoveUnlockDelegate);this._node&&(this._node.dispose(),this._node=null);this._events&&(this._events.unsubscribeAll(),this._events=null);this.unsubscribeFromAutoRefreshEvents()},Object.defineProperty(n.prototype,"teamId",{get:function(){return this._teamId},enumerable:!1,configurable:!0}),n.prototype.id=function(){return this._id},n.prototype.getItemSource=function(){return this._itemSource},n.prototype.getBoardSettings=function(){return this._boardSettings},n.prototype.setBoardColumnSettings=function(n){this._boardSettings.columns=n},n.prototype.setBoardRowSettings=function(n){this._boardSettings.rows=n},n.prototype.rootNode=function(){return this._node},n.prototype.itemTypes=function(){return this._itemTypes},n.prototype.getField=function(n){return this._fields[n]},n.prototype.beginPopulate=function(t,r){var u=this,f;f=function(){u._itemSource.beginGetItems(function(r){var f,o,e;u._updateItems(r);f=!1;o=yi.FeatureAvailabilityService.isFeatureEnabled(vi.FeatureAvailabilityFlags.WebAccessAgileCardAnnotations);f=o?n.BoardAnnotationSettings.isAnyAnnotationEnabled():n.BoardAnnotationSettings.isAnnotationApplicable(i.BoardAnnotationsIdentifier.ChecklistAnnotation);f&&(e=$.map(r,function(n){return n.id()}),u._itemSource.retrieveAnnotationItemSourceData(e),u._itemSource.beginGetChildren(e).then(function(n){var t=0,i=0,r;$.each(n,function(n,r){i+=r.length;t++});r=t>0?Math.round(i/t):0;nr.publish(nr.KANBAN_CHECKLIST,{NumberOfCardsWithChecklist:t,AverageNumberOfChecklistsOnCard:r})}));t(r)},r)};this._itemSource?($.isFunction(this._membershipEvaluator.initialize)&&this._membershipEvaluator.initialize(),f()):rt.delay(this,0,t,[])},n.prototype.beginPageMoreItems=function(t,r,u,f,e,o){var s=this,h=t?this._filterPageSize:this._pageSize,c=this._boardSettings.teamId,l=rr.contextData.project.id;return this.itemSource().beginPageItems(l,c,r,h,o,function(t){return __awaiter(s,void 0,void 0,function(){var r;return __generator(this,function(f){switch(f.label){case 0:return(this._updateItems(t),!n.BoardAnnotationSettings.isAnyAnnotationEnabled())?[3,2]:(r=$.map(t,function(n){return n.id()}),this._itemSource.retrieveAnnotationItemSourceData(r),!n.BoardAnnotationSettings.isAnnotationApplicable(i.BoardAnnotationsIdentifier.ChecklistAnnotation))?[3,2]:[4,this._itemSource.beginGetChildren(r)];case 1:f.sent();f.label=2;case 2:return u(t),[2]}})})},f,e)},n.prototype.isRootBacklogLevel=function(){if(this._isRootBacklogLevel===null){var n=kt.BacklogContext.getInstance(),t=o.BacklogConfigurationService.getBacklogConfiguration();this._isRootBacklogLevel=!!(n&&n.level&&t&&t.isRootLevelBacklog(n.level.id))}return this._isRootBacklogLevel},n.prototype.hasWorkItem=function(n){return this._itemSource&&this._itemSource.isWorkItemPaged(n)},n.prototype.getFieldValue=function(n,t){return this._itemSource&&this._itemSource.getPayloadFieldValue(n,t)},n.prototype._ensureInitializedBacklogLevelHelper=function(){if(!this._backlogLevelHelper){this._backlogLevelHelper=new dt.BacklogLevelHelper;var n=kt.BacklogContext.getInstance(),t=n.level.defaultWorkItemType;this._currentBacklogLevel=this._backlogLevelHelper.getLevel(t)}},n.prototype._isItemTypeChildBacklogLevel=function(n){this._ensureInitializedBacklogLevelHelper();var t=this._backlogLevelHelper.getLevel(n);return this._currentBacklogLevel!==-1&&t!==-1&&this._currentBacklogLevel+1===t},n.prototype._isItemTypeCurrentBacklogLevel=function(n){this._ensureInitializedBacklogLevelHelper();var t=this._backlogLevelHelper.getLevel(n);return this._currentBacklogLevel!==-1&&t!==-1&&this._currentBacklogLevel===t},n.prototype.setItemSource=function(n){var t=this;return r.BoardParentDataProvider.clear(),n!==undefined&&(this._itemChangeHandler||(this._itemChangeHandler=er(this,function(n,i){switch(i.change){case di.ChangeTypes.Opened:t._eventsHelper.fire(tr.BoardItemNeedsUpdate,t,{id:i.id,update:function(){t._itemUpdated(n,i)}});break;case di.ChangeTypes.Created:case di.ChangeTypes.SaveCompleted:t._itemUpdated(n,i);break;case di.ChangeTypes.Refresh:case di.ChangeTypes.Reset:delete t._workItemIdsTypeChanged[i.id];t._itemUpdated(n,i);break;case di.ChangeTypes.FieldChange:i.id!==i.getItem().id()&&t._itemUpdated(n,i);break;case di.ChangeTypes.Discarded:case di.ChangeTypes.Deleted:delete t._workItemIdsTypeChanged[i.id];t._itemDiscarded(n,i);break;case di.ChangeTypes.TypeChanged:var r=i.workItem.getOriginalWorkItemType().name,u=i.workItem.workItemType.name,f=t._isItemTypeChildBacklogLevel(r),e=t._isItemTypeCurrentBacklogLevel(u);e&&f&&(t._workItemIdsTypeChanged[i.id]=!0);break;case di.ChangeTypes.Saved:t._workItemIdsTypeChanged[i.id]&&(delete t._workItemIdsTypeChanged[i.id],t._eventsHelper.fire(tr.BoardMessageDisplay,t,{message:st.BoardRefreshRequired,messageType:it.MessageAreaType.Warning,clickCallback:function(){window.location.reload()}}))}t._eventsHelper.fire(tr.BoardItemsUpdated,t)})),this._itemSource&&(this._itemSource.detachEvent(di.Events.ItemChange,this._itemChangeHandler),this._itemSource.dispose(),$.each(this._itemContainer.values(),function(n,t){t.clear()})),this._items=new ni.Dictionary,this._itemContainer=new ni.Dictionary,this._itemSource=n,n.attachEvent(di.Events.ItemChange,this._itemChangeHandler),r.BoardParentDataProvider.create(this)),this._itemSource},n.prototype.itemSource=function(){return this._itemSource},n.prototype.updateLimit=function(n,t,i,r){var u=$.map(n.node().members(),function(i){var r=i.limits();return r?(i===n&&(r.limit=t,i.limits(r)),ut.format("{0}:{1}",i.title(),r.limit)):null}),f=u.toString(),e={area:"api",includeVersion:!0,teamId:this._boardSettings.teamId},o=rr.getActionUrl("SetTeamWorkInProgressLimits","backlog",e);ot.postMSJSON(o,{data:f},i,r)},n.prototype.currentContainer=function(n){return this._itemContainer.get(n)},n.prototype.acquisitions=function(){return this._acquisitions},n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype._fireEvent=function(n,t,i){if(this._events){var r;if(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r)return!1}},n.prototype.attachEvent=function(n,t){this._events||(this._events=new pt.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n.prototype.getCardSettingsProvider=function(){return this._cardSettingsProvider},n.prototype.setCardSettingsProvider=function(n){this._cardSettingsProvider=n},n.prototype.isAutoBoardRefreshOn=function(){return this._boardSettings.autoRefreshState},n.prototype._meetsBoardCriteria=function(n){var t;return this._membershipEvaluator(n,function(n){t=n}),t},n.prototype._updateItems=function(n){var r,t,i;for(oi.getScenarioManager().split(nr.Perf_Split_UpdateItemsStart),r=n.length,t=0;t<r;t++)i=n[t],this._itemUpdated(this.itemSource(),{id:i.id(),getItem:function(){return i},deferPlacement:!0});oi.getScenarioManager().split(nr.Perf_Split_UpdateItemsEnd);this._eventsHelper.fire(tr.BoardItemsUpdated,this)},n.prototype._itemUpdated=function(n,t){var r,u,i,f;if(r=t.id,u=this._items.containsKey(r),u)i=this._items.get(r),r!==i.id()&&this._changeItemId(r,i.id());else if(i=t.getItem(),f=this._node.getItemContainer(i),r<0&&f&&!f.shouldReceiveNewItems())return;this._meetsBoardCriteria(i)?this._updateItem(i,t.deferPlacement,t.change):u&&this.removeItem(i,nr.KANBAN_ITEM_REMOVED_MEMBERSHIP_CHANGED)},n.prototype._itemDiscarded=function(n,t){var i,r,u;i=t.id;r=this._items.containsKey(i);r&&(u=this._items.get(i),this.removeItem(u,nr.KANBAN_ITEM_REMOVED_DELETED));t.change===di.ChangeTypes.Deleted&&this._itemSource.updateParentPayloadOnDelete(i)},n.prototype._changeItemId=function(n,t){var i=this._itemContainer.get(n);this._items.set(t,this._items.get(n));this._itemContainer.set(t,i);this._acquisitions.containsKey(n)&&this._acquisitions.set(t,this._acquisitions.get(n));i.changeItemId(n,t);this._acquisitions.remove(n);this._itemContainer.remove(n);this._items.remove(n)},n.prototype._updateItem=function(n,t,i){var e,s,h,o,c;var u=n.id(),f=this._itemContainer.get(u),r=this._node.getItemContainer(n);if(r){if(r===f?(e={},this._acquisitions.tryGetValue(u,e)&&(s=e.value,h=s.member,h.release(u,!0))):(this._items.set(u,n),this._itemContainer.set(u,r)),r.updateItem(n,t,f),i===di.ChangeTypes.Refresh){o=!1;for(c in this._lockedItems)if(r===this._itemContainer.get(this._lockedItems[c])){o=!0;break}o||r.calculateFilteredItems()}}else f&&this.removeItem(n,nr.KANBAN_ITEM_REMOVED_INVALID_NODE);this._eventsHelper.fire(tr.BoardTileMoved)},n.prototype.removeItem=function(n,t){var i=n.id(),r=this._itemContainer.get(i);r&&(r.removeItem(n),this._itemContainer.remove(i));n.postRemoveCleanup();this._items.remove(i);this._itemSource.clearItem(i);t&&nr.OnItemRemoved(t)},n.prototype.removeItemById=function(n,t){var i=this._itemSource.getCachedItem(n);i&&this.removeItem(i,t)},n.prototype._autoRefreshBoardItems=function(n,t){var u=this,c=function(n){lt.logTracePoint(n);u._eventsHelper.fire(li.Events.ItemsAutoRefreshCompleted,u,0)},r=new ni.Dictionary,e=0,o,i,f,s,h;for(o in t)if(i=t[o],f=this._itemSource.getCachedItem(i.id),this._lockedItems.indexOf(i.id)>-1)f&&f.setPendingAutoRefreshEvent(i);else switch(i.changeType){case li.EventType.ItemUpdated:this._items.containsKey(i.id)?(i.wasWorkItemAttached=f.isWorkItemAttached(),r.containsKey(i.id)||r.add(i.id,i)):lt.logTracePoint(li.TracePoints.WarningInUpdateNotOnBoard);break;case li.EventType.ItemCreated:case li.EventType.ItemAdded:this._items.containsKey(i.id)?lt.logTracePoint(li.TracePoints.WarningInAddAlreadyOnBoard):r.containsKey(i.id)||r.add(i.id,i);break;case li.EventType.ItemDeleted:case li.EventType.ItemRemoved:this._items.containsKey(i.id)?(this.removeItemById(i.id),e++):lt.logTracePoint(li.TracePoints.WarningInDeleteNotOnBoard);break;case li.EventType.ItemRestored:this._items.containsKey(i.id)?lt.logTracePoint(li.TracePoints.InfoInRestoreAlreadyOnBoard):r.containsKey(i.id)||r.add(i.id,i);break;default:lt.logTracePoint(li.TracePoints.ErrorUnknownEventType)}e>0&&(s={SuccessfullyUpdated:e,ErrorUpdating:0},li.PublishAutoRefreshTelemetry("ItemsRemoved",this._boardSettings.extensionId,s));r.count()>0?(h=function(n){if(n.successCount>0||n.failureCount>0){var t={SuccessfullyUpdated:n.successCount,ErrorUpdating:n.failureCount};li.PublishAutoRefreshTelemetry("GetWICallResult",u._boardSettings.extensionId,t)}u._eventsHelper.fire(li.Events.ItemsAutoRefreshCompleted,u,n.successCount)},this._itemSource.autoRefreshItems(r).then(h,c.bind(null,li.TracePoints.ErrorInUpdate))):this._eventsHelper.fire(li.Events.ItemsAutoRefreshCompleted,this,0)},n.prototype.subscribeForAutoRefreshEvents=function(){this._autoRefreshBoardItemsDelegate||(this._autoRefreshBoardItemsDelegate=er(this,this._autoRefreshBoardItems),this._eventsHelper.attachEvent(li.Events.ItemsNeedAutoRefresh,this._autoRefreshBoardItemsDelegate),this._boardSettings.autoRefreshState=!0)},n.prototype.unsubscribeFromAutoRefreshEvents=function(){this._autoRefreshBoardItemsDelegate&&(this._eventsHelper.detachEvent(li.Events.ItemsNeedAutoRefresh,this._autoRefreshBoardItemsDelegate),this._autoRefreshBoardItemsDelegate=null,this._boardSettings.autoRefreshState=!1)},n}();t.Board=ur;nr=function(){function n(){}return n.OnBoardSettingsSave=function(t,i){var r={IsWIPLimitChanged:t.isWIPLimitChanged,IsColumnNameChanged:t.isColumnNameChanged,IsSplitColumnStateChanged:t.isSplitColumnStateChanged,IsDescriptionChanged:t.isDescriptionChanged,IsColumnStateChanged:t.isColumnStateChanged,IsColumnOrderChanged:t.isColumnOrderChanged,AddedColumnCount:t.newColumnCount,DeletedColumnCount:t.deletedColumnCount,TotalColumnCount:t.totalColumnCount,DescriptionColumnCount:t.descriptionColumnCount,SplitColumnCount:t.splitColumnCount,AverageWipLimitInProgressColumn:t.averageWipLimitInProgressColumn,ElapsedTime:i,IsColumnDeleted:t.isColumnDeleted,IsColumnAdded:t.isColumnAdded};this.publish(n.KANBAN_UPDATEBOARDSETTINGS,r,!0)},n.OnBoardDisplay=function(t,i,r,u){var f,e,o,s;r===void 0&&(r=!1);u===void 0&&(u=null);i?(f=n._getCardCustomTelemetryData(t),this.publish(n.KANBAN_CARD_CUSTOM_INFO,f)):(e=u?JSON.stringify(u):"",o=n._getBoardTelemetryData(t,r,e),this.publish(n.KANBAN_REFRESHBOARD,o));s=!yi.FeatureAvailabilityService.isFeatureEnabled(vi.FeatureAvailabilityFlags.DisableWebAccessServerKanbanLogs);s&&this.publish(n.KANBAN_CUSTOMIZATION,n._getBoardCustomizationData(t))},n._getCardCustomTelemetryData=function(n){var t=this._getCardFieldSettings(n),i=this._getCardStyleSettings(n);return{BoardId:n.id(),AdditionalFieldCount:t.additionalFieldCount,AdditionalStyleCount:i.customStyleCount}},n._getBoardCustomizationData=function(n){var r=this._getCardFieldSettings(n),t=this._getCardStyleSettings(n),i=n.getBoardSettings(),u=i.rows||[],f=i.columns||[];return{SwimlaneCount:u.length,ColumnCount:f.length,StyleRuleCount:t.styleRuleCount,EnabledStyleRuleCount:t.enabledStyleRuleCount,AdditionalCardFieldCount:r.additionalFieldCount,CustomStyleRuleCount:t.customStyleCount,TagColorRuleCount:t.tagColorRuleCount}},n._getCardFieldSettings=function(n){var i=n.getCardSettingsProvider(),r=i.getCardSettings(),u=o.BacklogConfigurationService.getBacklogFieldName(o.BacklogFieldTypes.Effort),t={type:"",showId:!1,showTag:!1,showEffort:!1,showAssignedTo:!1,showEmptyFields:!1,additionalFieldCount:0};return $.each(r.cards,function(n,i){t.type=n;$.each(i,function(n,i){var r=i[ti.CardSettings.FIELD_IDENTIFIER];r?ut.ignoreCaseComparer(r,gt.DatabaseCoreFieldRefName.Tags)===0?t.showTag=!0:ut.ignoreCaseComparer(r,gt.DatabaseCoreFieldRefName.AssignedTo)===0?t.showAssignedTo=!0:ut.ignoreCaseComparer(r,gt.DatabaseCoreFieldRefName.Id)===0?t.showId=!0:ut.ignoreCaseComparer(r,u)===0?t.showEffort=!0:ut.ignoreCaseComparer(r,gt.DatabaseCoreFieldRefName.Title)===0||t.additionalFieldCount++:i[ti.CardSettings.SHOW_EMPTY_FIELDS]==="true"&&(t.showEmptyFields=!0)})}),t},n._getCardStyleSettings=function(n){var i=n.getCardSettingsProvider(),r=0,u=0,f=0,e=0,o=0,t;return i&&(t=i.getCardSettings().styles,t&&$.each(t,function(n,t){ut.ignoreCaseComparer(t.type,"tagStyle")===0?(t.isEnabled&&e++,f++):(t.isEnabled&&u++,ut.ignoreCaseComparer(t.type,"fill")===0&&t.isEnabled&&o++,r++)})),{styleRuleCount:r,enabledStyleRuleCount:u,tagColorRuleCount:f,enabledTagColorRuleCount:e,customStyleCount:o}},n._getBoardTelemetryData=function(n,t){var i=n.rootNode().members(),c=0,f=0,l=0,e=0,o=0,a=!1,v=!1,y=!1,r=n.getBoardSettings(),s=r.rows||[],w,d,g;if(i.length>2){var h=null,p=i[1].childNode(),nt=p&&gt.ControlUtils.checkIfFieldReferenceNameIsForSwimlane(p.fieldName());nt?(w=i[1].childNode().members(),h=w[0].childNode().members()):h=i.filter(function(n){return n.isInProgress()});$.each(h,function(n,t){var i=t.totalGroupMemberCount;f=Math.max(f,i);l+=i;e++});e>0&&(c=Math.round(l/e))}$.each(r.columns,function(n,t){t.isSplit&&o++;t.itemLimit>0&&(v=!0);t.description&&(a=!0)});$.each(s,function(n,t){if(ut.isEmptyGuid(t.id)&&t.name)return y=!0,!1});var b=[],k=this._getCardFieldSettings(n),u=this._getCardStyleSettings(n);return b.push(k),d=n.isAutoBoardRefreshOn(),g={TotalColumnCount:r.columns.length,AverageItemCount:c,MaxItemCount:f,TotalLaneCount:s.length,HasLanes:s.length>1,HasDefinitionOfDone:a,HasWIPLimit:v,DefaultLaneHasName:y,HasSplitColumn:o>0,SplitColumnCount:o,StyleRuleCount:u.styleRuleCount,EnabledStyleRuleCount:u.enabledStyleRuleCount,TagColorRuleCount:u.tagColorRuleCount,EnabledTagColorRuleCount:u.enabledTagColorRuleCount,CompactionEnabled:k.showEmptyFields===!1,StaleCache:t,CardSettings:JSON.stringify(b),AutoRefreshEnabled:d,ExtensionId:r.extensionId},g},n.OnAddNewItem=function(t,i){var r=Date.now(),u={ItemType:t,ElapsedTime:r-i};this.publish(n.KANBAN_ADDNEWITEM,u)},n.OnColumnRenamedInline=function(t){var i=Date.now(),r=i-t,u={IsColumnNameChangedInline:!0,ElapsedTime:r};this.publish(n.KANBAN_UPDATE_COLUMN_SETTINGS,u)},n.OnLaneRenamedInline=function(t){var i=Date.now(),r=i-t,u={IsLaneNameChangedInline:!0,ElapsedTime:r};this.publish(n.KANBAN_UPDATE_LANE_SETTINGS,u)},n.OnColumnInlineRenameStart=function(){this.publish(n.KANBAN_UPDATE_COLUMN_SETTINGS,{ColumnInlineRenameStart:!0})},n.OnLaneInlineRenameStart=function(){this.publish(n.KANBAN_UPDATE_LANE_SETTINGS,{LaneInlineRenameStart:!0})},n.OnExpandCollapseColumn=function(t,i,r){var u={ColumnType:i,Collapsed:t,IsPageLoad:r};this.publish(n.KANBAN_COLLAPSECOLUMN,u)},n.OnFilter=function(t){var i={Action:"click",FilterArea:t};this.publish(n.KANBAN_FILTERSEARCH,i)},n.OnDragDrop=function(t,i){var r=Date.now(),u={IsColumnChanged:t.isColumnChanged,IsLaneChanged:t.isLaneChanged,ColumnStateChanged:t.columnStateChanged,DoingDoneStateChanged:t.doingDoneStateChanged,ElapsedTime:r-i,IsStakeholder:t.isStakeholder};this.publish(n.KANBAN_DRAG_DROP,u)},n.OnItemRemoved=function(t){(t===n.KANBAN_ITEM_REMOVED_MEMBERSHIP_CHANGED||t===n.KANBAN_ITEM_REMOVED_DELETED||t===n.KANBAN_ITEM_REMOVED_INVALID_NODE)&&this.publish(n.KANBAN_ITEM_REMOVED,{Reason:t})},n.OnTileEdit=function(t){var i=Date.now(),r={ElapsedTime:i-t};this.publish(n.KANBAN_TILE_EDIT,r)},n.OnCardStyleSettingUpdate=function(t){var i=new tt.TelemetryUtils.BoardFieldUsageData,r={};t.forEach(function(n,t){r[t]=n;n.criteria.clauses.forEach(function(n){switch(n.fieldName){case fi.CoreFieldRefNames.BoardColumn:i.column=!0;break;case fi.CoreFieldRefNames.BoardColumnDone:i.done=!0;break;case fi.CoreFieldRefNames.BoardLane:i.lane=!0}})});tt.TelemetryUtils.recordBoardFieldsUsageChange(pi.AgileCustomerIntelligenceArea.AGILE,n.KANBAN_CARDSTYLESETTINGSUPDATE,i)},n.recordChecklistTelemetry=function(t,i,r){n.publish(n.KANBAN_CHECKLIST,{ItemType:t,Action:i,SourceOfAction:r})},n.publish=function(t,i,r){r===void 0&&(r=!1);i.IsEmbedded=u.EmbeddedHelper.isEmbedded();si.publishEvent(new si.TelemetryEventData(n.CI_AREA_AGILE,t,i),r)},n.CI_AREA_AGILE="Agile",n.KANBAN_FILTERSEARCH="KanbanFilterSearch",n.KANBAN_FILTERINDEXING="KanbanFilterIndexing",n.KANBAN_PAGINGCOLUMNS="KanbanPagingColumns",n.KANBAN_DRAG_DROP="KanbanDragDrop",n.KANBAN_ITEM_REMOVED="KanbanItemRemoved",n.KANBAN_UPDATE_LANE_SETTINGS="UpdateKanbanLaneSettings",n.KANBAN_UPDATE_COLUMN_SETTINGS="UpdateKanbanColumnSettings",n.KANBAN_UPDATEBOARDSETTINGS="UpdateKanbanBoardSettings",n.KANBAN_REFRESHBOARD="KanbanBoardRefresh",n.KANBAN_ADDNEWITEM="KanbanAddNewItem",n.KANBAN_REORDER="KanbanReorder",n.KANBAN_DEFINITION_OF_DONE="KanbanDefinitionOfDone",n.KANBAN_COLLAPSECOLUMN="KanbanCollapseColumn",n.KANBAN_FILTER_PAGING_COMPLETE="KanbanFilterPagingComplete",n.KANBAN_TILE_EDIT="KanbanTileEdit",n.KANBAN_CARDSTYLESETTINGSUPDATE="CardStyleSettingsUpdate",n.KANBAN_CHECKLIST="KanbanChecklist",n.KANBAN_AUTOBOARDREFRESH_SETTING_ON="KanbanAutoBoardRefreshTurnedOn",n.KANBAN_AUTOBOARDREFRESH_SETTING_OFF="KanbanAutoBoardRefreshTurnedOff",n.KANBAN_CARD_CUSTOM_INFO="KanbanCardCustomInfo",n.KANBAN_COPY_BOARDBADGE_URL="KanbanCopyBoardBadgeUrl",n.KANBAN_COPY_BOARDBADGE_MARKDOWN="KanbanCopyBoardBadgeMarkdown",n.KANBAN_CUSTOMIZATION="KanbanCustomization",n.KANBAN_ADDNEWITEM_KEYBOARD_SHORTCUT="KanbanAddNewItemKeyboardShortcut",n.KANBAN_SELECTFIRSTTILE_KEYBOARD_SHORTCUT="KanbanSelectFirstTileKeyboardShortcut",n.KANBAN_ADDCHILD_KEYBOARD_SHORTCUT="KanbanAddChildItemKeyboardShortcut",n.KANBAN_OPENTILE_KEYBOARD_SHORTCUT="KanbanOpenTileKeyboardShortcut",n.KANBAN_EXPANDTILE_KEYBOARD_SHORTCUT="KanbanExpandTileKeyboardShortcut",n.KANBAN_RENAMETILE_KEYBOARD_SHORTCUT="KanbanRenameTileKeyboardShortcut",n.KANBAN_NEWITEM_KEYBOARD_SHORTCUT="KanbanNewItemTileKeyboardShortcut",n.KANBAN_EXPANDSWIMLANES_KEYBOARD_SHORTCUT="KanbanExpandSwimlanesKeyboardShortcut",n.KANBAN_COLLAPSESWIMLANES_KEYBOARD_SHORTCUT="KanbanCollapseSwimlanesKeyboardShortcut",n.KANBAN_MOVETILEUP_KEYBOARD_SHORTCUT="KanbanMoveTileUpKeyboardShortcut",n.KANBAN_MOVETILEDOWN_KEYBOARD_SHORTCUT="KanbanMoveTileDownKeyboardShortcut",n.KANBAN_MOVETILELEFT_KEYBOARD_SHORTCUT="KanbanMoveTileLeftKeyboardShortcut",n.KANBAN_MOVETILERIGHT_KEYBOARD_SHORTCUT="KanbanMoveTileRightKeyboardShortcut",n.KANBAN_MOVETILETOPOFCOLUMN_KEYBOARD_SHORTCUT="KanbanMoveTileTopOfColumnKeyboardShortcut",n.KANBAN_MOVETILEBOTTOMOFCOLUMN_KEYBOARD_SHORTCUT="KanbanMoveTileBottomOfColumnKeyboardShortcut",n.KANBAN_SELECTSWIMLANEABOVE_KEYBOARD_SHORTCUT="KanbanSelectSwimLaneAboveKeyboardShortcut",n.KANBAN_SELECTSWIMLANEBELOW_KEYBOARD_SHORTCUT="KanbanSelectSwimLaneBelowKeyboardShortcut",n.KANBAN_LAUNCHFILTER_KEYBOARD_SHORTCUT="KanbanLaunchFilterKeyboardShortcut",n.Perf_Scenario_KanbanBoard_Load="KanbanBoardPerf_LoadBoard",n.Perf_Split_BoardDrawBegin="BoardDrawBegin",n.Perf_Split_ItemSourceRetrieved="ItemSourceRetrieved",n.Perf_Split_BoardDrawComplete="BoardDrawComplete",n.Perf_Scenario_DrawBoard="KanbanBoardPerf_DrawBoard",n.Perf_Split_PreUpdateLayout="PreUpdateLayout",n.Perf_Split_PreSetBoard="PreSetBoard",n.Perf_Scenario_SaveCard="KanbanBoardPerf_SaveCard",n.Perf_Scenario_OpenCard="KanbanBoardPerf_OpenCard",n.Perf_Split_LoadWITControlsStart="LoadWITControlsStart",n.Perf_Split_LoadWITControlsEnd="LoadWITControlsEnd",n.Perf_Scenario_PlaceTiles="KanbanBoardPerf_PlaceTiles",n.Perf_Split_BeginPopulateSuccess="BeginPopulateSuccess",n.Perf_Split_UpdateItemsStart="UpdateItemsStart",n.Perf_Split_UpdateItemsEnd="UpdateItemsEnd",n.Perf_Scenario_CriteriaFilterTiles="KanbanBoardPerf_CriteriaFilterTiles",n.Perf_Split_PreCriteriaFilter="ActualCriteriaFilteringStart",n.Perf_Split_PostCriteriaFilter="ActualCriteriaFilteringEnd",n.Perf_Scenario_UpdateSwimlaneHeaders="KanbanBoardPerf_UpdateSwimlaneHeaders",n.Perf_Scenario_AnnotationsSummaryRendering="KanbanBoardPerf_AnnotationsSummary_Rendered",n.KANBAN_ITEM_REMOVED_DELETED="KanbanItemRemoved_Deleted",n.KANBAN_ITEM_REMOVED_INVALID_NODE="KanbanItemRemoved_InvalidNode",n.KANBAN_ITEM_REMOVED_MEMBERSHIP_CHANGED="KanbanItemRemoved_MembershipChanged",n}();t.KanbanTelemetry=nr;wr=function(){function n(){}return n.getTitleValidationErrors=function(n,t){var i="";return n&&(n=n.trim()),n&&ut.localeComparer(n,"")!==0?n.length>255?i=st.CustomizeColumns_LongColumnName:ut.containsControlChars(n)||ut.containsMismatchedSurrogateChars(n)?i=st.CustomizeColumnsInvalidCharactersColumnName:lr.isTitleDuplicate(n,t)&&(i=st.CustomizeColumnsDuplicateColumnName):i=st.CustomizeColumnsEmptyColumnName,i},n}();t.BoardColumnValidator=wr;br=function(){function n(){}return n.getTitleValidationErrors=function(n,t,i){var r="",u;return n=n.trim(),u=ut.localeComparer(n,"")===0,i&&(!i||u)||(u?r=st.Swimlane_Settings_EmptyLaneName:n.length>255?r=st.Swimlane_Settings_LongLaneName:ut.containsControlChars(n)||ut.containsMismatchedSurrogateChars(n)?r=st.Swimlane_Settings_InvalidCharactersLaneName:lr.isTitleDuplicate(n,t)&&(r=st.Swimlane_Settings_DuplicateLaneName)),r},n}();t.BoardRowValidator=br;lr=function(){function n(){}return n.isTitleDuplicate=function(n,t){var i=!1;return $.each(t,function(t,r){if(ut.equals(n,r.name,!0))return i=!0,!1}),i},n}();t.BoardValidator=lr;ar=function(){function n(){this._tfsConnection=new at.VssConnection(rr.contextData);this._workHttpClient=this._tfsConnection.getHttpClient(ci.WorkHttpClient);var n=kt.BacklogContext.getInstance();this._teamContext={projectId:rr.contextData.project.id,teamId:n.team.id}}return n.prototype.beginUpdateColumns=function(n,t){return this._workHttpClient.updateBoardColumns(n,this._teamContext,t)},n.prototype.beginUpdateRows=function(n,t){var i=hi.defer();return this._workHttpClient.updateBoardRows(n,this._teamContext,t).then(function(n){i.resolve(n)},function(n){if(n.serverError.customProperties&&n.serverError.customProperties.InputWithError){var t=n.serverError.customProperties.InputWithError;ut.localeIgnoreCaseComparer(n.serverError.typeKey,"BoardValidatorInvalidCharException")===0?n.message=ut.format(st.BoardValidator_LaneNameContainsInvalidChar,t):ut.localeIgnoreCaseComparer(n.serverError.typeKey,"BoardValidatorRowNameLengthInvalidException")===0?n.message=ut.format(st.BoardValidator_LaneNameLengthInvalid,t):ut.localeIgnoreCaseComparer(n.serverError.typeKey,"BoardValidatorDuplicateRowNameException")===0&&(n.message=ut.format(st.BoardValidator_MustNotHaveDuplicateLaneName,t))}else ut.localeIgnoreCaseComparer(n.serverError.typeKey,"BoardValidatorRowCountInvalidException")===0?n.message=st.BoardValidator_LaneCountInvalid:ut.localeIgnoreCaseComparer(n.serverError.typeKey,"DeletedBoardRowIsNotEmptyException")===0&&(n.message=st.BoardValidator_DeletedLaneHasItems);i.reject(n)}),i.promise},n}();t.BoardSettingsManager=ar;kr=function(){function n(n,t,i){var r=this;this.itemTypeNames=n;this.boardMember=t;this.filterableFieldNamesByItemType=i;this.getDataSourceName=function(){return"Kanban"};this.getVisibleFields=function(){return r.visibleFieldReferenceNames};this.visibleFieldReferenceNames=this.getVisibleFieldReferenceNames()}return n.prototype.getVisibleFieldReferenceNames=function(){for(var r,n=[],t=0,i=this.itemTypeNames;t<i.length;t++)r=i[t],n.push.apply(n,this.filterableFieldNamesByItemType[r]);return et.unique(n.filter(function(n){return!!n}),ut.ignoreCaseComparer)},n.prototype.getItemCount=function(){return this.boardMember.items().length},n.prototype.getIds=function(){return this.boardMember.items().map(function(n){return n.id()})},n.prototype.getValue=function(n,t){var i=this.boardMember.item(n),u,f,o,e;return i&&t===or.Parent&&(u=i.fieldValue(t),f=r.BoardParentDataProvider.getInstance(),u&&f&&(o=Number(u),e=f.getCached(o),e))?e.title:i&&i.fieldValue(t)},n.prototype.getUniqueValues=function(){throw new Error("Not implemented");},n}();t.BoardMemberFilterDataSource=kr});

define("Presentation/Scripts/TFS/FeatureRef/PendingOperationHelper",["require","exports","VSS/Events/Document","VSS/Diag"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.PendingOperationHelper=void 0;var u;(function(n){function t(){this._isInit||(i.getRunningDocumentsTable().add("PendingOperationHelper",this),this._isInit=!0)}function u(){this._operationsCounter=0;this._operations={};this._isInit=!1}function f(n){this._init();this._operations.hasOwnProperty(n)?this._operations[n]=this._operations[n]+1:(this._operations[n]=1,this._operationsCounter+=1)}function e(n){var t;this._operations.hasOwnProperty(n)&&(t=this._operations[n],t>1?this._operations[n]=t-1:this.clearOperation(n))}function o(n){this._operations.hasOwnProperty(n)&&(delete this._operations[n],this._operationsCounter-=1)}function s(){return this._operationsCounter>0}n._operationsCounter=0;n._operations={};n._isInit=!1;n._init=t;n.reset=u;n.addOperation=f;n.removeOperation=e;n.clearOperation=o;n.isDirty=s})(u=t.PendingOperationHelper||(t.PendingOperationHelper={}))});

define("Presentation/Scripts/TFS/FeatureRef/RowSavingManager",["require","exports","VSS/Diag","VSS/Utils/Core","VSS/VSS","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","Presentation/Scripts/TFS/FeatureRef/PendingOperationHelper","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/LoaderPlugins/Css!Presentation/FeatureRef/RowSavingManager"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.RowSavingManager=void 0;var h=function(){function n(n,t,u){this._grid=n;this._idToDataIndex=t;this._dataIndexToId=u;this._savingRows={};this._disabledRows={};this._delayedSaveRows={};this._callsForRowDisableMap={};this._grid.enableEvent("rowupdated");this._grid.getElement().bind("rowupdated",r.delegate(this,this._updateRowHandler))}return n.prototype.isRowSaving=function(n){return n in this._savingRows||n in this._callsForRowDisableMap||n in this._disabledRows},n.prototype.changeId=function(n,t){var r,u=n.toString(10);this._savingRows.hasOwnProperty(u)&&(r=this._savingRows[n],delete this._savingRows[n],this._savingRows[t]=r);this._delayedSaveRows.hasOwnProperty(u)&&(delete this._delayedSaveRows[n],this._delayedSaveRows[t]=t);e.PendingOperationHelper.clearOperation(n.toString());e.PendingOperationHelper.addOperation(t.toString())},n.prototype.markRowAsProcessing=function(n,t){this._disableRow(n,t,!1)},n.prototype.clearRowProcessing=function(n){this._enableRow(n,!1)},n.prototype.markRowAsSaving=function(n,t){this._disableRow(n,t,!0)},n.prototype.clearRowSaving=function(n){this._enableRow(n,!0)},n.prototype._disableRow=function(n,t,r){var u,f;for(t=t||[],r===!0?this._savingRows[n]=t:this._disabledRows[n]=t,u=0,f=t.length;u<f;u++)this._incrementDisableCalls(t[u]),this._updateRow(t[u]);this._updateRow(n);r===!0&&e.PendingOperationHelper.addOperation(n.toString())},n.prototype._enableRow=function(n,t){var r,f,u;if(u=t===!0?this._savingRows[n]:this._disabledRows[n],typeof u!="undefined"){for(t===!0?delete this._savingRows[n]:delete this._disabledRows[n],r=0,f=u.length;r<f;r++)this._decrementDisableCalls(u[r]),this._updateRow(u[r]);this._updateRow(n)}t===!0&&e.PendingOperationHelper.clearOperation(n.toString())},n.prototype._updateRowHandler=function(n,t){var r=this._dataIndexToId(t.dataIndex);typeof r!="undefined"&&this._updateRow(r,t)},n.prototype._updateRow=function(t,u){var c;if(!u){if(c=this._idToDataIndex(t),typeof c=="undefined")return;u=this._grid.getRowInfo(c)}if(u){var l=u.row,e=u.gutterRow,a=function(t){if(t===void 0&&(t=!1),l.toggleClass(n.SAVING_ROW_CLASS,t),o.FeatureAvailabilityService.isFeatureEnabled(s.FeatureAvailabilityFlags.WebAccessAgileBacklogOneClickOpen)){var i=l.find("a");i.attr("tabindex",t?0:-1);i.toggleClass("disabled",t)}},h=t.toString(10);this._savingRows.hasOwnProperty(h)||this._disabledRows.hasOwnProperty(h)?(a(),this._delayedSaveRows.hasOwnProperty(h)?e&&(e.addClass(n.SAVING_GUTTER_CLASS),e.attr("title",this._savingRows.hasOwnProperty(h)?f.Saving:"")):r.delay(this,500,function(){(this._savingRows.hasOwnProperty(h)||this._disabledRows.hasOwnProperty(t))&&!this._delayedSaveRows.hasOwnProperty(h)&&(this._delayedSaveRows[t]=t,this._updateRow(t))})):this._callsForRowDisableMap.hasOwnProperty(h)?a():(l.hasClass(n.SAVING_ROW_CLASS)&&a(!0),e&&(e.hasClass(n.SAVING_GUTTER_CLASS)&&e.removeClass(n.SAVING_GUTTER_CLASS),e.attr("title","")),this._delayedSaveRows[t]&&delete this._delayedSaveRows[t])}},n.prototype.updateIdToDataIndex=function(n){this._idToDataIndex=n},n.prototype._incrementDisableCalls=function(n){var t=this._callsForRowDisableMap[n]||0;t++;this._callsForRowDisableMap[n]=t},n.prototype._decrementDisableCalls=function(n){var t=this._callsForRowDisableMap[n]||0;t--;t<=0?delete this._callsForRowDisableMap[n]:this._callsForRowDisableMap[n]=t},n.SAVING_ROW_CLASS="saving-row",n.SAVING_GUTTER_CLASS="saving-row-gutter",n}();t.RowSavingManager=h;u.initClassPrototype(h,{_grid:null,_idToDataIndex:null,_dataIndexToId:null,_savingRows:null,_disabledRows:null,_delayedSaveRows:null,_callsForRowDisableMap:null})});

define("VSS/Utils/Clipboard",["require","exports","VSS/VSS"],function(n,t,i){function r(n,t){var u=!1,r,f,i;if(t||window.clipboardData===undefined){i=$("<div/>");try{i.css("background-color","inherit");t?i.append(n):(i.css("white-space","pre"),i.text(n));document.body.createTextRange?(i.prependTo($("body")),r=document.body.createTextRange(),r.moveToElementText(i[0]),r.select(),u=r.execCommand("copy")):document.createRange&&window.getSelection&&(i.appendTo($("body")),r=document.createRange(),f=window.getSelection(),f.removeAllRanges(),r.selectNodeContents(i[0]),f.addRange(r),u=document.execCommand("copy"))}finally{i.remove()}}else window.clipboardData.setData(o,n),u=!0;return u}function u(n,t){var r;t&&t.copyDialogOptions?(r=t.copyDialogOptions,r.data=n,r.copyAsHtml=t.copyAsHtml):(r={data:n},t&&(r.copyAsHtml=t.copyAsHtml));i.using(["VSS/Controls/Dialogs"],function(n){n.show(n.CopyContentDialog,r)})}function s(n,t){if(n&&typeof n=="string")if(t&&t.showCopyDialog)u(n,t);else{var i=!1;if(t&&t.copyAsHtml){if(e())try{i=r(n,!0)}catch(o){}}else if(f())try{i=r(n,!1)}catch(o){}i||u(n,t)}}function f(){return document.queryCommandSupported("copy")||window.clipboardData!==undefined}function e(){return document.body.createTextRange!==undefined||document.queryCommandSupported("copy")&&document.createRange!==undefined}Object.defineProperty(t,"__esModule",{value:!0});t.supportsNativeHtmlCopy=t.supportsNativeCopy=t.copyToClipboard=void 0;var o="text";t.copyToClipboard=s;t.supportsNativeCopy=f;t.supportsNativeHtmlCopy=e});

define("VSS/Utils/HtmlTableFormatter",["require","exports","VSS/Utils/String"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.HtmlTableFormatter=void 0;var r=function(){function n(n,t,i){this._rows=n;this._columns=t;this._options=i}return n.prototype._getCellValue=function(n,t){return this._rows[n][t.index]},n.prototype._getSafeCellValue=function(n,t){var r=this._getCellValue(n,t),u=t.isValueHtml?r:i.htmlEncode(r);return u===""?"&nbsp;":u},n.prototype.getHtml=function(){var t=this;if(this._rows.length===0||this._columns.length===0)return"<div><\/div>";var r=this._columns.map(function(t){return'<th style="'.concat(n.COLUMN_STYLE,'">').concat(i.htmlEncode(t.name),"<\/th>")}),u='<thead style="'.concat(n.HEADER_STYLE,'"><tr>').concat(r.join(i.empty),"<\/tr><\/thead>"),f=this._rows.map(function(r,u){var f=t._columns.map(function(i){return'<td style="'.concat(n.COLUMN_STYLE,'">').concat(t._getSafeCellValue(u,i),"<\/td>")}),e=u%2?n.ROW_ALT_BACKGROUND_COLOR:n.ROW_BACKGROUND_COLOR;return'<tr style="'.concat(e,'">').concat(f.join(i.empty),"<\/tr>")}),e='<tbody style="'.concat(n.FONT_COLOR,'">').concat(f.join(i.empty),"<\/tbody>"),o=this._options&&this._options.extendedHtml?'<div style="'.concat(n.FONT_FAMILY+n.FONT_SIZE,'">').concat(this._options.extendedHtml,"<\/div>"):i.empty;return'<div><table border="0" cellpadding="0" cellspacing="0" style="'.concat(n.TABLE_STYLE,'">').concat(u).concat(e,"<\/table>").concat(o,"<\/div>")},n.HEADER_BACKGROUND_COLOR="background-color: #106EBE;",n.HEADER_COLOR="color: white;",n.FONT_SIZE="font-size: 11pt;",n.FONT_FAMILY="font-family: Calibri, sans-serif;",n.FONT_COLOR="color: inherit;",n.BORDER_COLLAPSE="border-collapse: collapse;",n.COLUMN_BORDER="border: 1px solid white;",n.COLUMN_VERTICAL_ALIGN="vertical-align: top;",n.COLUMN_PADDING="padding: 1.45pt .05in;",n.ROW_BACKGROUND_COLOR="",n.ROW_ALT_BACKGROUND_COLOR="background-color: rgb(124, 124, 124, 0.5)",n.COLUMN_STYLE=n.COLUMN_BORDER+n.COLUMN_VERTICAL_ALIGN+n.COLUMN_PADDING,n.HEADER_STYLE=n.HEADER_BACKGROUND_COLOR+n.HEADER_COLOR,n.TABLE_STYLE=n.FONT_FAMILY+n.FONT_SIZE+n.FONT_COLOR+n.BORDER_COLLAPSE,n}();t.HtmlTableFormatter=r});

define("VSS/Controls/Grids",["require","exports","VSS/Contributions/Services","VSS/Controls","VSS/Diag","VSS/Events/Action","VSS/Controls/Menus","VSS/Controls/PopupContent","VSS/Resources/VSS.Resources.Platform","VSS/Search","VSS/Service","VSS/Controls/StatusIndicator","VSS/Utils/Clipboard","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","VSS/Utils/HtmlTableFormatter","jQueryUI/droppable","jQueryUI/mouse","VSS/Utils/Draggable","VSS/Utils/TouchPunch","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){function st(n,t,i,r,u){for(var f;n<t;)u[n]=i,f=Math.abs(r[n++])+n,f>n&&(st(n,f,i+1,r,u),n=f)}var rt,ht,g,nt,ut,ct,ft,lt;Object.defineProperty(t,"__esModule",{value:!0});t.HtmlTableFormatter=t.TabDelimitedTableFormatter=t.GridSearchAdapter=t.ListView=t.Grid=t.GridO=t.GridHierarchySource=t.GridDefaultSource=void 0;var tt=u.log,it=u.LogVerbosity.Verbose,d=v.delegate,k=p.domElem,et=10,ot;rt=function(){function n(n){this.update(n)}return n.prototype.update=function(n){this._updateSource(n);this.grid&&this.grid.setDataSource(this)},n.prototype.getSource=function(){return this._source},n.prototype.getExpandStates=function(){return null},n.prototype._updateSource=function(n){this._source=n||[]},n}();t.GridDefaultSource=rt;ht=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.getExpandStates=function(){return this._expandStates},t.prototype._updateSource=function(n){this._source=[];this._expandStates=[];this._prepareItems(n||[])},t.prototype._prepareItems=function(n){for(var t,o,s,f,i=0,r=this._expandStates,u=0,e=n;u<e.length;u++)t=e[u],i+=1,this._source.push($.isArray(t.values)?t.values:t),o=r.length,r.push(0),s=$.isArray(t.children)&&t.children.length>0,s&&(f=this._prepareItems(t.children),r[o]=f*(t.collapsed===!0?-1:1),i+=f);return i},t}(rt);t.GridHierarchySource=ht;g=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._showingContextMenu=!1,i._contextMenuKeyPressedState=2,i._isAboveFirstOrBelowLastRow=!1,i._focusStateData={rowActionList:{},headerActionList:[],currentActionIndex:-1,currentHeaderActionIndex:-1},i._focusedElement=null,i._rows={},i._columns=[],i._sortOrder=[],i}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({autoSort:!0,payloadSize:t.PAYLOAD_SIZE,extendViewportBy:3,gutter:{contextMenu:null,icon:!1,checkbox:!1},header:!0,allowMoveColumns:!0,draggable:null,droppable:null,asyncInit:!0,sharedMeasurements:!0,coreCssClass:"grid"},i));this._options.contextMenu&&(this._options.contextMenu.useBowtieStyle=!this._options.useLegacyStyle)},t.prototype.getSelectionCount=function(){return this._selectionCount},t.prototype._enhance=function(t){n.prototype._enhance.call(this,t);this._buildDom()},t.prototype.initialize=function(){var t,r;n.prototype.initialize.call(this);this._getMode()!=="listbox"&&this.getElement().attr("aria-readonly","true");this._contentSize={width:300,height:400};this._takeMeasurements();t=this._options;t.ariaLabel&&this.getElement().attr("aria-label",t.ariaLabel);t.asyncInit?v.delay(this,10,function(){this.isDisposed()||this._attachEvents()}):this._attachEvents();r=t.contextMenu;r&&typeof r.columnIndex=="undefined"&&(this._automaticContextMenuColumn=!0);this.initializeDataSource(t.suppressRedraw);r&&r.contributionIds&&c.getService(i.ExtensionService).getContributionsForTargets(r.contributionIds);u.logTracePoint("Grid.initialize.complete")},t.prototype.getDraggingRowInfo=function(){return this._draggingRowInfo},t.prototype._getDragOverRows=function(){return this._ddRowOverStatus},t.prototype._getAcceptStatus=function(n){return this._droppable.accept||this._droppable.acceptSelector?this._ddRowAcceptStatus[n]:!0},t.prototype._resetRowAcceptStatus=function(){this._ddRowAcceptStatus={}},t.prototype._rowDropTryActivate=function(n,t,i){var r=this._rowDropAccept(n,i.draggable);return r&&this._rowDropActivate(n,t,i),r},t.prototype._rowIntersect=function(n,t){var f=this._rows[t.dataIndex],i,r,u;return f?(i=f.row,r=i.offset(),r.top-=this._rowOffsetHeight||0,u=this._calculateIntersectPosition(n),$.ui.intersect(n,{offset:r,proportions:function(){return{width:i[0].offsetWidth,height:i[0].offsetHeight}}},this._droppable.tolerance,{pageY:u.pageY,pageX:u.pageX})):!1},t.prototype._calculateIntersectPosition=function(n){var t,i;return(n.positionAbs||n.position)&&(n.clickOffset||n.offset)&&(t=(n.positionAbs||n.position.absolute).top+(n.clickOffset||n.offset.click).top,i=(n.positionAbs||n.position.absolute).left+(n.clickOffset||n.offset.click).left),{pageY:t,pageX:i}},t.prototype.initializeDataSource=function(n){var t;if(this._resetScroll){this._ignoreScroll=!0;try{t=this._canvas[0];t.scrollTop=0;t.scrollLeft=0;this._scrollLeft=0;this._scrollTop=0;this._resetScroll=!1}finally{this._ignoreScroll=!1}}this.setDataSource(this._options.source,this._options.expandStates,this._options.columns,this._options.sortOrder,undefined,n);n||(this._expandedCount>0?this._options.keepSelection&&this._selectedIndex>=0?this._selectRow(Math.min(this._selectedIndex,this._expandedCount-1)):this.selectInitialRow():this.setSelectedRowIndex(-1))},t.prototype.selectInitialRow=function(){this._selectRow(this._options.initialSelection!==!1?0:-1)},t.prototype.setDataSource=function(n,t,i,r,f,e){function y(){a.isDisposed()?u.logWarning("Layout called (in setDataSource) after grid was disposed."):(a.layout(),a._ensureSelectedIndex(f))}var o,h,l,s,a=this,c;if(n&&!$.isArray(n)&&(c=n,c.grid=this,n=c.getSource(),t=c.getExpandStates()),this._dataSource=n||[],this._count=l=this._dataSource.length,t?(this._expandStates=t,this._indentLevels=[],st(0,l,1,t,this._indentLevels)):(this._indentLevels=null,this._expandStates=null),this._expandedCount=l,this._updateRanges(),i)for(this._columns=[],o=0,h=i.length;o<h;o++)s=i[o],this._setColumnInfo(s,o),this._columns.push(s);if(r)for(this._sortOrder=[],o=0,h=r.length;o<h;o++)s=r[o],s.order!=="desc"&&(s.order="asc"),this._sortOrder.push(s);this._options.autoSort&&this._sortOrder.length>0&&this._trySorting(this._sortOrder);this._clearSelection();this._determineIndentIndex();e||(this._options.asyncInit?v.delay(this,0,y):y())},t.prototype._setColumnInfo=function(n,t){n.index=typeof n.index!="undefined"?n.index:t;n.canSortBy=n.canSortBy!==!1;n.canMove=n.canMove!==!1;n.width=typeof n.width!="undefined"?n.width:100;n.getCellContents=n.getCellContents||this._drawCell;n.getHeaderCellContents=n.getHeaderCellContents||this._drawHeaderCellValue;n.getColumnValue=n.getColumnValue||this.getColumnValue},t.prototype.getRowInfo=function(n){return this._rows[n]},t.prototype.getRowData=function(n){return this._dataSource[n]},t.prototype.getColumns=function(){return this._columns||[]},t.prototype.getSortOrder=function(){return this._sortOrder||[]},t.prototype.setColumnOptions=function(n,t){for(var r=this._columns,i=0,f=r.length;i<f;i++)if(r[i].name===n){r[i]=$.extend(r[i],t);break}},t.prototype._getDataIndex=function(n){var t,u,r=-1,f=this._visibleRange,i;if(n<0)return-1;for(t=0,u=f.length;t<u;t++)if(i=f[t],r+=i[1]-i[0]+1,n<=r)return i[1]-r+n;return n},t.prototype._getRowIndex=function(n){for(var r=0,f=this._visibleRange,t,i=0,u=f.length;i<u;i++){if(t=f[i],n>=t[0]){if(n<=t[1])return r+n-t[0]}else break;r+=t[1]-t[0]+1}return-Math.max(0,r-1)},t.prototype.expandNode=function(n){var t,i;this._expandStates&&(t=this._expandStates[n],t<0&&(this._expandStates[n]=-t,this._updateRanges(),i=this._rows[n],i&&(i.dirty=!0)))},t.prototype.collapseNode=function(n){var t,i;this._expandStates&&(t=this._expandStates[n],t>0&&(this._expandStates[n]=-t,this._updateRanges(),i=this._rows[n],i&&(i.dirty=!0)))},t.prototype.expandAllNodes=function(){return this._updateExpansionStates(!0,Number.MAX_VALUE)},t.prototype.collapseAllNodes=function(){return this._updateExpansionStates(!1,Number.MAX_VALUE)},t.prototype.expandAll=function(){u.logTracePoint("Grid.expandAll.start");this._updateExpansionStateAndRedraw(!0,Number.MAX_VALUE);u.logTracePoint("Grid.expandAll.complete")},t.prototype.collapseAll=function(){u.logTracePoint("Grid.collapseAll.start");this._updateExpansionStateAndRedraw(!1,Number.MAX_VALUE);u.logTracePoint("Grid.collapseAll.complete")},t.prototype.expandByLevel=function(n){this._updateExpansionStateAndRedraw(!0,n)},t.prototype.collapseByLevel=function(n){this._updateExpansionStateAndRedraw(!1,n)},t.prototype.tryToggle=function(n,t,i){var r,f,u,e;if(!this._expandStates||this._selectedIndex<0||this._expandedCount<=0||(r=i!==undefined&&i>-1?i:this._getDataIndex(this._selectedIndex),e=this._rows[r],!e))return!1;if(t){if(n){if(u=!0,!this.expandAllNodes())return!1}else if(u=!1,!this.collapseAllNodes())return!1;return this._raiseToggleEvent(e,u),this._clearSelection(),this._addSelection(Math.abs(this._getRowIndex(r))),this._layoutContentSpacer(),this._redraw(),!0}if(f=this._expandStates[r],f!==0){if(n)if(u=!0,f<0)this.expandNode(r);else return!1;else if(u=!1,f>0)this.collapseNode(r);else return!1;return this._raiseToggleEvent(e,u),this._clearSelection(),this._addSelection(this._getRowIndex(r)),this._layoutContentSpacer(),this._redraw(),!0}return!1},t.prototype._getVisibleRowIndices=function(){var n=this._scrollTop,r=n+this._canvasHeight,t=this._expandedCount-1,i=this._rowHeight;return{first:Math.min(t,Math.max(0,Math.ceil(n/i))),last:Math.min(t,Math.floor(r/i)-1)}},t.prototype._getRowIntoView=function(n,t){var e,i,o,f,r;return(u.logTracePoint("TFS.UI.Controls.Grids._getRowIntoView.start"),t)?(r=Math.max(0,Math.min(n||0,this._expandedCount-1))*this._rowHeight,this._canvas[0].scrollTop=r,this._scrollTop=r,!0):(e=this._getVisibleRowIndices(),i=e.first,o=e.last,f=o-i,n<i||n>o)?(i=this._selectedIndex>i?Math.max(n-f,0):Math.max(0,Math.min(n+f,this._expandedCount-1)-f),r=i*this._rowHeight,this._canvas[0].scrollTop=r,this._scrollTop=r,!0):!1},t.prototype.getSelectedRowIntoView=function(n){return this._getRowIntoView(this._selectedIndex,n)},t.prototype.cacheRows=function(){},t.prototype._drawRowsInternal=function(n,t){function ot(n){n.hover(function(){n.addClass("grid-row-hover")},function(){n.removeClass("grid-row-hover")})}var a,nt,y,s=this._rows,i,o,r,tt={},p=this._expandStates,it=0,f=this._indentLevels,rt=0,w=this._gutter,ct=this._canvas[0],et,v,b,h,d,g,ut=this._getMode(),ft=1+(this._options.header?1:0),e,u,l;for(d=document.createDocumentFragment(),w&&(et=this._gutter[0],g=document.createDocumentFragment()),this._rows=tt,a=0,nt=n.length;a<nt;a++){if(y=n[a],o=y[0],r=y[1],i=s[r],i)h=i.rowIndex!==o,h?i.rowIndex=o:(h=i.dirty,delete i.dirty),t&&(h=!0),delete s[r];else{if(h=!0,i={rowIndex:o,dataIndex:r},v=k("div","grid-row grid-row-normal"),v.id="row_"+this.getId()+"_"+r,d.appendChild(v),e=$(v),e.attr("role",this._getRole("row")),ut==="treegrid"&&p&&f){var c=f[r],st=0,ht=0;for(u=r-1;u>=0;u--)if(f[u]<c)break;else f[u]===c&&st++;for(u=r+1;u<f.length;u++)if(f[u]<c)break;else f[u]===c&&ht++;e.attr({"aria-level":c})}else ut==="listbox"?e.attr({"aria-posinset":o+ft,"aria-setsize":s.length}):e.attr("aria-rowindex",o+ft);i.row=e.data("grid-row-info",i);l=null;w&&(b=k("div","grid-gutter-row grid-gutter-row-normal"),g.appendChild(b),l=$(b),i.gutterRow=l.data("grid-row-info",i));!this._options.useLegacyStyle&&l?(this.setupFullRowHover(e),this.setupFullRowHover(l)):ot(e)}tt[r]=i;h&&(p&&(it=p[r],rt=f[r]),this._updateRow(i,o,r,it,rt))}for(r in s)s.hasOwnProperty(r)&&(i=s[r],i.row.remove(),w&&i.gutterRow.remove());return this._droppable&&this._droppable.rowOffsetPercentage&&this._rows[0]&&!this._rowOffsetHeight&&(this._rowOffsetHeight=this._rows[0].row.height()*this._droppable.rowOffsetPercentage/100),{rowsFragment:d,gutterFragment:g}},t.prototype.setupFullRowHover=function(n){function t(n,t){var i=n.data("grid-row-info");i&&(i.row&&i.row.toggleClass("grid-row-hover",t),i.gutterRow&&i.gutterRow.toggleClass("grid-row-hover",t))}n.hover(function(){t(n,!0)},function(){t(n,!1)})},t.prototype._drawRows=function(n,t){var r=this._drawRowsInternal(n,t),i=this._canvas[0];i.appendChild(r.rowsFragment);r.gutterFragment&&this._gutter[0].appendChild(r.gutterFragment);$(i).find(".grid-row .grid-cell :tabbable, .grid-row .grid-cell [data-tabbable=1]").each(function(n,t){var i=$(t);i.attr("tabindex","-1")});this._count>0?i.classList.remove("no-rows"):i.classList.add("no-rows")},t.prototype.updateRow=function(n,t,i){var r,u=0,f=0;typeof t=="undefined"||t<0?t=this._getDataIndex(n):(typeof n=="undefined"||n<0)&&(n=this._getRowIndex(t));r=this._rows[t];r&&(this._expandStates&&(u=this._expandStates[t],f=this._indentLevels[t]),this._updateRow(r,n,t,u,f,i))},t.prototype._updateRow=function(n,i,r,u,f,e){var l,o,g,c,nt,b,a,tt,st,ht,v,ct,s,it,y,d,rt,ut,ft,w,h,et,ot;for(ht=this._indentIndex,this._gutter&&(o=this._options.gutter,g=n.gutterRow,c=g[0],c.style.top=i*this._rowHeight+"px",c.style.left="0px",c.style.width=this._gutterWidth+"px",c.style.height=this._rowHeight+"px",o.contextMenu&&(it="grid-gutter-cell grid-gutter-menu",this._options.useLegacyStyle&&this._rowHasContextMenu(r)&&(it+=" grid-gutter-drop bowtie-icon bowtie-triangle-down"),nt=k("div",it),$(nt).css("line-height",this._rowHeight+"px"),g.append(nt)),o.checkbox&&(st=$(k("input","checkbox "+(o.checkbox.cssClass||""))).attr("type","checkbox"),tt=k("div","grid-gutter-cell grid-gutter-checkbox"),tt.appendChild(st[0]),c.appendChild(tt)),o.icon&&(a="grid-gutter-cell grid-gutter-icon ",typeof o.icon.cssClass!="undefined"&&(a+=o.icon.cssClass+" "),typeof o.icon.index!="undefined"&&(a+=(this.getColumnValue(r,o.icon.index,-1)||"")+" "),$.isFunction(o.icon.getIconClass)&&(a+=(o.icon.getIconClass(this._dataSource[r])||"")+" "),o.icon.ownerDraw!==!1&&(a+=this._getGutterIconClass(i,r,u,f)||""),b=k("div",a),$(b).css("line-height",this._rowHeight+"px"),o.icon.tooltipIndex&&(y=this.getColumnValue(r,o.icon.tooltipIndex,-1),$.isFunction(y)&&(y=y()),$(b).attr("title",y)),c.appendChild(b)),this._drawGutterCell(n,i,r,u,f)),d=!!e,l=this._updateRowSize(i,n.row,d),u>0?$(l).attr("aria-expanded","true"):u<0&&$(l).attr("aria-expanded","false"),rt=this._columns,w=0,v=0,ct=rt.length;v<ct;++v)(h=rt[v],h.hidden)||(w+=(h.width||20)+this._cellOffset,!d||e[h.index])&&(s=h.getCellContents.apply(this,[n,r,u,f,h,ht,v]),s&&(et=this._getRole("cell"),et&&s.attr("role",et),u>0?s.attr("aria-expanded","true"):u<0&&s.attr("aria-expanded","false"),h.width>0&&(ut=h,ft=s),!this._options.useLegacyStyle&&this._options.contextMenu&&h.index===this._options.contextMenu.columnIndex&&this._addContextMenuContainer(s,this._rowHasContextMenu(r)),d?l.replaceChild(s[0],l.children[v]):l.appendChild(s[0])));w=this._fixColumnsWidth(w);ot=this._canvasWidth-w;this._options.lastCellFillsRemainingContent===!0&&ot>0&&ft&&ut&&ft.outerWidth(ut.width+ot);p.makeElementUnselectable(l);this._gutter&&p.makeElementUnselectable(c);this._updateRowSelectionStyle(n,this._selectedRows,this._selectedIndex);this._options.enabledEvents&&t.EVENT_ROW_UPDATED in this._options.enabledEvents&&this._element.triggerHandler(t.EVENT_ROW_UPDATED,[n])},t.prototype._rowHasContextMenu=function(n){return!(this._dataSource&&this._dataSource[n]&&this._dataSource[n].noContextMenu)},t.prototype._addContextMenuContainer=function(n,t){var r,f,u,i;if(t){r=$(k("div","grid-context-menu-container grid-context-menu")).attr({title:"",tabindex:"-1",role:"button"}).attr("aria-label",s.GridRowActions).on("keydown",p.buttonKeydownHandler);f=$(k("span","grid-context-menu-icon bowtie-icon bowtie-ellipsis"));r.append(f);u=$(k("div","grid-cell-contents-container")).append(n.contents());n.append(r);n.append(u);for(i in n[0])if(i.substr(0,23)==="__reactInternalInstance"){u[i]=n[i];n[0].removeAttribute(i);break}}else n.prepend($(k("div","grid-context-menu-container grid-no-context-menu")))},t.prototype._updateRowSize=function(n,t,i){i||t.empty();var r=t[0];return r.style.top=n*this._rowHeight+"px",r.style.left=this._gutterWidth+"px",r.style.height=this._rowHeight+"px",r.style.width=isNaN(this._contentSize.width)?"":Math.max(this._contentSize.width+2,this._canvasWidth-this._gutterWidth)+"px",r},t.prototype._drawCell=function(n,t,i,r,u,f,e){var h,c,l,o,a,v=u.width||20,y;return a=k("div","grid-cell"),a.style.width=isNaN(v)?v:v+"px",o=$(a),typeof u.hrefIndex!="undefined"&&(y=this.getColumnValue(t,u.hrefIndex,-1)),h=this.getColumnText(t,u,e),y?o.append($("<a/>").attr("href",y).text(h)):h?o.text(h):o.html("&nbsp;"),e===f&&r>0&&(l=r*16-13,u.indentOffset=l,i!==0&&(c=$(k("div","icon grid-tree-icon")).appendTo(o).css("left",l).attr("role","button").attr("aria-label",s.ExpandRowsAriaLabel),i>0?c.addClass("bowtie-icon bowtie-chevron-down"):c.addClass("bowtie-icon bowtie-chevron-right")),o.css("textIndent",r*16+"px")),u.rowCss&&o.addClass(u.rowCss),o},t.prototype._drawHeaderCellValue=function(n){var t=$("<div/>").text(n.text||"").addClass("title");return n.canSortBy&&!n.fixed&&t.attr("role","button"),!this._isIndentedHeaderColumn(n)||this._indentLevels==="undefined"||this._indentLevels===null||t.addClass("indented-title"),t},t.prototype._isIndentedHeaderColumn=function(n){return n.index===this._indentIndex},t.prototype._layoutHeader=function(){var n=this._header;n&&this._headerCanvas.length>0&&(n[0].scrollLeft!==this._scrollLeft&&(n[0].scrollLeft=this._scrollLeft),this._headerCanvas[0].style.left=this._gutterWidth+"px");this._gutter&&this._gutter.length>0&&(this._gutter[0].style.left=this._scrollLeft+"px")},t.prototype.layout=function(){u.logTracePoint("Grid.layout.start");this._setContextMenuColumn();this._cleanUpRows();this._fixScrollPos();this._layoutContentSpacer();this._updateViewport();this._layoutHeader();this._drawHeader();this._updateAriaProperties();this._dataSource.length>0?this.getFocusElement().attr({tabIndex:"0"}):this.getFocusElement().removeAttr("tabIndex");this._fire("Grid.layout.complete");u.logTracePoint("Grid.layout.complete")},t.prototype.redraw=function(){this._fixScrollPos();this._redraw(!0)},t.prototype.getColumnValue=function(n,t){return this._dataSource[n][t]},t.prototype.getColumnText=function(n,t,i){var r,u;return r=t.getColumnValue.call(this,n,t.index,i),u=typeof r!="string"?v.convertValueToDisplayString(r,t.format):r,t.maxLength=Math.max(t.maxLength||0,u.length),u},t.prototype._getExpandState=function(n){var t=0;return this._expandStates&&typeof this._expandStates[n]=="number"&&(t=this._expandStates[n]),t},t.prototype._selectRow=function(n,t,i){var r=i&&i.ctrl,u=i&&i.shift,f=i&&i.rightClick;r?this._addSelection(n,t,{toggle:!0}):u?(this._clearSelection(),this._addSelectionRange(n,t)):f?this._selectedRows&&n+""in this._selectedRows?(this._selectedIndex=n,this._updateActiveDescendant()):(this._clearSelection(),this._addSelection(n,t)):(this._clearSelection(),this._addSelection(n,t))},t.prototype.getSelectedRowIndex=function(){return this._selectedIndex},t.prototype.setSelectedRowIndex=function(n){this._clearSelection();this._addSelection(n)},t.prototype.getSelectedDataIndex=function(){return this._getDataIndex(this._selectedIndex)},t.prototype.getLastRowDataIndex=function(){var n=this._visibleRange.length;return n>0?this._visibleRange[n-1][1]:-1},t.prototype.getSelectedDataIndices=function(){var t,n=this._selectedRows,i=[];if(n)for(t in n)n.hasOwnProperty(t)&&(i[i.length]=n[t]);return i},t.prototype.ensureDataIndexExpanded=function(n){for(var t=this._getRowIndex(n);t<0||n>0&&t===0;)this.expandNode(this._getDataIndex(-t)),t=this._getRowIndex(n);return t},t.prototype.setSelectedDataIndex=function(n,t){var i=t?this.ensureDataIndexExpanded(n):this._getRowIndex(n);this.setSelectedRowIndex(i)},t.prototype.selectionChanged=function(){},t.prototype.selectedIndexChanged=function(){},t.prototype._updateRowSelectionStyle=function(n,t,i){var f="grid-row-selected",e="grid-row-selected-blur",o="grid-gutter-row-selected",s="grid-gutter-row-selected-blur",h="grid-row-current",c="grid-gutter-row-current",l="grid-blurred",a=n.rowIndex,u=n.row,r=n.gutterRow,v=this._active;t&&a in t?(r&&r.find("input.checkbox").prop("checked",!0),v?(u.hasClass(f)||(u.removeClass(e),u.addClass(f)),r&&!r.hasClass(o)&&(r.removeClass(s),r.addClass(o)),this.getElement().removeClass(l)):(u.hasClass(e)||(u.removeClass(f),u.addClass(e)),r&&!r.hasClass(s)&&(r.removeClass(o),r.addClass(s)),this.getElement().addClass(l)),u.attr("aria-selected","true")):(u.removeClass(f+" "+e+" "+h),r&&(r.removeClass(o+" "+s+" "+c),r.find("input.checkbox").prop("checked",!1)),u.attr("aria-selected","false"));a===i?(u.addClass(h),r&&r.addClass(c)):(u.removeClass(h),r&&r.removeClass(c))},t.prototype.focus=function(n){p.tryFocus(this.getFocusElement(),n)},t.prototype.getContextMenuRowInfo=function(){return this._popupMenu?this._popupMenu._options.contextInfo.rowInfo:null},t.prototype._createContextMenu=function(n,t){return this._createContextPopupMenuControl(t)},t.prototype._createContextPopupMenuControl=function(n){var t=$.map(n.items||[],function(n){return n});return r.BaseControl.createIn(e.PopupMenu,this._element,$.extend({align:"left-bottom"},n,{items:[{childItems:e.sortMenuItems(t)}]}))},t.prototype._onContainerResize=function(){this._disposed||(this._measureCanvasSize(),(this._canvasHeight!==this._previousCanvasHeight||this._canvasWidth!==this._previousCanvasWidth)&&this.layout())},t.prototype._onColumnResize=function(n){this._fire("columnresize",[n])},t.prototype._onColumnMove=function(n,t){this._fire("columnmove",[n,t])},t.prototype._sortBy=function(n,t){var i=this._sortOrder.slice(0),u,f,r,e=!1,o;if(n){for(u=0,f=i.length;u<f;u++)if(r=i[u],r.index===n.index){i.splice(u,1);e=!0;break}e?r.order=r.order==="asc"?"desc":"asc":r={index:n.index,order:"asc"};t?i.push(r):i=[r]}o=this._getSortColumns(i);this._onSort(i,o)},t.prototype.onSort=function(n,t){this._options.autoSort&&(this._trySorting(n,t),this._sortOrder=n,this.layout());u.logTracePoint("Grid.OnSort.Complete")},t.prototype._trySorting=function(n,t){function v(n,t,i,r){var u=i[n.index],f=r[n.index],e=typeof u,o=typeof f;return e==="undefined"||u===null?o==="undefined"||f===null?0:-1:e==="number"&&o==="number"?u-f:u instanceof Date&&f instanceof Date?u.getTime()-f.getTime():y.localeIgnoreCaseComparer(u,f)}var h=this,c,r,l,e,i,u,s;if(t||(t=this._getSortColumns(n)),c=[],r=this._expandStates,r)for(i=0;i<r.length;i++)if(l=r[i],l!=0)for(e=i+1;e<=Math.abs(l)+i;e++)c[e]=i;var f=[],o=this._dataSource,a=this._indentLevels;for(i=0;i<o.length;i++)f[i]=r?{dataSource:o[i],expandState:r[i],level:a[i],parent:f[c[i]],index:i}:{dataSource:o[i],index:i};for(f.sort(function(i,r){for(var e,s,u,c,o,f=0;f<n.length;f++)if(e=t[f],e){if(s=n[f],u=[i,r],h._expandStates)if(u=h._getComparableAncestors(i,r),u[0]){if(!u[1])return-1}else return 1;if(c=e.comparer||v,o=c.call(h,e,s.order,u[0].dataSource,u[1].dataSource),o===0)continue;else return s.order==="desc"?-o:o}return i.index-r.index}),u=0;u<f.length;u++)s=f[u],o[u]=s.dataSource,r&&(r[u]=s.expandState,a[u]=s.level)},t.prototype._getComparableAncestors=function(n,t){return t==n.parent?[null,t]:n==t.parent?[n,null]:n.parent==t.parent?[n,t]:n.level>t.level?this._getComparableAncestors(n.parent,t):n.level<t.level?this._getComparableAncestors(n,t.parent):this._getComparableAncestors(n.parent,t.parent)},t.prototype._getRowInfoFromEvent=function(n,t){return $(n.target).closest(t).data("grid-row-info")},t.prototype._onRowMouseDown=function(n){var t=this._getRowInfoFromEvent(n,".grid-row,.grid-gutter-row");if(t)if(this._focusStateData.currentActionIndex=-1,$(n.target).hasClass("grid-tree-icon")&&n.which===1)this._onToggle(t);else if(n.which!==2)return this._selectRow(t.rowIndex,t.dataIndex,{ctrl:n.ctrlKey||n.metaKey,shift:n.shiftKey,rightClick:n.which===3||$(n.target).closest(".grid-context-menu-container").length>0}),(n.ctrlKey||n.metaKey||n.shiftKey)&&n.preventDefault(),this._handleEvent(n,this.onRowMouseDown,"rowmousedown",{row:t.row,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})},t.prototype.onRowMouseDown=function(){},t.prototype._onRowMouseUp=function(n){var t=this._getRowInfoFromEvent(n,".grid-row");if(t)return this._handleEvent(n,this.onRowMouseUp,"rowmouseup",{row:t.row,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})},t.prototype.onRowMouseUp=function(){},t.prototype.onRowClick=function(n){if(!this._options.useLegacyStyle&&n.event&&n.event.target){var t=$(n.event.target).closest(".grid-context-menu");if(t.length>0){n.contextMenu=t;return this.onContextMenu(n)}}},t.prototype.onRowDoubleClick=function(){},t.prototype.onGutterClick=function(n){this._options.gutter.contextMenu&&this._options.useLegacyStyle&&this._showContextMenu(n)},t.prototype.onEnterKey=function(n){if(n.event.altKey)return this._showContextMenu(n),!1},t.prototype.onDeleteKey=function(){},t.prototype._onOpenRowDetail=function(n,t){var i,r,u;if(this._handleEvent(n,this.onOpenRowDetail,"openRowDetail",t)!==!1){if(i=this._options.openRowDetail,i)return $.isFunction(i)&&(i=i.call(this,this._selectedIndex)),i&&(typeof i!="string"?(r=this.getColumnValue(this._selectedIndex,i.hrefIndex,-1),u=i.target):r=i,r&&(u?f.getService().performAction(f.CommonActions.ACTION_WINDOW_OPEN,{url:r,target:u,features:this._options.openRowDetail.targetFeatures}):f.getService().performAction(f.CommonActions.ACTION_WINDOW_NAVIGATE,{url:r}))),!1}else return!1},t.prototype.onOpenRowDetail=function(){},t.prototype.onContextMenu=function(n){this._showContextMenu(n)},t.prototype._onBlur=function(){var n=this;v.delay(this,0,function(){tt(it,"(grid) focus out");var t=n.getFocusElement();n._showingContextMenu||!t||t[0].contains(document.activeElement)||(n._active=!1,n._updateSelectionStyles())})},t.prototype._onFocus=function(){tt(it,"(grid) focus in");this._selectedIndex<0&&this._count>0&&this._selectRow(0);this._lastFocusTime=Date.now();this._active=!0;this._updateSelectionStyles();this._updateActiveDescendant()},t.prototype._onKeyPress=function(){},t.prototype._onKeyDown=function(n){var i={lo:-1,hi:-1},t=p.KeyCode,u,f;if(!n.defaultPrevented&&(!this._header||!(this._header.length>0)||!this._header[0].contains(n.target))){if(tt(it,"(grid) key down"),this._copyInProgress)return n.keyCode===t.ESCAPE&&this._cancelable&&this._cancelable.cancel(),!1;this._count>0&&(i={lo:0,hi:this._expandedCount-1});this._selectedIndex<0&&this._addSelection(i.lo);u=!0;switch(n.keyCode){case t.A:if(n.ctrlKey||n.metaKey)this.selectAll();else return;break;case t.C:if(n.ctrlKey||n.metaKey)this.copySelectedItems();else return;break;case t.F10:return n.shiftKey?this._onContextMenu():void 0;case t.DOWN:if(n.altKey)return;this._onDownKey(n,i);break;case t.UP:if(n.altKey)return;this._onUpKey(n,i);break;case t.PAGE_DOWN:case t.PAGE_UP:this._onPageUpPageDownKey(n,i);break;case t.RIGHT:if(n.altKey)return;this._onRightKey(n);break;case t.LEFT:if(n.altKey)return;this._onLeftKey(n);break;case t.ENTER:if(!n.isDefaultPrevented()){if(f=$(n.target).closest(".grid-context-menu"),f.length>0){var o=$(n.target).closest(".grid-row"),r=o.data("grid-row-info"),e={row:r.row,rowInfo:r,rowIndex:r.rowIndex,dataIndex:r.dataIndex};e.contextMenu=f;return this.onContextMenu(e)}if(!p.KeyUtils.isModifierKey(n))return this._onEnterKey(n,i)}break;case t.DELETE:return this._onDeleteKey(n);case t.HOME:this._onHomeKey(n,i);break;case t.END:this._onEndKey(n,i);break;case t.ESCAPE:this._onEscapeKey(n);u=!1;break;case t.TAB:this._onTabKey(n);return;case t.BACKSPACE:this._onBackSpaceKey(n);return;case t.CONTEXT_MENU:this._contextMenuKeyPressedState=0;this._onContextMenu(n);return;default:return}this.getSelectedRowIntoView();this._fire("keydown",[n.keyCode,n.ctrlKey,n.shiftKey,n.altKey,n.metaKey]);u&&n.preventDefault()}},t.prototype._onBackSpaceKey=function(){},t.prototype._onUpKey=function(n,t){if(t.lo===this._selectedIndex&&!n.ctrlKey&&!n.metaKey&&!n.shiftKey){this._focusHeader();return}this._clearSelection();n.ctrlKey||n.metaKey?n.shiftKey?this._addSelectionRange(t.lo):this._addSelection(t.lo):n.shiftKey?this._addSelectionRange(Math.max(this._selectedIndex-1,t.lo)):this._addSelection(this._selectedIndex-1)},t.prototype._onDownKey=function(n,t){this._clearSelection();n.ctrlKey||n.metaKey?n.shiftKey?this._addSelectionRange(t.hi):this._addSelection(t.hi):n.shiftKey?this._addSelectionRange(Math.min(this._selectedIndex+1,t.hi)):this._addSelection(Math.min(this._selectedIndex+1,t.hi))},t.prototype._onRightKey=function(n){this._onHorizontalArrowKey(1,n)},t.prototype._onLeftKey=function(n){this._onHorizontalArrowKey(0,n)},t.prototype._onHorizontalArrowKey=function(n,t){var i,e,u;if(this._rows.length!==0){i=this.getSelectedDataIndex();this._updateRowActionList(i);var r=Math.min(Math.max(-1,this._focusStateData.currentActionIndex+(n===0?-1:1)),this._focusStateData.rowActionList[i].length-1),o=i>=0,s=this._focusStateData.rowActionList[i].length>0,h=r!==this._focusStateData.currentActionIndex&&r!==-1,f=this._focusStateData.currentActionIndex===-1&&n===1&&this.tryToggle(!0,t.shiftKey);f||(o&&s&&h?(this._focusStateData.currentActionIndex=r,e=this._focusStateData.rowActionList[i][this._focusStateData.currentActionIndex],this._setFocusedGridElement(e)):n===0&&r===-1&&this._focusStateData.currentActionIndex!==-1?(this._setFocusedGridElement(this.getFocusElement()[0]),this._focusStateData.currentActionIndex=-1):(u=this._canvas,(n!==0||this.tryToggle(!1,t.shiftKey))&&f?(this._clearSelection(),this._addSelection(this._selectedIndex)):u.scrollLeft(u.scrollLeft()+50*(n===0?-1:1))))}},t.prototype._onPageUpPageDownKey=function(n,t){var i=this._getRowsPerPage(n),r=p.KeyCode;this._clearSelection();n.keyCode===r.PAGE_DOWN?n.shiftKey?this._addSelectionRange(Math.min(this._selectedIndex+i,t.hi)):this._addSelection(Math.min(this._selectedIndex+i,t.hi)):n.shiftKey?this._addSelectionRange(Math.max(this._selectedIndex-i,t.lo)):this._addSelection(Math.max(this._selectedIndex-i,t.lo))},t.prototype._getRowsPerPage=function(){var n=this._canvas[0].clientHeight;return Math.floor(n/this._rowHeight)},t.prototype._onHomeKey=function(n,t){this._clearSelection();n.shiftKey?this._addSelectionRange(t.lo):this._addSelection(t.lo)},t.prototype._onEndKey=function(n,t){this._clearSelection();n.shiftKey?this._addSelectionRange(t.hi):this._addSelection(t.hi)},t.prototype._onTabKey=function(){},t.prototype._onEscapeKey=function(){this._tryFinishColumnMoving(!0);this._setFocusedGridElement(this.getFocusElement()[0]);this._focusStateData.currentActionIndex=-1},t.prototype._onKeyUp=function(){return},t.prototype._focusHeader=function(){var n=this._getFocusableHeaderElement();n.length>0&&(this._focusStateData.headerActionList.length===0&&this._updateHeaderRowTabbableOptions(),this._setHeaderActionIndex(n),this._clearSelection(),this._setFocusedGridElement(n[0]))},t.prototype._updateHeaderRowTabbableOptions=function(){var t=this,n=this._getHeaderColumns();n.length>0&&$.each(n,function(n,i){t._processHeaderCellTabbableOptions(i)})},t.prototype._processHeaderCellTabbableOptions=function(n){var t=this;this._focusStateData.headerActionList.push(n);$(n).find(":focusable:visible,[data-tabbable=1]:visible").each(function(n,i){$(i).attr("tabindex","-1");t._focusStateData.headerActionList.push(i)})},t.prototype._setHeaderActionIndex=function(n){for(var r,i=this._focusStateData.headerActionList,t=0;t<i.length;t++)if(r=i[t],n.is(r)){this._focusStateData.currentHeaderActionIndex=t;return}this._focusStateData.currentHeaderActionIndex=0},t.prototype._getFocusableHeaderElement=function(){var n=this._header.find("[aria-sort]");return n.length===0&&(n=this._getHeaderSortColumn(".grid-header-column")),n},t.prototype._getHeaderSortColumn=function(n){return this._header.find(n).eq(0)},t.prototype._getHeaderColumns=function(){return this._header.find(".grid-header-column")},t.prototype.enableEvent=function(n){var t=this._options.enabledEvents;t||(t={},this._options.enabledEvents=t);t[n]=!0},t.prototype.disableEvent=function(n){var t=this._options.enabledEvents;t&&delete t[n]},t.prototype.getExpandStates=function(){return this._expandStates},t.prototype.beginFormatTable=function(n,t,i,r){this._beginEnsureSelectionIsAvailable(d(this,function(){var t=this,u,f;t._cancelable&&t._cancelable.canceled||(i||(i=t._options&&t._options.formatterType?t._options.formatterType:ft),u=new i(t,r),f=u.getTableFromSelectedItems());$.isFunction(n)&&n(f,u)},t))},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._buildDom()},t.prototype._addSpacingElements=function(){},t.prototype._createFocusElement=function(){return $(k("div","grid-focus")).attr({tabindex:"0",role:"grid"})},t.prototype._getMode=function(){var t="grid",n=this._options;return n.expandStates?t="treegrid":n.header||n.columns&&n.columns.length!==1||(t="listbox"),t},t.prototype._getRole=function(n){var t=this._getMode(),i=t==="listbox";return n==="canvas"?t:n==="row"?i?"option":"row":n==="cell"?i?null:"gridcell":void 0},t.prototype._buildDom=function(){var u=this,t=document.createDocumentFragment(),n,r,i;n=this._options.gutter;r=n&&(n.contextMenu||n.icon||n.checkbox);i=this.getFocusElement()[0];i&&i.addEventListener("focus",function(n){var t=n.target,r=p.getFocusRingFocusHandler(),i=u.getFocusElement()[0];!i.contains(t)||i===n.target||t.classList.contains("grid-row")||t.classList.contains("menu-item")||r(n)},!0);this._contentSpacer=$(k("div","grid-content-spacer")).attr({role:"presentation"});this._canvas=$(k("div","grid-canvas")).attr("role","presentation");this._canvas.append(this._contentSpacer);this._addSpacingElements();this._options.header&&(this._element.addClass("has-header"),this._header=$(k("div","grid-header")),this._header.bind("contextmenu",function(n){return n.preventDefault(),n.stopPropagation(),!1}),this._header[0].addEventListener("focus",p.getFocusRingFocusHandler(),!0),this._header.attr({role:"row","aria-rowindex":1}),this._headerCanvas=$(k("div","grid-header-canvas")).attr({role:"presentation"}),this._header.append(this._headerCanvas),t.appendChild(this._header[0]));r&&(this._element.addClass("has-gutter"),this._gutter=$(k("div","grid-gutter")),this._canvas.append(this._gutter),this._header&&(this._gutterHeader=$(k("div","grid-gutter-header")),n.tooltip&&this._gutterHeader.attr("title",n.tooltip),this._header.append(this._gutterHeader)),this._options.useLegacyStyle||n.icon||n.checkbox||this._gutter.addClass("grid-gutter-behind"));this._options.useLegacyStyle&&this._element.addClass("grid-legacy");t.appendChild(this._canvas[0]);this._canvasDroppable=$(k("div","grid-canvas grid-canvas-droppable"));t.appendChild(this._canvasDroppable[0]);this._element.append(t)},t.prototype.getFocusElement=function(){return this.getElement()},t.prototype._shouldAttachContextMenuEvents=function(){return!this._options.useLegacyStyle&&!!this._options.contextMenu&&this._options.gutter.contextMenu!==!1||this._gutter&&this._options.gutter&&this._options.gutter.contextMenu},t.prototype._attachEvents=function(){var f=this,s=this,e=this._element,n=this._canvas,r=e,i=this._header,o;p.attachResize(e,v.throttledDelegate(this,10,this._onContainerResize));this._bind("mousedown",d(this,this._onContainerMouseDown));this._bind(r,"keydown",d(this,this._onKeyDown));this._bind(r,"keyup",d(this,this._onKeyUp));this._bind(r,"keypress",d(this,this._onKeyPress));this._bind(r,"focus",d(this,this._onFocus));r[0].addEventListener("focus",this._onFocus.bind(this),!0);r[0].addEventListener("blur",this._onBlur.bind(this),!0);this._shouldAttachContextMenuEvents()&&this._bind("contextmenu",function(n){if(f._contextMenuKeyPressedState===1||$(n.target).closest(".grid-row,.grid-gutter-row").length>0)return f._onContextMenu.call(f,n)});this._bind(n,"click",d(this,this._onRowClick));this._bind(n,"dblclick",d(this,this._onRowDoubleClick));this._bind(n,"mousedown",d(this,this._onRowMouseDown));this._bind(n,"mouseup",d(this,this._onRowMouseUp));o=v.throttledDelegate(this,10,this._onCanvasScroll);this._bind(n,"scroll",o);this._bind(n,"touchmove",o);this._bind(n,"selectstart",d(this,this._onSelectStart));i&&(this._bind(i,"mousedown",d(this,this._onHeaderMouseDown)),this._bind(i,"mouseup",d(this,this._onHeaderMouseUp)),this._bind(i,"click",d(this,this._onHeaderClick)),this._bind(i,"dblclick",d(this,this._onHeaderDblClick)),this._bind(i,"keydown",this._onHeaderKeyDown.bind(this)),this._bind(i,"scroll",this._onHeaderScroll.bind(this)));this._gutter&&(this._bind(this._gutter,"click",d(this,this._onGutterClick)),this._gutter.hover(function(n){$(n.target).closest(".grid-gutter-row").addClass("grid-gutter-row-hover")},function(n){$(n.target).closest(".grid-gutter-row").removeClass("grid-gutter-row-hover")}));this._setupDragDrop();e.parents(".ui-tabs").bind("tabsactivate",function(){s._element.is(":visible")&&s.layout()});this._tooltipMouseOverHandler=function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];f._onMouseOver(n)};this._tooltipMouseOutHandler=function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];f._onMouseOut(n)};e.on("mouseover",t.TOOLTIP_TARGET_SELECTOR,this._tooltipMouseOverHandler);e.on("mouseout",t.TOOLTIP_TARGET_SELECTOR,this._tooltipMouseOutHandler);u.logTracePoint("Grid._attachEvents.complete")},t.prototype._getDraggedRowsInfo=function(n){var u=$(n.target),t,i,r=null;return t=u.closest(".grid-row"),t.length&&(i=t.data("grid-row-info"),r={dataIndex:+i.dataIndex,rowIndex:+i.rowIndex}),r},t.prototype._setupDragDrop=function(){this.setupDragDrop(this._options.draggable,this._options.droppable)},t.prototype.setupDragDrop=function(n,i){var r=this,e,u,f=function(n){n.draggable||(n.draggable=r._canvas);n.draggingRowInfo=u},o;n&&(e={axis:"y",helperClass:"grid-row-dragging",zIndex:1e3,appendTo:this._canvas,handle:".grid-row",opacity:.7,scope:this.getTypeName(),cursorAt:{top:this._rowHeight/2}},typeof n!="object"&&(n={}),this._draggable=$.extend({},e,n),n=$.extend(e,n,{helper:function(n){if(u=r._getDraggedRowsInfo(n),u){r._cleanupDragDropState();var t=r._getDraggable(r._canvas);return f(t),r._rowDragCreateHelper(u,n,t)}return u=null,$("<div />")},drag:function(n,t){return f(t),r._invokeDragHandler(n,t,r._draggable.drag)},start:function(n,i){return u?(f(i),r._canvas.data(t.DATA_DRAGGING_ROWINFO,u),r._draggingRowInfo=u,r._invokeDragHandler(n,i,r._draggable.start)):!1},stop:function(n,i){f(i);var u=r._invokeDragHandler(n,i,r._draggable.stop);return r._draggingRowInfo=null,r._canvas.data(t.DATA_DRAGGING_ROWINFO,null),u}}),this._canvas.draggable(n));i&&(o={tolerance:"intersect",hoverClass:"grid-row-drop-active",scope:this.getTypeName()},i.accept&&($.isFunction(i.accept)||(i.acceptSelector=i.accept)),this._droppable=$.extend({},o,i),i=$.extend({},this._droppable,{accept:function(n){return r._ddDropStarted||r._droppableAcceptHandler(n,u),!0},activate:function(n,t){f(t);r._droppableActivateHandler(n,t)},deactivate:function(n,t){f(t);r._droppableDeactivateHandler(n,t)},over:function(n,t){f(t);r._droppableOverHandler(n,t)},out:function(n,t){f(t);r._droppableOutHandler(n,t)},drop:function(n,t){r._ddDropStarted=!0;f(t);r._droppableDropHandler(n,t)}}),this._canvasDroppable.droppable(i));(n||i)&&this._cleanupDragDropState()},t.prototype.disableDragDrop=function(){var n={drag:function(){return!1},start:function(){return!1}};this._canvas.draggable(n)},t.prototype.enableDragDrop=function(){this._setupDragDrop()},t.prototype._droppableAcceptHandler=function(n,i){var u=this,f=this._droppable.accept,r;f&&(n.data(t.DATA_DRAGGING_ROWINFO,i),$.each(this._rows,function(t,i){r={dataIndex:Number(t),rowIndex:i.rowIndex};u._rowDropAccept(r,n)}))},t.prototype._droppableDropHandler=function(n,t){var l=this,s,i,r,f,e,o,h,c;u.logTracePoint("Grid._drop.start");s=this._droppable.drop;s&&this._draggableOverGrid&&(r=this._getDraggable(t.draggable),$.each(this._rows,function(n,t){var u={dataIndex:Number(n),rowIndex:t.rowIndex};if(l._rowIntersect(r,u))return i=u,!1}),!i&&this._rowOffsetHeight&&(f=this._rowOffsetHeight>0?this.getLastRowDataIndex():0,e=this._rows[f],e&&(i={dataIndex:+f,rowIndex:+e.rowIndex,isAboveFirstOrBelowLast:!0},o=e.row,h=o.offset(),f!==0&&(h.top+=this._rowOffsetHeight),c=this._calculateIntersectPosition(r),$.ui.intersect(r,{offset:h,proportions:function(){return{width:o[0].offsetWidth,height:o[0].offsetHeight-Math.abs(l._rowOffsetHeight)}}},this._droppable.tolerance,{pageY:c.pageY,pageX:c.pageX})||(i=null))),i&&this._getAcceptStatus(i.dataIndex)&&(t.droppingRowInfo=i,s.call(this,n,t)))},t.prototype._droppableActivateHandler=function(n,t){var i=this,r=t.draggingRowInfo?Number(t.draggingRowInfo.dataIndex):-1;$.each(this._rows,function(u,f){u!==r&&i._rowDropTryActivate({dataIndex:Number(u),rowIndex:f.rowIndex},n,t)})},t.prototype._droppableDeactivateHandler=function(n,t){var i=this,r=t.draggingRowInfo?t.draggingRowInfo.dataIndex:-1;$.each(this._rows,function(u,f){u!==r&&i._rowDropDeactivate({dataIndex:Number(u),rowIndex:f.rowIndex},n,t)});this._cleanupDragDropState()},t.prototype._droppableOverHandler=function(n,t){var i=this;this._draggableOverGrid=!0;this._bind(window.document,"mousemove",function(n){i._draggableOverGrid&&i._droppableOverMoveHandler(n,t)});this._droppableOverMoveHandler(n,t)},t.prototype._droppableOutHandler=function(n,t){this._unregisterDragMouseMove();this._droppableOverMoveHandler(n,t)},t.prototype._droppableOverMoveHandler=function(n,t){var u=this,i=this._getDragOverRows(),s=this._getDraggable(t.draggable),l=t.draggingRowInfo?Number(t.draggingRowInfo.dataIndex):-1,r,f,e,o,h,c;$.each(this._rows,function(r,f){var e;r!==l&&(e={dataIndex:+r,rowIndex:+f.rowIndex},u._getAcceptStatus(r)&&(u._draggableOverGrid&&u._rowIntersect(s,e)?i[r]||(i[r]=!0,u._rowDropOver(e,n,t)):i[r]&&(delete i[r],delete u._isAboveFirstOrBelowLastRow,u._rowDropOut(e,n,t))))});this._rowOffsetHeight&&(r=this._rowOffsetHeight>0?this.getLastRowDataIndex():0,e=this._rows[r],e&&(f={dataIndex:+r,rowIndex:+e.rowIndex},o=e.row,h=o.offset(),r!==0&&(h.top+=this._rowOffsetHeight),c=this._calculateIntersectPosition(s),this._draggableOverGrid&&$.ui.intersect(s,{offset:h,proportions:function(){return{width:o[0].offsetWidth,height:o[0].offsetHeight-Math.abs(u._rowOffsetHeight)}}},this._droppable.tolerance,{pageY:c.pageY,pageX:c.pageX})?($.extend(f,{isAboveFirstOrBelowLast:!0}),i[r]||(i[r]=!0,this._isAboveFirstOrBelowLastRow=!0,this._rowDropOver(f,n,t))):i[r]&&this._isAboveFirstOrBelowLastRow&&(delete i[r],delete this._isAboveFirstOrBelowLastRow,this._rowDropOut(f,n,t))))},t.prototype._getDraggable=function(n){return n.data("ui-draggable")},t.prototype._cleanupDragDropState=function(){this._resetRowAcceptStatus();this._resetRowOverStatus();this._unregisterDragMouseMove();this._ddDropStarted=!1},t.prototype._unregisterDragMouseMove=function(){this._draggableOverGrid=!1;this._unbind(window.document,"mousemove")},t.prototype._resetRowOverStatus=function(){this._ddRowOverStatus={}},t.prototype._rowDropAccept=function(n,i){var u=this._rows[n.dataIndex],r;return u?(r=this._ddRowAcceptStatus[n.dataIndex],typeof r=="undefined"&&($.isFunction(this._droppable.accept)?(i.data(t.DATA_DROPPING_ROWINFO,n),r=this._droppable.accept.call(this,i)):this._droppable.acceptSelector&&(r=u.row.is(this._droppable.acceptSelector)),this._ddRowAcceptStatus[n.dataIndex]=r),r):!1},t.prototype._rowDropActivate=function(n,t,i){var r=this._rows[n.dataIndex],u=this._droppable.activate;if(r&&(this._droppable.activeClass&&r.row.addClass(this._droppable.activeClass),u))return u.call(this,t,$.extend({},i,{droppingRowInfo:r}))},t.prototype._rowDropDeactivate=function(n,t,i){var f=this._getAcceptStatus(n.dataIndex),r,u;if(f&&(r=this._rows[n.dataIndex],u=this._droppable.deactivate,r&&(this._droppable.activeClass&&r.row.removeClass(this._droppable.activeClass),this._droppable.hoverClass&&r.row.removeClass(this._droppable.hoverClass),u)))return u.call(this,t,$.extend({},i,{droppingRowInfo:r}))},t.prototype._rowDropOver=function(n,t,i){var r=this._rows[n.dataIndex],u=this._droppable,f=this._droppable.over,e=this._getDraggable(i.draggable);r&&(e.dropped=!0,u.hoverClass&&r.row.addClass(u.hoverClass),this._rowOffsetHeight&&(r.isAboveFirstOrBelowLast=n.isAboveFirstOrBelowLast),f&&f.call(this,t,$.extend({},i,{droppingRowInfo:r})))},t.prototype._rowDropOut=function(n,t,i){var r=this._rows[n.dataIndex],u=this._droppable,f=this._droppable.out,e=this._getDraggable(i.draggable);r&&(e.dropped=!1,u.hoverClass&&r.row.removeClass(u.hoverClass),f&&f.call(this,t,$.extend({},i,{droppingRowInfo:r})))},t.prototype._rowDrop=function(n,t,i,r){var f=this._rows[n.dataIndex],u=this._droppable;f&&(u.hoverClass&&f.row.removeClass(u.hoverClass),u.activeClass&&f.row.removeClass(u.activeClass),u.drop&&u.drop.call(this,i,$.extend({},r,{droppingRowInfo:f})))},t.prototype._rowDragCreateHelper=function(n,t,i){var r;return $.isFunction(this._draggable.helper)?this._draggable.helper.call(this,t,$.extend({},i,{draggingRowInfo:n})):(r=this._rows[n.dataIndex].row.clone(),r.removeClass("grid-row-selected grid-row-selected-blur grid-row-current"),r.addClass(this._draggable.helperClass),r.css("position","absolute"),r)},t.prototype._invokeDragHandler=function(n,t,i){if(i)return i.call(this,n,t)},t.prototype._takeMeasurements=function(){var t=this._options,n,r,u,s,i;if(t.sharedMeasurements&&(n=ot),!n){n={};r=t.coreCssClass;u=this._getEnhancementOption("cssClass");u&&(r+=" "+u);var f=$(k("div",r)).appendTo(document.body).css("position","absolute").css("left",-5e3).css("top",-5e3).width(1e3).height(500),h="grid-row grid-row-normal"+(t.useLegacyStyle?" grid-row-legacy":""),e=$(k("div",h)).appendTo(f),o=$(k("div","grid-cell")).width(100).appendTo(e).text("1");n.rowHeight=e.outerHeight();n.cellOffset=o.outerWidth()-100;s=$(k("div")).appendTo(o).css("overflow","hidden").css("width","1em").css("height","1ex");n.unitEx=s.outerHeight();i=$(k("div","grid-gutter"));i.append(k("div","grid-gutter-row grid-gutter-row-selected"));i.appendTo(f);n.gutterWidth=i[0].clientWidth;f.remove();t.sharedMeasurements&&(ot=n)}this._unitEx=n.unitEx;this._rowHeight=n.rowHeight;this._cellOffset=n.cellOffset;this._gutterWidth=this._gutter?n.gutterWidth:0},t.prototype._ensureSelectedIndex=function(n){var t=this._selectedIndex;typeof n=="number"&&(this._selectedIndex=n);this._selectedIndex>=0&&(this._count<=this._selectedIndex&&(this._selectedIndex=this._count-1),this._selectedIndex!==t&&this._addSelection(this._selectedIndex))},t.prototype._determineIndentIndex=function(){for(var t=this._columns,n=0,i=t.length;n<i;n++)if(t[n].indent){this._indentIndex=n;return}this._indentIndex=0},t.prototype._updateRanges=function(){var n=0,i=0,r=this._count,t=[],u=0,f;if(this._expandStates){while(n<r)f=this._expandStates[n],f<0?(t[t.length]=[i,n],u+=n-i+1,n+=1-f,i=n):n++;i<r&&(t[t.length]=[i,r-1],u+=r-i)}else u=r,t[t.length]=[0,u];this._expandedCount=u;this._visibleRange=t},t.prototype._updateExpansionStates=function(n,t){var e=!1,l,f;if(this._expandStates){for(var h=this._expandStates,i,o,a=this._rows,r=0,s=[],c=function(n,t){h[t]=-n;e=!0;var i=a[t];i&&(i.dirty=!0)},u=0,v=this._count;u<v;){for(i=h[u],r<t?(i<0&&n===!0||i>0&&n===!1)&&c(i,u):r===t&&(i>0&&n===!0||i<0&&n===!1)&&c(i,u),l=r,f=0;f<l;f++)s[f]-=1,s[f]===0&&(r-=1);o=Math.abs(i);o>0&&(s[r]=o,r+=1);u++}e&&this._updateRanges()}return e},t.prototype._updateExpansionStateAndRedraw=function(n,t){var r,i=this._selectedIndex;i>=0&&(r=this._getDataIndex(i));this._updateExpansionStates(n,t);i>=0&&(this._clearSelection(),this._addSelection(Math.abs(this._getRowIndex(r))));this._layoutContentSpacer();this._redraw()},t.prototype._updateViewport=function(n){var u=this._options,o=[],s=[],f=[],l=this._getVisibleRowIndices(),a=this._expandedCount-1,y=this._expandStates||[],p=this._count,r=l.first,e=l.last,t,c;r=Math.max(0,r-u.extendViewportBy);e=Math.min(a,e+u.extendViewportBy);var v=Math.max(0,r-u.payloadSize),w=Math.min(a,e+u.payloadSize),i=this._getDataIndex(v),b=r,h=this._canvas[0];for(h&&h.scrollLeft!==this._scrollLeft&&(h.scrollLeft=this._scrollLeft),t=v;t<=w&&i<p;t++)t<r?o[o.length]=[t,i]:t>e?s[s.length]=[t,i]:(f[f.length]=[t,i],b=t),c=y[i],c<0?i+=1-c:i++;this.cacheRows(o,f,s);this._drawRows(f,n)},t.prototype._setContextMenuColumn=function(){var n=this._options.contextMenu,t,i;n&&(this._automaticContextMenuColumn&&(n.columnIndex=undefined,t=this._columns.filter(function(n){return!n.hidden}),t.forEach(function(t){n.columnIndex===undefined&&t.width>120&&(n.columnIndex=t.index)}),typeof n.columnIndex=="undefined"&&t.length>0&&(n.columnIndex=t[t.length-1].index)),i=this._columns.filter(function(t){return n.columnIndex===t.index}),i.length===1&&(i[0].width=Math.max(32,i[0].width)))},t.prototype._cleanUpRows=function(){var n=this._rows,t,r=this._gutter,i;for(t in n)n.hasOwnProperty(t)&&(i=n[t],i.row.remove(),r&&i.gutterRow.remove());this._rows={}},t.prototype._getGutterIconClass=function(){return""},t.prototype._drawGutterCell=function(){},t.prototype._drawHeader=function(){var b=this,a=this._columns,v=this._sortOrder,c,i,y,n,t,l,u,f,d,e,r,o,w,s,h;if(this._header){for(c=document.createDocumentFragment(),i=0,y=a.length;i<y;i++)if(n=a[i],!n.hidden){for(t=k("div","grid-header-column"),t.setAttribute("role","columnheader"),l=n.tooltip||n.text,u=$(t),n.canSortBy&&!n.fixed&&u.addClass("sortable"),n.headerContainerCss&&u.addClass(n.headerContainerCss),l&&t.setAttribute("aria-label",l),t.setAttribute("tabindex","-1"),this._bind(t,"keydown",function(n){(n.key===" "||n.key==="Spacebar"||n.key==="Enter")&&b._onHeaderClick(n)}),t.style.width=(n.width||20)+"px",t._data={columnIndex:i,header:!0},f=k("div","separator"),n.fixed&&(f.style.cursor="auto"),d=$(f),f._data={columnIndex:i,separator:!0},t.appendChild(f),e=n.getHeaderCellContents.apply(this,[n])||$(k("div")),n.headerCss&&e.addClass(n.headerCss),r=k("div","sort-handle"),o=0,w=v.length;o<w;o++)if(s=v[o],s.index===n.index){s.order==="asc"?(u.addClass("ascending").attr("aria-sort","ascending"),this._options.useLegacyStyle?($(r).removeClass("bowtie-icon bowtie-triangle-down"),$(r).addClass("bowtie-icon bowtie-triangle-up")):(h=k("i","bowtie-icon right bowtie-sort-ascending"),e[0].appendChild(h))):s.order==="desc"&&(u.addClass("descending").attr("aria-sort","descending"),this._options.useLegacyStyle?($(r).removeClass("bowtie-icon bowtie-triangle-up"),$(r).addClass("bowtie-icon bowtie-triangle-down")):(h=k("i","bowtie-icon right bowtie-sort-descending"),e[0].appendChild(h)));break}t.appendChild(e[0]);t.appendChild(r);c.appendChild(t)}this._headerCanvas.empty();this._columnMovingElement=null;this._headerCanvas[0].appendChild(c);p.makeElementUnselectable(this._header[0])}},t.prototype._fixColumnsWidth=function(n){return n+2},t.prototype._layoutContentSpacer=function(){for(var n=0,i,f=this._columns,r,u,t=0,e=f.length;t<e;t++)f[t].hidden||(n+=(f[t].width||20)+this._cellOffset);n=this._fixColumnsWidth(n);i=Math.max(1,this._expandedCount*this._rowHeight);this._contentSpacer.width(n);this._contentSpacer.height(i);this._gutter&&this._gutter.height(i);this._measureCanvasSize();this._ignoreScroll=!0;try{r=Math.ceil(Math.max(0,Math.min(this._scrollTop,this._canvas[0].scrollHeight-this._canvas[0].clientHeight)));r!==this._scrollTop&&(this._scrollTop=r,this._canvas[0].scrollTop=r);u=Math.max(0,Math.min(this._scrollLeft,n-this._canvasWidth));u!==this._scrollLeft&&(this._scrollLeft=u,this._canvas[0].scrollLeft=u)}finally{this._ignoreScroll=!1}this._contentSize.width=n;this._contentSize.height=i},t.prototype._fixScrollPos=function(){var n=this._ignoreScroll;this._ignoreScroll=!0;try{this._canvas[0].scrollLeft=this._scrollLeft;this._canvas[0].scrollTop=this._scrollTop}finally{this._ignoreScroll=n}},t.prototype._redraw=function(n){this._layoutHeader();this._updateViewport(n)},t.prototype.selectAll=function(){if(this._count>0&&this._options.allowMultiSelect!==!1){this._addSelection(0);this._clearSelection();this._selectionStart=0;var n=Math.max(0,this._selectedIndex);this._addSelectionRange(this._expandedCount-1,undefined,{doNotFireEvent:!0});this._selectedIndex=n;this._updateSelectionStyles();this._selectionChanged()}},t.prototype._clearSelection=function(){this._selectionCount=0;this._selectedRows=null},t.prototype._addSelection=function(n,t,i){var r,f=i&&i.keepSelectionStart,e=i&&i.doNotFireEvent,o=i&&i.toggle,u;this._options.allowMultiSelect===!1&&(f=!1,this._clearSelection());this._selectedRows||(this._selectedRows={});n>=0?(r=!0,n+""in this._selectedRows?o&&(r=!1,this._selectionCount=Math.max(0,this._selectionCount-1),delete this._selectedRows[n]):this._selectionCount++,typeof t!="number"&&(t=this._getDataIndex(n)),r&&(this._selectedRows[n]=t),this._selectedIndex=n,this._updateActiveDescendant(),(this._selectionStart<0||!f)&&(this._selectionStart=n)):(t=-1,this._selectedIndex=-1,this._focusedElement=null,this._focusStateData.currentActionIndex=-1);e||(this._updateSelectionStyles(),this._selectionChanged(),this._selectedIndexChanged(this._selectedIndex,t),this._updateRowActionList(t),this._focusStateData.rowActionList[t]&&this._focusStateData.rowActionList[t][this._focusStateData.currentActionIndex]?this._setFocusedGridElement(this._focusStateData.rowActionList[t][this._focusStateData.currentActionIndex]):(this._focusStateData.currentActionIndex=-1,u=this.getElement()[0],u&&u.contains(document.activeElement)&&this._setFocusedGridElement(this.getFocusElement()[0])))},t.prototype._updateRowActionList=function(n){var t=this,i=this._rows[n]&&this._rows[n].row,r;i&&(r=$(i),this._focusStateData.rowActionList[n]=[],r.find(".grid-cell").each(function(i,r){var f=$(r),u=null;f.find(":focusable:visible,[data-tabbable=1]:visible").each(function(i,r){var f=$(r);f.attr("tabindex","-1");f.hasClass("grid-context-menu")?u=r:t._focusStateData.rowActionList[n].push(r)});u&&t._focusStateData.rowActionList[n].push(u)}))},t.prototype._setFocusedGridElement=function(n){n.setAttribute("tabindex","0");n.focus();this._focusedElement&&this._focusedElement!==n&&this._focusedElement.setAttribute("tabindex","-1");this._focusedElement=n},t.prototype._addSelectionRange=function(n,t,i){var u,o,r,f,h=i&&i.doNotFireEvent,s=-1,e;if(this._options.allowMultiSelect===!1)this._addSelection(n,t);else{for(this._selectedRows&&(s=this._selectedRows[this._selectedIndex]),this._selectionStart<0&&(this._selectionStart=n),u=Math.min(this._selectionStart,n),o=Math.max(this._selectionStart,n),(typeof t!="number"||u!==n)&&(t=this._getDataIndex(u)),r=u;r<=o;r++)this._addSelection(r,t,{keepSelectionStart:!0,doNotFireEvent:!0}),r===n&&(e=t),f=this._getExpandState(t),f<0?t+=1-f:t++;this._selectedIndex=n;this._updateActiveDescendant();h||(this._updateSelectionStyles(),this._selectionChanged(),s!==e&&this._selectedIndexChanged(this._selectedIndex,e))}},t.prototype._updateActiveDescendant=function(){var r=this.getElement(),i,n,t;this._active&&(i=this._getDataIndex(this._selectedIndex),i>=0&&(n=this.getRowInfo(i),n&&n.row&&(t=n.row.attr("id"),t!==this._activeAriaId&&(r.attr("aria-activedescendant",t),this._activeAriaId=t))))},t.prototype._updateAriaProperties=function(){var n=this.getElement(),f=this._getMode(),i,t,r,u;if(n.attr({role:this._getRole("canvas")}),this._getMode()!=="listbox"){if(this._columns){for(i=0,t=0,r=this._columns;t<r.length;t++)u=r[t],u.hidden||i++;n.attr("aria-colcount",String(i))}n.attr("aria-rowcount",this._expandedCount+(this._options.header?1:0))}else n.removeAttr("aria-colcount"),n.removeAttr("aria-rowcount")},t.prototype._updateSelectionStyles=function(){for(var n in this._rows)this._rows.hasOwnProperty(n)&&this._updateRowSelectionStyle(this._rows[n],this._selectedRows,this._selectedIndex)},t.prototype._selectionChanged=function(){this.selectionChanged(this._selectedIndex,this._selectionCount,this._selectedRows);this._fire("selectionchanged",{selectedIndex:this._selectedIndex,selectedCount:this._selectionCount,selectedRows:this._selectedRows})},t.prototype._selectedIndexChanged=function(n,i){this.selectedIndexChanged(n,i);this._fire(t.EVENT_SELECTED_INDEX_CHANGED,[n,i])},t.prototype._showContextMenu=function(n){var u=this,f,i=n?n.rowInfo:null,s,r,h,t,o;if((this._showingContextMenu=!0,t=$.extend({},this._options.contextMenu),t)&&i){if(f=this._dataSource[i.dataIndex],f.noContextMenu)return;o=n.contextMenu?"context-menu-active context-menu-clicked":"context-menu-active";t=$.extend({onActivate:function(){i.row.addClass(o)},onDeactivate:function(){i.row.removeClass(o)},onPopupEscaped:function(){i.row.removeClass(o)}},t,{contextInfo:{rowInfo:i,item:f},onHide:function(){Date.now()-u._lastFocusTime>e.BLUR_CLOSE_TIMEOUT+10&&(u._showingContextMenu=!1,u._fire(u._canvas,"blur"))}.bind(this)});f.root||(t.items=t.items?$.isFunction(t.items)?t.items.call(this,t.contextInfo):t.items.slice(0):[],this._popupMenu&&(this._popupMenu.dispose(),this._popupMenu=null),r=this.getPinAndFocusElementForContextMenu(n),r.isRightClick&&(t=$.extend(t,{align:"left-bottom"})),this._popupMenu=this._createContextMenu(i,t),this._popupMenu&&r&&(s=r.pinElement,h=r.focusElement[0],v.delay(this,10,function(){t.suppressInitContributions&&this._popupMenu.refreshContributedItems();this._popupMenu.popup(h,s)})))}},t.prototype.getPinAndFocusElementForContextMenu=function(n){var i=n.contextMenu,r=!1,t;return this._contextMenuKeyPressedState===1||i||this._options.useLegacyStyle||(t=n.event,t&&t.pageX&&t.pageY&&t.target&&($(t.target).closest(".grid-row").length>0||$(t.target).closest(".grid-gutter-row").length>0)&&(this._$popupMenuPinTarget||(this._$popupMenuPinTarget=$(k("div","grid-context-menu-popup-pin")).appendTo(document.body)),this._$popupMenuPinTarget.css({top:t.pageY,left:t.pageX}),i=this._$popupMenuPinTarget,r=!0)),{pinElement:i||n.rowInfo.gutterRow||n.rowInfo.row||this._canvas,focusElement:this._focusedElement?$(this._focusedElement):this._canvas,isRightClick:r}},t.prototype._onContainerMouseDown=function(n){(n.target.matches||n.target.msMatchesSelector||n.target.webkitMatchesSelector).call(n.target,".menu *")||this.focus(10)},t.prototype._measureCanvasSize=function(){var n=this._canvas[0],t=n.getBoundingClientRect();this._previousCanvasHeight=this._canvasHeight;this._previousCanvasWidth=this._canvasWidth;this._canvasHeight=t.height-(n.offsetHeight-n.clientHeight);this._canvasWidth=t.width-(n.offsetWidth-n.clientWidth)},t.prototype._setupDragEvents=function(){this._bind(window.document,"mousemove",d(this,this._onDocumentMouseMove),!0);this._bind(window.document,"mouseup",d(this,this._onDocumentMouseUp),!0)},t.prototype._clearDragEvents=function(){this._unbind(window.document,"mousemove",null,!0);this._unbind(window.document,"mouseup",null,!0)},t.prototype._onDocumentMouseMove=function(n){var r,u,f,t=this._columnSizing,i=this._columnMoving;t&&t.active===!0&&(r=n.pageX-t.origin,f=Math.max(this._cellMinWidth,t.originalWidth+r),u=this._columns[t.index],u.width=f,this._applyColumnSizing(t.index),this._moveSizingElement(t.index));i&&i.state>0&&(r=n.pageX-i.origin,r!==0&&(i.state=2,this._moveColumnMovingElement(i.index,i.left+r)))},t.prototype._onDocumentMouseUp=function(){return v.delay(this,0,function(){this._tryFinishColumnSizing(!1);this._tryFinishColumnMoving(!1);this._clearDragEvents()}),!1},t.prototype._onHeaderMouseDown=function(n){var i,t,u,f,e,r;if(n.which===1)if(e=$(n.target).closest(".separator"),e.length>0){if(i=e[0]._data.columnIndex,t=this._columns[i],!t.fixed)return this._columnSizing={active:!0,index:i,originalWidth:t.width,origin:n.pageX},this._moveSizingElement(i),this._setupDragEvents(),!1}else if(r=$(n.target).closest(".grid-header-column"),r.length>0&&(i=r[0]._data.columnIndex,t=this._columns[i],this._options.allowMoveColumns&&!t.fixed&&t.canMove)){for(r.addClass("moving"),this._columnMoving={state:1,index:i,width:t.width,origin:n.pageX,colHeaderElement:r},u=0,f=0;f<i;)t=this._columns[f++],t.hidden||(u+=t.width);return this._columnMoving.left=u,this._setupDragEvents(),!1}},t.prototype._onHeaderMouseUp=function(){return},t.prototype._onHeaderClick=function(n){var f=this,i,t,r,e,u;if(r=$(n.target).closest(".grid-header-column"),r.length>0&&!this._columnSizing){if(e=$(n.target).closest(".separator"),e.length>0)return!1;if(i=r[0]._data.columnIndex,t=this._columns[i],t.onHeaderClick)t.onHeaderClick(t);else t.canSortBy&&!t.fixed&&(this._sortBy(t,n.shiftKey),u=function(){f._setFocusedGridElement(f._headerCanvas[0].children[i]);p.getFocusRing().style.removeProperty("visibility")},this._options.asyncInit?v.delay(this,1,u):u(),n.preventDefault(),n.stopImmediatePropagation())}},t.prototype._onHeaderDblClick=function(n){var i,r,t,u,f,e;return i=$(n.target).closest(".separator"),i.length>0?(this._tryFinishColumnSizing(!0),this._tryFinishColumnMoving(!0),r=i[0]._data.columnIndex,t=this._columns[r],t.fixed||(u=Math.max(t.maxLength||0,3),f=1.1+.7*Math.exp(-u/20),e=t.width,t.width=(t.indentOffset||0)+Math.round(u*f*this._unitEx),this._applyColumnSizing(r,e,!0)),!1):void 0},t.prototype._onHeaderKeyDown=function(n){var o=$(n.target),u,r,t,i,f,e;if(!n.altKey)if(n.shiftKey)u=$(n.target).closest(".grid-header-column"),u.length>0&&(r=u[0]._data.columnIndex,t=this._columns[r],t.fixed||(i=t.width,n.keyCode===p.KeyCode.RIGHT?(n.preventDefault(),n.stopPropagation(),i=t.width+et):n.keyCode===p.KeyCode.LEFT&&(n.preventDefault(),n.stopPropagation(),i=Math.max(this._cellMinWidth,t.width-et)),i!==t.width&&(t.width=i,this._applyColumnSizing(r,-1,!0),this._setFocusedGridElement(this._headerCanvas[0].children[r]))));else switch(n.keyCode){case p.KeyCode.DOWN:n.preventDefault();this._count>0&&this._selectRow(0);this._setFocusedGridElement(this.getFocusElement()[0]);break;case p.KeyCode.RIGHT:n.preventDefault();f=this._getNextHeaderElement(o);f.length>0&&this._setFocusedGridElement(f[0]);break;case p.KeyCode.LEFT:n.preventDefault();e=this._getPreviousHeaderElement(o);e.length>0&&this._setFocusedGridElement(e[0])}},t.prototype._onHeaderScroll=function(n){n.target.scrollLeft!==this._scrollLeft&&(this._scrollLeft=n.target.scrollLeft,this._redraw())},t.prototype._getNextHeaderElement=function(n){return this._focusStateData.currentHeaderActionIndex>=this._focusStateData.headerActionList.length-1?n:$(this._focusStateData.headerActionList[++this._focusStateData.currentHeaderActionIndex])},t.prototype._getPreviousHeaderElement=function(n){return this._focusStateData.currentHeaderActionIndex<1?n:$(this._focusStateData.headerActionList[--this._focusStateData.currentHeaderActionIndex])},t.prototype._moveSizingElement=function(n){var r=this._canvas,e=r[0],t=this._sizingElement,i,u=0,f=this._gutterWidth;if(!t){if(n<0)return;t=$(k("div","grid-column-sizing")).appendTo(r);this._sizingElement=t}if(t.height(e.clientHeight-1),t.css("top",this._scrollTop),n<0)t.css("left",-5e3).css("top",-5e3).height(0);else{while(u<=n)i=this._columns[u++],i.hidden||(f+=i.width);t.css("left",f-1)}},t.prototype._getVisibleColumnIndex=function(n){var t=0,i=0,r=this._columns.length;if(this._columns[n].hidden)return-1;while(t<n)this._columns[t].hidden||i++,t++;return i},t.prototype._applyColumnSizing=function(n,t,i){var f=this._getVisibleColumnIndex(n)+1,r=this._columns[n],u=!1;t=t||-1;r&&(u=r.width!==t,$(".grid-header-column:nth-child("+f+")",this._headerCanvas).width(r.width));i===!0&&(u&&this.layout(),this._onColumnResize(r))},t.prototype._tryFinishColumnSizing=function(n){var t=this._columnSizing;t&&(t.active===!0&&(n||this._applyColumnSizing(t.index,t.originalWidth,!0),this._moveSizingElement(-1)),this._columnSizing=null)},t.prototype._moveColumnMovingElement=function(n,t){var h=this._headerCanvas,c=this._canvas,r=this._columnMovingElement,u=this._columnMovingPinElement,i,l=this._columns.length,o=this._gutterWidth,f=0,e=0,s;if(!r){if(n<0)return;r=$(k("div","grid-column-moving")).appendTo(h);this._columnMovingElement=r;u=$(k("div","grid-column-moving-placer")).appendTo(c).height(4).css("left",-500).css("top",-500);this._columnMovingPinElement=u}if(n<0)r.css("left",-5e5),u.css("left",-500).css("top",-500);else{for(i=this._columns[n],r.width(i.width).css("left",t).css("top",0).text(i.text),s=t+(i.width>>1);f<l;){if(i=this._columns[f],!i.hidden){if(s-o>i.width/2)e=f+1;else break;o+=i.width}f++}e<n||e>n+1?(this._columnInsert=e,u.css("left",o-4).css("top",this._scrollTop)):(this._columnInsert=-1,u.css("left",-500).css("top",-500))}},t.prototype._applyColumnMoving=function(n,t){var u,r,i=this._columns;t>=0&&(t>n&&t--,u=i[n],r=i[t],this._options.allowMoveColumns&&!r.fixed&&r.canMove&&(i.splice(n,1),i.splice(t,0,u),this._determineIndentIndex(),this.layout(),this._onColumnMove(n,t)))},t.prototype._tryFinishColumnMoving=function(n){var t=this._columnMoving;t&&(t.state>1&&(this._moveColumnMovingElement(-1),n||this._applyColumnMoving(t.index,this._columnInsert)),this._columnMoving.colHeaderElement&&this._columnMoving.colHeaderElement.removeClass("moving"),this._columnMoving=null)},t.prototype._getSortColumns=function(n){for(var u=this._columns,f,o,s=[],i,h,r,t=0,e=n.length;t<e;t++){for(o=n[t],i=0,h=u.length;i<h;i++)if(r=u[i],r.index===o.index){f=r;break}s.push(f)}return s},t.prototype._onSort=function(n,t){this.onSort(n,t)!==!1&&this._fire("sort",[{sortOrder:n,sortColumns:t}])},t.prototype._onSelectStart=function(){return this._options.allowTextSelection?!0:!1},t.prototype._onCanvasScroll=function(){var n=this._canvas[0];return this._resetScroll=!0,this._scrollLeft=n.scrollLeft,this._scrollTop=n.scrollTop,this._ignoreScroll||this._redraw(),u.logTracePoint("TFS.UI.Controls.Grids._onCanvasScroll.complete"),!1},t.prototype._handleEvent=function(n,t,i,r){var f,e=this._selectedIndex,u;return f=this._getDataIndex(e),u={rowIndex:e,dataIndex:f,rowInfo:this._rows[f],event:n},r&&$.extend(u,r),t&&t.call(this,u)===!1?!1:this._fire(i,u)},t.prototype._onRowClick=function(n){var t=this._getRowInfoFromEvent(n,".grid-row");if(t)return this._handleEvent(n,this.onRowClick,"rowclicked",{row:t.row,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})},t.prototype._onRowDoubleClick=function(n){var t=this._getRowInfoFromEvent(n,".grid-row");if(t&&!$(n.target).hasClass("grid-tree-icon"))return this._handleEvent(n,this.onRowDoubleClick,"rowdblclick",{row:t.row,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})!==!1?this._onOpenRowDetail(n,{rowIndex:t.rowIndex,dataIndex:t.dataIndex}):!1},t.prototype._onGutterClick=function(n){var t=this._getRowInfoFromEvent(n,".grid-gutter-row"),i;if(t)return this._options.gutter.checkbox?(i=$(n.target),i.hasClass("checkbox")&&this._addSelection(t.rowIndex,t.dataIndex,{toggle:!0})):this._selectedRows&&typeof this._selectedRows[t.rowIndex]=="number"||this._selectRow(t.rowIndex,t.dataIndex),this._handleEvent(n,this.onGutterClick,"gutterclick",{gutterRow:t.gutterRow,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})},t.prototype._onEnterKey=function(n){return this._handleEvent(n,this.onEnterKey,"enterkey")!==!1?this._onOpenRowDetail(n):!1},t.prototype._onDeleteKey=function(n){return this._handleEvent(n,this.onDeleteKey,"deletekey")},t.prototype._onContextMenu=function(n,t){return this._contextMenuKeyPressedState===0?(this._contextMenuKeyPressedState=1,n.preventDefault()):(this._contextMenuKeyPressedState===1&&(this._contextMenuKeyPressedState=2,n.pageX=null,n.pageY=null),this._handleEvent(n,this.onContextMenu,"contextMenu",t)),!1},t.prototype._onToggle=function(n){var t,i;this._expandStates&&(t=this._expandStates[n.dataIndex],t!==0&&(t>0?(i=!1,this.collapseNode(n.dataIndex)):t<0&&(i=!0,this.expandNode(n.dataIndex)),this._isAncestorFolderToggled(n)?this.ancestorFolderToggled(n):this.nonAncestorFolderToggled(n,this._selectedRows?this._selectedRows[this._selectedIndex]:undefined),this._layoutContentSpacer(),this._redraw(),this._raiseToggleEvent(n,i)));this.afterOnToggle(n)},t.prototype._isAncestorFolderToggled=function(n){var u={},i,r,t;if(this._indentLevels&&this._selectedIndex&&this._selectedRows&&this._selectionCount===1)for(i=this._selectedRows[this._selectedIndex],r=this._indentLevels[i]-1,t=i-1;t>=0;t--)this._indentLevels[t]===r&&(u[t]=!0,r--);return u[n.dataIndex]===!0},t.prototype.ancestorFolderToggled=function(n){this._folderToggled(n)},t.prototype.nonAncestorFolderToggled=function(n){this._folderToggled(n)},t.prototype.afterOnToggle=function(){},t.prototype._folderToggled=function(n){this._clearSelection();this._addSelection(Math.min(n.rowIndex,this._expandedCount-1),n.dataIndex)},t.prototype._raiseToggleEvent=function(n,i){this._options.enabledEvents&&t.EVENT_ROW_TOGGLED in this._options.enabledEvents&&this._element.triggerHandler(t.EVENT_ROW_TOGGLED,[n,i])},t.prototype.copySelectedItems=function(n,t,i){var r=this,f;u.logTracePoint("TFS.UI.Controls.Grids.copySelectedItems.start");this._copyInProgress=!0;f=new l.LongRunningOperation(this.getElement(),{cancellable:!0,message:s.CopyProgressPleaseWait});f.beginOperation(function(e){r._cancelable=e;r.beginFormatTable(function(n,i){f.endOperation();r._copyInProgress=!1;u.logTracePoint("TFS.UI.Controls.Grids.copySelectedItems.complete");typeof t=="undefined"&&i&&(t=i.includesHtml===!0);r._cancelable&&r._cancelable.canceled||a.copyToClipboard(n,{copyAsHtml:t})},null,n,i)})},t.prototype._ensureRowDrawn=function(){return!0},t.prototype._onMouseOver=function(n){var t=$(n.currentTarget),f,u,i,r,e;t.data("no-tooltip")||(f=t.attr("title"),f&&t.removeAttr("title").data("tooltip-text",f),u=t.data("tooltip-show-on-overflow"),typeof u!="boolean"&&(u=!0),i=t,u&&(i=$(p.getOverflowElement(n.currentTarget,!0))),i.length>0&&(this._tooltip||(this._tooltip=o.RichContentTooltip.add("",this.getElement(),{useMousePosition:!0})),r=i.data("tooltip-text"),r||(r=i.text()),e=this._tooltip,e.setTextContent(r),r!==""&&e.enable()))},t.prototype._onMouseOut=function(){this._tooltip&&this._tooltip.disable()},t.prototype._beginEnsureSelectionIsAvailable=function(n){n()},t.prototype._dispose=function(){this._tooltip&&(this._tooltip.dispose(),this._tooltip=null);var i=this._element;i.off("mouseover",t.TOOLTIP_TARGET_SELECTOR,this._tooltipMouseOverHandler);i.off("mouseout",t.TOOLTIP_TARGET_SELECTOR,this._tooltipMouseOutHandler);this._tooltipMouseOverHandler=null;this._tooltipMouseOutHandler=null;n.prototype._dispose.call(this);p.detachResize(i)},t.enhancementTypeName="tfs.grid",t.MAX_COPY_SIZE=1e3,t.PAYLOAD_SIZE=200,t.EVENT_ROW_UPDATED="rowupdated",t.EVENT_ROW_TOGGLED="rowtoggled",t.EVENT_SELECTED_INDEX_CHANGED="selectedIndexChanged",t.DATA_DRAGGING_ROWINFO="draggingRowInfo",t.DATA_DROPPING_ROWINFO="droppingRowInfo",t.TOOLTIP_TARGET_SELECTOR=".grid-cell, .grid-header-column > .title",t}(r.Control);t.GridO=g;nt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(g);t.Grid=nt;w.initClassPrototype(g,{_dataSource:[],_expandStates:null,_indentLevels:null,_columns:[],_sortOrder:[],_visibleRange:[],_count:0,_expandedCount:0,_selectedIndex:-1,_indentIndex:0,_selectionStart:-1,_selectionCount:0,_selectedRows:null,_rowHeight:20,_cellOffset:0,_gutterWidth:30,_contentSize:null,_rows:{},_focus:null,_scroller:null,_canvas:null,_canvasHeight:300,_canvasWidth:300,_contentSpacer:null,_header:null,_headerCanvas:null,_gutter:null,_gutterHeader:null,_popupMenu:null,_columnSizing:null,_columnMoving:null,_columnMovingElement:null,_columnMovingPinElement:null,_columnInsert:null,_unitEx:null,_sizingElement:null,_resetScroll:!1,_ignoreScroll:!1,_scrollTop:0,_scrollLeft:0,_ddRowAcceptStatus:null,_ddRowOverStatus:null,_droppable:null,_draggable:null,_draggingRowInfo:null,_cancelable:null,_active:!1,_activeAriaId:null,_cellMinWidth:15,_copyInProgress:!1});r.Enhancement.registerJQueryWidget(nt,"grid");ut=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.enhancementTypeName="tfs.listview",t}(nt);t.ListView=ut;r.Enhancement.registerJQueryWidget(ut,"listView");$(function(){function n(){function t(){n&&(n.style.overflowX=n.clientWidth!==n.scrollWidth?"scroll":"auto")}var n;n=$(document.body).children(".main-container")[0];p.attachResize(n,t);t()}p.BrowserCheckUtils.isMsie()&&n()});ct=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.prototype.attachGrid=function(n){this._grid||(this._grid=n)},t.prototype.addMoreItems=function(n,t){n(this.createSearchableObjects());t()},t.prototype.createSearchableObjects=function(){var i,n,r,s;u.logVerbose("GridSearchAdapter.createSearchableObjects: Creating searchable objects for grid data.");var f=this._gridData=this._grid._dataSource,c=this.getSearchableColumns(),e=[],o,t;for(i in f){for(t=[],n=0,r=c;n<r.length;n++)s=r[n],t.push(this._grid.getColumnText(i,s));o=new h.SearchableObject(f[i],t);e.push(o)}return e},t.prototype.handleResults=function(n){u.logVerbose("GridSearchAdapter.handleResults: Updating grid with new results.");this._results=n;this._grid.setDataSource(n,this._grid.getExpandStates(),this._grid.getColumns(),this._grid.getSortOrder(),null,!1)},t.prototype.handleError=function(n){w.handleError({name:"",message:n})},t.prototype.handleClear=function(){u.logVerbose("GridSearchAdapter.handleClear: Restoring original dataset");this._results===this._grid._dataSource&&this._grid.setDataSource(this._gridData,this._grid.getExpandStates(),this._grid.getColumns(),this._grid.getSortOrder(),null,!1);this._results=undefined},t.prototype.isDataSetComplete=function(){var n=this._gridData===this._grid._dataSource||this._results===this._grid._dataSource;return u.logVerbose("GridSearchAdapter.isDataSetComplete: "+n),n},t.prototype.getSearchableColumns=function(){var t=this,n;return this._searchableColumns||(this._searchableColumns=[],n=this._grid.getColumns(),$.each(n,function(n,i){i.isSearchable&&t._searchableColumns.push(i)})),this._searchableColumns},t}(h.SearchAdapter);t.GridSearchAdapter=ct;ft=function(){function n(n,t){this._options=t;this._grid=n}return n.prototype.getTableFromSelectedItems=function(){u.logTracePoint("TFS.UI.Controls.Data.TabDelimitedTableFormatter.getTableFromSelectedItems.start");var f=this,i=this._grid,r=i.getSelectedDataIndices(),n=new y.StringBuilder,t;return(t=i.getColumns(),r.length===0||t.length===0)?"":($.each(t,function(t,i){t>0&&n.append(y.tab);n.append(i.text)}),n.appendNewLine(),$.each(r,function(r,u){r>0&&n.appendNewLine();n.append($.map(t,function(n){return f.getFormattedColumnValue(n,i.getColumnText(u,n))}).join(y.tab))}),u.logTracePoint("TFS.UI.Controls.Data.TabDelimitedTableFormatter.getTableFromSelectedItems.complete"),n.toString())},n.prototype.getFormattedColumnValue=function(n,t){return t},n}();t.TabDelimitedTableFormatter=ft;lt=function(){function n(n,t){this.includesHtml=!0;this._options=t;this._grid=n}return n.prototype.processColumns=function(n){return n},n.prototype.getTableFromSelectedItems=function(){var i=this;u.logTracePoint("TFS.UI.Controls.Data.HtmlTableFormatter.getTableFromSelectedItems.start");var n=this._grid,r=this._getSelectedDataIndicesFromGrid(),f=this._options&&this._options.extendedText?this._options.extendedText:undefined,t=this.processColumns(n.getColumns()),e=t.map(function(n,t){return{index:t,name:n.text,isValueHtml:n.noHtmlEncode}}),o=r.map(function(r){return t.map(function(t){return i.getFormattedColumnValue(t,n.getColumnText(r,t))})}),s=new b.HtmlTableFormatter(o,e,{extendedHtml:f});return u.logTracePoint("TFS.UI.Controls.Data.HtmlTableFormatter.getTableFromSelectedItems.complete"),s.getHtml()},n.prototype.getFormattedColumnValue=function(n,t){return t},n.prototype._getSelectedDataIndicesFromGrid=function(){return this._grid.getSelectedDataIndices()},n}();t.HtmlTableFormatter=lt;w.tfsModuleLoaded("VSS.UI.Controls.Grids",t)});

define("VSS/Resources/VSS.Resources.Common",["require","exports"],function(require,exports){var e=exports;e.TeamHomeShowAllMembers="Show all members";e.Header_WelcomePortal="Azure DevOps Services";e.InvalidArtifactUri="TF400897: Invalid artifact uri: {0}";e.GettingStartedCreatingCollection="Creating collection...";e.AgoAMonth="a month ago";e.WelcomePageCreateProjectTitle="Create a team project";e.ViewProcessGuidance="View process guidance";e.Header_Privacy="Privacy policy";e.ErrorDuplicateRouteArea="TF400913: RoutingArea \u0027{0}\u0027 already registered.";e.ReleaseManagementStakeholderName="View Releases and Manage Approvals";e.TimeStampFullDate="{0}, {1}";e.NotAuthorizedToAccessPage="TF400894: You are not authorized to access this page. Please contact your project administrator.";e.HostedWelcomePageTitle="Welcome to Azure DevOps Services";e.NavigationHelpMenuMsdn="MSDN";e.TeamHomeOpeningWorkItemForm="Opening work item form...";e.InvalidExtensionManifest="Extension manifest file format is invalid. ";e.AgileBoardsFeatureDescription="Agile project management taskboards";e.AddSearchFilterType="Work item type:";e.Header_ExitAdministration="Exit administration";e.BrowseForExtensions="Browse Azure DevOps extensions";e.ErrorMissingManifestFileFormat="TF400903: Could not find manifest file ({0}) in the plugin archive";e.TrialModeReminderMessage_Today="\u003cb\u003etoday\u003c/b\u003e";e.ProjectNameNotSpecified="Project name must be specified.";e.NewTeamProjectText="New team project";e.Header_Support="Support";e.Backlog="Backlog";e.TeamDoesNotExistOrNoAccess="TF400914: The specified team, {0}, either does not exist or you do not have access to it.";e.OtherCollections="Other collections";e.ExpandAll="Expand all";e.PageTitleServerHome="Welcome to Azure DevOps Server";e.HighContrastThemeName="High contrast";e.FeedbackFeatureName="Request and Manage Feedback";e.StakeholderAccountExpiredReminderMessage="Your current license {0} has expired. You will be assigned a \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=403541\"\u003eStakeholder license\u003c/a\u003e temporarily. Please contact your organization administrator.";e.VersionControlProperty="Version control:";e.TestManagementForBasicUsersFeatureDescription="Run tests assigned to you using the web-based Test Runner.";e.WelcomePageGettingStarted="Getting started";e.ManageSecurity="Manage security";e.GettingStartedCreateCollectionProgressPart1="We are currently creating your first collection and finalizing your organization configuration.";e.TestManagementForStakeholderName="Test summary access to stakeholder license users";e.CollapseAllToolTip="Collapse all";e.TeamHomeConfigureAreas="Configure work areas...";e.MenuItemsLoading="Loading...";e.InvalidCallbackName="Callback name contains invalid characters.";e.HelpMenuLabel="Help";e.PageTitleProjectHome="{0} project";e.ErrorPluginNotFound="TF400906: The plugin {0} could not be found";e.Filter="Filter";e.NavigationContentMenuItem_Instance="Azure DevOps Server";e.PortfolioBacklogManagementFeatureDescription="Create a portfolio of features and initiatives and trace your product backlog items to portfolio items.";e.GettingStartedRetryTeamProjectCreationLink="Retry team project creation";e.GitSupport="Git support";e.AdministerServer="Manage server";e.Header_Administration="Administration";e.OpenInVisualStudioPartDesc="Open this Team Project in Visual Studio";e.TeamHomeManageMembers="Manage all members...";e.MoreMyTeams="More my teams...";e.WelcomePageBrowseAll="Browse all...";e.MyWork="My work";e.RemoveFromRecentItems="Remove from recent items";e.WelcomePageCreateProjectDescription="Add a team project to a team  project collection.";e.AgoAMinute="a minute ago";e.NavigationContextMenuDefaultLabelTitle="Select a project";e.Header_KeyboardShortcuts="Keyboard shortcuts";e.Header_Community="Community";e.WorkItems="Work items";e.SendMailSendButton="Send";e.TestManagementInBuildAndReleaseFeatureDescription="Test services in build and release.";e.HubGroupDashboards="Dashboards";e.GettingStartedPatchLink="Download software";e.GettingStartedPatchText="Download and install the software necessary to connect to your team project from Visual Studio, Eclipse, Excel, or Microsoft Test Manager.";e.Application_NoTeamProjects="There are no team projects.";e.TeamSettings="Team settings";e.GettingStartedTeamProjectPart1="When your organization is ready, you will then be able to create a new team project for your team to collaborate in.";e.GettingStartedTeamProjectPart2="Create a new team project for your team to collaborate in.";e.WelcomePageNoRecentProjects="You haven\u0027t recently visited any project or teams.";e.SourcePropertiesGitUrl="Git repository URL";e.InvalidParameterFormat="Format of the parameter \u0027{0}\u0027 is invalid.";e.ViewBacklog="View backlog";e.BranchToDeployLabel="Branch to Deploy";e.TeamTitleFormat="{0} / {1}";e.ErrorNoPluginElementsFormat="TF400904: No plugin elements ({0}) were found in the plugin manifest file";e.TimeStampYesterdayAt="Yesterday at {0}";e.UnableToFindWindowsIdentity="Unable to find Windows identity for {0}";e.Gallery="Available extensions";e.SubscriptionLabel="Subscription";e.AgoHours="{0} hours ago";e.ManageWorkAreas="Manage work areas";e.AgoAYear="a year ago";e.AgoAWeek="a week ago";e.ManageProject="Manage project";e.ManageProfile="My profile";e.SearchInProject="Search in project";e.AgoYears="{0} years ago";e.ErrorPluginNameInvalidCharsFormat="Invalid character(s) in the plugin name. Plugin name can contain only letters, digits, space and the following characters:\r\n\r\n    {0}";e.AgoWeeks="{0} weeks ago";e.TeamHomeConfigureIterations="Configure schedule and iterations...";e.PortfolioBacklogManagementFeatureName="Agile Portfolio Management";e.TestManagementForStakeholderDescription="Stakeholder license users can view test summary charts on dashboards";e.NavigationContextMenuDefaultLabel="Projects";e.FilterToolTip="Filter";e.NavigationContentMenuItem_TeamProjectCollection="Collection";e.MoreMyCollections="More my collections...";e.ProjectHomeBladeTitle="Team Project";e.ExtensionSlowLoadWarningHeader="An Azure DevOps extension is loading slowly. Expand details to view options.";e.NavigationContextMenuBackToWelcomePage="Back to Welcome Page";e.TeamHomeMembersTitleFormat="Members ({0})";e.HtmlContentMsdnEligible="\u003cspan class=\"refresh-action\" \u003e\u003cb\u003eRetry\u003c/b\u003e\u003c/span\u003e";e.BranchToDeployMessage="Since your repository does not yet have a branch created, we will automatically use the first branch you create for deployments.";e.PropertiesPartTitle="Properties";e.CreateTeamProjectTitle="Create Team Project";e.NewMenuTitle="New";e.GettingStartedTutorialFeedbackDesc="Provide suggestions for how we can improve our Azure DevOps Services.";e.AdvancedPortfolioBacklogManagementFeatureDescription="Advanced portfolio management.";e.GettingStartedErrorCreatingProject="TF400911: There was an error creating the project. Please try again and if the problem persists \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=534538\" target=\u0027_blank\u0027\u003econtact our support team\u003c/a\u003e";e.StakeholderExpiredLicenseReminderLink="https://go.microsoft.com/fwlink/?LinkID=403541";e.SetupDeploymentDescription="Build, test, and deploy your website automatically when you check in code.";e.TeamProjectRenamedGlobalMessage="The team project {0} has been renamed to {1}";e.ProjectPickerBladeTitle="Choose project";e.TestManagementFeatureDescription="Web-based Test Case Management functionality.";e.ProjectNameInvalid="The project name is not valid.";e.BacklogManagementFeatureName="Basic backlog and sprint planning tools";e.TeamProjectWatermark="Enter team project name...";e.WelcomePageProjectConnectionMessage="Click \"Browse all...\" to connect to a project.";e.ExtensionDoesNotExist="Extension does not exist.";e.ReleaseManagementStakeholderDescription="View Releases and Manage Approvals";e.CreateProjectFailedMessage="Create Project Failed";e.FeatureEnablementSettings_Error_Invalid_Admin="TF400917: The current configuration is not valid for this feature. This feature cannot be used until you correct the configuration.";e.ManageExtensions="Manage extensions";e.ChartAuthoringFeatureName="Chart Authoring";e.ProjectCreationErrorTryAgain="try again";e.SendMailNoSubjectWarning="Are you sure you want to send this mail without a subject?";e.SignOut="Sign out";e.SidebarSearchWatermark="Search...";e.BacklogManagementFeatureDescription="Basic agile project management product and sprint backlog";e.NavigationContextMenuTeamLabelTitleFormat="Team \u0027{0}\u0027 in Project \u0027{1}\u0027";e.CreateFirstProjectWelcomeText="Welcome.  Your organization, \u003ca href=\u0027{0}\u0027 target=\u0027_blank\u0027\u003e{0}\u003c/a\u003e, is created and ready to go.  Now create your first team project where youll host your code and backlog. ";e.ExtensionErrorHeader="Failed to load extension";e.ProjectTeams="{0} teams";e.ProjectTitleFormat="{0}";e.RequiredFieldWatermark="Required...";e.ChartViewingFeatureDescription="View custom charts of your work item data.";e.CloseBrowserToCompleteSignoutMessage="You must close your browser to complete the sign out process.";e.Administration="Administration";e.NotSupportedBrowserMessage="\u003ch2\u003eAzure DevOps is designed for you, but maybe not for your browser.\u003c/h2\u003e\r\n\u003cp\u003eSome Azure DevOps features might not work correctly with the version of the web browser you\u0027re currently using.\u003c/p\u003e\r\n\u003cp\u003eTo get the most out of Azure DevOps, we recommend that you take a few minutes to upgrade to the current version of one of these browsers:\u003cbr\u003e\r\n  \u003cul\u003e\r\n\t\u003cli\u003e\u003ca href=\"https://windows.microsoft.com/en-US/internet-explorer/downloads/ie\"\u003eInternet Explorer\u003c/a\u003e\u003c/li\u003e\r\n  \u003cli\u003e\u003ca href=https://www.microsoft.com/en-us/windows/microsoft-edge\"\u003eMicrosoft Edge\u003c/a\u003e\u003c/li\u003e\r\n\t\u003cli\u003e\u003ca href=\"https://www.mozilla.com/en-US/firefox/new/\"\u003eMozilla Firefox\u003c/a\u003e\u003c/li\u003e\r\n\t\u003cli\u003e\u003ca href=\"https://www.google.com/chrome\"\u003eGoogle Chrome\u003c/a\u003e\u003c/li\u003e\r\n\t\u003cli\u003e\u003ca href=\"https://www.apple.com/safari/\"\u003eSafari\u003c/a\u003e\u003c/li\u003e\r\n  \u003cul\u003e\r\n\u003c/p\u003e";e.TeamHomeMoreWorkItemTypes="more";e.PinnedItemsTileInfoMessage="You can pin builds, version control paths, work item queries and charts to the team homepage to display them as tiles.";e.ProcessTemplateLabel="Process Template";e.ManageTeamMembers="Manage team members";e.ProjectSettings="Project settings";e.EarlyAdopterModeReminderMessage_MultipleDays="Your account is an Early Adopter account. In \u003cb\u003e{0} days\u003c/b\u003e your account will revert to a standard account. \u003ca href=\u0027{1}\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.PageTitle_Hosted="Microsoft Azure DevOps Services";e.RequestFeedback="Request feedback";e.WelcomePageServerAdministrationDescription="Manage team project collections, team projects, users, groups, and permissions.";e.StakeholderReminderMessage="As a stakeholder, you can access the backlog, task and Kanban boards, work items and manage approvals for Releases. {0}.";e.EarlyAdopterAccountLearnMoreUrl="https://go.microsoft.com/fwlink/?LinkID=330423";e.ManageTeams="Manage teams";e.AjaxRequestFailedWithStatus="Ajax request failed with status: {0}.";e.HomePageUpgradeToFullVersionMessage="Azure DevOps Services is live! Up to 5 users are free, plus for a limited time all use is free. \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=269576\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.CancelText="Cancel";e.GettingStartedTeamProject="Create a team project";e.ActionsTitle="Actions";e.ProjectHomeBladeSubTitle="Team Project";e.PinnedItemsTitle="Pinned Items";e.Marketplace="Marketplace";e.ErrorPluginElementMissingNameFormat="TF400905: A plugin element ({0}) was found with no \"{1}\" attribute";e.ReleaseManagementFeatureName="Author Release Pipelines and Manage Releases";e.UnsavedChanges="You have unsaved changes.";e.ManageSecurityPreferences="Security";e.AllItemsText="All";e.SignInAsDifferentUser="Sign in as...";e.StakeholderMsdnExpiredReminderMessage="Your MSDN subscription has expired. You will be assigned a \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=403541\"\u003eStakeholder license\u003c/a\u003e temporarily. Check your MSDN subscription status at \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=513087\"\u003eMy Account portal\u003c/a\u003e.";e.CollapseAll="Collapse all";e.Header_About="About";e.WelcomePageViewOnlineHelpTitle="Visit the MSDN Library";e.AdministerAccount="Manage organization";e.CDNDisclaimer="Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use  https://www.asp.net/ajaxlibrary/CDN.ashx.";e.SourceQuickStartBladeTitle="Add some code";e.Eclipse="Eclipse";e.SendMailTo="To";e.MoreMyProjects="More my projects...";e.InvalidZipArchiveFile="TF400900: Invalid zip archive file : {0}";e.AutomaticCulture="Browser";e.SendMailTitle="Send mail";e.CreateProjectBladeSubTitle="Create a team project for Azure DevOps Server.";e.SourcePropertiesPartTitle="Source";e.SearchWorkItems="Search work items";e.TestManagementForExpressSkuFeatureName="Analyze test results and manage machine groups";e.ManageNotifications="Notification settings";e.CreateTeamProjectPartDesc="Create a team project for Azure DevOps Services";e.TeamHomeWorkItemCreatedMessage="{0} created {1}";e.SetUpContinuousDeploymentPartTitle="Set Up Continuous Deployment";e.UnableToAccessCollectionFromCompatUrl="TF400895: Unable to access collection specified : {0}";e.Team_Members="Members ({0})";e.AccountHomePage_ShowAboutTFSHosted_VSO="Display About Azure DevOps Services";e.AgoMinutes="{0} minutes ago";e.OpenInVisualStudioPartShortTitle="Open in VS";e.TestMailSuccess="Email was successfully sent from Azure DevOps to the configured SMTP server.";e.ResourceUsageLoadTestingUnit="virtual user minutes";e.ResourceUsageLoadTestingName="Load Testing";e.NewTeamProjectGitText="New team project + Git";e.TeamHomeViewQueries="View queries";e.InvalidLicenseException="TF400409: You do not have licensing rights to access this feature: {0}";e.ProjectNotFound="TF400901: Project not found: {0}";e.TeamProjectSubHeader="Team Project";e.FirstProjectConfirmationLearn="Are you ready to write some code?  Get started by connecting your project directly to {0}, or learn how to connect with {1}, or {2}.  We think you and your team are going to absolutely love this.";e.AdvancedHomePageFeatureName="Advanced home page";e.NavigationContentMenuItem_Account="Your organization";e.WelcomePageVisitGalleryDescription="Access extensions, process templates, and power tools for Visual Studio and Azure DevOps Server.";e.TestManagementForBasicUsersFeatureName="Web-based Test Execution";e.XmlSchemaErrorLine="({0},{1}) {2}";e.AddSearchFilterCreatedBy="Created by:";e.ResourceUsageBlockedNoSubscription="Your organization has used all the free quantity of this resource. Click Learn more above to set up billing for your organization.";e.AccountHomePage_ShowAnnouncements="Display all announcements";e.InvalidParameter="Parameter \u0027{0}\u0027 is invalid";e.ExtensionsDisabledMessage="Extensions are disabled.";e.TeamHomeProjectAdminTitle="Administration";e.CollectionSettings="Collection settings";e.NavigationContextMenuTeamLabelFormat="{0} / {1}";e.WelcomePageVisitGalleryTitle="Visit the Visual Studio Gallery";e.NoImageDataUploaded="No image data uploaded.";e.FetchingSearches="Fetching recent searches";e.PageTitle="Azure DevOps Server";e.CreateDeploymentPartShortTitle="Create Deployment";e.SendMailAttachments="Attachments";e.TimeStampDayAt="{0} at {1}";e.GettingStartedTutorialLink="Beginner\u0027s guide";e.GettingStartedTutorialText="A step-by-step guide to help you get up and running now.";e.OpenVisualStudio="Open new instance of Visual Studio";e.InvalidRedirectException="The specified redirect URL failed validation - the validator returned {0}. Please check to make sure the provided redirect URL is well-formed.";e.UnknownArtifactType="Unknow artifact type: {0}";e.TimeStampTodayAt="Today at {0}";e.AddSearchFilterAssignedTo="Assigned to:";e.UnsupportedBrowserWarningMessageHosted="You are using an unsupported browser. For the best experience, please upgrade to a newer browser. \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=799815\" target=\"_blank\"\u003eLearn more\u003c/a\u003e";e.NewBacklogItemToolTip="Add an item to this backlog";e.AccountSettings="Organization settings";e.GettingStartedRetryCollectionCreationLink="Retry collection creation";e.WelcomePageSubmitFeedbackDescription="Provide suggestions for how we can improve Team Web Access and Azure DevOps Server.";e.ExtensionSlowLoadWarningBody="It is taking a long time to load the Azure DevOps extension content from the following url: \u003cbr /\u003e\u003ca /\u003e";e.CreateTeamProjectPartShortTitle="Team Project";e.EarlyAdopterModeReminderMessage_Today="Your account is an Early Adopter account. \u003cb\u003eToday\u003c/b\u003e your account will revert to a standard account. \u003ca href=\u0027{0}\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.ChooseWebsiteWizardStepLabel="Choose Website";e.AdvancedHomePageFeatureDescription="Advanced home page.";e.ImageSizeTooLarge="Uploaded image exceeds maximum size.";e.NavigationHelpMenuGettingStarted="Getting started";e.NoCollectionSpecifiedInCompatUrl="TF401198: No project collection specified in the request.";e.UnsavedChangesWithNames="You have unsaved changes:";e.RequireOnPremiseDeploymentError="TF400915: This service is not available.";e.TestMailFailure="Error sending email message. Exception details: {0}";e.TfsAccountBoundToSubscriptionMessage="This Azure DevOps organization is already bound to your subscription.";e.PlansFeatureName="Delivery Plans";e.InvalidErrorParameter="Invalid error parameter";e.CreateFirstProject="Create your first team project";e.Board="Board";e.CreateProjectFailed="Create Project Failed";e.SendMailSpecifyToAddress="There must be at least one email address for To field.";e.AgoDays="{0} days ago";e.AgoADay="a day ago";e.AccountHomePage_ShowAboutTFSHosted="Display About Azure DevOps Services";e.MoreCollectionProjects="More {0} projects...";e.XCode="Xcode";e.FeatureEnablementSettings_Error_Link_Invalid_Admin="https://go.microsoft.com/fwlink/?LinkId=298890";e.JobFailed="TF400902: There was a failure executing the job. Job Id for the failed creation:{0}";e.HubGroupRelease="Release";e.AccountHomePage_ShowAboutTFSOnPerm="Display About Azure DevOps Server";e.NewTeamProjectProjectPickerItem="New Team Project";e.ConfirmToDiscardEditedEmail="Leaving this page will discard the email. Do you want to exit?";e.InvalidContentType="The uploaded file must be an image.";e.FeatureEnablementSettings_Error_Missing="This feature cannot be used until an Azure DevOps Administrator configures it for this team project.";e.FullOnPremProductName="Azure DevOps Server 2020";e.ViewTaskBoard="View task board";e.TestMailMessage="This message was sent to verify Azure DevOps email settings.";e.CreateTeamProjectPartTitle="Team Project";e.FeedbackFeatureDescription="Solicit feedback";e.ServerTimeZone="Server: {0}";e.VisualStudio="Visual Studio";e.StakeholderMsdnEligibleReminderMessage="\u003cdiv class=\"stakeholder-license-message\"\u003e We could not verify your Visual Studio subscription so weve downgraded you to Stakeholder. Please visit our \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=733421\u0026clcid=0x409\"\u003e\u003cb\u003etroubleshooting page\u003c/b\u003e\u003c/a\u003e for more details then click here to {0} \u003c/div\u003e";e.TeamHomeTeamsTitle="Teams";e.TeamFoundationServerName="Azure DevOps Server 2020";e.TeamHomeCreateWorkItemLink="+ {0}";e.TrialFeatureUrl="https://go.microsoft.com/fwlink/?LinkID=325554";e.ExpandAllToolTip="Expand all";e.ProjectQuickStartTitle="Your Team Project\u0027s up";e.OpenInVisualStudioPartTitle="Open in Visual Studio";e.NavigationContextMenuProjectLabelTitleFormat="Project \u0027{0}\u0027";e.WelcomePageRecentItems="Recent projects and teams";e.FeedbackMenuHint="Feedback";e.NoResultsToDisplay="There are no results to display.";e.AdvancedBacklogManagementFeatureDescription="Advanced backlog and sprint planning tools.";e.LearnGitMessage="Learn how you can use the Git distributed version control system in your team projects.";e.ProjectQuickStartDesc="Kick-start your project with these tools and tips";e.GettingStartedViewOnlineHelp="Learn more, dig deeper";e.HubGroupSource="Code";e.NavigationRecentProjectsAndTeams="Recent projects and teams";e.InternalServerError="Internal server error:";e.ChartAuthoringFeatureDescription="Create customized charts to view and visualize your work item data.";e.AdminFeatureDescription="Administer organization and team projects.";e.LearnMore="Learn more";e.PageTitleWithContent="{0} - Azure DevOps Server";e.SourceControlTitle="Source";e.Settings="Settings";e.StakeholderReminderLink="https://go.microsoft.com/fwlink/?LinkID=402656";e.EllipsisMenuTitle="Configure";e.NoFilesSelected="No files were selected to be uploaded.";e.InvalidEmailWithEmail="Please enter a valid email address ({0}).";e.PageTitleWithContent_Hosted="{0} - Azure DevOps Services";e.TestMailTitle="Test Mail Settings";e.ResourceUsageBuildUnit="minutes";e.ResourceUsageBuildName="Build";e.PageNotFound="Page not found.";e.AddASearchFilter="Add a search filter";e.FeatureEnablementSettings_Error_LinkText_Invalid_Admin="Learn about how to correct your configuration";e.StakeholderReminderLinkText="Learn more";e.BuildFeatureName="Build";e.ProjectDoesNotExistOrNoAccess="TF400896: The project with guid {0} does not exist or you do not have access.";e.TeamSettings_ManualCorrectionLink="https://go.microsoft.com/fwlink/?LinkID=242983";e.Application_TeamProjects="Team projects ({0})";e.WebApiUndefinedRequestError="An undefined error occurred while attempting to connect to the server. Status code {0}: {1}.";e.GettingStartedErrorCreatingCollection="TF400910: There was an error creating the collection. Contact our support team by visiting https://www.visualstudio.com/support-overview-vs";e.GoToProjectPortal="Go to project portal";e.Activities="Activities";e.UnsupportedBrowserWarningMessage="You are using an unsupported browser. For the best experience, please upgrade to a newer browser. \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=799814\" target=\"_blank\"\u003eLearn more\u003c/a\u003e";e.NavigationContentMenuItem_Team="Team";e.Application_SelectTeamProject="To get started, select the team project you want to connect to.";e.AddSearchFilterState="State:";e.RetrievingWorkItemTypes="Retrieving work item types...";e.NavigationViewUnknownTabErrorFormat="Could not find navigation tab with id: {0}.";e.ChooseProjectWizardStepLabel="Choose Project";e.WelcomePageViewOnlineHelpDescription="Access online help for Visual Studio Application Lifecycle Management and Azure DevOps Server.";e.Security="Security";e.UnkownCompatibilityUrl="TF400907: The URL specified appears to be from an earlier version of Web Access.  The format was not recognized : {0}";e.ManageProjectMembers="Manage project members";e.BrowseAllTeams="Browse all";e.AdvancedPortfolioBacklogManagementFeatureName="Advanced portfolio management";e.EmailExceedsMaxBodySizeLimit="TF400582: The email body exceeds the maximum allowed size of {0} KB. Reduce the contents of the email body and try again.";e.Asterix="*";e.HubGroupHome="Home";e.HubGroupTest="Test";e.CodeFeatureName="Code";e.PinningBlankSlateMessage="Pin items to the homepage to display them here as tiles. You can pin work item queries, work item charts, build pipelines, and version control paths to the homepage.";e.ManageScheduleIterations="Manage schedule and iterations";e.UnsavedChangesMore="more...";e.BrowseTheMarketplace="Browse marketplace";e.CreateProjectBladeTitle="Your new Team Project is almost ready.";e.AccountNameLabel="Organization Name";e.FeatureEnablementSettings_Error_LinkText_Missing_Admin="Configure feature";e.PluginNotFound="TF400912: Could not find plugin with name \"{0}\".";e.GettingStartedProgressNotStarted="Scheduling collection creation...";e.CodeFeatureDescription="Code repository functionality.";e.FollowingErrors="The following error(s) occurred:";e.MoreProjectTeams="More {0} teams";e.FeatureEnablementSettings_Error_Invalid="TF400916: The current configuration is not valid for this feature. This feature cannot be used until an Azure DevOps Administrator corrects the configuration.";e.RequireHostedDeploymentError="TF400915: This service is not available.";e.NotAMemberOfATeam="You are not a member of a team.";e.ManageProjectGroups="Manage teams and project groups";e.TeamHomeManageTeams="Manage teams...";e.AccountNameCreateInfoMessage="This will be the organization name on your vanity URL, i.e., organizationname.visualstudio.com";e.GettingStartedAccountActive="The organization is active and ready for use.  Please save the above Url for your records.";e.ExternalControlLoading="Loading...";e.BuildFeatureDescription="Build services.";e.TeamHomeShowLessMembers="Show less members";e.StakeholderExpiredLicenseReminderLinkText="Learn more";e.VersionControlLabel="Version Control";e.NavigationContextMenuHostedBackTo="Organization home";e.TeamHomeActivitesTitle="Activities";e.TileEllipsisMenuTitle="Configure tile";e.ViewQueries="View queries";e.AgoLessThanAMinute="just now";e.ReleaseManagementFeatureDescription="Author release pipelines, create and manage releases";e.NotSupportedBrowser="Your browser is not supported";e.ProjectCreationError="There was an error creating your project. Please {0}.";e.SendMailFrom="From";e.DefaultThemeName="Default";e.TileLoading="loading...";e.SearchInOrganization="Search in organization";e.ChartEllipsisMenuTitle="Configure chart";e.ResourceUsageBlockedWithSubscription="Your organization has used all the free quantity of this resource. Click Learn more above to enable paid resources.";e.Members="Members";e.ProcessTemplateProperty="Process template:";e.TeamHomePage_ShowHowTo="Display How to";e.ControlPanel="Control panel";e.TeamHomeLoadingMembers="Loading team members...";e.PlansDescription="Delivery Plans help you drive alignment across teams by overlaying several backlogs onto your delivery schedule.";e.UserNeedsToBeTeamAdmin="User needs to be a team administrator to perform this operation.";e.AccountNameWatermark="Enter organization name...";e.TrialModeReminderMessage="All features have been enabled during your trial. This trial will end {0}. \u003ca href=\u0027{1}\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.SourceQuickStartBladeSubTitle="Use your favorite tool to publish your project";e.AdvancedBacklogManagementFeatureName="Advanced backlog and sprint planning tools";e.NavigationContentMenuItem_TeamProject="Project";e.MyFavorites="My favorites";e.AjaxRequestTimedOut="Ajax request has been timed out.";e.NavigationContextMenuOnPremBackTo="Server home";e.TestManagementInBuildAndReleaseFeature="Test services in build and release";e.CloseBrowserToCompleteSignoutWarning="Sign out: close browser to complete sign out";e.TrialModeReminderMessage_MultipleDays="in \u003cb\u003e{0} days\u003c/b\u003e";e.ServerSettings="Server settings";e.GettingStartedTutorialFeedback="Make a suggestion";e.SendMailNoSubjectWarningTitle="Confirmation";e.AgoMonths="{0} months ago";e.HubGroupBuild="Build";e.HubGroupAdmin="Administration";e.YouAreAlmostThereMessagePart2="Click the {0}New Team Project{1} button below to create your first project. ";e.YouAreAlmostThereMessagePart3="The {0}beginners guide{1} has a step-by-step walkthrough on how to upload your source code, set up a build, and start managing your work. Youre almost there";e.YouAreAlmostThereMessagePart1="Welcome to Azure DevOps Services!";e.ImageOf="Image of {0}";e.HubGroupUsers="Users";e.NetworkConnectionUnavailable="TF400893: Unable to contact the server. This is most likely caused by a network error. Please check your connection and try again.";e.HubGroupRooms="Rooms";e.AdminFeatureName="Administer organization";e.TrialFeatureExpiredUrl="https://go.microsoft.com/fwlink/?LinkID=328611";e.BuildTitle="Build";e.FeatureEnablementSettings_Error_Missing_Admin="This feature cannot be used until you configure it for this team project.";e.OpenWithVisualStudioTooltip="Open Visual Studio and connect Team Explorer to this project.";e.TeamFoundationServiceName="Azure DevOps Services";e.ExtensionErrorBody="We were unable to load an Azure DevOps extension. To load this component, please ensure that you are able to access the following url: \u003cbr /\u003e\u003ca /\u003e";e.AccountTimeZone="Organization: {0}";e.ManageAlerts="Alerts";e.OpenWithVisualStudio="Open with Visual Studio to connect";e.NewBacklogItem="New";e.ErrorSendEmail="TF400969: An error occurred while attempting to send the email. Retry at a later time.";e.NavigationAdminMenuItemFormat="Administer {0}";e.TeamSettings_ManualCorrectionStepsLinkText="correct your configuration manually";e.SendMailSubject="Subject";e.TeamHomeLoadingActivities="Loading activities...";e.TestManagementFeatureName="Web-based Test Case Management";e.PersonalExtensionsDisabledMessage="Personal extensions are disabled.";e.TeamContextNotFound="TF400909: There is no team context.";e.CollectionProjects="{0} projects";e.Project_Teams="{0} teams ({1})";e.RequiresVS2012="Requires Visual Studio 2013+";e.ScrumTemplateInfoMessage="Scrum is an iterative, incremental framework for project management and agile software development. This template includes work items and reports to help your Scrum team be successful.";e.TestManagementForExpressSkuFeatureDescription="Analyze test results and manage machine groups.";e.CreateTeamProjectNoSubError="No subscriptions available to create project edit scope";e.AgileBoardsFeatureName="Agile boards";e.TeamHomeViewBoard="View board";e.RemoveMRUTeamTitle="Remove from this list";e.SendMailWarning="Unable to send message to the following recipients: {0}\r\nPreferred Email address is not configured within the users profile.";e.ProjectNameLabel="Name";e.TeamHomeViewBacklog="View backlog";e.InvalidEmailAddressFormat="The following email address is not valid: \u0027{0}\u0027. Please specify a valid email address in the form \u0027user@host\u0027 or \u0027Display name \u003cuser@host\u003e\u0027.";e.InvalidArgumentValue="Invalid argument value.";e.HubGroupWorkItems="Work";e.FirstProjectConfirmationHeader="Your new project, {0}, is ready!";e.ChartViewingFeatureName="Chart Viewing";e.Home="Home";e.PageTitleCollectionHome="{0} project collection";e.Save="Save";e.SendMailNotEnabled="Sending email is not enabled. Please contact your administrator.";e.EarlyAdopterModeReminderMessage_OneDay="Your account is an Early Adopter account. In \u003cb\u003e{0} day\u003c/b\u003e your account will revert to a standard account. \u003ca href=\u0027{1}\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.TrialModeReminderMessage_OneDay="in \u003cb\u003e{0} day\u003c/b\u003e";e.ViewReports="View reports";e.ConfigureOptionsWizardStepLabel="Configure Options";e.AgoAnHour="an hour ago";e.ExtensionErrorAdditionalSteps="You can try checking your network connection and refreshing this page.";e.WelcomePageSubmitFeedbackTitle="Make a suggestion";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/Controls/ImportCSVPanel",["require","exports","react","react-dom","OfficeFabric/Utilities","WorkItemTracking/Scripts/CustomerIntelligence","OfficeFabric/Panel","OfficeFabric/Button","OfficeFabric/MessageBar","OfficeFabric/Spinner","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Telemetry/Services","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Controls/QueryResultCSVImporter","VSS/LWP","VSS/LoaderPlugins/Css!Controls/ImportCSVPanel"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){function k(n){var t=document.createElement("div"),u=__assign(__assign({},n),{onDismiss:function(i){if(r.unmountComponentAtNode(t),n.onDismiss)n.onDismiss(i)},onImportClick:function(i){r.unmountComponentAtNode(t);n.onImportClick(i)}});r.render(i.createElement(b,__assign({},u)),t)}Object.defineProperty(t,"__esModule",{value:!0});t.showImportCSVPanel=t.ImportCSVPanel=void 0;var b=function(n){function t(t){var r=__construct(this,n,[t]),u,f,e,s;for(u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.c_csvExtension="csv",r._onRenderHeader=function(n,t){return i.createElement("div",{className:"column-options-panel-header"},t(n))},r._onRenderFooterContent=function(){var n=r.state.isLoading;return i.createElement("div",{style:{textAlign:"right"}},!n&&i.createElement(o.PrimaryButton,{ariaLabel:c.Import,disabled:!r._isCSVDataValid(),onClick:r._onImportClick,style:{marginRight:"8px"}},c.Import),i.createElement(o.DefaultButton,{ariaLabel:c.Cancel,onClick:r._onDismiss},c.Cancel))},f=v.TfsContext.getDefault(),e=l.ProjectCollection.getConnection(f).getService(y.WorkItemStore),r._queryResultCSVImporter=new p.QueryResultCSVImporter(e,f.navigation.project,r.updatePercentComplete.bind(r)),s=i.createElement("input",{type:"file",accept:".csv",onChange:function(n){r._filterFilesAndUpdateState(n.target.files)}}),r._container=i.createElement("div",{className:"workitemcontrol work-item-control initialized"},s),r.state={csvString:null,csvImportData:null,isLoading:!1,error:null,percentComplete:0},r}return __extends(t,n),t.prototype.render=function(){return i.createElement(e.Panel,{isOpen:!0,onRenderHeader:this._onRenderHeader,closeButtonAriaLabel:c.ClosePanel,headerText:c.ImportWorkItems,type:e.PanelType.custom,customWidth:"450px",isLightDismiss:!1,isFooterAtBottom:!0,className:"column-options-panel",onRenderFooterContent:this._onRenderFooterContent,onDismiss:this._onDismiss,layerProps:{className:"column-options-panel-layer"}},this._renderContents())},t.prototype.updatePercentComplete=function(n){this.setState({percentComplete:n})},t.prototype._renderContents=function(){var t=this.state.error!==null,n=this.state.isLoading,r="".concat(String(Math.floor(this.state.percentComplete*100)),"%");return i.createElement("div",{className:"importcsv-panel-contents"},!n&&i.createElement("div",{className:"file-container"},i.createElement("div",{className:"importcsv-panel-title"},c.ImportCSVPanelText),this._container),n&&i.createElement("div",null,i.createElement("div",null,c.ImportCSVPanelLoadingText),i.createElement(h.Spinner,{className:"importcsv-loading-spinner",size:h.SpinnerSize.large,label:r})),t&&i.createElement("div",null,i.createElement("div",{className:"importcsv-error-title"},c.ImportCSVErrorHeader),i.createElement(s.MessageBar,{messageBarType:s.MessageBarType.error},this.state.error)))},t.prototype._filterFilesAndUpdateState=function(n){var f=this,i,r,t,u;for(this.setState({error:null}),i=new FileReader,r=null,t=0;t<n.length;t++)if(u=n[t].name.split(".").pop(),u===this.c_csvExtension){r=n[t];break}if(r===null){this.setState({error:c.InvalidCSVFileFormat});return}i.onload=function(){var n=i.result.toString();f.setState({csvString:n})};i.readAsText(r)},t.prototype._isCSVDataValid=function(){return this.state.csvString!==null},t.prototype._onImportClick=function(){var n=this;this.setState({isLoading:!0,error:null});this._queryResultCSVImporter.importCSVFile(this.state.csvString).then(function(t){n.setState({isLoading:!1,csvImportData:t,percentComplete:100});n.props.onImportClick(n.state.csvImportData)}).catch(function(t){var i=t.message||t;a.publishEvent(new a.TelemetryEventData(f.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,f.WITCustomerIntelligenceFeature.IMPORTCSV_IMPORT_ERROR,{error:i,errorType:t.errorType||"ValidationError"}));n.setState({isLoading:!1,error:i,csvImportData:null,percentComplete:0,csvString:null})})},t.prototype._onDismiss=function(){this._queryResultCSVImporter.dispose();this.props.onDismiss(this.state.isLoading)},t.componentType="importCSVPanel",__decorate([u.autobind],t.prototype,"_onImportClick",null),__decorate([u.autobind],t.prototype,"_onDismiss",null),t}(i.Component);t.ImportCSVPanel=b;t.showImportCSVPanel=k;w.registerLWPComponent(b.componentType,b)});

define("WorkItemTracking/Scripts/Controls/ProgressBarOverlay",["require","exports","react","react-dom","OfficeFabric/ProgressIndicator","VSS/Utils/Core","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.ProgressBarOverlay=void 0;var o=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.state={label:t.label,description:t.description,percentComplete:t.percentComplete},i}return __extends(t,n),t.prototype.update=function(n){this.setState({label:n.label,description:n.description,percentComplete:n.percentComplete})},t.prototype.render=function(){return i.createElement("div",{className:"progress-indicator-overlay"},i.createElement(u.ProgressIndicator,{className:"progress-indicator",label:this.state.label,description:this.state.description,percentComplete:this.state.percentComplete,barHeight:6}))},t}(i.Component),s=function(){function n(n,t){this._referenceElement=n;this._label=t.label;this._current=t.current;this._total=t.total;this._increment=t.increment}return n.prototype.dispose=function(){this._delayedShowFunction&&this._delayedShowFunction.cancel();this._delayedHideFunction&&this._delayedHideFunction.cancel();this._hideProgressBarOverlay()},n.prototype.show=function(n,t){this._delayedShowFunction&&this._delayedShowFunction.cancel();this._delayedHideFunction&&this._delayedHideFunction.cancel();this._delayedShowFunction=f.delay(this,n,this._showProgressBarOverlay,[t||e.ProgressBarLoading])},n.prototype.hide=function(n){this._delayedShowFunction&&this._delayedShowFunction.cancel();this._delayedHideFunction&&this._delayedHideFunction.cancel();n===undefined||n===null||n<0?this._hideProgressBarOverlay():this._delayedHideFunction=f.delay(this,n,this._hideProgressBarOverlay)},n.prototype.increment=function(n){var t=this._current+(n&&n>=0?n:this._increment);this._current=Math.min(t,this._total);this._progressBar&&this._progressBar.update({label:this._label,description:this._getDescription(),percentComplete:this._getPercentComplete()})},n.prototype._getDescription=function(){var n=Math.min(this._current+1,this._total),t=Math.min(this._current+this._increment,this._total);return"".concat(this._label," ").concat(n," - ").concat(t," of ").concat(this._total,".")},n.prototype._getPercentComplete=function(){return this._current/this._total},n.prototype._showProgressBarOverlay=function(){var n;this._element||(this._element=document.createElement("div"));var t=this._label,u=this._getDescription(),f=this._getPercentComplete();this._progressBar=r.render(i.createElement(o,{label:t,description:u,percentComplete:f}),this._element);n=this._referenceElement.parentElement;n.insertBefore(this._element,this._referenceElement)},n.prototype._hideProgressBarOverlay=function(){this._element&&(r.unmountComponentAtNode(this._element),this._element.parentNode.removeChild(this._element),this._element=null)},n}();t.ProgressBarOverlay=s});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/LoadingSpinnerOverlay",["require","exports","react","react-dom","OfficeFabric/Spinner","VSS/Utils/Core","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","VSS/LoaderPlugins/Css!Controls/WorkItemForm/LoadingSpinnerOverlay"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.LoadingSpinnerOverlay=void 0;var o=function(){function n(n){this._referenceElement=n}return n.prototype.dispose=function(){this._delayedShowFunction&&this._delayedShowFunction.cancel();this._delayedHideFunction&&this._delayedHideFunction.cancel();this._hideLoadingOverlay()},n.prototype.show=function(n,t){this._delayedShowFunction&&this._delayedShowFunction.cancel();this._delayedHideFunction&&this._delayedHideFunction.cancel();this._delayedShowFunction=f.delay(this,n,this._showLoadingOverlay,[t||e.Loading])},n.prototype.hide=function(n){this._delayedShowFunction&&this._delayedShowFunction.cancel();this._delayedHideFunction&&this._delayedHideFunction.cancel();n===undefined||n===null||n<0?this._hideLoadingOverlay():this._delayedHideFunction=f.delay(this,n,this._hideLoadingOverlay)},n.prototype._showLoadingOverlay=function(n){this._element||(this._element=document.createElement("div"));r.render(i.createElement("div",{className:"loading-spinner-overlay"},i.createElement(u.Spinner,{size:u.SpinnerSize.large,label:n})),this._element);var t=this._referenceElement.parentElement;t.insertBefore(this._element,this._referenceElement)},n.prototype._hideLoadingOverlay=function(){this._element&&(r.unmountComponentAtNode(this._element),this._element.parentNode.removeChild(this._element),this._element=null)},n}();t.LoadingSpinnerOverlay=o});

define("WorkItemTracking/Scripts/Controls/WorkItemsNavigator",["require","exports","VSS/Utils/Core","VSS/Utils/String","VSS/Diag","VSS/Controls/Navigation","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Events/Handlers","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/TFS.WorkItemTracking","VSS/Telemetry/Services","WorkItemTracking/Scripts/Controls/WorkItemsProvider","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/CustomerIntelligence"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemsNavigator=void 0;var y=function(){function n(n){this._selectedIndex=-1;this._previousIndex=-1;this._count=-1;this._workItemId=-1;this.options=n||{}}return n.prototype.isNextAvailable=function(){return this._workItemsProvider&&this._selectedIndex>=0&&this._selectedIndex<this._count-1},n.prototype.isPreviousAvailable=function(){return this._workItemsProvider&&this._selectedIndex>0&&this._selectedIndex<this._count},n.prototype.getStatusText=function(){return!this._workItemsProvider||this._selectedIndex<0||this._count<0||this._selectedIndex>this._count-1?"":r.format(e.TriageSummary,this._selectedIndex+1,this._count)},n.prototype.getCiData=function(){return{FromIndex:this._previousIndex,ToIndex:this._selectedIndex,NumberOfWorkitems:this._count}},n.prototype.navigateNext=function(){this.isNextAvailable()&&this._fireEvent(n.EVENT_NAVIGATE_NEXT)},n.prototype.navigateToQueryResults=function(t){t&&c.publishEvent(new c.TelemetryEventData(v.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,v.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_BACK_TO_QUERY_RESULTS,{BackToQueryResultsCommand:t,IsFullscreen:f.FullScreenHelper.getFullScreen(),CurrentWorkItemIndex:this._selectedIndex,WorkItemsCount:this._count}));this._fireEvent(n.EVENT_NAVIGATE_QUERY_RESULTS)},n.prototype.navigatePrevious=function(){this.isPreviousAvailable()&&this._fireEvent(n.EVENT_NAVIGATE_PREVIOUS)},n.prototype.setProvider=function(n){this._workItemsProvider!==n&&(this._workItemsProvider=n,this.reset())},n.prototype.getProvider=function(){return this._workItemsProvider},n.prototype.getSelectedWorkItemId=function(){return this._workItemId},n.prototype.getWorkItemsCount=function(){return this._count},n.prototype.getSelectedIndex=function(){return this._selectedIndex},n.prototype.update=function(t,r,f){var e=this,o;this._count=t;this._previousIndex=this._selectedIndex;this._selectedIndex=r;this._workItemId=f;this._fireIndexChanged||(o=function(){e._fireEvent(n.EVENT_NAVIGATE_INDEX_CHANGED,e)},this._fireIndexChanged=new i.DelayedFunction(this,250,"navigateIndexChanged",o));this._fireIndexChanged.reset()},n.prototype.reset=function(){this.update(-1,-1,null)},n.prototype.prefetchNextAvailableWorkItem=function(n){var o=s.ProjectCollection.getConnection(n).getService(h.WorkItemStore),t=a.WorkItemManager.get(o).getLastRetrievedWorkitemCIData(),f,e;if(t&&($.extend(t,this.getCiData()),c.publishEvent(new c.TelemetryEventData(v.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,v.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_PREFETCH_NEXT_WORKITEM,t))),this.isNextAvailable()){var y=this.getProvider(),p=l.QueryResultsProvider.isRecycleBinQueryResultsProvider(y),w=this._selectedIndex+1,r=y.getWorkItemIdAtDataIndex(w);r&&(f=250,e=function(){a.WorkItemManager.get(o).beginGetWorkItem(r,function(){u.logTracePoint("TriageView.showWorkItem.prefetchComplete")},function(){u.logWarning("TriageView.showWorkItem.prefetchFailed: "+r)},p)},this._executePrefetchWorkItemFunc?(this._executePrefetchWorkItemFunc.cancel(),this._executePrefetchWorkItemFunc.setDelay(f),this._executePrefetchWorkItemFunc.setMethod(this,e)):this._executePrefetchWorkItemFunc=new i.DelayedFunction(this,f,"prefetchWorkItem",e),this._executePrefetchWorkItemFunc.reset(),this._executePrefetchWorkItemFunc.start())}},n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype._fireEvent=function(n,t,i){if(this._events){var r;if(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r)return!1}},n.prototype.attachEvent=function(n,t){this._events||(this._events=new o.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n.EVENT_NAVIGATE_INDEX_CHANGED="navigate-index-changed",n.EVENT_NAVIGATE_NEXT="navigate-next",n.EVENT_NAVIGATE_PREVIOUS="navigate-previous",n.EVENT_NAVIGATE_QUERY_RESULTS="navigate-query-results",n}();t.WorkItemsNavigator=y});

define("WorkItemTracking/Scripts/MenuItems/MenuItemHelpers",["require","exports","VSS/Context","VSS/Utils/String"],function(n,t,i,r){function f(n){if(n.rows)return u.Queries;if(n.workItemIds)return u.Backlog;if(n.id){var t=i.getPageContext().navigation.currentAction;return r.localeIgnoreCaseComparer(t,"TaskBoard")===0?u.Taskboard:u.Kanban}return typeof n.workItemAvailable=="boolean"?u.WorkItemForm:u.Unknown}Object.defineProperty(t,"__esModule",{value:!0});t.GetContextMenuLocation=t.MenuItemLocation=void 0;var u;(function(n){n[n.Unknown=0]="Unknown";n[n.Backlog=1]="Backlog";n[n.Kanban=2]="Kanban";n[n.Taskboard=3]="Taskboard";n[n.Queries=4]="Queries";n[n.WorkItemForm=5]="WorkItemForm"})(u=t.MenuItemLocation||(t.MenuItemLocation={}));t.GetContextMenuLocation=f});

define("WorkItemTracking/Scripts/MenuItems/DeleteMenuItemCommonHelper",["require","exports","q","VSS/Context","VSS/Diag","WorkItemTracking/Scripts/MenuItems/MenuItemHelpers","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/RecycleBinConstants","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/Utils/WorkItemPermissionDataHelper"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function v(n){var t={ciFeatureName:s.RecycleBinTelemetryConstants.CONTEXT_MENU,ciSourceAreaName:"",text:h.DeleteWorkItemDeleteButtonText,workItemIds:[],workItemTypeNames:[],tfsContext:e.TfsContext.getDefault(),refreshRequired:!1,readWorkItemsBeforeDeletion:!1,groupId:"modify",errorCallback:undefined,rank:undefined},i=f.GetContextMenuLocation(n),o;return i===f.MenuItemLocation.Backlog?(t.ciSourceAreaName=s.RecycleBinTelemetryConstants.BACKLOG_SOURCE,t.text=h.DeleteSelectedWorkItems,t.workItemIds=n.workItemIds,t.workItemTypeNames=n.workItemTypeNames,t.refreshRequired=n.refreshRequired,t.readWorkItemsBeforeDeletion=n.readWorkItemsBeforeDeletion,t.rank=50):i===f.MenuItemLocation.Taskboard?(t.ciSourceAreaName=s.RecycleBinTelemetryConstants.TASK_BOARD_SOURCE,t.workItemIds=n.id&&[n.id],t.workItemTypeNames=n.workItemType&&[n.workItemType]):i===f.MenuItemLocation.Kanban?(t.ciSourceAreaName=s.RecycleBinTelemetryConstants.KANBAN_SOURCE,t.workItemIds=n.id&&[n.id],t.workItemTypeNames=n.workItemType&&[n.workItemType]):i===f.MenuItemLocation.Queries?(t.ciSourceAreaName=s.RecycleBinTelemetryConstants.WORK_ITEMS_VIEW_SOURCE,t.text=h.DeleteSelectedWorkItems,t.workItemIds=n.ids,t.workItemTypeNames=n.workItemTypeNames,t.tfsContext=n.tfsContext,t.rank=25,o=r.getPageContext(),t.readWorkItemsBeforeDeletion=!0):i===f.MenuItemLocation.WorkItemForm&&(t.ciFeatureName=s.RecycleBinTelemetryConstants.WORK_ITEMS_FORM_SOURCE,t.ciSourceAreaName=s.RecycleBinTelemetryConstants.WORK_ITEMS_VIEW_SOURCE,t.workItemIds=n.workItemId&&[n.workItemId],t.workItemTypeNames=n.workItemTypeName&&[n.workItemTypeName],t.tfsContext=n.tfsContext,t.groupId="core"),t}function p(n,t,i){if(t.hideDelete)return!0;if(a.WorkItemPermissionDataHelper.isPopulated()){var r=a.WorkItemPermissionDataHelper.hasWorkItemDeletePermission()&&!n;if(!r)return!0}return!i.workItemTypeNames||!i.workItemIds||i.workItemIds.length===0?!0:!1}function w(n,t,i){if(t.hideDelete||!b(i))return!0;if(a.WorkItemPermissionDataHelper.isPopulated()){var r=a.WorkItemPermissionDataHelper.hasWorkItemDeletePermission()&&a.WorkItemPermissionDataHelper.hasWorkItemDestroyPermission()&&!n;if(!r)return!0}return!1}function b(n){return!n.workItemTypeNames||n.workItemTypeNames.length===0||!n.workItemIds||n.workItemIds.length===0?!1:!0}Object.defineProperty(t,"__esModule",{value:!0});t.hidePermanentlyDeleteMenuItemForTestWorkItem=t.hideDeleteMenuItem=t.WorkItemCategorization=t.getMenuItemProperties=void 0;t.getMenuItemProperties=v;var y=function(){function n(){}return n.categorizeWorkItemTypes=function(n,t){var r=this,u=i.defer();return this.TestAndNonTestWorkItemTypes={testTypes:[],nonTestTypes:[]},this.getAllTestWorkItemTypes(t).then(function(t){n&&$.each(n,function(n,i){t&&t[i]?r.TestAndNonTestWorkItemTypes.testTypes.push(i):r.TestAndNonTestWorkItemTypes.nonTestTypes.push(i)});u.resolve(r.TestAndNonTestWorkItemTypes)},function(n){u.reject(n)}),u.promise},n.getAllTestWorkItemTypes=function(n){var t=i.defer(),u=[l.WorkItemCategoryConstants.TEST_CASE,l.WorkItemCategoryConstants.TEST_PLAN,l.WorkItemCategoryConstants.TEST_SUITE,l.WorkItemCategoryConstants.TEST_SHAREDPARAMETER,l.WorkItemCategoryConstants.TEST_SHAREDSTEP],f=o.ProjectCollection.getDefaultConnection().getService(c.WorkItemStore),r={};return f.beginGetProject(n||e.TfsContext.getDefault().navigation.projectId,function(n){n.beginGetWorkItemCategories(function(n){$.each(u,function(t,i){if(n&&n[i]){var u=n[i];$.each(u.workItemTypeNames,function(n,t){r[t]=i})}});t.resolve(r)},function(n){t.reject(n)})},function(n){t.reject(n)}),t.promise},n.TestAndNonTestWorkItemTypes={testTypes:[],nonTestTypes:[]},n}();t.WorkItemCategorization=y;t.hideDeleteMenuItem=p;t.hidePermanentlyDeleteMenuItemForTestWorkItem=w});

define("Presentation/Scripts/TFS/Components/ZeroData",["require","exports","OfficeFabric/Button","react","VSS/LoaderPlugins/Css!Presentation/Components/ZeroData"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.ZeroData=void 0;var u=function(n){return r.createElement("div",{className:"zerodata"},r.createElement("div",null,r.createElement("img",{src:n.imageUrl,alt:n.imageAltText})),r.createElement("div",{className:"primary"},r.createElement("span",null,n.primaryText)),r.createElement("div",null," ",n.secondaryTextElement?n.secondaryTextElement:r.createElement("span",null,n.secondaryText)),r.createElement("div",{className:"info-link"},n.infoLink?r.createElement("a",{href:n.infoLink.href,target:"_blank"},n.infoLink.linkText):n.infoButton?n.infoButton.isPrimaryButton?r.createElement(i.PrimaryButton,__assign({},{text:n.infoButton.text,onClick:n.infoButton.onClick})):r.createElement("button",{className:"zero-data-info-button",onClick:function(){n.infoButton.onClick()}},n.infoButton.text):null))};t.ZeroData=u});

define("WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.ZeroData",["require","exports"],function(require,exports){var e=exports;e.ZeroData_Following_PrimaryMessage="Keep an eye on important work";e.Illustrations_MentionSomeoneAltText="Mention someone";e.ZeroData_Following_NotConfigured_PrimaryMessage="Feature not supported";e.ZeroData_MyActivity_SecondaryMessage="Find work items you have recently opened or edited.";e.ZeroData_Mentioned_SecondaryMessage="Quickly take action on items where you have been @mentioned.";e.ZeroData_Following_NotConfigured_SecondaryMessageLinkText="Learn more about how to enable following";e.ZeroData_MyTeams_NotConfigured_SecondaryMessage="You need to be a member of a team to find what your team is working on.";e.ZeroData_Charts_UnsavedSecondaryText="Save the query to view and create charts.";e.ZeroData_RecentlyCompleted_PrimaryMessage="Find recently completed items";e.ZeroData_RecentlyCreated_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=831361";e.ZeroData_Mentioned_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=852411";e.ZeroData_QueryResult_PrimaryText="No results match the query";e.ZeroData_MyTeams_NotConfigured_PrimaryMessage="Feature not supported";e.ZeroData_Following_SecondaryMessageFormat="Click {0} to get updates about the items you want to track.";e.ZeroData_Filter_WorkItems_ArtifactName="work items";e.ZeroData_RecentlyUpdated_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=831361";e.ZeroData_MyActivity_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=2010008";e.ZeroData_Charts_LinkQueryPrimaryText="Charting is not supported for tree or direct link queries";e.ZeroData_Following_NotConfigured_SecondaryMessage="Enable this feature to keep an eye on important work.";e.ZeroData_ServerError_PrimaryText="Server error";e.Illustrations_SomethingWrongOnServerAltText="Server error";e.ZeroData_GlobalSearch_LinkText="Search for work.";e.ZeroData_RecentlyCreated_SecondaryMessage="View items that are being created for this project.";e.Illustrations_GetBackToRecentWorkAltText="Get back to your recent work";e.ZeroData_MyActivity_PrimaryMessage="Get back to your recent work";e.ZeroData_Charts_UnsavedPrimaryText="Charting is disabled for unsaved queries";e.ZeroData_Mentioned_SecondaryMessageLinkText="Learn more about @mentions";e.ZeroData_MyTeams_PrimaryMessage="Find what my team is working on";e.ZeroData_Charts_NewChartSecondaryText="Create several types of charts - such as pie, column, or trend - to quickly view the status of work.";e.ZeroData_Charts_NewChartPrimaryText="Visualize query results with charts";e.ZeroData_Following_NotConfigured_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=2010112";e.ZeroData_Following_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=2010009";e.ZeroData_Following_SecondaryMessageLinkText="Learn more about following";e.ZeroData_RecentlyCreated_PrimaryMessage="Find recently created items";e.ZeroData_Charts_LinkQuerySecondaryText="Change the type of query or create a new flat-list query to start charting.";e.ZeroData_AssignedToMe_PrimaryMessage="Your work, all in one place";e.ZeroData_RecentlyCompleted_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=831361";e.ZeroData_RecentlyUpdated_PrimaryMessage="Find recently updated items";e.ZeroData_AssignedToMe_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=2010008";e.ZeroData_MyTeams_SecondaryMessageLinkUrl="https://go.microsoft.com/fwlink/?linkid=2010008";e.Illustrations_KeepAnEyeOnImportantWorkAltText="Keep an eye on important work";e.Illustrations_YourWorkInOnePlaceAltText="Your work, all in one place";e.ZeroData_RecentlyCompleted_SecondaryMessage="View items that are being completed for this project.";e.ZeroData_WorkItems_LinkText="Learn more about work items";e.ZeroData_Mentioned_PrimaryMessage="Don\u0027t miss important work";e.ZeroData_AssignedToMe_SecondaryMessage="Quickly take action on work items assigned to you.";e.ZeroData_RecentlyUpdated_SecondaryMessage="View items that have been recently updated.";e.ZeroData_MyTeams_SecondaryMessage="View items from your team(s) that have been recently updated.";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/Queries/Components/TriagePivot/TriageHubZeroDataUtils",["require","exports","react","react-dom","Presentation/Scripts/TFS/Components/ZeroData","Presentation/Scripts/TFS/TFS.IllustrationUrlUtils","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.ZeroData","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u,f,e,o){function a(n,t,i){if(n){var u=null;switch(t){case s.NewChart:u=h(i);break;case s.UnsavedChart:u=c();break;case s.NotSupportedChart:u=l()}r.render(u,n)}}function v(n){r.unmountComponentAtNode(n)}function y(n,t){if(n){var s={primaryText:t?o.QueryResultsNewQueryGridStatusText:e.ZeroData_QueryResult_PrimaryText,imageUrl:f.WorkIllustrationUrlUtils.getIllustrationImageUrl(f.WorkZeroDataIllustrationPaths.QueryNoResultFound),imageAltText:e.ZeroData_QueryResult_PrimaryText};r.render(i.createElement(u.ZeroData,__assign({},s)),n)}}function h(n){var t={primaryText:e.ZeroData_Charts_NewChartPrimaryText,secondaryText:e.ZeroData_Charts_NewChartSecondaryText,imageUrl:f.WorkIllustrationUrlUtils.getIllustrationImageUrl(f.WorkZeroDataIllustrationPaths.NoCharts),imageAltText:e.ZeroData_QueryResult_PrimaryText,infoButton:{text:o.NewChartText,onClick:n,isPrimaryButton:!0}};return i.createElement(u.ZeroData,__assign({},t))}function c(){var n={primaryText:e.ZeroData_Charts_UnsavedPrimaryText,secondaryText:e.ZeroData_Charts_UnsavedSecondaryText,imageUrl:f.WorkIllustrationUrlUtils.getIllustrationImageUrl(f.WorkZeroDataIllustrationPaths.UnsavedQuery),imageAltText:e.ZeroData_Charts_UnsavedPrimaryText};return i.createElement(u.ZeroData,__assign({},n))}function l(){var n={primaryText:e.ZeroData_Charts_LinkQueryPrimaryText,secondaryText:e.ZeroData_Charts_LinkQuerySecondaryText,imageUrl:f.WorkIllustrationUrlUtils.getIllustrationImageUrl(f.WorkZeroDataIllustrationPaths.ChartingNotSupported),imageAltText:e.ZeroData_Charts_LinkQueryPrimaryText};return i.createElement(u.ZeroData,__assign({},n))}Object.defineProperty(t,"__esModule",{value:!0});t.zeroDataForNotSupportedChart=t.zeroDataForUnsavedChart=t.zeroDataForNewChart=t.renderZeroDataQueryResult=t.unmountZeroDataComponent=t.renderZeroDataCharts=t.ZeroDataChartType=void 0;var s;(function(n){n[n.NewChart=0]="NewChart";n[n.UnsavedChart=1]="UnsavedChart";n[n.NotSupportedChart=2]="NotSupportedChart"})(s=t.ZeroDataChartType||(t.ZeroDataChartType={}));t.renderZeroDataCharts=a;t.unmountZeroDataComponent=v;t.renderZeroDataQueryResult=y;t.zeroDataForNewChart=h;t.zeroDataForUnsavedChart=c;t.zeroDataForNotSupportedChart=l});

define("WorkItemTracking/Scripts/TFS.UI.Tags",["require","exports","VSS/VSS","VSS/Error","VSS/Utils/String","VSS/Utils/Array","VSS/Diag","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","VSS/Utils/UI","VSS/Controls","WorkItemTracking/Scripts/Utils/TagUtils","VSS/Controls/PopupContent","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.UI.Tags.Constants","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/FeatureRef/TFS.TagService","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","jQueryUI/autocomplete"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){var d,tt,nt,g;Object.defineProperty(t,"__esModule",{value:!0});t.TagUtilities=t.TagControl=t.TagChangeType=void 0;d=s.domElem,function(n){n[n.Add=0]="Add";n[n.Delete=1]="Delete"}(tt=t.TagChangeType||(t.TagChangeType={}));nt=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.shouldKeydownTriggerClick=function(n){return n.keyCode===s.KeyCode.ENTER||n.keyCode===s.KeyCode.SPACE},t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass,tags:[],readOnly:!1},i))},t.prototype.initialize=function(){var i,t,r;n.prototype.initialize.call(this);i=this.getElement();this._selectedIndex=0;this._visibleTagsCount=-1;this._options.tagLabel&&$(d("span","tags-label")).attr("id","tags-label").text(this._options.tagLabel).appendTo($(d("div","tags-label-container")).appendTo(i));this._$tagsList=$(d("ul"));this._readOnly=this._options.readOnly;this._readOnly||this._initializeInputElements();t=$(d("div","tags-items-container")).attr("role","toolbar");this._options.tagLabel?t.attr("aria-labelledby","tags-label"):this._options.tags&&(r=this._options.tags.toString(),t.attr("aria-label",r));this._$tagsList.appendTo(t);t.appendTo(i);this._options.tags&&this.setItems(this._options.tags);y.FeatureAvailabilityService.isFeatureEnabled(p.FeatureAvailabilityFlags.WebAccessWorkItemTrackingDisableTagsMRU)||(this._mruList=[])},t.prototype.addTag=function(n){if(n){var t=n.trim();t&&!f.contains(this._tags,t,u.localeIgnoreCaseComparer)&&(this._selectedIndex===this._tags.length&&this._selectedIndex++,this._tags.push(t),this._sortTags(),this._renderItems(),this._fireChange({type:tt.Add,name:t}))}},t.prototype.removeTag=function(n){this._removeTag(n,!0,!1)},t.prototype.setItems=function(n){var t=n.length+(this._readOnly?0:1);this._selectedIndex>=t&&(this._selectedIndex=0);this._tags=n;this._sortTags();this._renderItems()},t.prototype.setReadOnly=function(n){this._readOnly=n;n?this._disposeInputElements():this._initializeInputElements()},t.prototype.clearItems=function(){this.flush();this._tags=[];this._renderItems()},t.prototype.setTagCount=function(n){this._options.getTagCount=n},t.prototype.setMaxWidth=function(n){this._options.maxWidth=n},t.prototype.getWidth=function(){return this._width},t.prototype.focusAddButton=function(){this._selectedIndex=this._getLastIndex();this._renderItems(!0)},t.prototype._sortTags=function(){this._options.unsorted||this._tags.sort(this._options.tagSort||u.localeIgnoreCaseComparer)},t.prototype._setupOverflowEvents=function(n){var i=this;n.click(function(){i._selectedIndex=i._visibleTagsCount;i._overflowClick(n)});n.keydown(function(r){i._updateSelectedIndex(r);t.shouldKeydownTriggerClick(r)&&n.click()})},t.prototype._tagKeyDown=function(n){this._updateSelectedIndex(n);$.isFunction(this._options.tagKeyDown)?this._options.tagKeyDown(n):(t.shouldKeydownTriggerClick(n)&&$(n.target).click(),this._removeTagAndSetFocus(n))},t.prototype._updateSelectedIndex=function(n){var t=0,i,r,u,f;if(n.keyCode===s.KeyCode.RIGHT)t=1;else if(n.keyCode===s.KeyCode.LEFT)t=-1;else return;i=this._getLastIndex();r=this._selectedIndex;this._selectedIndex+=t;this._selectedIndex<0?this._selectedIndex=i:this._selectedIndex>i&&(this._selectedIndex=0);u=this.getElement().find(".tag-item[index='"+r+"']");u.attr("tabindex",-1);f=this.getElement().find(".tag-item[index='"+this._selectedIndex+"']");f.attr("tabindex",0).focus()},t.prototype._getLastIndex=function(){var n=this._visibleTagsCount>=0?this._visibleTagsCount:this._tags.length-1;return this._readOnly||n++,n},t.prototype._tagClick=function(n,t){n.preventDefault();n.stopPropagation();var i=Number($(n.target).closest(".tag-item").attr("index"));isNaN(i)||(this._selectedIndex=i,this._renderItems(!0));$.isFunction(this._options.tagClick)&&(n.data={tagName:t},this._options.tagClick(n))},t.prototype._normalizeName=function(n,t){var i=n;return n.length>t&&(i=n.substring(0,t-4)+v.TAG_ELLIPSIS),i},t.prototype._renderOverflowElement=function(n,t){var i=g.generateTagContainer(t,!1,this._visibleTagsCount,this._visibleTagsCount===this._selectedIndex);return i.find(".tag-box").text(v.TAG_ELLIPSIS),i.addClass("tags-overflow"),i.appendTo(n),i},t.prototype._splitAndAddTags=function(n){for(var i=c.TagUtils.splitAndTrimTags(n),t=0,r=i.length;t<r;t++)this.addTag(i[t])},t.prototype._showInputControl=function(){var n=this,t,i,u;this._$addButtonContainer.hide();this._$tagInput.val("");this._$tagInput.data("ui-autocomplete")||this._$tagInput.autocomplete();t=function(){n._$tagInput.autocomplete("enable");n._$tagInput.css("display","inline-block");var t=n._getNextZIndex();n._$tagInput.data("ui-autocomplete").menu.element[0].style.setProperty("z-index",t,"important");n._$tagInput.focus();n._$tagInput.closest("li.tag-item-delete-experience").attr("aria-hidden","false")};y.FeatureAvailabilityService.isFeatureEnabled(p.FeatureAvailabilityFlags.WebAccessWorkItemTrackingDisableTagsMRU)?t():(i=b.TfsContext.getDefault(),u=k.ProjectCollection.getConnection(i).getService(w.TagService),u.getTagsMru().then(function(i){n._mruList=i;t();n._$tagInput.find(".menu-item-header").removeClass("ui-menu-item")}).catch(function(i){n._mruList=[];r.publishErrorToTelemetry(i);t()}))},t.prototype._hideInputControl=function(n){this._$tagInput.val("");this._$tagInput.is(":visible")&&(this._$tagInput.css("display","none"),this._$tagInput.autocomplete("close"),this._$tagInput.autocomplete("disable"),this._$addButtonContainer.show());n&&this.focusAddButton();this._$tagInput.closest("li.tag-item-delete-experience").attr("aria-hidden","true")},t.prototype._resetListBeforeRender=function(){$("li.tag-item",this._$tagsList).not(".tags-add-button").remove()},t.prototype._renderTagsInContainer=function(n,t){for(var r,i=this._tags.length-1;i>=0;i--)r=this._renderTag(this._tags[i],this._normalizeName(this._tags[i],v.TAG_CHARACTER_LIMIT),i),r.prependTo(n),t&&i===this._selectedIndex&&r.focus();return n.find(".tag-item").not(".tags-overflow")},t.prototype._renderTagsWithMaxWidth=function(n,t,i,r){var s,u,h,c;if(s=[],t){for(var f=0,o=0,a=i.width();n[f]&&t-o>$(n[f]).outerWidth(!0);)o=o+$(n[f]).outerWidth(!0),f++;if(f!==n.length)while(n[f-1]&&t-o<a)o=o-$(n[f-1]).outerWidth(!0),f--;this._visibleTagsCount=f}for(u=0;u<this._visibleTagsCount;u++)$(n[u]).appendTo(this._$tagsList),r&&u===this._selectedIndex&&$(n[u])[0].focus();for(u=this._visibleTagsCount,h=n.length;u<h;u++)s.push(this._tags[u]);s.length>0?(i.attr("index",this._visibleTagsCount),this._options.type==="grid"||this._options.type==="single.line"?(c=s.join(v.TAG_FORMATTING_SEPARATOR),l.RichContentTooltip.add(c,i)):this._setupOverflowEvents(i),i.appendTo(this._$tagsList),this._selectedIndex==this._visibleTagsCount&&i.focus()):(i.remove(),this._visibleTagsCount=-1)},t.prototype._render=function(n){this._resetListBeforeRender();this._renderTagsInContainer(this._$tagsList,n)},t.prototype._renderTagsInContainerWithMaxTags=function(n){for(var r,i=this._options.maxTags,u=this._tags.length>i?i-1:this._tags.length-1,f=this._options.tagCharacterLimit||v.TAG_CHARACTER_LIMIT,t=u;t>=0;t--)r=this._renderTag(this._tags[t],this._normalizeName(this._tags[t],f),t),r.prependTo(n);this._tags.length>this._options.maxTags&&this._renderOverflowInContainer(n)},t.prototype._renderForCard=function(){this._resetListBeforeRender();this._renderTagsInContainerWithMaxTags(this._$tagsList)},t.prototype._renderOverflowInContainer=function(n){var t=this._getOverFlowElement(),i=this._getOverflowTooltipContent();l.RichContentTooltip.add(i,t);t.appendTo(n)},t.prototype._getOverflowTooltipContent=function(){for(var t=[],n=this._options.maxTags,i=this._tags.length;n<i;n++)t.push(this._tags[n]);return t.join(v.TAG_FORMATTING_SEPARATOR)},t.prototype._getOverFlowElement=function(){var n=g.generateTagContainer();return n.find(".tag-box").text(v.TAG_ELLIPSIS),n.addClass("tags-overflow"),n},t.prototype._renderForSingleLine=function(){var r,u;this._resetListBeforeRender();var n=$(this.getElement().parent()).clone(),i=$(d("div","tags-items-container off-screen")),t=$(d("ul","tags-unused-host"));t.appendTo(i);i.appendTo(n);n.appendTo(document.body);r=this._renderOverflowElement(t,!1);u=this._renderTagsInContainer(t);this._renderTagsWithMaxWidth(u,this._options.maxWidth,r);n.remove()},t.prototype._renderForGrid=function(){var n=$(this.getElement().parent(".grid-cell")).clone(),i=$(d("div","tags-items-container off-screen")),t=$(d("ul","tags-unused-host"));t.appendTo(i);i.appendTo(n);n.appendTo(document.body);var r=this._renderOverflowElement(t,!1),u=this._renderTagsInContainer(t),f=n.width();this._renderTagsWithMaxWidth(u,f,r);n.remove()},t.prototype._renderFilterAvailable=function(n){var r,f;this._resetListBeforeRender();var t=$(this.getElement().parent(".tfs-tags-filter")).clone(),u=$(d("div","tags-items-container off-screen")),i=$(d("ul","tags-unused-host"));i.appendTo(u);u.appendTo(t);t.appendTo(document.body);r=this._renderOverflowElement(i,this._options.selectable);l.RichContentTooltip.add(o.TagFilterDropdownTooltip,r);f=this._renderTagsInContainer(i);this._renderTagsWithMaxWidth(f,this._options.maxWidth,r,n);t.remove()},t.prototype._renderFilterApplied=function(n){var o=this,r=this._options.maxTags,s=[],c,a,i,t,y,p,f;this._resetListBeforeRender();var e=$(this.getElement().parent(".tfs-tags-filter")).clone(),h=$(d("div","tags-items-container off-screen")),u=$(d("ul","tags-unused-host"));if(u.appendTo(h),h.appendTo(e),e.appendTo(document.body),!this._tags){this._width=0;return}for(c=this._tags.length>r?r-1:this._tags.length-1,t=c;t>=0;t--)a=this._renderTag(this._tags[t],this._normalizeName(this._tags[t],v.TAG_CHARACTER_LIMIT),t),a.prependTo(u);if(this._tags.length>r){for(this._visibleTagsCount=r,i=g.generateTagContainer(!0,!1,this._visibleTagsCount,this._visibleTagsCount===this._selectedIndex),i.find(".tag-box").text(v.TAG_ELLIPSIS),i.addClass("tags-overflow"),t=r,y=this._tags.length;t<y;t++)s.push(this._tags[t]);p=s.join(v.TAG_FORMATTING_SEPARATOR);l.RichContentTooltip.add(p,i);i.appendTo(u);this._setupOverflowEvents(i)}else this._visibleTagsCount=-1;f=0;$.map(u.children(),function(t){f=f+$(t).outerWidth(!0);o._$tagsList.append(t);var i=$(t),r=Number(i.attr("index"));n&&r===o._selectedIndex&&i.focus()});this._width=f;e.remove()},t.prototype._initializeFilterDropdown=function(){var n=this,t,i,r;this._isAutoCompleteVisible=!1;t=function(){n._$tagInput.hide();n._$tagInput.val("");n._$tagInput.autocomplete("disable");$(".tags-filter-overflow-text").toggleClass("pressed",!1)};i=function(t){$.inArray(t,n._tags)>=0&&$.isFunction(n._options.availableDropdownSelect)&&n._options.availableDropdownSelect(t)};this._$tagInput=$(d("input","tags-input tags-filter-dropdown-input tag-box")).attr("type","text").attr("placeholder","").hide();this._$tagInput.closest("li.tag-item-delete-experience").attr("aria-hidden","true");this._$tagInput.autocomplete({delay:0,minLength:0,position:{my:"left top",at:"left bottom",offset:"0 -1"},source:function(t,i){var r=n._getMatchesForPrefix(t.term,n._tags.sort(u.localeIgnoreCaseComparer),!0);i(r)},open:function(){n._isAutoCompleteVisible=!0},select:function(n,r){i(r.item.value);t()},change:function(){i(n._$tagInput.val());t()},close:function(){n._isAutoCompleteVisible=!1;n._$tagInput.is(":focus")||(n._$tagInput.val()&&i(n._$tagInput.val()),t())}});this._$tagInput.blur(function(){this._isAutoCompleteVisible||t()});this._$tagInput.focus(function(){n._$tagInput.is(":visible")&&n._$tagInput.autocomplete("search")});this._$tagInput.keydown(function(i){i.keyCode===s.KeyCode.ESCAPE?(n._$tagInput.autocomplete("close"),t()):i.keyCode===s.KeyCode.ENTER&&$.inArray(n._$tagInput.val(),n._tags)>=0&&($.isFunction(n._options.availableDropdownSelect)&&n._options.availableDropdownSelect(n._$tagInput.val()),n._$tagInput.autocomplete("close"),t())});this._$tagInput.data("ui-autocomplete").menu.element.addClass("tags-autocomplete-menu");r=this._getNextZIndex();this._$tagInput.data("ui-autocomplete").menu.element.css("cssText","z-index: "+r+"! important;");this._$tagInput.data("ui-autocomplete")._renderItem=function(n,t){var r=t.label,i=$(d("a")).text(r);return l.RichContentTooltip.addIfOverflow(t.value,i),$(d("li")).data("ui-autocomplete-item",t).append(i).appendTo(n)};$(window).resize(function(){n._$tagInput.autocomplete("close")});$(document.body).append(this._$tagInput)},t.prototype._getNextZIndex=function(){var n=0,t=0;return $("div.ui-dialog").each(function(){var i=$(this).css("z-index"),n=parseInt(i);!isNaN(n)&&n>t&&(t=n)}),t<1001?n=1002:(n=t+2,n%2!=0&&n++),n},t.prototype._overflowClick=function(n){n.children().first().addClass("tags-filter-overflow-text");this._$tagInput||this._initializeFilterDropdown();this._$tagInput.show();this._$tagInput.autocomplete("enable");$(".tags-filter-overflow-text").toggleClass("pressed",!0);this._$tagInput.position({my:"right top",at:"right bottom",of:n.children().first()});this._$tagInput.autocomplete("search");this._$tagInput.focus()},t.prototype._renderItems=function(n){this._$tagInput&&this._$tagInput.data("ui-autocomplete")&&this._$tagInput.autocomplete("close");this._options.type?this._options.type==="grid"?this._renderForGrid():this._options.type==="filter.available"?this._renderFilterAvailable(n):this._options.type==="filter.applied"?this._renderFilterApplied(n):this._options.type==="card"?this._renderForCard():this._options.type==="single.line"&&this._renderForSingleLine():this._render(n);this._renderAddButton(n)},t.prototype._renderTag=function(n,i,r){var o=this,h,f,s;return i||(i=n),h=r===this._selectedIndex,f=g.generateTagContainer(this._options.selectable,this._useDeleteExperience(),r,h),this._useDeleteExperience()&&f.addClass("tag-item-delete-experience"),n!==i&&(l.RichContentTooltip.add(n,f),f.data(t.FullTagNameKey,n)),this._options.selectable&&(f.click(function(t){return o._tagClick(t,n)}),f.keydown({tagName:n},function(n){return o._tagKeyDown(n)})),$.isFunction(this._options.tagRenderer)?this._options.tagRenderer(f.find(".tag-container"),n,i):f.find(".tag-box").text(i),this._useDeleteExperience()&&(s=$("<span>").addClass("tag-delete tag-box-delete-experience").attr("role","button").attr("aria-label",u.format(a.TagsDeleteButton_AriaLabel,n)).attr("dir","ltr").appendTo(f.find(".tag-container")),$("<span>").addClass("bowtie-icon bowtie-math-multiply-light").appendTo(s),s.click(function(n){o._removeTagAndSetFocus(n,!0)})),f},t.prototype._removeTagAndSetFocus=function(n,i){var r=this,f=n.keyCode===s.KeyCode.DELETE,e=n.keyCode===s.KeyCode.BACKSPACE,o=function(n){var i,u;n[0]&&(r._selectedIndex=Number(n.attr("index")),i=r._getLastIndex(),r._selectedIndex>i&&(r._selectedIndex=i));u=n.data(t.FullTagNameKey)||n.text();r._removeTag(u,!0,!0)},u;(i||f||e||t.shouldKeydownTriggerClick(n))&&!this._readOnly&&(n.preventDefault(),n.stopPropagation(),u=$(n.target).closest(".tag-item"),o(u),u.remove())},t.prototype._removeTag=function(n,t,i){if(n&&f.contains(this._tags,n,u.localeIgnoreCaseComparer)){this._tags.splice($.inArray(n,this._tags),1);var r=this._getLastIndex();this._selectedIndex>r&&this._selectedIndex==r;t?this._renderItems(i):this._renderAddButton(i);this._fireChange({type:tt.Delete,name:n})}},t.prototype._getMatchesForPrefix=function(n,i,r){var o,l,a,s,h,c;if(o=[],n){for(l=$.ui.autocomplete.escapeRegex(n),a=new RegExp("^"+l,"i"),s=0,h=i;s<h.length;s++)if(c=h[s],a.test(c)&&(o.push(c),o.length>t.AUTOCOMPLETE_MATCHES_LIMIT))break}else o=i.length<=t.AUTOCOMPLETE_MATCHES_LIMIT?i:i.slice(0,t.AUTOCOMPLETE_MATCHES_LIMIT);return Boolean(r)||(o=f.subtract(o,this._tags,u.localeIgnoreCaseComparer)),o},t.prototype.gettingSuggestedTagNamesForPrefix=function(n){return __awaiter(this,void 0,void 0,function(){var i,r,o;return __generator(this,function(s){switch(s.label){case 0:return i=[],n.length||y.FeatureAvailabilityService.isFeatureEnabled(p.FeatureAvailabilityFlags.WebAccessWorkItemTrackingDisableTagsMRU)||(i=f.subtract(this._mruList,this._tags,u.localeIgnoreCaseComparer),i.length&&i.indexOf(t.LIST_SUGGESTIONS_HEADER_VALUE)===-1&&(i.unshift(t.LIST_SUGGESTIONS_HEADER_VALUE),i.push(t.LIST_SUGGESTIONS_SEPARATOR_VALUE))),[4,this._getSuggestedValues()];case 1:return r=s.sent(),e.logTracePoint("TagControl.getAutoCompleteMatches.start"),o=this._getMatchesForPrefix(n,r,!1),e.logTracePoint("TagControl.getAutoCompleteMatches.completed"),[2,i.concat(o)]}})})},t.prototype._initializeSuggestedValues=function(){var n=this,i;this._$tagInput.autocomplete({delay:0,minLength:0,position:{my:"left top",at:"left bottom",collision:"flip",offset:"0 -1"},source:function(t,i){n.gettingSuggestedTagNamesForPrefix(t.term).then(function(n){i(n)}).catch(function(){i([])})},select:function(t,i){n.addTag(i.item.value);n._hideInputControl(!0)},change:function(){n.flush()},close:function(){n._$tagInput.is(":focus")||(n._$tagInput.val()&&n.flush(),n._hideInputControl())}});this._$tagInput.data("ui-autocomplete").menu.options.items="> li:not(.menu-item-header)";this._$tagInput.data("ui-autocomplete").menu.element.addClass("tags-autocomplete-menu");i=this._getNextZIndex();this._$tagInput.data("ui-autocomplete").menu.element.css("cssText","z-index: "+i+"! important;");this._$tagInput.data("ui-autocomplete")._renderItem=function(n,i){var u=i.label,r,f;return u===t.LIST_SUGGESTIONS_SEPARATOR_VALUE?(r=$(d("div")).addClass("separator"),$(d("li")).addClass("tag-suggestions-separator").append(r).appendTo(n)):u===t.LIST_SUGGESTIONS_HEADER_VALUE?(r=$(d("div")).text(o.FilteredListSuggestions),$(d("li")).addClass("ui-state-disabled menu-item-header ui-menu-divider").append(r).appendTo(n)):(f=$(d("a")).text(u),l.RichContentTooltip.addIfOverflow(i.value,f),$(d("li")).data("ui-autocomplete-item",i).append(f).appendTo(n))}},t.prototype._getSuggestedValues=function(){if(!this._gettingSuggestedValues){var n=jQuery.Deferred();$.isFunction(this._options.beginGetSuggestedValues)?this._options.beginGetSuggestedValues(function(t){n.resolve(t)}):n.resolve([]);this._gettingSuggestedValues=n.promise()}return this._gettingSuggestedValues},t.prototype.resetSuggestedValues=function(){this._gettingSuggestedValues=null},t.prototype._renderAddButton=function(n){var t,i;this._$addButtonContainer&&(this._options.addTagTextOnChange&&(t=this._$addButtonContainer.find(".tag-box"),this._addTagTooltip&&(this._addTagTooltip.dispose(),this._addTagTooltip=null),this._tags.length===0?(t.removeClass("bowtie-icon bowtie-math-plus-light"),t.text(this._options.addButtonText||o.AddButtonText)):(t.text(""),t.append($(d("span","bowtie-icon bowtie-math-plus-light"))),this._addTagTooltip=l.RichContentTooltip.add(this._options.addButtonText||o.AddButtonText,this._$addButtonContainer)),i=this._$addButtonContainer.find(".tag-container"),i.attr("aria-label",this._options.addButtonText||o.AddButtonText)),this._$addButtonContainer.attr("index",this._getLastIndex()),this._selectedIndex===this._getLastIndex()?(this._$addButtonContainer.attr("tabIndex",0),n&&this._$addButtonContainer.focus()):this._$addButtonContainer.attr("tabIndex",-1))},t.prototype._initializeInputElements=function(){var n=this,i;this._$addButtonContainer||(this._$addButtonContainer=g.generateTagContainer(!0,!1,0,!0),this._$addButtonContainer.addClass("tags-add-button"),this._useDeleteExperience()&&this._$addButtonContainer.addClass("tag-item-delete-experience"),this._$addButtonContainer.find(".tag-box").text(this._options.addButtonText||o.AddButtonText),this._$addButtonContainer.click(function(){n._showInputControl()}),this._$addButtonContainer.keydown(function(i){n._updateSelectedIndex(i);t.shouldKeydownTriggerClick(i)?(i.preventDefault(),i.stopPropagation(),n._$addButtonContainer.click()):i.keyCode===s.KeyCode.BACKSPACE&&(i.preventDefault(),i.stopPropagation())}),i=$(d("li")),this._useDeleteExperience()&&i.addClass("tag-item-delete-experience"),this._$tagInput=$(d("input","tags-input tag-box")).attr({type:"text",placeholder:""}).hide(),this._$tagInput.change(function(n){n.stopPropagation();n.preventDefault()}),$.isFunction(this._options.beginGetSuggestedValues)&&this._initializeSuggestedValues(),this._$tagInput.focus(function(){n._$tagInput.autocomplete("search")}),this._$tagInput.blur(function(){n._$tagInput.data("ui-autocomplete").menu.element.is(":visible")||n._$tagInput.val()||n._hideInputControl()}),this._$tagInput.keydown(function(t){var i,r;(t.keyCode!==s.KeyCode.ENTER||s.KeyUtils.isModifierKey(t))&&t.keyCode!==s.KeyCode.TAB?t.keyCode===s.KeyCode.ESCAPE&&(t.stopPropagation(),n._hideInputControl(!0)):(i=$(t.target).val(),n._splitAndAddTags(i),r=i.replace(/,|;/g,""),t.keyCode===s.KeyCode.TAB&&r.length===0?(n._hideInputControl(!0),t.shiftKey&&t.preventDefault()):($(t.target).val(""),t.preventDefault(),t.stopPropagation(),$.isFunction(n._options.beginGetSuggestedValues)&&n._$tagInput.autocomplete("search")),n._selectedIndex=n._tags.length)}),this._$addButtonContainer.appendTo(this._$tagsList),this._$tagInput.appendTo(i),i.appendTo(this._$tagsList))},t.prototype._useDeleteExperience=function(){return this._options.useDeleteExperience&&!this._readOnly},t.prototype._disposeInputElements=function(){this._$addButtonContainer&&this._$addButtonContainer.remove();this._$tagInput&&this._$tagInput.remove()},t.prototype.flush=function(){if(this._$tagInput){var n=this._$tagInput.val();n&&this._splitAndAddTags(n);this._hideInputControl()}},t.enhancementTypeName="tfs.ui.tagcontrol",t.AUTOCOMPLETE_CHARACTER_LIMIT=15,t.AUTOCOMPLETE_MATCHES_LIMIT=200,t.FILTER_DROPDOWN_WIDTH=150,t.coreCssClass="tfs-tags",t.FullTagNameKey="fullTagName",t.LIST_SUGGESTIONS_SEPARATOR_VALUE=";;;;;",t.LIST_SUGGESTIONS_HEADER_VALUE=";SUGGESTIONS;",t}(h.Control);t.TagControl=nt;i.initClassPrototype(nt,{_tags:null,_$tagsList:null,_$tagInput:null,_$addButtonContainer:null,_gettingSuggestedValues:null,_width:null});g=function(){function n(){}return n.renderTagCellContents=function(n,t,i,r){var o,u,f,s;return o=i.getColumnValue.call(n,t,i.index,r),u=o?o.split(v.TAG_SPLITTING_SEPARATOR):[],$.each(u,function(n,t){u[n]=$.trim(t)}),f=$(d("div","grid-cell")),f.width(i.width||20),u&&u.length>0?(h.BaseControl.createIn(nt,f,{tags:u,readOnly:!0,type:"grid"}),s=u.join("     "),i.maxLength=Math.max(i.maxLength||0,s.length)):f.html("&nbsp;"),f},n.generateTagContainer=function(n,t,i,r){var f=$(d("li","tag-item")).attr("index",i),u=$(d("span","tag-container")),e=$(d("span","tag-box"));return n&&(r?f.attr("tabindex",0):f.attr("tabindex",-1),t?(e.addClass("tag-box-delete-experience"),u.addClass("tag-container-delete-experience")):(u.addClass("tag-container-selectable"),e.addClass("tag-box-selectable"))),e.attr("dir","ltr"),u.attr("dir","ltr"),u.append(e),f.append(u),f},n.enhancementTypeName="tfs.ui.tagutilities",n}();t.TagUtilities=g;i.tfsModuleLoaded("TFS.UI.Tags",t)});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.Accessories",["require","exports","VSS/Controls","VSS/Diag","VSS/Identities/Picker/Controls","VSS/Identities/Picker/Services","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/VSS","VSS/Service","VSS/Utils/String","VSS/Telemetry/Services","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/Utils/PermissionHandler","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Utils/WitIdentityImages","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/SharedScripts/WorkItemDialogShim","TfsCommon/Scripts/WITIdentityHelpers","WorkItemTracking/Scripts/Utils/WorkItemControlsActions","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){Object.defineProperty(t,"__esModule",{value:!0});t.CommonContextMenuItems=void 0;var tt;(function(n){function t(t,i,u,f,o,h){function l(l,v,y){var p=a.ProjectCollection.getConnection(t).getService(nt.TeamAwarenessService);p.beginGetTeamSettings(i).then(function(t){function l(n){$.isFunction(o)?o(n.selectedWorkItems,n.iterationPath):s.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.BulkEdit"],function(t){t.bulkUpdateWorkItems(n.tfsContext,n.selectedWorkItems,[{fieldName:"System.IterationPath",value:n.iterationPath}],u,f)});$.isFunction(h)&&h(n)}var i=[];t.backlogIteration?(i.push({id:n.MOVE_TO_ITERATION_ACTION_NAME,text:e.MoveToIteration_Backlog,arguments:{iterationPath:t.backlogIteration.friendlyPath},title:t.backlogIteration.friendlyPath,action:l,cssClass:"move-to-backlog-context-menu-item",icon:"bowtie-icon bowtie-backlog"}),t.currentIteration&&i.push({id:n.MOVE_TO_ITERATION_ACTION_NAME,text:c.format(e.MoveToIteration_Current,t.currentIteration.displayText),arguments:{iterationPath:t.currentIteration.friendlyPath},title:t.currentIteration.friendlyPath,action:l,cssClass:"move-to-current-iteration-context-menu-item",icon:"bowtie-icon bowtie-triangle-right"}),t.futureIterations&&t.futureIterations.length>0&&(i.push({separator:!0,text:e.FutureIterations}),$.each(t.futureIterations,function(t,r){i.push({id:n.MOVE_TO_ITERATION_ACTION_NAME,text:r.displayText,arguments:{iterationPath:r.friendlyPath},title:r.friendlyPath,cssClass:"move-to-future-iteration-context-menu-item",action:l})}))):i.push({text:e.MissingTeamSettingsError,icon:"icon-warning"});v(i);r.logTracePoint("CommonContextMenuItems.getMoveToIterationContextMenuItem.Complete")},$.isFunction(f)?f:y)}return{id:n.MOVE_TO_ITERATION_ACTION_NAME,rank:13,text:e.MoveToIteration,childItems:l,disabled:u.disabled,groupId:"modify"}}function tt(t,o,a,v){var k,nt=function(n){o.executeAction?o.executeAction(n):s.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.BulkEdit"],function(t){t.bulkUpdateWorkItems(n.tfsContext,n.selectedWorkItems,[{fieldName:p.CoreFieldRefNames.AssignedTo,value:u.EntityFactory.isStringEntityId(n.identity.entityId)?null:d.WITIdentityHelpers.getUniquefiedIdentityName(n.identity)}],o,a)});$.isFunction(v)&&v(n)},g=function(t,r){var o={id:n.ASSIGN_TO_ACTION_NAME,action:nt,arguments:{identity:t}},s,e,h;return r||(s=c.ignoreCaseComparer(t.localDirectory,f.ServiceHelpers.VisualStudioDirectory)===0?t.localId:t.signInAddress),e=$("<span>"),h={identityType:{User:!0},operationScope:{IMS:!0},item:r?t:s,friendlyDisplayName:t.displayName,size:u.IdentityPickerControlSize.Large,turnOffHover:!0,consumerId:"5f71c9a2-a5aa-41c8-b3e0-0f82e20e5c42"},i.BaseControl.create(u.IdentityDisplayControl,e,h),$.extend(o,{html:e,showText:!1,noIcon:!0}),o};return k=function(n,t,i){r.logTracePoint("CommonContextMenuItems._getChildItems.start");var e=Date.now(),o=h.getService(f.MruService);o.getMruIdentities({IMS:!0},f.MruService.DEFAULT_IDENTITY_ID,f.MruService.DEFAULT_FEATURE_ID).then(function(n){var o=[],i,s,h;for(o.push(g(u.EntityFactory.createStringEntity(y.AssignedToEmptyText,w.WitIdentityImages.UnassignedImageUrl),!0)),n=n.filter(function(n){return n.active!==!1&&c.ignoreCaseComparer(n.entityType,f.ServiceHelpers.UserEntity)===0}),i=0,s=n;i<s.length;i++)h=s[i],o.push(g(h));t(o);r.logTracePoint("CommonContextMenuItems.getAssignedToContextMenuItem.Complete");l.publishEvent(new l.TelemetryEventData(b.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,b.WITCustomerIntelligenceFeature.TELEMETRY_ASSIGNTO_POPULATEMENU,{PeopleCount:n?n.length:null},e))},$.isFunction(a)?a:i)},{id:n.ASSIGN_TO_ACTION_NAME,rank:o.assignedToRank||13,text:o.title?o.title:e.TeamAwarenessAssignTo,title:o.tooltip?o.tooltip:e.TeamAwarenessAssignToTooltip,icon:"bowtie-icon bowtie-users",childItems:k,groupId:"modify"}}function it(n,t,i){var r=t?t:"WorkItemTracking.Controls.Accesories",u=[{id:g.WorkItemActions.ACTION_WORKITEM_OPEN,rank:1,text:o.Open,icon:"bowtie-icon bowtie-arrow-open",groupId:"open",action:function(n){k.showWorkItemById(n.id,n.tfsContext,{triage:i});l.publishEvent(new l.TelemetryEventData(b.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,b.WITCustomerIntelligenceFeature.TELEMETRY_OPENWORKITEM_CONTEXTMENU,{openNewWindow:!1,source:r}))}},{id:g.WorkItemActions.ACTION_WORKITEM_OPEN_IN_NEW_TAB,rank:2,text:o.OpenInNewTab,groupId:"open",action:function(n){k.showWorkItemByIdInNewTab(n.id,n.tfsContext);l.publishEvent(new l.TelemetryEventData(b.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,b.WITCustomerIntelligenceFeature.TELEMETRY_OPENWORKITEM_CONTEXTMENU,{openNewWindow:!0,source:r}))}}];return u.map(function(t){return $.extend(t,n)})}function rt(t){function u(n){var t=i._columns,r=$.map(t||[],function(n){if(n.fieldId)return n.name});s.requireModules(["Admin/Scripts/TFS.Admin.SendMail","WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls","WorkItemTracking/Scripts/Dialogs/Models/EmailWorkItems"]).spread(function(t,u,f){t.Dialogs.sendMail(new f.EmailWorkItemsDialogModel({workItemSelectionOption:{workItems:n.selectedWorkItems,fields:r,store:i._store}}))})}var i=t.grid;return{id:n.EMAIL_SELECTION_ACTION_NAME,rank:71,text:o.EmailSelectedWorkItem,title:o.EmailSelectedWorkItemToolTip,icon:"bowtie-icon bowtie-mail-message",action:u,groupId:"export"}}function ut(t,i){t.items.push({rank:12,separator:!0});t.items.push(n.getAssignToContextMenuItem(i.tfsContext,i,null,function(t){l.publishEvent(new l.TelemetryEventData(b.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,c.format("{0}.{1}",n.QUERIES_COMMAND_FEATURE_NAME,n.ASSIGN_TO_ACTION_NAME),{numSelectedItems:t&&t.selectedWorkItems?t.selectedWorkItems.length:0,source:"contextMenu"}))}));i.tfsContext&&i.tfsContext.currentTeam&&i.enableTeamActions&&v.hasAgileToolsBacklogManagementPermission()&&t.items.push(n.getMoveToIterationContextMenuItem(i.tfsContext,i.tfsContext.currentTeam.identity.id,i,null,null,function(t){l.publishEvent(new l.TelemetryEventData(b.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,c.format("{0}.{1}",n.QUERIES_COMMAND_FEATURE_NAME,n.MOVE_TO_ITERATION_ACTION_NAME),{numSelectedItems:t&&t.selectedWorkItems?t.selectedWorkItems.length:0,source:"contextMenu"}))}))}function ft(t,i){i.tfsContext.currentTeam&&i.enableTeamActions&&(t.items=t.items.concat([{rank:13,separator:!0},n.getAssignToContextMenuItem(i.tfsContext,i)]))}n.ASSIGN_TO_ACTION_NAME="assign-to";n.MOVE_TO_ITERATION_ACTION_NAME="move-to-iteration";n.EMAIL_SELECTION_ACTION_NAME="email-selection";n.QUERIES_COMMAND_FEATURE_NAME="QueriesCommand";n.getMoveToIterationContextMenuItem=t;n.getAssignToContextMenuItem=tt;n.getOpenWorkItemContextMenuItems=it;n.getEmailSelectionContextMenuItem=rt;n.contributeQueryResultGrid=ut;n.contributeTestPointsGrid=ft})(tt=t.CommonContextMenuItems||(t.CommonContextMenuItems={}));s.tfsModuleLoaded("TFS.WorkItemTracking.Controls.Accessories",t)});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.RecycleBin.DialogShim",["require","exports","VSS/VSS","VSS/Performance"],function(n,t,i,r){function e(n,t,i,r,u){f("RestoreConfirmationDialog",function(f){f.RestoreConfirmationDialog.showDialog(function(){f.RecycleBin.beginRestoreWorkItems(t,i,n,r,function(){},u)})})}function o(n,t,i,r,u,e){f("DeleteConfirmationDialog",function(f){f.DeleteConfirmationDialog.showDialog(!1,function(){f.RecycleBin.beginDeleteWorkItems(t,i,n,r,u,!1,!1,e)})})}function s(n,t,i,r,u){f("DestroyConfirmationDialog",function(f){f.DestroyConfirmationDialog.showDialog(function(){f.RecycleBin.beginDestroyWorkItems(t,i,n,r,function(){},u)})})}function f(n,t,f){if(u)t(u);else{var e=r.getScenarioManager().startScenario("WIT","RecycleBin.DialogShim");i.requireModules(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.RecycleBin"]).spread(function(n){u=n;e.end();t(n)},f)}}Object.defineProperty(t,"__esModule",{value:!0});t.showDestroyConfirmationDialog=t.showDeleteConfirmationDialog=t.showRestoreConfirmationDialog=void 0;t.showRestoreConfirmationDialog=e;t.showDeleteConfirmationDialog=o;t.showDestroyConfirmationDialog=s;var u});

define("WorkItemTracking/Scripts/Utils/TempQueryUtils",["require","exports","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Core.WebApi","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.TempQueryUtils=void 0;var f;(function(n){function f(n,t,u){var f=i.ProjectCollection.getConnection(n).getHttpClient(r.TemporaryDataHttpClient),e={queryText:t,queryType:u};return f.beginCreateTemporaryData({value:e}).then(function(n){return n.id})}function e(n,i){return"<br><a href='".concat(t(n,i),"' target='_blank' style='color:#FF0000'>").concat(u.CopySelectedWorkitemsOpenAsQuery,"<\/a>")}function t(n,t){return n.getPublicActionUrl("","queries",{tempQueryId:t})}n.beginCreateTemporaryQueryId=f;n.createTempQueryLink=e;n.createTempQueryUrl=t})(f=t.TempQueryUtils||(t.TempQueryUtils={}))});

define("WorkItemTracking/Scripts/Utils/UseWitDialog",["require","exports","VSS/VSS"],function(n,t,i){function r(){return i.requireModules(["WorkItemTracking/Scripts/Dialogs/WITDialogs"]).spread(function(n){return n})}Object.defineProperty(t,"__esModule",{value:!0});t.useWITDialogs=void 0;t.useWITDialogs=r});

define("WorkItemTracking/Scripts/Utils/WorkItemHtmlTableFormatter",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/ActionUrls","VSS/Utils/HtmlTableFormatter","VSS/Utils/String","VSS/Utils/Core","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper"],function(n,t,i,r,u,f,e,o,s){var h,c;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemHtmlTableFormatter=t.WorkItemHtmlTableFormatType=void 0,function(n){n[n.PlainText=0]="PlainText";n[n.Date=1]="Date";n[n.Identity=2]="Identity"}(h=t.WorkItemHtmlTableFormatType||(t.WorkItemHtmlTableFormatType={}));c=function(n){function t(i,u){var f=n.call(this,i,u.map(function(n){return __assign(__assign({},n),{isValueHtml:t.isHtmlField(n.fieldReferenceName)})}))||this;return f._tfsContext=r.TfsContext.getDefault(),f}return __extends(t,n),t.prototype._getCellValue=function(n,r){var f=this._rows[n][r.index],u;return e.equals(r.fieldReferenceName,i.CoreFieldRefNames.Id,!0)?t.getIdColumnValue(parseInt(f,10),this._tfsContext):(u=r.formatType,(u===undefined||u===null)&&(u=t._getColumnFormatType(f)),u===h.Identity)?t.getIdentityValue(f):u===h.Date?o.convertValueToDisplayString(new Date(f)):o.convertValueToDisplayString(f)},t.getIdentityValue=function(n){var t=s.convertWorkItemIdentityRefFromFieldValue(n);return t.identityRef.displayName||e.empty},t.getIdColumnValue=function(n,t){var i=t.getPublicActionUrl(u.ActionUrl.ACTION_EDIT,"workitems",{parameters:[n]});return'<a href="'.concat(i,'" style="color:#106ebe" target="_blank">').concat(n,"<\/a>")},t.isHtmlField=function(n){return e.equals(i.CoreFieldRefNames.Id,n,!0)},t._getColumnFormatType=function(n){return s.isWorkItemIdentityRef(n)||s.isIdentityRef(n)?h.Identity:n instanceof Date?h.Date:h.PlainText},t}(f.HtmlTableFormatter);t.WorkItemHtmlTableFormatter=c});

define("WorkItemTracking/Scripts/Utils/WorkItemViewActions",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemViewActions=void 0;var i;(function(n){n.WORKITEM_VIEW_MESSAGE_CHANGE="work-item-view-message-change";n.WORKITEM_VIEW_INFO_CHANGE="work-item-view-info-change"})(i=t.WorkItemViewActions||(t.WorkItemViewActions={}))});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("WorkItemTracking/Scripts/Controls/Query/QueryResultGrid",["require","exports","Notifications/RestClient","Notifications/Services","OfficeFabric/Icon","Presentation/Scripts/TFS/Components/WorkItemTypeIcon","Presentation/Scripts/TFS/FeatureRef/WorkItemStateCellRenderer","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","q","react","react-dom","TFS/WorkItemTracking/Contracts","TfsCommon/Scripts/KeyboardShortcuts","TfsCommon/Scripts/WITIdentityHelpers","VSS/Artifacts/Constants","VSS/Controls","VSS/Controls/Dialogs","VSS/Controls/Grids","VSS/Controls/Menus","VSS/Controls/Navigation","VSS/Controls/Notifications","VSS/Controls/PopupContent","VSS/Diag","VSS/Error","VSS/Events/Services","VSS/FeatureAvailability/Services","VSS/Identities/Picker/Controls","VSS/LWP","VSS/Resources/VSS.Resources.Common","VSS/Service","VSS/Telemetry/Services","VSS/Utils/Array","VSS/Utils/Clipboard","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/Html","VSS/Utils/Number","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","WorkItemTracking/Scripts/Controls/Filters/WorkItemFilterConstants","WorkItemTracking/Scripts/Controls/ImportCSVPanel","WorkItemTracking/Scripts/Controls/ImportWorkItemsProvider","WorkItemTracking/Scripts/Controls/ProgressBarOverlay","WorkItemTracking/Scripts/Controls/Query/ParentFieldProvider","WorkItemTracking/Scripts/Controls/WorkItemForm/LoadingSpinnerOverlay","WorkItemTracking/Scripts/Controls/WorkItemsNavigator","WorkItemTracking/Scripts/Controls/WorkItemsProvider","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Filtering/FilterManager","WorkItemTracking/Scripts/MenuItems/DeleteMenuItemCommonHelper","WorkItemTracking/Scripts/OM/QueryAdapter","WorkItemTracking/Scripts/OM/QueryConstants","WorkItemTracking/Scripts/OM/QueryItem","WorkItemTracking/Scripts/OM/WiqlOperators","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Queries/Components/TriagePivot/TriageHubZeroDataUtils","WorkItemTracking/Scripts/RecycleBinConstants","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.Common","WorkItemTracking/Scripts/TFS.UI.Tags","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.Accessories","WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.RecycleBin.DialogShim","WorkItemTracking/Scripts/Utils/Events","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/Utils/TagUtils","WorkItemTracking/Scripts/Utils/TempQueryUtils","WorkItemTracking/Scripts/Utils/UseWitDialog","WorkItemTracking/Scripts/Utils/WitControlMode","WorkItemTracking/Scripts/Utils/WorkItemControlsActions","WorkItemTracking/Scripts/Utils/WorkItemHtmlTableFormatter","WorkItemTracking/Scripts/Utils/WorkItemPermissionDataHelper","WorkItemTracking/Scripts/Utils/WorkItemViewActions","WorkItemTracking/SharedScripts/WorkItemDialogShim","VSS/LoaderPlugins/Css!Controls/Query/QueryResultGrid"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi,nr,tr,ir,rr,ur,fr,er,or,sr,hr,cr,lr,ar,vr,yr,pr,wr){function eu(n,t){var r,i,u;return n&&n.name===bi.Exceptions.WorkItemBulkSaveException&&(r=void 0,i=$("<div/>"),$.each(n.results,function(n,t){t.error&&i.append($("<div/>").append($("<div/>").text(dt.format(nr.TriageViewWorkItemSaveError,t.workItem.id))).append($("<div/>").text(nu(t.error))))}),i.children().length>0)?(t===i.children().length?r=$("<div/>").append($("<div/>").text(dt.format(nr.FailedToSaveNWorkItems,i.children().length))).append($("<br>")):(u=t-i.children().length,r=$("<div/>").append($("<div/>").text(dt.format(nr.SucessfullySavedNWisButFailedToSave,u,i.children().length))).append($("<br>")).append($("<div/>").text(nr.FollowingWisCouldNotBeSaved)).append($("<br>"))),i.append($("<br>")).append($("<div/>").text(nr.CorrectWisAndTryAgain)),$("<div/>").append(r).append(i)):null}function lu(n,t,i,r,u,f,e){var o=t.project.store.tfsConnection.getService(vi.QueryAdapter);su(n,o,i,r,u,f,e)}function su(n,t,i,r,u,f,e){var o=au(i);t.beginGenerateWiql(o,r,u,function(t){hr.TempQueryUtils.beginCreateTemporaryQueryId(n,t,y.QueryType[y.QueryType.Flat]).then(f,e)},e)}function au(n){var t,i;return!n||n.length===0?null:(t=[],t.push({logicalOperator:"",fieldName:s.CoreFieldRefNames.Id,operator:tr.WiqlOperators_In,value:n.toString(),index:0}),i={clauses:t,groups:[]},{mode:yi.LinkQueryMode.WorkItems,treeLinkTypes:"",linkTypes:"",sourceFilter:i,treeTargetFilter:{},linkTargetFilter:{}})}function vu(n,t,u,f){var l=0,a=0,h;if(n&&n.length>0){var e=!1,o={},v=c.ProjectCollection.getConnection(u).getService(r.FollowsService),y={artifactId:null,artifactType:s.FollowsConstants.ArtifactType,type:r.FollowsService.FOLLOWS_TYPE,artifactUri:null,eventType:""},p={filter:y,subscriptionId:null,scope:"",subscriberId:"",flags:null},w={conditions:[p],queryFlags:null},k=lt.getCollectionClient(i.NotificationHttpClient,v.getWebContext());k.querySubscriptions(w).then(function(t){for(var r,u,i=0;i<t.length;i++)r=t[i],u=r.filter,o[u.artifactId]=r.id;n.forEach(function(n){if(o[n]){var t={subscriptionId:parseInt(o[n]),artifactId:n.toString(),artifactType:b.ArtifactTypeNames.WorkItem};v.unfollowArtifact(t).then(function(){l++;delete o[n];h()},function(){a++;e||(tu.fire(pr.WorkItemViewActions.WORKITEM_VIEW_MESSAGE_CHANGE,f,{message:nr.BulkUnfollowsFailed,messageType:it.MessageAreaType.Error}),e=!0);h()})}})},function(){e||(tu.fire(pr.WorkItemViewActions.WORKITEM_VIEW_MESSAGE_CHANGE,f,{message:nr.BulkUnfollowsFailed,messageType:it.MessageAreaType.Error}),e=!0);h()})}h=function(){if(l+a===n.length){var t={NumberOfSelectedWorkItems:n.length,SuccessfulUnfollows:l,UnsuccessfulUnfollows:a};at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ci.WITCustomerIntelligenceFeature.WORKITEM_BULKUNFOLLOWS,t))}}}function hu(){k.Enhancement.registerEnhancement(br,".query-result-grid")}var br,ru,ou,iu;Object.defineProperty(t,"__esModule",{value:!0});t.registerEnhancements=t.createTemporaryQueryIdForSelectedWorkItemIds=t.QueryResultHtmlTableFormatter=t.QueryResultGridShortcutGroup=t.QueryResultGridPager=t.QueryResultGrid=t.getBulkSaveErrorMessageHtml=void 0;var uu=ni.handleError,nu=ni.getErrorMessage,fu=h.TfsContext,kr=pt.delegate,cu=gt.domElem,tu=et.getService(),dr,gr;t.getBulkSaveErrorMessageHtml=eu;br=function(n){function t(i){var r=__construct(this,n,[i]);for(var f in r)r.hasOwnProperty(f)&&(this[f]=r[f]);return r._isShowingExpandCollapseColumns=!1,r._enableCopyQueryCommand=!0,r._workItemTypeIconCells=[],r._fullScreenCIDelegate=function(n,t){t.workItemCount=r._count},r.renderLoadingCell=function(n){var i=r.getCellContextMenu(n),t;n.empty();t=$("<div>").addClass("shimmer shimmer-line").html("&nbsp");t.fadeIn("slow");n.append(i);n.append(t)},r.renderProgressBarContent=function(n,t,i,u){var h=r.getCellContextMenu(n);if(n.empty(),t!==0||i!==0){var f=Math.floor(t/i*100),c=f<100?"in-progress":"completed",o=dt.format(nr.ProgressBarTooltip,t,i,u),s=$("<div>").addClass("progress-bar-container"),e=$("<div>").addClass("progress-bar-background").attr({tabindex:"-1","aria-label":"".concat(o)}),l=$("<div>").addClass("progress-bar ".concat(c)).css("width","".concat(f,"%")),a=$("<div>").addClass("progress-percentage-text").text(dt.format(nr.ProgressPercentage,f));rt.RichContentTooltip.add(o,e);e.append(l);s.append(e).append(a);n.append(h);n.append(s)}},r.renderRollupCountContent=function(n,t,i){var f=r.getCellContextMenu(n),u;n.empty();u=$("<span>");u.text(t);rt.RichContentTooltip.add(dt.format(nr.RollupTotalByTooltip,t,i),u);n.append(f);n.append(u)},r.renderErrorCell=function(n,t){var e=r.getCellContextMenu(n),i,f;n.empty();i=document.createElement("span");f=a.createElement(u.Icon,{className:"error-icon",iconName:"Error"});v.render(f,i);rt.RichContentTooltip.add(t,i);n.append(e);n.append(i)},r.getCellContextMenu=function(n){return n.find(".grid-context-menu-container")},r.renderRollupCell=function(n,t,i,u,f){return __awaiter(r,void 0,void 0,function(){var r,o,e,s;return __generator(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),n.checkAndUpdateWorkItemIds(this._workItems),this.renderLoadingCell(i),[4,n.getRollupData(t)];case 1:return r=h.sent(),[4,this.getRollupColumnDisplayName(n.getRollupMetric(),f)];case 2:return o=h.sent(),e=$("<div />").append(o),r!=null?(this._renderRollupVisualization(i,r,n),u(!0,e)):(i.empty(),u(!1,e)),[3,4];case 3:return s=h.sent(),this.renderErrorCell(i,s),[3,4];case 4:return[2]}})})},r._renderRollupVisualization=function(n,t,i){return __awaiter(r,void 0,void 0,function(){var u,r;return __generator(this,function(f){switch(f.label){case 0:return t.errorMessage?(this.renderErrorCell(n,t.errorMessage),[3,3]):[3,1];case 1:return u=i.getRollupMetric(),[4,i.getTooltipLabel()];case 2:r=f.sent();switch(u.type){case gr.Progress:this.renderProgressBarContent(n,t.completedWorkCount,t.totalWorkCount,r);break;case gr.Total:this.renderRollupCountContent(n,t.totalWorkCount,r)}f.label=3;case 3:return[2]}})})},r.renderRollupHeaderCell=function(n,t,i,u,f){return __awaiter(r,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,this.getRollupColumnDisplayName(n,f)];case 1:return r=e.sent(),t.empty(),t.append(i).append(" "+r),u(!0,$("<div />").append(r)),[2]}})})},r.getRollupColumnDisplayName=function(n,i){return __awaiter(r,void 0,void 0,function(){var u,r,f,e,o=this;return __generator(this,function(s){switch(s.label){case 0:return(u=this.getStore(),r="",!(gr==null||dr==null))?[3,2]:(t.contributionPromise||(f=ht.getLWPService("IVssContributionService"),t.contributionPromise=f.getContributionsAsync(["ms.vss-analytics.analytics-common","ms.vss-analytics.rollup-queries"]).then(function(){return __awaiter(o,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,ni.requireModules(["Analytics/Boards/RollupQueries/Contracts"]).spread(function(n){dr=n.RollupAggregation;gr=n.RollupType})];case 1:return n.sent(),[2]}})})})),[4,t.contributionPromise]);case 1:s.sent();s.label=2;case 2:e=n.type;switch(e){case gr.Progress:return[3,3];case gr.Total:return[3,15]}return[3,27];case 3:return n.workItemTypeFilter?(n.aggregation===dr.Sum)?[4,this.getFieldDefinitionDisplayName(nr.RollupColumn_ProgressBy_Filter_Field,n.aggregationField,u,n.workItemTypeFilter)]:[3,5]:[3,7];case 4:return r=s.sent(),[3,6];case 5:r=dt.format(nr.RollupColumn_ProgressBy_WorkItemType,n.workItemTypeFilter);s.label=6;case 6:return[3,14];case 7:return n.backlogFilter?(n.aggregation===dr.Sum)?[4,this.getFieldDefinitionDisplayName(nr.RollupColumn_ProgressBy_Filter_Field,n.aggregationField,u,i)]:[3,9]:[3,11];case 8:return r=s.sent(),[3,10];case 9:r=dt.format(nr.RollupColumn_ProgressBy_Backlog,i);s.label=10;case 10:return[3,14];case 11:return(n.aggregation===dr.Sum)?[4,this.getFieldDefinitionDisplayName(nr.RollupColumn_ProgressBy_EffortField,n.aggregationField,u)]:[3,13];case 12:return r=s.sent(),[3,14];case 13:r=nr.RollupColumn_ProgressBy_AllCompletedDescendants;s.label=14;case 14:return[3,27];case 15:return n.workItemTypeFilter?(n.aggregation===dr.Sum)?[4,this.getFieldDefinitionDisplayName(nr.RollupColumn_TotalBy_Filter_Field,n.aggregationField,u,n.workItemTypeFilter)]:[3,17]:[3,19];case 16:return r=s.sent(),[3,18];case 17:r=dt.format(nr.RollupColumn_TotalBy_WorkItemType,n.workItemTypeFilter);s.label=18;case 18:return[3,26];case 19:return n.backlogFilter?(n.aggregation===dr.Sum)?[4,this.getFieldDefinitionDisplayName(nr.RollupColumn_TotalBy_Filter_Field,n.aggregationField,u,i)]:[3,21]:[3,23];case 20:return r=s.sent(),[3,22];case 21:r=dt.format(nr.RollupColumn_TotalBy_Backlog,i);s.label=22;case 22:return[3,26];case 23:return(n.aggregation===dr.Sum)?[4,this.getFieldDefinitionDisplayName(nr.RollupColumn_TotalBy_FieldName,n.aggregationField,u)]:[3,25];case 24:return r=s.sent(),[3,26];case 25:r=nr.RollupColumn_TotalBy_AllDescendants;s.label=26;case 26:return[3,27];case 27:return[2,r]}})})},r.renderTitleCell=function(n,t,i,u,f,e,s,h,c,l){var y,a,v,p;f.empty();c===e&&s>0&&(y=f.css("text-indent"),f.css("text-indent",0),f.css("padding-left",y));r.renderWorkItemTypeColorAndIcon(f,i,n,u,h);r._workItemTypeIconCells.push(f);!r.isUnparentedRow(n)&&r._allowInteractionWithTitle&&ot.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WebAccessAgileBacklogOneClickOpen)?(v=r._options.tfsContext,p=v.getActionUrl(n>0?"edit":"create","workitems",{project:v.navigation.project,team:v.navigation.team,parameters:[n>0?n:r.getWorkItemTypeNameById(n)]}),a=$('<a class="work-item-title-link" href=\''.concat(p,"'/>")).text(t),a.click(function(t){var i=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||t.which===2||t.button===1;if(!i)if(t.preventDefault(),l)wr.showWorkItemDialogById(n,r._options.tfsContext);else if(r._allowSingleClickOpen)r.onOpenRowDetail({dataIndex:h,workItemId:n})}),a.keydown(function(t){var i=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;if(!i&&(t.keyCode===gt.KeyCode.ENTER||t.keyCode===gt.KeyCode.SPACE))if(t.preventDefault(),l)wr.showWorkItemDialogById(n,r._options.tfsContext);else if(r._allowSingleClickOpen)r.onOpenRowDetail({dataIndex:h,workItemId:n})}),a.contextmenu(function(n){n.stopPropagation()})):a=$("<span/>").text(t);f.append(a)},r._checkForEmptyCurrentIteration=function(n,t){var o,i,h,f,c,u,e,l,a,v;if(!t.error&&(o=n.getId(),o!==r._previousProviderId)&&(r._previousProviderId=o,i=t.editInfo,h=r.getStore(),i&&h)){var y=i.sourceFilter,p=i.treeTargetFilter,w=i.linkTargetFilter,b=tr.WiqlOperators_MacroCurrentIteration,k=new RegExp("(@".concat(b,")(?!\\()"),"gi");for(f=0,c=[y,p,w];f<c.length;f++)if(u=c[f],u&&u.clauses&&u.clauses.length!==0)for(e=0,l=u.clauses;e<l.length;e++)if((a=l[e],v=h.getFieldDefinition(a.fieldName),v&&v.referenceName===s.CoreFieldRefNames.IterationPath)&&a.value.match(k)){tu.fire(pr.WorkItemViewActions.WORKITEM_VIEW_INFO_CHANGE,null,nr.DefaultingCurrentIterationTeam);break}}},r._onFilterChanged=function(){r._applyFilter()},r._onUnfilter=function(){r.restoreUnfilteredState()},r._onFilterActivated=function(){r._pageFirstThousand()},r._refreshDelegate=kr(r,r.refresh),r._workItemChangedDelegate=kr(r,r.workItemChanged),r._navigateNextDelegate=kr(r,r._onNavigateNext),r._navigatePreviousDelegate=kr(r,r._onNavigatePrevious),r._workItemsNeeded=[],r._workItemsFailedToFetch=[],r._links=[],r._displayColumns=[],r._displayColumnsMap={},r._sortColumns=[],r._rootCount=0,r._pageColumns=[],r._pageColumnMap={},r._pageData={},r._workItems=[],r._sortColumns=[],r._parentWorkItemIds=[],r._workItemsInLastVisibleRange={},r._managedWorkItems={},r._pendingManaged=null,r._dirtyWorkItems={},r._validWorkItems={},r._createFilterManager(),tt.FullScreenHelper.attachFullScreenCI(r._fullScreenCIDelegate),r}return __extends(t,n),t.calculateExpandStates=function(n,i,r,u,f,e,o){for(var c=0,l=0,a=0,s,v,h;f<e;){if(r[f]=0,s=n[f],v=i[f],s===u)c++,f++,a++;else if(s===l)h=t.calculateExpandStates(n,i,r,l,f,e,o),r[f-1]=(o&&o(s)?-1:1)*h.total,c+=h.total,f+=h.total;else break;l=v}return{total:c,root:a}},t.showCopyQueryUrlNotificationDialog=function(n){d.show(d.CopyContentDialog,{dialogLabel:nr.CopyQueryURLNotifyMessage,dialogLabelExtend:n?t._copyQueryUrlExpirationMessage:null,excludeTextPanel:!0,width:400,height:200})},t.copyQueryUrl=function(n,i){var r=n.getPublicActionUrl("","queries",{tempQueryId:i});yt.copyToClipboard(r,{copyDialogOptions:{dialogLabelExtend:t._copyQueryUrlExpirationMessage},showCopyDialog:window.clipboardData===undefined});window.clipboardData!==undefined&&t.showCopyQueryUrlNotificationDialog(!0)},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._queriesHubContext=null;this._dirtyWorkItems=null;this._validWorkItems=null},t.prototype.getStore=function(){return this._store},t.prototype.getSortColumns=function(){return this._sortColumns},t.prototype.getPageData=function(){return this._pageData},t.prototype.getColumnMap=function(){return this._pageColumnMap},t.prototype.getVisibleColumnMap=function(){var n={};for(var t in this._displayColumnsMap)n[t]=this._pageColumnMap[t];return n},t.prototype.getVisibleFields=function(){return this._displayColumns.map(function(n){return n.name})},t.prototype.getDataSourceName=function(){return t.DATASOURCE_NAME},t.prototype.getItemCount=function(){return this.getUnfilteredWorkItemIds().length},t.prototype.getValue=function(n,t){var e,i,r,o,u,h,f;return t===ti.FilterStatusFieldName?(e=ki.WorkItemManager.get(this._store),i=e.getWorkItem(n),i===undefined||!i.hasError()&&i.isValid()):t===s.CoreFieldRefNames.Parent&&(r=this._getWorkItemFieldValueFromPageData(n,s.CoreFieldRefNames.Parent),r&&(o=Number(r),u=this._getParentFieldData(o),u!==undefined))?u.title:(h=this._pageData[n],f=this._pageColumnMap[t],f>=0)?h[f]:null},t.prototype.getUniqueValues=function(n){var o=this._pageColumnMap[n],a=n===s.CoreFieldRefNames.Tags,u={},t,f,h,i,c,r,e,l;if(o>=0)for(t=0,f=Object.keys(this._pageData);t<f.length;t++)if(h=f[t],i=this._pageData[h][o],i)if(a)for(c=sr.TagUtils.splitAndTrimTags(i),r=0,e=c;r<e.length;r++)l=e[r],u[l]=!0;else u[i]=!0;return vt.uniqueSort(Object.keys(u),dt.localeIgnoreCaseComparer)},t.prototype.getIds=function(){return this._convertKeysToInts(this._pageData)},t.prototype.getPageColumns=function(){return this._pageColumns},t.prototype.getProvider=function(){return this._workItemsProvider},t.prototype.getInitialSelectionSetting=function(){return this._options.initialSelection},t.prototype.setInitialSelectionSetting=function(n){this._options.initialSelection=n},t.prototype.selectInitialRow=function(){this._initialSelectedWorkItemId!=null&&this._initialSelectedWorkItemId>0&&Array.isArray(this._workItems)?(this.setSelectedWorkItemId(this._initialSelectedWorkItemId),this._initialSelectedWorkItemId=null):n.prototype.selectInitialRow.call(this)},t.prototype.setInitialSelectedWorkItemId=function(n){this._initialSelectedWorkItemId=n},t.prototype.setBeforeOpenWorkItemCallback=function(n){this._beforeOpenWorkItemCallback=n},t.prototype.initializeOptions=function(i){function r(){return s._onGetMenuItemActionArguments(this)}var f,e,s;if(this._queriesHubContext=i.queriesHubContext,this._useZeroDataView=i.useZeroDataView,f=i.showContextMenu!==!1,s=this,f){var u=[{rank:20,id:"use-as-a-template",text:nr.UseWorkItemAsATemplate,title:"",arguments:r,groupId:"create"},{rank:30,id:"create-copy",text:nr.CreateCopyOfWorkItem,title:"",icon:"bowtie-icon bowtie-edit-copy",arguments:r,groupId:"create"},{rank:62,id:"copy-selection-html",text:nr.CopySelectedWorkItemsAsHtml,title:"",icon:"bowtie-icon bowtie-copy-to-clipboard",arguments:r,groupId:"export"}],h=ot.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WebaccessProcessHierarchy),c=h||ot.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WorkItemTrackingChangeWorkItemType),l=h||ot.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WorkItemTrackingMove),a=lr.isFollowWorkItemEnabled(i.tfsContext);i.readOnlyMode||(u.push({rank:10,id:"bulk-edit-workitems",text:nr.BulkEditSelectedWorkItems,title:"",icon:"bowtie-icon bowtie-edit-outline",groupId:"modify"}),c&&u.push({rank:11,id:t.CHANGE_WORK_ITEM_TYPE_ID,text:nr.ChangeType,icon:"bowtie-icon bowtie-switch",arguments:r,groupId:"modify"}),l&&u.push({rank:12,id:"move-work-items",text:nr.MoveWorkItemTitle,title:"",icon:"bowtie-icon bowtie-work-item-move",arguments:r,groupId:"modify"}),a&&u.push({rank:13,id:t.COMMAND_ID_UNFOLLOW,text:nr.BulkUnfollowWorkItems,title:"",icon:"bowtie-icon bowtie-watch-eye-off",arguments:r,groupId:"modify"}),i.tfsContext.standardAccessMode===!0&&(u.push({rank:40,id:"link-to-new",text:nr.LinkSelectedItemsToNewWorkItem,title:"",icon:"bowtie-icon bowtie-work-item",arguments:r,groupId:"link"}),u.push({rank:50,id:"link-to-existing",text:nr.LinkToExistingItem,title:"",icon:"bowtie-icon bowtie-link",arguments:r,groupId:"link"})));u.push({rank:71,id:t.COMMAND_ID_EMAIL_SELECTION,text:nr.EmailSelectedWorkItems,title:"",icon:"bowtie-icon bowtie-mail-message",arguments:r,groupId:"export"});e={executeAction:kr(this,this.executeCommand),updateCommandStates:kr(this,this._updateCommandStates),arguments:kr(this,this._getDefaultActionArguments),items:u,contributionIds:["ms.vss-work-web.query-result-work-item-menu","ms.vss-work-web.work-item-context-menu","ms.vss-work-web.work-item-context-menu-owp"],getContributionContext:this._getContributionContextFunc().bind(this),suppressInitContributions:!0}}n.prototype.initializeOptions.call(this,$.extend({gutter:{contextMenu:f},autoSort:!1,sourceArea:gi.RecycleBinTelemetryConstants.UNKNOWN,contextMenu:e},i))},t.prototype.getDisplayColumns=function(){return this._displayColumns},t.prototype._getContributionContextFunc=function(){var n=this;return function(){var f=n.getSelectedDataIndices(),i=!1,t=f.map(function(t){return n.getWorkItemIdAtDataIndex(t)}),r,u;return t.some(function(n){return+n<1})&&(i=!0),r=t.map(function(t){return n._pageData[t]}),u={columns:Object.keys(n._pageColumnMap),rows:r,ids:t,workItemIds:t,workItemTypeNames:n.getSelectedWorkItemTypes(),workItemProjects:n.getSelectedWorkItemProjectNameMapping(),query:pi.QueryItemFactory.queryItemToQueryHierarchyItem(n._workItemsProvider.queryDefinition),hideDelete:i||si.QueryResultsProvider.isRecycleBinQueryResultsProvider(n._workItemsProvider)||ri.isImportWorkItemsProvider(n._workItemsProvider),tfsContext:n._options.tfsContext},u}},t.prototype._enhance=function(t){t.empty();n.prototype._enhance.call(this,t)},t.prototype.getWorkItemsNavigator=function(){return this._workItemsNavigator},t.prototype.attachTabBehavior=function(n){this._tabBehaviorDelegate=n},t.prototype._onTabKey=function(n){if(this._tabBehaviorDelegate)return this._tabBehaviorDelegate(n)},t.prototype._onKeyDown=function(t){var r=this,i,c,l;if(gt.KeyUtils.isExclusivelyCommandOrMetaKeyBasedOnPlatform(t)&&t.keyCode===gt.KeyCode.S)return this.isDirty(!0)&&this.saveWorkitems(),!1;if(t.keyCode===gt.KeyCode.DELETE){if(i=this.getSelectedWorkItemIds(),!i||i.length<1||i.some(function(n){return+n<1}))return!1;var e=this.getWorkItemsNavigator(),u=gi.RecycleBinTelemetryConstants.DELETE_KEY,f=this._options.sourceArea,o=this._options.tfsContext,s=this._options.readWorkItems,h=yr.WorkItemPermissionDataHelper.isPopulated();return e&&(c=e.getProvider(),l=si.QueryResultsProvider.isRecycleBinQueryResultsProvider(c),l)?((!h||yr.WorkItemPermissionDataHelper.hasWorkItemDestroyPermission())&&fr.showDestroyConfirmationDialog(o,u,f,i,function(n){tu.fire(pr.WorkItemViewActions.WORKITEM_VIEW_MESSAGE_CHANGE,r,{message:n.message,messageType:it.MessageAreaType.Error})}),!1):((!h||yr.WorkItemPermissionDataHelper.hasWorkItemDeletePermission())&&(s=!0,ai.WorkItemCategorization.getAllTestWorkItemTypes().then(function(n){var t=i[0],e=r.getWorkItemTypeNameById(t);i.length===1&&r._isTestWorkItem(Object.keys(n),e)?yr.WorkItemPermissionDataHelper.hasWorkItemDestroyPermission()&&ni.using(["WorkItemTracking/Scripts/TestWorkItemDelete/TFS.TestWorkItemDelete.Dialog"],function(n){n.getTestWorkItemDeleteConfirmationDialog(e,r.getProjectName()).then(function(n){n.showDialog(t,function(){n.deleteTestWorkItem(u,f,t,!1)})})}):fr.showDeleteConfirmationDialog(o,u,f,i,s,Object.keys(n))})),!1)}return n.prototype._onKeyDown.call(this,t)},t.prototype._isTestWorkItem=function(n,t){return n.indexOf(t)>-1},t.prototype.copySelectedItems=function(t,i,r){var u=this.getSelectedWorkItemIds();(u.length!==1||this.isRealWorkItem(u[0]))&&n.prototype.copySelectedItems.call(this,t?t:iu,typeof i=="undefined"?!0:i,r)},t.prototype._updateSoftCapMessage=function(n){n.hasMoreResult?this._showSoftCapMessage():this._clearSoftCapMessage()},t.prototype._showSoftCapMessage=function(){var u=this,n,i,r;this._messageArea||(this._messageArea=k.BaseControl.createIn(it.MessageAreaControl,this.getElement(),{closeable:!1,message:{type:it.MessageAreaType.Info},prepend:!0}),this._messageArea._bind(it.MessageAreaControl.EVENT_DISPLAY_COMPLETE,function(){u._resize()}),this._messageArea._element.bind("contextmenu",function(n){return n.preventDefault(),n.stopPropagation(),!1}));n=$("<div>");n.addClass(t._gridMessageClass);i=si.QueryResultsProvider.isRecycleBinQueryResultsProvider(this._workItemsProvider);r="<span>".concat(dt.format(nr.ShowMoreWorkItemsMessage,this._count,i?nr.DeleteWorkItemsToSeeMore:"<a id=".concat(t._showAllItemsLink," role='button' href=#>").concat(nr.ShowMoreWorkItemsLinkMessage,"<\/a>")),"<\/span>");n.append($(r));this._messageArea.setMessage({header:n},it.MessageAreaType.Info);this._softCapLinkOnClick($(".query-editor #"+t._showAllItemsLink));this._softCapLinkOnClick($(".triage-view #"+t._showAllItemsLink));this.getElement().addClass(t._gridHasMessageFlag);at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ci.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_QUERY_SOFTCAP_LINK,{Action:"Create"}))},t.prototype._softCapLinkOnClick=function(n){var t=this;n.click(function(n){n&&n.preventDefault();t._workItemsProvider.bypassSoftCap=!0;t._refreshResults();t._clearSoftCapMessage();at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ci.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_QUERY_SOFTCAP_LINK,{Action:"Click"}))})},t.prototype._clearSoftCapMessage=function(){this._messageArea&&this._messageArea.clear();this._resize()},t.prototype._clearFilterMessage=function(){this._textFilterMessageArea&&(this._textFilterMessageArea.clear(),this._messageArea&&(this._messageArea.showElement(),this.getElement().addClass(t._gridHasMessageFlag)));this._resize()},t.prototype._showFilterMessage=function(n,i,r){var u=this,e;this._messageArea&&this._messageArea.hideElement();this._textFilterMessageArea||(this._textFilterMessageArea=k.BaseControl.createIn(it.MessageAreaControl,this.getElement(),{closeable:!1,message:{type:it.MessageAreaType.Info},prepend:!0}),this._textFilterMessageArea._bind(it.MessageAreaControl.EVENT_DISPLAY_COMPLETE,function(){u._resize()}),this._textFilterMessageArea._element.bind("contextmenu",function(n){return n.preventDefault(),n.stopPropagation(),!1}));var o=dt.format(nr.TextFilterNextItemsMessage,r),f=$(cu("div",t._gridMessageClass)),s="<span>"+dt.format(nr.TextFilterResultCountMessage,n,i,"<a id="+t._showFilteredItemsLink+" href=#>"+o+"<\/a>")+"<\/span>";$(s).appendTo(f);this._textFilterMessageArea.setMessage({header:f},it.MessageAreaType.Info);e=$("#"+t._showFilteredItemsLink);e.click(function(n){n&&n.preventDefault();l(u._pageNextSetOfWorkItems(t.FILTER_PAGE_SIZE)).done(function(){u._applyFilter()})});this.getElement().addClass(t._gridHasMessageFlag)},t.prototype._updateFilterMessage=function(){if(this._filterApplied){var n=Object.keys(this._pageData).length,i=this._getUniqueUnfilteredIds(),r=Math.min(t.FILTER_PAGE_SIZE,i.length-n);r>0?this._showFilterMessage(n,i.length,r):this._clearFilterMessage()}else this._clearFilterMessage()},t.prototype._getUniqueUnfilteredIds=function(){var t=this.getUnfilteredWorkItemIds(),n,i;return this._unfilteredIsLinkQuery?(n={},i=t.filter(function(t){return n[t]?!1:(n[t]=!0,!0)}),i):t},t.prototype._resize=function(){this.isDisposed()||$(".triage-view ."+t._gridMessageClass).height()||$(".query-editor ."+t._gridMessageClass).height()||this.getElement().removeClass(t._gridHasMessageFlag)},t.prototype.getProjectName=function(){return this._projectName},t.prototype.isDirty=function(n){var r=this._managedWorkItems,t,i,f=ki.WorkItemManager.get(this._store),u;if(n){for(t in r)if(r[t]===!0&&(i=f.getWorkItem(t),i&&i.isDirty()))return!0}else return u=this._getDirtyWorkItems(),u.length>0;return!1},t.prototype.processDataSource=function(n,t){var i,r;this._parentWorkItemIds=undefined;n.sourceIds&&(this._parentWorkItemIds=n.sourceIds);this._links=n.linkIds?n.linkIds:[];n.targetIds?this._filterApplied?(this._unfilteredWorkItems=n.targetIds,r=this._filterManager.filter(),this._workItems=this._sortAndRemoveDuplicates(r,n.targetIds)):this._workItems=n.targetIds:this._workItems=[];this._workItemsFailedToFetch=[];this._options.source=this._workItems;this._parentWorkItemIds?(i=this.processExpandedStates(n),this._filterApplied&&(this._unfilteredExpandStates=this._options.expandStates,this._options.expandStates=null),this._rootCount=i.root):(this._options.expandStates=null,this._rootCount=this.getUnfilteredWorkItemIds().length);t&&(delete n.sourceIds,delete n.linkIds,delete n.targetIds)},t.prototype.processExpandedStates=function(n){return this._options.expandStates=[],t.calculateExpandStates(n.sourceIds,this.getUnfilteredWorkItemIds(),this._options.expandStates,0,0,n.sourceIds.length)},t.prototype.initialize=function(){this._store=c.ProjectCollection.getConnection(this._options.tfsContext).getService(rr.WorkItemStore);this._projectName=this._options.tfsContext.navigation.project;ki.WorkItemManager.get(this._store).attachWorkItemChanged(this._workItemChangedDelegate);this.initializeDataModel(this._options);delete this._options.payload;n.prototype.initialize.call(this);var t=this._options.resultGridPostInitializeCallback;t&&$.isFunction(t)&&t.call(this,this)},t.prototype._cleanUpCells=function(){var t,i,n,r;if(this._workItemTypeIconCells&&this._workItemTypeIconCells.length)for(t=0,i=this._workItemTypeIconCells;t<i.length;t++)n=i[t],n&&n.length&&(r=n.find(".grid-cell-contents-container")[0]||n[0],f.unmountWorkItemTypeIcon(r));this._workItemTypeIconCells=[]},t.prototype._cleanUpRows=function(){this._cleanUpCells();n.prototype._cleanUpRows.call(this)},t.prototype._dispose=function(){this._workItemsProvider&&(this._workItemsProvider=null);this._store&&(ki.WorkItemManager.get(this._store).detachWorkItemChanged(this._workItemChangedDelegate),this._store=null);this.setNavigator(null);this._cleanUpCells();this._unbindFilterManagerEvents();tt.FullScreenHelper.detachFullScreenCI(this._fullScreenCIDelegate);this.queryResultsStarting=null;this.queryResultsComplete=null;this._tabBehaviorDelegate=null;this._useZeroDataView&&this._zeroDataElement&&(di.unmountZeroDataComponent(this._zeroDataElement[0]),this._zeroDataComponentMounted=!1,this._isNewQueryInZeroDataComponent=!1);n.prototype._dispose.call(this)},t.prototype.getWorkItemTypeNameByIndex=function(n){return this.getWorkItemTypeNameById(this._workItems[n])},t.prototype.getWorkItemTypeNameById=function(n){return this._getWorkItemFieldValueFromPageData(n,s.CoreFieldRefNames.WorkItemType)},t.prototype.getWorkItemStateById=function(n){return this._getWorkItemFieldValueFromPageData(n,s.CoreFieldRefNames.State)},t.prototype.getWorkItemProjectNameById=function(n){return this._getWorkItemFieldValueFromPageData(n,s.CoreFieldRefNames.TeamProject)},t.prototype.getWorkItemTitleById=function(n){return this._getWorkItemFieldValueFromPageData(n,s.CoreFieldRefNames.Title)},t.prototype._getWorkItemStateColorCell=function(n,t){var i=this._workItems[n],r=this.getWorkItemProjectNameById(i),u=this.getWorkItemTypeNameById(i);return r?e.WorkItemStateCellRenderer.getAutoUpdatingColorCell(r,u,t):(ft.publishErrorToTelemetry({name:"ProjectNameNotPagedException",message:"Project name must be paged in to get workitem state color"}),null)},t.prototype._isIndentedHeaderColumn=function(n){return this._isLinkOrTreeQuery()?n.name===s.CoreFieldRefNames.Title:!1},t.prototype.isWorkItemSaving=function(){return!1},t.prototype.isUnparentedRow=function(){return!1},t.prototype.renderWorkItemTypeColorAndIcon=function(n,t,i,r){f.renderWorkItemTypeIcon(n[0],r,t,{suppressTooltip:!0})},t.prototype.getFieldColumns=function(){return(this._columns||[]).filter(function(n){return n.name!==t.EXPAND_COLUMN_NAME&&n.name!==t.COLLAPSE_COLUMN_NAME})},t.prototype.getFieldDefinitionDisplayName=function(n,t,i){for(var u=[],r=3;r<arguments.length;r++)u[r-3]=arguments[r];return __awaiter(this,void 0,void 0,function(){var r,f;return __generator(this,function(e){switch(e.label){case 0:if(!i)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,i.beginGetFields()];case 2:return(e.sent(),r=i.getFieldDefinition(t),r)?[2,dt.format.apply(dt,__spreadArray(__spreadArray([n],u,!1),[r.name],!1))]:[3,4];case 3:return f=e.sent(),[3,4];case 4:return[2,""]}})})},t.prototype.initializeDataModel=function(n){var i=this,u,f,r,o,c=[],l,a,v,y,p,b,e,h;if(this.processDataSource(n,!1),this._allowSort=n.allowSort!==!1,this._hasMoreResults=n.hasMoreResult,this._displayColumns=[],this._displayColumnsMap={},this._parentFieldProvider=null,n.columns)for(l=function(n,t,r,u,f,e,o){return ir.TagUtilities.renderTagCellContents(i,t,f,o)},a=function(n,t,r,u,f,e,o){var s=i._drawCell(n,t,r,u,f,e,o),h=i.getWorkItemIdAtDataIndex(t),c=s.text(),l=s.find(".grid-tree-icon").detach(),a=i.getWorkItemTypeNameById(h),v=i.getWorkItemProjectNameById(h);return i.renderTitleCell(h,c,v,a,s,e,u,t,o),s.append(l),s},v=function(n,t,r,u,f,e,o){var c=i._drawCell(n,t,r,u,f,e,o),a=i.getWorkItemIdAtDataIndex(t),v=i._getWorkItemFieldValueFromPageData(a,s.CoreFieldRefNames.Parent),l,h;if(!v)return c;if(l=Number(v),l>0)if(h=i._getParentFieldData(l),h)if(h.error)i.renderErrorCell(c,h.error.message);else{var y=h.type,p=h.project,w=h.title;i.renderTitleCell(l,w,p,y,c,e,u,t,o,!0)}else i.renderLoadingCell(c),i._pageParents([a],[l]);return c},p=function(n,t,r,u,f,e,o){var s=$("<div/>").addClass("grid-cell").css("width",(f.width||20)+"px"),h=i.getColumnText(t,f,o);return h&&s.append(i._getWorkItemStateColorCell(t,h)),s},y=function(n,t,r,u,f,e,o){var s=i._drawCell(n,t,r,u,f,e,o),c,h,l;if(s&&(s.empty(),s.addClass("identity-grid-cell"),c=i.getColumnText(t,f,o),h=w.WITIdentityHelpers.parseUniquefiedIdentityName(c),h)){l={item:h,size:st.IdentityPickerControlSize.Small,displayType:st.EDisplayControlType.TextOnly,turnOffHover:!0};k.create(st.IdentityDisplayControl,s,l);var a=w.WITIdentityHelpers.getFriendlyDistinctDisplayName(c,h),v=st.EntityFactory.isStringEntityId(h.entityId),y=v||dt.localeIgnoreCaseComparer(c,a)!==0;s.data("tooltip-text",a);s.data("tooltip-show-on-overflow",y)}return s},b=function(n,t,r,u,f,e,o){var s=i._drawCell(n,t,r,u,f,e,o),h,l,c;return s&&(h=i.getColumnText(t,f,o),isNaN(Number(h))?s.empty():i._options.displayIdWithLinks&&(l=i._options.tfsContext.getPublicActionUrl("","workitems")+"#_a=edit&id="+h+"&"+tt.FullScreenHelper.FULLSCREEN_HASH_PARAMETER+"=true",s.empty(),c=$("<a/>").attr({href:l,target:"_blank"}).text(h),rt.RichContentTooltip.addIfOverflow(h,c),s.append(c))),s},e=function(n,t){return dt.ignoreCaseComparer(n,t)===0},u=0,f=n.columns.length;u<f;u++)r=$.extend({},n.columns[u]),r.index=u,this._allowSort||(r.canSortBy=!1),e(r.name,s.CoreFieldRefNames.Id)?r.getCellContents=b:e(r.name,s.CoreFieldRefNames.Tags)?(r.canSortBy=!1,r.getCellContents=l):e(r.name,s.CoreFieldRefNames.Title)?r.getCellContents=a:e(r.name,s.CoreFieldRefNames.Parent)?r.getCellContents=v:r.isIdentity?r.getCellContents=y:e(r.name,s.CoreFieldRefNames.State)&&(r.getCellContents=p),this._displayColumns[u]=r,this._displayColumnsMap[r.name]=u;if(this._pageColumns=[],this._pageColumnMap={},n.pageColumns)for(u=0,f=n.pageColumns.length;u<f;u++)this._pageColumns.push(n.pageColumns[u]),this._pageColumnMap[n.pageColumns[u]]=u;if(this._sortColumns=[],n.sortColumns)for(u=0,f=n.sortColumns.length;u<f;u++)o=n.sortColumns[u],this._sortColumns.push(o),o.name in this._displayColumnsMap&&c.push({index:this._displayColumnsMap[o.name],order:o.descending?"desc":"asc"});this._options.sortOrder=c;this._options.keepSelection=n.keepSelection===!0;this._filterApplied?(this._unfilteredIsLinkQuery=n.isLinkQuery,this._unfilteredIsTreeQuery=n.isTreeQuery,this._isLinkQuery=!1,this._isTreeQuery=!1):(this._isLinkQuery=n.isLinkQuery,this._isTreeQuery=n.isTreeQuery);h=[];this._queriesHubContext&&this._isLinkOrTreeQuery()?(this._isShowingExpandCollapseColumns=!0,h=[{name:t.EXPAND_COLUMN_NAME,index:this._displayColumns.length,width:20,canSortBy:!1,canMove:!1,fieldId:null,fixed:!0,tooltip:ct.ExpandAllToolTip,onHeaderClick:function(){return i.executeCommand("expand-all-nodes",!1)},headerContainerCss:"expand-collapse-icons-header",getHeaderCellContents:function(){var n=$("<span>").addClass("expand-icon bowtie-icon bowtie-toggle-expand");return rt.RichContentTooltip.add(ct.ExpandAllToolTip,n),n}},{name:t.COLLAPSE_COLUMN_NAME,index:this._displayColumns.length+1,width:20,canSortBy:!1,canMove:!1,fieldId:null,fixed:!0,tooltip:ct.CollapseAllToolTip,headerContainerCss:"expand-collapse-icons-header",onHeaderClick:function(){return i.executeCommand("collapse-all-nodes",!1)},getHeaderCellContents:function(){var n=$("<span/>").addClass("collapse-icon bowtie-icon bowtie-toggle-collapse");return rt.RichContentTooltip.add(ct.CollapseAllToolTip,n),n}}]):this._isShowingExpandCollapseColumns=!1;this._options.columns=h.concat(this._displayColumns);this._emptyQueryResults=this._getEmptyQueryStatus();this._pageData={};this.buildCache(n.payload,n.isCachedData);this.initializeDirtyWatch();this._fetching=!1;this.cancelDelayedFunction("updateWorkItemCache");this.cancelDelayedFunction("pageWorkItems")},t.prototype.updateDataModel=function(n){this.initializeDataModel(n);this.initializeDataSource();this._updateSoftCapMessage(n);n.error&&this._statusUpdate(n.error);this._filterManager.isActive()&&this._pageFirstThousand();tu.fire(er.QueryResultsGridEvents.RESULTS_MODEL_CHANGED,this,this._workItems&&this._workItems.length)},t.prototype.setTitleInteraction=function(n,t){this._allowInteractionWithTitle=n;this._allowSingleClickOpen=t},t.prototype.layout=function(){n.prototype.layout.call(this);this._updateZeroDataComponent();this._fire("queryResultsRendered")},t.prototype.setNavigator=function(n){this._workItemsNavigator!==n&&(this.detachNavigatorEvents(),this._workItemsNavigator=n,this.attachNavigatorEvents())},t.prototype.setNewQueryContextOptions=function(n,t){this._queriesHubContext=n;this._useZeroDataView=t},t.prototype.detachNavigatorEvents=function(){this._workItemsNavigator&&(this._workItemsNavigator.detachEvent(oi.WorkItemsNavigator.EVENT_NAVIGATE_NEXT,this._navigateNextDelegate),this._workItemsNavigator.detachEvent(oi.WorkItemsNavigator.EVENT_NAVIGATE_PREVIOUS,this._navigatePreviousDelegate))},t.prototype.attachNavigatorEvents=function(){this._workItemsNavigator&&(this.detachNavigatorEvents(),this._workItemsNavigator.attachEvent(oi.WorkItemsNavigator.EVENT_NAVIGATE_NEXT,this._navigateNextDelegate),this._workItemsNavigator.attachEvent(oi.WorkItemsNavigator.EVENT_NAVIGATE_PREVIOUS,this._navigatePreviousDelegate))},t.prototype.beginShowResults=function(n,i,r,u){var f=this,e,o;e=!0;this._workItemsProvider!==n?this._workItemsProvider=n:u&&u.keepSelection&&(e=!this._workItemsProvider.resultsValid||this._workItemsProviderVersion!==this._workItemsProvider.getVersion());u&&u.statusText&&this.setStatusText(u.statusText);$(this).trigger("queryResultsStarting");this.showLoadingIndicator();n.beginGetResults(function(t){if(f._checkForEmptyCurrentIteration(n,t),f._workItemsProvider){if(f._workItemsProviderVersion=f._workItemsProvider.getVersion(),f._queriesHubContext&&(f._workItemsProvider.queryDefinition.queryType||(f._workItemsProvider.queryDefinition.queryType=y.QueryType[yi.LinkQueryMode.getQueryType(t.editInfo.mode)],f._queriesHubContext.triageViewActionCreator.updateProvider(f._workItemsProvider))),e){if(f.updateDataModel(t),ri.isImportWorkItemsProvider(f._workItemsProvider)){var r=f._workItemsProvider;r.isImported()&&f._updatePageDataAndRow(r.getWorkItemsImportData())}}else f.layout(),f._statusUpdate(t.error);$(f).trigger("queryResultsComplete");f.hideLoadingIndicator();$.isFunction(i)&&i.call(f,t)}},function(n){$.isFunction(r)&&r.call(f,n);$(f).trigger("queryResultsError",n);f.hideLoadingIndicator()},u&&u.runQuery,u);ri.isImportWorkItemsProvider(this._workItemsProvider)&&(o=this._workItemsProvider,o.isImported()||ii.showImportCSVPanel(this.getActionArguments(t.COMMAND_ID_IMPORTCSV)))},t.prototype._createContextMenu=function(t,i){return si.QueryResultsProvider.isRecycleBinQueryResultsProvider(this._workItemsProvider)?this._createRecycleBinContextMenu(t,i):(ur.CommonContextMenuItems.contributeQueryResultGrid(i,{tfsContext:this._options.tfsContext,enableTeamActions:!0,container:this._element}),i.contextInfo&&(i.contextInfo.item={workItemId:i.contextInfo.item}),this._updateContextMenuTitles(i.items),n.prototype._createContextMenu.call(this,t,i))},t.prototype._updateZeroDataComponent=function(){var n,t;this._useZeroDataView&&this._workItemsProvider&&this._workItemsProvider.queryResultsModel&&(this._zeroDataElement=this._zeroDataElement||$("<div>").appendTo(this._element),n=this._workItemsProvider.queryResultsModel.payload,ri.isImportWorkItemsProvider(this._workItemsProvider)||n&&n.rows&&n.rows.length>0?(di.unmountZeroDataComponent(this._zeroDataElement[0]),this._zeroDataComponentMounted=!1,this._isNewQueryInZeroDataComponent=!1):(t=this._getEmptyQueryStatus(),this._zeroDataComponentMounted&&this._isNewQueryInZeroDataComponent===t||(di.renderZeroDataQueryResult(this._zeroDataElement[0],t),this._zeroDataComponentMounted=!0,this._isNewQueryInZeroDataComponent=t)))},t.prototype._getEmptyQueryStatus=function(){return this._workItemsProvider&&this._workItemsProvider.queryResultsModel&&this._workItemsProvider.queryResultsModel.queryRan===!1},t.prototype._updateContextMenuTitles=function(n){for(var r,u=this._isQueryAcrossProject(),i=0;i<n.length;i++)if(r=n[i],r.id===t.CHANGE_WORK_ITEM_TYPE_ID){r.title=u?nr.ChangeTypeTooltipDisabled:"";break}},t.prototype._isQueryAcrossProject=function(){return!(this._workItemsProvider&&this._workItemsProvider.queryResultsModel&&this._workItemsProvider.queryResultsModel.editInfo&&this._workItemsProvider.queryResultsModel.editInfo.teamProject)},t.prototype._createRecycleBinContextMenu=function(i,r){function e(){return f._onGetMenuItemActionArguments(this)}var u=yr.WorkItemPermissionDataHelper.isPopulated(),o=!(u&&yr.WorkItemPermissionDataHelper.hasWorkItemDeletePermission()),s=!(u&&yr.WorkItemPermissionDataHelper.hasWorkItemDestroyPermission()),f;return o&&s?null:(f=this,r.contributionIds=["ms.vss-work-web.recycle-bin-context-menu"],r.items=[{id:t.COMMAND_ID_DESTROY,text:nr.DestroyWorkItemDeleteButtonText,icon:"bowtie-icon bowtie-edit-delete",arguments:e},{id:t.COMMAND_ID_RESTORE,text:nr.RestoreWorkItemDeleteButtonText,icon:"bowtie-icon bowtie-recycle-bin-restore",arguments:e}],r.contextInfo&&(r.contextInfo.item={workItemId:r.contextInfo.item}),n.prototype._createContextMenu.call(this,i,r))},t.prototype.getActionArguments=function(n,i){var r=this,e=this,f,u;return n===ar.WorkItemActions.ACTION_WORKITEM_OPEN||n===ar.WorkItemActions.ACTION_WORKITEM_OPEN_IN_NEW_TAB?(f=this.getSelectedWorkItemId(),f>0?{id:this.getSelectedWorkItemId(),tfsContext:this._options.tfsContext,triage:!0}:{id:this.getSelectedWorkItemId(),workItemTypeName:ki.WorkItemManager.get(this._store).getWorkItem(f).workItemType.name}):n==="link-to-new"||n==="link-to-existing"?{baseId:this.getSelectedWorkItemId(),selectedIds:this.getSelectedWorkItemIds(),tfsContext:this._options.tfsContext}:n==="create-copy"||n==="use-as-a-template"?{workItemId:this.getSelectedWorkItemId(),tfsContext:this._options.tfsContext}:n==="copy-selection-html"?{grid:this,tfsContext:this._options.tfsContext}:n==="column-options"?(u=this._workItemsProvider.queryResultsModel&&this._workItemsProvider.queryResultsModel.editInfo&&this._workItemsProvider.queryResultsModel.editInfo.teamProject,u&&dt.equals(u,wi.WiqlOperators.MacroProject,!0)&&(u=this._options.tfsContext.navigation.project),{sortColumns:this._sortColumns.map(function(n){return{fieldRefName:n.name,descending:n.descending}}),allowSort:this._allowSort,displayColumns:this.getFieldColumns().map(function(n){return{fieldRefName:n.name,width:n.width}}),project:u,onOkClick:function(n,t){t&&pt.delay(r,0,function(){r.onColumnChange(n.display,n.sort,n.added,n.removed)})}}):n===t.COMMAND_ID_EMAIL_SELECTION?{queryResultsProvider:this._workItemsProvider,selectedWorkItems:this.getSelectedWorkItemIds(),tfsContext:this._options.tfsContext}:n===t.COMMAND_ID_UNFOLLOW?{queryResultsProvider:this._workItemsProvider,selectedWorkItems:this.getSelectedWorkItemIds(),tfsContext:this._options.tfsContext}:n===t.COMMAND_ID_DESTROY||n===t.COMMAND_ID_RESTORE?{sourceType:i,selectedIds:this.getSelectedWorkItemIds(),tfsContext:this._options.tfsContext,grid:this}:n===t.COMMAND_ID_IMPORTCSV?{onImportClick:function(n){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(){return this.initializeFromImportData(n),[2]})})},onDismiss:function(n){if(n){var t=ki.WorkItemManager.get(r._store);r.updateDataModel({targetIds:[],isLinkQuery:!1,isTreeQuery:!1,pageColumns:[],queryRan:!1,wiql:null,columns:[],sortColumns:[],payload:null,sourceIds:[],linkIds:[]});t.resetCache()}}}:void 0},t.prototype._updatePageDataAndRow=function(n){for(var u=ki.WorkItemManager.get(this._store),r=n.targetIds,f=n.idsMap,e=n.fieldValues,t=0;t<r.length;t++){var i=r[t],o=f[i],s=u.getWorkItem(i),h=e[o];this._updatePageData(i,h);this._updatePageRow(s)}},t.prototype.initializeFromImportData=function(n){var t,i,r;this._pageData={};t=this._workItemsProvider;t.import(n);i=t.queryResultsModel;i.allowSort=!1;this.updateDataModel(i);this._updatePageDataAndRow(n);r={ColumnCount:n.columns.length,ItemCount:n.fieldValues.length,IsTreeQuery:n.isTreeQuery};at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ci.WITCustomerIntelligenceFeature.IMPORTCSV_IMPORT,r))},t.prototype.getCommandStates=function(){var i=this._selectionCount,f=this._workItemsProvider&&this._workItemsProvider.queryDefinition&&pi.QueryDefinition.isSpecialQueryId(this._workItemsProvider.queryDefinition.id),n=si.QueryResultsProvider.isRecycleBinQueryResultsProvider(this._workItemsProvider),r=this._isLinkOrTreeQuery()&&!n,u=yr.WorkItemPermissionDataHelper.isPopulated(),e=!(u&&yr.WorkItemPermissionDataHelper.hasWorkItemDeletePermission()),o=!(u&&yr.WorkItemPermissionDataHelper.hasWorkItemDestroyPermission()),s=this._isQueryAcrossProject();return[{id:"save-work-items",hidden:n,disabled:!this.isDirty(!0)},{id:"save-query",disabled:!(this._workItemsProvider&&this._workItemsProvider.isSaveable&&this._workItemsProvider.isSaveable())},{id:"copy-selection-html",hidden:n},{id:"refresh-work-items",disabled:!1},{id:"link-to-new",hidden:n,disabled:i===0},{id:"link-to-existing",hidden:n,disabled:i===0},{id:"change-work-item-type",hidden:n,disabled:s},{id:"move-work-items",hidden:n},{id:"create-copy",hidden:n,disabled:i!==1},{id:"use-as-a-template",hidden:n,disabled:i!==1},{id:"open-work-item",hidden:n,disabled:i!==1},{id:"open-work-item-in-new-tab",hidden:n,disabled:i!==1},{id:"bulk-edit-workitems",hidden:n,disabled:i===0},{id:"expand-all-nodes",hidden:!r,disabled:this._count===0||this._filterApplied===!0},{id:"collapse-all-nodes",hidden:!r,disabled:this._count===0||this._filterApplied===!0},{id:t.COMMAND_ID_EMAIL_SELECTION,hidden:n,disabled:i===0},{id:t.COMMAND_ID_EMAIL_QUERY_RESULT,hidden:n,disabled:i===0},{id:"share-link",hidden:f||n,disabled:!this._enableCopyQueryCommand},{id:t.COMMAND_ID_DESTROY,hidden:o||!n,disabled:i===0},{id:t.COMMAND_ID_RESTORE,hidden:e||!n,disabled:i===0},{id:"create-branch-menu",hidden:n,disabled:i===0}]},t.prototype.executeCommand=function(n,i){var r=this;i===void 0&&(i=!0);n=typeof n=="string"?n:n.get_commandName();at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"".concat(ur.CommonContextMenuItems.QUERIES_COMMAND_FEATURE_NAME,".").concat(n),{numSelectedItems:this.getSelectedWorkItemIds().length,source:i?"contextMenu":"toolBar"}));switch(n){case"view-as-report":return!1;case"add-to-favorites":return!1;case"save-query":return this.saveQuery(),!1;case"save-work-items":return this.saveWorkitems(),!1;case"refresh-work-items":return this.refresh(),!1;case"expand-all-nodes":return this.expandAll(),!1;case"collapse-all-nodes":return this.collapseAll(),!1;case"change-work-item-type":return cr.useWITDialogs().then(function(n){return n.changeWorkItemType({workItemIds:r.getSelectedWorkItemIds(),tfsContext:r._options.tfsContext,container:r._element})}),!1;case"move-work-items":return cr.useWITDialogs().then(function(n){return n.moveWorkItem({workItemIds:r.getSelectedWorkItemIds(),tfsContext:r._options.tfsContext,container:r._element,moveAcrossProjects:r._isQueryAcrossProject()})}),!1;case t.COMMAND_ID_EMAIL_QUERY_RESULT:return this.emailResults(),!1;case"share-link":return this.shareLink(),!1}},t.prototype.emailResults=function(){var t=this,i,n,r;ut.logTracePoint("SendMail.SendEmailQueryButtonClicked");this._workItemsProvider.isDirty()?(i=dt.format(nr.ErrorEmailUnsavedQuery,this._workItemsProvider.queryDefinition.path()),d.MessageDialog.showMessageDialog(i,{title:nr.ErrorSendingEmail,buttons:[d.MessageDialog.buttons.ok]})):(n=this._workItemsProvider.queryDefinition,r=n.queryText||this._workItemsProvider.originalQuery,ni.requireModules(["Admin/Scripts/TFS.Admin.SendMail","WorkItemTracking/Scripts/Dialogs/Models/EmailWorkItems"]).spread(function(i,u){i.Dialogs.sendMail(new u.EmailWorkItemsDialogModel({queryResultsAdapter:{queryId:n.id,queryName:n.name,queryText:r,fields:t._workItemsProvider.getColumns(),sortFields:t._workItemsProvider.getSortColumns(),project:n.project,workItemStore:n.project.store}}))}))},t.prototype.getQueryContributionContext=function(){var r=this.getSelectedWorkItemIds(),t,i,n;return this._workItemsProvider&&(n=this._workItemsProvider.queryDefinition,n&&n.id&&(t=pi.QueryItemFactory.queryItemToQueryHierarchyItem(n)),this._workItemsProvider.queryResultsModel&&(i=this._workItemsProvider.queryResultsModel.wiql)),{query:t,queryText:i,workItemIds:r}},t.prototype.shareLink=function(){var i=this,n=this._workItemsProvider,u=function(n){r(!0);n&&n.serverError&&dt.localeIgnoreCaseComparer(n.serverError.typeKey,"TemporaryDataTooLargeException")===0&&(n.message=nr.CopyQueryURLDataTooLargeException);i._statusUpdate(nu(n))},e=function(u){t.copyQueryUrl(i._options.tfsContext,u);n.isDirty()||(n.queryDefinition.tempQueryId=u);r(!0)},r=function(n){i._enableCopyQueryCommand=n;i._fire("commandStatusChanged")},f;!n.isDirty()&&n.queryDefinition.tempQueryId?t.copyQueryUrl(this._options.tfsContext,n.queryDefinition.tempQueryId):(r(!1),f=n.queryDefinition.queryType,n.beginGetQueryText(function(n){hr.TempQueryUtils.beginCreateTemporaryQueryId(i._options.tfsContext,n,f).then(e,u)},u))},t.prototype.restoreWorkItems=function(n,t){var i=this;n===void 0&&(n=gi.RecycleBinTelemetryConstants.TOOLBAR);t===void 0&&(t=function(n){i._statusUpdate(nu(n))});fr.showRestoreConfirmationDialog(this._options.tfsContext,n,gi.RecycleBinTelemetryConstants.WORK_ITEMS_VIEW_SOURCE,this.getSelectedWorkItemIds(),t)},t.prototype.destroyWorkItems=function(n,t){var i=this;n===void 0&&(n=gi.RecycleBinTelemetryConstants.TOOLBAR);t===void 0&&(t=function(n){i._statusUpdate(nu(n))});fr.showDestroyConfirmationDialog(this._options.tfsContext,n,gi.RecycleBinTelemetryConstants.WORK_ITEMS_VIEW_SOURCE,this.getSelectedWorkItemIds(),t)},t.prototype.getSelectedWorkItemId=function(){var n=this.getSelectedDataIndex();return n>=0?this._workItems[n]:0},t.prototype.getSelectedWorkItemIds=function(){for(var i=[],u=this._workItems,r=this.getSelectedDataIndices(),n=0,t=r.length;n<t;n++)i.push(u[r[n]]);return i},t.prototype.getSelectedWorkItemPageData=function(){for(var t=this.getSelectedWorkItemIds(),n=0,u=t.length,i=[],r,n=0;n<u;n++)r=t[n],i.push(this._pageData[r]);return{pageData:i,pageColumns:this._pageColumns}},t.prototype.setSelectedWorkItemId=function(n,t,i){var r;this._workItems.length>0&&(r=$.inArray(n,this._workItems),r>=0&&this.setSelectedDataIndex(r,t),i?pt.delay(this,0,function(){this.getSelectedRowIntoView()}):this.getSelectedRowIntoView())},t.prototype.selectedIndexChanged=function(t,i){var r;n.prototype.selectedIndexChanged.call(this,t,i);r=this._workItems[i];this._fire("selectedWorkItemChanged",[r||0])},t.prototype.selectionChanged=function(){this._workItemsNavigator&&this._workItemsNavigator.update(this._expandedCount,this.getSelectedRowIndex(),this.getSelectedWorkItemId());this._fire("selectedWorkItemChanged",this.getSelectedWorkItemIds());this._statusUpdate()},t.prototype.getStatusText=function(){return this._emptyQueryResults?nr.QueryResultsNewQueryGridStatusText:this._count===0?this._workItemsProvider?nr.QueryResultsGridStatusNoResultsText:"":this._isLinkQuery?dt.format(nr.QueryResultsGridLinkQueryStatusTextFormat,this._count,this._rootCount,this._count-this._rootCount,this._selectionCount):dt.format(nr.QueryResultsGridStatusTextFormat,this._count,this._selectionCount)},t.prototype.getPrimaryStatusText=function(){return this._emptyQueryResults?"":this._count===0?"":this._count===1?dt.format(nr.WorkItemCountDisplayStringSingular,this._count):dt.format(nr.WorkItemCountDisplayStringPlural,this._count)},t.prototype.getSecondaryStatusText=function(){return this._emptyQueryResults||this._count===0?"":this._isLinkQuery?dt.format(nr.QueryResultsGridLinkQueryStatusSecondaryTextFormat,this._rootCount,this._count-this._rootCount,this._selectionCount):dt.format(nr.QueryResultsGridNumSelectedSecondaryTextFormat,this._selectionCount)},t.prototype.setStatusText=function(n){this._fire("statusUpdate",[n,!1])},t.prototype.onOpenRowDetail=function(n){var i=this,t;return si.QueryResultsProvider.isRecycleBinQueryResultsProvider(this._workItemsProvider)||!this._allowInteractionWithTitle?!1:(t=n.workItemId,(!t||t<=0)&&n.dataIndex>=0&&(t=this._workItems[n.dataIndex]),t&&(this._beforeOpenWorkItemCallback?this._beforeOpenWorkItemCallback().then(function(){return i._executeOpenWorkItemCommand(t,n.addQueryParam)}).then(null,ni.handleError):this._executeOpenWorkItemCommand(t,n.addQueryParam)),!1)},t.prototype._executeOpenWorkItemCommand=function(n,t){var r=this,i={id:n,triage:!0,tfsContext:this._options.tfsContext,options:{close:function(){r.focus(1);r.onOpenWorkItemClosed()},addQueryParam:t}},u,f;this._queriesHubContext?this._queriesHubContext.navigationActionsCreator.navigateToWorkItem(n,!0,ri.isImportWorkItemsProvider(this._workItemsProvider)):n>0?wr.showWorkItemById(n,this._options.tfsContext,i.options):(u=ki.WorkItemManager.get(this._store).getWorkItem(n).workItemType,f=i.workItemTypeName=u.name,wr.showNewWorkItemDialog(f,{},this._options.tfsContext,i.options))},t.prototype.onOpenWorkItemClosed=function(){},t.prototype.refresh=function(n){this._refreshResults(null,null,n)},t.prototype.onColumnChange=function(n,t,i,r){this._workItemsProvider&&this._workItemsProvider.queryDefinition&&at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ci.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_CHANGE_QUERY_COLUMNS,{queryDefinitionId:this._workItemsProvider.queryDefinition.id,addedColumns:i.join(),removedColumns:r.join()}));this._refreshResults(n,t)},t.prototype.onSort=function(n,t){var r=[],i;$.each(t,function(t,i){r.push({name:i.name,asc:n[t].order==="asc"})});this._options.sortOrder=n;i=!1;try{i=!this._tryLocalSort(r)}catch(u){ut.logError(u);ft.publishErrorToTelemetry({name:"UnexpectedExceptionDuringLocalSort",message:nu(u)});i=!0}i&&this._refreshResults(this.getFieldColumns(),r)},t.prototype._tryLocalSort=function(n){var i=this,e,u,a,v,b,k,f,y,p,o,l,r,d,h,w;if(!this._workItemsProvider)return!1;if(e=0,u=0,this._pageData&&(e=Object.keys(this._pageData).length),u=this._filterApplied?this._unfilteredWorkItems.length:this._workItems.length,a=c.ProjectCollection.getDefaultConnection().getService(rr.WorkItemStore),!Boolean(a.fieldMap))return at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,t.LOCAL_SORT_FEATURE,{pagedWorkItemCount:e,workItemCount:u,gridIsFiltered:this._filterApplied,fieldsNotAvailable:!0})),!1;if(this._hasMoreResults||u>t.MAX_WORKITEMS_LOCALSORT)return at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,t.LOCAL_SORT_FEATURE,{workItemsToSort:u,gridIsFiltered:this._filterApplied,tooManyItemsToSort:!0})),!1;if(e!==u)return at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,t.LOCAL_SORT_FEATURE,{pagedWorkItemCount:e,workItemCount:u,gridIsFiltered:this._filterApplied,notAllItemsPaged:!0})),!1;for(v=Date.now(),b=[],r=0,k=n.length;r<k;r++)f=n[r],f.name in this._displayColumnsMap&&b.push({index:this._displayColumnsMap[f.name],order:f.asc?"asc":"desc"}),y=a.getFieldDefinition(f.name),p=this._pageColumnMap[f.name],f.fieldIndex=p,typeof p=="number"&&(f.comparer=rr.Field.isNumericField(y.type)?kt.defaultComparer:y.type===s.FieldType.DateTime?t._dateComparer:dt.localeIgnoreCaseComparer);for(o=t.calculateParentToChildWorkItemIds(this._parentWorkItemIds,this.getUnfilteredWorkItemIds()),l=Object.keys(o),r=0;r<l.length;r++)d=o[l[r]],o[l[r]]=this._sortWorkItems(d,n);return h={sourceIds:[],targetIds:[],linkIds:[],parentToChildWorkItemIds:o},t.calculateSourceTargetsAndLinks(h,0),w=Date.now(),n&&this._workItemsProvider.setSortColumns($.map(n,function(n){return{name:n.name,descending:!n.asc}})),this._workItemsProvider.beginGetResults(function(r){var e,f;r.sourceIds=h.sourceIds;r.targetIds=h.targetIds;r.linkIds=h.linkIds;i._workItemsProvider._updateModel(r);e=i._options.dontDeleteCache;i._options.dontDeleteCache=!0;try{i.updateDataModel(r)}catch(o){i._options.dontDeleteCache=e;throw o;}i._filterApplied&&(i.filterWorkItems(i.getFilterManager().filter()),i._updateFilterMessage());f=Date.now();at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,t.LOCAL_SORT_FEATURE,{workItemsToSort:u,columnsSorted:n.length,sortTime:w-v,refreshTime:f-w,totalTime:f-v}))}),!0},t._dateComparer=function(n,t){return wt.defaultComparer(n,t)},t.calculateSourceTargetsAndLinks=function(n,i){if(n.parentToChildWorkItemIds){var r=n.parentToChildWorkItemIds[i];r&&r.forEach(function(r){n.sourceIds.push(i);n.targetIds.push(r);n.linkIds.push(i===0?0:2);t.calculateSourceTargetsAndLinks(n,r)})}},t.calculateParentToChildWorkItemIds=function(n,t){var i={},r,u,f;if(!n||n.length===0)return i[0]=t||[],i;for(r=0;r<n.length;r++)u=n[r],f=t[r],i[u]||(i[u]=[]),i[u].push(f);return i},t.prototype._sortWorkItems=function(n,i){var u=this,r=jQuery.extend(!0,[],i),f=this._pageColumnMap[s.CoreFieldRefNames.Id];return typeof f=="number"&&r.splice(r.length,0,{asc:!0,name:s.CoreFieldRefNames.Id,comparer:kt.defaultComparer,fieldIndex:f}),n.sort(function(n,i){for(var e,o,h=u._pageData[n],c=u._pageData[i],f=0,s=0;s<r.length;s++)if(e=r[s],o=e.fieldIndex,typeof o=="number"&&(f=t.fieldValueComparer(e.comparer,h[o],c[o]),f!==0))return e.asc||(f=f*-1),f;return f})},t.prototype._getUnpagedWorkItems=function(n,t){var i=[],r,u;if(t){if(t.columns&&(r=$.inArray(s.CoreFieldRefNames.Id,t.columns)),u=[],t.rows&&t.rows.length>0){if(t.rows.length===n.length)return i;u=$.map(t.rows,function(n){return n[r]})}i=vt.subtract(n,u)}return i},t.fieldValueComparer=function(n,t,i){var r=t===null||t===""||t===undefined,u=i===null||i===""||i===undefined;return r&&u?0:r?1:u?-1:n(t,i)},t.prototype._onColumnResize=function(t){n.prototype._onColumnResize.call(this,t);this._workItemsProvider&&(this._workItemsProvider.setColumnWidth(t.name,t.width),this._workItemsProviderVersion=this._workItemsProvider.getVersion())},t.prototype._onColumnMove=function(t,i){n.prototype._onColumnMove.call(this,t,i);this._workItemsProvider&&this._workItemsProvider.setColumns(this.getFieldColumns())},t.prototype.getColumnValue=function(n,t){var r,f,e,o,i,u;return(i=this._displayColumns[t],i==null)?"":i.fieldId===s.CoreField.LinkType?(f=this._links[n],f?this._ensureLinkTypesFetched()?this._store.findLinkTypeEnd(f).name:"":""):(r=this._workItems[n],i.fieldId===s.CoreField.Id)?r>0?r:"("+-r+")":(e=this._pageData[r],!e)?"":(o=this._pageColumnMap[i.name],typeof o=="number")?(u=rr.Field.convertValueToDisplayString(e[o]),i.fieldType===s.FieldType.Html||i.fieldType===s.FieldType.History?(u=bt.HtmlNormalizer.convertToPlainText(u),dt.decodeHtmlSpecialChars(u)):u):""},t.prototype.buildCache=function(n,t){var e,b,r,u,h,i,c=ki.WorkItemManager.get(this._store),l,a,o,v,y,f,p,w;if(n){for(n.columns&&(h=n.columns.indexOf(s.CoreFieldRefNames.Id),l=n.columns.indexOf(s.CoreFieldRefNames.Rev),o=n.columns.indexOf(s.CoreFieldRefNames.Parent)),v={},y={},e=0,b=n.rows.length;e<b;e++)r=n.rows[e],u=r[h||0],a=r[l||0],i=c.getWorkItem(u),o>=0&&(f=r[o],p=f,i&&(w=i.getFieldValue(s.CoreField.Parent),p=typeof w=="number"?Number(w):null,f!==p&&this._updateParentGridDataFromWorkItem(i)),f&&(v[f]=!0,y[u]=!0)),this._updatePageData(u,r),i&&(i.isDirty()||i.revision>a?this._updatePageRow(i):t||this._options.dontDeleteCache||(i.revision!==a&&c.unpin(i),c.invalidateCache([u])));o>=0&&this._pageParents(this._convertKeysToInts(y),this._convertKeysToInts(v));this._filterManager&&this._filterManager.dataUpdated()}},t.prototype.getSelectedWorkItemTypes=function(){for(var u,n,i={},t=0,r=this.getSelectedWorkItemIds();t<r.length;t++){if(u=r[t],n=this.getWorkItemTypeNameById(u),!n||n==="")return[];i[n]=!0}return Object.keys(i)},t.prototype.getSelectedWorkItemProjectNameMapping=function(){for(var t,i,r={},n=0,u=this.getSelectedWorkItemIds();n<u.length;n++)t=u[n],i=this.getWorkItemProjectNameById(t),r[t]=i?i:null;return r},t.prototype.getSelectedWorkItemProjectTypeMapping=function(){for(var r,n,u,t={},i=0,f=this.getSelectedWorkItemIds();i<f.length;i++)(r=f[i],n=this.getWorkItemProjectNameById(r),n)&&(u=this.getWorkItemTypeNameById(r),u)&&($.isArray(t[n])||(t[n]=[]),t[n].push(u));return t},t.prototype._updatePageData=function(n,t){this._pageData[n]=t.slice(0)},t.prototype._changeWorkItemIdInLastVisibleRange=function(n,t){var i=this._workItemsInLastVisibleRange[n];i&&(this._workItemsInLastVisibleRange[t]=i,delete this._workItemsInLastVisibleRange[n])},t.prototype.cacheRows=function(n,t,i){var r=this;this._lastVisibleRange=t;this._workItemsInLastVisibleRange={};$.each(t,function(n,t){var i=r._workItems[t[1]];r._workItemsInLastVisibleRange[i]?r._workItemsInLastVisibleRange[i].push({rowIndex:t[0],dataIndex:t[1]}):r._workItemsInLastVisibleRange[i]=[{rowIndex:t[0],dataIndex:t[1]}]});this.delayExecute("updateWorkItemCache",0,!0,function(){r._updateWorkItemCache(n,t,i)})},t.prototype._pageWorkItems=function(n,t){var i=this,u;if(!this._fetching){var r=[],f={},o=si.QueryResultsProvider.isRecycleBinQueryResultsProvider(this._workItemsProvider),e={};for(o&&$.extend(e,{isDeleted:!0});this._workItemsNeeded.length>0&&r.length<bi.PageSizes.QUERY;)u=this._workItemsNeeded.pop(),!u||u in this._pageData||u in f||(r[r.length]=u,f[u]=!0);this._workItemsNeeded=[];r.length>0?(this._fetching=!0,this._store.beginPageWorkItems(r,this._pageColumns,function(u){if(!i.isDisposed()&&i._fetching){i._fetching=!1;var f=i._getUnpagedWorkItems(r,u);f.length>0&&(lr.isFollowWorkItemEnabled(i._store.getTfsContext())&&i.removeWorkItems(f),i._workItemsFailedToFetch=vt.union(i._workItemsFailedToFetch,f));i.buildCache(u);t||i.redraw()}$.isFunction(n)&&n()},function(){},e)):$.isFunction(n)&&n()}},t.prototype.workItemChanged=function(n,t){var i,r;if(t.change!==bi.WorkItemChangeType.PreSave&&t.change!==bi.WorkItemChangeType.Saving){i=t.workItem;t.change===bi.WorkItemChangeType.FieldChange&&(r={});var u=i.getUniqueId(),f=this._updatePageRow(i,r),e=this._didWorkItemChange(i);this._handleParentFieldOnWorkItemChange(t);(f||t.change!==bi.WorkItemChangeType.Opened&&e||t.change===bi.WorkItemChangeType.ErrorChanged)&&(this._updateVisibleWorkItemRow(u,r),this._updateDirtyStatus([u]),this._filterManager&&t.change===bi.WorkItemChangeType.FieldChange&&this._filterManager.dataUpdated())}},t.prototype._updateVisibleWorkItemRow=function(n,t){var f=this._workItemsInLastVisibleRange[n],i,r,u;if(f)for(i=0,r=f;i<r.length;i++)u=r[i],this.updateRow(u.rowIndex,u.dataIndex,t)},t.prototype._handleParentFieldOnWorkItemChange=function(n){var i=this._displayColumnsMap[s.CoreFieldRefNames.Parent],t;i!==undefined&&n.change===bi.WorkItemChangeType.Saved&&(t=n.workItem,this._updateParentGridDataFromWorkItem(t))},t.prototype._updateParentGridDataFromWorkItem=function(n){var u=this,e=this._displayColumnsMap[s.CoreFieldRefNames.Parent],t,i,f,o,r;e!==undefined&&(t=n.getUniqueId(),i={},this._parentFieldProvider&&this._parentFieldProvider.invalidate(t),Object.keys(this._workItemsInLastVisibleRange).forEach(function(n){var r=Number(n),f=u._getWorkItemFieldValueFromPageData(r,s.CoreFieldRefNames.Parent),e;f&&(e=Number(f),e===t&&(i[r]=!0))}),f={},n.getLinks().forEach(function(n){if(n instanceof rr.WorkItemLink){var t=n;t.getLinkType()===bi.CoreLinkTypes.Child&&(f[t.getTargetId()]=!0)}}),o=Object.keys(this._pageData),r=this._pageColumnMap[s.CoreFieldRefNames.Parent],o.forEach(function(n){var e=+n,o=u._pageData[e],s;o&&(s=o[r],f[e]?s!==t&&(o[r]=t,i[e]=!0):s===t&&(o[r]=undefined,i[e]=!0))}),Object.keys(i).forEach(function(n){var t,i=Number(n);u._updateVisibleWorkItemRow(i,(t={},t[e]=!0,t))}))},t.prototype._pageParents=function(n,t){var i=this;if(t&&t.length){var u=this.getColumnMap()[s.CoreFieldRefNames.Title]!==undefined,r=[],f=ki.WorkItemManager.get(this.getStore());t.forEach(function(n){var e=f.getWorkItem(n),t;e||u&&(t=i.getPageData()[n],t!==undefined)||r.push(n)});this._parentFieldProvider||(this._parentFieldProvider=new fi.ParentFieldProvider(this.getStore().getTfsContext(),this.getProjectName()));this._parentFieldProvider.load(r).then(function(){var t,r,u;i.isDisposed()||(i._filterManager&&i._filterManager.dataUpdated(),r=i._displayColumnsMap[s.CoreFieldRefNames.Parent],u=(t={},t[r]=!0,t),n.forEach(function(n){i._updateVisibleWorkItemRow(n,u)}))})}},t.prototype._getParentFieldData=function(n){var t=ki.WorkItemManager.get(this.getStore()).getWorkItem(n),i;if(t)return{id:n,type:t.workItemType.name,project:t.workItemType.project.name,title:t.getFieldValue(s.CoreFieldRefNames.Title)};if(this.getColumnMap()[s.CoreFieldRefNames.Title]!==undefined&&(i=this.getPageData()[n],i!==undefined)){var r=this.getWorkItemTypeNameById(n),u=this.getWorkItemProjectNameById(n),f=this.getWorkItemTitleById(n);return{id:n,type:r,project:u,title:f}}return this._parentFieldProvider?this._parentFieldProvider.get(n):undefined},t.prototype._convertKeysToInts=function(n){var t=[],i=Object.keys(n);return i.forEach(function(n){t.push(+n)}),t},t.prototype._didWorkItemChange=function(n){var t=n.isDirty(),i=n.isValid(),r=this._dirtyWorkItems[n.id]!==t||this._validWorkItems[n.id]!==i;return this._dirtyWorkItems[n.id]=t,this._validWorkItems[n.id]=i,r},t.prototype.initializeDirtyWatch=function(){this._managedWorkItems={};this._pendingManaged=null;this._dirtyWorkItems={};this._validWorkItems={};this._pendManagedWorkItemIds($.map(ki.WorkItemManager.get(this._store).getManagedWorkItems(),function(n){return n.getUniqueId()}))},t.prototype.getWorkItemIds=function(){return this._workItems.slice(0)},t.prototype.isRealWorkItem=function(){return!0},t.prototype.getUnfilteredWorkItemIds=function(){var n=this._filterApplied?this._unfilteredWorkItems:this._workItems;return n.slice(0)},t.prototype.getUnfilteredExpandStates=function(){return this._filterApplied?this._unfilteredExpandStates:this._options.expandStates},t.prototype.setUnfilteredExpandStates=function(n){this._filterApplied?this._unfilteredExpandStates=n:this._options.expandStates=n},t.prototype.saveQuery=function(){var n=this;this._workItemsProvider.invalidateResults();this._workItemsProvider.beginSave(null,function(t){n._statusUpdate(t)})},t.prototype._setIdValue=function(n){var i=this._pageData[n],t=this._pageColumnMap[s.CoreFieldRefNames.Id];t>=0&&(i[t]=n)},t.prototype._replaceTempIdsWithNewIds=function(n){var r=Object.keys(n).length,t,i;if(this._workItems)for(t=0;t<this._workItems.length;t++)if(i=n[this._workItems[t]],i&&(this._workItems[t]=i,r--),r===0)break;if(r=Object.keys(n).length,this._unfilteredWorkItems)for(t=0;t<this._unfilteredWorkItems.length;t++)if(i=n[this._unfilteredWorkItems[t]],i&&(this._unfilteredWorkItems[t]=i,r--),r===0)break},t.prototype._updatePageDataMapping=function(n,t){var i=this._pageData[n],r=this._pageData[t];i&&!r&&(this._pageData[t]=i,this._setIdValue(t),delete this._pageData[n])},t.prototype._modifyNewWorkItemReferences=function(){var i=this,r=ki.WorkItemManager.get(this._store),n=r.getUnmanagedWorkItems(),t;n&&n.length!=0&&(t={},n.forEach(function(n){var r=n.id,u=n.tempId;i._updatePageDataMapping(u,r);t[u]=r;i._workItemsProvider.updateTempWorkItemId(u,r);n.tempId=0}),this._replaceTempIdsWithNewIds(t))},t.prototype._cleanupNewWorkItemLinks=function(n){n.forEach(function(n){var t=n.allLinks.filter(function(n){return n.linkData.ID<0});n.removeLinks(t)})},t.prototype.updateNewWorkItem=function(n){var i,r=n.workItems[0],u=r.id,t=r.tempId;t>=0||(this._updatePageDataMapping(t,u),this._replaceTempIdsWithNewIds((i={},i[t]=u,i)),this._workItemsProvider.updateTempWorkItemId(t,u),r.tempId=0,this.redraw())},t.prototype.saveWorkitems=function(n){var u=this,r=[],t=this,i,f;this._saving||(r=this._getDirtyWorkItems(),r.length>0&&(this._saving=!0,$(this).trigger("savingWorkItems"),i=or.PerfScenarioManager.startScenario(hi.WITPerformanceScenario.WORKITEM_BULKSAVE,!1),i.addData({PathName:"QueryGridBulkSave"}),i.addData({DirtyWorkItemsCount:r.length}),ri.isImportWorkItemsProvider(this._workItemsProvider)&&i.addData({ImportCsv:!0}),f={label:nr.SavingWorkItems,current:0,total:r.length,increment:bi.PageSizes.SAVE},this.showProgressBar(f,nr.SavingWorkItemsLoading),this._store.beginSaveWorkItemsBatch(r,function(){i&&i.addSplitTiming(hi.PerformanceEvents.WORKITEM_SAVE_COMPLETE);ri.isImportWorkItemsProvider(u._workItemsProvider)&&(t._modifyNewWorkItemReferences(),t._cleanupNewWorkItemLinks(r));t._saving=!1;t.redraw();t.hideProgressBar();$(t).trigger("workItemsSaved");ut.logTracePoint("QueryResultGrid.saveWorkItems.success");i&&i.end()},function(f){i&&i.abort();ri.isImportWorkItemsProvider(u._workItemsProvider)&&(t._modifyNewWorkItemReferences(),t._cleanupNewWorkItemLinks(r));t._saving=!1;t.redraw();t.hideProgressBar();var e=eu(f,r.length);e?d.MessageDialog.showMessageDialog(e,{title:nr.TriageViewSaveErrorTitle,buttons:[d.MessageDialog.buttons.ok]}):uu(f,n,t);$(t).trigger("workItemsSaveError")},function(n){t.updateProgressBar(n)})))},t.prototype.beginPageSelectedWorkItems=function(n,t,i){function o(){var t;if(this._cancelable&&this._cancelable.canceled){$.isFunction(n)&&n();return}u+=1;u<e?(t=u*bi.PageSizes.QUERY,r._workItemsNeeded=f.slice(t,t+bi.PageSizes.QUERY),r._pageWorkItems(kr(r,o),i)):u>=e&&$.isFunction(n)&&(ut.logTracePoint("TFS.WorkItemTracking.Controls.Query.beginPageSelectedWorkItems.complete"),n())}var e,u,r,f=this.getSelectedWorkItemIds();ut.logTracePoint("TFS.WorkItemTracking.Controls.Query.beginPageSelectedWorkItems.start");f&&f.length>0?(e=Math.ceil(f.length/bi.PageSizes.QUERY),u=0,r=this,r._workItemsNeeded=f.slice(0,bi.PageSizes.QUERY-1),r._pageWorkItems(kr(r,o),i)):(ut.logTracePoint("TFS.WorkItemTracking.Controls.Query.beginPageSelectedWorkItems.complete"),n())},t.prototype.getWorkItemIdAtDataIndex=function(n){return this._workItems[n]},t.prototype._createFilterManager=function(){this._filterManager=new li.FilterManager(this);this._bindFilterManagerEvents()},t.prototype._bindFilterManagerEvents=function(){this._filterManager.attachEvent(li.FilterManager.EVENT_FILTER_CHANGED,this._onFilterChanged);this._filterManager.attachEvent(li.FilterManager.EVENT_FILTER_CLEARED,this._onUnfilter);this._filterManager.attachEvent(li.FilterManager.EVENT_FILTER_DEACTIVATED,this._onUnfilter);this._filterManager.attachEvent(li.FilterManager.EVENT_FILTER_ACTIVATED,this._onFilterActivated)},t.prototype._unbindFilterManagerEvents=function(){this._filterManager&&(this._filterManager.detachEvent(li.FilterManager.EVENT_FILTER_CHANGED,this._onFilterChanged),this._filterManager.detachEvent(li.FilterManager.EVENT_FILTER_CLEARED,this._onUnfilter),this._filterManager.detachEvent(li.FilterManager.EVENT_FILTER_DEACTIVATED,this._onUnfilter),this._filterManager.detachEvent(li.FilterManager.EVENT_FILTER_ACTIVATED,this._onFilterActivated))},t.prototype.filterWorkItems=function(n,t){var i=this.getSelectedWorkItemId();(this._filterApplied===!1||t)&&(this._unfilteredWorkItems===null&&(this._unfilteredWorkItems=this.getWorkItemIds()),this._unfilteredExpandStates===null&&(this._unfilteredExpandStates=this._options.expandStates),this._unfilteredIsLinkQuery===null&&(this._unfilteredIsLinkQuery=this._isLinkQuery),this._unfilteredIsTreeQuery===null&&(this._unfilteredIsTreeQuery=this._isTreeQuery));this._options.columns=this._columns;n=this._sortAndRemoveDuplicates(n,this._unfilteredWorkItems);this._options.source=n;this._workItems=n;this._options.expandStates=null;this._isLinkQuery=!1;this._isTreeQuery=!1;this._filterApplied=!0;this.initializeDataSource();this.setSelectedWorkItemId(i,!0,!0);this._updateFilterMessage();ut.logTracePoint("Grid.filteringComplete");this._queriesHubContext&&this._queriesHubContext.triageViewActionCreator.applyFilters(n,this._filterManager.getFilters())},t.prototype.removeWorkItems=function(n){var f=this.getSelectedDataIndex(),i=this._workItemsProvider,t,r,u;if(i){for(t=0;t<n.length;t++)r=n[t],i.removeWorkItem(r);u=i.queryResultsModel;this.processDataSource(u,!1);this.initializeDataSource()}this.setRowSelection(f)},t.prototype.setRowSelection=function(n){n>=this.getLastRowDataIndex()&&(n=this.getLastRowDataIndex()-1);n>=0&&(this.setSelectedDataIndex(n),this.getSelectedRowIntoView())},t.prototype.restoreUnfilteredState=function(n){n===void 0&&(n=!1);var t;this._filterApplied===!0&&this._unfilteredWorkItems&&(n||(t=this.getSelectedWorkItemId()),this._reinstateUnfilteredData(),this._clearCachedFilterValues(),this._options.columns=this._columns,this.initializeDataSource(n),n||this.setSelectedWorkItemId(t,!0,!0),ut.logTracePoint("QueryResultGrid.restoreUnfilteredStateComplete"));this._updateFilterMessage()},t.prototype.isFiltered=function(){return this._filterApplied},t.prototype._onNavigateNext=function(){var n=this.getSelectedRowIndex();n<this._count-1&&(n++,this.setSelectedRowIndex(n),this.getSelectedRowIntoView(),this.focus())},t.prototype._onNavigatePrevious=function(){var n=this.getSelectedRowIndex();n>0&&(n--,this.setSelectedRowIndex(n),this.getSelectedRowIntoView(),this.focus())},t.prototype._onGetMenuItemActionArguments=function(n){return this.getActionArguments(n.getAction(),t.enhancementTypeName)},t.prototype._updateCommandStates=function(n){n.updateCommandStates(this.getCommandStates())},t.prototype._getDefaultActionArguments=function(n){return{tfsContext:h.TfsContext.getDefault(),id:this._workItems[n.rowInfo.dataIndex],selectedWorkItems:this.getSelectedWorkItemIds(),selectedWorkItemProjectTypeMapping:this.getSelectedWorkItemProjectTypeMapping()}},t.prototype._determineIndentIndex=function(){if(this._isLinkOrTreeQuery()){var n=void 0,t=void 0,i=this.getFieldColumns(),r=this._displayColumns;for(this._indentIndex=this._isShowingExpandCollapseColumns?2:0,n=0,t=i.length;n<t;n++)if(r[i[n].index].name===s.CoreFieldRefNames.Title){this._indentIndex+=n;break}}else this._indentIndex=-1},t.prototype._statusUpdate=function(n){var t=n||this.getStatusText(),i=this.getPrimaryStatusText(),r=this.getSecondaryStatusText();t!==dt.empty&&this._fire("statusUpdate",[t,n?!0:!1,i,r])},t.prototype.showLoadingIndicator=function(){this._loadingOverlay||(this._loadingOverlay=new ei.LoadingSpinnerOverlay(this._element[0]));this._loadingOverlay.show(100,nr.LoadingQueryResults)},t.prototype.hideLoadingIndicator=function(){this._loadingOverlay&&this._loadingOverlay.hide(0)},t.prototype.showProgressBar=function(n,t){this._progressBarOverlay||(this._progressBarOverlay=new ui.ProgressBarOverlay(this._element[0],n));this._progressBarOverlay.show(100,t)},t.prototype.updateProgressBar=function(n){this._progressBarOverlay&&this._progressBarOverlay.increment(n)},t.prototype.hideProgressBar=function(){this._progressBarOverlay&&(this._progressBarOverlay.hide(0),this._progressBarOverlay=null)},t.prototype._refreshResults=function(n,t,i){var r=this,u;this._workItemsProvider&&(n&&this._workItemsProvider.setColumns(n),t&&this._workItemsProvider.setSortColumns($.map(t,function(n){return{name:n.name,descending:!n.asc}})),u=function(n){$(r).trigger("queryResultsError");r._statusUpdate(n);r.hideLoadingIndicator()},i||this._workItemsProvider.invalidateResults(),this.setStatusText(nr.QueryingStatusText),this.showLoadingIndicator(),$(this).trigger("queryResultsStarting",[i]),this._workItemsProvider.beginGetResults(function(n){r._workItemsProvider&&(r._workItemsProviderVersion=r._workItemsProvider.getVersion(),r.updateDataModel(n),r.hideLoadingIndicator(),$(r).trigger("queryResultsComplete",[i]))},u,null))},t.prototype._ensureLinkTypesFetched=function(){var n=this,t=!1;return this._linkTypesFetched||this._fetchingLinkTypes||(this._fetchingLinkTypes=!0,this._store.beginGetLinkTypes(function(){n._fetchingLinkTypes=!1;n._linkTypesFetched=!0;t&&n.redraw()},function(t){n._fetchingLinkTypes=!1;n._linkTypesFetched=!0;uu(t,null,n)})),t=!0,this._linkTypesFetched},t.prototype._isLinkOrTreeQuery=function(){var n=this._filterApplied&&(this._unfilteredIsLinkQuery||this._unfilteredIsTreeQuery);return this._isLinkQuery||this._isTreeQuery||n},t.prototype._updatePageRow=function(n,i){var o,r,f,l,a;var e=!1,h=n.getUniqueId(),u=this._pageData[h];if(!u)return!1;for(o=this._pageColumns,r=0;r<o.length;r++){if(f=n.getField(o[r]),!f){u[r]=null;e=!0;continue}if(f.fieldDefinition.id===s.CoreField.Id){u[r]=h;continue}var c=f.getValue(),v=!!i,y=dt.defaultComparer(u[r],c)!==0;y&&(c||!t.FIELD_IDS_NOT_IN_WORK_ITEM.has(f.fieldDefinition.id))&&(v&&(l=o[r],a=this._displayColumnsMap[l],i[a]=!0),u[r]=c,e=!0)}return e&&this._workItemsProvider&&this._workItemsProvider instanceof si.QueryResultsProvider&&this._workItemsProvider.updateQueryResultModelPayloadRow(h,u),e},t.prototype._updateWorkItemCache=function(n,t,i){var r=this,u=new ru(bi.PageSizes.QUERY-this._workItemsNeeded.length,this._pageData,this._workItems,function(n){return Math.abs(r._getExpandState(n))},function(n){return r._getExpandState(n)<0}),f=u.getItemsNeededToPage(n.map(function(n){return n[1]}),t.map(function(n){return n[1]}),i.map(function(n){return n[1]}));this._workItemsNeeded=this._workItemsNeeded.concat(f);this._workItemsNeeded=vt.subtract(this._workItemsNeeded,this._workItemsFailedToFetch);this._workItemsNeeded.length>0&&this.delayExecute("pageWorkItems",100,!0,function(){r._pageWorkItems()})},t.prototype._dirtyStatusChanged=function(n){this._fire("dirty-status-changed",[n])},t.prototype._updateDirtyStatus=function(n){var f,i,t,e,r=[],u;for(this._managedWorkItems||(this._managedWorkItems={}),t=0,e=n.length;t<e;t++)u=n[t],i=this._managedWorkItems[u],i===!0?f=!0:i!==!1&&r.push(u);r.length>0&&this._pendManagedWorkItemIds(r);f&&this._dirtyStatusChanged()},t.prototype._pendManagedWorkItemIds=function(n){var t,i;if(n.length>0){for(this._pendingManaged||(this._pendingManaged={}),t=0,i=n.length;t<i;t++)this._pendingManaged[n[t]]=!0;this.delayExecute("pendManagedWorkItemIds",250,!1,this._checkInterested)}},t.prototype._checkInterested=function(){var i=this._pendingManaged,u=this._managedWorkItems,f=this.getUnfilteredWorkItemIds(),r=0,n,t,e;for(n in i)i.hasOwnProperty(n)&&(u[n]=!1,r++);for(t=0,e=f.length;t<e&&r>0;t++)n=f[t],n in i&&(u[n]=!0,r--);this._pendingManaged=null;this._dirtyStatusChanged()},t.prototype._updateRow=function(t,i,r,u,f,e){n.prototype._updateRow.call(this,t,i,r,u,f,e);var h=ki.WorkItemManager.get(this._store).getWorkItem(this._workItems[r]),o=t.row,s=t.gutterRow;o.hasClass("dirty-workitem-row")&&o.removeClass("dirty-workitem-row");o.hasClass("invalid-workitem-row")&&o.removeClass("invalid-workitem-row");s&&s.hasClass("invalid-workitem-row")&&s.removeClass("invalid-workitem-row");h&&h.isDirty()&&(o.addClass("dirty-workitem-row"),(!h.isValid()||h.hasError())&&(o.addClass("invalid-workitem-row"),s&&s.addClass("invalid-workitem-row")))},t.prototype._getDirtyWorkItems=function(){for(var e,n,i,o=this.getUnfilteredWorkItemIds(),r={},u=[],s=ki.WorkItemManager.get(this._store),t=0,f=o;t<f.length;t++)e=f[t],n=s.getWorkItem(e),n&&(i=n.getUniqueId(),!n.isDirty()||i in r||(r[i]=!0,u.push(n)));return u},t.prototype._beginEnsureSelectionIsAvailable=function(n,t){this.beginPageSelectedWorkItems(n,t,!0)},t.prototype._sortAndRemoveDuplicates=function(n,t){var i={},r={};return $.each(n,function(n,t){i[t]=!0}),$.map(t,function(n){if(i[n]&&!r[n])return r[n]=!0,n})},t.prototype._clearCachedFilterValues=function(){this._unfilteredWorkItems=null;this._unfilteredExpandStates=null;this._unfilteredIsLinkQuery=null;this._unfilteredIsTreeQuery=null;this._filterApplied=!1},t.prototype._reinstateUnfilteredData=function(){this._options.source=this._unfilteredWorkItems;this._workItems=this._unfilteredWorkItems;this._options.expandStates=this._unfilteredExpandStates;this._isLinkQuery=this._unfilteredIsLinkQuery;this._isTreeQuery=this._unfilteredIsTreeQuery;this._queriesHubContext&&this._queriesHubContext.triageViewActionCreator.applyFilters(this._workItems,this._filterManager.getFilters())},t.prototype._pageFirstThousand=function(){var n=this,i=Object.keys(this._pageData).length;this._pageNextSetOfWorkItems(t.FILTER_PAGE_SIZE-i).then(function(){n._applyFilter()})},t.prototype._applyFilter=function(){this._filterManager.isFiltering()?this.filterWorkItems(this._filterManager.filter()):(this._updateFilterMessage(),this._queriesHubContext&&this._queriesHubContext.triageViewActionCreator.clearFilter())},t.prototype._pageNextSetOfWorkItems=function(n){for(var r,u=this._getUniqueUnfilteredIds(),t=[],i=0;i<u.length&&t.length<n;i++)r=u[i],this.isWorkItemPaged(r)||t.push(r);return this._pageWorkItemsByIds(t)},t.prototype._pageWorkItemsByIds=function(n){var t=this,i=l.defer(),u=function(){var i=n.filter(function(n){return t._pageData[n]==null});return i=vt.subtract(i,t._workItemsFailedToFetch),i.slice(0,bi.PageSizes.QUERY)},r=function(){var n=u();n.length>0?t.pageWorkItems(n,function(){r()}):i.resolve(null)};return r(),i.promise},t.prototype.isWorkItemPaged=function(n){return n in this._pageData},t.prototype.pageWorkItems=function(n,t){this._workItemsNeeded=this._workItemsNeeded.concat(n);this._pageWorkItems(t)},t.prototype.getWorkItemPageData=function(n){return this._pageData[n].slice(0)},t.prototype.getFilterManager=function(){return this._filterManager},t.prototype._getWorkItemFieldValueFromPageData=function(n,t){var r=this._pageData[n],i;return!!r&&(i=this._pageColumnMap[t],typeof i=="number")?rr.Field.convertValueToDisplayString(r[i]):dt.empty},t.COPY_QUERY_URL_DAYS_TO_EXPIRE=90,t.MAX_WORKITEMS_LOCALSORT=400,t.CHANGE_WORK_ITEM_TYPE_ID="change-work-item-type",t.enhancementTypeName="tfs.wit.queryresultgrid",t._gridMessageClass="grid-message-area",t._gridHasMessageFlag="has-grid-message-area",t._showAllItemsLink="showAllItemsLinkId",t._showFilteredItemsLink="showFilteredItemsLinkId",t._copyQueryUrlExpirationMessage="<br><br><b>"+dt.format(nr.CopyQueryURLExpirationMessage,t.COPY_QUERY_URL_DAYS_TO_EXPIRE)+"<\/b>",t.LOCAL_SORT_FEATURE="WebAccess.WIT.QueryResults.LocalSort",t.DATASOURCE_NAME="QueryResultGrid",t.COMMAND_ID_EMAIL_QUERY_RESULT="email-query-result",t.COMMAND_ID_EMAIL_SELECTION="email-selection",t.COMMAND_ID_RESTORE="restore-work-item",t.COMMAND_ID_DESTROY="destroy-work-item",t.COMMAND_ID_UNFOLLOW="unfollow-work-item",t.COMMAND_ID_IMPORTCSV="import-csv",t.FILTER_PAGE_SIZE=1e3,t.EXPAND_COLUMN_NAME="expand-column",t.COLLAPSE_COLUMN_NAME="collapse-column",t.FIELD_IDS_NOT_IN_WORK_ITEM=new Set([s.DalFields.AreaLevel1,s.DalFields.AreaLevel2,s.DalFields.AreaLevel3,s.DalFields.AreaLevel4,s.DalFields.AreaLevel5,s.DalFields.AreaLevel6,s.DalFields.AreaLevel7,s.DalFields.IterationLevel1,s.DalFields.IterationLevel2,s.DalFields.IterationLevel3,s.DalFields.IterationLevel4,s.DalFields.IterationLevel5,s.DalFields.IterationLevel6,s.DalFields.IterationLevel7]),t}(g.GridO);t.QueryResultGrid=br;ni.initClassPrototype(br,{_workItems:null,_workItemsNeeded:null,_links:null,_displayColumns:null,_displayColumnsMap:null,_sortColumns:null,_rootCount:0,_allowSort:!0,_pageColumns:null,_pageColumnMap:null,_pageData:null,_store:null,_projectName:null,_fetching:!1,_linkTypesFetched:!1,_fetchingLinkTypes:!1,_saving:!1,_lastVisibleRange:null,_workItemsProvider:null,_workItemsProviderVersion:0,_workItemsNavigator:null,_navigateNextDelegate:null,_navigatePreviousDelegate:null,_refreshDelegate:null,_workItemChangedDelegate:null,_filterApplied:!1,_filterManager:null,_unfilteredWorkItems:null,_unfilteredExpandStates:null,_unfilteredIsLinkQuery:null,_unfilteredIsTreeQuery:null,_isLinkQuery:!1,_isTreeQuery:!1,_emptyQueryResults:!1,_managedWorkItems:null,_pendingManaged:null,_allowSingleClickOpen:!0,_allowInteractionWithTitle:!0});ni.classExtend(br,fu.ControlExtensions);ru=function(){function n(n,t,i,r,u){this._pageSize=n;this._cache=t;this._workItems=i;this._getDescendentCount=r;this._isCollapsed=u}return n.prototype.getItemsNeededToPage=function(n,t,i){var r,u,f,e,o,s;if(!(t.length<=0)&&!(this._pageSize<=0))return r=this._getUnpagedItemsInRange(t,this._pageSize),u=Math.floor(this._pageSize/4),n.reverse(),f=n.slice(0,u),r=r.concat(this._getUnpagedItemsInRange(f,this._pageSize-r.length)),e=i.slice(0,u),r=r.concat(this._getUnpagedItemsInRange(e,this._pageSize-r.length)),r.length>0&&(o=n.slice(u),r=r.concat(this._getUnpagedItemsInRange(o,this._pageSize-r.length)),s=i.slice(u),r=r.concat(this._getUnpagedItemsInRange(s,this._pageSize-r.length)),r.length<this._pageSize&&(r=r.concat(this._getUnpagedCollapsedItems(t,this._pageSize-r.length)))),r},n.prototype._getUnpagedCollapsedItems=function(n,t){for(var s,u=[],e,r,o,f=[],i=0;i<n.length;i++)r=n[i],this._isCollapsed(r)&&f.push(r);while(u.length<t&&f.length>0)if(r=f.shift(),o=this._getDescendentCount(r),o>0)for(i=r+1;i<=r+o;i++){if(e=this._workItems[i],!(e in this._cache)&&(u.push(e),u.length>=t))break;s=this._getDescendentCount(i);s>0&&(f.push(i),i+=s)}return u},n.prototype._getUnpagedItemsInRange=function(n,t){for(var u=[],i,r=0;r<n.length;r++){if(u.length>=t)break;i=this._workItems[n[r]];i>0&&!(i in this._cache)&&u.push(i)}return u},n}();t.QueryResultGridPager=ru;ou=function(n){function t(i,r){var u=__construct(this,n,[i]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u._grid=r,u.registerShortcut("j",{description:nr.KeyboardShortcutDescription_Next_Item,action:function(){t.simulateKeyDownEventOnGrid(u._grid,gt.KeyCode.DOWN)},element:u._grid.getElement()[0]}),u.registerShortcut("k",{description:nr.KeyboardShortcutDescription_Previous_Item,action:function(){t.simulateKeyDownEventOnGrid(u._grid,gt.KeyCode.UP)},element:u._grid.getElement()[0]}),u.registerShortcut("shift+j",{description:"Expand Selection Down",action:function(){t.simulateKeyDownEventOnGrid(u._grid,gt.KeyCode.DOWN,!1,!0)},hideFromHelpDialog:!0,element:u._grid.getElement()[0]}),u.registerShortcut("shift+k",{description:"Expand Selection Up",action:function(){t.simulateKeyDownEventOnGrid(u._grid,gt.KeyCode.UP,!1,!0)},hideFromHelpDialog:!0,element:u._grid.getElement()[0]}),u}return __extends(t,n),t.simulateKeyDownEventOnGrid=function(n,t,i,r){if(i===void 0&&(i=!1),r===void 0&&(r=!1),n){n.focus(0);var u=$.Event("keydown");u.keyCode=t;u.ctrlKey=i;u.shiftKey=r;n.getFocusElement().trigger(u)}},t}(p.ShortcutGroupDefinition);t.QueryResultGridShortcutGroup=ou;iu=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.processColumns=function(n){var t=n.filter(function(n){return!dt.equals(n.name,s.CoreFieldRefNames.Id,!0)&&!dt.equals(n.name,br.EXPAND_COLUMN_NAME,!0)&&!dt.equals(n.name,br.COLLAPSE_COLUMN_NAME,!0)}),i={name:s.CoreFieldRefNames.Id,fieldId:s.CoreField.Id,text:nr.CopySelectedWorkItemsIdColumnTitle,getColumnValue:function(n){var t=this.getWorkItemIdAtDataIndex(n);return t<=0?"":vr.WorkItemHtmlTableFormatter.getIdColumnValue(t,this._options.tfsContext)},noHtmlEncode:!0};return t.unshift(i),t},t.prototype.getFormattedColumnValue=function(n,t){if(n.isIdentity){var i=w.WITIdentityHelpers.parseUniquefiedIdentityName(t);if(i)return i.displayName}return t},t}(g.HtmlTableFormatter);t.QueryResultHtmlTableFormatter=iu;ni.initClassPrototype(iu,{_options:null,_grid:null});t.createTemporaryQueryIdForSelectedWorkItemIds=su;nt.menuManager.attachExecuteCommand(function(n,t){function w(n){ni.requireModules(["Admin/Scripts/TFS.Admin.SendMail","WorkItemTracking/Scripts/Dialogs/Models/EmailWorkItems"]).spread(function(t,i){t.Dialogs.sendMail(new i.EmailWorkItemsDialogModel(n))})}var i=t.get_commandArgument(),h,r=i.tfsContext||fu.getDefault(),c,l,a,u,f,e,o,v,y,p;switch(t.get_commandName()){case"copy-selection-html":var s=i.grid,b=s.getSelectionCount(),k=$.map(s.getColumns(),function(n){return n.name});return s.copySelectedItems(iu,!0),c={NumberOfSelectedWorkItems:b,ColumnNames:k,CurrentController:r.navigation.currentController,CurrentAction:r.navigation.currentAction},at.publishEvent(new at.TelemetryEventData(ci.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ci.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_COPY_SELECTION_AS_HTML,c)),!1;case br.COMMAND_ID_DESTROY:return i.grid.destroyWorkItems(gi.RecycleBinTelemetryConstants.CONTEXT_MENU,undefined),!1;case br.COMMAND_ID_RESTORE:return i.grid.restoreWorkItems(gi.RecycleBinTelemetryConstants.CONTEXT_MENU,undefined),!1;case br.COMMAND_ID_UNFOLLOW:return ut.logTracePoint("Follows.UnfollowsClicked"),l=i.selectedWorkItems,a=i.queryResultsProvider,vu(l,a,r,n),!1;case br.COMMAND_ID_EMAIL_SELECTION:ut.logTracePoint("SendMail.SendEmailContextMenuClicked");u=i.queryResultsProvider;try{f=u.queryResultsModel;e=[];f&&f.columns&&(e=$.map(f.columns,function(n){return n.name}));o={workItemSelectionOption:{workItems:i.selectedWorkItems,fields:e,store:u.queryDefinition.project,projectId:r.navigation.projectId}};lu(r,u,i.selectedWorkItems,e,[],function(n){var t=hr.TempQueryUtils.createTempQueryLink(r,n);$.extend(o.workItemSelectionOption,{extendedText:t,tempQueryId:n});w(o)},function(){w(o)})}catch(g){v={buttons:[d.MessageDialog.buttons.ok],width:"auto",contentText:g.Message,resizable:!1,title:nr.ErrorSendingEmail};d.show(d.MessageDialog,v)}return!1;case"bulk-edit-workitems":return ni.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.BulkEdit"],function(n){h={tfsContext:r,okCallback:function(t){var i={container:this._element};n.bulkUpdateWorkItems(r,t.workItemIds,t.changes,i)}};n.BulkEditDialogs.bulkEditWorkItems(i.selectedWorkItems,i.selectedWorkItemProjectTypeMapping,h)}),!1;case"link-to-new":return y=$.extend({},{tfsContext:r},i.options),cr.useWITDialogs().then(function(n){return n.newLinkedWorkItem(i.baseId,i.selectedIds,y)}),!1;case"link-to-existing":return p=$.extend({},{tfsContext:r},i.options),cr.useWITDialogs().then(function(n){return n.linkToExistingWorkItem(i.baseId,i.selectedIds,p)}),!1;case"create-copy":return cr.useWITDialogs().then(function(n){return n.createCopyOfWorkItem(i.workItemId,{tfsContext:r})}),!1;case"use-as-a-template":return cr.useWITDialogs().then(function(n){return n.useWorkItemAsATemplate(i.workItemId,{tfsContext:r})}),!1}});t.registerEnhancements=hu;hu()});

define("WorkItemTracking/Scripts/DataProviders/RollupDataProvider",["require","exports","WorkItemTracking/Scripts/Utils/RollupHelpers","Analytics/Boards/RollupQueries/RollupQuery","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","q","VSS/Service","VSS/Contributions/Services","VSS/Context","VSS/Telemetry/Services","VSS/LWP","VSS/FeatureAvailability/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.RollupDataProvider=void 0;var a=function(){function n(n,t,i){this.rollupMetric=n;this.workItemIds=t;this.backlogFilterWorkItemTypes=i;this.dataProviderId="ms.vss-work-web.backlog-rollup-registry-settings-data-provider";this.pageSize=200;this.interactiveMode=!1;this.resolvesByPage=[];this.debounceTimeRequestCountTelemetryMs=1e3;this.debounceTimeGetDataMs=1e4;this.badQualityRetryMs=1e4;this.badQualityRetryAttempts=4;this.resetWorkItemList(this.workItemIds);var u=e.getService(o.WebPageDataService,s.getDefaultWebContext()),r=u.getPageData(this.dataProviderId);r?(this.badQualityRetryAttempts=r.badQualityRetryAttempts,this.badQualityRetryMs=r.badQualityRetryMs,this.debounceTimeGetDataMs=r.debounceTimeGetDataMs,this.pageSize=r.pageSize):l.FeatureAvailabilityService.isFeatureEnabled("WebAccess.Agile.Backlog.EnableDecreasedRollupRetryTimes",!1)&&(this.badQualityRetryAttempts=20,this.badQualityRetryMs=2e3)}return n.prototype.resetWorkItemList=function(n){this.timerHandle&&clearTimeout(this.timerHandle);this.telemetryTimerHandle&&clearTimeout(this.telemetryTimerHandle);this.requestedPageIndicies=[];this.resolvesByPage=[];this.workItemIdToRollupData={};this.workItemIdToPageDataPromise={};this._initializeWorkItemIdMaps(n)},n.prototype.checkAndUpdateWorkItemIds=function(n){var i=this,t=[];return n.forEach(function(n){i.workItemIdToRollupData[n]===undefined&&t.push(n)}),this._initializeWorkItemIdMaps(t),this.workItemIds=n,this.workItemIds},n.prototype.setStore=function(n){this.workItemStore=n},n.prototype.resetRollupData=function(n,t){var i=this;Object.keys(this.workItemIdToRollupData).forEach(function(n){return i.workItemIdToRollupData[n]=null});Object.keys(this.workItemIdToPageDataPromise).forEach(function(n){return i.workItemIdToPageDataPromise[n]=null});this.interactiveMode=!0;this.witRecency||(this.witRecency={});n&&(this.witRecency.workItemsChangedUtcTimestamp=n);t&&(this.witRecency.workItemLinksChangedUtcTimestamp=t);this.timerHandle&&clearTimeout(this.timerHandle);this.telemetryTimerHandle&&clearTimeout(this.telemetryTimerHandle);this.requestedPageIndicies=[];this.syncDatesPromise=undefined},n.prototype.getRollupData=function(n,t){return t===void 0&&(t=!1),__awaiter(this,void 0,void 0,function(){var t,r,i,u=this;return __generator(this,function(f){switch(f.label){case 0:if(n<=0)return[2,{completedWorkCount:0,totalWorkCount:0}];if(this._throwIfWorkItemIdNotPresent(n),!!this.workItemIdToRollupData[n])return[3,4];t=this.workItemIdToPageDataPromise[n];t||(t=this._loadPageData(n));f.label=1;case 1:return f.trys.push([1,3,,4]),[4,t];case 2:return r=f.sent(),r?r.forEach(function(n){u.workItemIdToRollupData[n.WorkItemId]=u._interpretData(n)}):this.workItemIdToRollupData[n]=null,[3,4];case 3:if(i=f.sent(),i.error)this.workItemIdToRollupData[n]={completedWorkCount:0,totalWorkCount:0,errorMessage:i.error.message};else throw i;return[3,4];case 4:return[2,this.workItemIdToRollupData[n]]}})})},n.prototype.getTooltipLabel=function(){var r=this,n=f.defer(),t;switch(this.rollupMetric.aggregation){case i.RollupAggregation.Sum:this.workItemStore&&this.workItemStore.beginGetFields().then(function(){var t=r.workItemStore.getFieldDefinition(r.rollupMetric.aggregationField);t?n.resolve(t.name):n.resolve("")}).catch(function(){return n.resolve("")});break;case i.RollupAggregation.Count:default:t=u.WorkItemsText;this.rollupMetric.workItemTypeFilter?t=this.rollupMetric.workItemTypeFilter:this.rollupMetric.backlogFilter&&(t=i.getBacklogFilterNameById(this.rollupMetric.backlogFilter));n.resolve(t)}return n.promise},n.prototype.getRollupMetric=function(){return this.rollupMetric},n.prototype._interpretData=function(n){var r=n.Descendants,t=0,i=0;return r.forEach(function(n){n&&(n.Count||n.Sum)&&(n.isCompleted&&(t+=n.Count||n.Sum),i+=n.Count||n.Sum)}),{completedWorkCount:Math.round(t*10)/10,totalWorkCount:Math.round(i*10)/10}},n.prototype._throwIfWorkItemIdNotPresent=function(n){if(this.workItemIdToRollupData[n]===undefined)throw new Error(u.CannotFindRollupData);},n.prototype._getPageIndex=function(n){var t=this.workItemIds.indexOf(n);return Math.floor(t/this.pageSize)},n.prototype._getPageInformation=function(n){var t=this._getPageIndex(n),i=t*this.pageSize;return{pageIndex:t,workItemIds:this.workItemIds.slice(i,i+this.pageSize)}},n.prototype.getWitRecencyData=function(){var n=this,i=e.getService(o.WebPageDataService,s.getDefaultWebContext()),t;return this.witRecency?Promise.resolve(this.witRecency):(t=i.getDataAsync("ms.vss-work-web.recency-workitem-data-provider",null),t.then(function(t){var i={workItemsChangedUtcTimestamp:t.workItemsChangedDate?t.workItemsChangedDate.getTime():null,workItemLinksChangedUtcTimestamp:t.workItemLinksChangedDate?t.workItemLinksChangedDate.getTime():null};return n.witRecency=i,n.witRecency}))},n.prototype.runQueryDelayed=function(n,t,i){var r=this;return new Promise(function(u){setTimeout(function(){u(r.runQuery(n,t+1,i,!0))},r.badQualityRetryMs)})},n.prototype.isAnalyticsCaughtUp=function(n,t){return n.workItemLinksChangedUtcTimestamp==null&&t.workItemLinksChangedUtcTimestamp!=null||n.workItemLinksChangedUtcTimestamp!=null&&t.workItemLinksChangedUtcTimestamp==null||n.workItemsChangedUtcTimestamp==null&&t.workItemsChangedUtcTimestamp!=null||n.workItemsChangedUtcTimestamp!=null&&t.workItemsChangedUtcTimestamp==null?!1:(n.workItemLinksChangedUtcTimestamp>=t.workItemLinksChangedUtcTimestamp||n.workItemLinksChangedUtcTimestamp==null&&t.workItemLinksChangedUtcTimestamp==null)&&(n.workItemsChangedUtcTimestamp>=t.workItemsChangedUtcTimestamp||n.workItemsChangedUtcTimestamp==null&&t.workItemsChangedUtcTimestamp==null)?!0:!1},n.prototype._runQueryDeprecated=function(n,t,i){var u=this,a=s.getDefaultWebContext().project,v=this.getWitRecencyData(n),f=Date.now(),e=c.getLWPModule("VSS/Legacy/Legacy"),l,o;return e||console&&console.warn("`RollupQuery` requires the `VSS/Legacy/Legacy` module"),l=e?e.getLWPComponentProps().pageContext:undefined,o=v.then(function(e){var o=new r.RollupQuery(n,u.rollupMetric,a.id,u.backlogFilterWorkItemTypes,[{providerTableName:"WorkItemRevision",ExpectedSyncDate:new Date(e.workItemsChangedUtcTimestamp)},{providerTableName:"WorkItemLink",ExpectedSyncDate:new Date(e.workItemLinksChangedUtcTimestamp)}]);return o.runQuery(l).then(function(r){var s=Date.now(),o={area:"Agile",feature:"RollupDataProvider",elapsedTime:s-f,properties:{caughtUp:!0,axRecency:r.syncDates,opStoreRecency:e,retriesMade:t,interactiveMode:u.interactiveMode,totalElapsedTime:s-(i||f)}};return u.isAnalyticsCaughtUp(r.syncDates,e)?(u.axRecency=r.syncDates,h.publishEvent(o),r.results):t<u.badQualityRetryAttempts?u.runQueryDelayed(n,t,i||f):(u.axRecency=r.syncDates,o.properties.caughtUp=!1,h.publishEvent(o),null)})}).then(function(t){return n.forEach(function(n){u.workItemIdToPageDataPromise[n]=null}),t}),n.forEach(function(n){u.workItemIdToPageDataPromise[n]=o}),o},n.prototype.runQuery=function(n,t,i,u){var f=this,y=l.FeatureAvailabilityService.isFeatureEnabled("WebAccess.Agile.Backlog.EnableRollupSyncDatesConditionals",!1),e,v;if(y){var p=s.getDefaultWebContext().project,w=this.getWitRecencyData(n),o=Date.now(),a=c.getLWPModule("VSS/Legacy/Legacy");return a||console&&console.warn("`RollupQuery` requires the `VSS/Legacy/Legacy` module"),e=a?a.getLWPComponentProps().pageContext:undefined,v=w.then(function(s){var c=new r.RollupQuery(n,f.rollupMetric,p.id,f.backlogFilterWorkItemTypes,[{providerTableName:"WorkItemRevision",ExpectedSyncDate:new Date(s.workItemsChangedUtcTimestamp)},{providerTableName:"WorkItemLink",ExpectedSyncDate:new Date(s.workItemLinksChangedUtcTimestamp)}]),l=function(r){return function(u){var c=Date.now(),e={area:"Agile",feature:"RollupDataProvider",elapsedTime:c-o,properties:{caughtUp:!0,axRecency:u.syncDates,opStoreRecency:s,retriesMade:t,interactiveMode:f.interactiveMode,totalElapsedTime:c-(i||o)}};return f.isAnalyticsCaughtUp(u.syncDates,s)?(f.axRecency=u.syncDates,h.publishEvent(e),u.results):t<f.badQualityRetryAttempts&&r?f.runQueryDelayed(n,t,i||o):(f.axRecency=u.syncDates,e.properties.caughtUp=!1,h.publishEvent(e),null)}};return u?c.runQuery(e).then(l(!0)):f.syncDatesPromise==undefined?(f.syncDatesPromise=c.runQuery(e).then(l(!0)),f.syncDatesPromise):f.syncDatesPromise.then(function(){return c.runQuery(e).then(l(!1))})}).then(function(t){return n.forEach(function(n){f.workItemIdToPageDataPromise[n]=null}),t}),n.forEach(function(n){f.workItemIdToPageDataPromise[n]=v}),v}return this._runQueryDeprecated(n,t,i)},n.prototype._loadPageData=function(n){var t=this,i=this._getPageInformation(n),r;return this.interactiveMode?(r=setTimeout(function(){t.resolvesByPage.forEach(function(n){var i=t.runQuery(n.workItemIds,0);n.resolves.forEach(function(n){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(){return n(i),[2]})})})});t._recordRequestCountTelemetry(t.resolvesByPage.length);t.resolvesByPage=[];t.timerHandle=null},this.debounceTimeGetDataMs),this.timerHandle&&clearTimeout(this.timerHandle),this.timerHandle=r,new Promise(function(n){t.resolvesByPage[i.pageIndex]||(t.resolvesByPage[i.pageIndex]={workItemIds:i.workItemIds,resolves:[]});t.resolvesByPage[i.pageIndex].resolves.push(n)})):(this.requestedPageIndicies.indexOf(i.pageIndex)===-1&&(this.requestedPageIndicies.push(i.pageIndex),this.telemetryTimerHandle&&clearTimeout(this.telemetryTimerHandle),this.telemetryTimerHandle=setTimeout(function(){t.requestedPageIndicies.length&&t._recordRequestCountTelemetry(t.requestedPageIndicies.length)},this.debounceTimeRequestCountTelemetryMs)),this.runQuery(i.workItemIds,0))},n.prototype._initializeWorkItemIdMaps=function(n){var t=this;n.forEach(function(n){t.workItemIdToRollupData[n]=null;t.workItemIdToPageDataPromise[n]=null})},n.prototype._recordRequestCountTelemetry=function(n){h.publishEvent(new h.TelemetryEventData("Agile","RollupDataProvider-RequestCountReport",{interactiveMode:this.interactiveMode,requestCount:n}))},n}();t.RollupDataProvider=a});

define("Agile/Scripts/Backlog/ParentWorkItemDataProvider",["require","exports","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Context","VSS/Contributions/Services","VSS/Diag","VSS/Error","VSS/Service"],function(n,t,i,r,u,f,e,o,s){var h,c;Object.defineProperty(t,"__esModule",{value:!0});t.ParentWorkItemDataProvider=t.LoadingStatus=t.UnparentedId=void 0;t.UnparentedId=-1,function(n){n[n.Loading=0]="Loading";n[n.Loaded=1]="Loaded";n[n.Error=2]="Error"}(h=t.LoadingStatus||(t.LoadingStatus={}));c=function(){function n(n,t){this._childIdToParentIdMap={};this._parentWorkItemMap={};this._childIdToParentErrorMap={};this._loadingPromise=Promise.resolve();this._productBacklogDataManager=n;this._pagedDataSource=t}return n.prototype.getLoadingStatus=function(n){return this._childIdToParentErrorMap[n]?h.Error:this._childIdToParentIdMap[n]?h.Loaded:h.Loading},n.prototype.getErrorMessage=function(n){return this._childIdToParentErrorMap[n]},n.prototype.getParentWorkItem=function(n){var i=this._childIdToParentIdMap[n];return(e.Debug.assertIsNumber(i,"parentId"),!i||i===t.UnparentedId)?undefined:this._parentWorkItemMap[i]},n.prototype.loadParentWorkItems=function(n,i){return __awaiter(this,void 0,void 0,function(){var e,s,h,f,u,c,o;return __generator(this,function(l){switch(l.label){case 0:for(e=[],s=0,h=n;s<h.length;s++)(f=h[s],f<=0)||(this._childIdToParentIdMap[f]=undefined,u=i,u||(u=this._productBacklogDataManager.getParentIdFromWorkItemId(f,!0),u===t.UnparentedId&&(u=undefined)),u?(c=this._parentWorkItemMap[u],c?this._childIdToParentIdMap[f]=u:this._pagedDataSource.isWorkItemPaged(u)?(this._parentWorkItemMap[u]={id:u,fields:(o={},o[r.CoreFieldRefNames.Id]=this._pagedDataSource.getValue(u,r.CoreFieldRefNames.Id),o[r.CoreFieldRefNames.Title]=this._pagedDataSource.getValue(u,r.CoreFieldRefNames.Title),o[r.CoreFieldRefNames.TeamProject]=this._pagedDataSource.getValue(u,r.CoreFieldRefNames.TeamProject),o[r.CoreFieldRefNames.WorkItemType]=this._pagedDataSource.getValue(u,r.CoreFieldRefNames.WorkItemType),o)},this._childIdToParentIdMap[f]=u):e.push(f)):e.push(f));return(e&&e.length>0)?(this._loadingPromise=this._loadParentWorkItemsFromDataProvider(e),[4,this._loadingPromise]):[3,2];case 1:l.sent();l.label=2;case 2:return[2]}})})},n.prototype.getParentWorkItems=function(){var n=this;return this._loadingPromise.then(function(){return Object.keys(n._parentWorkItemMap).map(function(t){return n._parentWorkItemMap[t]})})},n.prototype._loadParentWorkItemsFromDataProvider=function(n){return __awaiter(this,void 0,void 0,function(){var c,l,a,r,v,y,h,e=this;return __generator(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),c=s.getService(f.WebPageDataService,u.getDefaultWebContext()),l="ms.vss-work-web.parent-workitem-data-provider",a={childIds:n},[4,c.getDataAsync(l,null,a)];case 1:return r=p.sent(),r?(v=r.parentWorkItems,y=r.childToParentMap,v.forEach(function(n){e._parentWorkItemMap[n.id]=n}),n.forEach(function(n){var i=y[n];e._childIdToParentIdMap[n]=i?i:t.UnparentedId})):n.forEach(function(n){e._childIdToParentIdMap[n]=t.UnparentedId}),[3,3];case 2:return h=p.sent(),n.forEach(function(n){e._childIdToParentErrorMap[n]=i.LoadParentErrorMessage}),h.name="Error loading parent work items from data provider",o.publishErrorToTelemetry(h),[3,3];case 3:return[2]}})})},n}();t.ParentWorkItemDataProvider=c});

define("Agile/Scripts/Backlog/ProductBacklogGrid",["require","exports","VSS/VSS","VSS/Diag","VSS/Controls","VSS/Utils/UI","VSS/Controls/Menus","VSS/Performance","VSS/Telemetry/Services","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/String","VSS/Events/Handlers","VSS/Utils/Date","VSS/Error","Agile/Scripts/Backlog/Events","Agile/Scripts/Common/Agile","Agile/Scripts/TFS.Agile.Boards","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/FeatureRef/RowSavingManager","WorkItemTracking/Scripts/RecycleBinConstants","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/SharedScripts/WorkItemDialogShim","Presentation/Scripts/TFS/Components/WorkItemTypeIcon","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","WorkItemTracking/Scripts/OM/QueryAdapter","WorkItemTracking/Scripts/Filtering/FilterManager","VSS/Controls/PopupContent","WorkItemTracking/Scripts/Utils/PermissionHandler","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","WorkItemTracking/Scripts/Controls/Query/QueryResultGrid","WorkItemTracking/Scripts/Utils/TempQueryUtils","WorkItemTracking/Scripts/DataProviders/RollupDataProvider","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Agile/Scripts/Common/CustomerIntelligence","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Agile/Scripts/Backlog/ParentWorkItemDataProvider","Agile/Scripts/Generated/HubConstants","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Utils/RollupHelpers"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni){function ei(n,t){return n&&t?-t:t}function oi(n){return n.slice(0).filter(function(n){return n.fieldId&&!n.hidden})}var ii,fi,ti,ui,ri;Object.defineProperty(t,"__esModule",{value:!0});t.BacklogsHtmlTableFormatter=t.ProductBacklogGrid=t.GridGroupRowBase=t.GroupRowType=void 0;at.registerEnhancements();ii=c.delegate,function(n){n[n.NormalRow=0]="NormalRow";n[n.OrphanTasks=-1]="OrphanTasks"}(fi=t.GroupRowType||(t.GroupRowType={}));ti=function(){function n(n,t,i){this._gridOptions=t;this._preprocessor=i;n?(this._id=n,tt.WorkItem.reserveTempId(n)):this._id=tt.WorkItem.getTempId()}return n.getCustomGroupRowTypes=function(){return[fi.OrphanTasks]},n.getGroupRow=function(t){return t in n.workitemIDMap?n.workitemIDMap[t]:null},n.prototype.getRowId=function(){return this._id},n.prototype.getChildRows=function(){return[]},n.prototype.getRowType=function(){return fi.NormalRow},n.prototype.getDefaultRow=function(){return{}},n.prototype.getGridOptions=function(){return this._gridOptions},n.prototype.buildHierarchy=function(){return null},n.prototype.getRowRenderer=function(){return null},n.workitemIDMap={},n}();t.GridGroupRowBase=ti;ui=function(n){function t(t){var i=__construct(this,n,[t]);for(var u in i)i.hasOwnProperty(u)&&(this[u]=i[u]);return i._eventHelper=t.eventHelper,i._parentWorkItemDataProvider=new kt.ParentWorkItemDataProvider(i._options.dataManager,i),t.behaviors&&$.each(t.behaviors,function(n,r){r.setGrid(i);r.onPrepareColumns(t.columns,t.productBacklogGridOptions)}),i._isIterationBacklog=t.iterationBacklog||!1,i._options.initialSelection=!1,i._events=new a.NamedEventCollection,i._contextMenuErrorHandler=t.contextMenuErrorHandler,i._contextMenuCreator=t.contextMenuCreator,i._accessoriesInitialized=!1,i._expandStatesById={},i._gridRowMouseClickEventInfo=null,t.productBacklogGridOptions&&(i.setReorderState(Boolean(t.productBacklogGridOptions.enableReorder)),i.setReparentState(Boolean(t.productBacklogGridOptions.enableReparent))),i._requiredColumnReferenceNames=h.unique([bt.CoreFieldRefNames.WorkItemType].concat(t.requiredColumnsReferenceNames||[])),n.prototype.setBeforeOpenWorkItemCallback.call(i,function(){return it.prefetchFormModules()}),i.getFilterManager().attachEvent(ot.FilterManager.EVENT_FILTER_CLEARED,ii(i,i._onFilterCleared)),i._backlogWorkItemChangedDelegate=ii(i,i.backlogWorkItemChanged),i}return __extends(t,n),t.initializeEnhancementOptions=function(n,t){var i=!1;return t&&t.productBacklogGridOptions&&t.productBacklogGridOptions.showOrderColumn&&(i=!0),this.updatePayloadColumns(i,t&&t.columns),t},t.updatePayloadColumns=function(n,i,u){var f,h,e,o,c;if(i){for(f=0,h=i.length;f<h;f++)i[f]&&(i[f].canSortBy=!1);e=ct.FeatureAvailabilityService.isFeatureEnabled(lt.FeatureAvailabilityFlags.WebAccessAgileBacklogEnableRollupColumns,!1);o=[];u&&(u.forEach(function(n,u){var v;if(n.rollup&&!n.rollupCalculation&&y.publishErrorToTelemetry(new Error("Rollup column doesn't define attribute rollupCalculation. This results in rollup column not being displayed.")),n.rollup&&n.rollupCalculation&&e){o.push({rollupColumnName:n.fieldName,rollupCalculation:n.rollupCalculation});var p=ni.getBacklogWorkItemTypesById(n.rollupCalculation.backlogFilter),f=new yt.RollupDataProvider(n.rollupCalculation,[],p),h=null,l=$("<span />").addClass("icon bowtie-icon bowtie-row-child"),c,s=$("<div />").addClass("title").attr("role","button").data("no-tooltip",!0),a=function(n,i){h||(h=st.RichContentTooltip.add($("<span />"),s.parent(),{setAriaDescribedBy:!0}));(c==null||n!==c)&&(c=n);t._rollupSetHeaderState(f,n,i,l,h,s)},w={canSortBy:!1,canMove:!0,rollup:!0,name:n.fieldName,width:n.columnWidth,rollupCalculation:n.rollupCalculation,resetRollupData:function(n,t){f.resetRollupData(n,t)},resetRollupItems:function(n){f.resetWorkItemList(n)},getHeaderCellContents:function(){var t=ni.getBacklogFilterNameById(n.rollupCalculation.backlogFilter);return this.renderRollupHeaderCell(n.rollupCalculation,s,l,a,t),s},getCellContents:function(t,i,u,e,o,s,h){var c=this._drawCell(t,i,u,e,o,s,h),l=this.getWorkItemIdAtDataIndex(i);return l<=0?(c.empty(),c):o.rollupCalculation?(f.setStore(this.getStore()),f.checkAndUpdateWorkItemIds(this._workItems),this.renderRollupCell(f,l,c,a,ni.getBacklogFilterNameById(n.rollupCalculation.backlogFilter)),c):(c.empty(),c)}};i.splice(u,0,w)}if(n.notAField)switch(n.fieldName){case dt.BacklogConstants.ParentColumnRefName:v={canSortBy:!1,canMove:!0,notAField:!0,name:n.fieldName,text:pt.ProductBacklog_ParentColumnTitle,width:n.columnWidth,getCellContents:function(n,t,i,u,f,e,o){var s=this._drawCell(n,t,i,u,f,e,o),h=this.getWorkItemIdAtDataIndex(t),a,v,c,y,l;return h<=0?(s.empty(),s):this._parentWorkItemDataProvider?(a=this._parentWorkItemDataProvider.getLoadingStatus(h),a===kt.LoadingStatus.Loading)?(this.renderLoadingCell(s),s):a===kt.LoadingStatus.Error?(v=this._parentWorkItemDataProvider.getErrorMessage(h),this.renderErrorCell(s,v),s):(c=this._parentWorkItemDataProvider.getParentWorkItem(h),c===undefined)?(s.empty(),s):(y=c.id,l=c.fields,this.renderTitleCell(y,l[bt.CoreFieldRefNames.Title],l[bt.CoreFieldRefNames.TeamProject],l[bt.CoreFieldRefNames.WorkItemType],s,e,u,t,o),s):(s.empty(),s)}};i.splice(u,0,v)}}),s.publishEvent(new s.TelemetryEventData(wt.AgileCustomerIntelligenceArea.AGILE,wt.AgileCustomerIntelligenceFeature.TELEMETRY_BACKLOGS_DISPLAYEDROLLUPCOLUMN,{RollupColumnsEnabled:e,RollupColumnsDisplayed:o})));c={rowCss:"grid-header-text",canSortBy:!1,canMove:!1,fieldId:null,fixed:!0,name:t.ORDER_FIELD_NAME,text:pt.ProductBacklog_OrderColumnTitle,width:50,getCellContents:function(t,i,r,u,f,e,o){var h=this._drawCell(t,i,r,u,f,e,o),c=!1,s;return n||(h.empty(),c=!0),this.isOwnedItem(this._workItems[i])||(s=$("<span />").attr("aria-label",pt.UnownedItemTooltip).addClass("icon bowtie-icon bowtie-status-info-outline"),c&&s.addClass("no-text"),st.RichContentTooltip.add(pt.UnownedItemTooltip,s,{setAriaDescribedBy:!0}),h.append(s)),h}};i.splice(0,0,c)}},t.prototype.getExpandedCount=function(){return this._expandedCount},t.prototype.isIterationBacklog=function(){return this._isIterationBacklog},t.prototype.isReorderRequirementDisabledForWorkItem=function(n){return this._isReorderRequirementDisabled()&&ft.BacklogConfigurationService.getBacklogConfiguration().isWorkItemTypeInRequirementBacklog(this.getWorkItemTypeNameById(n))},t.prototype._isReorderRequirementDisabled=function(){return this._gridReorderBehavior.isReorderRequirementDisabled},t.prototype.isOwnedItem=function(n){return this.isIterationBacklog()||n<0?!0:this._dataManager.isOwnedItem(n)},t.prototype.isRealWorkItem=function(n){return ti.getGroupRow(n)===null},t.prototype.getDataSourceName=function(){return this._options.datasourceName||t.DEFAULT_DATASOURCE_NAME},t.prototype.getVisibleFields=function(){return n.prototype.getVisibleFields.call(this).concat([t.ORDER_FIELD_NAME])},t.prototype.getIds=function(){var n=[],t=Object.keys(this.getPageData());return t.forEach(function(t){var i=+t;i>0&&n.push(i)}),n},t.prototype.insertColumn=function(n,t){var i,u;for(this._columns.splice(n,0,t),this._setColumnInfo(t,n),this._displayColumns=[],this._displayColumnsMap={},i=0;i<this._columns.length;++i)u=this._columns[i],this._columns[i].index=i,this._displayColumns[i]={name:u.name,text:u.text,fieldId:u.fieldId,canSortBy:u.canSortBy,width:u.width},this._displayColumnsMap[this._columns[i].name]=i;this._determineIndentIndex();this._attachWorkItemChangedForRollupReset()},t.prototype._attachWorkItemChangedForRollupReset=function(){var n=this;this._displayColumns.some(function(t){return t.resetRollupData?(gt.WorkItemManager.get(n.getStore()).attachWorkItemChanged(n._backlogWorkItemChangedDelegate),!0):!1})},t.prototype.backlogWorkItemChanged=function(n,t){var r,i,u;this.getStore()&&t.change==="save-completed"&&(r=t.workItem,t.changedFields&&(i=r.getFieldValue(bt.CoreFieldRefNames.ChangedDate),i&&typeof i.getTime=="function"&&(u=i.getTime(),this._rollupSetWorkItemsChangedDate(u))),t.changedWorkItemLinks&&this._rollupSetLinksChangedDate(t.changedWorkItemLinks),t.firstSave?t.firstSave&&r.id>0&&this._resetRollupItems():this._resetRollupData())},t._rollupSetHeaderState=function(n,t,i,r,u,f){var o,e,s,h;t?(r.removeClass("bowtie-status-warning-outline").addClass("bowtie-row-child"),f.attr("aria-label",pt.RollupColumn+" "+i[0].innerText+" "+pt.Rollup_SuccessColumnTooltip),u.setHtmlContent($("<div />").append(i).append(r.clone()).append(" "+pt.Rollup_SuccessColumnTooltip))):(r.removeClass("bowtie-row-child").addClass("bowtie-status-warning-outline"),n.axRecency&&(o=Math.min(n.axRecency.workItemsChangedUtcTimestamp?n.axRecency.workItemsChangedUtcTimestamp:Math.max(),n.axRecency.workItemLinksChangedUtcTimestamp?n.axRecency.workItemLinksChangedUtcTimestamp:Math.max())-(new Date).getTimezoneOffset()*6e4,e=pt.Rollup_FailureColumnTooltip_NoDate,o>-Infinity&&(s=new Date(o),h=v.ago(s),e=l.format(pt.Rollup_FailureColumnTooltip,h)),f.attr("aria-label",pt.RollupColumn+" "+i[0].innerText+" "+e),u.setHtmlContent($("<div />").append(i).append(r.clone()).append(" "+e))))},t.prototype._rollupSetLinksChangedDate=function(n){var t,i,r;for(t in n)n[t].linkData&&(n[t].command==="add"&&n[t].linkData["Changed Date"]||n[t].command==="remove"&&n[t].linkData["Revised Date"])&&(i=void 0,n[t].command==="add"?i=n[t].linkData["Changed Date"]:n[t].command==="remove"&&(i=n[t].linkData["Revised Date"]),i&&typeof i.getTime=="function"&&(r=i.getTime(),this._rollupSetWorkItemLinksChangedDate(r)))},t.prototype._rollupSetWorkItemsChangedDate=function(n){this._rollupMaxWorkItemsChangedUtcTimestamp=Math.max(this._rollupMaxWorkItemsChangedUtcTimestamp==null?0:this._rollupMaxWorkItemsChangedUtcTimestamp,n==null?0:n)},t.prototype._rollupSetWorkItemLinksChangedDate=function(n){this._rollupMaxWorkItemLinksUtcTimestamp=Math.max(this._rollupMaxWorkItemLinksUtcTimestamp==null?0:this._rollupMaxWorkItemLinksUtcTimestamp,n==null?0:n)},t.prototype._dispose=function(){this._resetRollupTimerHandle&&(clearTimeout(this._resetRollupTimerHandle),this._resetRollupTimerHandle=null);this.getStore()&&gt.WorkItemManager.get(this.getStore()).detachWorkItemChanged(this._backlogWorkItemChangedDelegate);n.prototype._dispose.call(this)},t.prototype._resetRollupItems=function(){var t=this,n=!1;this._displayColumns.forEach(function(i){i.resetRollupItems&&(n=!0,i.resetRollupItems(t._workItems))});n&&this._resetRollupData()},t.prototype._resetRollupData=function(){var i=this,n=this._resetRollupTimerHandle,t;n&&clearTimeout(n);t=setTimeout(function(){i._resetRollupDataDebounced()},100);this._resetRollupTimerHandle=t},t.prototype._resetRollupDataDebounced=function(){var n=this,t,i;this._resetRollupTimerHandle=null;t={};i=!1;this._displayColumns.forEach(function(r,u){r.resetRollupData&&(r.resetRollupData(n._rollupMaxWorkItemsChangedUtcTimestamp?n._rollupMaxWorkItemsChangedUtcTimestamp:null,n._rollupMaxWorkItemLinksUtcTimestamp?n._rollupMaxWorkItemLinksUtcTimestamp:null),t[u]=!0,i=!0)});i&&this._workItems.forEach(function(i){var r=n._options.dataManager.getWorkItemTreeIndex(i),u;r!==undefined&&(u=n._getRowIndex(r),n.updateRow(u,r,t))})},t.prototype.getWorkItemPageDataValue=function(n,t){var i,u;return(i=this.getPageData()[n],!i)?null:(u=this.getColumnMap()[t],!u)?null:i[u]||null},t.prototype.setGridReorderBehavior=function(n){this._gridReorderBehavior=n},t.prototype.getWorkItemTypeNameById=function(t){return n.prototype.getWorkItemTypeNameById.call(this,t)},t.prototype.getDataIndex=function(n){return this._getDataIndex(n)},t.prototype.getRowIndex=function(n){return this._getRowIndex(n)},t.prototype.getRowIntoView=function(n){this._getRowIntoView(n)},t.prototype.getTotalRows=function(){return this._expandedCount},t.prototype.copySelectedItems=function(){var r=this,t=this.getSelectedWorkItemIds();if(t.length!==0){var u=$.map(this.getColumns(),function(n){if(n.fieldId&&!n.hidden)return n.name}),i=this._options.tfsContext,f=d.ProjectCollection.getDefaultConnection().getService(et.QueryAdapter);t.length>1?at.createTemporaryQueryIdForSelectedWorkItemIds(i,f,t,u,[],function(t){var u=vt.TempQueryUtils.createTempQueryLink(i,t);n.prototype.copySelectedItems.call(r,ri,!0,{extendedText:u,tempQueryId:t,projectId:i.navigation.projectId})},function(){n.prototype.copySelectedItems.call(r,ri,!0)}):n.prototype.copySelectedItems.call(this,ri,!0)}},t.prototype.filterWorkItems=function(t){this.preserveSelectedWorkItemIds();n.prototype.filterWorkItems.call(this,t);this.restorePreservedSelectedWorkItemIds();this._rowSavingManager.updateIdToDataIndex(ii(this,this._getWorkItemDataIndexInFilteredView))},t.prototype.restoreUnfilteredState=function(t){t===void 0&&(t=!1);t||this.preserveSelectedWorkItemIds();n.prototype.restoreUnfilteredState.call(this,!t);t||(this.restorePreservedSelectedWorkItemIds(!0),this.layout())},t.prototype._getDefaultActionArguments=function(n){return{tfsContext:k.TfsContext.getDefault(),id:this._workItems[n.rowInfo.dataIndex],selectedWorkItems:this.getSelectedWorkItemIds(),selectedWorkItemProjectTypeMapping:this.getSelectedWorkItemProjectTypeMapping()}},t.prototype._onFilterCleared=function(){this._rowSavingManager.updateIdToDataIndex(ii(this,this._getWorkItemDataIndex))},t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({draggable:{zIndex:1e3,cursorAt:{left:15,bottom:5},axis:"",appendTo:document.body,scroll:!1,scrollables:[".grid-canvas",".capacity-pane-container",".team-iteration-view",".team-backlog-view"],scrollablesAxis:"y",distance:20,scope:w.DragDropScopes.ProductBacklog,start:this._draggableStart,stop:this._draggableStop,helper:this._draggableHelper,refreshPositions:!0},droppable:{hoverClass:"",tolerance:"pointer",scope:w.DragDropScopes.ProductBacklog,accept:this._droppableAccept,deactivate:this._droppableDeactivate,over:this._droppableOver,out:this._droppableOut,drop:this._droppableDrop,rowOffsetPercentage:t.ROW_OFFSET_PERCENTAGE_DRAG_DROP}},i,{asyncInit:!1,allowMultiSelect:!0,cssClass:"backlog",contextMenu:{arguments:ii(this,this._getDefaultActionArguments),items:[],contributionIds:["ms.vss-work-web.backlog-item-menu","ms.vss-work-web.work-item-context-menu","ms.vss-work-web.work-item-context-menu-owp"]},readWorkItems:!0,sourceArea:nt.RecycleBinTelemetryConstants.BACKLOG_SOURCE}))},t.prototype.initializeDataModel=function(t){n.prototype.initializeDataModel.call(this,t);this._accessoriesInitialized||(this._initializeDataManager(),this._initializeRowSavingManager(),this._accessoriesInitialized=!0)},t.prototype.preserveExpandStates=function(){var n=this,t=this.getUnfilteredExpandStates();$.each(t,function(t,i){n._expandStatesById[n._dataManager.getWorkItemIdAtTreeIndex(t)]=i});this._preservedExpandStates=!0},t.prototype.clearPreservedExpandStates=function(){this._preservedExpandStates=!1;this._expandStatesById={}},t.prototype.preserveSelectedWorkItemIds=function(){this._preservedFocusedWorkItemId=this.getSelectedWorkItemId();this._preservedSelectedWorkItemIds=this.getSelectedWorkItemIdsWithGroupRows()},t.prototype.clearPreservedSelectedWorkItemIds=function(){this._preservedSelectedWorkItemIds=[];this._preservedFocusedWorkItemId=null},t.prototype.restorePreservedSelectedWorkItemIds=function(n){var t=this;n===void 0&&(n=!1);this.setSelectedWorkItemIds(this._preservedSelectedWorkItemIds,this._preservedFocusedWorkItemId,n);c.delay(this,0,function(){t.isDisposed()||t.getSelectedRowIntoView()});this.clearPreservedSelectedWorkItemIds()},t.prototype.processExpandedStates=function(n){var t=this,i={},r;return n.expandIds&&$.each(n.expandIds,function(n,t){i[t]=!0}),r=function(n){return t._preservedExpandStates&&t._expandStatesById[n]?t._expandStatesById[n]<0:!(i[n]||n<0)},this._options.expandStates=[],at.QueryResultGrid.calculateExpandStates(n.sourceIds,this.getUnfilteredWorkItemIds(),this._options.expandStates,0,0,n.sourceIds.length,r)},t.prototype.performActionWithPreserveSelection=function(n){var i=this.getSelectedWorkItemId(),t=this.getSelectedWorkItemIdsWithGroupRows();n();t&&this.setSelectedWorkItemIds(t,i)},t.prototype.getSelectedRowInfo=function(){return this.getRowInfo(this.getSelectedDataIndex())},t.prototype.getSelectedWorkItemIds=function(){var t=n.prototype.getSelectedWorkItemIds.call(this);return t.filter(function(n){return ti.getGroupRow(n)===null})},t.prototype.isUnparentedRow=function(n){return ti.getGroupRow(n)!==null},t.prototype.getSelectedWorkItemIdsWithGroupRows=function(){return n.prototype.getSelectedWorkItemIds.call(this)},t.prototype.setSelectedWorkItemIds=function(n,t,i){var u,e,r,f,o;if(this._clearSelection(),!n||n.length===0||this._workItems.length===0){this._addSelection(-1);return}for(u=[],this.isFiltered()&&$.each(this._workItems,function(n,t){u[t]=n}),e=!1,r=!1,f=n.length-1;f>=0;f--)o=n[f],t!=null&&o===t?e=!0:r=this._setSelectedWorkItemIds_AddSelectionHelper(o,u,i)||r;e&&(r=this._setSelectedWorkItemIds_AddSelectionHelper(t,u,i)||r);r||this._addSelection(-1)},t.prototype._setSelectedWorkItemIds_AddSelectionHelper=function(n,t,i){var r,u;return(r=this.isFiltered()?t[n]:this._getWorkItemDataIndex(n),r>=0&&(i&&this.ensureDataIndexExpanded(r),u=this._getRowIndex(r),u>=0))?(this._addSelection(u),!0):!1},t.prototype.updateLayoutAndRedraw=function(){this._layoutContentSpacer();this._redraw(!0)},t.prototype.getDataManager=function(){return this._dataManager},t.prototype.getRowSavingManager=function(){return this._rowSavingManager},t.prototype.pageLocations=function(n,t){var f=this,i,u;i={};n.forEach(function(n){var t=n.nextId;t>0&&!(t in f.getPageData())&&(i[t]=!0);t=n.previousId;t>0&&!(t in f.getPageData())&&(i[t]=!0);t=n.parentId;t>0&&!(t in f.getPageData())&&(i[t]=!0)});u=Object.keys(i).map(function(n){return+n});u&&u.length>0?this.pageWorkItems(u,t):t()},t.prototype._updatePageData=function(t,i){n.prototype._updatePageData.call(this,t,i);this._raiseWorkItemPaged(t,i)},t.prototype._showContextMenu=function(t){var i=this.getSelectedWorkItemIds();i&&i.length>0&&n.prototype._showContextMenu.call(this,t)},t.prototype._createContextPopupMenuControl=function(n){var t=(n.items||[]).slice(0),i=t.length>0?e.sortMenuItems(t):null;return u.BaseControl.createIn(e.PopupMenu,this._element,$.extend({align:"left-bottom"},n,{items:[{childItems:i,ariaLabel:pt.ContextMenu_AriaLabel}]}))},t.prototype._createContextMenu=function(n,t){var i=this.getSelectedWorkItemIdsWithGroupRows();return this._contextMenuCreator(t,{tfsContext:this._options.tfsContext,workItemId:i[0],workItemIds:i,grid:this,errorHandler:this._contextMenuErrorHandler,team:this._options.team}),this._createContextPopupMenuControl(t)},t.prototype.updateDataModel=function(t){this._resetTitleColumnIndex();t!=null&&n.prototype.updateDataModel.call(this,t)},t.prototype._resetTitleColumnIndex=function(){this._titleColumnIndex=0},t.prototype._onRowMouseDown=function(t){var i,f,u;ht.hasAgileToolsBacklogManagementPermission()&&this.enableDragDrop();this._keyboardReorderDropEffect&&this._removeAllDragStyling();this._clearKeyboardReorderState();this._clearRowMouseDownEventInfo();i=this._getRowInfoFromEvent(t,".grid-row");i&&(f=$(t.target).hasClass("grid-tree-icon")&&t.which===1,u={dataIndex:i.dataIndex,isMouseClickHandled:!0},!f&&!t.shiftKey&&$.inArray(i.dataIndex,this.getSelectedDataIndices())>=0?(u.isMouseClickHandled=!1,this._setRowMouseDownEventInfo(u)):n.prototype._onRowMouseDown.call(this,t))},t.prototype._onRowMouseUp=function(n){var t=this._getRowInfoFromEvent(n,".grid-row"),i=this._getRowMouseDownEventInfo();t&&i&&!i.isMouseClickHandled&&t.dataIndex===i.dataIndex&&this._selectRow(t.rowIndex,t.dataIndex,{ctrl:n.ctrlKey||n.metaKey,shift:n.shiftKey,rightClick:n.which===3||$(n.target).closest(".grid-context-menu-container").length>0});this._clearRowMouseDownEventInfo()},t.prototype._clearRowMouseDownEventInfo=function(){this._gridRowMouseClickEventInfo=null},t.prototype._setRowMouseDownEventInfo=function(n){this._gridRowMouseClickEventInfo=n},t.prototype._getRowMouseDownEventInfo=function(){return this._gridRowMouseClickEventInfo},t.prototype._onKeyUp=function(t){var i=this,r;if(this._keyboardReorderDataIndex!==null&&!this._isKeyboardReorderGestureActive(t)){if(r=this.getSelectedDataIndex(),r===this._keyboardReorderDataIndex)return;this._keyboardReorderDropEffect&&(this._removeAllDragStyling(),this.performActionWithPreserveSelection(function(){i.getDataManager().moveWorkItems(i._keyboardReorderDropEffect,!0,!0,!0)}));this._clearKeyboardReorderState()}n.prototype._onKeyUp.call(this,t)},t.prototype.attachDragEvent=function(n){this._events.subscribe(t.EVENT_DRAG_EVENT,n)},t.prototype.detachDragEvent=function(n){this._events.unsubscribe(t.EVENT_DRAG_EVENT,n)},t.prototype.attachWorkItemPagedEvent=function(n){this._events.subscribe(t.EVENT_WORKITEM_PAGED,n)},t.prototype.detachWorkItemPagedEvent=function(n){this._events.unsubscribe(t.EVENT_WORKITEM_PAGED,n)},t.prototype.getLastRowDataIndex=function(){var n=this._visibleRange.length;return n>0?this._visibleRange[n-1][1]:-1},t.prototype.isLastRow=function(n){var t=this._visibleRange.length;return t>0?n===this._visibleRange[t-1][1]:!1},t.prototype.indexIsInView=function(n){var t=this._getVisibleRowIndices();return n>=t.first&&n<=t.last},t.prototype.getIndexFromOrder=function(n){var t=this.getDataManager().getWorkItemIdAtOrder(n);return this._getWorkItemDataIndex(t)},t.prototype.refresh=function(n,t){var f=this.getDataManager().getTreeData(),i=this.getUnfilteredExpandStates(),r=this.getSelectedDataIndex(),u;this.processDataSource(f,!1);this.getUnfilteredExpandStates().length===i.length&&this.setUnfilteredExpandStates(i);u=this.getSelectedRowIndex();this.setDataSource(this._options.source,this._options.expandStates,this._columns.slice(0),null,u);t&&typeof t.selectedWorkItemId=="number"?this.setSelectedWorkItemId(t.selectedWorkItemId):r>=0&&this.setRowSelection(r)},t.prototype._isExpanded=function(n){return!this._expandStates||this._expandStates[n]>0},t.prototype.getColumnValue=function(i,u,f){var c,o;var e="",h=this._displayColumns[u],l=this._workItems[i],s=this._rows[i];return s&&s.rowExtn&&(c=s.rowExtn.getDisplayFields(),c.indexOf(h.name)===-1)?"":(h.name===t.ORDER_FIELD_NAME?(o=null,o=this.getDataManager().getWorkItemVisibleOrder(l),e=o?o.toString():e):e=tt.Field.convertValueToDisplayString(n.prototype.getColumnValue.call(this,i,u,f)),e)},t.prototype.getValue=function(t,i){if(this._parentWorkItemDataProvider&&l.ignoreCaseComparer(i,b.parentItemFieldRefName)===0)return this._getTopLevelParentId(t);if(this._parentWorkItemDataProvider&&l.ignoreCaseComparer(i,dt.BacklogConstants.ParentColumnRefName)===0){if(this._parentWorkItemDataProvider.getLoadingStatus(t)===kt.LoadingStatus.Loaded){var r=this._parentWorkItemDataProvider.getParentWorkItem(t);if(r)return r.fields[bt.CoreFieldRefNames.Title]}return null}return n.prototype.getValue.call(this,t,i)},t.prototype.onOpenRowDetail=function(t){var i=this._workItems[t.dataIndex],r=this._rowSavingManager.isRowSaving(i);if(i>0&&!r&&!this._isWorkItemFormOpen)return this._isWorkItemFormOpen=!0,n.prototype.onOpenRowDetail.call(this,__assign(__assign({},t),{addQueryParam:!0}))},t.prototype.isWorkItemSaving=function(n){return this._rowSavingManager.isRowSaving(n)},t.prototype.onOpenWorkItemClosed=function(){this._isWorkItemFormOpen=!1},t.prototype.onGutterClick=function(t){var i=this._workItems[t.dataIndex];this.getRowSavingManager().isRowSaving(i)||n.prototype.onGutterClick.call(this,t)},t.prototype._onContainerResize=function(t){n.prototype._onContainerResize.call(this,t)},t.prototype.resize=function(){this._onContainerResize(this)},t.prototype.bringWorkItemIntoView=function(n){var t=this._getWorkItemDataIndex(n);this.setSelectedDataIndex(t);this._getRowIntoView(this.getSelectedRowIndex(),!0)},t.prototype.getReorderState=function(){return this._enableReorder},t.prototype.getReparentState=function(){return this._enableReparent},t.prototype.setReorderState=function(n){this._enableReorder=n},t.prototype.setReparentState=function(n){this._enableReparent=n},t.prototype.getWorkItemIds=function(){return this._dataManager.getWorkItemIds()},t.prototype.getCurrentWorkItemIds=function(){return n.prototype.getWorkItemIds.call(this)},t.prototype._initializeDataManager=function(){var n=this;this._dataManager=this._options.dataManager;this._dataManager.attachRefresh(function(t,i){i.workItemId?n._updateWorkItemRow(i.workItemId):n.refresh(!1,{selectedWorkItemId:i.selectedWorkItemId});n.getFilterManager().dataUpdated()});this._dataManager.attachNewItem(function(t,i){n._addWorkItem(i.workItemId,i.workItem)});this._dataManager.attachMoveItems(function(t,i){return n._handleMoveWorkItems(i)});this._dataManager.attachRemovedItem(function(t,i){n._removeWorkItem(i.workItemIndex,i.parentWorkItemIndex,i.treeSize,i.workItemId)});this._dataManager.attachIdChange(function(t,i){n._changeWorkItemId(i.oldId,i.newId)})},t.prototype._initializeRowSavingManager=function(){var n=this;this._rowSavingManager=new g.RowSavingManager(this,function(t){return n._dataManager.getWorkItemTreeIndex(t)},function(t){return n.getWorkItemIdAtDataIndex(t)})},t.prototype.markRowsAsSaving=function(n){var u,t,i,f;for(u=this.getRowSavingManager(),t=0,i=n;t<i.length;t++)f=i[t],u.markRowAsSaving(f.id)},t.prototype.clearRowsAsSaving=function(n){var u,t,i,f;for(u=this.getRowSavingManager(),t=0,i=n;t<i.length;t++)f=i[t],u.clearRowSaving(f.id)},t.prototype._isValidKeyboardMovement=function(n,t){var u=this._rowSavingManager.isRowSaving(this.getWorkItemIdAtDataIndex(n)),i=this.getRowIndex(this._keyboardReorderDataIndex),e=t===f.KeyCode.UP&&i===0&&(this._keyboardReorderDataIndexOverTopRow||n===0),o=i===this._expandedCount-1&&t===f.KeyCode.DOWN;return!u&&!e&&!o},t.prototype._clearKeyboardReorderState=function(){this._keyboardReorderDataIndex=null;this._keyboardReorderDataIndexOverTopRow=!1;this._keyboardReorderDropEffect=null},t.prototype._keyboardReorderIsAtTopOfGrid=function(){return this._keyboardReorderDataIndex===0&&this._keyboardReorderDataIndexOverTopRow},t.prototype._onKeyDown=function(t){var i,u;if(!t.ctrlKey||t.keyCode!==f.KeyCode.HOME){if(t.keyCode===f.KeyCode.UP||t.keyCode===f.KeyCode.DOWN){if(i=this.getSelectedDataIndex(),this._isKeyboardReorderAvailableForCurrentSelection(t)){if(this._keyboardReorderDataIndex===null&&(this._keyboardReorderDataIndex=i,this._keyboardReorderDataIndexOverTopRow=!1),!this._isValidKeyboardMovement(i,t.keyCode))return;for(this._keyboardReorderDropEffect&&this._removeAllDragStyling(),this._keyboardReorderDrawDelayedFunc&&(this._keyboardReorderDrawDelayedFunc.cancel(),this._keyboardReorderDrawDelayedFunc=null),u=!1;!u;){switch(t.keyCode){case f.KeyCode.UP:this._keyboardReorderDataIndex===0?this._keyboardReorderDataIndexOverTopRow=!0:this._keyboardReorderDataIndex=this.getDataIndex(this.getRowIndex(this._keyboardReorderDataIndex)-1);break;case f.KeyCode.DOWN:this._keyboardReorderIsAtTopOfGrid()?this._keyboardReorderDataIndexOverTopRow=!1:this._keyboardReorderDataIndex=this.getDataIndex(this.getRowIndex(this._keyboardReorderDataIndex)+1)}if(i===this._keyboardReorderDataIndex){this._getRowIntoView(this.getRowIndex(this._keyboardReorderDataIndex));this._keyboardReorderDropEffect=null;return}if(this._keyboardReorderDropEffect=this.calculateDropEffect(i,this._keyboardReorderDataIndex,this._keyboardReorderDataIndexOverTopRow),this._keyboardReorderDropEffect&&this._keyboardReorderDropEffect.isValid)this._getRowIntoView(this.getRowIndex(this._keyboardReorderDataIndex)+(t.keyCode===f.KeyCode.UP?-1:0)),u=!0,this._keyboardReorderDrawDelayedFunc=c.delay(this,0,this._applyKeyboardDragStyling,this._keyboardReorderDataIndex);else if(this._keyboardReorderIsAtTopOfGrid()||this._keyboardReorderDataIndex===-1||this.getRowIndex(this._keyboardReorderDataIndex)===this._expandedCount-1){this._getRowIntoView(this.getRowIndex(this._keyboardReorderDataIndex));this._keyboardReorderDropEffect=null;break}}return}if(this._isKeyboardReorderGestureActive(t))return}return n.prototype._onKeyDown.call(this,t)}},t.prototype._isMouseReorderAvailableForCurrentSelection=function(){var i=this,n=this.getSelectedWorkItemIds(),t;return n.length>0?(t=n.some(function(n){return i._rowSavingManager.isRowSaving(n)}),!this._keyboardReorderDropEffect&&!t):!1},t.prototype._isKeyboardReorderAvailableForCurrentSelection=function(n){var u=this,t,i;return t=this.getSelectedWorkItemIds(),i=t.some(function(n){return u._rowSavingManager.isRowSaving(n)}),t.length>0&&!i&&!this._dragActionCache&&this._enableReorder&&this._count>0&&!this.isFiltered()&&this._isKeyboardReorderGestureActive(n)},t.prototype._isKeyboardReorderGestureActive=function(n){return n.altKey||n.ctrlKey||n.metaKey},t.prototype._applyKeyboardDragStyling=function(n){this._keyboardReorderDropEffect&&this._applyDragStyling2(this._keyboardReorderDropEffect,n);this._keyboardReorderDrawDelayedFunc=null},t.prototype._raiseWorkItemPaged=function(n,i){this._events.invokeHandlers(t.EVENT_WORKITEM_PAGED,this,{workItemId:n,pageData:i})},t.prototype._raiseDragOperation=function(n,i){this._events.invokeHandlers(t.EVENT_DRAG_EVENT,this,{event:n,action:i})},t.prototype._draggableStart=function(n,i){if(this._clearRowMouseDownEventInfo(),!this._isMouseReorderAvailableForCurrentSelection())return!1;this._element.addClass(t.DRAG_ACTIVE_CLASS);this._raiseDragOperation(n,t.DRAG_OPERATION_START)},t.prototype._draggableStop=function(n,i){if(this._raiseDragOperation(n,t.DRAG_OPERATION_STOP),!i.helper.data(t.DROP_SUCCESSFUL)&&!this.isIterationBacklog()){var u=this.getWorkItemIdAtDataIndex(i.draggingRowInfo.dataIndex),f=this._isIterationBacklog||this.getDataManager().isOwnedItem(u);s.publishEvent(new s.TelemetryEventData(wt.AgileCustomerIntelligenceArea.AGILE,wt.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_BACKLOG_REORDER,{Reorder:"Unsuccessful",FilteredState:this.isFiltered(),IsOwnedItem:f}))}this._element.removeClass(t.DRAG_ACTIVE_CLASS)},t.prototype._draggableHelper=function(n,i){var f,s,o,e,u,h,c,l,a;return e=this.getSelectedWorkItemIds(),u=this.getSelectedWorkItemTypes(),o=e.length,f=$("<div />").addClass("drag-tile"),o===1?(h=this._getWorkItemDataIndex(e[0]),f.text(this.getColumnValue(h,this._getTitleColumnIndex())||"")):(u.length>1||u.length===0?s=pt.MultipleItemTypesDragHelperText:o>1&&(s=u[0]),c=$("<div />").addClass("drag-tile-item-count").text(o),l=$("<span />").addClass("drag-tile-item-type").text(s),f.append(c).append(l)),f.data(t.DATA_WORK_ITEM_IDS,e),u.length==1&&(a=ut.WorkItemTypeColorAndIconsProvider.getInstance(),f.css("border-left-color",a.getColor(this.getProjectName(),u[0]))),f},t.prototype._droppableAccept=function(n){return this._isDroppable()},t.prototype._isDroppable=function(){return this._enableReorder&&!this.isFiltered()},t.prototype._droppableOver=function(n,t){var f=t.droppingRowInfo.isAboveFirstOrBelowLast,u=t.draggingRowInfo.dataIndex,i=ei(f,t.droppingRowInfo.dataIndex);this._dragActionCache&&(this._dragActionCache.draggingRowIndex!==u||this._dragActionCache.droppingRowIndex!==i)&&(this._removeAllDragStyling(),this._dragActionCache=null);!this._dragActionCache&&this._isDroppable()&&(this._dragActionCache={draggingRowIndex:u,droppingRowIndex:i,isAboveFirstOrBelowLast:f,dropEffect:this.calculateDropEffect(u,i,t.droppingRowInfo.isAboveFirstOrBelowLast)},this._applyDragStyling2(this._dragActionCache.dropEffect,i))},t.prototype._droppableOut=function(n,t){var i=this._dragActionCache,u=t.draggingRowInfo.dataIndex,f=t.droppingRowInfo.dataIndex;i&&i.draggingRowIndex===u&&i.droppingRowIndex===f&&(this._removeAllDragStyling(),this._dragActionCache=null)},t.prototype._droppableDrop=function(n,i){var u=this,f=i.draggingRowInfo.dataIndex,r=this.calculateDropEffect(f,ei(i.droppingRowInfo.isAboveFirstOrBelowLast,i.droppingRowInfo.dataIndex),i.droppingRowInfo.isAboveFirstOrBelowLast);r&&r.isValid&&(this.performActionWithPreserveSelection(function(){var n=o.getScenarioManager().startScenario(wt.AgileCustomerIntelligenceArea.AGILE,"Backlog.ReorderWorkItems");n.addData({workItemCount:r.workItemIds.length});r.perfScenario=n;u.getDataManager().moveWorkItems(r,!0,!0,!0)}),i.helper.data(t.DROP_SUCCESSFUL,!0))},t.prototype._droppableDeactivate=function(n,t){var i=this._dragActionCache;i&&(this._removeAllDragStyling(),this._dragActionCache=null)},t.prototype._getTitleColumnIndex=function(){if(!this._titleColumnIndex)for(var i=this._columns,n=0,t=i.length;n<t;n+=1)if(i[n].name===bt.CoreFieldRefNames.Title){this._titleColumnIndex=n;break}return this._titleColumnIndex},t.prototype._addWorkItemToPage=function(n,t){var o=this,i,u;for(this.getPageData()[n]=[],i=0,u=Object.keys(this.getColumnMap());i<u.length;i++){var f=u[i],e=t.getField(f),s=e?e.getDisplayText():"";this._updatePageColumn(n,f,s)}this._requiredColumnReferenceNames&&this._requiredColumnReferenceNames.forEach(function(i){o._updatePageColumn(n,i,t.getFieldValue(i)||"")})},t.prototype.addWorkItemPageData=function(n,t,i){var f=this.getPageData(),e,s,u,o,h;for(f[n]=[],e=0,s=this.getColumnMap(),u=0;u<t.length;++u)(o=t[u],h=s[o],typeof h!="undefined")&&(this._updatePageColumn(n,o,i[u]||""),++e);this._raiseWorkItemPaged(n,f[n])},t.prototype.isWorkItemPaged=function(n){return!!this.getPageData()[n]},t.prototype._updatePageColumn=function(n,t,i){var f=this.getPageData()[n],u=this.getColumnMap()[t];u!==undefined&&(f[u]=i)},t.prototype._updateRow=function(i,r,u,f,e,o){var h=this._workItems[u],s=i.row,c,l;i.rowExtn||(c=ti.getGroupRow(h),c&&(l=c.getRowRenderer(i,r,u),i.rowExtn=l));n.prototype._updateRow.call(this,i,r,u,f,e,o);h<0&&s.addClass("product-backlog-custom-row");i.rowExtn||(h<0?s.addClass(t.NEW_WORKITEM_CLASS):s.hasClass(t.NEW_WORKITEM_CLASS)&&s.removeClass(t.NEW_WORKITEM_CLASS))},t.prototype.renderWorkItemTypeColorAndIcon=function(t,i,r,u,f){var e=!(i||u);this.isUnparentedRow(r)?rt.renderWorkItemTypeIcon(t[0],u,{color:this._getCustomTypeCellColor(f),icon:ut.WorkItemTypeColorAndIcons.DEFAULT_UNPARENTED_WORKITEM_BOWTIE_ICON},{suppressTooltip:!0}):e||n.prototype.renderWorkItemTypeColorAndIcon.call(this,t,i,r,u,f)},t.prototype._getCustomTypeCellColor=function(n){var t=this._rows[n];return t.rowExtn?t.rowExtn.getTypeColor():null},t.prototype._applyDragStyling2=function(n,i){var f,s,h,v,y,u,c,l;if(this._getExpandState(i)<0&&this._scheduleDelayExpandRow(i),n&&n.isValid){var p=n.workItemIds,e=n.targetLocation.parentId,w=n.targetLocation.previousId,b=n.targetLocation.nextId,o,a=!1;for(e!==0&&(o=this._getWorkItemDataIndex(e)),f={},s=0,h=p;s<h.length;s++)v=h[s],y=this._getWorkItemDataIndex(v),f[this.getDataManager().getParentIndexFromTreeIndex(y)]=!0;(Object.keys(f).length>1||Object.keys(f).length===1&&+Object.keys(f)[0]!==o)&&(a=!0);this._enableReparent&&o!==null&&a&&(u=this._rows[o],u&&u.row.addClass(t.DRAG_HOVER_CLASS));l=!1;c=this._getInsertDataIndex(n.targetLocation);l=e===0&&!w&&b?!0:!1;e===0&&(u=this._rows[c],u&&u.row.addClass(t.DRAG_FULL_LINE_CLASS));u=this._rows[c];u&&u.row.addClass(l?t.DRAG_INSERT_BEFORE_CLASS:t.DRAG_INSERT_AFTER_CLASS)}},t.prototype._removeAllDragStyling=function(){this._cancelDelayExpandRow();var n=[t.DRAG_HOVER_CLASS,t.DRAG_NEW_PARENT_CLASS,t.DRAG_INSERT_BEFORE_CLASS,t.DRAG_INSERT_AFTER_CLASS,t.DRAG_FULL_LINE_CLASS].join(" ");$.each(this._rows,function(t,i){i.row.removeClass(n)})},t.prototype._scheduleDelayExpandRow=function(n){var i=this,u;u=function(){var r=i.getSelectedWorkItemIdsWithGroupRows(),u=r.filter(function(n){return ti.getGroupRow(n)===null}),f=u?i.getWorkItemTypeNameById(u[0]):null,o=i.getWorkItemTypeNameByIndex(n),e,t;i._gridReorderBehavior&&f&&i._gridReorderBehavior.shouldExpandRow(f,o)&&(i.tryToggle(!0,!1,n),i._clearSelection(),r&&i.setSelectedWorkItemIds(r),i._removeAllDragStyling(),i._dragActionCache?(e=i._dragActionCache.draggingRowIndex,t=i._dragActionCache.droppingRowIndex,i._dragActionCache.dropEffect=i.calculateDropEffect(e,t,i._dragActionCache.isAboveFirstOrBelowLast),i._applyDragStyling2(i._dragActionCache.dropEffect,t)):i._keyboardReorderDropEffect&&(t=n,i._keyboardReorderDropEffect=i.calculateDropEffect(null,t,i._keyboardReorderDataIndexOverTopRow),i._keyboardReorderDropEffect&&i._keyboardReorderDropEffect.isValid||(t=n+i.getVisibleDescendantCount(n),i._keyboardReorderDropEffect=i.calculateDropEffect(null,t,i._keyboardReorderDataIndexOverTopRow)),i._applyDragStyling2(i._keyboardReorderDropEffect,t)))};this._expandRowDelayedFunction?(this._expandRowDelayedFunction.cancel(),this._expandRowDelayedFunction.setMethod(this,u)):this._expandRowDelayedFunction=new c.DelayedFunction(this,t.DRAGHOVER_DELAYED_TIME,"dragHoverDelayedFunction",u);this._expandRowDelayedFunction.start()},t.prototype._cancelDelayExpandRow=function(){this._expandRowDelayedFunction&&this._expandRowDelayedFunction.cancel()},t.prototype._getWorkItemDataIndex=function(n){return this.getDataManager().getWorkItemTreeIndex(n)},t.prototype._getWorkItemDataIndexInFilteredView=function(n){if(this._workItems)return h.indexOf(this._workItems,n)},t.prototype.getVisibleDescendantCount=function(n){var t,i;if(typeof n!="number"||this._expandStates[n]<=0)return 0;var r=0,f=this._expandStates[n],u=n+1;for(t=u;t<u+f;t++)r++,i=this._expandStates[t],i<0&&(t=t+Math.abs(i));return r},t.prototype._updateWorkItemRow=function(n){var t=this._getWorkItemDataIndex(n);t>=0&&this._rows[t]&&this.updateRow(this._rows[t].rowIndex,t)},t.prototype._addWorkItem=function(n,t){var i,u,f,e;u=this.getDataManager();f=u.getWorkItemTreeIndex(n);t&&this._addWorkItemToPage(n,t);(i=this._expandStates)===null||i===void 0?void 0:i.splice(f,0,0);e=u.getParentIndexFromTreeIndex(f);this._updateExpandStates(e,1);this.loadParentWorkItemsInDataProvider([n]);t&&this._addItemToRollup(t)},t.prototype._addItemToRollup=function(n){var t,r,i;n.id>0&&(t=n.getFieldValue(bt.CoreFieldRefNames.ChangedDate),t&&typeof t.getTime=="function"&&(r=t.getTime(),this._rollupSetWorkItemsChangedDate(r)),i=n.getLinks(),i&&i.length>0&&this._rollupSetLinksChangedDate(i),this._resetRollupItems())},t.prototype.calculateDropEffect=function(n,t,i){var o=this,u;if(u={workItemIds:[],targetLocation:null,isValid:!1},this._gridReorderBehavior){var f=!1,e=this.getSelectedWorkItemIds(),s=this.getWorkItemIdAtDataIndex(t);return f=e.some(function(n){return!o.getDataManager().isOwnedItem(n)}),this._gridReorderBehavior.calculateMoveWorkItemsEffect(e,s,f,i)}return u},t.prototype._handleMoveWorkItems=function(n){for(var t,u=function(n,t,r){for(var u,o,f=0,e=n;f<e.length;f++)u=e[f],o=i[u],o<0?i[u]-=t:i[u]+=t,r&&t>0&&(i[u]=Math.abs(i[u]))},i=this.getUnfilteredExpandStates(),r=0,f=n.treeChanges;r<f.length;r++)t=f[r],u(t.affectedSourceAncestorIndexes,-1*t.treeSize,!1),u(t.affectedTargetAncestorIndexes,t.treeSize,!0),h.reorder(i,t.oldTreeIndex,t.newTreeIndex,t.treeSize);this.isFiltered()||(this._expandStates=i);this.loadParentWorkItemsInDataProvider(n.workItemIdsToReparent,n.targetLocation.parentId);n.workItemIdsToReparent&&n.workItemIdsToReparent.length>0&&this._resetRollupData()},t.prototype._getInsertDataIndex=function(n){var i=n.parentId,r=n.previousId,f=n.nextId,t=null;if(r){var u=this._getWorkItemDataIndex(r),e=this._getRowIndex(u),o=this.getVisibleDescendantCount(u);t=this._getDataIndex(e+o)}else!i&&f?t=0:i&&(t=this._getWorkItemDataIndex(i));return t},t.prototype._removeWorkItem=function(n,t,i){var f=new Date,u=f.getTime();this._rollupSetWorkItemsChangedDate(u);t>=0&&this._rollupSetWorkItemLinksChangedDate(u);this._resetRollupItems();this.getUnfilteredExpandStates().splice(n,i);this._updateExpandStates(t,-i)},t.prototype._changeWorkItemId=function(n,t){var r=this._getWorkItemDataIndex(n),i=this.getPageData();i[t]=i[n];delete i[n];this._workItems[r]=t;this._updatePageColumn(t,bt.CoreFieldRefNames.Id,t);this.updateRow(undefined,r);this._changeWorkItemIdInLastVisibleRange(n,t);this.loadParentWorkItemsInDataProvider([t]);this._resetRollupItems()},t.prototype._updateExpandStates=function(n,t){var f=this.getDataManager(),i=n,u=this.getUnfilteredExpandStates();if(n>=0)do u[i]<0?u[i]-=t:u[i]+=t,i=f.getParentIndexFromTreeIndex(i);while(i>=0)},t.prototype.selectedIndexChanged=function(t,i){var u=this,r;n.prototype.selectedIndexChanged.call(this,t,i);r={selectedWorkItems:this.getSelectedWorkItemIds().map(function(n){return{workItemId:n,workItemType:u.getWorkItemTypeNameById(n)}})};this._eventHelper.fire(p.BacklogNotifications.BACKLOG_GRID_SELECTION_CHANGED,this,r)},t.prototype.buildCache=function(t,i){var u,f;n.prototype.buildCache.call(this,t,i);t&&t.rows&&t.columns&&(u=t.columns.indexOf(bt.CoreFieldRefNames.Id),f=u>=0?t.rows.map(function(n){return n[u]}).filter(function(n){return n>0}):null,f&&this.loadParentWorkItemsInDataProvider(f));this._attachWorkItemChangedForRollupReset()},t.prototype.loadParentWorkItemsInDataProvider=function(n,t){var i=this,r=this._displayColumnsMap[dt.BacklogConstants.ParentColumnRefName];(r!==undefined||this._isIterationBacklog)&&n.length>0&&this._parentWorkItemDataProvider.loadParentWorkItems(n,t).then(function(){n.forEach(function(n){var t,f=(t={},t[r]=!0,t),u=i._options.dataManager.getWorkItemTreeIndex(n),e=i._getRowIndex(u);i.updateRow(e,u,f)});var t=i.getFilterManager();t.dataUpdated();t.setFilters(t.getFilters())})},t.prototype.getParentItems=function(){var n=this;return this._parentWorkItemDataProvider.getParentWorkItems().then(function(t){for(var i,r=[],u=0,f=t;u<f.length;u++)i=f[u],i&&n._dataManager.getWorkItemIds().indexOf(i.id)<0&&r.push({key:i.id.toString(10),display:i.fields[bt.CoreFieldRefNames.Title],value:i.id});return r.length>0&&r.unshift({key:kt.UnparentedId.toString(),display:pt.Unparented,value:kt.UnparentedId}),r})},t.prototype._getTopLevelParentId=function(n){if(this._parentWorkItemDataProvider.getLoadingStatus(n)===kt.LoadingStatus.Loaded){var t=this._parentWorkItemDataProvider.getParentWorkItem(n);return t?this._dataManager.getWorkItemIds().indexOf(t.id)<0?t.id:this._getTopLevelParentId(t.id):kt.UnparentedId}return undefined},t.enhancementTypeName="tfs.agile.productbackloggrid",t.ORDER_FIELD_NAME="Backlog.Order",t.FORECAST_FIELD_NAME="Backlog.Forecast",t.NEW_WORKITEM_FIELD_NAME="Backlog.NewWit",t.NEW_WORKITEM_CLASS="new-workitem-row",t.EVENT_DRAG_EVENT="event-drag-operation",t.DRAG_OPERATION_START="start",t.DRAG_OPERATION_STOP="stop",t.SINGLE_SPRINT_LINE_CLASS="sprint-line-single",t.DOUBLE_SPRINT_LINE_CLASS="sprint-line-double",t.DROP_SUCCESSFUL="drop_successful",t.CSS_GRID_CONTEXTMENU_CONTAINER="grid-context-menu-popup-pin",t.DATA_WORK_ITEM_IDS="work-item-ids",t.DRAG_ACTIVE_CLASS="productbacklog-grid-drag-active",t.DRAG_HOVER_CLASS="grid-row-dragHover",t.DRAG_NEW_PARENT_CLASS="drag-drop-new-parent",t.DRAG_INSERT_BEFORE_CLASS="drag-drop-insert-before",t.DRAG_INSERT_AFTER_CLASS="drag-drop-insert-after",t.DRAG_FULL_LINE_CLASS="full",t.DEFAULT_DATASOURCE_NAME="GenericBacklogGrid",t.EVENT_WORKITEM_PAGED="event-workitem-paged",t.DRAGHOVER_DELAYED_TIME=500,t.ROW_OFFSET_PERCENTAGE_DRAG_DROP=-50,t}(at.QueryResultGrid);t.ProductBacklogGrid=ui;i.initClassPrototype(ui,{_titleColumnIndex:0,_events:null,_dataManager:null,_enableReorder:!1,_rowSavingManager:null,_contextMenuCreator:null,_contextMenuErrorHandler:null,_keyboardReorderRowIndex:null,_keyboardReorderRowIndexOverTopRow:!1,_keyboardReorderDropEffect:null,_keyboardReorderDrawDelayedFunc:null,_dragActionCache:null});i.classExtend(ui,k.TfsContext.ControlExtensions);ri=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.processColumns=function(t){return n.prototype.processColumns.call(this,oi(t))},t.prototype._getSelectedDataIndicesFromGrid=function(){var n=this;return this._grid.getSelectedDataIndices().filter(function(t){return n._grid.getWorkItemIdAtDataIndex(t)>0})},t}(at.QueryResultHtmlTableFormatter);t.BacklogsHtmlTableFormatter=ri});

define("Agile/Scripts/Backlog/ContextMenu/Components/TeamPickerCallout",["require","exports","react","VSS/Utils/String","Agile/Scripts/Models/Team","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","OfficeFabric/Callout","VSSUI/PickList","TFS/Core/RestClient","Presentation/Scripts/TFS/TFS.Rest.Utils","Presentation/Scripts/TFS/Components/LoadingComponent","VSS/Utils/String","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","VSS/LoaderPlugins/Css!Agile/Scripts/Backlog/ContextMenu/Components/ChangeParentDialog"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){var y=this,v;Object.defineProperty(t,"__esModule",{value:!0});t.TeamPickerCallout=void 0;v=function(n){var v=i.useState(undefined),p=v[0],k=v[1],w=i.useState(undefined),b=w[0],d=w[1];i.useEffect(function(){(function(){return __awaiter(y,void 0,void 0,function(){var t,i,f,e,o;return __generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),t=s.getClient(),i=function(i,r){return t.getTeams(n.projectId,!1,i,r)},[4,h.batchGet(i)];case 1:return f=c.sent(),e=f.map(function(n){return u.TeamBuilder.fromWebApiTeam(n)}).sort(function(n,t){return r.localeIgnoreCaseComparer(n.name,t.name)}),k(e),[3,3];case 2:return o=c.sent(),d(l.format(a.ChangeParentErrorLoadingTeamsMessage,o.message)),[3,3];case 3:return[2]}})})})()},[]);var t,g=function(){var t=n.calloutTargetQuerySelector,r=n.onDismiss;return i.createElement(e.Callout,{target:t,onDismiss:r,directionalHint:4,isBeakVisible:!1,setInitialFocus:!0,onPositioned:ut},nt())},nt=function(){var t=n.selectedTeam;return b?i.createElement("p",null,b):p?i.createElement(o.PickList,{className:"change-parent-dialog-team-callout",ref:rt,isSearchable:!0,items:p,getListItem:tt,selectedItems:[t],onSelectionChanged:it,searchTextPlaceholder:f.MappingPane_TeamSearchPlaceholder}):i.createElement(c.LoadingComponent,null)},tt=function(n){return{key:n.id,name:n.name,iconProps:{iconType:0,iconName:"People"}}},it=function(t){var i=t.selectedItems[0];n.onSelection(i)},rt=function(n){t=n},ut=function(){t&&t.focus()};return g()};t.TeamPickerCallout=v});

define("Agile/Scripts/Backlog/ContextMenu/Components/TeamPicker",["require","exports","react","VSSUI/VssIcon","OfficeFabric/Button","./TeamPickerCallout"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.TeamPicker=void 0;var e=function(n){var e="change-parent-dialog-team-header-button-container",o=i.useState(!1),t=o[0],s=o[1],c=function(){var s=n.projectId,o=n.selectedTeam;return i.createElement(i.Fragment,null,i.createElement("div",{className:e},i.createElement(u.BaseButton,{className:"change-parent-dialog-team-header-button",onClick:a,"aria-haspopup":!0,"aria-expanded":t},o.name," ",i.createElement(r.VssIcon,{iconType:0,iconName:"ChevronDown"}))),t&&i.createElement(f.TeamPickerCallout,{projectId:s,calloutTargetQuerySelector:".".concat(e),selectedTeam:o,onDismiss:h,onSelection:l}))},l=function(t){h();n.onTeamSelected(t)},a=function(){t||s(!0)},h=function(){t&&s(!1)};return c()};t.TeamPicker=e});

define("Agile/Scripts/Backlog/ContextMenu/Components/ParentPicker",["require","exports","react","OfficeFabric/Dropdown","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","VSSUI/VssIcon","Presentation/Scripts/TFS/Components/LoadingComponent","VSSUI/Tooltip","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","VSS/Context","VSS/Service","TFS/Work/RestClient","WorkItemTracking/Scripts/Utils/PageWorkItemHelper","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var w=this,p;Object.defineProperty(t,"__esModule",{value:!0});t.ParentPicker=void 0;p=function(n){var k=i.useState({isLoading:!1,ids:[],workItemMap:{}}),t=k[0],p=k[1],d,b;return i.useEffect(function(){var i=!1;return function(){return __awaiter(w,void 0,void 0,function(){var e,o,w,b,k,d,r,s,g,h,f,nt;return __generator(this,function(tt){switch(tt.label){case 0:e=n.projectId;o=n.selectedTeam;w=n.selectedParentId;b=n.setSelectedParentId;p(__assign(__assign({},t),{isLoading:!0}));k={team:o.name,teamId:o.id,project:e,projectId:e};tt.label=1;case 1:return tt.trys.push([1,5,,6]),d=c.getClient(l.WorkHttpClient,undefined,undefined,undefined,undefined),[4,d.getBacklogLevelWorkItems(k,n.parentBacklogLevelId)];case 2:return(r=tt.sent(),!(r&&r.workItems&&!i))?[3,4]:(s=r.workItems.map(function(n){return n.target.id}),g=[v.CoreFieldRefNames.TeamProject,v.CoreFieldRefNames.Title,v.CoreFieldRefNames.WorkItemType],[4,a.PageWorkItemHelper.pageWorkItems(s,null,g)]);case 3:if(h=tt.sent(),i)return[2];f=s.filter(function(n){return h.some(function(t){return t.id===n})});b(f.length>0?f[0]:w);p({isLoading:!1,ids:f,workItemMap:h.reduce(function(n,t){return n[t.id]=t,n},{})});tt.label=4;case 4:return[3,6];case 5:return nt=tt.sent(),p({isLoading:!1,ids:[],workItemMap:{},errorMessage:y.format(u.ChangeParentErrorLoadingParentWorkItemsMessage,nt.message)}),[3,6];case 6:return[2]}})})}(),function(){i=!0}},[n.projectId,n.selectedTeam,n.parentBacklogLevelId]),d=function(){var s=n.selectedTeam,f=n.selectedParentId,h=n.setSelectedParentId,o;return t.isLoading?i.createElement(e.LoadingComponent,null):t.errorMessage?i.createElement("div",null,t.errorMessage):(o={label:i.createElement("span",{className:"ms-font-m ms-fontColor-neutralSecondary ms-fontWeight-semibold"},u.ChangeParentDialogWorkItemPickerLabel),onChanged:function(n){var t=n.key;t!==f&&h(t)},onRenderTitle:function(){if(f)return b(f,"selection-title");var n=t.ids.length>0;return n?i.createElement("div",null,u.ChangeParentDialogWorkItemPickerHelpText):i.createElement("div",null,u.ChangeParentDialogWorkItemPickerDisabledText)},onRenderOption:function(n){return b(n.key,"dropdown-title")},disabled:!1,ariaLabel:u.ChangeParentDialogWorkItemPickerLabel},t.ids.length>0?o.options=t.ids.map(function(n){return{key:n,selected:Number(n)===f}}):o.disabled=!0,i.createElement("div",{className:"parent-work-item-picker",key:"parent-work-item-picker-".concat(s.id)},i.createElement(r.Dropdown,__assign({},o))))},b=function(n,r){var u=t.workItemMap[n],l=u.fields[v.CoreFieldRefNames.TeamProject]||h.getDefaultWebContext().project.name,e=s.WorkItemTypeColorAndIconsProvider.getInstance().getColorAndIcon(l,u.fields[v.CoreFieldRefNames.WorkItemType]),c=u.fields[v.CoreFieldRefNames.Title];return i.createElement("div",{className:"change-parent-workitem-picker ".concat(r||"")},i.createElement(f.VssIcon,{className:"work-item-type-icon",iconType:1,iconName:e.icon,styles:{root:{color:e.color}}}),i.createElement(o.TooltipHost,{overflowMode:o.TooltipOverflowMode.Parent,content:c},i.createElement("div",{className:"work-item-id"},"".concat(u.id,":")),c))},d()};t.ParentPicker=p});

define("Agile/Scripts/Backlog/ContextMenu/Components/ChangeParentDialog",["require","exports","react","OfficeFabric/Fabric","OfficeFabric/Dialog","OfficeFabric/Button","VSS/Utils/String","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Agile/Scripts/Models/Team","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","VSS/Utils/String","Presentation/Scripts/TFS/Components/LoadingComponent","VSS/Context","TFS/Core/RestClient","./TeamPicker","./ParentPicker","VSS/LoaderPlugins/Css!Agile/Scripts/Backlog/ContextMenu/Components/ChangeParentDialog"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var b=this,w;Object.defineProperty(t,"__esModule",{value:!0});t.ChangeParentDialog=void 0;w=function(n){var d=i.useState(undefined),t=d[0],g=d[1],nt=i.useState(undefined),tt=nt[0],rt=nt[1],it=i.useState(undefined),w=it[0],ut=it[1],k=a.getDefaultWebContext().project.id;i.useEffect(function(){(function(){return __awaiter(b,void 0,void 0,function(){var t,i,r;return __generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),t=v.getClient(),[4,t.getTeam(k,n.initialTeamId)];case 1:return i=u.sent(),g(s.TeamBuilder.fromWebApiTeam(i)),[3,3];case 2:return r=u.sent(),rt(c.format(o.ChangeParentErrorLoadingTeamsMessage,r.message)),[3,3];case 3:return[2]}})})})()},[]);var ft="change-parent-dialog",et=function(){var t=n.onDismiss,f={type:u.DialogType.close,containerClassName:ft,title:o.BacklogsChangeParentDialogTitle,onDismiss:t,isBlocking:!0,isOpen:!0};return i.createElement(r.Fabric,null,i.createElement(u.Dialog,__assign({},f),ot(),lt()))},ot=function(){var r=n.workItemIdsToReparent;return tt?i.createElement("div",null,tt):t?i.createElement("div",{className:"change-parent-dialog-content"},i.createElement("p",null,e.format(o.BacklogsChangeParentDialogDescription,r.length)),st(),ct()):i.createElement(l.LoadingComponent,null)},st=function(){var r=n.parentBacklogLevel;return i.createElement("div",{className:"change-parent-dialog-team-header flex-row"},c.format(h.MappingPane_BacklogForTeam,r.name),i.createElement(y.TeamPicker,{projectId:k,selectedTeam:t,onTeamSelected:ht}))},ht=function(n){e.equals(t.id,n.id,!0)||g(n)},ct=function(){return t?i.createElement(p.ParentPicker,{projectId:k,selectedTeam:t,parentBacklogLevelId:n.parentBacklogLevel.id,selectedParentId:w,setSelectedParentId:ut}):i.createElement(l.LoadingComponent,null)},lt=function(){var t=n.onSave,r=n.onDismiss;return i.createElement(u.DialogFooter,null,i.createElement(f.PrimaryButton,{disabled:!w,onClick:function(){return t(w)}},o.BacklogsChangeParentDialogFooterOk),i.createElement(f.DefaultButton,{disabled:!1,onClick:function(){return r()}},o.BacklogsChangeParentDialogFooterCancel))};return et()};t.ChangeParentDialog=w});

define("Agile/Scripts/Backlog/ContextMenu/Components/SimpleMessageDialog",["require","exports","react","OfficeFabric/Fabric","OfficeFabric/Dialog","OfficeFabric/Button","Agile/Scripts/Resources/TFS.Resources.Agile","VSS/LoaderPlugins/Css!Agile/Scripts/Backlog/ContextMenu/Components/ChangeParentDialog"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.SimpleMessageDialog=void 0;var o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this,t={isOpen:!0,type:u.DialogType.close,isBlocking:!0,title:this.props.title,containerClassName:"change-parent-simple-message-dialog",onDismiss:function(){return n.props.onDismiss()}};return i.createElement(r.Fabric,null,i.createElement(u.Dialog,__assign({},t),this.props.message,this.props.link?i.createElement("a",{href:this.props.link.url},this.props.link.linkText):null,i.createElement(u.DialogFooter,null,i.createElement(f.PrimaryButton,{onClick:function(){return n.props.onDismiss()}},e.Close))))},t}(i.Component);t.SimpleMessageDialog=o});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Interfaces",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.FetchingDisplayData=void 0;var i;(function(n){n[n.Done=0]="Done";n[n.InProgress=1]="InProgress"})(i=t.FetchingDisplayData||(t.FetchingDisplayData={}))});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/ArtifactSorting",["require","exports","VSS/Diag","VSS/Utils/String","VSS/Utils/Date","VSS/Utils/Number","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts"],function(n,t,i,r,u,f,e){var o;Object.defineProperty(t,"__esModule",{value:!0});t.ArtifactSorter=void 0;o=function(){function n(){}return n.prototype.sortArtifactsInGroups=function(n,t){for(var u,i=0,r=n;i<r.length;i++)u=r[i],this._sort(u.linkedArtifacts,t)},n.prototype._sort=function(n,t){var i=new l,r,f,u;if(t&&t.length){for(r=0,f=t;r<f.length;r++)u=f[r],u.column.refName===e.InternalKnownColumns.Link.refName?i.push(new s(u.direction)):i.push(new h(u));i.push(new c)}else i.push(new s(e.SortDirection.Ascending));n.sort(i.getComparer())},n}();t.ArtifactSorter=o;var s=function(){function n(n){this._sortDirection=n}return n.prototype.compare=function(n,t){var i=this._compare(n,t);return i*this._sortDirection},n.prototype._compare=function(n,t){var o=this._handleUndefined(n,t),f,e;if(o!==null)return o;var i=n.primaryData,u=t.primaryData,s=this._handleUndefined(n.primaryData,t.primaryData);return s!==null?s:(f=r.localeComparer(i.typeName,u.typeName),f!==0)?f:i.user&&u.user&&(e=r.localeComparer(i.user.displayName,u.user.displayName),e!==0)?e:r.localeComparer(i.title,u.title)},n.prototype._handleUndefined=function(n,t){if(n||t)if(n){if(!t)return-1}else return 1;else return 0;return null},n}(),h=function(){function n(n){this._sortColumn=n}return n.prototype.compare=function(n,t){var i=this._compare(n,t);return i*this._sortColumn.direction},n.prototype._compare=function(n,t){var f=n.additionalData&&n.additionalData[this._sortColumn.column.refName],e=t.additionalData&&t.additionalData[this._sortColumn.column.refName],r,u,o;if(f||e)if(f){if(!e)return-1}else return 1;else return 0;return(r=f.rawData||f.styledText.text||"",u=e.rawData||e.styledText.text||"",typeof r!=typeof u)?-1:(o=this._getComparerForType(r),!o)?-1:o(r,u)},n.prototype._getComparerForType=function(n){return typeof n=="number"?f.defaultComparer:typeof n=="string"?r.localeComparer:n instanceof Date?u.defaultComparer:null},n}(),c=function(){function n(){}return n.prototype.compare=function(n,t){var u;if(n||t)if(n){if(!t)return-1}else return 1;else return 0;var o=n.primaryData&&n.primaryData.title||"",s=t.primaryData&&t.primaryData.title||"",f=r.localeComparer(o,s);if(f!==0)return f;var h=this._getDisplayId(n),c=this._getDisplayId(t),e=r.defaultComparer(h,c);return e!==0?e:(u=r.defaultComparer(this._getId(n),this._getId(t)),u!==0)?u:-1},n.prototype._getDisplayId=function(n){if(!n||!n.primaryData||!n.primaryData.displayId)return n.id;var t=n.primaryData.displayId;return typeof t=="string"?t:t.text||n.id},n.prototype._getId=function(n){return n.id||""},n}(),l=function(){function n(){this._comparers=[]}return n.prototype.push=function(n){this._comparers.push(n)},n.prototype.getComparer=function(){var n=this;return function(t,i){for(var e,f,r=0,u=n._comparers;r<u.length;r++)if(e=u[r],f=e.compare(t,i),f!==0)return f;return 0}},n}()});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/GroupSorting",["require","exports","VSS/Utils/String"],function(n,t,i){var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.GroupSorter=void 0;r=function(){function n(){}return n.prototype.sort=function(n,t){var i;i=n&&n.length?new f(n):new u;t.sort(i.getComparer())},n}();t.GroupSorter=r;u=function(){function n(){}return n.prototype.getComparer=function(){return function(n,t){return i.localeIgnoreCaseComparer(n.displayName,t.displayName)}},n}();f=function(){function n(n){var t=this;this._linkTypeRefNames=n;this._linkTypeRefNamesIndexMap={};n.forEach(function(n,i){return t._linkTypeRefNamesIndexMap[n]=i})}return n.prototype.getComparer=function(){var n=this;return function(t,r){var u=n._linkTypeRefNamesIndexMap[t.linkType],f=n._linkTypeRefNamesIndexMap[r.linkType],e=typeof u=="undefined",o=typeof f=="undefined";return e&&o?i.localeIgnoreCaseComparer(t.displayName,r.displayName):e?1:o?-1:u-f}},n}()});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Flux/Store",["require","exports","Presentation/Scripts/TFS/TFS.Core.Utils","Presentation/Scripts/TFS/TFS.React","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Interfaces","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/ArtifactSorting","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/GroupSorting"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.LinkedArtifactsStore=void 0;var s=function(n){function t(r,e,o,s,h,c,l,a,v){var y=n.call(this,"".concat(i.GUIDUtils.newGuid(),"_CHANGED"),a)||this;return y._linkedArtifactGroups=[],y._actionHub=r,y._actionHub.changeViewOptions.addListener(y._changeViewMode.bind(y)),y._actionHub.changeZeroDataOptions.addListener(y._changeZeroDataExperience.bind(y)),y._actionHub.changeFetchingLinks.addListener(y._changeFetchingLInks.bind(y)),y._actionHub.changeFetchingDisplayData.addListener(y._changeFetchingDisplayData.bind(y)),y._actionHub.changeReadOnly.addListener(y._setReadOnly.bind(y)),y._actionHub.setLinkedArtifacts.addListener(y._setLinkedArtifacts.bind(y)),y._actionHub.sortLinkedArtifacts.addListener(y._sortLinkedArtifacts.bind(y)),y._actionHub.showMessage.addListener(y._showMessage.bind(y)),y._linkTypeRefNames=e,y._sortColumns=o||t.DefaultSortColumns,y._fetchingDisplayData=u.FetchingDisplayData.Done,y._fetchingLinks=f.FetchingLinks.Done,y._displayOptions={readOnly:l?l:!1,showGroupHeaders:!s?!0:s.showGroupHeaders,viewMode:s&&s.viewMode||f.ViewMode.List,availableSpace:s&&s.availableSpace||{width:null,height:null},zeroDataOptions:{zeroDataExperienceViewMode:c?c.zeroDataExperienceViewMode:f.ZeroDataExperienceViewMode.Default,message:c&&c.message,action:c&&c.action,onRenderZeroData:c&&c.onRenderZeroData},gridViewOptions:h||{maxGridHeight:f.DefaultGridHeight,autoSizeGrid:!0},artifactPageSize:v||6},y}return __extends(t,n),t.prototype.getState=function(){return{displayOptions:{readOnly:this._displayOptions.readOnly,showGroupHeaders:this._displayOptions.showGroupHeaders,viewMode:this._displayOptions.viewMode,zeroDataOptions:{zeroDataExperienceViewMode:this._displayOptions.zeroDataOptions.zeroDataExperienceViewMode,action:this._displayOptions.zeroDataOptions.action,message:this._displayOptions.zeroDataOptions.message,onRenderZeroData:this._displayOptions.zeroDataOptions.onRenderZeroData},availableSpace:this._displayOptions.availableSpace,artifactPageSize:this._displayOptions.artifactPageSize,gridViewOptions:this._displayOptions.gridViewOptions},hostArtifact:this._hostArtifact,linkedArtifactGroups:this._linkedArtifactGroups,sortColumns:this._sortColumns,message:this._message,fetchingDisplayData:this._fetchingDisplayData,fetchingLinks:this._fetchingLinks}},t.prototype._changeViewMode=function(n){var t=!1;this._displayOptions.viewMode!==n.viewOptions.viewMode&&(this._displayOptions.viewMode=n.viewOptions.viewMode,t=!0);!n.viewOptions.availableSpace||this._displayOptions.availableSpace.height===n.viewOptions.availableSpace.height&&this._displayOptions.availableSpace.width===n.viewOptions.availableSpace.width||(this._displayOptions.availableSpace=n.viewOptions.availableSpace,t=!0);t&&this.emitChanged()},t.prototype._setReadOnly=function(n){this._displayOptions.readOnly=n.readOnly;this.emitChanged()},t.prototype._changeFetchingLInks=function(n){this._fetchingLinks=n.fetchingLinks;this.emitChanged()},t.prototype._changeFetchingDisplayData=function(n){this._fetchingDisplayData=n.fetchingDisplayData;this.emitChanged()},t.prototype._changeZeroDataExperience=function(n){this._compareZeroDataOptions(this._displayOptions.zeroDataOptions,n.zeroDataOptions)&&(this._displayOptions.zeroDataOptions=n.zeroDataOptions,this.emitChanged())},t.prototype._setLinkedArtifacts=function(n){this._linkedArtifactGroups=n.groupedLinkedArtifacts;this._hostArtifact=n.hostArtifact;this._sort();this.emitChanged()},t.prototype._sortLinkedArtifacts=function(n){this._sortColumns=n.sortColumns;this._sort();this.emitChanged()},t.prototype._sort=function(){this._sortArtifacts();this._sortGroups()},t.prototype._sortArtifacts=function(){var n=new e.ArtifactSorter;n.sortArtifactsInGroups(this._linkedArtifactGroups,this._sortColumns)},t.prototype._sortGroups=function(){var n=new o.GroupSorter;n.sort(this._linkTypeRefNames,this._linkedArtifactGroups)},t.prototype._showMessage=function(n){this._message=n.message;this.emitChanged()},t.prototype._compareZeroDataOptions=function(n,t){var i=!n.action?null:n.action.actionMessage,r=!t.action?null:t.action.actionMessage;return n.zeroDataExperienceViewMode!==t.zeroDataExperienceViewMode||n.message!==t.message||i!==r?!0:!1},t.DefaultSortColumns=[{column:f.InternalKnownColumns.Link,direction:f.SortDirection.Ascending}],t}(r.Store);t.LinkedArtifactsStore=s});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Flux/Actions",["require","exports","Presentation/Scripts/TFS/TFS.Core.Utils","Presentation/Scripts/TFS/TFS.React"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.ActionsHub=void 0;var u=function(){function n(){this._scope="LinkedArtifacts_".concat(i.GUIDUtils.newGuid());this.changeViewOptions=this._createAction();this.changeReadOnly=this._createAction();this.setLinkedArtifacts=this._createAction();this.removeLinkedArtifact=this._createAction();this.changeLinkedArtifactComment=this._createAction();this.sortLinkedArtifacts=this._createAction();this.showMessage=this._createAction();this.changeZeroDataOptions=this._createAction();this.changeFetchingLinks=this._createAction();this.changeFetchingDisplayData=this._createAction()}return n.prototype._createAction=function(){return new r.Action(this._scope)},n}();t.ActionsHub=u});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Flux/ActionsCreator",["require","exports","VSS/Utils/Array","VSS/Utils/Core","VSS/Diag","VSS/Controls/Notifications","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Interfaces","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/ArtifactResolver"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.ActionsCreator=void 0;var h=function(){function n(n,t,i,r,u){this._tfsContext=n;this._actionsHub=t;this._filterHelper=r;this._columns=i;this._cache=u}return n.prototype.removeLinkedArtifact=function(n){this._actionsHub.removeLinkedArtifact.invoke({linkedArtifactToRemove:n})},n.prototype.changeLinkedArtifactComment=function(n,t){s.ArtifactResolver.invalidateArtifactCacheEntry(this._cache,n,this._columns);this._actionsHub.changeLinkedArtifactComment.invoke({linkedArtifactToChange:n,newComment:t})},n.prototype.invalidateLinkedArtifact=function(n){s.ArtifactResolver.invalidateArtifactCacheEntry(this._cache,n,this._columns)},n.prototype.changeViewOptions=function(n){this._actionsHub.changeViewOptions.invoke({viewOptions:n})},n.prototype.changeZeroDataOptions=function(n){this._actionsHub.changeZeroDataOptions.invoke({zeroDataOptions:n})},n.prototype.changeReadOnly=function(n){this._actionsHub.changeReadOnly.invoke({readOnly:n})},n.prototype.changeFetchingLinks=function(n){this._actionsHub.changeFetchingLinks.invoke({fetchingLinks:n})},n.prototype.setLinks=function(n,t){var i=this,u;if(this._retrievingLinks&&this._retrievingLinks.cancel(),this._retrievingLinks=new r.Cancelable(null),this._setStartFetchingDisplayData(),u=this._filterHelper.filter(n.slice(0)),u.length===0){this._groupAndSetArtifacts([],t);this.clearMessage();this._setEndFetchingData();return}s.ArtifactResolver.getInstance().resolveArtifacts(u,this._columns,t,this._tfsContext,function(n){return i._filterHelper.getSubtypeFilterForDataProvider(n)},this._cache).then(this._retrievingLinks.wrap(function(n){var u=n.resolvedArtifacts,r;i._groupAndSetArtifacts(u,t);n.messages&&n.messages.length>0?(r=n.messages.filter(function(n){return n.type===f.MessageAreaType.Error}),r.length>0?i.showMessage(r[0].text,r[0].type):i.showMessage(n.messages[0].text,n.messages[0].type)):i.clearMessage();i._setEndFetchingData()}))},n.prototype.sortLinkedArtifacts=function(n){var t=this,r=n.map(function(n){var r=i.first(t._columns,function(t){return t.refName===n.index});if(r)return{column:r,direction:n.order==="desc"?e.SortDirection.Descending:e.SortDirection.Ascending}}).filter(function(n){return!!n});this._actionsHub.sortLinkedArtifacts.invoke({sortColumns:r})},n.prototype.showMessage=function(n,t){t===void 0&&(t=f.MessageAreaType.Error);var i="";if(typeof n=="string")i=n;else if(typeof n=="object"&&n.message)i=n.message;else return;this._actionsHub.showMessage.invoke({message:{text:i,type:t}})},n.prototype.clearMessage=function(){this._actionsHub.showMessage.invoke({message:null})},n.prototype._groupAndSetArtifacts=function(n,t){var i=s.ArtifactResolver.groupLinkedArtifactsByLinkType(n);this._actionsHub.setLinkedArtifacts.invoke({groupedLinkedArtifacts:i,hostArtifact:t})},n.prototype._setStartFetchingDisplayData=function(){this._actionsHub.changeFetchingDisplayData.invoke({fetchingDisplayData:o.FetchingDisplayData.InProgress})},n.prototype._setEndFetchingData=function(){this._actionsHub.changeFetchingDisplayData.invoke({fetchingDisplayData:o.FetchingDisplayData.Done})},n}();t.ActionsCreator=h});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/Filtering",["require","exports","VSS/Utils/Array","VSS/Utils/String"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.ArtifactFilterHelper=void 0;var u=function(){function n(n,t){var i,r,u,f;if(this._linkTypeRefNames=n,t)for(this._filterConfiguration={},i=0,r=Object.keys(t);i<r.length;i++)u=r[i],f=t[u],this._filterConfiguration[u.toLowerCase()]=f}return n.prototype.filter=function(n){var t=this;return!this._linkTypeRefNames||this._linkTypeRefNames.length===0?n:n.filter(function(n){return i.contains(t._linkTypeRefNames,n.linkType,r.ignoreCaseComparer)})},n.prototype.getSubtypeFilterForDataProvider=function(n){var t=null;return n&&this._filterConfiguration&&(n=n.toLowerCase(),t=this._filterConfiguration[n]||null),t},n}();t.ArtifactFilterHelper=u});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/ComponentUtils",["require","exports","VSS/VSS","TFS/WorkItemTracking/ExtensionContracts"],function(n,t,i,r){var u,f;Object.defineProperty(t,"__esModule",{value:!0});t.ComponentUtils=t.ErrorUtils=void 0,function(n){function t(n){var u=n.primaryData&&n.primaryData.displayId||n.id,f=n.linkTypeDisplayName||n.linkType||n.type,t;return n&&n.error&&(t=i.getErrorMessage(n.error)),{displayId:u,title:t,typeIcon:{type:r.ArtifactIconType.icon,descriptor:"bowtie-status-error la-error-icon",title:t},typeName:f,href:"#",callback:function(){return!0}}}n.getErrorPrimaryData=t}(u=t.ErrorUtils||(t.ErrorUtils={})),function(n){function t(n,t){var u,i,f,r;if(!n||!n.primaryData)return"";if(u="",n.additionalData)for(i=0,f=t;i<f.length;i++)r=f[i],n.additionalData[r.refName]&&(u+="".concat(r.name,":\t").concat(n.additionalData[r.refName].styledText.text,"\n"));return u.trim()}n.getTooltip=t}(f=t.ComponentUtils||(t.ComponentUtils={}))});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/ArtifactRenderer",["require","exports","react","OfficeFabric/Utilities","VSS/Diag","VSS/Events/Action","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/String","Presentation/Scripts/TFS/TFS.OM.Identities","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Controls/PopupContent","VSSUI/Tooltip","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","TFS/WorkItemTracking/ExtensionContracts","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/ComponentUtils","VSS/Utils/UI","VSSUI/Icon","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){var d,g,et,ot,nt,rt,tt,it,ut,ft;Object.defineProperty(t,"__esModule",{value:!0});t.ArtifactErrorComponent=t.ArtifactComponent=t.ArtifactDeleteButton=t.AdditionalArtifact=t.PrimaryArtifact=t.ArtifactSubGroup=t.ArtifactGroup=t.ArtifactStyledText=t.ArtifactIcon=void 0,function(n){n.Component=function(n){var t=n.icon,r,f;if(t&&t.descriptor)switch(t.type){case y.ArtifactIconType.colorBar:return i.createElement(a.TooltipHost,{content:t.title},i.createElement("span",{className:"la-color-bar",style:{backgroundColor:t.descriptor}}));case y.ArtifactIconType.colorCircle:return i.createElement(a.TooltipHost,{content:t.title},i.createElement("span",{className:"la-color-circle",style:{backgroundColor:t.descriptor,borderColor:t.descriptor}}));case y.ArtifactIconType.icon:return r=t.descriptor,f=null,typeof r=="string"?f=i.createElement(b.Icon,{className:"bowtie-icon ".concat(t.descriptor)}):r&&(f=i.createElement(b.Icon,{className:"bowtie-icon ".concat(r.icon),style:{color:r.color}})),i.createElement(a.TooltipHost,{content:t.title},f);case y.ArtifactIconType.fabricIcon:var r=t.descriptor,e=w.BrowserCheckUtils.isEdge()?"browser-edge":"",f=null;return typeof r=="string"?f=i.createElement(b.Icon,{className:e,iconName:r}):r&&(f=i.createElement(b.Icon,{className:e,iconName:r.icon,style:{color:r.color}})),i.createElement(a.TooltipHost,{hostClassName:"fabric-icon-tooltip-host",content:t.title},f)}return i.createElement("span",null)};n.GridComponent=function(n){var r=n.icon,t=document.createElement("span"),i,f;if(r&&r.descriptor)switch(r.type){case y.ArtifactIconType.colorBar:t.className="la-color-bar";t.style.backgroundColor=r.descriptor;break;case y.ArtifactIconType.colorCircle:t.className="la-color-circle";t.style.backgroundColor=r.descriptor;t.style.borderColor=r.descriptor;break;case y.ArtifactIconType.icon:i=r.descriptor;typeof i=="string"?t.className="bowtie-icon ".concat(i):i&&(t.className="bowtie-icon ".concat(i.icon),t.style.color=i.color);break;case y.ArtifactIconType.fabricIcon:i=r.descriptor;f=w.BrowserCheckUtils.isEdge()?" browser-edge":"";typeof i=="string"?t.className="flex-noshrink fabric-icon ms-Icon--".concat(i).concat(f):i&&(t.className="flex-noshrink fabric-icon ms-Icon--".concat(i.icon).concat(f),t.style.color=i.color)}return t}}(d=t.ArtifactIcon||(t.ArtifactIcon={})),function(n){n.Component=function(n){var t=n.styledText,r,u;return t&&t.text?(r="la-text",u=t.className?"".concat(r," ").concat(t.className):r,i.createElement("span",{className:u,style:{backgroundColor:t.className}},t.text)):i.createElement("span",null)};n.GridComponent=function(n){var t=n.styledText,i=document.createElement("span");return i.className="la-text"+(t.className?" "+t.className:""),i.innerText=t.text,i}}(g=t.ArtifactStyledText||(t.ArtifactStyledText={})),function(n){n.Component=function(n){var t=n.groupName;return n.count>1&&(t="".concat(t,"\u00a0(").concat(n.count,")")),i.createElement("div",{className:"la-group-title"},t)};n.GridComponent=function(n){var i=document.createElement("span"),t;return i.className="la-group-title",t=n.groupName,n.count>1&&(t="".concat(t,"\u00a0(").concat(n.count,")")),$(i).text(t),i}}(et=t.ArtifactGroup||(t.ArtifactGroup={})),function(n){n.GridComponent=function(n){var i=document.createElement("span"),r=document.createElement("span"),t;return r.className="bowtie-icon bowtie-azure-api-management",t=document.createElement("span"),t.className="la-group-sub-title",$(t).text(n.subGroupName),i.appendChild(r),i.appendChild(t),i}}(ot=t.ArtifactSubGroup||(t.ArtifactSubGroup={})),function(n){function t(n,t,i){var u=i.altKey||i.ctrlKey||i.metaKey||i.shiftKey||i.which===s||i.button===o,r;u||(r=!0,n.callback&&n.callback(n.miscData,t,i)&&(r=!1,i.preventDefault()),r&&(f.getService().performAction(f.CommonActions.ACTION_WINDOW_OPEN,{url:n.href,target:"_blank"}),i.preventDefault()))}function u(n){return!n||!n.user?null:{id:n.user.id,displayName:n.user.displayName,uniqueName:n.user.uniqueName,_links:{avatar:{href:v(n)}}}}function v(n){var t=n&&n.user;return t&&t.imageUrl?t.imageUrl:t&&t.email?c.TfsContext.getDefault().getIdentityImageUrl(null,{email:n.user.email,defaultGravatar:"mm"}):h.IdentityHelper.getIdentityImageUrl(t,h.IdentityImageMode.ShowGenericImage,h.IdentityImageSize.Small)}function e(n){var t,i;return typeof n=="string"?t=i=n:n.text&&(t=n.text,i=n.title),{text:t,title:i}}function y(n){var i=document.createElement("div"),v,y,o,w,s,b,a,k,p,f;return i.className=r.css("la-primary-data",n.className),n.primaryData&&n.primaryData.additionalPrefixIcon&&(v=document.createElement("div"),v.className="la-primary-icon",v.appendChild(d.GridComponent({icon:n.primaryData.additionalPrefixIcon})),i.appendChild(v)),n.primaryData&&n.primaryData.typeIcon&&(y=document.createElement("div"),y.className="la-primary-icon",y.appendChild(d.GridComponent({icon:n.primaryData.typeIcon})),i.appendChild(y)),o=u(n.primaryData),o&&(w=o._links.avatar.href,w&&(s=document.createElement("img"),b=h.IdentityHelper.getUniquefiedIdentityName(o),s.src=w,s.alt=b,s.addEventListener("error",function(n){var t=n.target;t.onerror=null;t.src=c.TfsContext.getDefault().getIdentityImageUrl(null,{email:o.uniqueName,defaultGravatar:"mm"})}),a=document.createElement("div"),a.className="la-user-icon",a.appendChild(s),i.appendChild(a),l.RichContentTooltip.add(b,a))),n.primaryData.displayId&&n.primaryData.href!=="#"&&(k=e(n.primaryData.displayId),p=document.createElement("div"),p.className="la-primary-data-id",$(p).text(k.text),i.appendChild(p),i.appendChild(document.createTextNode("\u00a0"))),f=null,n.primaryData.href&&n.primaryData.href!=="#"?(f=document.createElement("a"),f.href=n.primaryData.href,f.onclick=t.bind(null,n.primaryData,n.hostArtifact),f.tabIndex=-1):f=document.createElement("span"),$(f).text(n.primaryData.title),i.appendChild(f),i}var o=1,s=2;n.openArtifact=t;n.Component=function(n){var l=function(){var t=u(n.primaryData);if(!t)return null;var r=t._links.avatar.href,f=null,e=h.IdentityHelper.getUniquefiedIdentityName(t);return r&&(f=i.createElement("img",{alt:e,src:r,onError:function(n){var i=n.target;i.onerror=null;i.src=c.TfsContext.getDefault().getIdentityImageUrl(null,{email:t.uniqueName,defaultGravatar:"mm"})}})),i.createElement(a.TooltipHost,{content:e},i.createElement("div",{className:"la-user-icon"},f))},o=null,s,r,f;return n.primaryData.displayId&&n.primaryData.href&&n.primaryData.href!=="#"&&(s=e(n.primaryData.displayId),o=i.createElement("div",{className:"la-primary-data-id"},s.text,"\u00a0")),r=null,r=n.primaryData.href&&n.primaryData.href!=="#"?i.createElement("a",{href:n.primaryData.href,onClick:t.bind(null,n.primaryData,n.hostArtifact)},n.primaryData.title):i.createElement("span",null,n.primaryData.title),f=n.primaryData&&n.primaryData.additionalPrefixIcon,i.createElement("div",{className:"la-primary-data"},f&&i.createElement("div",{className:"la-primary-icon"},i.createElement(d.Component,{icon:f})),n.primaryData.typeIcon&&i.createElement("div",{className:"la-primary-icon"},i.createElement(d.Component,{icon:n.primaryData.typeIcon})),l(),o,i.createElement(a.TooltipHost,{content:n.primaryData.title,overflowMode:a.TooltipOverflowMode.Parent},r))};n.GridComponent=y}(nt=t.PrimaryArtifact||(t.PrimaryArtifact={})),function(n){n.Component=function(n){var u,t,f,r;return(n.data.icon&&(u=i.createElement(d.Component,{icon:n.data.icon})),t=null,n.data.styledText&&(t=i.createElement(g.Component,{styledText:n.data.styledText})),f=s.equals(n.data.title,n.data.styledText.text)?a.TooltipOverflowMode.Parent:undefined,r=i.createElement("div",{className:"la-additional-data-item"},u,t),n.data.title)?i.createElement(a.TooltipHost,{content:n.data.title,overflowMode:f},r):r};n.GridComponent=function(n){var t=document.createElement("div"),i,r;return t.className="la-additional-data-item",i=d.GridComponent({icon:n.data.icon}),t.appendChild(i),r=g.GridComponent({styledText:n.data.styledText}),t.appendChild(r),n.data.title&&n.data.title!==n.data.styledText.text&&l.RichContentTooltip.add(n.data.title,t),t}}(rt=t.AdditionalArtifact||(t.AdditionalArtifact={})),function(n){n.Component=function(n){return i.createElement("button",{className:"la-item-delete",onClick:n.onDelete,"aria-label":k.LinkedArtifacts_RemoveLink},i.createElement(a.TooltipHost,{content:k.LinkedArtifacts_RemoveLink},i.createElement("span",{className:"bowtie-icon bowtie-edit-delete"})))}}(tt=t.ArtifactDeleteButton||(t.ArtifactDeleteButton={}));it=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.state={hasFocus:!1},i}return __extends(t,n),t.prototype.focus=function(){this._itemElement.focus()},t.prototype.render=function(){var n=this,u=[v.InternalKnownColumns.LastUpdate.refName,v.InternalKnownColumns.State.refName],t=u.map(function(t){if(n.props.linkedArtifact.additionalData&&n.props.linkedArtifact.additionalData[t]&&n.props.columns.some(function(n){return n.refName===t}))return n._renderAdditional(t,n.props.linkedArtifact.additionalData[t])}).filter(function(n){return!!n}),f,o,r,h;return t=this._intersperse(t),this.props.displayOptions.readOnly||this.props.linkedArtifact.isLocked||(f=i.createElement(tt.Component,{onDelete:this._onDelete})),this.props.linkedArtifact.action&&!this.props.displayOptions.readOnly&&(o=i.createElement(ft,{linkedArtifact:this.props.linkedArtifact,hostArtifact:this.props.hostArtifact})),r="la-item",this.state.hasFocus&&(r+=" la-item-focus"),h=this.props.columns.filter(function(n){return!e.contains(u,n.refName,s.ignoreCaseComparer)}),i.createElement("div",{className:r,onFocus:this._onFocus,onBlur:this._onBlur,onKeyDown:this._onKeyDown,ref:this._resolveItemRef},i.createElement("div",{className:"la-item-wrapper"},i.createElement("div",{className:"la-artifact-data"},i.createElement(nt.Component,{primaryData:this.props.linkedArtifact.primaryData,hostArtifact:this.props.hostArtifact}),i.createElement("div",{className:"la-additional-data"},t),o)),f)},t.prototype.componentWillUnmount=function(){var n=this;this.state.hasFocus&&(this._previousElement=r.getPreviousElement(document.body,this._itemElement),this._previousElement&&o.delay(this,0,function(){var t=r.getNextElement(document.body,n._previousElement);t&&t.focus()}))},t.prototype._renderAdditional=function(n,t){return i.createElement(rt.Component,{key:n,data:t})},t.prototype._onDelete=function(n){this.props.actionsCreator.removeLinkedArtifact(this.props.linkedArtifact);n.preventDefault()},t.prototype._onFocus=function(){this.setState({hasFocus:!0});this._scheduledFocusChange&&(this._scheduledFocusChange.cancel(),this._scheduledFocusChange=null)},t.prototype._onBlur=function(){var n=this;this._scheduledFocusChange=o.delay(this,0,function(){n._itemElement&&n.setState({hasFocus:!1})})},t.prototype._onKeyDown=function(n){switch(n.keyCode){case w.KeyCode.DELETE:this.props.actionsCreator.removeLinkedArtifact(this.props.linkedArtifact);n.preventDefault()}},t.prototype._resolveItemRef=function(n){this._itemElement=n},t.prototype._intersperse=function(n){if(n.length===0)return[];var t=0;return n.slice(1).reduce(function(n,r){return n.concat([i.createElement("span",{key:t++},", \u00a0 "),r])},[n[0]])},__decorate([r.autobind],t.prototype,"_onDelete",null),__decorate([r.autobind],t.prototype,"_onFocus",null),__decorate([r.autobind],t.prototype,"_onBlur",null),__decorate([r.autobind],t.prototype,"_onKeyDown",null),__decorate([r.autobind],t.prototype,"_resolveItemRef",null),t}(i.Component);t.ArtifactComponent=it;ut=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this.props.linkedArtifact,e=n.linkTypeDisplayName||n.linkType||n.type,t=p.ErrorUtils.getErrorPrimaryData(n),f=i.createElement(nt.Component,{primaryData:t,hostArtifact:this.props.hostArtifact}),r=null,u;return t.href&&t.href!=="#"&&(r=[this._renderAdditional("System.Links.ErrorColumn",{styledText:{text:s.localeFormat(k.LinkedArtifacts_ItemError)},title:s.localeFormat(k.LinkedArtifacts_ItemError)})]),this.props.displayOptions.readOnly||(u=i.createElement(tt.Component,{onDelete:this._onDelete.bind(this)})),i.createElement("div",{className:"la-item"},i.createElement("div",{className:"la-item-wrapper"},i.createElement("div",{className:"la-artifact-data"},f,i.createElement("div",{className:"la-additional-data"},r))),u)},t}(it);t.ArtifactErrorComponent=ut;ft=function(n){var r=function(){n.linkedArtifact.action.callback&&n.linkedArtifact.action.callback(n.linkedArtifact.miscData,n.hostArtifact)},t=n.linkedArtifact.action;return i.createElement("div",{className:"la-action"},i.createElement(a.TooltipHost,{content:t.title,overflowMode:a.TooltipOverflowMode.Parent},i.createElement("a",{href:t.href,onClick:r},t.styledText.text)))}});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/LinksListComponent",["require","exports","react","OfficeFabric/Utilities","VSS/Utils/UI","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/ArtifactRenderer","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","VSS/Utils/String"],function(n,t,i,r,u,f,e,o){var s,h,c;Object.defineProperty(t,"__esModule",{value:!0});t.LinksListComponent=void 0;s=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.state={numberOfVisibleArtifacts:r.props.displayOptions.artifactPageSize},r}return __extends(t,n),t.prototype.render=function(){for(var v,u,w,b,n,h,l=t._getGroupRenderOptions(this.state.numberOfVisibleArtifacts,this.props.linkedArtifactGroups),k=this._renderGroups(l),y=null,r=[],f=0,s=0,a=0,p=Object.keys(l);a<p.length;a++)v=p[a],u=l[v],f+=u.visibleCount,s+=u.totalArtifacts,s>f&&(w=u.totalArtifacts-u.visibleCount,r.push("".concat(v," (").concat(w,")")));if(s>f){if(b=o.format(e.RelatedArtifacts_RemainingCount,f,s),n="",r&&r.length>0){for(n=r[0],h=1;h<r.length;h++)n=o.format(e.RelatedArtifacts_SummaryDelimiter,n,r[h]);n=o.format(e.RelatedArtifacts_SummaryNotShown,n)}y=i.createElement(c,{itemsNotShownDescription:n,itemsShownDescription:b,showMore:this._showMore.bind(this)})}return i.createElement("div",{className:"la-list"},k,y)},t._getGroupRenderOptions=function(n,t){var i={},r=!n;return t.forEach(function(t){var u=t.linkedArtifacts.length;r||(u>n&&(u=n),n=n-u);i[t.displayName]={totalArtifacts:t.linkedArtifacts.length,visibleCount:u,group:t}}),i},t.prototype._renderGroups=function(n){var t=this;return this.props.linkedArtifactGroups.map(function(r){var u=n[r.displayName].visibleCount;return u===0?null:i.createElement(h,{key:r.displayName,hostArtifact:t.props.hostArtifact,actionsCreator:t.props.actionsCreator,displayOptions:t.props.displayOptions,displayName:r.displayName,linkedArtifacts:r.linkedArtifacts,columns:t.props.columns,visibleCount:u})}).filter(function(n){return!!n})},t.prototype._showMore=function(){var n=this;this.setState(function(t){return{numberOfVisibleArtifacts:t.numberOfVisibleArtifacts+n.props.displayOptions.artifactPageSize}})},t}(i.Component);t.LinksListComponent=s;h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n,t,r;return this.props.displayOptions.showGroupHeaders&&this.props.visibleCount>0&&(n=i.createElement(f.ArtifactGroup.Component,{groupName:this.props.displayName,count:this.props.linkedArtifacts.length})),t=this._renderLinks(),r=this.props.displayOptions.showGroupHeaders?"la-list-group-showheader":"la-list-group-noheader",i.createElement("div",{className:r},n,t)},t.prototype._renderLinks=function(){var n=this;return this.props.linkedArtifacts.slice(0,this.props.visibleCount).map(function(t){return t.error?i.createElement(f.ArtifactErrorComponent,{key:"".concat(t.id,"-").concat(t.linkType),hostArtifact:n.props.hostArtifact,actionsCreator:n.props.actionsCreator,displayOptions:n.props.displayOptions,columns:n.props.columns,linkedArtifact:t}):i.createElement(f.ArtifactComponent,{key:"".concat(t.id,"-").concat(t.linkType),hostArtifact:n.props.hostArtifact,actionsCreator:n.props.actionsCreator,displayOptions:n.props.displayOptions,columns:n.props.columns,linkedArtifact:t})})},t}(i.Component);c=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this;return i.createElement("div",null,i.createElement("div",null,i.createElement("div",{className:"la-show-more-container"},i.createElement("div",{role:"button",tabIndex:0,className:"la-show-more",onClick:function(){return n._callShowMore()},onKeyUp:this._onShowMoreKeyUp},e.RelatedArtifacts_ShowMore),i.createElement("div",{className:"la-shown-count"},this.props.itemsShownDescription))),i.createElement("div",{className:"la-not-shown-count"},this.props.itemsNotShownDescription))},t.prototype._onShowMoreKeyUp=function(n){(n.keyCode===u.KeyCode.ENTER||n.keyCode===u.KeyCode.SPACE)&&this._callShowMore()},t.prototype._callShowMore=function(){this.props.showMore()},__decorate([r.autobind],t.prototype,"_onShowMoreKeyUp",null),t}(i.Component)});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/LoadingIndicatorComponent",["require","exports","react","OfficeFabric/Spinner","OfficeFabric/Utilities","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.LoadingIndicatorComponent=void 0;var e=750,o=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._showSpinner=function(){i.setState({showLoadingIndicator:!0})},i._async=new u.Async,i.state={showLoadingIndicator:!1},i}return __extends(t,n),t.prototype.render=function(){return this.state.showLoadingIndicator?i.createElement(r.Spinner,{label:f.LinkedArtifacts_Loading}):null},t.prototype.componentDidMount=function(){this._timeoutId=this._async.setTimeout(this._showSpinner,e)},t.prototype.componentWillUnmount=function(){this._timeoutId&&(this._async.clearTimeout(this._timeoutId),this._timeoutId=null)},t}(i.Component);t.LoadingIndicatorComponent=o});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/ZeroDataComponent",["require","exports","react"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.ZeroDataComponent=void 0;var r=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var t=this.props.message,n;return this.props.action&&(n=i.createElement("div",{className:"la-zero-data-action"},i.createElement("button",{className:"la-action-button",onClick:this._onClickAction.bind(this)},this.props.action.actionMessage))),i.createElement("div",{className:"la-zero-data-container"},i.createElement("div",{className:"la-zero-data"},t),n)},t.prototype._onClickAction=function(n){return this.props.action&&this.props.action.actionCallback?this.props.action.actionCallback()?!0:(n.preventDefault(),!1):!0},t}(i.Component);t.ZeroDataComponent=r});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/MessageComponent",["require","exports","react","VSS/Diag","VSS/Controls/Notifications"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.MessageComponent=void 0;var f=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){if(!this.props.message||!this.props.message.text)return null;return(typeof this.props.message.text=="string")?i.createElement("div",{className:"la-message"},i.createElement("span",{className:"la-message-icon icon bowtie-icon "+this._getIconClass()}),i.createElement("div",{className:"la-message-text"},this.props.message.text)):null},t.prototype._getIconClass=function(){switch(this.props.message.type){case u.MessageAreaType.Error:return"bowtie-status-error";case u.MessageAreaType.Warning:return"bowtie-status-warning";case u.MessageAreaType.Info:default:return"bowtie-status-info"}},t}(i.Component);t.MessageComponent=f});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/MainComponent",["require","exports","react","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Interfaces","VSS/Flux/AsyncLoadedComponent","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/LinksListComponent","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/LoadingIndicatorComponent","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/ZeroDataComponent","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/MessageComponent"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.MainComponent=void 0;var l=function(){return i.createElement("div",null,r.Loading)},a=e.getAsyncLoadedComponent(["Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/LinksGridComponent"],function(n){return n.LinksGridComponent},function(){return i.createElement(l,null)}),v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._onDeleteLink=function(){r._element&&r._element.focus()},r.state=r.props.store.getState(),r}return __extends(t,n),t.prototype.componentDidMount=function(){this._storeListenerDelegate=this._onStoreChanged.bind(this);this.props.store.addChangedListener(this._storeListenerDelegate);this.props.onRender()},t.prototype.componentWillUnmount=function(){this.props.store.removeChangedListener(this._storeListenerDelegate);this._storeListenerDelegate=null},t.prototype.componentDidUpdate=function(){this.props.onRender()},t.prototype.render=function(){var p=this,n=null,r=null,e;if(this.state.linkedArtifactGroups.length===0&&this.state.fetchingDisplayData===f.FetchingDisplayData.Done&&this.state.fetchingLinks===u.FetchingLinks.Done){if(e=this.state.displayOptions.zeroDataOptions.zeroDataExperienceViewMode,e!==u.ZeroDataExperienceViewMode.Hidden){var t=this.state.displayOptions.zeroDataOptions,l=t.message,v=t.action,y=t.onRenderZeroData;n=y?y(l,v):i.createElement(h.ZeroDataComponent,{action:v,message:l})}}else n=this.state.displayOptions.viewMode===u.ViewMode.List?i.createElement(o.LinksListComponent,{actionsCreator:this.props.actionsCreator,linkedArtifactGroups:this.state.linkedArtifactGroups,columns:this.props.columns,displayOptions:this.state.displayOptions,hostArtifact:this.state.hostArtifact}):i.createElement(a,{actionsCreator:this.props.actionsCreator,linkedArtifactGroups:this.state.linkedArtifactGroups,columns:this.props.columns,sortColumns:this.state.sortColumns,displayOptions:this.state.displayOptions,onDeleteLink:this._onDeleteLink,hostArtifact:this.state.hostArtifact});return(this.state.fetchingDisplayData===f.FetchingDisplayData.InProgress||this.state.fetchingLinks===u.FetchingLinks.InProgress)&&(r=i.createElement(s.LoadingIndicatorComponent,null)),i.createElement("div",{className:"la-main-component",tabIndex:-1,ref:function(n){p._element=n}},i.createElement(c.MessageComponent,{message:this.state.message}),r,n)},t.prototype._onStoreChanged=function(){this.setState(this.props.store.getState())},t}(i.Component);t.MainComponent=v});

define("Presentation/Scripts/TFS/Controls/LinkedArtifacts/Control",["require","exports","react","VSS/Diag","VSS/Utils/Core","VSS/Utils/Array","VSS/Utils/String","VSS/Telemetry/Services","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Flux/Store","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Flux/Actions","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Flux/ActionsCreator","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Logic/Filtering","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Components/MainComponent","VSS/LoaderPlugins/Css!Controls/LinkedArtifacts/LinkedArtifacts"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){Object.defineProperty(t,"__esModule",{value:!0});t.LinkedArtifactsControl=void 0;var y=function(n){function t(t){var i=__construct(this,n,[t]),f,u,e;for(f in i)i.hasOwnProperty(f)&&(this[f]=i[f]);return u=new c.ActionsHub,e=new a.ArtifactFilterHelper(i.props.linkTypeRefNames,i.props.artifactSubTypeFilters),i._store=new h.LinkedArtifactsStore(u,i.props.linkTypeRefNames,i.props.sortColumns,i.props.viewOptions,i.props.gridViewOptions,i.props.zeroDataOptions,i.props.readOnly,null,i.props.artifactPageSize),i._actionsCreator=new l.ActionsCreator(i.props.tfsContext,u,i._getColumns(),e,i.props.cache),u.removeLinkedArtifact.addListener(i._onRemoveArtifact.bind(i)),u.changeLinkedArtifactComment.addListener(i._onChangedLinkComment.bind(i)),i.props.linkedArtifacts&&i.setLinkedArtifacts(i.props.linkedArtifacts,i.props.hostArtifact),i}return __extends(t,n),t.prototype.componentWillReceiveProps=function(n){n&&n.linkedArtifacts&&this.setLinkedArtifacts(n.linkedArtifacts,n.hostArtifact)},t.prototype.setLinkedArtifacts=function(n,t){this._actionsCreator.setLinks(n,t)},t.prototype.invalidateLinkedArtifact=function(n){this._actionsCreator.invalidateLinkedArtifact(n)},t.prototype.setViewOptions=function(n){this._actionsCreator.changeViewOptions(n)},t.prototype.setReadOnly=function(n){this._actionsCreator.changeReadOnly(n)},t.prototype.setZeroDataOptions=function(n){this._actionsCreator.changeZeroDataOptions(n)},t.prototype.setFetchingLinks=function(n){this._actionsCreator.changeFetchingLinks(n.fetchingLinks)},t.prototype.setMessage=function(n,t){this.setMessage(n,t)},t.prototype.clearMessage=function(){this._actionsCreator.clearMessage()},t.prototype.render=function(){return i.createElement(v.MainComponent,{store:this._store,actionsCreator:this._actionsCreator,columns:this._getColumns(),onRender:this._onRender.bind(this),ref:"element"})},t.prototype._onRemoveArtifact=function(n){var t=this;this._store.getState().displayOptions.readOnly||this.props.onRemoveLinkedArtifact&&u.delay(null,0,function(){t.props.onRemoveLinkedArtifact(n.linkedArtifactToRemove)})},t.prototype._onChangedLinkComment=function(n){var t=this;this._store.getState().displayOptions.readOnly||(this.props.onChangeLinkedArtifactComment&&u.delay(null,0,function(){t.props.onChangeLinkedArtifactComment(n.linkedArtifactToChange,n.newComment)}),o.publishEvent(new o.TelemetryEventData(s.LINKED_ARTIFACTS_CUSTOMER_INTELLIGENCE_AREA,"editLinkComment",{linkType:n.linkedArtifactToChange.linkTypeDisplayName,commentLength:n.newComment.length})))},t.prototype._getColumns=function(){var n=this.props&&this.props.columns||t.DEFAULT_COLUMNS,i=f.findIndex(n,function(n){return e.equals(n.refName,s.InternalKnownColumns.Link.refName,!0)});return i>0?(n.splice(i,1),n.unshift(s.InternalKnownColumns.Link)):i===-1&&n.unshift(s.InternalKnownColumns.Link),n},t.prototype._onRender=function(){this.props.onRender&&this.props.onRender()},t.DEFAULT_COLUMNS=[s.InternalKnownColumns.State,s.InternalKnownColumns.LastUpdate,s.InternalKnownColumns.Comment],t}(i.Component);t.LinkedArtifactsControl=y});

define("WorkItemTracking/Scripts/Form/Models",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.PageLayoutMode=t.PageType=void 0,function(n){n[n.custom=1]="custom";n[n.history=2]="history";n[n.links=3]="links";n[n.attachments=4]="attachments";n[n.header=5]="header"}(i=t.PageType||(t.PageType={})),function(n){n[n.firstColumnWide=1]="firstColumnWide";n[n.equalColumns=2]="equalColumns"}(r=t.PageLayoutMode||(t.PageLayoutMode={}))});

define("WorkItemTracking/Scripts/Extensions/TFS.WorkItemTracking.Extensions",["require","exports","q","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Service","VSS/Context","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u,f,e,o,s){var h,c;Object.defineProperty(t,"__esModule",{value:!0});t.ContributionService=t.Contributions=void 0,function(n){n.WORK_WEB="ms.vss-work-web.";n.WORKITEM_FORM_CONTRIBUTION="work-item-form";n.WORKITEM_FORM_CONTRIBUTION_SERVICE=n.WORK_WEB+n.WORKITEM_FORM_CONTRIBUTION;n.WORKITEM_FORM_SERVICE_CONTRIBUTION_TYPE=n.WORK_WEB+"work-item-notifications"}(h=t.Contributions||(t.Contributions={}));c=function(){function n(){}return n.getServiceContributions=function(t){return n._getServiceContributions(t)},n.getContribution=function(n){return f.getService(u.ExtensionService).getContribution(n)},n.getControlContributionInstance=function(n,t){return n.getRegisteredInstance(t,e.getDefaultWebContext()).then(function(i){return{host:n,objectId:t,contribution:null,uri:null,source:i}},function(){throw new Error(o.format(s.CannotGetRegisteredInstance,t));})},n._getServiceContributions=function(t){return t&&t.length?f.getService(u.ExtensionService).getContributionsForTargets(t).then(function(t){var r=i.defer(),u=[];return t.forEach(function(t){if(o.ignoreCaseComparer(t.type,h.WORKITEM_FORM_SERVICE_CONTRIBUTION_TYPE)===0){var i=n._getServiceContributionWithSource(t);i&&u.push(i)}}),i.allSettled(u).then(function(n){var t=[];n.forEach(function(n){n.value&&t.push(n.value)});r.resolve(t)},r.reject),r.promise}):i.resolve([])},n._getServiceContributionWithSource=function(t){return n._getContributionWithSource(t,function(n,t,i){return r.getBackgroundHost(n).then(function(r){return r.getRegisteredInstance(t,e.getDefaultWebContext()).then(function(u){return{host:r,objectId:t,contribution:n,uri:i,source:u}},function(){throw new Error(o.format(s.CannotGetRegisteredInstance,t));})})})},n._getContributionWithSource=function(t,r){var f=t.id||"",h;if(f&&t.properties.uri)return h=u.ExtensionHelper.resolveUriTemplateProperty(t,e.getDefaultWebContext()),i.timeout(h.then(function(n){return r(t,f,n)}),n._contributionSourceTimeout,o.format(s.ContributionTimedOut,f));throw new Error(o.format(s.MissingUri,f));},n._contributionSourceTimeout=1e4,n}();t.ContributionService=c});

define("WorkItemTracking/Scripts/Form/Events",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.FormEvents=void 0;var i="VSS.WorkItemTracking.Form.Page.Activated",r=function(){function n(){}return n.GroupExpandStateChangedEvent=function(){return n.GroupExpandedEventKey},n.LayoutResizedEvent=function(t){return"".concat(n.LayoutResizedEventKey,".#").concat(t)},n.PageActivated=function(n,t){return"".concat(i,".#").concat(n,".#").concat(t)},n.ControlResizedEvent=function(){return n.ControlResizedEventKey},n.ControlVisibilityChangedEvent=function(){return n.ControlVisibilityChangedKey},n.GroupExpandedEventKey="VSS.WorkItemTracking.Form.Group.ExpandStateChanged",n.LayoutResizedEventKey="VSS.WorkItemTracking.Layout.Resized",n.ControlResizedEventKey="VSS.WorkItemTracking.Control.Resized",n.ControlVisibilityChangedKey="VSS.WorkItemTracking.Form.Control.VisibilityChanged",n}();t.FormEvents=r});

define("WorkItemTracking/Scripts/Form/Contributions",["require","exports","VSS/Contributions/Controls","VSS/Events/Services","WorkItemTracking/Scripts/Extensions/TFS.WorkItemTracking.Extensions","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Form/Events","VSS/Utils/UI","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Controls/Notifications","VSS/Controls","VSS/Service","WorkItemTracking/Scripts/Form/UserLayoutSettings"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function y(n,t,o,a,v,y,b){var k=function(n){window.console&&window.console.warn&&window.console.warn(n||f.ContributionNotFound);s.publishEvent(new s.TelemetryEventData(h.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"WorkItem.ContributionNotFound",{id:t}));l.BaseControl.createIn(c.MessageAreaControl,a,{message:{header:n||f.ContributionNotFound,type:c.MessageAreaType.Error},closeable:!1,showIcon:!0,showDetailsLink:!1})},d;if(v)a.on(i.ExternalContentHostEvents.EXTENSION_HOST_RESIZED,function(n,t){t&&t.height&&a.height(t.height);r.getService().fire(e.FormEvents.ControlResizedEvent(),null)});return b=b||{},b.slowWarningDurationMs=p,b.maxHandshakeDurationMs=w,d=i.createExtensionHost(a,t,__assign(__assign({},y),{instanceId:"work-item-form-contribution-".concat(o)}),undefined,undefined,undefined,undefined,undefined,b),d.then(function(i){i&&n.addPromise(u.ContributionService.getControlContributionInstance(i,t))},k).catch(k)}function b(n,t,i){var r=$(o.domElem("div","page-extension-container"));return t&&t.contribution&&t.contribution.contributionId&&y(n,t.contribution.contributionId,t.contribution.layoutInstanceId,r,!1,undefined,{callbacks:i}),r}function k(n,t,r){var u=$(o.domElem("div","group-extension-container")),f;return t&&t.contribution&&t.contribution.contributionId&&(f=t.height||t.contribution.height,f&&u.height(f),y(n,t.contribution.contributionId,t.contribution.layoutInstanceId,u,!0,undefined,{resizeOptions:i.ResizeOptions.FixedWidth,callbacks:r})),u}function d(n,t,r){var u=$(o.domElem("div","control-extension-container")),s,f,e;return u.data("contribution",t.contribution),t&&t.contribution&&t.contribution.contributionId&&(t.label&&(s=$(o.domElem("div","workitemlabel label-control")).appendTo(u),s.append($(o.domElem("label","workitemcontrol-label")).text(t.label))),f=$(o.domElem("div","control-extension-content")).appendTo(u),e=t.height||t.contribution.height,e&&f.height(e),y(n,t.contribution.contributionId,t.contribution.layoutInstanceId,f,!0,{witInputs:t.contribution.inputs,defaultHeight:f.height(),showFieldBorder:a.getService(v.WorkItemFormUserLayoutSettingsService).fieldChromeBorder},{resizeOptions:i.ResizeOptions.FixedWidth,callbacks:r})),u}function g(n){return n&&n.isContribution}Object.defineProperty(t,"__esModule",{value:!0});t.isContribution=t.createControlContribution=t.createGroupContribution=t.createPageContribution=void 0;var p=3e4,w=2e4;t.createPageContribution=b;t.createGroupContribution=k;t.createControlContribution=d;t.isContribution=g});

define("WorkItemTracking/Scripts/Form/ContributionLoadedCallbacks",["require","exports","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Service","VSS/Contributions/Services"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.ContributionLoadedCallbacks=void 0;var e=function(){function n(n){var c=this,i,r,o,l,u,s,t,f,h,e;if(this.page=n,this.startTime=(new Date).getTime(),this.formContributions=[],this.contributionLookup={},i=function(n){c.formContributions.push(n.event);var t=n.formObject.id;c.contributionLookup[t]=n},n.contribution){i({event:{type:"page",id:n.contribution.contributionId,time:-1,status:"pending"},formObject:n});return}for(r=0,o=n.sections;r<o.length;r++)for(l=o[r],u=0,s=l.groups;u<s.length;u++){if(t=s[u],t.contribution){i({event:{type:"group",id:t.contribution.contributionId,time:-1,status:"pending"},formObject:t});continue}for(f=0,h=t.controls;f<h.length;f++)e=h[f],e.contribution&&i({event:{type:"control",id:e.contribution.contributionId,time:-1,status:"pending"},formObject:e})}}return n.prototype.getCallBacks=function(n){var f=this,u=this.contributionLookup[n.id].event,t=function(n){return __awaiter(f,void 0,void 0,function(){var t,f;return __generator(this,function(e){switch(e.label){case 0:return(u.status=n,u.time=(new Date).getTime()-this.startTime,!(this.formContributions.filter(function(n){var t=n.status;return t==="pending"}).length===0))?[3,2]:[4,this.getToolbarContributions()];case 1:t=e.sent();f=this.formContributions;i.publishEvent(new i.TelemetryEventData(r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,r.WITCustomerIntelligenceFeature.WI_FORM_CONTRIBUTION,{toolbarContributions:t,formContributions:f}));e.label=2;case 2:return[2]}})})};return{failure:function(){return t("failure")},success:function(){return t("success")},slow:function(){return t("slow")}}},n.prototype.getToolbarContributions=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){switch(t.label){case 0:return[4,u.getService(f.ExtensionService).queryContributions(["ms.vss-work-web.work-item-context-menu","ms.vss-work-web.work-item-context-menu-owp","ms.vss-work-web.work-item-toolbar-menu"],f.ContributionQueryOptions.IncludeDirectTargets)];case 1:return n=t.sent(),[2,n.map(function(n){return{id:n.id,type:n.type}})]}})})},n}();t.ContributionLoadedCallbacks=e});

define("WorkItemTracking/Scripts/Form/Tabs",["require","exports","VSS/Controls","WorkItemTracking/Scripts/Form/Models","VSS/Utils/UI","VSS/Utils/String","VSS/Controls/Menus","VSS/Events/Services","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/WIFormCIDataHelper","WorkItemTracking/Scripts/Form/Contributions","WorkItemTracking/Scripts/Utils/WorkItemControlsActions","VSS/Controls/PopupContent","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Form/ContributionLoadedCallbacks"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var p,k,w,b;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemFormTab=t.WorkItemFormTabEvents=t.WorkItemFormTabsControl=void 0;p=o.getService();k=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onToolbarItemClickCallback=function(n){if(n){var t=n.get_commandSource()._item,i=t.tab;i._element.click()}},i._workItemFormResizedCallback=function(){i.resize()},i._tabsWrapper=$("<ul />").attr("role","tablist"),i._tabs=[],i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"work-item-form-tabs"},t))},t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._element.append(this._tabsWrapper);this._buildTabDropDownToolBar();this._element.keydown(function(n){t._onKeyDown(n)});p.attachEvent(l.WorkItemActions.WORKITEM_MAXIMIZE_STATE_CHANGED,this._workItemFormResizedCallback)},t.prototype.resize=function(){var i=this,u=this._getAvailableWidth(),t=[],n;this._toolbarContainer.show();this._toolbarContainer.css("display","inline-block");n=this._toolbarContainer[0].getBoundingClientRect().width;n+=this._activeTab?this._activeTab.width():0;$.each(this._tabs,function(t,u){u!==i._activeTab&&u.page.pageType!==r.PageType.custom&&(u.show(),n+=u.width())});$.each(this._tabs,function(f,e){e!==i._activeTab&&e.page.pageType===r.PageType.custom&&(e.show(),n+=e.width(),n>=u&&(n-=e.width(),e.hide(),t.push(e)))});t.length>0?this._updateToolbarItems(t):this._toolbarContainer.hide()},t.prototype.getTabs=function(){return this._tabs},t.prototype.setActiveTab=function(n){for(var r,i=0;i<this._tabs.length;i++)r=this._tabs[i],r.formGrid.hide(),r.setSelected(!1),r.setTabPosition(i+1,this._tabs.length);n.setSelected(!0);this._activeTab=n;this.resize();p.fire(t.TAB_ACTIVATED_EVENT,this);h.WIFormCIDataHelper.workItemTabClick(n.page.label,{})},t.prototype.addTab=function(n,t,r,u){var e={pageIndex:t,page:n,renderer:u,formGrid:r,tabsControl:this},f=i.BaseControl.createIn(b,this._tabsWrapper,e);return this._tabs.push(f),this._tabsWrapper.append(this._toolbarContainer),f},t.prototype.getResponsiveToolbarItems=function(n){var t=[],i=[];return $.each(n||[],function(n,i){i.page.pageType!==r.PageType.custom?t.push({id:i.page.label,showText:!0,text:i.page.label,title:i.page.label,hidden:!1,tab:i,icon:i.getIconName()}):t.push({id:i.page.label,showText:!0,text:i.page.label,title:i.page.label,hidden:!1,tab:i})}),i.push({id:"actions",idIsAction:!1,icon:"bowtie-icon bowtie-ellipsis",hideDrop:!0,showText:!1,childItems:t,extraOptions:{align:"right-bottom"},ariaLabel:v.AriaLabelForActions}),i},t.prototype.getActiveTab=function(){return this._activeTab},t.prototype.getToolbar=function(){return this._toolbar},t.prototype._dispose=function(){var t,i,r;if(p.detachEvent(l.WorkItemActions.WORKITEM_MAXIMIZE_STATE_CHANGED,this._workItemFormResizedCallback),this._tabs){for(t=0,i=this._tabs;t<i.length;t++)r=i[t],r.dispose();this._tabs=null;this._activeTab=null}n.prototype._dispose.call(this)},t.prototype.navigateTabs=function(n){var t=this.getTabs(),i=this,u,f;if(t&&t.length>0)switch(n){case v.KeyboardShortcutDescription_LeftTab:u=t.indexOf(this.getActiveTab());u>0?this.setActiveTab(t[u-1]):this.setActiveTab(t[t.length-1]);this.getActiveTab().getElement().click();break;case v.KeyboardShortcutDescription_RightTab:f=t.indexOf(this.getActiveTab());this.getActiveTab().focus();f<t.length-1?this.setActiveTab(t[f+1]):this.setActiveTab(t[0]);this.getActiveTab().getElement().click();break;case v.KeyboardShortcutDescription_HistoryTab:t.some(function(n){if(n.page.pageType==r.PageType.history)return i.setActiveTab(n),!0});break;case v.KeyboardShortcutDescription_LinksTab:t.some(function(n){if(n.page.pageType==r.PageType.links)return i.setActiveTab(n),!0});break;case v.KeyboardShortcutDescription_AttachmentsTab:t.some(function(n){if(n.page.pageType==r.PageType.attachments)return i.setActiveTab(n),!0})}},t.prototype._getAvailableWidth=function(){var n=0;return this._options.getAvailableWidth&&(n=this._options.getAvailableWidth(),n=n-t.FORM_TAB_MARGIN_RIGHT-t.FORM_TAB_BUFFER,n=n>0?n:0),n},t.prototype._buildTabDropDownToolBar=function(){this._toolbarContainer=$("<li />").addClass("work-item-form-tabs-toolbar").attr("role","list");this._element.append(this._toolbarContainer);this._toolbar=i.BaseControl.createIn(e.MenuBar,this._toolbarContainer,{hideTimeout:100,items:this.getResponsiveToolbarItems(this._tabs),executeAction:this._onToolbarItemClickCallback});this._tabsWrapper.append(this._toolbarContainer)},t.prototype._onKeyDown=function(n){var t;n.ctrlKey||n.keyCode!==u.KeyCode.LEFT||(t=this._tabs.indexOf(this._activeTab),t>0&&(this.setActiveTab(this._tabs[t-1]),n.preventDefault()));n.ctrlKey||n.keyCode!==u.KeyCode.RIGHT||(t=this._tabs.indexOf(this._activeTab),t>-1&&t<this._tabs.length-1&&(this.setActiveTab(this._tabs[t+1]),n.preventDefault()))},t.prototype._updateToolbarItems=function(n){this._toolbar.updateItems(this.getResponsiveToolbarItems(n))},t.TAB_ACTIVATED_EVENT="work-item-form-tab-activated",t.FORM_TAB_MARGIN_RIGHT=17,t.FORM_TAB_BUFFER=10,t}(i.Control);t.WorkItemFormTabsControl=k;w=function(){function n(){}return n.WorkItemFormTabSelected="wiTabSelected",n}();t.WorkItemFormTabEvents=w;b=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.tabLabel=$("<span />").addClass("page-button"),i._pageIndex=t.pageIndex,i.formGrid=t.formGrid,i.page=t.page,i._tabsControl=t.tabsControl,i.renderer=t.renderer,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"work-item-form-tab",tagName:"li"},t))},t.prototype.getIconName=function(){switch(this.page.pageType){case r.PageType.history:return"bowtie-icon bowtie-navigate-history";case r.PageType.links:return"bowtie-icon bowtie-link";case r.PageType.attachments:return"bowtie-icon bowtie-attach"}return""},t.prototype.getCountingTabClass=function(){switch(this.page.pageType){case r.PageType.links:return"link-count";case r.PageType.attachments:return"attachment-count"}return""},t.prototype.setIsValid=function(n){this._element.toggleClass("invalid",!n);n?this._element.attr("aria-label",this.page.label):this._element.attr("aria-label",f.format(s.TabErrorAriaLabel,this.page.label))},t.prototype.initialize=function(){var e=this,t,o,h;if(n.prototype.initialize.call(this),this._element.attr("tabindex",0),t=i.getId(),this._element.attr("role","tab"),this.tabLabel.appendTo(this._element),this.tabLabel.attr("id",t),o=i.getId(),h=$("<span/>").addClass(this.getCountingTabClass()).appendTo(this._element).attr("id",o),this.page.pageType!==r.PageType.custom){this.tabLabel.addClass("icon");this.tabLabel.addClass(this.getIconName());h.addClass("icon-tab");switch(this.page.label){case s.WorkItemLogControlHistoryHeader:case s.WorkItemLogControlAttachmentsHeader:case s.WorkItemLogControlLinksHeader:a.RichContentTooltip.add(f.format(s.TabHeaderTooltip,this.page.label),this._element)}this._element.addClass("icon-tab")}else this.tabLabel.text(this.page.label),this._element.attr("aria-labelledby",t);this.page.visible||this.hide();this._element.click(function(){e._tabsControl.setActiveTab(e)});u.accessible(this._element)},t.prototype.show=function(){this.page&&this.page.visible===!0&&(this._element.show(),this._element.css("display","inline-block"))},t.prototype.hide=function(){this._element.hide()},t.prototype.width=function(){return this._element[0].getBoundingClientRect().width},t.prototype.setSelected=function(n){this._setSelectedState(n);n===!0&&(this._initializeTab(),this._element.focus(),this.formGrid.show(),this.formGrid.adjustGridSections(),this.formGrid.getElement().find(".work-item-control").trigger(w.WorkItemFormTabSelected),this.show())},t.prototype.setTabPosition=function(n,t){this._element.attr("aria-posinset",n);this._element.attr("aria-setsize",t)},t.prototype.setTabContentRenderer=function(n){this._tabContentRenderer=n},t.prototype.isBodyDrawn=function(){return $(".control",this.formGrid.getElement()).length>0},t.prototype._initializeTab=function(){if(!this._isInitialized&&(this._isInitialized=!0,this._tabContentRenderer&&this._tabContentRenderer(),this.page.isContribution)){var n=new y.ContributionLoadedCallbacks(this.page).getCallBacks(this.page);this.formGrid._element.append(c.createPageContribution(this.renderer.getContributionManager(),this.page,n))}},t.prototype._setSelectedState=function(n){n===!0?(this._element.attr("aria-selected","true"),this._element.addClass("selected-tab"),this._element.attr("tabindex","0")):(this._element.attr("aria-selected","false"),this._element.removeClass("selected-tab"),this._element.removeAttr("tabindex"))},t.prototype.dispose=function(){this._options=null;this.renderer=null;n.prototype.dispose.call(this)},t}(i.BaseControl);t.WorkItemFormTab=b});

define("WorkItemTracking/Scripts/Controls/Links/Interfaces",["require","exports"],function(n,t){var r,u,f,e,i;Object.defineProperty(t,"__esModule",{value:!0});t.WebLayoutLinksControlXmlValues=t.WebLayoutLinksControlLinkFilterKind=t.WebLayoutLinksControlColumnTruncation=t.WebLayoutLinksControlZeroDataExperience=t.WebLayoutLinksControlViewMode=void 0,function(n){n[n.Dynamic=0]="Dynamic";n[n.List=1]="List";n[n.Grid=2]="Grid"}(r=t.WebLayoutLinksControlViewMode||(t.WebLayoutLinksControlViewMode={})),function(n){n[n.Default=0]="Default";n[n.Development=1]="Development";n[n.CallToAction=2]="CallToAction"}(u=t.WebLayoutLinksControlZeroDataExperience||(t.WebLayoutLinksControlZeroDataExperience={})),function(n){n[n.Auto=0]="Auto";n[n.Off=1]="Off"}(f=t.WebLayoutLinksControlColumnTruncation||(t.WebLayoutLinksControlColumnTruncation={})),function(n){n[n.External=0]="External";n[n.WorkItem=1]="WorkItem"}(e=t.WebLayoutLinksControlLinkFilterKind||(t.WebLayoutLinksControlLinkFilterKind={}));i=function(){function n(){}return n.IncludeAllLinks="System.Links.IncludeAll",n.ForwardLinkSuffix="-Forward",n.ReverseLinkSuffix="-Reverse",n}();t.WebLayoutLinksControlXmlValues=i});

define("WorkItemTracking/Scripts/Controls/Links/WebLayoutLinksControlOptionsReader",["require","exports","WorkItemTracking/Scripts/Controls/Links/Interfaces","VSS/Utils/String"],function(n,t,i,r){var o;Object.defineProperty(t,"__esModule",{value:!0});t.WebLayoutLinksControlOptionsReader=t.WebLayoutLinksControlParsedDefaultValues=void 0;var f=function(){function n(){}return n.ViewMode="ViewMode",n.ZeroDataExperience="ZeroDataExperience",n.ShowCallToAction="ShowCallToAction",n.FilterType="Type",n.WorkItemType="WorkItemType",n.ColumnName="Name",n.ColumnTruncation="Truncation",n.WorkItemTypeFiltersScope="WorkItemTypeFiltersScope",n.GroupLinks="GroupLinks",n.PageSize="PageSize",n}(),e=function(){function n(){}return n.ListViewOptions="ListViewOptions",n.Columns="Columns",n.LinkFilters="LinkFilters",n.WorkItemLinkFilter="WorkItemLinkFilter",n.ExternalLinkFilter="ExternalLinkFilter",n.WorkItemTypeFilters="WorkItemTypeFilters",n.WorkItemTypeFilter="Filter",n.Column="Column",n}(),u=function(){function n(){}return n.viewMode=i.WebLayoutLinksControlViewMode.Dynamic,n.zeroDataExperience=i.WebLayoutLinksControlZeroDataExperience.Default,n.groupLinks=!0,n.pageSize=6,n.showCallToActions=!1,n.columnTruncation=i.WebLayoutLinksControlColumnTruncation.Auto,n.ColumnNames=null,n.columns={columnNames:n.ColumnNames,truncation:n.columnTruncation},n.LinkFilters=null,n.ListViewOptions={groupLinks:n.groupLinks,pageSize:n.pageSize},n.WorkItemTypeFilters=null,n.ScopeWorkItemTypeFiltersToProject=!1,n}();t.WebLayoutLinksControlParsedDefaultValues=u;o=function(){function n(){}return n.parseLinksControlOptionsXml=function(t){var c=t,h=c.childNodes,o=n.getDefaultLinksControlOptions(),s;return h&&h.length&&$.each(h,function(t,r){switch(r.nodeName){case e.ListViewOptions:o.listViewOptions={groupLinks:n._convertStringToBoolean(r.getAttribute(f.GroupLinks),u.groupLinks),pageSize:Number(r.getAttribute(f.PageSize))||u.pageSize};break;case e.Columns:var s=r.getAttribute(f.ColumnTruncation);o.columns={truncation:i.WebLayoutLinksControlColumnTruncation[s]||u.columnTruncation,columnNames:n._getColumnNames(r)};break;case e.LinkFilters:o.linkFilters=n._parseLinkFilters(r);break;case e.WorkItemTypeFilters:o.workItemTypeFilters=n._parseWorkItemTypeFilters(r,o.scopeWorkItemTypesToProject)}}),s=function(n){return c.getAttribute(n)},o.viewMode=i.WebLayoutLinksControlViewMode[s(f.ViewMode)]||u.viewMode,o.zeroDataExperience=n._parseZeroDataExperience(s(f.ZeroDataExperience)),o.showCallToAction=this._convertStringToBoolean(s(f.ShowCallToAction),u.showCallToActions),o.scopeWorkItemTypesToProject=r.ignoreCaseComparer(s(f.WorkItemTypeFiltersScope),"project")===0||u.ScopeWorkItemTypeFiltersToProject,o},n._parseZeroDataExperience=function(n){var t=i.WebLayoutLinksControlZeroDataExperience[n];return t!=null?t:u.zeroDataExperience},n.getDefaultLinksControlOptions=function(){return{linkFilters:u.LinkFilters,columns:u.columns,workItemTypeFilters:u.WorkItemTypeFilters,listViewOptions:u.ListViewOptions,scopeWorkItemTypesToProject:u.ScopeWorkItemTypeFiltersToProject,showCallToAction:u.showCallToActions,viewMode:u.viewMode,zeroDataExperience:u.zeroDataExperience}},n._parseLinkFilters=function(n){var t=null;return $.each(n.childNodes,function(n,r){var o,u;(r.nodeName===e.ExternalLinkFilter||r.nodeName===e.WorkItemLinkFilter)&&(o=$.trim(r.getAttribute(f.FilterType)),t||(t=[]),u={linkFilterType:o},t.push(u),u.linkFilterKind=r.nodeName===e.ExternalLinkFilter?i.WebLayoutLinksControlLinkFilterKind.External:i.WebLayoutLinksControlLinkFilterKind.WorkItem)}),t},n._parseWorkItemTypeFilters=function(n){var t=[];return n.childNodes&&n.childNodes.length&&$.each(n.childNodes,function(n,i){i.nodeName===e.WorkItemTypeFilter&&t.push($.trim(this.getAttribute(f.WorkItemType)))}),t},n._getColumnNames=function(n){var t=null;return n.childNodes&&n.childNodes.length&&$.each(n.childNodes,function(n,i){i.nodeName===e.Column&&(t||(t=[]),t.push($.trim(i.getAttribute(f.ColumnName))))}),t},n._convertStringToBoolean=function(n,t){var i=t;return r.localeIgnoreCaseComparer(n,"true")===0?i=!0:r.localeIgnoreCaseComparer(n,"false")===0&&(i=!1),i},n}();t.WebLayoutLinksControlOptionsReader=o});

define("WorkItemTracking/Scripts/Utils/FormRendererHelpers",["require","exports","VSS/Utils/String","VSS/Utils/Array","WorkItemTracking/Scripts/Controls/Links/WebLayoutLinksControlOptionsReader","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f){return function(){function n(){}return n.readControlAttributes=function(n){var r=n.attributes,t={};return r&&r.length&&$.each(r,function(){if(this.name&&typeof this.name=="string")switch(this.name.toLowerCase()){case"type":t.controlType=this.nodeValue;break;case"name":t.instanceName=this.nodeValue;break;case"fieldname":t.fieldName=this.nodeValue;break;case"label":t.label=this.nodeValue;break;case"labelposition":t.labelPosition=this.nodeValue;break;case"dock":t.dock=this.nodeValue;break;case"padding":t.padding=this.nodeValue;break;case"margin":t.margin=this.nodeValue;break;case"readonly":t.readOnly=i.ignoreCaseComparer(this.nodeValue,"true")?this.nodeValue:"True";break;case"minimumsize":t.minimumSize=this.nodeValue;break;case"numberformat":t.numberFormat=this.nodeValue;break;case"format":t.format=this.nodeValue;break;case"customformat":t.customFormat=this.nodeValue;break;case"maxlength":t.maxLength=this.nodeValue;break;case"labelfontsize":t.labelFontSize=this.nodeValue;break;case"controlfontsize":t.controlFontSize=this.nodeValue;break;case"emptytext":t.emptyText=this.nodeValue;break;case"refname":t.refName=this.nodeValue;break;case"outputlayout":t.outputLayout=this.nodeValue;break;case"limit":t.limit=this.nodeValue;break;case"height":this.nodeValue&&(t.height=this.nodeValue);break;case"commentheight":t.commentHeight=this.nodeValue;break;case"contributionid":t.contributionId=this.nodeValue}}),t},n.isReadOnlyFieldIconHidden=function(n){var t=[f.WellKnownControlNames.WebpageControl,f.WellKnownControlNames.LabelControl,f.WellKnownControlNames.HtmlControl,f.WellKnownControlNames.PlainTextControl,f.WellKnownControlNames.LinksControl,f.WellKnownControlNames.DevelopmentControl,f.WellKnownControlNames.WorkItemDiscussionControl];return r.contains(t,n,i.ignoreCaseComparer)},n.readControlOptions=function(t,i){var r=t.childNodes;r&&r.length&&$.each(r,function(){var f,t,e,r;switch(this.nodeName){case"LinksControlOptions":if(n._isLegacyLinksControlOptions(this))n._readLegacyLinksControlOptions(this,i);else for(f=u.WebLayoutLinksControlOptionsReader.parseLinksControlOptionsXml(this),t=0,e=Object.keys(f);t<e.length;t++)r=e[t],typeof i[r]=="undefined"&&(i[r]=f[r]);break;case"WebpageControlOptions":n._readWebPageControlOptions(this,i);break;case"CustomControlOptions":n._readCustomControlOptions(this,i);break;case"Link":i.labelData=[];i.labelData.push({link:n._readLinkOptions(this,i)});break;case"LabelText":n._readLabelTextOptions(this,i)}})},n._isLegacyLinksControlOptions=function(n){var t=!1;return $.each(n.childNodes,function(){if(this.nodeName==="LinkColumns")return t=!0,!0}),t},n._readLegacyLinksControlOptions=function(n,t){var f=n.childNodes,i,r,u,e;f&&f.length&&$.each(f,function(){switch(this.nodeName){case"WorkItemLinkFilters":i={filterType:this.getAttribute("FilterType")};this.childNodes&&this.childNodes.length&&(i.filters=[],$.each(this.childNodes,function(){this.nodeName==="Filter"&&i.filters.push({linkType:$.trim(this.getAttribute("LinkType")),filterOn:this.getAttribute("FilterOn")})}));t.workItemLinkFilters=i;break;case"ExternalLinkFilters":r={filterType:this.getAttribute("FilterType")};this.childNodes&&this.childNodes.length&&(r.filters=[],$.each(this.childNodes,function(){this.nodeName==="Filter"&&r.filters.push({linkType:$.trim(this.getAttribute("LinkType"))})}));t.externalLinkFilters=r;break;case"WorkItemTypeFilters":u={filterType:this.getAttribute("FilterType"),scope:this.getAttribute("Scope")};this.childNodes&&this.childNodes.length&&(u.filters=[],$.each(this.childNodes,function(){this.nodeName==="Filter"&&u.filters.push({workItemType:$.trim(this.getAttribute("WorkItemType"))})}));t.workItemTypeFilters=u;break;case"LinkColumns":e=[];this.childNodes&&this.childNodes.length&&$.each(this.childNodes,function(){this.nodeName==="LinkColumn"&&e.push({linkAttribute:this.getAttribute("LinkAttribute"),refName:$.trim(this.getAttribute("RefName"))})});t.linkColumns=e}})},n._readWebPageControlOptions=function(t,i){var r=t.childNodes;i.allowScript=t.getAttribute("AllowScript")==="true";i.reloadOnParamChange=t.getAttribute("ReloadOnParamChange")!=="false";r&&r.length&&$.each(r,function(){switch(this.nodeName){case"Link":i.link=n._readLinkOptions(this,i);break;case"Content":i.content=this.text||this.textContent}})},n._readLinkOptions=function(n){var t,i;return i={urlRoot:n.getAttribute("UrlRoot"),urlPath:n.getAttribute("UrlPath")},n.childNodes&&n.childNodes.length&&(t=[],$.each(n.childNodes,function(){var n;this.nodeName==="Param"&&(n=parseInt(this.getAttribute("Index"),10),isNaN(n)||(t[n]={value:this.getAttribute("Value"),original:this.getAttribute("Type")==="Original"}))}),i.params=t),i},n._readTextNode=function(t,i){var r;return r={},t.childNodes&&t.childNodes.length&&$.each(t.childNodes,function(){this.nodeName==="Link"?r.link=n._readLinkOptions(this,i):r.content=this.nodeValue}),r},n._readLabelTextOptions=function(t,i){var r=[];t.childNodes&&t.childNodes.length&&$.each(t.childNodes,function(){r.push(n._readTextNode(this,i))});i.labelData=r},n._readCustomControlOptions=function(n,t){t.customControlOptions=n.cloneNode(!0)},n}()});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/WorkItemControl",["require","exports","VSS/Utils/Core","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/UI","VSS/Utils/String","WorkItemTracking/Scripts/Form/Events","VSS/Events/Services","WorkItemTracking/Scripts/Utils/FormRendererHelpers","VSS/Controls/PopupContent","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/WIFormCIDataHelper","q"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){var y,p,v,w;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemControl=t.WorkItemControlEditState=void 0;y=o.getService();p=i.delegate,function(n){n[n.Editable=0]="Editable";n[n.RulesBasedReadOnly=1]="RulesBasedReadOnly";n[n.ControlBasedReadOnly=2]="ControlBasedReadOnly";n[n.WorkItemReadOnly=3]="WorkItemReadOnly"}(v=t.WorkItemControlEditState||(t.WorkItemControlEditState={}));w=function(){function n(t,i,r,u){var f=this,e;if(this.constructor===n)throw new Error("You cannot instantiate an abstract type.");this._container=t;this._controlContainer=t.parents(".control:first");this._options=__assign({},i);this._workItemType=r;this._extensions=u||[];this._readOnly=this._options.readOnly==="True";this._fieldName=this._options.fieldName;this._options.workItemLabel&&(this._workItemLabel=this._options.workItemLabel);this._options.minHeight===undefined&&(this._options.minHeight=n.DEFAULT_CONTROL_HEIGHT);e=t.parents(".witform-layout:first").data("wit-options");e&&!this._options.hideWhenReadOnlyAndEmpty&&(this._options.hideWhenReadOnlyAndEmpty=e.hideReadOnlyEmptyFields);this._onFieldChangedDelegate=p(this,this._onFieldChanged);this._init();this._container.focusout(function(){f._isFieldValueChanged&&f._workItem&&l.WIFormCIDataHelper.fieldValueChanged(f._workItem.sessionId,f._fieldName,f._options.controlType);f._isFieldValueChanged=!1})}return n.prototype.getControlId=function(){return this._options.controlId},n.prototype.getControlType=function(){return this._options.controlType},n.prototype._getFieldType=function(){var n=null;return this._fieldName&&this._workItemType&&(n=this._workItemType.getFieldDefinition(this._fieldName),n)?n.type:0},n.prototype.getFieldDefinition=function(n){var t=this._workItemType.getFieldDefinition(n);return t||(t=this.getExtensionField(n)),t},n.prototype.getExtensionField=function(n){for(var r,u=(""+n).toUpperCase(),t=null,i=0;i<this._extensions.length&&!t;i++)r=this._extensions[i],r.fields.forEach(function(n){if(n.field.referenceName.toUpperCase()===u)return t=n,!1});return t},n.prototype._getField=function(){var n=null;return this._fieldName&&this._workItem&&(n=this._workItem.getField(this._fieldName)),n},n.prototype._getFieldTextValue=function(n){return(n=n||this._getField(),n)?n.getDisplayText():""},n.prototype.isReadOnly=function(){return this.getEditState()!==v.Editable},n.prototype.getEditState=function(){var n;return this._readOnly?v.ControlBasedReadOnly:!this._workItem||this._workItem.isReadOnly()?v.WorkItemReadOnly:(n=this._getField(),n&&n.isReadOnly())?v.RulesBasedReadOnly:v.Editable},n.prototype._init=function(){this._fieldName&&(this._fieldEvents=[this._fieldName]);this._container.keydown(p(this,this._onKeyDownHandler))},n.prototype._onFieldChanged=function(){this.suppressInvalidate||this.invalidate(this._flushing);this._isFieldValueChanged=!0},n.prototype.bind=function(n,t){var i,r,u;if(this.cleanUp(),this._workItemLabel&&this._workItemLabel.bind(n),this._readOnly=t?!0:this._options.readOnly==="True",this._workItem=n,this._fieldEvents)for(i=0,r=this._fieldEvents;i<r.length;i++)u=r[i],n.attachFieldChange(u,this._onFieldChangedDelegate);this.invalidate(!1)},n.prototype.unbind=function(n){this._workItemLabel&&this._workItemLabel.unbind();this.cleanUp();!n&&this.shouldClearOnUnbind()&&this.clear()},n.prototype.shouldClearOnUnbind=function(){return!1},n.prototype.cleanUp=function(){var n,t,i;if(this._workItem){if(this._fieldEvents)for(n=0,t=this._fieldEvents;n<t.length;n++)i=t[n],this._workItem.detachFieldChange(i,this._onFieldChangedDelegate);this._workItem=null}},n.prototype.invalidate=function(){var n=this._getField(),t,i;this._options.hideWhenReadOnlyAndEmpty&&n&&(t=this._controlContainer.css("display")==="none",i={controlElement:this._controlContainer,isVisible:!t},n.isReadOnly()&&this.isEmpty()?t||(this._controlContainer.hide(),y.fire(e.FormEvents.ControlVisibilityChangedEvent(),i)):t&&(this._controlContainer.show(),y.fire(e.FormEvents.ControlVisibilityChangedEvent(),i)));n&&(this._workItemLabel&&this._workItemLabel.setFieldIsValid(n.isValid()),this._controlContainer.toggleClass("invalid",!n.isValid()));this._workItemLabel&&this._workItemLabel.invalidate();!this.isReadOnly()&&this._readOnlyContainer&&(this._readOnlyContainer.remove(),this._readOnlyContainer=null,this._readOnlyToolTip&&this._readOnlyToolTip.dispose());this._readOnlyContainer||this.getEditState()!==v.RulesBasedReadOnly&&this.getEditState()!==v.ControlBasedReadOnly||s.isReadOnlyFieldIconHidden(this._options.controlType)||this.isReadOnlyIconHidden()||this._createReadOnlyIconAndTooltip()},n.prototype.flush=function(n){if(n===void 0&&(n=!1),!this.isReadOnly()){var t=this._getField();if(t)try{this._flushing=!0;t.setValue(this._getControlValue(),!1,n)}finally{this._flushing=!1}}},n.prototype.flushSetText=function(n,t){var i,r;if(t===void 0&&(t=!1),!this.isReadOnly()&&(i=this._getField(),i))try{this._flushing=!0;r=n!==null&&n!==undefined?n:this._getControlValue();i.setValue(r,!1,t)}finally{this._flushing=!1}},n.prototype._getControlValue=function(){return null},n.prototype.clear=function(){},n.prototype.getTfsContext=function(){return this._workItem?this._workItem.store.getTfsContext():this._workItemType?this._workItemType.store.getTfsContext():r.TfsContext.getDefault()},n.prototype.dispose=function(){},n.prototype.getAvailableSpaceImmediate=function(){var n=this._container.closest(".grid-group"),r=this._container.closest(".form-grid"),t;if(!n.length||!r.length)return{width:this._container.width(),height:this._container.height()};var i=n.innerHeight()-n.height()+1,f=n.find(".tfs-collapsible-content"),u=f.position().top,e=n.hasClass("maximized-grid-group");return e?{width:n.width(),height:n.height()-u-i}:this._options.autoFitFormHeight?(t=r.height()-u-i,this._options.minHeight&&t<this._options.minHeight&&(t=this._options.minHeight),{width:n.width(),height:t}):{width:this._container.width(),height:this._container.height()-i}},n.prototype.getAvailableSpace=function(){var n=this;return a.delay(1).then(function(){return n.getAvailableSpaceImmediate()})},n.prototype.onResize=function(){this.onControlResized()},n.prototype.onControlResized=function(){},n.prototype.isEmpty=function(){var t=this._getField(),n;return t?(n=t.getValue(),n===undefined||n===null||n===""):!1},n.prototype.isReadOnlyIconHidden=function(){return this._options.isReadOnlyIconHidden},n.prototype._onKeyDownHandler=function(n){return this._workItem.isSaving()?!1:n.keyCode===u.KeyCode.BACKSPACE&&this.isReadOnly()?!1:void 0},n.prototype._createReadOnlyIconAndTooltip=function(){this._readOnlyContainer=$("<div>").disableSelection().addClass("read-only-field-icon").attr({unselectable:"on","aria-hidden":"true"}).prependTo(this._container);$("<span>").addClass("bowtie-icon bowtie-security-lock read-only-icon-span").attr("unselectable","on").appendTo(this._readOnlyContainer);this._readOnlyToolTip=h.RichContentTooltip.add(f.format(c.WorkItemControlReadOnly,this.getFieldDefinition(this._fieldName).name),this._readOnlyContainer,{useMousePosition:!0})},n.DEFAULT_CONTROL_HEIGHT=100,n}();t.WorkItemControl=w});

define("WorkItemTracking/Scripts/Controls/Links/ArtifactCache",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.SimpleWorkItemArtifactCache=void 0;var i=function(){function n(){}return n.prototype.setWorkItem=function(n){this._workItem=n},n.prototype.clear=function(){this._setMapToWorkItem(null)},n.prototype.set=function(n,t){var i=this._getMapFromWorkItem();i||(i={},this._setMapToWorkItem(i));i[n]=t},n.prototype.get=function(n){var t=this._getMapFromWorkItem();return t&&t[n]},n.prototype.invalidate=function(n){var t=this._getMapFromWorkItem();t&&delete t[n]},n.prototype._getMapFromWorkItem=function(){return this._workItem&&this._workItem.relatedData[n.WORKITEM_RELATED_KEY]},n.prototype._setMapToWorkItem=function(t){this._workItem&&(this._workItem.relatedData[n.WORKITEM_RELATED_KEY]=t)},n.WORKITEM_RELATED_KEY="linked-artifacts",n}();t.SimpleWorkItemArtifactCache=i});

define("TFS/VersionControl/Services",["require","exports","VSS/SDK/Shim"],function(n,t,i){var r,u;Object.defineProperty(t,"__esModule",{value:!0});t.VersionControlRepositoryService=t.VersionControlActionService=void 0,function(n){function t(t){return i.VSS.getService(n.fullyQualifiedContributionId,{webContext:t})}n.contributionId="code-action-service";n.fullyQualifiedContributionId="ms.vss-code-web.code-action-service";n.getService=t}(r=t.VersionControlActionService||(t.VersionControlActionService={})),function(n){function t(t){return i.VSS.getService(n.fullyQualifiedContributionId,{webContext:t})}n.contributionId="code-extension-repository-service";n.fullyQualifiedContributionId="ms.vss-code-web.code-extension-repository-service";n.getService=t}(u=t.VersionControlRepositoryService||(t.VersionControlRepositoryService={}))});

define("Presentation/Scripts/TFS/Components/AddNewItem",["require","exports","react","VSS/Diag","VSSUI/Tooltip","OfficeFabric/ContextualMenu","OfficeFabric/Utilities","VSSUI/VssIcon","VSS/LoaderPlugins/Css!Presentation/Components/AddNewItem"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.AddNewItemComponent=void 0;var s=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.state={isContextMenuOpen:!1},i}return __extends(t,n),t.prototype.render=function(){var e=this,n=this.props.items&&this.props.items.length>1,r=i.createElement("button",{className:"add-new-item-component-button"+(this.props.isDisabled?" disabled":""),ref:function(n){return e._addNewItemButtonRef=n},onClick:this._clickHandler,tabIndex:this.props.preventTabFocus?-1:0},i.createElement(o.VssIcon,__assign({},this.props.iconProps||{iconName:"math-plus-heavy",iconType:1})),this.props.isCollapsed?null:i.createElement("span",{className:t.displayTextCssClass},this.props.displayText),n?i.createElement(o.VssIcon,{iconName:"chevron-down",iconType:1}):null);return this.props.isDisabled?i.createElement("div",{className:this.props.className},i.createElement(u.TooltipHost,{content:this.props.disabledTooltip},r)):i.createElement("div",{className:this.props.className,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp},r,n&&this.state.isContextMenuOpen?i.createElement(f.ContextualMenu,{items:this.props.items,onDismiss:this._onDismiss,target:this._addNewItemButtonRef,shouldFocusOnMount:!0,directionalHint:4}):null)},t.prototype.focus=function(){this._addNewItemButtonRef&&this._addNewItemButtonRef.focus()},Object.defineProperty(t.prototype,"isMenuActive",{get:function(){return this.state.isContextMenuOpen},enumerable:!1,configurable:!0}),t.prototype.activateMenu=function(){this._setIsContextMenuOpen(!0)},t.prototype._setIsContextMenuOpen=function(n){if(!!n!=!!this.state.isContextMenuOpen&&(this.setState({isContextMenuOpen:n}),this.props.onDropdownToggled))this.props.onDropdownToggled(n)},t.prototype._onMouseDown=function(n){n.stopPropagation()},t.prototype._onMouseUp=function(n){n.stopPropagation()},t.prototype._clickHandler=function(n){if(this.props.isDisabled){n.preventDefault();n.stopPropagation();return}if(this.props.items.length>1)this._setIsContextMenuOpen(!0);else if(this.props.items[0]&&$.isFunction(this.props.items[0].onClick))this.props.items[0].onClick(n,this.props.items[0]);n.stopPropagation()},t.prototype._onDismiss=function(){this._setIsContextMenuOpen(!1)},t.iconCssClass="add-item-icon",t.iconElementCssClass="add-item-icon-element",t.displayTextCssClass="text",t.bowtieMathPlusHeavyCssClass="bowtie-icon bowtie-math-plus-heavy",t.bowtieChevronDownCssClass="bowtie-icon bowtie-chevron-down",__decorate([e.autobind],t.prototype,"_onMouseDown",null),__decorate([e.autobind],t.prototype,"_onMouseUp",null),__decorate([e.autobind],t.prototype,"_clickHandler",null),__decorate([e.autobind],t.prototype,"_onDismiss",null),t}(i.Component);t.AddNewItemComponent=s});

define("WorkItemTracking/Scripts/Controls/Links/AddParentLink",["require","exports","react","VSSUI/Link","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.AddParentLink=void 0;var f=function(n){return i.createElement("div",{className:"zero-data-action margin-bottom-8"},i.createElement("div",null,i.createElement(r.Link,{onClick:n.onClickAddParent},u.AddParentText1),i.createElement("span",null,u.AddParentText2)))};t.AddParentLink=f});

define("Presentation/Scripts/TFS/Components/DropdownButton",["require","exports","react","OfficeFabric/Button","OfficeFabric/ContextualMenu","OfficeFabric/Utilities","VSS/LoaderPlugins/Css!Presentation/Components/DropdownButton"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.DropdownButton=void 0;var e=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._resolveElement=function(n){r._element=n},r.state={isOpen:!1},r}return __extends(t,n),t.prototype.focus=function(){this._button&&this._button.focus()},t.prototype.dismissMenu=function(){},t.prototype.openMenu=function(){},t.prototype.render=function(){var n=this.props,t=n.className,e=n.buttonProps,o=n.menuItems,s=this.state.isOpen;return i.createElement("div",{className:f.css("dropdown-button",t)},i.createElement("div",{className:"dropdown-button-wrapper",ref:this._resolveElement},i.createElement(r.PrimaryButton,__assign({},e,{onClick:this._onOpen,componentRef:this._resolveButton}),this._renderButtonContent(),"\u00a0",i.createElement("span",{className:"bowtie-icon bowtie-chevron-down-light"}))),s&&i.createElement(u.ContextualMenu,{className:"bowtie-fabric",directionalHint:4,isBeakVisible:!1,items:o,gapSpace:0,onDismiss:this._onDismiss,target:this._element}))},t.prototype._renderButtonContent=function(){var n=this.props,r=n.label,t=n.onButtonContentRender;return t?t():i.createElement("span",null,r)},t.prototype._resolveButton=function(n){this._button=n},t.prototype._onOpen=function(){this.setState({isOpen:!0})},t.prototype._onDismiss=function(){this.setState({isOpen:!1})},__decorate([f.autobind],t.prototype,"_resolveButton",null),__decorate([f.autobind],t.prototype,"_onOpen",null),__decorate([f.autobind],t.prototype,"_onDismiss",null),t}(i.Component);t.DropdownButton=e});

define("WorkItemTracking/Scripts/Form/React/Components/ZeroDataComponent",["require","exports","react","OfficeFabric/Button","OfficeFabric/Fabric","Presentation/Scripts/TFS/Components/DropdownButton","OfficeFabric/Utilities","VSS/LoaderPlugins/Css!WorkItemTracking/Form/React/Components/ZeroDataComponent"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.ZeroDataComponent=void 0;var o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.focus=function(){this._button.focus()},t.prototype.render=function(){var n=this.props,t=n.buttonProps,h=n.className,o=n.menuItems,s=e.css("work-item-zero-cta",h);return o?i.createElement(u.Fabric,null,i.createElement(f.DropdownButton,{buttonProps:t,ref:this._resolveButton,menuItems:o,className:s,onButtonContentRender:this._renderButtonContent})):i.createElement(u.Fabric,null,i.createElement(r.PrimaryButton,__assign({},t,{className:s,componentRef:this._resolveButton}),this._renderButtonContent()))},t.prototype._renderButtonContent=function(){return i.createElement("span",{className:"work-item-zero-cta-label"},i.createElement("i",{className:"bowtie-icon bowtie-math-plus-light"}),this.props.label)},t.prototype._resolveButton=function(n){this._button=n},__decorate([e.autobind],t.prototype,"_renderButtonContent",null),__decorate([e.autobind],t.prototype,"_resolveButton",null),t}(i.Component),s=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.focus=function(){this._zeroDataCTA&&this._zeroDataCTA.focus()},t.prototype.render=function(){var n=this.props,f=n.label,s=n.className,h=n.iconClassName,r=n.onRenderAdditionalContent,u=n.cta,t;return r?t=r():u&&(t=i.createElement(o,__assign({},u,{ref:this._resolveCTA}))),i.createElement("div",{className:e.css("work-item-zero-data","bowtie-fabric",s)},i.createElement("div",{"aria-hidden":"true",className:e.css("bowtie-icon","work-item-zero-data-icon",h)}),i.createElement("div",null,f),t)},t.prototype._resolveCTA=function(n){this._zeroDataCTA=n},__decorate([e.autobind],t.prototype,"_resolveCTA",null),t}(i.Component);t.ZeroDataComponent=s});

define("WorkItemTracking/Scripts/Controls/Links/DevelopmentZeroDataComponent",["require","exports","react","OfficeFabric/Utilities","WorkItemTracking/Scripts/RegisteredLinkTypeNames","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","OfficeFabric/Link","VSS/Telemetry/Services","VSSUI/VssIcon","VSSUI/Image","VSS/LWP","VSS/LoaderPlugins/Css!Controls/Links/DevelopmentZeroDataComponent"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.DevelopmentZeroDataComponent=void 0;var l="https://aka.ms/azureboardsgithub/devctrl",a=function(n){function t(t){var i=__construct(this,n,[t]),r,e;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onGitHubCommitClick=function(){i.props.actionCallback&&(i.props.actionCallback(f.LinksControlGitHubCommitText),i._publishTelemetry(u.RegisteredLinkTypeNames.GitHubCommitLinkType))},i._onGitHubPullRequestClick=function(){i.props.actionCallback&&(i.props.actionCallback(f.LinksControlGitHubPullRequestText),i._publishTelemetry(u.RegisteredLinkTypeNames.GitHubPullRequestLinkType))},i._onReposCommitClick=function(){i.props.actionCallback&&(i.props.actionCallback(f.LinksControlCommitText),i._publishTelemetry(u.RegisteredLinkTypeNames.Commit))},i._onReposPullRequestClick=function(){i.props.actionCallback&&(i.props.actionCallback(f.LinksControlPullRequestText),i._publishTelemetry(u.RegisteredLinkTypeNames.PullRequest))},i._onReposBranchClick=function(){i.props.actionCallback&&(i.props.actionCallback(f.LinksControlBranchText),i._publishTelemetry(u.RegisteredLinkTypeNames.Branch))},i._onReposCreateBranchClick=function(){i.props.createBranchActionCallback&&(i.props.createBranchActionCallback(),i._publishTelemetry(f.CreateaBranchText))},e=c.getLWPService("IVssLocationService"),i._repoImageUrl=e.getAssetLocation("ms.vss-code-web/common-content/Nav-Code.png"),i}return __extends(t,n),t.prototype.render=function(){var n=this.props.zeroDataSettings;return i.createElement("div",null,n.showGitHubZeroDataExperience?i.createElement("div",{className:"zero-data-action github"},i.createElement("div",null,i.createElement(s.VssIcon,{className:"zero-data-icon",iconName:"GitHubLogo",iconType:0})),n.showGitHubPromoteZeroDataExperience?this._getGitHubPromoteZeroDataText():this._getGitHubZeroDataText()):null,n.showAzureReposZeroDataExperience?i.createElement("div",{className:"zero-data-action"},i.createElement("div",null,i.createElement(h.Image,{className:"zero-data-icon",src:this._repoImageUrl,alt:f.ZeroDataImageAltText})),this._getAzureReposZeroDataText()):null)},t.prototype._getGitHubZeroDataText=function(){return i.createElement("div",null,i.createElement("span",null,f.GitHubZeroDataText1),i.createElement(e.Link,{onClick:this._onGitHubCommitClick},f.GitHubZeroDataCommitLinkTypeText),i.createElement("span",null,f.GitHubZeroDataText2),i.createElement(e.Link,{onClick:this._onGitHubPullRequestClick},f.GitHubZeroDataPullRequestTypeText),i.createElement("span",null,f.GitHubZeroDataText3),i.createElement(e.Link,{href:l,target:"_blank"},f.NewFeatureLearnMoreLinkTitle))},t.prototype._getGitHubPromoteZeroDataText=function(){return i.createElement("div",null,i.createElement("span",null,f.GitHubPromoteZeroDataText1),i.createElement(e.Link,{href:l,target:"_blank"},f.GitHubPromoteZeroDataText2),i.createElement("span",null,f.GitHubZeroDataText3))},t.prototype._getAzureReposZeroDataText=function(){return i.createElement("div",null,i.createElement("span",null,f.AzureReposZeroDataText1),i.createElement(e.Link,{onClick:this._onReposCommitClick},f.GitHubZeroDataCommitLinkTypeText),i.createElement("span",null,", "),i.createElement(e.Link,{onClick:this._onReposPullRequestClick},f.GitHubZeroDataPullRequestTypeText),i.createElement("span",null,f.GitHubZeroDataText2),i.createElement(e.Link,{onClick:this._onReposBranchClick},f.LinksControlZeroDataBranchText),i.createElement("span",null,f.GitHubZeroDataText3,f.AzureReposZeroDataText2),i.createElement(e.Link,{onClick:this._onReposCreateBranchClick},f.CreateaBranchText),i.createElement("span",null,f.AzureReposZeroDataText3))},t.prototype._publishTelemetry=function(n){o.publishEvent(new o.TelemetryEventData("LinksControl","AddLink",{type:n}))},t}(r.BaseComponent);t.DevelopmentZeroDataComponent=a});

define("WorkItemTracking/Scripts/DevelopmentSettings/DevelopmentZeroDataSettingsService",["require","exports","VSS/Utils/String","VSS/Contributions/Services","VSS/Service","VSS/Telemetry/Services"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.DevelopmentZeroDataSettingsService=void 0;var e="ms.vss-work-web.development-zerodata-settings-data-provider",o=function(){function n(){}return n.prototype.getDevelopmentZeroDataExperienceSettings=function(n){return __awaiter(this,void 0,void 0,function(){var t,o,s,h;return __generator(this,function(c){switch(c.label){case 0:if(!(!this._projectId||!i.equals(this._projectId,n,!0)))return[3,4];this._projectId=n;t={projectId:n};o=u.getService(r.WebPageDataService);c.label=1;case 1:return c.trys.push([1,3,,4]),s=this,[4,o.getDataAsync(e,null,t)];case 2:return s._developmentZeroDataSettingsResponse=c.sent(),[3,4];case 3:return h=c.sent(),f.publishEvent(new f.TelemetryEventData("ZeroDataSettingsError","getDevelopmentZeroDataExperienceSettings",{error:h})),[3,4];case 4:return[2,this._developmentZeroDataSettingsResponse]}})})},n}();t.DevelopmentZeroDataSettingsService=o});

define("WorkItemTracking/Scripts/Controls/Links/Control",["require","exports","q","VSS/VSS","react","react-dom","VSS/Diag","VSS/Utils/Array","VSS/Utils/String","VSS/Artifacts/Constants","VSS/Error","VSS/Controls/Menus","VSS/Events/Services","VSS/Events/Handlers","WorkItemTracking/Scripts/TFS.WorkItemTracking","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Control","Presentation/Scripts/TFS/Controls/LinkedArtifacts/Contracts","WorkItemTracking/Scripts/Form/Tabs","WorkItemTracking/Scripts/Form/Events","WorkItemTracking/Scripts/Controls/WorkItemForm/WorkItemControl","WorkItemTracking/Scripts/Controls/Links/ArtifactCache","WorkItemTracking/Scripts/Controls/Links/LinkMapper","WorkItemTracking/Scripts/Controls/Links/Interfaces","WorkItemTracking/Scripts/Controls/Links/WebLayoutLinksControlOptionsReader","WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Utils","WorkItemTracking/Scripts/OM/WorkItemConstants","TFS/VersionControl/Services","Presentation/Scripts/TFS/TFS.FeatureLicenseService","Presentation/Scripts/TFS/Components/AddNewItem","WorkItemTracking/Scripts/Controls/Links/AddParentLink","WorkItemTracking/Scripts/Form/React/Components/ZeroDataComponent","WorkItemTracking/Scripts/Controls/Links/DevelopmentZeroDataComponent","VSS/Telemetry/Services","WorkItemTracking/Scripts/DevelopmentSettings/DevelopmentZeroDataSettingsService","WorkItemTracking/Scripts/OM/WorkItemManager","VSS/LoaderPlugins/Css!Controls/Links/LinksControl"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt){var bt,wt,kt;Object.defineProperty(t,"__esModule",{value:!0});t.LinksControl=void 0;kt=function(n){function t(i,e,o){var s=n.call(this,i,e,o)||this,a,w,h;return s._artifactCache=new tt.SimpleWorkItemArtifactCache,s._executeAddLinkCommand=function(n,t){r.requireModules(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls"]).then(function(){l.menuManager.executeCommand(new v.CommandEventArgs(n,t,null))},function(t){c.publishErrorToTelemetry({name:"CouldNotExecute".concat(n,"Command"),message:r.getErrorMessage(t)})})},s._onLinkedWorkItemChanged=function(n,t){var o=t.workItem,u,i,f,r,e;if(t.workItem.id!==s._workItem.id){if(u=!1,t.change===et.WorkItemChangeType.SaveCompleted)for(i=0,f=s._workItem.getLinks();i<f.length;i++)r=f[i],r instanceof y.WorkItemLink&&(e=r.getTargetId(),e===o.id&&(u=!0,s._linkedArtifactsControl.invalidateLinkedArtifact(s._getLinkedWorkItemArtifact(r))));u&&s.invalidate(!1)}},a=ut.WebLayoutLinksControlOptionsReader.getDefaultLinksControlOptions(),s._options=__assign(__assign({},a),s._options),s._container.addClass("links-control"),s._container.attr("tabindex",-1),s._fieldEvents=[p.DalFields.RelatedLinks,p.DalFields.BISURI,p.DalFields.LinkedFiles],s._workItemManager=pt.WorkItemManager.get(s._workItemType.store),w=s.getAvailableSpaceImmediate(),h=function(){var n=s._getArtifactControlOptions(w,s._options);s._$linkedArtifactsControlContainer=$("<div/>").addClass(t.CSS_LINKS_CONTROL_CONTAINER).appendTo(s._container);f.render(u.createElement(b.LinkedArtifactsControl,$.extend({},n,{ref:function(n){return s._linkedArtifactsControl=n}})),s._$linkedArtifactsControlContainer[0]);s._attachEvents();s._onResize();s._workItem&&s.invalidate(!1)},s._workItemType.store.registeredLinkTypes==null||$.isFunction(s._workItemType.store.registeredLinkTypes)||s._workItemType.store.contributedLinkTypes==null?s._ensureLinkTypes().then(function(){return h()},function(n){throw new Error(n);}):h(),s._developmentZeroDataSettingsService=new yt.DevelopmentZeroDataSettingsService,s}return __extends(t,n),t.prototype.dispose=function(){this._detachEvents();this._$addLinkContainer&&f.unmountComponentAtNode(this._$addLinkContainer[0]);this._$linkedArtifactsControlContainer&&f.unmountComponentAtNode(this._$linkedArtifactsControlContainer[0]);this._removeAddParentLinkContainer()},t.prototype.getAvailableSpace=function(){var t=this;return n.prototype.getAvailableSpace.call(this).then(function(n){return t._$addLinkContainer&&(n.height-=t._$addLinkContainer.outerHeight(!0)),n})},t.prototype._updateNewItemControl=function(){var n=this;this._$addLinkContainer&&this._$addLinkContainer.length>0&&this._ensureLinkTypes().then(function(){var t={items:n._getWorkItemTypeMenuItemsForCurrentControl(),displayText:w.LinksControlAddLinkDisplayText,disabledTooltip:w.LinksControlAddLinkDisabledTooltip,ref:function(t){return n._addNewItemComponent=t}};f.render(u.createElement(ht.AddNewItemComponent,t),n._$addLinkContainer[0])})},t.prototype._getWorkItemTypeMenuItemsForCurrentControl=function(){return this._getWorkItemTypeMenuItems(this._options.linkFilters,this._options.workItemTypeFilters,this._options.scopeWorkItemTypesToProject,this._workItemType)},t.prototype._getArtifactControlOptions=function(n,i){var u=this,r;return!this._workItemType.store||!this._workItemType.store.linkTypes||!this._workItemType.store.registeredLinkTypes?(c.publishErrorToTelemetry({name:"CouldNotGetLinkTypes",message:"Could not get linktypes or registered link types."}),null):(r={artifactPageSize:i.listViewOptions.pageSize,viewOptions:{viewMode:this._getDesiredViewMode(i,0),availableSpace:n,showGroupHeaders:this._options.listViewOptions.groupLinks},zeroDataOptions:{zeroDataExperienceViewMode:k.ZeroDataExperienceViewMode.Hidden},cache:this._artifactCache,onRemoveLinkedArtifact:this._onRemoveLink.bind(this),onChangeLinkedArtifactComment:this._onChangeLinkComment.bind(this),artifactSubTypeFilters:t._getLinkedArtifactSubtypeFilterConfiguration(i),gridViewOptions:{minColumnsInGridView:t.MIN_COLUMNS_IN_GRID_VIEW_MODE,autoSizeGrid:!i.autoFitFormHeight,maxGridHeight:i.autoFitFormHeight?n.height:i.height||k.DefaultGridHeight},columns:i.columns?this._mapColumns(i.columns.columnNames):null,tfsContext:this.getTfsContext(),sortColumns:null,linkTypeRefNames:t._getLinkTypeNames(i.linkFilters,t._getWorkItemLinkTypeMap(this._workItemType.store.linkTypes),this._workItemType.store.registeredLinkTypes.map(function(n){return n.name})),onRender:function(){u._onRenderCompleted()}},i.zeroDataExperience===rt.WebLayoutLinksControlZeroDataExperience.Development&&(r.sortColumns=[{column:k.InternalKnownColumns.LastUpdate,direction:k.SortDirection.Descending},{column:k.InternalKnownColumns.Link,direction:k.SortDirection.Ascending}]),r)},t.prototype._getWorkItemTypeMenuItems=function(n,t,i,r){var u=this,f=this._getLinkFilters(n,t,i,r),e=function(){return u._getAddLinkOptions(f)},o=[{key:ft.ACTIONS_LINK_TO_EXISTING,name:w.LinksControlAddLinkToExistingItem,iconProps:{className:"vsts-fabric-contextual-menu-icon bowtie-icon bowtie-link"},onClick:function(){u._executeAddLinkCommand(ft.ACTIONS_LINK_TO_EXISTING,e());vt.publishEvent(new vt.TelemetryEventData("LinksControl","AddLink",{type:"AddLink"}))},disabled:this.isReadOnly()}],s;return(!f.workItemLinkFilters||f.workItemLinkFilters.length>0)&&(s=!this._workItem||this._workItem.isNew()||this.isReadOnly(),o.push({key:ft.ACTIONS_LINK_TO_NEW,name:w.LinksControlCreateNewLink,iconProps:{className:"vsts-fabric-contextual-menu-icon bowtie-icon bowtie-work-item"},onClick:function(){return u._executeAddLinkCommand(ft.ACTIONS_LINK_TO_NEW,e())},disabled:s,title:this._workItem&&this._workItem.isNew()?w.LinksControlAddNewItemDisabledTooltip:null})),o},t.prototype._getLinkFilters=function(n,i,r,u){var f=null,e=null,o=null;if(n){var c=n.filter(function(n){return n.linkFilterKind===rt.WebLayoutLinksControlLinkFilterKind.External}),l=n.filter(function(n){return n.linkFilterKind===rt.WebLayoutLinksControlLinkFilterKind.WorkItem}),s=t._getWorkItemLinkTypeMap(u.store.linkTypes),h=u.store.registeredLinkTypes.map(function(n){return n.name});f=t._getLinkTypeNames(c,s,h);e=t._getLinkTypeNames(l,s,h)}return i&&(o={filterType:"include",scope:r?"project":null,filters:i.map(function(n){return{workItemType:n}})}),{externalLinkFilters:f,workItemLinkFilters:e,workItemTypeFilters:o}},t.prototype._getAddLinkOptions=function(n,t){var i=this;return{baseId:this._workItem,selectedIds:[this._workItem.id],options:{workItemLinkFilters:n.workItemLinkFilters,externalLinkFilters:n.externalLinkFilters,workItemTypeFilters:n.workItemTypeFilters,isNewLinksControl:!0,close:function(){i._addNewItemComponent?i._addNewItemComponent.focus():i._container.focus()},noFocusOnClose:!0,selectedLinkType:t},afterSave:function(){return $("button.add-new-item-component, .work-item-zero-cta button",i._container).first().focus()}}},t.prototype._onRenderCompleted=function(){a.getService().fire(g.FormEvents.ControlResizedEvent(),this)},t._getLinkedArtifactSubtypeFilterConfiguration=function(n){var t;return n&&(typeof n.scopeWorkItemTypesToProject!="undefined"||typeof n.workItemTypeFilters!="undefined")?(t={},t[h.ToolNames.WorkItemTracking]={artifactSubtypes:n.workItemTypeFilters||null,inCurrentProject:n.scopeWorkItemTypesToProject||!1},t):null},t._getLinkTypeNames=function(n,t,i){var r,f,o,u;if(!n)return null;for(r=[],f=0,o=n;f<o.length;f++)u=o[f],u.linkFilterKind===rt.WebLayoutLinksControlLinkFilterKind.External?u.linkFilterType===rt.WebLayoutLinksControlXmlValues.IncludeAllLinks?r.push.apply(r,i):r.push(u.linkFilterType):u.linkFilterType===rt.WebLayoutLinksControlXmlValues.IncludeAllLinks?r.push.apply(r,Object.keys(t)):t[u.linkFilterType]&&r.push.apply(r,t[u.linkFilterType]);return r=r.filter(function(n,t){return r.indexOf(n)===t})},t._getWorkItemLinkTypeMap=function(n){for(var t,r,u,i={},f=0,e=n;f<e.length;f++)t=e[f],i[t.referenceName]=[t.referenceName],r=t.forwardEnd.immutableName,i[r]=[r],i[t.referenceName].push(r),t.isDirectional&&(u=t.reverseEnd.immutableName,i[u]=[u],i[t.referenceName].push(u));return i},t.prototype.onControlResized=function(){this._onResize()},t.prototype._attachEvents=function(){if(!this._onTabSelectedDelegate){this._onTabSelectedDelegate=this._onTabSelected.bind(this);this._container.on(d.WorkItemFormTabEvents.WorkItemFormTabSelected,this._onTabSelectedDelegate)}},t.prototype._detachEvents=function(){this._onTabSelectedDelegate&&(this._container.off(d.WorkItemFormTabEvents.WorkItemFormTabSelected,this._onTabSelectedDelegate),this._onTabSelectedDelegate=null)},t.prototype._onTabSelected=function(){this._onResize();this._linkedArtifactsControl&&this._container.find(".la-grid").triggerHandler(k.Events.ForceRerender)},t.prototype._onResize=function(){var n=this;this.getAvailableSpace().then(function(t){return n._updateViewOptions(t)})},t.prototype._updateViewOptions=function(n){if(this._linkedArtifactsControl&&n.width>0){var t=this._getDesiredViewMode(this._options,n.width);this._linkedArtifactsControl.setViewOptions({viewMode:t,availableSpace:{width:n.width,height:n.height-2}})}},t.prototype._getDesiredViewMode=function(n,i){return this._isFullScreen?k.ViewMode.FullGrid:n.viewMode===rt.WebLayoutLinksControlViewMode.Grid||(!n.viewMode||n.viewMode===rt.WebLayoutLinksControlViewMode.Dynamic)&&i>t.GRID_THRESHOLD?n.columns&&n.columns.truncation===rt.WebLayoutLinksControlColumnTruncation.Off?k.ViewMode.FullGrid:k.ViewMode.Grid:k.ViewMode.List},t.prototype._onWorkItemChangedHandler=function(n,t){(t.change===et.WorkItemChangeType.Refresh||t.change===et.WorkItemChangeType.Reset)&&this._artifactCache.clear();t.change===et.WorkItemChangeType.SaveCompleted&&(this._updateNewItemControl(),this._setZeroDataState())},t.prototype.bind=function(t){n.prototype.bind.call(this,t);this._updateAddLinksContainer();this._onWorkItemChangedDelegate||(this._onWorkItemChangedDelegate=this._onWorkItemChangedHandler.bind(this),t.attachWorkItemChanged(this._onWorkItemChangedDelegate));this._artifactCache.setWorkItem(t);this._workItemManager.attachWorkItemChanged(this._onLinkedWorkItemChanged);this._onResize()},t.prototype.unbind=function(){this._onWorkItemChangedDelegate&&(this._workItem.detachWorkItemChanged(this._onWorkItemChangedDelegate),delete this._onWorkItemChangedDelegate,this._onWorkItemChangedDelegate=null);this._workItemManager&&this._workItemManager.detachWorkItemChanged(this._onLinkedWorkItemChanged);n.prototype.unbind.call(this)},t.prototype.maximizeInPlace=function(n){this._isFullScreen=!0;this._container.css("top",n);this._unFocusRestoreButton();this._linkedArtifactsControl.setViewOptions({viewMode:k.ViewMode.FullGrid,availableSpace:this.getAvailableSpaceImmediate()})},t.prototype.restoreInPlace=function(){this._isFullScreen=!1;this._unFocusMaximizeButton();var n=this.getAvailableSpaceImmediate();this._updateViewOptions(n)},t.prototype._unFocusMaximizeButton=function(){this._container.parents(".grid-group-container").find(".workitem-group-maximize").blur()},t.prototype._unFocusRestoreButton=function(){this._container.parents(".grid-group-container").find(".workitem-group-restore").blur()},t.prototype.invalidate=function(t){n.prototype.invalidate.call(this,t);this._linkedArtifactsControl&&(this._linkedArtifactsControl.setReadOnly(this.isReadOnly()),this._workItem&&(this._linkedArtifactsControl.setFetchingLinks({fetchingLinks:k.FetchingLinks.InProgress}),this._updateLinks(),this._setZeroDataState(),this._linkedArtifactsControl.setFetchingLinks({fetchingLinks:k.FetchingLinks.Done})))},t.prototype._createAddLinksContainer=function(){this._$addLinkContainer||(this._$addLinkContainer=$("<div/>").addClass(t.CSS_ADD_NEW_LINK_CONTAINER).prependTo(this._container))},t.prototype._createAddParentLinkContainer=function(){!this._$addParentLinkContainer&&this._$addLinkContainer&&(this._$addParentLinkContainer=$("<div/>").insertAfter(this._$addLinkContainer))},t.prototype._removeAddLinksContainer=function(){this._$addLinkContainer&&(this._$addLinkContainer[0]&&f.unmountComponentAtNode(this._$addLinkContainer[0]),this._$addLinkContainer.remove(),this._$addLinkContainer=null)},t.prototype._removeAddParentLinkContainer=function(){this._$addParentLinkContainer&&(this._$addParentLinkContainer[0]&&f.unmountComponentAtNode(this._$addParentLinkContainer[0]),this._$addParentLinkContainer.remove(),this._$addParentLinkContainer=null)},t.prototype._launchGitHubAddLinkDialog=function(n){var t=this._getLinkFilters(this._options.linkFilters,this._options.workItemTypeFilters,this._options.scopeWorkItemTypesToProject,this._workItemType),i=this._getAddLinkOptions(t,n);this._executeAddLinkCommand(ft.ACTIONS_LINK_TO_EXISTING,i)},t.prototype._setZeroDataState=function(){return __awaiter(this,void 0,void 0,function(){var t,i,e,o,r,n=this;return __generator(this,function(s){switch(s.label){case 0:t={zeroDataExperienceViewMode:k.ZeroDataExperienceViewMode.Default};i=function(t){n._linkedArtifactsControl&&n._linkedArtifactsControl.setZeroDataOptions(t)};e=this._options.zeroDataExperience;switch(e){case rt.WebLayoutLinksControlZeroDataExperience.Development:return[3,1];case rt.WebLayoutLinksControlZeroDataExperience.CallToAction:return[3,4];case rt.WebLayoutLinksControlZeroDataExperience.Default:return[3,5]}return[3,6];case 1:return(t.message=w.DevelopmentControlWorkHasntStartedMessage,!(!this._workItem.isNew()&&!this._workItem.isDeleted()&&!this._workItem.isReadOnly()))?[3,3]:(o=this._workItem.id,[4,this._developmentZeroDataSettingsService.getDevelopmentZeroDataExperienceSettings(this._workItem.project.guid)]);case 2:if(r=s.sent(),!this._workItem)return[2];if(this._workItem&&o!==this._workItem.id)return[2];r&&!r.errorMessage&&(t.onRenderZeroData=function(){return u.createElement(at.DevelopmentZeroDataComponent,{actionCallback:function(t){n._launchGitHubAddLinkDialog(t)},createBranchActionCallback:function(){n._launchCreateBranchDialog()},zeroDataSettings:r})});i(t);s.label=3;case 3:return[3,7];case 4:return t.onRenderZeroData=function(){var t=n._getWorkItemTypeMenuItemsForCurrentControl();return u.createElement(lt.ZeroDataComponent,{label:w.LinksControlZeroData,iconClassName:"bowtie-link",cta:!n._options.hideActions&&!n.isReadOnly()?{label:w.LinksControlAddLinkDisplayText,menuItems:t}:null})},i(t),[3,7];case 5:return i(t),this._workItem.getFieldValue(p.CoreField.Parent)?this._removeAddParentLinkContainer():(this._createAddParentLinkContainer(),this._ensureLinkTypes().then(function(){var t=n._workItem.store.getLinkTypeEnds().find(function(n){return n.immutableName===et.LinkTypeName.Parent_Link_Name}),i=n._getLinkFilters(n._options.linkFilters,n._options.workItemTypeFilters,n._options.scopeWorkItemTypesToProject,n._workItemType),r=n._getAddLinkOptions(i,t===null||t===void 0?void 0:t.name),e={onClickAddParent:function(){n._executeAddLinkCommand(ft.ACTIONS_LINK_TO_EXISTING,r);vt.publishEvent(new vt.TelemetryEventData("LinksControl","AddLink",{type:"AddLink"}))}};f.render(u.createElement(ct.AddParentLink,e),n._$addParentLinkContainer[0])})),[3,7];case 6:return i(t),[3,7];case 7:return[2]}})})},t.prototype._ensureLinkTypes=function(){if(this._linkTypesPromise)return this._linkTypesPromise;var n=i.defer(),t=this._workItemType.store.beginGetContributedLinkTypes();return this._workItemType.store.beginGetLinkTypes(function(){t.then(function(){n.resolve(null)},function(t){n.reject(t)})},function(t){n.reject(t)}),this._linkTypesPromise=n.promise,this._linkTypesPromise},t.prototype._updateLinks=function(){var n,t=this._mapLinks(),i=t.map(function(n){return n.mappedLink}),r={id:this._workItem.id.toString(),tool:h.ToolNames.WorkItemTracking,type:h.ArtifactTypeNames.WorkItem,additionalData:(n={},n[k.HostArtifactAdditionalData.ProjectName]=this._workItem.project.name,n[k.HostArtifactAdditionalData.ProjectId]=this._workItem.project.id,n)};this._updateAddLinksContainer();this._linkedArtifactsControl.setLinkedArtifacts(i,r)},t.prototype._updateAddLinksContainer=function(){if(this._options.hideActions||this._workItem.isReadOnly())this._removeAddLinksContainer(),this._removeAddParentLinkContainer();else{var n=this._workItem.getLinks(),t=n===null||n.length===0;this._options.zeroDataExperience===rt.WebLayoutLinksControlZeroDataExperience.CallToAction&&t?(this._removeAddLinksContainer(),this._removeAddParentLinkContainer()):(this._createAddLinksContainer(),this._updateNewItemControl())}},t.prototype._mapLinks=function(){var n=new it.LinkMapper(this._workItem.store),t=this._workItem.getLinks();return n.mapLinks(t)},t.prototype._getLinkedWorkItemArtifact=function(n){var t=new it.LinkMapper(this._workItem.store),i=t.mapLink(n);return __assign(__assign({},i),{isColumnDependent:!0})},t.prototype._mapWitFieldDefToLinkColumnType=function(n){return n.isIdentity?k.LinkColumnType.Identity:t.WitFieldTypeToLinksColumnTypeMap[n.type.valueOf()]},t.prototype._mapColumns=function(n){var i=this,r;return n?(r={},Object.keys(k.InternalKnownColumns).map(function(n){return k.InternalKnownColumns[n]}).forEach(function(n){return r[n.refName.toLowerCase()]=n}),n.map(function(n){if(r[n.toLowerCase()])return r[n.toLowerCase()];var u;return(i._workItemType&&i._workItemType.store&&(u=i._workItemType.store.getFieldDefinition(n)),u||(u=i.getExtensionField(n)),u)?{name:u.name,refName:u.referenceName,type:i._mapWitFieldDefToLinkColumnType(u)}:t.LINK_ATTRIBUTE_COLUMNS[n]||null}).filter(function(n){return!!n})):null},t.prototype._getMappedLink=function(n){var t=this._mapLinks();return o.first(t,function(t){return s.equals(t.mappedLink.linkType,n.linkType,!0)&&s.equals(t.mappedLink.id,n.id,!0)&&s.equals(t.mappedLink.tool,n.tool,!0)&&s.equals(t.mappedLink.type,n.type,!0)})},t.prototype._onRemoveLink=function(n){var t=this._getMappedLink(n);t&&this._workItem.removeLinks([t.link]);this._addNewItemComponent&&this._workItem.getLinks().length===0&&this._addNewItemComponent.focus()},t.prototype._onChangeLinkComment=function(n,t){var i=this._getMappedLink(n);i&&this._workItem.findLink(i.link).setComment(t)},t.prototype._launchCreateBranchDialog=function(){var n=this;this._beginGetVcService().then(function(t){if(t&&n._areAllFeaturesActive(t.requiredFeaturesForActions)){var i=void 0,r=void 0;n._workItem&&(i=n._workItem.project.name,r=n._workItem.project.guid);t.beginLaunchCreateBranchDialog([n._workItem.id],i,r).then(function(){},function(t){n._handleError(t)})}})},t.prototype._areAllFeaturesActive=function(n){var t=this;return!n||n.length===0?!0:n.every(function(n){return t._isFeatureActive(n)})},t.prototype._isFeatureActive=function(n){return st.FeatureLicenseService.isFeatureActive(n)},t.prototype._beginGetVcService=function(){return this._vcServicePromise||(this._vcServicePromise=ot.VersionControlActionService.getService()),this._vcServicePromise},t.prototype._handleError=function(n){c.publishErrorToTelemetry({name:"CouldNotLaunchCreateBranchDialog",message:n})},t.MIN_COLUMNS_IN_GRID_VIEW_MODE=5,t.GRID_THRESHOLD=460,t.LINK_ATTRIBUTE_COLUMNS=(bt={},bt[k.InternalKnownColumns.Comment.refName]=k.InternalKnownColumns.Comment,bt),t.CSS_ADD_NEW_LINK_CONTAINER="add-links-container",t.CSS_LINKS_CONTROL_CONTAINER="links-control-container",t.WitFieldTypeToLinksColumnTypeMap=(wt={},wt[p.FieldType.Boolean.valueOf()]=k.LinkColumnType.Boolean,wt[p.FieldType.DateTime.valueOf()]=k.LinkColumnType.DateTime,wt[p.FieldType.Double.valueOf()]=k.LinkColumnType.Double,wt[p.FieldType.Guid.valueOf()]=k.LinkColumnType.Guid,wt[p.FieldType.History.valueOf()]=k.LinkColumnType.Html,wt[p.FieldType.Html.valueOf()]=k.LinkColumnType.Html,wt[p.FieldType.Integer.valueOf()]=k.LinkColumnType.Integer,wt[p.FieldType.PicklistInteger.valueOf()]=k.LinkColumnType.Integer,wt[p.FieldType.PicklistString.valueOf()]=k.LinkColumnType.String,wt[p.FieldType.PlainText.valueOf()]=k.LinkColumnType.PlainText,wt[p.FieldType.String.valueOf()]=k.LinkColumnType.String,wt[p.FieldType.TreePath.valueOf()]=k.LinkColumnType.TreePath,wt),t}(nt.WorkItemControl);t.LinksControl=kt});

define("Agile/Scripts/Backlog/ProductBacklogContextMenu",["require","exports","react","react-dom","VSS/VSS","VSS/Diag","VSS/Error","VSS/Controls","VSS/Controls/Notifications","VSS/Controls/Dialogs","VSS/Events/Action","VSS/Controls/Menus","VSS/Telemetry/Services","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/String","VSS/Events/Handlers","VSS/FeatureAvailability/Services","Agile/Scripts/Common/Agile","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Agile/Scripts/Backlog/ProductBacklogGrid","Agile/Scripts/Common/WorkItemChanges","Agile/Scripts/Common/CustomerIntelligence","./ContextMenu/Components/ChangeParentDialog","./ContextMenu/Components/SimpleMessageDialog","WorkItemTracking/Scripts/Utils/PermissionHandler","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.Accessories","WorkItemTracking/Scripts/Controls/Query/QueryResultGrid","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/OM/QueryAdapter","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Utils","WorkItemTracking/Scripts/Controls/Links/Control","WorkItemTracking/Scripts/Utils/TempQueryUtils","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Controls/Links/Interfaces"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt){var ii,ki,di,fi,ei,oi,si,hi,ci,li,ai,vi,yi,ri,pi,ui,wi;Object.defineProperty(t,"__esModule",{value:!0});t.ReorderDialog=t.MoveToPositionContextMenuItem=t.IterationMoveToPositionHelper=t.MoveToPositionHelper=t.BulkEditContextMenuItem=t.CopyAsHtmlContextMenuItem=t.MoveItemContextMenuItem=t.ChangeTypeContextMenuItem=t.AssignToContextMenuItem=t.EmailWorkItemContextMenuItem=t.AddLinkContextMenuItem=t.ChangeParentContextMenuItem=t.MoveToIterationContextMenuItem=t.SeparatorContextMenuItem=t.IterationBacklogContextMenuCreator=t.ProductBacklogContextMenuCreator=t.BacklogContextMenuCreator=t.ContextMenuContributionUtils=void 0;var gi=y.delegate,bi=ct.CommonContextMenuItems,ti=ft.TfsContext.getDefault(),ni=function(){function n(){}return n.onlyVirtualWorkItems=function(n){return!n||!n.some(function(n){return g.GridGroupRowBase.getGroupRow(n)===null})},n.moveToIteration=function(t,i){var r={iterationPath:i,workItemIds:t};n.recordContextMenuTelemetry(t,"move-to-iteration");c.getService().performAction(k.Actions.BACKLOG_MOVE_TO_ITERATION,r)},n.anyWorkItemSaving=function(n,t){var i=n.getRowSavingManager();return t.some(function(n){return i.isRowSaving(n)})},n.bulkSaveErrorHandler=function(n){if(n&&n.name===yt.Exceptions.WorkItemBulkSaveException){var t=[],i=$("<div>"),r=$("<p>"),f=$("<ul>");r.text(d.BulkEdit_ErrorListHeader);i.append(r);i.append(f);n.results.forEach(function(n){n.error&&t.push(n.error.message)});t.length>0&&(t=v.unique(t,p.localeComparer),t.forEach(function(n){f.append($("<li>").append(n))}));c.getService().performAction(k.Actions.BACKLOG_SHOW_ERROR_MESSAGE,{message:d.BulkEdit_ErrorMessageHeader,content:t.length===0?null:i})}else c.getService().performAction(k.Actions.BACKLOG_SHOW_ERROR_MESSAGE,{message:u.getErrorMessage(n)})},n.bulkSaveSuccessHandler=function(n,t){var i={workItems:n,changes:t};c.getService().performAction(k.Actions.BACKLOG_BULK_EDIT_EVALUATE_MEMBERSHIP,i)},n.recordContextMenuTelemetry=function(n,t){var i=n.filter(function(n){return g.GridGroupRowBase.getGroupRow(n)===null});i.length===1?a.publishEvent(new a.TelemetryEventData(tt.AgileCustomerIntelligenceArea.AGILE,tt.AgileCustomerIntelligenceFeature.SINGLESELECT_CONTEXTMENU,{Action:t})):i.length>1&&a.publishEvent(new a.TelemetryEventData(tt.AgileCustomerIntelligenceArea.AGILE,tt.AgileCustomerIntelligenceFeature.MULTISELECT_CONTEXTMENU,{NumberOfSelectedItems:i.length,Action:t}))},n.createSelectionFilter=function(n,t){return new nt.TopLevelItemsSelectionFilter(t,gi(n,n.pageWorkItems))},n}();t.ContextMenuContributionUtils=ni;ii=function(){function n(n,t,i,r,u){this._entries=[];this._grid=n;this._getTeam=t;this._itemHierarchy=i;this._gridBehaviors=r;this._messageSuppressor=u;this._initializeContribution()}return n.prototype.createContextMenu=function(n,t,i){var c=this,f,e,o,s,r,h,u;for(n=n||[],f=[],e=0,o=this._entries;e<o.length;e++)if(s=o[e],r=s.contribution.getItems(this._getTeam().id,n,i)||[],r.length>0){for(h=s.rank,u=0;u<r.length;++u)r[u].rank=h+u;f=f.concat(r)}t.items=f;t.contextInfo&&(ni.onlyVirtualWorkItems(n)&&(t.contributionIds=[]),t.contextInfo.item=$.extend(t.contextInfo.item,{workItemIds:n.filter(function(n){return g.GridGroupRowBase.getGroupRow(n)===null}),workItemTypeNames:this._grid.getSelectedWorkItemTypes(),workItemProjects:this._grid.getSelectedWorkItemProjectNameMapping(),hideDelete:ni.onlyVirtualWorkItems(n),refreshRequired:n.some(function(n){return!c._grid.getDataManager().isLeafNode(n)}),immediateSave:!0,team:this._getTeam()}))},n.prototype._initializeContribution=function(){this._addItem(10,new yi(this._messageSuppressor));this._addItem(20,new ci);this._addItem(30,new vi(this._grid));this._addItem(70,new si(this._itemHierarchy,this._messageSuppressor,this._grid.getDataManager()));this._addItem(80,new ei(this._itemHierarchy,this._messageSuppressor,this._grid.getDataManager()));var n=b.FeatureAvailabilityService.isFeatureEnabled(ot.FeatureAvailabilityFlags.WebaccessProcessHierarchy);(n||b.FeatureAvailabilityService.isFeatureEnabled(ot.FeatureAvailabilityFlags.WorkItemTrackingChangeWorkItemType))&&this._addItem(120,new li(this._grid));(n||b.FeatureAvailabilityService.isFeatureEnabled(ot.FeatureAvailabilityFlags.WorkItemTrackingMove))&&this._addItem(130,new ai(this._grid,this._messageSuppressor));this._addItem(140,new hi(this._grid))},n.prototype._addItem=function(n,t){this._entries.push({rank:n,contribution:t});this._entries.sort(function(n,t){return n.rank-t.rank})},n.prototype._addSeparator=function(n){this._addItem(n,new fi)},n}();t.BacklogContextMenuCreator=ii;ki=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype._initializeContribution=function(){n.prototype._initializeContribution.call(this);var t=ni.createSelectionFilter(this._grid,this._itemHierarchy);this._addItem(90,new oi(this._grid));this._addItem(100,new ui(this._grid,new ri(this._grid,this._itemHierarchy,t)))},t}(ii);t.ProductBacklogContextMenuCreator=ki;di=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype._initializeContribution=function(){n.prototype._initializeContribution.call(this);var t=ni.createSelectionFilter(this._grid,this._itemHierarchy);this._addItem(100,new ui(this._grid,new pi(this._grid,this._itemHierarchy,t)))},t}(ii);t.IterationBacklogContextMenuCreator=di;fi=function(){function n(){}return n.prototype.getItems=function(){return[{separator:!0}]},n}();t.SeparatorContextMenuItem=fi;ei=function(){function n(n,t,i){this._itemHierarchy=n;this._messageSuppressor=t;this._dataManager=i}return n.prototype.getItems=function(n,t,i){if(!ni.onlyVirtualWorkItems(t)&&ut.hasAgileToolsBacklogManagementPermission()){var r=ct.CommonContextMenuItems.getMoveToIterationContextMenuItem(ti,n,$.extend({},i),ni.bulkSaveErrorHandler,ni.moveToIteration);return r.disabled=r.disabled||ni.anyWorkItemSaving(i.grid,t),r.cssClass="backlogs-move-to-iteration-context-menu-item",r.groupId="core",r.title=p.empty,[r]}},n}();t.MoveToIterationContextMenuItem=ei;oi=function(){function n(n){this._grid=n}return n.prototype.getItems=function(n,t){var u=c.getService().performAction(k.Actions.BACKLOG_FILTER_SELECTION,{selectedWorkItemIds:t})||[],o=this._grid.getWorkItemTypeNameById(u[0]),f=st.BacklogConfigurationService.getBacklogConfiguration(),e=f.getBacklogByWorkItemTypeName(o);return e?[{text:d.ContextMenu_ChangeParent,disabled:!1,groupId:"core",action:function(){var o=$(document.body).find(".change-parent-dialog-container"),s,h,v;if(o.length||(o=$("<div>").addClass("change-parent-dialog-container").appendTo(document.body)),s=function(){o.length&&r.unmountComponentAtNode(o[0])},h=function(n,t){var u={message:n,title:d.BacklogsChangeParentDialogTitle,link:t||null,onDismiss:s};r.render(i.createElement(rt.SimpleMessageDialog,u),o[0])},u.length===0)h(d.ChangeParentInvalidSelectionMessage,{linkText:d.ChangeParentInvalidSelectionLearnMore,url:d.ChangeParentInvalidSelectionLearnMoreLink});else if(u.length>200)h(d.ChangeParentSelectionLimitExceededMessage);else if(p.equals(e.id,f.getAllBacklogLevels()[0].id,!0))h(d.ChangeParentSelectionCannotReparentMessage);else if(u.length>0){var y=function(n){c.getService().performAction(k.Actions.MAPPING_PANE_REPARENT,{workItemIds:u,newParentId:n,forceRefresh:!0});s();ni.recordContextMenuTelemetry(t,"change-parent")},l=f.getAllBacklogLevels(),a=l.indexOf(e);a>0&&(v=l[a-1],r.render(i.createElement(it.ChangeParentDialog,{workItemIdsToReparent:u,initialTeamId:n,parentBacklogLevel:v,onDismiss:s,onSave:y}),o[0]))}}}]:[]},n}();t.ChangeParentContextMenuItem=oi;si=function(){function n(n,t,i){this._itemHierarchy=n;this._messageSuppressor=t;this._dataManager=i;this._workItemManager=kt.WorkItemManager.get(et.ProjectCollection.getDefaultConnection().getService(dt.WorkItemStore))}return n.prototype.getItems=function(n,t,i){var f=this,r;if(!ni.onlyVirtualWorkItems(t)){r=!b.FeatureAvailabilityService.isFeatureEnabled(ot.FeatureAvailabilityFlags.DisableLinkFiltersFix);r&&i.workItemId&&this._workItemManager.getWorkItem(i.workItemId)==null&&this._workItemManager.beginGetWorkItem(i.workItemId,null);var s=function(n){var r,u,e=n.form,i,s,f;if(typeof e=="string"){var h=JSON.parse(e),t=null,o=(r=h.pages.find(function(n){return n.label==="Details"}))===null||r===void 0?void 0:r.sections;for(i=0;i<o.length;i++)if(t=(u=o[i].groups.find(function(n){return n.label==="Related Work"}))===null||u===void 0?void 0:u.controls.find(function(n){return n.controlType==="LinksControl"}),t)break;if(t&&t.metadata)return s=new DOMParser,f=s.parseFromString(t.metadata,"text/xml"),{linkFilters:f.getElementsByTagName("LinkFilters"),workItemTypeFilters:f.getElementsByTagName("WorkItemTypeFilters")}}return null},h=function(n){var c,u=null,e=null,o=null,a,v;if(r){var l=f._workItemManager.getWorkItem(i.workItemId).workItemType,y=s(l),h=y.linkFilters,t=y.workItemTypeFilters;h&&h.length>0&&(u=Array.from(h[0].getElementsByTagName("WorkItemLinkFilter")).map(function(n){return{linkFilterKind:gt.WebLayoutLinksControlLinkFilterKind.WorkItem,linkFilterType:n.getAttribute("Type")}}),e=Array.from(h[0].getElementsByTagName("ExternalLinkFilter")).map(function(n){return{linkFilterKind:gt.WebLayoutLinksControlLinkFilterKind.External,linkFilterType:n.getAttribute("Type")}}),a=wt.LinksControl._getWorkItemLinkTypeMap(l.store.linkTypes),v=l.store.registeredLinkTypes.map(function(n){return n.name}),e=wt.LinksControl._getLinkTypeNames(e,a,v),u=wt.LinksControl._getLinkTypeNames(u,a,v));t&&t.length>0&&(o={filterType:(c=t[0].getAttribute("FilterType"))!==null&&c!==void 0?c:"include",scope:t[0].getAttribute("Scope")},t[0].childNodes&&t[0].childNodes.length&&(o.filters=[],$.each(t[0].childNodes,function(){this.nodeName==="Filter"&&o.filters.push({workItemType:$.trim(this.getAttribute("WorkItemType"))})})))}return{workItemLinkFilters:u,externalLinkFilters:e,workItemTypeFilters:o,isNewLinksControl:!0,immediateSave:!0,afterSave:function(t){ni.recordContextMenuTelemetry(t.workItems.map(function(n){return n.id}),n)}}},o=function(n){var o=function(){u.requireModules(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls"]).then(function(){l.menuManager.executeCommand(new w.CommandEventArgs(n,{baseId:t[0],selectedIds:t,options:h(n)},null))},function(t){e.publishErrorToTelemetry({name:"CouldNotExecute".concat(n,"Command"),message:u.getErrorMessage(t)})})};r&&i.workItemId&&f._workItemManager.getWorkItem(i.workItemId)==null?f._workItemManager.beginGetWorkItem(i.workItemId,function(){return o()}):o()};return[{text:d.ContextMenu_AddLink,disabled:!1,groupId:"core",childItems:[{text:d.ContextMenu_LinkToExistingItem,disabled:!1,icon:"bowtie-icon bowtie-link",action:function(){o(pt.ACTIONS_LINK_TO_EXISTING)}},{text:d.ContextMenu_LinkToNewItem,disabled:!1,icon:"bowtie-icon bowtie-work-item",action:function(){o(pt.ACTIONS_LINK_TO_NEW)}}]}]}},n}();t.AddLinkContextMenuItem=si;hi=function(){function n(n){this._grid=n}return n.prototype.getItems=function(n,t){var i=this;if(!ni.onlyVirtualWorkItems(t))return[{id:bi.EMAIL_SELECTION_ACTION_NAME,text:ht.EmailSelectedWorkItems,icon:"bowtie-icon bowtie-mail-message",groupId:"export",action:function(n){i._emailWorkItemsSelection(n);ni.recordContextMenuTelemetry(t,"email")}}]},n.prototype._emailWorkItemsSelection=function(n){var t=this._grid.getSelectedWorkItemIds(),s=this._grid._columns,e=$.map(s||[],function(n){if(n.fieldId)return n.name}),f=function(n){u.requireModules(["Admin/Scripts/TFS.Admin.SendMail","WorkItemTracking/Scripts/Dialogs/Models/EmailWorkItems"]).spread(function(t,i){t.Dialogs.sendMail(new i.EmailWorkItemsDialogModel(n))})},i={workItemSelectionOption:{workItems:t,fields:e,store:this._grid.getStore()}},r,o;t&&t.length>1?(r=n.tfsContext,o=et.ProjectCollection.getDefaultConnection().getService(vt.QueryAdapter),lt.createTemporaryQueryIdForSelectedWorkItemIds(r,o,t,e,[],function(n){var t=bt.TempQueryUtils.createTempQueryLink(r,n);$.extend(i.workItemSelectionOption,{extendedText:t,tempQueryId:n,projectId:r.navigation.projectId});f(i)},function(){f(i)})):f(i)},n}();t.EmailWorkItemContextMenuItem=hi;ci=function(){function n(){}return n.prototype.getItems=function(n,t){if(ut.hasAgileToolsBacklogManagementPermission()&&!ni.onlyVirtualWorkItems(t)){var i=bi.getAssignToContextMenuItem(ti,{immediateSave:!0,afterSave:function(){return ni.recordContextMenuTelemetry(t,"assign-to")}},ni.bulkSaveErrorHandler);return i.title=p.empty,[i]}},n}();t.AssignToContextMenuItem=ci;li=function(){function n(n){this._grid=n}return n.prototype.getItems=function(n,t){var i=this;return ni.onlyVirtualWorkItems(t)?[]:[{icon:"bowtie-icon bowtie-switch",text:at.ChangeType,groupId:"export",action:function(){u.requireModules(["WorkItemTracking/Scripts/Dialogs/WITDialogs"]).spread(function(n){n.changeWorkItemType({workItemIds:i._grid.getSelectedWorkItemIds(),tfsContext:ti,container:i._grid.getElement(),saveOnClose:!0,errorHandler:function(n){ni.bulkSaveErrorHandler(n)}});ni.recordContextMenuTelemetry(t,"change-work-item-type")})}}]},n}();t.ChangeTypeContextMenuItem=li;ai=function(){function n(n,t){this._grid=n;this._messageSuppressor=t}return n.prototype.getItems=function(n,t){var i=this;return ni.onlyVirtualWorkItems(t)?[]:[{icon:"bowtie-icon bowtie-work-item-move",text:at.MoveWorkItemTitle,groupId:"export",action:function(){u.requireModules(["WorkItemTracking/Scripts/Dialogs/WITDialogs"]).spread(function(n){n.moveWorkItem({workItemIds:i._grid.getSelectedWorkItemIds(),tfsContext:ti,container:i._grid.getElement(),saveOnClose:!0,beforeSave:function(){i._messageSuppressor.suppressAll()},afterSave:function(n,t){ni.bulkSaveSuccessHandler(n,t)},errorHandler:function(n){ni.bulkSaveErrorHandler(n)},onClose:function(){i._messageSuppressor.disableSuppressAll()}});ni.recordContextMenuTelemetry(t,"move-work-item")})}}]},n}();t.MoveItemContextMenuItem=ai;vi=function(){function n(n){this._grid=n}return n.prototype.getItems=function(n,t){var i=this;return ni.onlyVirtualWorkItems(t)?[]:[{icon:"bowtie-icon bowtie-edit-copy",text:at.CopyToClipboard,groupId:"modify",action:function(){i._grid.copySelectedItems();ni.recordContextMenuTelemetry(t,"copy-as-html")}}]},n}();t.CopyAsHtmlContextMenuItem=vi;yi=function(){function n(n){this._messageSuppressor=n}return n.prototype.getItems=function(n,t){var i=this;return ni.onlyVirtualWorkItems(t)?[]:[{id:"bulk-edit-workitems",text:at.BulkEditSelectedWorkItems,icon:"bowtie-icon bowtie-edit-outline",groupId:"modify",action:function(n){i._showBulkEditDialog(n);ni.recordContextMenuTelemetry(t,"bulk-edit-workitems")}}]},n.prototype._showBulkEditDialog=function(n){var t=this;u.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.BulkEdit"],function(i){var u={tfsContext:n.tfsContext,okCallback:function(u){var f={container:r._element,immediateSave:!0,beforeSave:function(){t._messageSuppressor.suppressAll()},afterSave:function(n,i){ni.bulkSaveSuccessHandler(n,i);t._messageSuppressor.disableSuppressAll()}};i.bulkUpdateWorkItems(n.tfsContext,u.workItemIds,u.changes,f,function(n){t._messageSuppressor.disableSuppressAll();ni.bulkSaveErrorHandler(n)})},buttons:{save:{id:"ok",text:at.Save,click:function(n){r.onOkClick(n)},disabled:"disabled"},cancel:{id:"cancel",text:at.Cancel,click:function(n){r.onCancelClick(n)}}}},r=i.BulkEditDialogs.bulkEditWorkItems(n.selectedWorkItems.filter(function(n){return n>=0}),n.selectedWorkItemProjectTypeMapping,u)})},n}();t.BulkEditContextMenuItem=yi;ri=function(){function n(n,t,i){this._grid=n;this._itemHierarchy=t;this._selectionFilter=i}return n.prototype.filterWorkItemIds=function(n){return this._selectionFilter?this._selectionFilter.filter(n):n},n.prototype.isMoveToPositionAllowed=function(n){var u,t,i,e,r;if(u=k.BacklogContext.getInstance(),!ut.hasAgileToolsBacklogManagementPermission()||u.includeParents||!this._grid.getReorderState()||ni.onlyVirtualWorkItems(n))return!1;for(t=0,i=n;t<i.length;t++)if(e=i[t],r=this._itemHierarchy.getData(e),!r||!r.isOwned)return!1;return!0},n.prototype.isMoveToTopAlwaysHidden=function(){return!0},n.prototype.isMoveToTopHidden=function(){return!0},n.prototype.isMoveToPositionHidden=function(n){var t=this,i=k.BacklogContext.getInstance();return n.some(function(n){var r=t._itemHierarchy.getData(n).type;return!r||!v.contains(i.level.workItemTypes,r,p.ignoreCaseComparer)})},n.prototype.moveToTop=function(n){var t=this;this._grid.performActionWithPreserveSelection(function(){t._moveWorkItems(n,t._getTopIndexFromWorkItemId(n[0]))})},n.prototype.moveToPosition=function(n,t){var i=this;this._grid.performActionWithPreserveSelection(function(){var h=i._grid.getDataManager(),u=null,f=null,e={},r,o,s;n.forEach(function(n){return e[n]=!0});r=i._itemHierarchy.children(0).filter(function(n){return!e[n]});t===1?r[0]!=null&&(f=r[0]):(o=Math.min(r.length-1,t-2),s=r[o],u=s||null);h.moveWorkItems({workItemIds:n,targetLocation:{parentId:0,previousId:u,nextId:f}})})},n.prototype._getTopIndexFromWorkItemId=function(){return n.TOP_POSITION},n.prototype._isWorkItemAtTopIndex=function(n,t){var i=this._grid._getWorkItemDataIndex(n);return i===-1||t===-1||i===t},n.prototype._moveWorkItems=function(n,t){var i=this._grid.getDataManager(),e=i.getParentIndexFromTreeIndex(t),r=i.getWorkItemIdAtTreeIndex(e),u=i.getWorkItemIdAtTreeIndex(t);i.moveWorkItems({workItemIds:n,targetLocation:{parentId:r||0,previousId:null,nextId:u||null}})},n.TOP_POSITION=0,n}();t.MoveToPositionHelper=ri;pi=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.isMoveToTopAlwaysHidden=function(){return!1},t.prototype.isMoveToTopHidden=function(n){var t=this;return n.some(function(n){return t._grid.isReorderRequirementDisabledForWorkItem(n)||n<0||t._isWorkItemAtTopIndex(n,t._getTopIndexFromWorkItemId(n))})},t.prototype.isMoveToPositionHidden=function(){return!0},t.prototype._getTopIndexFromWorkItemId=function(n){var t=this._grid.getDataManager(),r=this._grid.getWorkItemTypeNameById(n),i;if(v.contains(st.BacklogConfigurationService.getBacklogConfiguration().taskBacklog.workItemTypes,r,p.ignoreCaseComparer))return t.getParentIndexFromTreeIndex(t.getWorkItemTreeIndex(n))+1;for(i=t.getWorkItemIdAtTreeIndex(0);i<0;)i=t.getNextWorkItemId(t.getWorkItemOrder(i));return t.getWorkItemTreeIndex(i)},t}(ri);t.IterationMoveToPositionHelper=pi;ui=function(){function n(n,t){this._grid=n;this._moveToPositionHelper=t}return n.prototype.getItems=function(n,t){var r=this,i;if(i=[],t=this._moveToPositionHelper.filterWorkItemIds(t),this._moveToPositionHelper.isMoveToPositionAllowed(t))return this._moveToPositionHelper.isMoveToTopHidden(t)||i.push({text:d.ContextMenu_MoveToTop,disabled:ni.anyWorkItemSaving(this._grid,t),groupId:"core",action:function(){r._moveToPositionHelper.moveToTop(t);ni.recordContextMenuTelemetry(t,"move-to-top")}}),this._moveToPositionHelper.isMoveToPositionHidden(t)||i.push({text:d.ContextMenu_MoveToPosition,disabled:ni.anyWorkItemSaving(this._grid,t),groupId:"core",action:function(){wi.reorderDialogFunc({totalRootLevelItems:r._grid.getDataManager().getTotalRootLevelItems(),moveWorkItemsHandler:function(n){r._moveToPositionHelper.moveToPosition(t,n)}});ni.recordContextMenuTelemetry(t,"move-to-position")}}),i},n}();t.MoveToPositionContextMenuItem=ui;wi=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._totalItems=t.totalRootLevelItems,i._moveWorkItems=t.moveWorkItemsHandler,i._intRegex=/^\d+$/,i}return __extends(t,n),t.reorderDialogFunc=function(n){return h.show(t,n)},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:300,resizable:!1,title:d.ContextMenu_MoveToPosition},t))},t.prototype.initialize=function(){var i=this.getElement(),t,r;i.addClass("reorder-dialog");this._content=$("<div />").addClass("content");this._errorSection=o.BaseControl.createIn(s.MessageAreaControl,i);t=o.getId();r=p.format(d.ReorderDialogMessage,this._totalItems);$("<label />").text(r).attr("for",t+"_txt").appendTo(this._content);this._input=$("<input />").attr("type","text").attr("id",t+"_txt").css("width","100%").appendTo(this._content).val("");this._element.append(this._content);n.prototype.initialize.call(this);this._setFocusOnFirstInput();this.updateOkButton(!0)},t.prototype.onOkClick=function(){var n,t;if(f.logTracePoint("ReorderDialog.onOkClick.start"),n=parseInt(this._input.val(),10),isNaN(n)||!this._intRegex.test(this._input.val())||n<=0||n>this._totalItems){t=p.format(d.ReorderDialogError_Message,this._totalItems);this._errorSection.setError(t);return}try{this._moveWorkItems(n)}catch(i){this._errorSection.setError(i.message?i.message:"Exception occurred while trying to reorder work item.");return}this.close()},t.prototype._getTotalItemCount=function(){return this._totalItems},t.prototype._setFocusOnFirstInput=function(){$("input:visible:first",this._content).focus()},t}(h.ModalDialog);t.ReorderDialog=wi});

define("Agile/Scripts/Backlog/ProductBacklogDataManager",["require","exports","VSS/Diag","VSS/Events/Handlers","VSS/Utils/Array","VSS/VSS","WorkItemTracking/Scripts/Controls/Query/QueryResultGrid"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.ProductBacklogDataManager=void 0;var o=function(){function n(n){this._events=new r.NamedEventCollection;this.setTreeData(n)}return n.prototype.isOwnedItem=function(n){return Boolean(this._ownedIds[n])},n.prototype.setTreeData=function(n){var i,t,r;if(this._treeData=n,this._ownedIds={},this._treeData.ownedIds)for(t=0;t<this._treeData.ownedIds.length;++t)this._ownedIds[this._treeData.ownedIds[t]]=!0;for(this._refreshDataSets(),this._descendantCountMap={},this._hasRealParentIds=!!this._treeData.realParentIds,i=[],e.QueryResultGrid.calculateExpandStates(n.sourceIds,n.targetIds,i,0,0,n.sourceIds.length),t=0,r=i.length;t<r;t++)i[t]&&(this._descendantCountMap[this.getWorkItemIdAtTreeIndex(t)]=i[t])},n.prototype.updateOwnedIds=function(n,t){this._ownedIds[n]=t},n.prototype.getTreeData=function(){return this._treeData.ownedIds=this.getOwnedWorkItemIds()||[],this._treeData},n.prototype.getOwnedWorkItemIds=function(){var n=this;return Object.keys(this._ownedIds).filter(function(t){return n._ownedIds[t]}).map(function(n){return Number(n)})},n.prototype.getWorkItemIds=function(){return this._treeData.targetIds},n.prototype.changeWorkItemId=function(n,t){var r=this.getWorkItemTreeIndex(n);this._raiseIdChange({oldId:n,newId:t});this._treeData.targetIds[r]=t;this._orderId[t]=this._orderId[n];this._visibleOrderId[t]=this._visibleOrderId[n];this._ownedIds[t]=this._ownedIds[n];delete this._orderId[n];delete this._visibleOrderId[n];delete this._ownedIds[n];this._raiseRefresh({selectedWorkItemId:t})},n.prototype.getRootAncestorTreeIndex=function(n){for(var t,i;t===undefined;)i=this.getParentOfWorkItemAtTreeIndex(n),i===0?t=n:n=this.getWorkItemTreeIndex(i);return t},n.prototype.getFirstLeafTreeIndex=function(n){for(var u=this._treeData.sourceIds,t=n,r=u.length;t<r;t++)if(this.getDescendantCount(this.getWorkItemIdAtTreeIndex(t))===0)return t;return-1},n.prototype.getLastLeafTreeIndex=function(n){return n+this.getDescendantCount(this.getWorkItemIdAtTreeIndex(n))},n.prototype.getLastLeafWorkItemId=function(n){var t=this.getLastLeafTreeIndex(this.getWorkItemTreeIndex(n));return this.getWorkItemIdAtTreeIndex(t)},n.prototype.getWorkItemTreeIndex=function(n){var t=this.getWorkItemOrder(n);return t!==undefined&&(t-=1),t},n.prototype.getWorkItemOrder=function(n){return this._orderId[n]},n.prototype.getChildrenWorkItemIds=function(n){var e,t,s;var u=this._treeData.targetIds,h=this._treeData.sourceIds,o=[],r=0,f=0;if(n===0)r=0,f=u.length;else{if(e=this.getWorkItemTreeIndex(n),e===undefined)return null;r=e+1;f=this.getDescendantCount(n)}for(t=r,s=r+f;t<s;t+=1+this.getDescendantCount(u[t]))o.push(u[t]);return o},n.prototype.getDescendantWorkItemIds=function(n){var t=this.getWorkItemTreeIndex(n)+1,r=this.getDescendantCount(n);return this._treeData.targetIds.slice(t,t+r)},n.prototype.getDescendantCount=function(n){return this._descendantCountMap[n]||0},n.prototype.getParentWorkItemId=function(n){return this.getParentOfWorkItemAtTreeIndex(n-1)},n.prototype.getParentIdFromWorkItemId=function(n,t){t===void 0&&(t=!1);var r=this.getWorkItemTreeIndex(n);return n&&r!=null?t&&this._hasRealParentIds?this.getRealParentId(r):this.getParentOfWorkItemAtTreeIndex(r):null},n.prototype.getRealParentId=function(n){return this._hasRealParentIds?this._treeData.realParentIds[n]:0},n.prototype.getParentOfWorkItemAtTreeIndex=function(n){return this._treeData.sourceIds[n]||0},n.prototype.getParentIndexFromTreeIndex=function(n){var t=this.getParentOfWorkItemAtTreeIndex(n);return t!==0?this.getWorkItemTreeIndex(t):-1},n.prototype.getPrevWorkItemId=function(n){for(var r=this._treeData.sourceIds,u=this.getParentWorkItemId(n),t=n-2;t>=0;t-=1)if(r[t]===u)return this._treeData.targetIds[t];return 0},n.prototype.getNextWorkItemId=function(n){for(var u=this._treeData.sourceIds,f=this.getParentWorkItemId(n),t=n,r=u.length;t<r;t+=1)if(u[t]===f)return this._treeData.targetIds[t];return 0},n.prototype.getWorkItemIdAtOrder=function(n){return this.getWorkItemIdAtTreeIndex(n-1)},n.prototype.getWorkItemIdAtTreeIndex=function(n){return this._treeData.targetIds[n]||0},n.prototype.getMaxOrder=function(){return this._treeData.targetIds.length},n.prototype.normalizeOrder=function(n){var t=this._treeData.targetIds.length;return n<1?n=1:n>t&&(n=t+1),n},n.prototype.getItemsCount=function(){return this._treeData&&this._treeData.targetIds&&this._treeData.targetIds.length||0},n.prototype.addGroupingItem=function(n,t,i,r){i===void 0&&(i=!0);this._addWorkItemInternal(n,r?r:this.getMaxOrder()+1,null,t,i)},n.prototype.addWorkItem=function(n,t,r,u,f){f===void 0&&(f=!0);this._addWorkItemInternal(n,t,r,u,f)},n.prototype.removeWorkItem=function(n,t){var r,o,u,s,f,e,h;if(t===void 0&&(t=!0),r=this.getWorkItemTreeIndex(n),r!==undefined){for(o=this.getParentIndexFromTreeIndex(r),u=this.getDescendantCount(n)+1,delete this._ownedIds[n],s=this.getDescendantWorkItemIds(n)||[],f=0,e=s;f<e.length;f++)h=e[f],delete this._ownedIds[h];this._updateChildrenCounts(r,u*-1);this._treeData.sourceIds.splice(r,u);this._treeData.linkIds.splice(r,u);this._treeData.targetIds.splice(r,u);this._hasRealParentIds&&this._treeData.realParentIds.splice(r,u);this._refreshDataSets();this._raiseRemovedItem({workItemIndex:r,parentWorkItemIndex:o,treeSize:u,workItemId:n});t&&this._raiseRefresh({selectedWorkItemId:n})}},n.prototype.removeWorkItems=function(n){for(var t=0,i=n.length;t<i;t++)this.removeWorkItem(n[t],!1);this._raiseRefresh({})},n.prototype.getAncestorIndexes=function(n){var t=[];for(n=this.getParentIndexFromTreeIndex(n);n!==-1&&n!==undefined;)t.push(n),n=this.getParentIndexFromTreeIndex(n);return t},n.prototype.reparentWorkItems=function(n,t,i,r){i===void 0&&(i=!0);r===void 0&&(r=!0);var u=this.getChildrenWorkItemIds(t);this.moveWorkItems({workItemIds:n,targetLocation:{parentId:t,previousId:u&&u.length?u[u.length-1]:null,nextId:null}},r,i)},n.prototype.moveWorkItems=function(t,r,f,e){var v,b,g,a,p,l,nt;r===void 0&&(r=!0);f===void 0&&(f=!0);e===void 0&&(e=!1);var w={targetLocation:t.targetLocation,workItemIds:t.workItemIds,workItemIdsToReparent:[],performReorder:r,treeChanges:[],perfScenario:t.perfScenario},s=0,h=t.targetLocation;for(h.parentId&&(s=this.getWorkItemTreeIndex(h.parentId)+(this._descendantCountMap[t.targetLocation.parentId]||0)+1),h.previousId!==null?s=this.getWorkItemTreeIndex(h.previousId)+(this._descendantCountMap[t.targetLocation.previousId]||0)+1:h.nextId!==null&&(s=this.getWorkItemTreeIndex(h.nextId)),v=0,b=t.workItemIds;v<b.length;v++){var k=b[v],c=this.getDescendantCount(k)+1,o=this.getWorkItemTreeIndex(k),d=this.getAncestorIndexes(o),y=[];for(h.parentId&&(g=this.getWorkItemTreeIndex(h.parentId),y=[g].concat(this.getAncestorIndexes(g))),a=0,p=d.length;a<p;a+=1)l=this.getWorkItemIdAtTreeIndex(d[a]),this._descendantCountMap.hasOwnProperty(l)&&(this._descendantCountMap[l]-=c,this._descendantCountMap[l]===0&&delete this._descendantCountMap[l]);for(a=0,p=y.length;a<p;a+=1)l=this.getWorkItemIdAtTreeIndex(y[a]),this._descendantCountMap.hasOwnProperty(l)?this._descendantCountMap[l]+=c:this._descendantCountMap[l]=c;this._treeData.sourceIds[o]!==h.parentId&&w.workItemIdsToReparent.push(k);this._treeData.sourceIds[o]=t.targetLocation.parentId;this._treeData.linkIds[o]=t.targetLocation.parentId!==0?n.CHILD_LINKTYPE_ID:0;this._hasRealParentIds&&t.targetLocation.parentId&&(this._treeData.realParentIds[o]=t.targetLocation.parentId);u.reorder(this._treeData.sourceIds,o,s,c);u.reorder(this._treeData.linkIds,o,s,c);u.reorder(this._treeData.targetIds,o,s,c);this._hasRealParentIds&&u.reorder(this._treeData.realParentIds,o,s,c);w.treeChanges.push({oldTreeIndex:o,newTreeIndex:s,treeSize:c,affectedSourceAncestorIndexes:d,affectedTargetAncestorIndexes:y});this._refreshDataSets();s<=o&&(s+=c)}this._raiseMoveItems(w);nt={};e===!0&&(nt={selectedWorkItemId:t.workItemIds[0]});f&&this._raiseRefresh(nt)},n.prototype.refresh=function(){this._raiseRefresh({})},n.prototype.isLeafNode=function(n){return this.getDescendantCount(n)===0},n.prototype.isRootNode=function(n){var t=this.getWorkItemTreeIndex(n),r=t===undefined?-1:this.getParentOfWorkItemAtTreeIndex(t);return r===0},n.prototype.getRootWorkItemId=function(n){var t,r,u=n;do{if(t=u,r=this.getWorkItemTreeIndex(t),r===undefined){t=undefined;break}u=this.getParentOfWorkItemAtTreeIndex(r)}while(u!==0);return t},n.prototype.attachRefresh=function(t){this._events.subscribe(n.EVENT_REFRESH,t)},n.prototype.detachRefresh=function(t){this._events.unsubscribe(n.EVENT_REFRESH,t)},n.prototype.attachNewItem=function(t){this._events.subscribe(n.EVENT_NEW_ITEM,t)},n.prototype.detachNewItem=function(t){this._events.unsubscribe(n.EVENT_NEW_ITEM,t)},n.prototype.attachMoveItems=function(t){this._events.subscribe(n.EVENT_MOVE_ITEMS,t)},n.prototype.detachMoveItems=function(t){this._events.unsubscribe(n.EVENT_MOVE_ITEMS,t)},n.prototype.attachIdChange=function(t){this._events.subscribe(n.EVENT_ID_CHANGE,t)},n.prototype.detachIdChange=function(t){this._events.unsubscribe(n.EVENT_ID_CHANGE,t)},n.prototype.attachRemovedItem=function(t){this._events.subscribe(n.EVENT_REMOVED_ITEM,t)},n.prototype.detachRemovedItem=function(t){this._events.unsubscribe(n.EVENT_REMOVED_ITEM,t)},n.prototype.getWorkItemVisibleOrder=function(n){return this._visibleOrderId[n]||null},n.prototype.getTotalRootLevelItems=function(){return this._totalRootLevelItems},n.prototype.getWorkItemIndexFromVisibleOrder=function(n){var i=this,t;return $.each(this._visibleOrderId,function(r,u){if(u===n)return t=i.getWorkItemTreeIndex(r),!1}),t},n.prototype.getWorkItemIndexFromOrder=function(n){var i=this,t;return $.each(this._orderId,function(r,u){if(u===n)return t=i.getWorkItemTreeIndex(r),!1}),t},n.prototype.dispose=function(){this._events&&(this._events.unsubscribeAll(),this._events=null);this._treeData=null;this._orderId=null;this._visibleOrderId=null;this._descendantCountMap=null;this._hasRealParentIds=null;this._ownedIds=null;this._totalRootLevelItems=null},n.prototype._addWorkItemInternal=function(t,r,u,f,e){var c=this;e===void 0&&(e=!0);var s=0,h=0,o=0;f?(r>0&&$.each(this.getDescendantWorkItemIds(f),function(n,t){var i=c.getWorkItemOrder(t);if(i>r)return o=c.getWorkItemTreeIndex(f)+n+1,!1}),o===0&&(o=this.getLastLeafTreeIndex(this.getWorkItemTreeIndex(f))+1),s=f,h=n.CHILD_LINKTYPE_ID):(o=this.normalizeOrder(r)-1,s=this._treeData.sourceIds[o]||0,h=this._treeData.linkIds[o]||0);this._treeData.sourceIds.splice(o,0,s);this._treeData.linkIds.splice(o,0,h);this._treeData.targetIds.splice(o,0,t);this._hasRealParentIds&&this._treeData.realParentIds.splice(o,0,s);this._updateChildrenCounts(o,1);this._refreshDataSets();this._raiseNewItem({workItemId:t,workItem:u});e&&this._raiseRefresh({selectedWorkItemId:t})},n.prototype._refreshDataSets=function(){for(var i=0,r=[],u=[],t=this._treeData.targetIds,f=this._treeData.sourceIds,n=0,e=t.length;n<e;n+=1)f[n]||(u[t[n]]=++i),r[t[n]]=n+1;this._orderId=r;this._visibleOrderId=u;this._totalRootLevelItems=i},n.prototype._updateChildrenCounts=function(n,t){for(var u=this._treeData.sourceIds,r=u[n],f=this._descendantCountMap;r!==0;)f[r]=(f[r]||0)+t,n=this.getWorkItemTreeIndex(r),r=u[n]},n.prototype._raiseRefresh=function(t){this._events.invokeHandlers(n.EVENT_REFRESH,this,t)},n.prototype._raiseNewItem=function(t){this._events.invokeHandlers(n.EVENT_NEW_ITEM,this,t)},n.prototype._raiseMoveItems=function(t){this._events.invokeHandlers(n.EVENT_MOVE_ITEMS,this,t)},n.prototype._raiseIdChange=function(t){this._events.invokeHandlers(n.EVENT_ID_CHANGE,this,t)},n.prototype._raiseRemovedItem=function(t){this._events.invokeHandlers(n.EVENT_REMOVED_ITEM,this,t)},n.EVENT_REFRESH="refresh-event",n.EVENT_NEW_ITEM="new-item-event",n.EVENT_ID_CHANGE="id-change-event",n.EVENT_MOVE_ITEMS="move-items-event",n.EVENT_REMOVED_ITEM="removed-item-event",n.CHILD_LINKTYPE_ID=2,n}();t.ProductBacklogDataManager=o;f.initClassPrototype(o,{_events:null,_treeData:null,_orderId:null,_descendantCountMap:null})});

define("Agile/Scripts/Backlog/Backlog",["require","exports","q","Agile/Scripts/Backlog/BacklogExpandCollapseButtonBehavior","Agile/Scripts/Backlog/Constants","Agile/Scripts/Generated/HubConstants","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/Controls/PopupContent","VSS/Events/Services","VSS/FeatureAvailability/Services","VSS/Settings/Services","VSS/Utils/Accessibility","WorkItemTracking/Scripts/Controls/Filters/FilterBar","WorkItemTracking/Scripts/Filtering/FilterManager","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Queries/Components/ColumnOptions/ColumnOptionsPanel","WorkItemTracking/Scripts/Queries/Components/QueriesHubContext","WorkItemTracking/Scripts/Queries/Components/QuerySaveDialog.Renderer","WorkItemTracking/Scripts/Queries/Models/Models","WorkItemTracking/Scripts/RecycleBinConstants","WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.RecycleBin","WorkItemTracking/Scripts/Utils/Events","WorkItemTracking/Scripts/Utils/PermissionHandler","WorkItemTracking/Scripts/Utils/RollupHelpers","Agile/Scripts/Backlog/ProductBacklogContextMenu","Agile/Scripts/Backlog/ProductBacklogDataManager","Agile/Scripts/Backlog/ProductBacklogGrid","Agile/Scripts/Common/Agile","Agile/Scripts/Common/Controls","Agile/Scripts/Common/CustomerIntelligence","Agile/Scripts/Common/Utils","Agile/Scripts/Common/WorkItemChanges","Agile/Scripts/Resources/TFS.Resources.Agile","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Core.Utils","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.WebSettingsService","VSS/Controls","VSS/Controls/Grids","VSS/Controls/Menus","VSS/Controls/Navigation","VSS/Controls/Notifications","VSS/Diag","VSS/Error","VSS/Events/Action","VSS/Events/Handlers","VSS/Resources/VSS.Resources.Common","VSS/Telemetry/Services","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","WorkItemTracking/Scripts/Controls/Query/QueryResultGrid","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/SharedScripts/WorkItemDialogShim","VSS/LoaderPlugins/Css!Agile/Backlog/Backlogs"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi){var or,sr,fr,hr,cr,yr,rr,lr,ar;Object.defineProperty(t,"__esModule",{value:!0});t.AddPanelBehavior=t.OrphanGroupRenderer=t.OrphanGroup=t.AddChildTaskGridBehavior=t.BaseGridBehavior=t.BacklogOwnershipEvaluator=t.Backlog=t.ProductBacklogItemHierarchyAdapter=t.QuickExpandCollapseBehavior=t.AddBacklogItemStatus=void 0;var nr=vi.delegate,tr=dt.TfsContext.getDefault(),pr=wt.TeamAwarenessService,ir=lt.WorkItemUtils,vr=wi.getErrorMessage,ur=h.getService(),er;(function(n){n[n.Added=1]="Added";n[n.WorkItemFormOpened=2]="WorkItemFormOpened"})(er=t.AddBacklogItemStatus||(t.AddBacklogItemStatus={}));or=function(){function n(n,t){this._itemHierarchy=n;this._expandCollapseHelper=t}return n.prototype.expandShallowestLevel=function(){for(var r=this,t=0,n=this._itemHierarchy.children(t),i=[],u=[];n.length>0;){if(t=n.pop(),this._expandCollapseHelper.isExpanded(t))i=i.concat(this._itemHierarchy.children(t));else{n.push(t);break}n.length===0&&i.length>0&&(n=i,i=[])}$.each(n,function(n,t){r._expandCollapseHelper.isExpanded(t)||(r._expandCollapseHelper.expand(t),u=u.concat(r._itemHierarchy.children(t)))});$.each(u,function(n,t){r._expandCollapseHelper.collapse(t)})},n.prototype.collapseDeepLevel=function(){for(var e=this,t=0,i=this._itemHierarchy.children(t),u=[],n=[],f=[],r;i.length>0;)if(t=i.pop(),r=this._itemHierarchy.children(t),r&&r.length>0&&(n=n.concat(r),u.push(t)),i.length===0)if(n.length>0)f=u,i=n,n=u=[];else break;$.each(f,function(n,t){e._expandCollapseHelper.collapse(t)})},n}();t.QuickExpandCollapseBehavior=or;sr=function(){function n(n,t,i){this._productBacklogDataManager=n;this._getWorkItemTypeAndState=t;this._isExpanded=i}return n.prototype.nextSibling=function(t){if(t){var r=this._productBacklogDataManager.getWorkItemOrder(t),i=this._productBacklogDataManager.getNextWorkItemId(r);return i===0?n.ITEM_NOT_PRESENT:i}return null},n.prototype.previousSibling=function(t){if(t){var r=this._productBacklogDataManager.getWorkItemOrder(t),i=this._productBacklogDataManager.getPrevWorkItemId(r);return i===0?n.ITEM_NOT_PRESENT:i}return null},n.prototype.parent=function(t){if(t){var r=this._productBacklogDataManager.getWorkItemOrder(t),i=this._productBacklogDataManager.getParentWorkItemId(r);return i===0?n.ITEM_NOT_PRESENT:i}return null},n.prototype.children=function(t){if(t===0||this._isExpanded(t)){var i=this._productBacklogDataManager.getChildrenWorkItemIds(t);return i?i:n.CHILDREN_NOT_PRESENT}return n.CHILDREN_NOT_PRESENT},n.prototype.depth=function(n){for(var i=0,t=n;t;)++i,t=this.parent(t);return i},n.prototype.getData=function(n){if(n){var t=this._getWorkItemTypeAndState(n);return{id:n,type:t[0],state:t[1],isOwned:this._productBacklogDataManager.isOwnedItem(n)}}return null},n.ITEM_NOT_PRESENT=0,n.CHILDREN_NOT_PRESENT=[],n}();t.ProductBacklogItemHierarchyAdapter=sr;fr=function(){function n(t){var i=this,r;(this.filterMenuItem={id:n.CMD_TOGGLE_FILTER,text:ci.Filter,title:ci.FilterToolTip,setTitleOnlyOnOverflow:!0,showText:!1,icon:"bowtie-icon bowtie-search-filter",cssClass:"toggle-filter-bar"},this._expandClickCount=0,this._collapseClickCount=0,this._telemetryQuickExpandCollapseDelay=3e4,this._beforeBulkEdit=function(){i._getMessageSuppressor().suppressAll()},this._afterBulkEdit=function(n){ft.ContextMenuContributionUtils.bulkSaveSuccessHandler(n.workItems,n.changes);i._getMessageSuppressor().disableSuppressAll()},this._errorBulkEdit=function(n){i._getMessageSuppressor().disableSuppressAll();ft.ContextMenuContributionUtils.bulkSaveErrorHandler(n)},this._setIterationPath=function(n){var t=n.workItemIds,r=n.iterationPath;wi.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.BulkEdit"],function(n){n.bulkUpdateWorkItems(tr,t,[{fieldName:"System.IterationPath",value:r}],{immediateSave:!0,beforeSave:nr(i,i._beforeIterationPathChange),afterSave:nr(i,i._afterIterationPathChange)},ft.ContextMenuContributionUtils.bulkSaveErrorHandler)})},this._evaluateMembershipAction=function(n,t){var r=n.workItem;i._evaluateMembership(r,function(i,r){r?t(n):n.sendResult(!1)})},this._bulkeditEvaluateMembership=function(n,t){var f=n.workItems.slice(0),r=[],u=function(e,o){var s,h,c;if(o||r.push(e),e=f.pop(),e)i._evaluateMembership(e,u);else{if(r.length>0){for(s=0,h=r;s<h.length;s++)if(c=h[s],i.getGridDataManager().getDescendantCount(c.id)===0)i._removeWorkItemFromGrid(c.id,!1);else{i._showRefreshMessage(yt.BulkEdit_Backlog_RefreshRequired);i._grid.refresh();return}i._beginGetSettingsField(pt.ProjectProcessConfiguration.FieldType.Team,function(t){var o=$("<div>").addClass("backlog-info"),l=$("<p>"),a=$("<ul>"),e,c,u,f,p;l.text(yt.BulkEdit_WorkItemRemovedFromBacklog_ListHeader);var s=r[0],v=[bt.CoreFieldRefNames.TeamProject,bt.CoreFieldRefNames.IterationPath,bt.CoreFieldRefNames.State,t],h={},y={};for(e=0,c=n.changes;e<c.length;e++)u=c[e],f=s.getField(u.fieldName),f&&(y[f.fieldDefinition.referenceName]=f,h[u.fieldName]=f.fieldDefinition.id===bt.CoreField.TeamProject?u.value.name:u.value);p=i._checkFieldChanges(s,y,v);$.each(p,function(n,t){var r,i;if(t&&(r=s.getField(v[n]).fieldDefinition,i=h[r.name],i||(i=h[r.referenceName]),i)){var u=$("<li>"),f=yi.format("<strong>{0}<\/strong>",r.name),e=yi.format("<strong>{0}<\/strong>",i);u.append(yi.format(yt.BacklogInfo_WorkItemRemoved_ListItem,f,e));a.append(u)}});o.append(l);o.append(a);i.getMessageArea().setMessage({header:yt.BulkEdit_WorkItemRemovedFromBacklog_Header,content:o},fi.MessageAreaType.Info)});i._grid.refresh()}else i._beginGetSettingsField(pt.ProjectProcessConfiguration.FieldType.Order,function(t){for(var e,f,r=0,u=n.changes;r<u.length;r++)if(e=u[r],f=i._workItemManager.store.getFieldDefinition(e.fieldName),f&&yi.ignoreCaseComparer(f.referenceName,t)===0){i._showRefreshMessage(yt.BulkEdit_Backlog_OrderFieldRefresh);return}});n.workItems.length!==r.length&&t(n)}};u(null,!0)},this._onFilterChangedAndResize=function(){i._onFilterChanged();i._grid.resize()},this.__onFilterChangedHandler=function(){i._onFilterChanged()},this._onGridIdChange=function(n,t){i._grid.getRowSavingManager().changeId(t.oldId,t.newId)},this._onGridDragToSprintView=function(n,t){var u=t.action,r=i._getSprintView();switch(u){case ot.ProductBacklogGrid.DRAG_OPERATION_START:r.enableFocusStyling(!1);break;case ot.ProductBacklogGrid.DRAG_OPERATION_STOP:r.enableFocusStyling(!0)}},this._resizeGrid=function(){i._grid.resize()},this._handleBacklogError=function(n){i.getMessageArea().setError(vr(n))},this.getSelectedBacklogGridItems=function(){var n=i.getGrid();return n.getSelectedWorkItemIds().map(function(t){return{workItemId:t,workItemType:n.getWorkItemTypeNameById(t)}})},this._reorderRequestComplete=function(n,t){var r,f,u=t.processedIds;if(t.success&&u)for(r=0,f=u.length;r<f;r++)i._getRowSavingManager().clearRowSaving(u[r]);else t.clientError?i.getMessageArea().setError(yi.format(yt.StatusMessage_RecoverableError,t.error.message),function(){i._reorderManager.resume()}):i.getMessageArea().setError(yi.format(yt.StatusMessage_FatalError,t.error.message),function(){window.location.reload()})},this._querySaveCompleted=function(n,t){t.success?(i._showBacklogQueryCreatedMessage(t.query.path),li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,ct.AgileCustomerIntelligenceFeature.TELEMETRY_BACKLOGS_CREATEQUERY,{}))):i._showBacklogQueryErrorMessage();ei.logTracePoint("Backlog.NewQuerySave.Complete")},this._verifyWorkItemFilterMembership=function(n,t){i.getGridDataManager().getWorkItemTreeIndex(n.workItem.id)!==undefined?t(n):n.sendResult(!0)},this._filterSelectedAction=function(n,t){var r=i.getSelectionFilter();return r?r.filter(n.selectedWorkItemIds):$.isFunction(t)?t(n):void 0},this._processMembershipEvaluation=function(n,t){var r=t.workItem,f=t.isMember,u=t.changedFields;f?i._checkFieldChanges(r,u,[bt.CoreFieldRefNames.WorkItemType])[0]?i._showRefreshMessage():i._beginGetSettingsField(pt.ProjectProcessConfiguration.FieldType.Order,function(n){i._checkFieldChanges(r,u,[n])[0]&&i._showOrderFieldChangedMessage()}):i.getGridDataManager().getDescendantCount(r.id)===0?i._beginShowRemovedWorkItemMessage(r,u,function(){i._removeWorkItemFromGrid(r.id)}):i._showRefreshMessage()},this._getAvailableNotAFieldColumns=function(){var n=i._workItemManager.store.getFieldDefinition(bt.CoreFieldRefNames.Parent);return n?[]:[{referenceName:f.BacklogConstants.ParentColumnRefName,displayName:yt.ProductBacklog_ParentColumnTitle}]},this._onColumnsChanged=function(){i._saveColumns(i._grid.getColumns())},this._options=t,this._backlogContext=st.BacklogContext.getInstance(),this._eventHelper=t.eventHelper,this._events=new hi.NamedEventCollection,this._$element=t.$backlogElement,this._workItemManager=w.WorkItemManager.get(gt.ProjectCollection.getDefaultConnection().getService(di.WorkItemStore)),r=gt.ProjectCollection.getConnection(tr).getService(pr),this._teamSettings=r.getTeamSettings(this._backlogContext.team.id),this._isIterationBacklog=!1,this._workItemIdsToRemove={},this._setupBacklogMembershipTracking(),t.deferInitialization)||this.initialize()}return n.prototype.initialize=function(){this._options.isNewHub?this._attachCommonConfigurationRegistration():(this._createToolbar(),this._createBacklogsCommonMenuBar(),this._createRecycleBin());this._attachWorkItemChangeEvent();this._attachBulkEditEvents();this._registerGridWorkItemFilter();this._registerBacklogQuerySaveCompleted();this._registerMessageListeners();this._reorderManager=this._options.reorderManager;this._reorderOperationQueue=new kt.OperationQueue;this._moveToIteration=new lt.MoveToIterationHelper;this._registerMoveToIterationAction();lt.enableDragCancelling();this._attachDeleteEvents();this._createToastNotification()},n.prototype.getAddPanel=function(){return this.addPanel},n.prototype._attachBulkEditEvents=function(){this._eventHelper.attachEvent(it.WorkItemEvents.BEFORE_BULK_EDIT,this._beforeBulkEdit);this._eventHelper.attachEvent(it.WorkItemEvents.AFTER_BULK_EDIT,this._afterBulkEdit);this._eventHelper.attachEvent(it.WorkItemEvents.BULK_EDIT_ERROR,this._errorBulkEdit)},n.prototype._disposeRecycleBin=function(){this._recycleBin&&(this._recycleBin.dispose(),this._recycleBin=null)},n.prototype._createRecycleBin=function(){this._disposeRecycleBin();var n=this._getRecycleBinOptions();this._recycleBin=ti.Enhancement.enhance(tt.RecycleBin,".recycle-bin",n)},n.prototype._detachDeleteEvents=function(){this._deleteItemsEventDelegate&&(ur.detachEvent(nt.RecycleBinConstants.EVENT_DELETE_STARTED,this._deleteItemsEventDelegate),this._deleteItemsEventDelegate=null);this._deleteItemsSucceededEventDelegate&&(ur.detachEvent(nt.RecycleBinConstants.EVENT_DELETE_SUCCEEDED,this._deleteItemsSucceededEventDelegate),this._deleteItemsSucceededEventDelegate=null);this._deleteItemsFailedEventDelegate&&(ur.detachEvent(nt.RecycleBinConstants.EVENT_DELETE_FAILED,this._deleteItemsFailedEventDelegate),this._deleteItemsFailedEventDelegate=null)},n.prototype._attachDeleteEvents=function(){var n=this;this._detachDeleteEvents();this._deleteItemsEventDelegate=function(t){var i=t.workItemIds,r=n._grid.getSelectedDataIndex();n._removeWorkItemsFromGrid(i);n._grid.setRowSelection(r)};ur.attachEvent(nt.RecycleBinConstants.EVENT_DELETE_STARTED,this._deleteItemsEventDelegate);this._deleteItemsSucceededEventDelegate=function(t,i){i&&i.refreshRequired&&n.getMessageArea().setMessage(yt.BacklogInfo_RefreshRequired,fi.MessageAreaType.Info)};ur.attachEvent(nt.RecycleBinConstants.EVENT_DELETE_SUCCEEDED,this._deleteItemsSucceededEventDelegate);this._deleteItemsFailedEventDelegate=function(t){n.getMessageArea().setError(t,function(){window.location.reload()})};ur.attachEvent(nt.RecycleBinConstants.EVENT_DELETE_FAILED,this._deleteItemsFailedEventDelegate)},n.prototype._detachBulkEditEvents=function(){this._eventHelper.detachEvent(it.WorkItemEvents.BEFORE_BULK_EDIT,this._beforeBulkEdit);this._eventHelper.detachEvent(it.WorkItemEvents.AFTER_BULK_EDIT,this._afterBulkEdit);this._eventHelper.detachEvent(it.WorkItemEvents.BULK_EDIT_ERROR,this._errorBulkEdit)},n.prototype._registerMoveToIterationAction=function(){si.getService().registerActionWorker(st.Actions.BACKLOG_MOVE_TO_ITERATION,this._setIterationPath)},n.prototype._beforeIterationPathChange=function(n){this._suppressWorkItems(n);this.getGrid().markRowsAsSaving(n)},n.prototype._afterIterationPathChange=function(n,t){for(var u,i=this,f=t[0].value,r=0,e=n;r<e.length;r++)u=e[r],lt.WorkItemUtils.beginUpdateChildWorkItems(u,!1,bt.CoreField.IterationPath,f,function(n){return i._isWorkItemInRequirementsBacklog(n)},function(){i.isDisposed||(i.getGrid().clearRowsAsSaving(n),i._unsuppressWorkItems(n),si.getService().performAction(st.Actions.VERIFY_MEMBERSHIP_EXPLICIT,{workItems:n}))},ft.ContextMenuContributionUtils.bulkSaveErrorHandler,lt.WorkItemUtils.getShouldUpdateMethodForIterationAssignment(u,f),function(n){i._suppressWorkItems(n)})},n.prototype._suppressWorkItems=function(n){this.suppressMembershipEvaluation(n.map(function(n){return n.id}))},n.prototype._unsuppressWorkItems=function(n){for(var u,f,i=n.map(function(n){return n.id}),t=0,r=i;t<r.length;t++)u=r[t],f=this.getGridDataManager().getDescendantWorkItemIds(u)||[],this.unsuppressMembershipEvaluation(f);this.unsuppressMembershipEvaluation(i)},n.prototype.openAddChild=function(){var n=this._grid.getSelectedRowInfo();this._addChildBehavior.openAddChild(n)},n.prototype._focusBacklogGrid=function(){this._grid.getSelectionCount()<=0&&this._grid.getTotalRows()>0&&(this._grid.focus(0),this._grid._addSelection(0))},n.prototype.getAddPanelContainer=function(){return $(".add-panel-data:first",this.getElement())},n.prototype.readAddPanelVisibleSetting=function(){var i=gt.Application.getConnection(tr).getService(ni.WebSettingsService),t=i.readLocalSetting(n.ADD_PANEL_VISIBLE_STATE_KEY,ni.WebSettingsScope.User);t||(t="true");this.addPanelVisible=t==="true"},n.prototype.writeAddPanelVisibleSetting=function(){var t=gt.Application.getConnection(tr).getService(ni.WebSettingsService);t.writeLocalSetting(n.ADD_PANEL_VISIBLE_STATE_KEY,""+this.addPanelVisible,ni.WebSettingsScope.User)},n.prototype.initializeAddPanel=function(n){var t=this,r;return!this.addPanel&&this.addPanelVisible===!0||n?(r=new a.ProgressAnnouncer({announceStartMessage:yt.ProductBacklogLoading_AddPanelStart,announceEndMessage:yt.ProductBacklogLoading_AddPanelEnd,announceErrorMessage:yt.ProductBacklogLoading_AddPanelError}),this.addPanelSettings.announcer=r,wi.requireModules(["Agile/Scripts/Backlog/ProductBacklogAddPanel"]).spread(function(n){var u=t.getAddPanelContainer(),i,r;t.addPanel=new n.ProductBacklogAddPanel(t.addPanelSettings,u);i=function(){var n=t.getGrid();t._setupAddPanelRowHighlight();t.addPanel.detachDisplayCompleteEvent(i)};r=function(){var n=t.getGrid();n.resize()};t.addPanel.registerDisplayCompleteEvent(i);t.addPanel.registerDisplayCompleteEvent(r);t.addPanel.registerAddEvent(nr(t,t.addWorkItem));t.addPanel.registerCloseEvent(function(){return t.setAddPanelState(!1)});t.addPanel.render()})):i(null)},n.prototype._toggleAddPanel=function(){this.setAddPanelState(!this.addPanelVisible)},n.prototype.setAddPanelState=function(n){var t=this,r,i;this._options.isNewHub||(r=this.addPanelVisible,this.addPanelVisible=n,i=function(n){t.addPanel&&(n?(t.addPanel.show(),t._updateAddPanelDisabledState()):t.addPanel.hide())},n?this.addPanel?i(!0):this.initializeAddPanel(!0).then(function(){i(!0)}):i(!1),this.addPanelVisible!==r&&(this.writeAddPanelVisibleSetting(),this._refreshToolbarCommandStates()))},n.prototype._registerMessageListeners=function(){var t=this;si.getService().registerActionWorker(n.SHOW_REFRESH_WARNING,function(){t._showRefreshMessage()});si.getService().registerActionWorker(st.Actions.BACKLOG_SHOW_ERROR_MESSAGE,function(n){t.getMessageArea().setMessage({header:n.message,content:n.content},fi.MessageAreaType.Error)})},n.prototype._checkLimit=function(){return},n.prototype._refreshDisplay=function(){return},n.prototype._getBacklogQueryName=function(){throw new Error("This is an abstract method.");},n.prototype._saveColumns=function(){return},n.prototype._saveDialogResultsColumns=function(){return},n.prototype._saveColumnSettings=function(n,t,i){return __awaiter(this,void 0,void 0,function(){var e,s,r,u,f=this;return __generator(this,function(){return e=(u={},u[t]=n,u),s=l.getService(),r=function(n){f._grid.hideBusyOverlay();oi.publishErrorToTelemetry(n);f.getMessageArea().setError(yt.Columns_ErrorSaving,function(){window.location.reload()})},this._grid.showBusyOverlay(),s.setEntries(e,0,o.TfsSettingsScopeNames.WebTeam,this._backlogContext.team.id).then(function(){if(f._grid.hideBusyOverlay(),i)try{i()}catch(n){r(n)}},function(n){r(n)}),[2]})})},n.prototype._publishParentColumnTelemetry=function(n,t,i){var u=this._getDisplayColumns(),e=u.some(function(n){return n.name===f.BacklogConstants.ParentColumnRefName||n.name===bt.CoreFieldRefNames.Parent}),r=n.some(function(n){return n.name===f.BacklogConstants.ParentColumnRefName||n.name===bt.CoreFieldRefNames.Parent});e!==r&&(r?t():i())},n.prototype._setupMembershipEvaluation=function(){var n=this;this._eventHelper.attachEvent(st.Notifications.MEMBERSHIP_EVALUATED,this._processMembershipEvaluation);this._grid.attachWorkItemPagedEvent(function(t,i){var f=t.getColumnMap()[n._teamSettings.teamFieldName],r=i.pageData[f],u;r&&(u=n._getOwnerShipEvaluator(),u.checkTeamFieldValue(r,function(t){n._gridDataManager.updateOwnedIds(i.workItemId,t)}))})},n.prototype._setupBacklogMembershipTracking=function(){this._membershipTracker=new st.MembershipTracker(this._eventHelper);si.getService().registerActionWorker(st.Actions.BACKLOG_BULK_EDIT_EVALUATE_MEMBERSHIP,this._bulkeditEvaluateMembership);si.getService().registerActionWorker(st.Actions.EVALUATE_MEMBERSHIP,this._evaluateMembershipAction)},n.prototype._evaluateMembership=function(n,t){var f=this,s;var r=this.getGridDataManager(),h=st.BacklogContext.getInstance(),o=n.getFieldValue(bt.CoreFieldRefNames.WorkItemType),u=r.getWorkItemTreeIndex(n.id),i=!0,c=this._getOwnerShipEvaluator();c.evaluate(n,function(t){if(r.updateOwnedIds(n.id,t),u){var i=f.getGrid().getRowIndex(u);f.getGrid().updateRow(i)}});u==null?(t(n,!0),i=!1):h.backlogContainsWorkItemType(o)||(this._isIterationBacklog?ai.contains(e.BacklogConfigurationService.getBacklogConfiguration().taskBacklog.workItemTypes,o,yi.ignoreCaseComparer)||(t(n,!0),i=!1):(t(n,!0),i=!1));i&&(s=this._createMembershipEvaluator(r),s.evaluate(n,function(i){t(n,i)}))},n.prototype._createToolbar=function(){this._toolbar=ti.BaseControl.createIn(ri.Toolbar,$(".hub-pivot-toolbar",this._$element),{items:this._buildToolbarItems(),executeAction:nr(this,this._onToolbarItemClick),ariaAttributes:{label:yt.Backlog_Toolbar_AriaLabel}})},n.prototype.toggleFilter=function(){this._filterBar.toggle()},n.prototype.activateFilter=function(){this._filterBar.showElement();this._filterBar.focus()},n.prototype._createBacklogsCommonMenuBar=function(){var i=this,t=$(n.CSS_BACKLOGS_COMMON_MENUBAR);!this._backlogsCommonMenubar&&t.length>0&&(t.toggleClass("agile-important-hidden",!1),this._backlogsCommonMenubar=ti.Enhancement.enhance(ri.MenuBar,t),ht.CommonSettingsConfigurationControl.initialize(this._backlogsCommonMenubar,function(){i._recordBacklogCommonConfigDialogTelemetry()}),this._attachCommonConfigurationRegistration(),ui.FullScreenHelper.initialize(this._backlogsCommonMenubar))},n.prototype._recordBacklogCommonConfigDialogTelemetry=function(){li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,ct.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_COMMON_CONFIG_DIALOG_OPENED,{Page:this._getPageNameForCI()}))},n.prototype._getPageNameForCI=function(){return this._isIterationBacklog?st.AgileCustomerIntelligenceConstants.ITERATION_BACKLOG_VIEW:st.AgileCustomerIntelligenceConstants.PRODUCT_BACKLOG_VIEW},n.prototype._buildToolbarItems=function(){var t=[];return t.push({id:n.CMD_TOGGLE_ADD_PANEL,text:ci.NewBacklogItem,title:ci.NewBacklogItemToolTip,showText:!0,noIcon:!0},{separator:!0}),t=this._addExpandCollapseToToolbarItems(t),t.push({separator:!0}),t.push({id:n.CMD_GENERATE_QUERY,title:yt.CreateQuery_Toolbar_Text,setTitleOnlyOnOverflow:!0,text:yt.CreateQuery_Toolbar_Text,noIcon:!0},{separator:!0},{id:n.CMD_COLUMN_OPTIONS,title:ki.ColumnOptionsTitle,setTitleOnlyOnOverflow:!0,text:ki.ColumnOptions,noIcon:!0},{separator:!0},{id:bi.QueryResultGrid.COMMAND_ID_EMAIL_QUERY_RESULT,text:yt.EmailBacklogQueryResult,title:yt.EmailBacklogQueryResult,setTitleOnlyOnOverflow:!0,showText:!1,icon:"bowtie-icon bowtie-mail-message"},this.filterMenuItem),t},n.prototype._initializeFilter=function(){this._filterManager=this._grid.getFilterManager();this._options.isNewHub||(this._filterBar=ti.Enhancement.ensureEnhancement(v.FilterBar,this._$element),this._filterBar.bind(tr.navigation.project,this._filterManager,this._grid),this._filterManager.attachEvent(y.FilterManager.EVENT_FILTER_CHANGED,this.__onFilterChangedHandler),this._filterManager.attachEvent(y.FilterManager.EVENT_FILTER_CLEARED,this.__onFilterChangedHandler),this._filterManager.attachEvent(y.FilterManager.EVENT_FILTER_ACTIVATED,this._onFilterChangedAndResize),this._filterManager.attachEvent(y.FilterManager.EVENT_FILTER_DEACTIVATED,this._onFilterChangedAndResize))},n.prototype._cleanupFilterBar=function(){this._filterBar&&(this._filterBar.dispose(),this._filterBar=null);this._filterManager&&(this._filterManager.detachEvent(y.FilterManager.EVENT_FILTER_CHANGED,this._onFilterChanged),this._filterManager.detachEvent(y.FilterManager.EVENT_FILTER_CLEARED,this._onFilterChanged),this._filterManager.detachEvent(y.FilterManager.EVENT_FILTER_ACTIVATED,this._onFilterChangedAndResize),this._filterManager.detachEvent(y.FilterManager.EVENT_FILTER_DEACTIVATED,this._onFilterChangedAndResize),this._filterManager=null)},n.prototype._onFilterChanged=function(){this._updateAddPanelDisabledState();this._refreshToolbarCommandStates();var n=this._toolbar.getItem(this.filterMenuItem.id);n&&n.update(__assign(__assign({},this.filterMenuItem),{icon:this._filterManager&&this._filterManager.isFiltering()?"bowtie-icon bowtie-search-filter-fill":"bowtie-icon bowtie-search-filter"}))},n.prototype._refreshToolbarCommandStates=function(){this._toolbar.updateCommandStates(this._getUpdatedToolbarCommandStates())},n.prototype._getUpdatedToolbarCommandStates=function(){return[]},n.prototype._addExpandCollapseToToolbarItems=function(t){return t.push({id:n.CMD_EXPAND_ONE_LEVEL,text:vt.ExpandOneLevel,title:vt.ExpandOneLevelToolTip,showText:!1,icon:"bowtie-icon bowtie-toggle-expand"},{id:n.CMD_COLLAPSE_ONE_LEVEL,text:vt.CollapseOneLevel,title:vt.CollapseOneLevelToolTip,showText:!1,icon:"bowtie-icon bowtie-toggle-collapse"}),t},n.prototype.expandOneLevel=function(){var n=this;this.isGridLoaded()&&this._grid.performActionWithPreserveSelection(function(){n._expandCollapseBehavior.expandShallowestLevel();n._grid.updateLayoutAndRedraw()})},n.prototype.collapseOneLevel=function(){var n=this;this.isGridLoaded()&&this._grid.performActionWithPreserveSelection(function(){n._expandCollapseBehavior.collapseDeepLevel();n._grid.updateLayoutAndRedraw()})},n.prototype.isGridLoaded=function(){return!!this.getGrid()},n.prototype._handleCommonMenuItemClick=function(t){var i=this.getGrid();if(i)switch(t){case n.CMD_TOGGLE_ADD_PANEL:this._toggleAddPanel();break;case n.CMD_EXPAND_ALL:this._grid.performActionWithPreserveSelection(function(){i.expandAll()});this.recordIterationViewExpandAllTelemetry();break;case n.CMD_COLLAPSE_ALL:this._grid.performActionWithPreserveSelection(function(){i.collapseAll()});break;case n.CMD_EXPAND_ONE_LEVEL:this.expandOneLevel();this._expandClickCount++;this._recordBacklogsQuickExpandCollapseTelemetry();break;case n.CMD_COLLAPSE_ONE_LEVEL:this.collapseOneLevel();this._collapseClickCount++;this._recordBacklogsQuickExpandCollapseTelemetry();break;case n.CMD_COLUMN_OPTIONS:this.launchColumnOptions();break;case n.CMD_GENERATE_QUERY:this.generateAndLaunchNewQuery();break;case bi.QueryResultGrid.COMMAND_ID_EMAIL_QUERY_RESULT:this.emailQueryResults();break;case n.CMD_TOGGLE_FILTER:this.toggleFilter()}},n.prototype.generateAndLaunchNewQuery=function(n){ei.logTracePoint("Backlog.ClickGenerateQuery.start");this._launchNewQueryDialog(n)},n.prototype.emailQueryResults=function(){var n=this;ei.logTracePoint("Backlog.SendEmailQueryButtonClicked");wi.requireModules(["Admin/Scripts/TFS.Admin.SendMail","WorkItemTracking/Scripts/Dialogs/Models/EmailWorkItems"]).spread(function(t,i){n._emailQueryResults(t,i)});li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,ct.AgileCustomerIntelligenceFeature.TELEMETRY_BACKLOGS_EMAILBACKLOG,{}))},n.prototype._emailQueryResults=function(n,t){var i={pageSourceForCI:"Backlog"},r=this.getGrid(),u=this._workItemManager.store,e=r.getProjectName(),o=function(n,t){u.beginGetProject(e,n,t)},f;this._grid.isFiltered()?(i.subject=this._getBacklogQueryName(),i.workItemSelectionOption={workItems:r.getCurrentWorkItemIds(),fields:this._getDisplayColumnFields(),store:u}):i.queryResultsAdapter={queryId:yi.EmptyGuidString,queryName:this._getBacklogQueryName(),queryText:r._options.wiql,fields:this._getDisplayColumnFields(),sortFields:$.map(r.getSortColumns(),function(n){return n.name}),project:o,workItemStore:u};f=new t.EmailWorkItemsDialogModel(i);n.Dialogs.sendMail(f)},n.prototype._recordBacklogsQuickExpandCollapseTelemetry=function(){var n=this,t=function(){li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,ct.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_BACKLOGS_EXPAND_COLLAPSE_ONE_LEVEL,{NumOfExpandClicks:n._expandClickCount,NumOfCollapseClicks:n._collapseClickCount}));n._expandClickCount=n._collapseClickCount=0};this._expandCollapseTelemetryDelayedFunc?(this._expandCollapseTelemetryDelayedFunc.cancel(),this._expandCollapseTelemetryDelayedFunc.setMethod(this,t)):this._expandCollapseTelemetryDelayedFunc=new vi.DelayedFunction(this,this._telemetryQuickExpandCollapseDelay,"expandCollapseTelemetryDelayedFunction",t);this._expandCollapseTelemetryDelayedFunc.start()},n.prototype.recordIterationViewExpandAllTelemetry=function(){this._isIterationBacklog&&li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,ct.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_ITERATIONEXPANDALL,{TeamId:null}))},n._recordAddBacklogItemTelemetry=function(n,t){var i=rt.hasAgileToolsBacklogManagementPermission(),r={Action:"AddBacklogItem",BacklogManagementPermission:i.toString(),AddedFrom:t};li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,ct.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_ADDBACKLOGITEM,r,n))},n.prototype._isWorkItemIdInRequirementsBacklog=function(n){var t=this._getWorkItemTypeName(n);return e.BacklogConfigurationService.getBacklogConfiguration().isWorkItemTypeInRequirementBacklog(t)},n.prototype._isWorkItemInRequirementsBacklog=function(n){return e.BacklogConfigurationService.getBacklogConfiguration().isWorkItemTypeInRequirementBacklog(n.workItemType.name)},n.prototype.getWorkItemManager=function(){return this._workItemManager},n.prototype.getElement=function(){return this._$element},n.prototype.getGrid=function(){return this._grid||(this._grid=ti.Enhancement.getInstance(ot.ProductBacklogGrid,this.getGridElement())),this._grid},n.prototype.getGridDataManager=function(){var o=this,t,r,u,f,e,i;if(!this._gridDataManager&&(t=this.getGridOptions(),this._gridDataManager=new et.ProductBacklogDataManager({targetIds:t.targetIds.slice(0),sourceIds:t.sourceIds.slice(0),linkIds:t.linkIds.slice(0),realParentIds:t.realParentIds?t.realParentIds.slice(0):null,ownedIds:t.ownedIds?t.ownedIds.slice(0):null}),t.payload))for(r=n.findColumnIndex(t.payload.columns,this._teamSettings.teamFieldName),u=n.findColumnIndex(t.payload.columns,bt.CoreFieldRefNames.Id),f=this._getOwnerShipEvaluator(),e=function(n){var i=t.payload.rows[n],s=i[u],e=i[r];e&&f.checkTeamFieldValue(e,function(n){o._gridDataManager.updateOwnedIds(s,n)})},i=0;i<t.payload.rows.length;++i)e(i);return this._gridDataManager},n.prototype.isBacklogFiltered=function(){return this._filterManager&&this._filterManager.isFiltering()},n.prototype.getMessageArea=function(){return this._messageArea||this.createMessageArea(),this._messageArea},n.prototype.getSprintViewOptions=function(){var n=this;return{droppable:{scope:st.DragDropScopes.ProductBacklog,accept:function(t){var i=$(this);return n._acceptDroppableHandler(t,i)},hoverClass:"dragHover",drop:function(t,i){var r=$(this);n._dropHandler(t,i,r)},tolerance:"pointer"}}},n.prototype.getGridElement=function(){var t=$("."+n.CSS_GRID,this.getElement());return t.length===0&&(t=$("<div/>").addClass(n.CSS_GRID),this.getElement().append(t)),t},n.prototype.createGrid=function(n){var t=this,i,u;if(!this._grid){this.createQuickExpandCollapseBehavior();i=this.getGridDataManager();n||(n=this.getGridOptions());this._options.isNewHub&&(this._expandCollapseButtonsBehavior=new r.BacklogExpandCollapseButtonBehavior(function(){return t.expandOneLevel()},function(){return t.collapseOneLevel()}),n.behaviors?n.behaviors.push(this._expandCollapseButtonsBehavior):n.behaviors=[this._expandCollapseButtonsBehavior]);n.dataManager=i;n.contextMenuErrorHandler=nr(this,this._contextMenuErrorHandler);n.eventHelper=this._eventHelper;n.suppressRedraw=!0;this._grid=ti.Enhancement.enhance(ot.ProductBacklogGrid,this.getGridElement(),n);this._eventHelper.attachEvent(fi.MessageAreaControl.EVENT_DISPLAY_CLEARED,this._resizeGrid);this._grid.getElement().on("columnresize",this._onColumnsChanged);this._grid.getElement().on("columnmove",this._onColumnsChanged);return this._gridDataManager.attachIdChange(this._onGridIdChange),u=this._getSprintView(),u&&this._grid.attachDragEvent(this._onGridDragToSprintView),this._grid}},n.prototype._cleanupGrid=function(){this._expandCollapseBehavior&&(this._expandCollapseTelemetryDelayedFunc&&(this._expandCollapseTelemetryDelayedFunc.cancel(),this._expandCollapseTelemetryDelayedFunc=null),this._expandCollapseBehavior=null);this._gridDataManager&&(this._gridDataManager.detachIdChange(this._onGridIdChange),this._gridDataManager.dispose(),this._gridDataManager=null);this._grid&&(this._grid.getElement().off("columnresize",this._onColumnsChanged),this._grid.getElement().off("columnmove",this._onColumnsChanged),this._grid.detachDragEvent(this._onGridDragToSprintView),this._eventHelper.detachEvent(fi.MessageAreaControl.EVENT_DISPLAY_CLEARED,this._resizeGrid),this._grid.dispose(),this._grid=null);this._insertEventsSetup=!1},n.prototype.createQuickExpandCollapseBehavior=function(){var n=this,t=function(t){return n._gridDataManager.getWorkItemTreeIndex(t)},i=function(i){n._grid.collapseNode(t(i))},r=function(i){n._grid.expandNode(t(i))},u=function(i){return n._grid._getExpandState(t(i))>=0};this._expandCollapseBehavior=new or(this.getItemHierarchy(),{isExpanded:u,expand:r,collapse:i})},n.prototype.getGridOptions=function(){var n=this._gridOptions;return n||(n=this._options.gridOptions,n.contextMenuCreator=nr(this,this._contextMenuCreator),n.enabledEvents||(n.enabledEvents={}),n.enabledEvents[ii.GridO.EVENT_ROW_UPDATED]=!0,this._gridOptions=n),n},n.prototype._beforeIterationSave=function(n,t){this.suppressMembershipEvaluation($.map(n,function(n){return n.id}));t(n)},n.prototype._$updateChildIterationsAfterSave=function(n,t,i){function h(t){i(n,t)}function c(n){o.getMessageArea().setError(n.message)}var s=this,r,e,o,u,f;for(o=this,f=t[0].value,r=0,e=n.length;r<e;r+=1)u=n[r],ir.beginUpdateChildWorkItems(u,!1,bt.CoreField.IterationPath,f,function(n){return s._isWorkItemInRequirementsBacklog(n)},h,c,ir.getShouldUpdateMethodForIterationAssignment(u,f))},n.prototype.createMessageArea=function(){if(!this._messageArea){var n=this;this._messageArea=ti.Enhancement.enhance(fi.MessageAreaControl,$(".grid-status-message",this.getElement()),{closeable:!0});this._messageArea._bind(fi.MessageAreaControl.EVENT_DISPLAY_COMPLETE,function(){n._grid&&n._grid.resize()});si.getService().registerActionWorker(st.Actions.BACKLOG_ERROR,nr(this,this._handleBacklogError))}},n.prototype._getWorkItemIdsOfRowsToBeUpdated=function(n){var t=[];return this._gridDataManager.isRootNode(n)&&(t=this._gridDataManager.getDescendantWorkItemIds(n)),t},n.prototype._removeWorkItemFromGrid=function(n,t){t===void 0&&(t=!0);this.getGridDataManager().removeWorkItem(n,t)},n.prototype._removeWorkItemsFromGrid=function(n){this.getGridDataManager().removeWorkItems(n)},n.prototype._getSprintView=function(){return this._sprintView||(this._sprintView=ti.Enhancement.getInstance(ht.SprintViewControl,$(".team-iteration-view"))),this._sprintView},n.prototype._editWorkItem=function(n,t){var i=function(n){n&&n.id!==0?t(!0):t(!1)};gi.showWorkItem(n,{close:i})},n.prototype.setAddPanelHighlight=function(t,i){var r=this.getGrid(),f,u,e,o;this._setupAddPanelRowHighlight();this._showAddPanelHighlight=t;this._insertLocation=i;t?(u=this._getCurrentAddEffect(i),this._insertionLineIndex=u.addUnparentedRow||u.highlightedWorkItemId===0?r.getLastRowDataIndex():r._getWorkItemDataIndex(u.highlightedWorkItemId),this._insertionLineIndex>r.getLastRowDataIndex()&&(this._insertionLineIndex=r.getLastRowDataIndex()),e=r.getExpandedCount(),r.ensureDataIndexExpanded(this._insertionLineIndex),e!==r.getExpandedCount()&&r.redraw(),r.getRowIntoView(r.getRowIndex(this._insertionLineIndex)),f=r.getRowInfo(this._insertionLineIndex),f&&(this._cleanupHighlightedRow(),this._highlightedRow=f.row[0],o=r.isLastRow(f.dataIndex),f.row.addClass(o||u.isParent||!u.isParent&&!u.nextId?n.CSSCLASS_INSERTION_HIGHLIGHT_BOTTOM:n.CSSCLASS_INSERTION_HIGHLIGHT_TOP))):this._cleanupHighlightedRow()},n.prototype._cleanupHighlightedRow=function(){this._highlightedRow&&(this._highlightedRow.parentElement!==null&&$(this._highlightedRow).removeClass(n.CSSCLASS_INSERTION_HIGHLIGHT_BOTTOM+" "+n.CSSCLASS_INSERTION_HIGHLIGHT_TOP),this._highlightedRow=null)},n.prototype._setupAddPanelRowHighlight=function(){var t=this,i=this.getGrid();this._insertEventsSetup||(this._options.isNewHub||this.addPanel.registerFocusChangedEvent(function(n,i){var r=i&&n&&!n.isDisabled();t.setAddPanelHighlight(r)}),i.enableEvent(ii.GridO.EVENT_ROW_UPDATED),i.getElement().bind(ii.GridO.EVENT_ROW_UPDATED,function(i,r){if(t._showAddPanelHighlight&&r.dataIndex===t._insertionLineIndex){if(r.row.hasClass(n.CSSCLASS_INSERTION_HIGHLIGHT_BOTTOM)||r.row.hasClass(n.CSSCLASS_INSERTION_HIGHLIGHT_TOP))return;t.setAddPanelHighlight(!0,t._insertLocation)}}),this._insertEventsSetup=!0)},n.prototype._getAddPanelEffectForCurrentGridSelection=function(){var i=this._getAddPanelBehavior(),n=this.getGrid().getSelectedDataIndex(),t;return n===-1&&(n=0),t=this.getGridDataManager().getWorkItemIdAtTreeIndex(n),i.getEffect(t)},n.prototype._getAddPanelBehavior=function(){return this._addPanelBehavior||this._createAddPanelBehavior(),this._addPanelBehavior},n.prototype._createAddPanelBehavior=function(){var n=this,t=this._getBacklogLevelHelper(),i=t.getLevel(this._backlogContext.level.defaultWorkItemType);this._addPanelBehavior=new ar(i,this.getItemHierarchy(),t,function(){return!n._isIterationBacklog&&!rt.hasAgileToolsBacklogManagementPermission()},function(){return n.getRootBacklogLevel()})},n.prototype.getRootBacklogLevel=function(){var n=this._getBacklogLevelHelper(),t,i,r;return this._backlogContext.includeParents?this._grid.getWorkItemIdAtDataIndex(0)?(r=this._grid.getWorkItemTypeNameByIndex(0),n.getLevel(r)):(t=e.BacklogConfigurationService.getBacklogConfiguration().hiddenBacklogs,i=e.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels(),1+ai.findIndex(i,function(n){return!ai.contains(t,n.id,yi.ignoreCaseComparer)})):n.getTopLevel()},n.prototype.getSelectionFilter=function(){return this._selectionFilter||(this._selectionFilter=new at.TopLevelItemsSelectionFilter(this.getItemHierarchy(),nr(this._grid,this._grid.pageWorkItems))),this._selectionFilter},n.prototype.postActionCleanup=function(){this._reorderManager.isPaused()||this.getMessageArea().clear()},n.prototype.createAndAddWorkItem=function(n,t,i){var r=this;return ir.beginGetWorkItemType(n).then(function(n){return ir.beginCreateWorkItem(r._backlogContext.team.id,n,{parenting:null,useDefaultIteration:!0})}).then(function(n){return new Promise(function(u,f){for(var e in t)n.setFieldValue(e,t[e]);r.isDisposed?f("Backlog grid was disposed"):r.addWorkItem(null,{workItem:n,insertLocation:i,callback:function(n,t){u({status:n,continuationPromise:t})}})})})},n.prototype.moveWorkItemsToIteration=function(n,t){var r=this,o=this._getRowSavingManager(),u,f,s,e;if(n&&n.length>0){for(f=0,s=n;f<s.length;f++)e=s[f],u=this._getWorkItemIdsOfRowsToBeUpdated(e),this.suppressMembershipEvaluation([e].concat(u)),o.markRowAsSaving(e,u);return this._moveToIteration.moveToIteration(n,t,this._getPageNameForCI()).then(function(i){var f,e,s;if(!r.isDisposed){for(f=0,e=n;f<e.length;f++)s=e[f],r.unsuppressMembershipEvaluation([s].concat(u)),o.clearRowSaving(s);r.getMessageArea().clear()}return{workItemIds:n,childWorkItems:i,success:!0,newIterationPath:t}},function(t){var i,u,f;for(r.getMessageArea().setError(vr(t)),i=0,u=n;i<u.length;i++)f=u[i],o.clearRowSaving(f);return{workItemIds:n,success:!1}})}return i.resolve({workItemIds:[],childWorkItems:[],success:!0,newIterationPath:t})},n.prototype.addWorkItem=function(t,i){var l,e=this,v,g,y,nt;ei.logTracePoint("ProductBacklogAddPanel.addWorkItem.start");var tt=Date.now(),r=i.workItem,it=i.insertLocation,b=i.callback,f=0,o=0,c=!1,u=this.getGridDataManager(),a=this.getGrid(),s=r.tempId;this.postActionCleanup();v=function(t,i){b&&b(t,i);ei.logTracePoint("ProductBacklogAddPanel.addWorkItem.displayed");n._recordAddBacklogItemTelemetry(tt,ct.CustomerIntelligencePropertyValue.ADDBACKLOGITEM_ADDEDFROM_ADDPANEL)};w.WorkItemManager.get(r.store).setWorkItem(r);var h=this._getCurrentAddEffect(it),rt=!r.isValid(),k=function(){var n=e._grid._getWorkItemDataIndex(s);(typeof n=="undefined"||n<0)&&(n=a.getIndexFromOrder(f));n&&(a.setSelectedDataIndex(n),a.getSelectedRowIntoView())},d=function(){var i=e._getBacklogLevelHelper().getLevel(e._backlogContext.level.defaultWorkItemType),n=e.getOrAddUnparentedRow(i,!1),t=u.getChildrenWorkItemIds(n);return t.length>0?{parentId:n,order:u.getWorkItemOrder(t[t.length-1])+1}:{parentId:n,order:u.getWorkItemOrder(n)+1}};h?h.addUnparentedRow?(rt||(l=d(),o=l.parentId,f=l.order),c=!0):h.isParent?(o=h.parentId,f=(u.getWorkItemOrder(o)||0)+1,h.nextId===null&&(c=!0)):(o=h.parentId,h.nextId===null?o!==0?(f=(u.getWorkItemOrder(o)||0)+(u.getDescendantCount(o)+1),c=!0):f=u.getMaxOrder()+1:f=u.getWorkItemOrder(h.nextId)):(f=u.getMaxOrder(),c=!0);o>0&&(g=di.WorkItemLink.create(r,ir.PARENT_LINK_NAME,o,""),r.addLinks([g]));r.isValid()?(f=u.normalizeOrder(f),c?u.addWorkItem(s,0,r,o):u.addWorkItem(s,f,r),u.updateOwnedIds(s,!0),y=this._grid._getWorkItemDataIndex(s),y>=0&&(this._grid.ensureDataIndexExpanded(y),this._grid.redraw()),k(),this._queueReorderByOrder(s,f,function(n,t){r.beginSave(function(t){var i=t.workItems[0].id;u.changeWorkItemId(s,i);e._eventHelper.fire(st.Notifications.BACKLOG_ITEM_ADDED,e);n?n([s],[t.workItems[0].id]):e._getRowSavingManager().clearRowSaving(i)},function(n){r.discardIfNew();u.removeWorkItem(s);e.getMessageArea().setError(n.message);e._getRowSavingManager().clearRowSaving(s);t()})},o),v(er.Added)):(nt=new Promise(function(n){var t=e._getMessageSuppressor(),i=w.WorkItemManager.get(gt.ProjectCollection.getDefaultConnection().getService(di.WorkItemStore)),s=function(n,i){var s;i.change===p.WorkItemChangeType.PreSave?t.suppressAll():i.firstSave&&i.change===p.WorkItemChangeType.SaveCompleted&&(t.disableSuppressAll(),r.id>0&&i.workItem.id===r.id?(h.addUnparentedRow&&(s=d(),o=s.parentId,f=s.order),f=u.normalizeOrder(f),c?u.addWorkItem(r.id,0,r,o):u.addWorkItem(r.id,f,r),e._membershipTracker.verifyMembership(n,i,function(n){n&&e._queueReorderByOrder(r.id,f,null,o)}),t.suppressAll()):(e._membershipTracker.verifyMembership(n,i),t.suppressAll()))};i.attachWorkItemChanged(s);e._editWorkItem(r,function(r){e._grid&&(i.detachWorkItemChanged(s),t.disableSuppressAll(),r&&k(),n(r))})}),v(er.WorkItemFormOpened,nt))},n.prototype._getCurrentAddEffect=function(n){var t=this._getAddPanelBehavior();if(n!==undefined)switch(n){case 0:return t.getEffectAddToTop();case 1:return this._getAddPanelEffectForCurrentGridSelection();case 2:return t.getEffectAddToBottom()}return this._getAddPanelEffectForCurrentGridSelection()},n.prototype.getOrAddUnparentedRow=function(n,t){var i,u,f,o,r,e;for(t===void 0&&(t=!0),f=!1,o=this.getRootBacklogLevel(),r=o;r<n;++r)u=i,i=rr.findOrphanedRowForLevel(r),i||(i=new rr(r),e=i.getRowId(),ot.GridGroupRowBase.workitemIDMap[e]=i,this.getGridDataManager().addGroupingItem(i.getRowId(),u&&u.getRowId()||null),this._grid.addWorkItemPageData(i.getRowId(),this._grid.getPageColumns(),i.extendPageData(this._grid.getPageColumns())),f=!0);return f&&t&&this._grid.refresh(!1,{}),i.getRowId()},n.prototype._createBacklogLevelHelper=function(){var n=this._backlogContext.includeParents?e.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels()[0]:this._backlogContext.level;this._backlogLevelHelper=new at.BacklogLevelHelper(n)},n.prototype._getBacklogLevelHelper=function(){return this._backlogLevelHelper||this._createBacklogLevelHelper(),this._backlogLevelHelper},n.prototype._getWorkItemTypeNameAndStateById=function(n){var i=this._grid,t=i.getWorkItemTypeNameById(n),r=i.getWorkItemPageDataValue(n,bt.CoreFieldRefNames.State),f,o,s,u;if(!t)try{f=i.getDataManager();o=f.getWorkItemTreeIndex(n);o&&(s=f.getParentOfWorkItemAtTreeIndex(o),s===0&&(t=i.getWorkItemTypeNameByIndex(0),!t||r||this._backlogContext.includeParents||(u=e.BacklogConfigurationService.getBacklogConfiguration().getWorkItemStatesForStateCategory(t,e.WorkItemStateCategory.Proposed),r=u[0])))}catch(h){}return[t,r]},n.prototype.getItemHierarchy=function(){var n=this,t;return this._itemHierarchy||(t=function(t){var i=n._grid._getWorkItemDataIndex(t);return i>=0&&n._grid._getExpandState(i)>0},this._itemHierarchy=new sr(this.getGridDataManager(),function(t){return n._getWorkItemTypeNameAndStateById(t)},t)),this._itemHierarchy},n.prototype._queueReorderByOrder=function(n,t,i,r){var u=this.getGridDataManager(),f=u.getPrevWorkItemId(t),e=u.getNextWorkItemId(t);r=r||u.getParentWorkItemId(t);this._getRowSavingManager().markRowAsSaving(n);st.WorkItemReorderHelpers.queueReorderOperation(this._reorderOperationQueue,this._reorderManager,[n],r,f,e,i)},n.prototype.beginReparentWorkItems=function(n,t,i,r){var u=this,f=w.WorkItemManager.get(gt.ProjectCollection.getDefaultConnection().getService(di.WorkItemStore)),e=function(t){var o=yi.format(yt.StatusMessage_FatalError,t.message),i,f,e;for(u.getMessageArea().setError(o,function(){window.location.reload()}),i=0,f=n;i<f.length;i++)e=f[i],u._getRowSavingManager().clearRowSaving(e);$.isFunction(r)&&r()};if(!n||!n.length){$.isFunction(i)&&i();return}f.beginGetWorkItems(n,function(n){for(var s,u=!1,r=0,o=n;r<o.length;r++)s=o[r],ir.reparentWorkItem(s,t)&&(u=!0);f.store.beginSaveWorkItems(n,function(){u&&li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,n.length>1?ct.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_MULTISELECT_REPARENT:ct.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_REPARENT,{NumberOfSelectedItems:n.length}));$.isFunction(i)&&i()},e)},e)},n.prototype.beginReparentWorkItem=function(n,t,i,r,u){var f=this,o=w.WorkItemManager.get(gt.ProjectCollection.getDefaultConnection().getService(di.WorkItemStore)),e=function(n){f.getMessageArea().setError(n,function(){window.location.reload()});f._getRowSavingManager().clearRowSaving(t)};n?o.beginGetWorkItem(t,function(n){ir.reparentWorkItem(n,i);n.beginSave(function(n){$.isFunction(r)&&r()},function(n){e(yi.format(yt.StatusMessage_FatalError,n.message));$.isFunction(u)&&u()})},function(n){e(yi.format(yt.StatusMessage_FatalError,n.message));$.isFunction(u)&&u()}):$.isFunction(r)&&r()},n.prototype._getReorderLocation=function(n,t){var f=this._getBacklogLevelHelper(),e=this.getItemHierarchy(),i=$.extend({},t),o=e.getData(n[0]),s,r,h,u,c;return s=f.getLevel(o.type),i.previousId&&(rr.getGroupRow(i.previousId)!==null?i.previousId=null:(r=e.getData(i.previousId),h=f.getLevel(r.type),h===s&&r.isOwned||(i.previousId=null))),i.nextId&&(rr.getGroupRow(i.nextId)!==null?i.nextId=null:(u=e.getData(i.nextId),c=f.getLevel(u.type),c===s&&u.isOwned||(i.nextId=null))),i},n.prototype._handleMoveWorkItems=function(n,t,r,u){for(var c,e,s,l,f=this,o=0,h=n;o<h.length;o++)c=h[o],this._getRowSavingManager().markRowAsSaving(c);return e=i.defer(),r=this._getReorderLocation(n,r),s=n.filter(function(n){return f.getGridDataManager().isOwnedItem(n)}),u&&s.length>0?(l=n.filter(function(n){return!f.getGridDataManager().isOwnedItem(n)}),st.WorkItemReorderHelpers.queueReorderOperation(this._reorderOperationQueue,this._reorderManager,s,r.parentId,r.previousId,r.nextId,function(n,i){f.beginReparentWorkItems(t,r.parentId,function(){for(var r,t=0,i=l;t<i.length;t++)r=i[t],f._getRowSavingManager().clearRowSaving(r);$.isFunction(n)&&n()},i)},function(){e.resolve(null)})):this.beginReparentWorkItems(t,r.parentId||0,function(){for(var r,t=0,i=n;t<i.length;t++)r=i[t],f._getRowSavingManager().clearRowSaving(r);e.resolve(null)}),e.promise},n.prototype._attachReorderRequestComplete=function(){this._reorderManager.attachRequestComplete(this._reorderRequestComplete)},n.prototype.attachDropWorkItemCompleted=function(t){this._events.subscribe(n.EVENTS_DROP_WORK_ITEM_COMPLETED,t)},n.prototype.detachDropWorkItemCompleted=function(t){this._events.unsubscribe(n.EVENTS_DROP_WORK_ITEM_COMPLETED,t)},n.prototype._registerBacklogQuerySaveCompleted=function(){this._eventHelper.attachEvent(st.Notifications.BACKLOG_QUERY_SAVE_COMPLETED,this._querySaveCompleted)},n.prototype._registerGridWorkItemFilter=function(){si.getService().registerActionWorker(st.Actions.EVALUATE_MEMBERSHIP,this._verifyWorkItemFilterMembership);si.getService().registerActionWorker(st.Actions.BACKLOG_FILTER_SELECTION,this._filterSelectedAction)},n.prototype._registerMessageAreaClearing=function(){var n=$("a.agile-portfolio-management-notification-disable");n&&n.bind("click.tfs.agile",function(){var n=ti.Enhancement.getInstance(fi.MessageAreaControl,$(".agile-portfolio-management-notification"));n.clear()})},n.prototype._beginGetSettingsField=function(n,t){gt.ProjectCollection.getDefaultConnection().getService(pt.ProjectProcessConfigurationService).beginGetProcessSettings(function(i){var u=i.typeFields,r;$.each(u,function(t,i){if(i.type===n)return r=i.name,!1});t(r)})},n.prototype._getOwnerShipEvaluator=function(){return this._ownershipEvaluator||(this._ownershipEvaluator=new hr(this._backlogContext.team.id)),this._ownershipEvaluator},n.prototype._attachWorkItemChangeEvent=function(){},n.prototype._detachWorkItemChangeEvent=function(){this._workItemIdsToRemove={};this.getWorkItemManager().detachWorkItemChanged(this._workItemChangeEventHandler)},n.prototype._checkFieldChanges=function(n,t,i,r){return $.map(i,function(i){var u=n.getField(i),f=!1;return u&&(n.revision>1||r)&&t[u.fieldDefinition.referenceName]&&(f=!0),f})},n.prototype._showRefreshMessage=function(n){var r=this,t=$("<div>"),u=n||yt.BacklogInfo_RefreshRequired,f=$("<span>").text(u),i=$("<a>").attr("href","#").text(yt.BacklogInfo_RefreshRequired_LinkText);i.click(function(n){n&&n.preventDefault();r._refreshDisplay()});t.append(f);t.append(i);this.getMessageArea().setMessage({header:t},fi.MessageAreaType.Warning)},n.prototype._showOrderFieldChangedMessage=function(){this._showRefreshMessage(yt.BacklogInfo_OrderFieldRefresh)},n.prototype._beginShowRemovedWorkItemMessage=function(n,t,i){var r=this;this._beginGetSettingsField(pt.ProjectProcessConfiguration.FieldType.Team,function(u){var f=[bt.CoreFieldRefNames.TeamProject,bt.CoreFieldRefNames.IterationPath,bt.CoreFieldRefNames.State,u],o=r._checkFieldChanges(n,t,f,!0),e=[];$.each(o,function(n,t){t&&e.push(f[n])});r._showRemovedWorkItemMessage(n,e);i()})},n.prototype._showRemovedWorkItemMessage=function(n,t){function i(){var i=$("<div>").addClass("backlog-info"),f=$("<p>"),e=$("<ul>"),r=$("<p>"),u,o=tr.getActionUrl("edit","workItems",{parameters:[n.id]});return f.text(yt.BacklogInfo_WorkItemRemoved_ListHeader),$.each(t,function(t,i){var r=$("<li>"),u=n.getField(i).fieldDefinition.name,f=n.getField(i).getValue(),o=yi.format("<strong>{0}<\/strong>",u),s=yi.format("<strong>{0}<\/strong>",f);r.append(yi.format(yt.BacklogInfo_WorkItemRemoved_ListItem,o,s));e.append(r)}),r.append(yt.BacklogInfo_WorkItemRemoved_Footer),u=$("<a>").attr("href",o),u.text(yt.BacklogInfo_WorkItemRemoved_Footer_LinkText),r.append(u),i.append(f),i.append(e),i.append(r),i}this.getMessageArea().setMessage({header:yi.format(yt.BacklogInfo_WorkItemRemoved_Header,n.getTitle()),content:i()},fi.MessageAreaType.Info)},n.prototype._onToolbarItemClick=function(n){var t=n.get_commandName();this._handleCommonMenuItemClick(t)},n.prototype._launchNewQueryDialog=function(n){var t=this,i,r;this.isDisposed||(i=this.getGrid(),r={wiql:i._options.wiql,name:this._getBacklogQueryName()},d.showDialog(k.QueriesHubContext.getInstance(),g.QuerySaveDialogMode.NewQuery,r,null,function(i){t._queryDialogSuccess(t,{success:!0,query:i},n)},function(){return t.isDisposed}),ei.logTracePoint("Backlog.Toolbar._launchNewQueryDialog_complete"))},n.prototype._queryDialogSuccess=function(n,t,i){this._eventHelper.fire(st.Notifications.BACKLOG_QUERY_SAVE_COMPLETED,n,t);i&&i()},n.prototype._showBacklogQueryErrorMessage=function(){this.getMessageArea().setError(yt.CreateQuery_Error)},n.prototype._showBacklogQueryCreatedMessage=function(n){var t,i,r=tr.getActionUrl("Index","queries")+"?path="+encodeURIComponent(n)+"&_a=query";t=$("<div>").text(yt.CreateQuery_Created);i=$("<a>").addClass("backlog-query-navigate").attr("href",r).text(yt.CreateQuery_ClickHere);t.append(i);this.getMessageArea().setMessage({header:t,type:fi.MessageAreaType.Info})},n.prototype.launchColumnOptions=function(){ei.logTracePoint("Backlog.ClickColumnOptions.start");this.launchNewColumnOptionsPanel();li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,ct.AgileCustomerIntelligenceFeature.TELEMETRY_BACKLOGS_COLUMNOPTIONS,{}))},n.prototype.launchNewColumnOptionsPanel=function(n){var t=this,i=this._getDisplayColumns().map(function(n){return{fieldRefName:n.name,width:n.width,isRequired:yi.equals(n.name,bt.CoreFieldRefNames.Title,!0),rollup:n.rollup,rollupCalculation:n.rollupCalculation}}),r={displayColumns:i,getAvailableNotAFieldColumns:this._getAvailableNotAFieldColumns,getFieldWidth:this._getFieldWidth,getAvailableRollupColumns:function(){return t._getAvailableRollupColumns(t._backlogContext.level)},allowSort:!1,project:tr.navigation.project,currentBacklogLevel:this._backlogContext.level,getRollupColumnDisplayName:this._grid.getRollupColumnDisplayName,getBacklogDisplayName:this._getBacklogDisplayName,onOkClick:function(n,i){i&&t._saveDialogResultsColumns(n.display,function(){t._options.isNewHub||t._refreshDisplay();t._options.onColumnsChanged&&t._options.onColumnsChanged()})}};b.showColumnOptionsPanel(__assign(__assign({},r),n))},n.prototype._getBacklogDisplayName=function(n){var t=e.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels().filter(function(t){return t.id===n});return t.length>0?t[0].name:""},n.prototype._getAvailableRollupColumns=function(n){return __awaiter(this,void 0,void 0,function(){var f,e,t,s,r,u,h=this;return __generator(this,function(){return c.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WebAccessAgileBacklogEnableRollupColumns,!1)?(f={type:ut.RollupType.Progress,aggregation:ut.RollupAggregation.Count},e={type:ut.RollupType.Total,aggregation:ut.RollupAggregation.Count},t=(u={},u[ut.RollupType.Progress]=[{displayName:yt.RollupColumn_ProgressBy_AllCompletedDescendants,referenceName:ut.getRollupColumnReferenceName(f),rollupCalculation:f}],u[ut.RollupType.Total]=[{displayName:yt.RollupColumn_TotalBy_AllDescendants,referenceName:ut.getRollupColumnReferenceName(e),rollupCalculation:e}],u),s=[ut.RollupType.Progress,ut.RollupType.Total],r=i.defer(),gt.ProjectCollection.getDefaultConnection().getService(pt.ProjectProcessConfigurationService).beginGetProcessSettings(function(i){var f=i.allBacklogs.filter(function(t){return t.plural===n.name})[0],e=function(n){s.forEach(function(i){n&&n.forEach(function(n){var r={type:i,aggregation:ut.RollupAggregation.Count,workItemTypeFilter:n},u=i===ut.RollupType.Progress?yt.RollupColumn_ProgressBy_WorkItemType:yt.RollupColumn_TotalBy_WorkItemType;t[i].push({displayName:yi.format(u,n),referenceName:ut.getRollupColumnReferenceName(r),rollupCalculation:r})})})},u,o;if(f)for(f.category===i.taskBacklog.category&&r.resolve([]),u=f.child;u;)e(u.workItemTypeNames),u=u.child;else i.allBacklogs.forEach(function(n){e(n.workItemTypeNames)});i.bugWorkItems&&(o=i.bugWorkItems.workItemTypeNames,e(o));var c=pt.ProjectProcessConfiguration.FieldType.Effort,l=pt.ProjectProcessConfiguration.FieldType.RemainingWork,a=[c,l];a.forEach(function(n){var f=i.typeFields.filter(function(t){return t.type===n})[0],e=f&&f.name,o=h._workItemManager.store.getFieldDefinition(e),u,r;if(o){u=o.name;r=void 0;switch(n){case l:r=[ut.RollupType.Total];break;case c:r=s}r.forEach(function(n){var i={type:n,aggregation:ut.RollupAggregation.Sum,aggregationField:e,aggregationFieldDisplayName:u},r;r=n===ut.RollupType.Progress?yt.RollupColumn_ProgressBy_EffortField:yt.RollupColumn_TotalBy_FieldName;t[n].push({displayName:yi.format(r,u),referenceName:ut.getRollupColumnReferenceName(i),rollupCalculation:i})})}});r.resolve(t[ut.RollupType.Progress].concat(t[ut.RollupType.Total]))},function(){h.getMessageArea().setMessage({header:yt.RollupColumn_ComputeError,type:fi.MessageAreaType.Error});r.resolve(t[ut.RollupType.Progress].concat(t[ut.RollupType.Total]))}),[2,r.promise]):[2,[]]})})},n.prototype._getFieldWidth=function(n){if(yi.ignoreCaseComparer(n,f.BacklogConstants.ParentColumnRefName)===0||yi.ignoreCaseComparer(n,bt.CoreFieldRefNames.Parent)===0)return 250;var t=n.toLowerCase();return t.indexOf("system.backlog.rollup")===0&&t.indexOf("progress")>-1?150:undefined},n.prototype._getDisplayColumnFields=function(){var n=this._getDisplayColumns();return $.map(n,function(n){if(n.fieldId)return n.name})},n.prototype._matchesCurrentColumns=function(n){var i=this._getDisplayColumns(),t;if(n.length!==i.length)return!1;for(t=0;t<n.length;t+=1)if(n[t].id!==i[t].fieldId||n[t].name!==i[t].name||n[t].width!==i[t].width)return!1;return!0},n.prototype._getDisplayColumns=function(){var n=this._grid.getColumns(),t=n.map(function(n){if(!n.hidden&&n.canMove)return n}),i=this._grid.getDisplayColumns();return i.filter(function(n){return t.some(function(t){return t&&t.name===n.name})})},n.prototype._contextMenuErrorHandler=function(n){this.getMessageArea().setError(n.message)},n.prototype._getMessageSuppressor=function(){return this._messageSuppressor||(this._messageSuppressor=this._registerMessageSuppressor()),this._messageSuppressor},n.prototype.suppressMembershipEvaluation=function(n){var t=this._getMessageSuppressor();$.each(n,function(n,i){t.suppress(i)})},n.prototype.unsuppressMembershipEvaluation=function(n){var t=this;$.each(n,function(n,i){t._messageSuppressor.unsuppress(i)})},n.prototype._registerMessageSuppressor=function(){var n,t=!1,i={suppress:function(t){n[t]=!0},unsuppress:function(t){delete n[t]},isSuppressed:function(t){return n[t]||!1},suppressAll:function(){t=!0},disableSuppressAll:function(){t=!1}};return n=[],this._messageSuppressorFunction=function(n,r){var u=n.workItem.id;t||(i.isSuppressed(u)?i.unsuppress(u):r(n))},si.getService().registerActionWorker(st.Actions.EVALUATE_MEMBERSHIP,this._messageSuppressorFunction,10),i},n.prototype._contextMenuCreator=function(n,t){if(t){var i=this._getContextMenuCreator();i&&i.createContextMenu(t.workItemIds,n,t)}},n.prototype._getContextMenuCreator=function(){return null},n.prototype._getWorkItemTypeName=function(n){return this.getGrid().getWorkItemTypeNameById(n)},n.prototype._getChildWorkItemCategory=function(n){var t=lt.BacklogLevelUtils.getDescendentBacklogLevelConfigurationForWorkItemType(n);return t?t.name:yi.empty},n.prototype.getDraggingWorkItemInformation=function(){var t=this,e=this._grid.getDraggingRowInfo(),n;if(e){if(n=this._grid.getSelectedWorkItemIds(),!n||n.length===0)return null;var o=n.every(function(n){return t._gridDataManager.isOwnedItem(n)}),r=n.map(function(n){return t._grid.getWorkItemTypeNameById(n)}),i=n,u=r,f=this.getSelectionFilter();return f&&(i=f.filter(n),u=i.map(function(n){return t._grid.getWorkItemTypeNameById(n)})),{areAllItemsOwned:o,selectedWorkItemIds:n,selectedWorkItemTypes:r,topLevelWorkItemIds:i,topLevelWorkItemTypes:u}}},n.prototype._acceptDroppableHandler=function(n,t){var i;if(i=this.getDraggingWorkItemInformation(),i){var r=i.areAllItemsOwned,u=i.selectedWorkItemTypes,f=this._getSprintView();return f.isValidDropTargetForWorkItemTypes(t,u,r)}return!1},n.prototype._dropHandler=function(n,t,i){var r;ei.logTracePoint("ProductBacklog._dropItemToSprint.start");r=t.helper.data(ot.ProductBacklogGrid.DATA_WORK_ITEM_IDS)||[];r=r.filter(function(n){return rr.getGroupRow(n)===null});var u=this._getSprintView(),f=u.getNodeFromElement(i),e=f.iterationPath;this.moveWorkItemsToIterationAndFireDropCompleted(r,e);t.helper.data(ot.ProductBacklogGrid.DROP_SUCCESSFUL,!0);ei.logTracePoint("ProductBacklog._dropItemToSprintClientSide.complete")},n.prototype.moveWorkItemsToIterationAndFireDropCompleted=function(n,t){var i=this;this.moveWorkItemsToIteration(n,t).then(function(n){i.isDisposed||i._raiseDropWorkItemCompleted(n);ei.logTracePoint("ProductBacklog._dropItemToSprint.complete")},function(n){ei.logError(n.toString())})},n.prototype._raiseDropWorkItemCompleted=function(t){this._events.invokeHandlers(n.EVENTS_DROP_WORK_ITEM_COMPLETED,this,t)},n.prototype._getParentOptionFields=function(n){return lt.WorkItemUtils.getParentOptionFields(n)},n.prototype._checkBugVisibility=function(n){return n.bugWorkItems&&this._teamSettings.showBugCategoryWorkItem===!0?!0:!1},n.findColumnIndex=function(n,t){return ai.findIndex(n,function(n){return yi.ignoreCaseComparer(t,n)===0})},n.prototype._getRowSavingManager=function(){return this._grid.getRowSavingManager()},n.prototype._shouldUpdateFromLink=function(n){var u=this._grid.getDataManager(),f=u.getWorkItemIds(),t,i,r;return n.linkData.LinkType===lt.WorkItemUtils.PARENT_LINKTYPE_ID?(t=n.targetId,i=n.sourceId):n.linkData.LinkType===lt.WorkItemUtils.CHILD_LINKTYPE_ID&&(t=n.sourceId,i=n.targetId),r=u.getChildrenWorkItemIds(t),f.findIndex(function(n){return n===t})>=0&&!(n.command==="add"&&ai.contains(r,i))&&!(n.command==="remove"&&!ai.contains(r,i))},n.prototype._createToastNotification=function(){var t=ti.BaseControl.createIn(fi.ToastNotification,$(".main").length?$(".main"):$("body"),{fadeInTime:n.TOAST_FADE_IN_TIME,fadeOutTime:n.TOAST_FADE_OUT_TIME,toastTime:n.TOAST_TIME});si.getService().registerActionWorker(n.BACKLOG_TOAST,function(n){t.toast(n.message)})},n.prototype._detachRemainingEvents=function(){si.getService().unregisterActionWorker(st.Actions.BACKLOG_BULK_EDIT_EVALUATE_MEMBERSHIP,this._bulkeditEvaluateMembership);si.getService().unregisterActionWorker(st.Actions.EVALUATE_MEMBERSHIP,this._evaluateMembershipAction);si.getService().unregisterActionWorker(st.Actions.BACKLOG_FILTER_SELECTION,this._filterSelectedAction);si.getService().unregisterActionWorker(st.Actions.EVALUATE_MEMBERSHIP,this._verifyWorkItemFilterMembership);si.getService().unregisterActionWorker(st.Actions.BACKLOG_MOVE_TO_ITERATION,this._setIterationPath);this._eventHelper.detachEvent(st.Notifications.BACKLOG_QUERY_SAVE_COMPLETED,this._querySaveCompleted);this._eventHelper.detachEvent(st.Notifications.MEMBERSHIP_EVALUATED,this._processMembershipEvaluation);this._eventHelper.dispose();this._events&&(this._events.unsubscribeAll(),this._events=null)},n.prototype.dispose=function(){this.isDisposed||(this._cleanupFilterBar(),this._cleanupGrid(),this._detachBulkEditEvents(),this._messageSuppressor&&(si.getService().unregisterActionWorker(st.Actions.EVALUATE_MEMBERSHIP,this._messageSuppressorFunction),this._messageSuppressorFunction=null,this._messageSuppressor=null),this._messageArea&&(si.getService().unregisterActionWorker(st.Actions.BACKLOG_ERROR,this._handleBacklogError),this._messageArea.dispose(),this._messageArea=null),this._sprintView&&(this._sprintView.dispose(),this._sprintView=null),this._toolbar&&(this._toolbar.dispose(),this._toolbar=null),this._backlogsCommonMenubar&&(this._backlogsCommonMenubar.dispose(),this._backlogsCommonMenubar=null),this._reorderManager&&(this._reorderManager.detachRequestComplete(this._reorderRequestComplete),this._reorderManager.dispose(),this._reorderManager=null),this._workItemManager&&(this._detachWorkItemChangeEvent(),this._workItemManager.dispose(),this._workItemManager=null),this._$element&&(this._$element.empty(),this._$element=null),this._membershipTracker&&(this._membershipTracker.dispose(),this._membershipTracker=null),this._disposeRecycleBin(),this._detachDeleteEvents(),this._detachCommonConfigurationRegistration(),this._detachRemainingEvents(),k.QueriesHubContext.dispose(),this._addChildBehavior=null,this._expandCollapseButtonsBehavior=null,this._selectionFilter=null,this._ownershipEvaluator=null,this._gridOptions=null,this._backlogContext=null,this._backlogContextMenuCreator=null,this._backlogLevelHelper=null,this._itemHierarchy=null,this._disposed=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!1,configurable:!0}),n.EVENTS_DROP_WORK_ITEM_COMPLETED="drop-work-item-completed",n.CSS_GRID="productbacklog-grid-results",n.CMD_GENERATE_QUERY="agile-generate-query",n.CMD_COLUMN_OPTIONS="agile-column-options",n.CMD_EXPAND_ALL="expand-all",n.CMD_COLLAPSE_ALL="collapse-all",n.CMD_EXPAND_ONE_LEVEL="expand-one-level",n.CMD_COLLAPSE_ONE_LEVEL="collapse-one-level",n.CMD_TOGGLE_ADD_PANEL="toggle-add-panel",n.CMD_TOGGLE_FILTER="toggle-filter",n.SHOW_REFRESH_WARNING="backlog-refresh-warning",n.CSS_BACKLOGS_COMMON_MENUBAR=".backlogs-common-menubar",n.ADD_PANEL_VISIBLE_STATE_KEY="AgileBacklog.AddPanelVisibleState",n.CSSCLASS_INSERTION_HIGHLIGHT_TOP="grid-row-insertion-highlight-top",n.CSSCLASS_INSERTION_HIGHLIGHT_BOTTOM="grid-row-insertion-highlight-bottom",n.BACKLOG_TOAST="backlog-toast",n.TOAST_TIME=2e3,n.TOAST_FADE_IN_TIME=250,n.TOAST_FADE_OUT_TIME=1e3,n}();t.Backlog=fr;wi.initClassPrototype(fr,{_$element:null,_gridOptions:null,_events:null,_grid:null,_gridDataManager:null,_messageArea:null,_toolbar:null,_sprintView:null,_workItemManager:null,_messageSuppressor:null,_reorderManager:null,_teamSettings:null});hr=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype._isValid=function(n){var t=this._teamSettings.teamFieldName,i=n.getFieldValue(t);return this._isTeamFieldValid(i)},t.prototype.checkTeamFieldValue=function(n,t){var i=this;this._beginGetSettings(function(){t(i._isTeamFieldValid(n))})},t}(st.BaseBacklogMembershipEvaluator);t.BacklogOwnershipEvaluator=hr;cr=function(){function n(){}return n.prototype.setGrid=function(n){this._grid=n},n.prototype.onPrepareColumns=function(){},n.prototype.onCreateContextMenu=function(){},n}();t.BaseGridBehavior=cr;yr=function(n){function t(i,r,u,f,e,o){var h=__construct(this,n,[]);for(var c in h)h.hasOwnProperty(c)&&(this[c]=h[c]);return h._supportedBacklogLevel=i,h._getTeamId=r,h._eventHelper=u,h._parentFields=f,h._onError=e,h._initializeWit=o,h._workItemIdToChildWorkItemTypes={},h._popupMenu=null,h._createAddItemCell=function(n,i,r,u,f,e,o){var c=h._grid.getWorkItemIdAtDataIndex(i),l=h._grid._drawCell(n,i,r,u,f,e,o);return h._beginCacheChildWorkItemTypes(c).then(function(){var r=h._workItemIdToChildWorkItemTypes[c],u,n;r&&r.length&&(u=yi.format(yt.Add_WorkItems,r.join(yt.Add_WorkItems_Seperator)),n=$("<i />").attr({tabindex:"-1",role:"button"}).attr("aria-label",yt.KeyboardShortcutDescription_Add_Child).addClass("clickable bowtie-icon bowtie-math-plus-light "+t.CSS_ADD_ITEM_ICON).bind("click.VSS.Agile",function(){h._openChildTypeMenu(n,c,r,!1)}).bind("keydown.VSS.Agile",function(t){if(t.keyCode===pi.KeyCode.ENTER||t.keyCode===pi.KeyCode.SPACE)return n.click(),!1}).bind("mousedown.VSS.Agile",function(n){h._grid.setSelectedDataIndex(i);n.stopPropagation()}),s.RichContentTooltip.add(u,n,{setAriaDescribedBy:!0}),l.text(""),l.append(n))}),l},h}return __extends(t,n),t.prototype.getItems=function(n,t){if(rt.hasAgileToolsBacklogManagementPermission()&&t.length===1){var i=this._workItemIdToChildWorkItemTypes[t[0]];if(i&&i.length>0)return[this._createContextMenu(t[0],i)]}},t.prototype.onPrepareColumns=function(n){var t=ai.findIndex(n,function(n){return yi.ignoreCaseComparer(n.name,u.BacklogBehaviorConstants.BACKLOG_BUTTONS_COLUMN_NAME)===0}),i=t<0?__assign({},u.BacklogBehaviorConstants.BACKLOG_BUTTONS_COLUMN_DEFAULTS):n[t];i.rowCss="add-icon-cell";i.getCellContents=this._createAddItemCell;t<0&&n.splice(0,0,i)},t.prototype._beginCacheChildWorkItemTypes=function(n){var r=this,u=this._grid.getWorkItemTypeNameById(n),t;return(this._workItemIdToChildWorkItemTypes[n]&&(this._workItemIdToChildWorkItemTypes[n]=null),t=this._supportedBacklogLevel(u),!t)?i(null):lt.WorkItemCategoriesUtils.removeHiddenWorkItemTypeNames(t.workItemTypes).then(function(t){r._workItemIdToChildWorkItemTypes[n]=t},function(n){oi.publishErrorToTelemetry({name:"beginCacheChildWorkItemTypes",message:wi.getErrorMessage(n)})})},t.prototype._createContextMenu=function(n,t){var r=this,u=function(n){li.publishEvent(new li.TelemetryEventData(ct.AgileCustomerIntelligenceArea.AGILE,ct.AgileCustomerIntelligenceFeature.SINGLESELECT_CONTEXTMENU,{Action:"add-child-item",WorkItemType:n.workItemType}));r._addWorkItem(n.id,n.workItemType)},i,f=t.length>1?yt.ContextMenu_AddChildItems:yi.format(yt.Add_WorkItems,t[0]);return i={rank:4,text:f,title:f,setTitleOnlyOnOverflow:!0,disabled:this._grid.getRowSavingManager().isRowSaving(n),groupId:"modify"},t.length>1?i.childItems=function(n,i){var f=r._createMenuItems(t,u);i(f)}:(i.arguments={workItemType:t[0]},i.action=u),i},t.prototype._createMenuItems=function(n,t){return $.map(n,function(n){var i=(new Date).getTime().toString();return{id:i,text:n,arguments:{workItemType:n},action:t,icon:function(t){var r=lt.ControlUtils.buildColorElement(n,{labelledby:i});return r&&r.addClass(ht.AddNewItemControl.iconCssClass),t&&t.addClass(ht.AddNewItemControl.iconElementCssClass),r}}})},t.prototype._addWorkItem=function(n,i){var r=this,u={id:n,fields:this._parentFields},c={parenting:u,useDefaultIteration:!1},f=this._grid.getRowSavingManager(),o=this._grid.getDataManager(),s=!1,l=function(t){var f,i;if(!s){s=!0;f=Date.now();i=o.getWorkItemTreeIndex(n);r._grid._isExpanded(i)||r._grid.expandNode(i);var h=e.BacklogConfigurationService.getBacklogFieldName(e.BacklogFieldTypes.Order),u=t.getFieldValue(h),c=u!==null&&u!==undefined?u:-1;o.addWorkItem(t.id,c,t,n);r._grid.setSelectedWorkItemId(t.id,!0,!0);ei.logTracePoint("AddChildTaskGridBehavior._addWorkItem.complete");fr._recordAddBacklogItemTelemetry(f,ct.CustomerIntelligencePropertyValue.ADDBACKLOGITEM_ADDEDFROM_GRID)}},h;u.id<0&&(u.id=0);h=o.getDescendantWorkItemIds(n);f.markRowAsProcessing(n,h);ir.beginCreateWorkItemWithForm(this._getTeamId(),i,c,l,function(t){f.clearRowProcessing(n);$.isFunction(r._onError)&&r._onError(t)},function(i){$.isFunction(r._initializeWit)&&(r._initializeWit(i,n),r._eventHelper.fire(t.DIALOG_INITIALIZED,r,i));f.clearRowProcessing(n)},function(n){r._grid.focus();r._eventHelper.fire(t.DIALOG_CLOSED,r,n)})},t.prototype.openAddChild=function(n){if(n){var r=this._grid.getWorkItemIdAtDataIndex(n.dataIndex),u=this._workItemIdToChildWorkItemTypes[r],i=$(n.row).find("."+t.CSS_ADD_ITEM_ICON);i&&i.is(":visible")&&this._openChildTypeMenu(i,r,u,!0)}},t.prototype._openChildTypeMenu=function(n,i,r,u){var f;if(!this._grid.getRowSavingManager().isRowSaving(i))if(r.length>1){if(f=this._createPopupMenu(i,r),f.popup(n,n),f.getElement().find(".sub-menu").attr("aria-label",yt.KeyboardShortcutDescription_Add_Child),u){var o=f._getFirstMenuItem(),e=o.getSubMenu(),s=e.getItem(t.MENU_ITEMS_ADD_TASK_ID);e._selectItem(s)}}else this._addWorkItem(i,r[0])},t.prototype._createPopupMenu=function(n,t){var i=this,r=function(t){return i._addWorkItem(n,t.workItemType)},u=this._createMenuItems(t,r),f={align:"right",items:[{childItems:u}]};return this._popupMenu&&($("."+ht.AddNewItemControl.iconElementCssClass).each(function(n,t){return lt.ControlUtils.disposeColorElement(t.firstElementChild)}),this._popupMenu.dispose()),this._popupMenu=ti.BaseControl.createIn(ri.PopupMenu,$(document.body),f),this._popupMenu.getElement().addClass("menu-add-child-task"),this._popupMenu},t.DIALOG_INITIALIZED="add-child-grid-behavior-dialog-initialized",t.DIALOG_CLOSED="add-child-grid-behavior-dialog-closed",t.MENU_ITEMS_ADD_TASK_ID="add-task",t.CSS_ADD_ITEM_ICON="backlog-decompose-button",t}(cr);t.AddChildTaskGridBehavior=yr;rr=function(n){function t(t,i,r,u){var f=__construct(this,n,[i,r,u]);for(var e in f)f.hasOwnProperty(e)&&(this[e]=f[e]);return f._backlogLevel=t,f}return __extends(t,n),t.findOrphanedRowForLevel=function(n){var i;return $.each(ot.GridGroupRowBase.workitemIDMap,function(r,u){if(u instanceof t){var f=u;if(f.getBacklogLevel()===n)return i=f,!1}}),i},t.prototype.buildHierarchy=function(n,t){var i=this.getGridOptions(),r=this.extendPageData(i.payload.columns,t);return i.payload.rows.splice(0,0,r),i},t.prototype.extendPageData=function(n,t){var i=[],u=t&&+t[bt.CoreFieldRefNames.Id],r=this.getDefaultRow(u);return $.extend(r,t),$.each(n,function(n,t){i[n]=t in r?r[t]:null}),i},t.prototype.getDefaultRow=function(n){var t={},i,r;return n=n||this.getRowId(),t[bt.CoreFieldRefNames.Id]=""+n,i=e.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels()[this._backlogLevel-1],t[bt.CoreFieldRefNames.WorkItemType]=i.defaultWorkItemType,r=e.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels()[this._backlogLevel],t[bt.CoreFieldRefNames.Title]=yi.format(yt.GroupRow_OrphanProductBacklogItem,r.name),t},t.prototype.getBacklogLevel=function(){return this._backlogLevel},t.prototype.getRowRenderer=function(n,t,i){return new lr(n,t,i)},t}(ot.GridGroupRowBase);t.OrphanGroup=rr;lr=function(){function n(n){this.attachEvents(n)}return n.prototype.attachEvents=function(n){n.row.on("dblclick",this.handleEvent)},n.prototype.handleEvent=function(n){$(n.target).hasClass("grid-tree-icon")||(n.preventDefault(),n.stopPropagation())},n.prototype.getCssClass=function(){return"orphan-tasks-grid-row"},n.prototype.getTypeColor=function(){return lt.ControlUtils.getCSSPropertyValue("dummyParent","border-left-color")},n.prototype.getDisplayFields=function(){return[bt.CoreFieldRefNames.Title,u.BacklogBehaviorConstants.BACKLOG_BUTTONS_COLUMN_NAME]},n}();t.OrphanGroupRenderer=lr;ar=function(){function n(n,t,i,r,u){this._currentLevel=n;this._itemHierarchy=t;this._levelHelper=i;this._isLimitedExperience=r;this._getRootBacklogLevel=u}return n.prototype.getEffect=function(n){var i,t;return this._isLimitedExperience()||!n?this._getEffectAtUnparented():(i=this._itemHierarchy.getData(n),!i)?this._getEffectAtUnparented():(t=this._levelHelper.getLevel(i.type),t===this._currentLevel?this._getEffectWhenSiblingFocused(n):t>this._currentLevel?this._getEffectWhenChildFocused(n,t):this._getEffectWhenParentFocused(n))},n.prototype.getEffectAddToTop=function(){var n=0,t=this._itemHierarchy.children(0),i,r;return(t&&t.length>0&&(n=t[0]),i=this._itemHierarchy.getData(n),!i)?this._getEffectAtUnparented():(r=this._levelHelper.getLevel(i.type),r==this._currentLevel)?{highlightedWorkItemId:n,isParent:!1,parentId:0,nextId:n}:this._getEffectAtUnparented()},n.prototype.getEffectAddToBottom=function(){return this._getEffectAtEnd()},n.prototype._getEffectWhenSiblingFocused=function(n){var t={highlightedWorkItemId:n,isParent:!1,parentId:this._itemHierarchy.parent(n),nextId:n};return this._isEffectAtLastSibling(n)&&(t.highlightedWorkItemId=this._lastVisibleLeaf(n),t.nextId=null),t},n.prototype._getEffectWhenChildFocused=function(n,t){for(var i=n,u,r;t>this._currentLevel;){if(i=this._itemHierarchy.parent(i),u=this._itemHierarchy.getData(i),!u)return this._getEffectAtUnparented();t=this._levelHelper.getLevel(u.type)}return r={highlightedWorkItemId:i,isParent:!1,parentId:this._itemHierarchy.parent(i),nextId:i},this._isEffectAtLastSibling(i)&&(r.highlightedWorkItemId=this._lastVisibleLeaf(i),r.nextId=null),r},n.prototype._getEffectWhenParentFocused=function(n){var r=this._findValidElementInSubtree(n),e,f,o,i,u,t;if(r!==null)return u=r.isParent?r.workItemId:this._itemHierarchy.parent(r.workItemId),t=this._itemHierarchy.children(u),{highlightedWorkItemId:r.workItemId,isParent:r.isParent,parentId:u,nextId:t&&t.length>0&&t[0]||null};for(e=this._itemHierarchy.children(0),f=0;f<e.length;++f)if((o=e[f],o!==n)&&(i=this._findValidElementInSubtree(o),i!==null))return u=i.isParent?i.workItemId:this._itemHierarchy.parent(i.workItemId),t=this._itemHierarchy.children(u),{highlightedWorkItemId:i.workItemId,isParent:i.isParent,parentId:u,nextId:t&&t.length>0&&t[0]||null};return this._getEffectAtUnparented()},n.prototype._getEffectAtUnparented=function(){var n=this._findUnparentedRowIdForCurrentLevel(),t;return n?(t=this._itemHierarchy.children(n),{highlightedWorkItemId:n,isParent:!0,parentId:n,nextId:t&&t.length>0&&t[0]||null}):this._getEffectAtEnd()},n.prototype._getEffectAtEnd=function(){var n=0,i=this._itemHierarchy.children(0),t,r;if(i&&i.length>0)for(n=i[i.length-1],t=this._itemHierarchy.children(n);t&&t.length>0;)n=t[t.length-1],t=this._itemHierarchy.children(n);return r=this._currentLevel!==this._getRootBacklogLevel(),r?{highlightedWorkItemId:n,isParent:!0,parentId:null,nextId:null,addUnparentedRow:!0}:{highlightedWorkItemId:n,isParent:!1,parentId:0,nextId:null}},n.prototype._isEffectAtLastSibling=function(n){var i=this._itemHierarchy.parent(n),t=this._itemHierarchy.children(i);return t&&t.length>0&&t[t.length-1]===n},n.prototype._lastVisibleLeaf=function(n){for(var i=n,t=this._itemHierarchy.children(i);t&&t.length>0;)i=t[t.length-1],t=this._itemHierarchy.children(i);return i},n.prototype._findUnparentedRowIdForCurrentLevel=function(){var n=rr.findOrphanedRowForLevel(this._currentLevel-1);return n&&n.getRowId()||null},n.prototype._findValidElementInSubtree=function(n){for(var u=[n],t,r;u.length>0;){var i=u.pop(),e=this._itemHierarchy.getData(i),f=this._levelHelper.getLevel(e.type);if(f===this._currentLevel)return{workItemId:i,isParent:!1};if(f===this._currentLevel-1)return{workItemId:i,isParent:!0};if(t=this._itemHierarchy.children(i),t&&t.length>0)for(r=t.length-1;r>=0;--r)u.push(t[r])}return null},n}();t.AddPanelBehavior=ar});

define("Agile/Scripts/Backlog/BacklogShortcutGroup",["require","exports","Agile/Scripts/Backlog/ProductBacklogContextMenu","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","TfsCommon/Scripts/KeyboardShortcuts","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogShortcutGroup=void 0;var h=f.TfsContext.getDefault(),c=function(n){function t(t){var i=n.call(this,r.KeyboardShortcutGroup_Backlog)||this;return i._options=t,i._initializeData(),i.unregisterAllShortcuts(),i._registerAllShortcuts(),i}return __extends(t,n),t.prototype.unregisterAllShortcuts=function(){for(var i,r=Object.keys(this._shortcutsData),n=0,t=r;n<t.length;n++)i=t[n],this.unRegisterShortcut(i)},t.prototype._initializeData=function(){var f=this;this._shortcutsData={};var u=this._options,c=u.activateFilter,o=u.addNewItem,l=u.addPanelShortcuts,n=u.backlogElement,a=u.getBacklog,h=u.showParents,t=a(),e=t.getMoveToPositionHelper();this._shortcutsData["+"]={action:function(){t.expandOneLevel()},description:"Expand one level",element:n,hideFromHelpDialog:!0};this._shortcutsData["-"]={action:function(){t.collapseOneLevel()},description:"Collapse one level",element:n,hideFromHelpDialog:!0};e.isMoveToTopAlwaysHidden()||(this._shortcutsData["mod+home"]={action:function(){var r=t.getGrid(),n=r.getSelectedWorkItemIds();n=e.filterWorkItemIds(n);!e.isMoveToPositionAllowed(n)||e.isMoveToTopHidden(n)||i.ContextMenuContributionUtils.anyWorkItemSaving(r,n)||e.moveToTop(n)},description:r.KeyboardShortcutDescription_Move_Item_To_Top,element:n});this._shortcutsData["m b"]={action:function(){f._getTeamSettings().then(function(n){i.ContextMenuContributionUtils.moveToIteration(t.getGrid().getSelectedWorkItemIds(),n.backlogIteration.friendlyPath)})},description:r.KeyboardShortcutDescription_Move_Item_To_Backlog,element:n};this._shortcutsData["m i"]={action:function(){f._getTeamSettings().then(function(n){n.currentIteration&&f._setIterationPath(n.currentIteration.friendlyPath)})},description:r.KeyboardShortcutDescription_Move_Item_To_Current_Iteration,element:n};this._shortcutsData["m n"]={action:function(){f._getTeamSettings().then(function(n){n.futureIterations&&n.futureIterations.length>0&&f._setIterationPath(n.futureIterations[0].friendlyPath)})},description:r.KeyboardShortcutDescription_Move_Item_To_Next_Iteration,element:n};l&&(this._shortcutsData.esc={action:function(){t.setAddPanelState(!1);t.getGrid().focus(0)},description:"Escape from add panel",element:t.getAddPanelContainer()[0],hideFromHelpDialog:!0});o&&(this._shortcutsData.n={action:o,description:r.KeyboardShortcutDescription_Open_New_Item_Panel,element:n});this._shortcutsData.ins={action:function(){t.openAddChild()},description:r.KeyboardShortcutDescription_Add_Child,element:n};this._shortcutsData["f+i"]={action:function(){t.openAddChild()},description:r.KeyboardShortcutDescription_Add_Child,element:n};this._shortcutsData["mod+shift+f"]={action:c,description:s.KeyboardShortcutDescription_FilterResults,globalCombos:["mod+shift+f"]};h&&(this._shortcutsData.r={action:h,description:r.KeyboardShortcutDescription_Show_Hide_Parents,element:n})},t.prototype._setIterationPath=function(n){var t=this._options.getBacklog;i.ContextMenuContributionUtils.moveToIteration(t().getGrid().getSelectedWorkItemIds(),n)},t.prototype._registerAllShortcuts=function(){for(var t,r=Object.keys(this._shortcutsData),n=0,i=r;n<i.length;n++)t=i[n],this.registerShortcut(t,this._shortcutsData[t])},t.prototype._getTeamSettings=function(){var n=e.ProjectCollection.getConnection(h).getService(u.TeamAwarenessService);return n.beginGetTeamSettings(this._options.getTeamId())},t}(o.ShortcutGroupDefinition);t.BacklogShortcutGroup=c});

define("Agile/Scripts/BacklogsHub/BacklogPivot/ActionsCreator/BacklogDataProvider",["require","exports","Agile/Scripts/Generated/HubConstants","VSS/Contributions/Services","VSS/Service","VSS/WebApi/Constants","VSSPreview/Utilities/PromiseUtils"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogDataProvider=void 0;var o=function(){function n(){}return n.prototype.initializeBacklogData=function(){var n=u.getService(r.WebPageDataService);return n.getPageData(i.BacklogsHubConstants.PRODUCTBACKLOG_DATAPROVIDER_ID)},n.prototype.loadRightPanelContributions=function(){var t=u.getService(r.WebPageDataService),n=t.getPageData(i.BacklogsHubConstants.PRODUCTBACKLOG_DATAPROVIDER_ID),f=n.backlogPayload&&n.backlogPayload.isRequirementBacklog?i.RightPanelExtensionIds.RequirementBacklog:i.RightPanelExtensionIds.PortfolioBacklog;return e.toNativePromise(u.getService(r.ExtensionService).getContributionsForTargets([f]))},n.prototype.reloadBacklogPivotData=function(n,t,o){var s=this,h=u.getService(r.WebPageDataService),c={forecasting:n,inProgress:t,completedChildItems:o},l={id:i.BacklogsHubConstants.PRODUCTBACKLOG_DATAPROVIDER_ID,properties:{serviceInstanceType:f.ServiceInstanceTypes.TFS}};return e.toNativePromise(h.ensureDataProvidersResolved([l],!0,c).then(function(){return s.initializeBacklogData()}))},n}();t.BacklogDataProvider=o});

define("Agile/Scripts/BacklogsHub/BacklogPivot/ActionsCreator/BacklogPivotActions",["require","exports","Agile/Scripts/Common/ActionsHub","VSS/Flux/Diag"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogPivotActions=void 0;var u="PRODUCT_BACKLOG_PIVOT",f=function(n){function t(){var t=__construct(this,n,[u]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.rightPaneChanged=t.createAction(),t.addItemCalloutToggled=t.createAction(),t.filterBarToggled=t.createAction(),t.loadBacklogSucceeded=t.createAction(),t.loadBacklogFailed=t.createAction(),t.beginLoadBacklog=t.createAction(),t.beginReloadBacklog=t.createAction(),t.backlogItemAdded=t.createAction(),t.queryInfoAdded=t.createAction(),t.isFiltered=t.createAction(),t.loadRightPanelContributions=t.createAction(),t}return __extends(t,n),__decorate([r.registerDiagActions],t)}(i.ActionsHub);t.BacklogPivotActions=f});

define("Agile/Scripts/Resources/TFS.Resources.SprintsHub.BacklogPivot",["require","exports"],function(require,exports){var e=exports;e.NoWorkScheduled="You do not have any work scheduled yet";e.ScheduleWork="Create new work items or schedule work for this sprint from your product backlog";e.ServerNoResponse="The server did not return any response";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/Controls/Filters/WorkItemFilter",["require","exports","q","react","react-dom","OfficeFabric/Utilities","OfficeFabric/Fabric","OfficeFabric/Selection","VSS/VSS","VSS/Utils/Number","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VSSUI/FilterBar","VSSUI/TextFilterBarItem","VSSUI/Utilities/Filter","VSSUI/PickList","Presentation/Scripts/TFS/TFS.Core.Utils","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper","VSS/LoaderPlugins/Css!Controls/Filters/WorkItemFilter"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){function ot(n,t){var i,f=function(n){i=n};return u.render(r.createElement(e.Fabric,null,r.createElement(tt,__assign({ref:f},n))),t),i}function it(n){var f={},r,i,t,u;for(r in n)i=n[r],t=i&&i.value,!t||(typeof t=="string"?t=[{value:t}]:t instanceof Array||(t=[t]),u={values:t.map(function(n){return n.value})},i.operator==="and"&&(u.options={useAndOperator:!0}),f[r]=u);return f}function st(n){var u={},r,t,i;for(r in n)t=n[r],i={value:t.values.map(function(n){return{key:n,value:n}})},t.options&&t.options.useAndOperator&&(i.operator="and"),i.operator="and",u[r]=i;return u}function rt(n){for(var i,r={},t=0,u=n;t<u.length;t++)i=u[t],i.showOrAndOperators&&(r[i.fieldName]={value:undefined,operator:"or"});return r}function ut(n,t,r){var u=[],f=function(i){var f=r[i],e=a.first(n,function(n){return n.fieldName===i}),o,s,h;e&&(e.displayType===nt.Text?f.values&&f.values.length===1&&u.push(b.makePromise({field:e,values:String(a.first(f.values)),options:f.options})):(o=e.valueProvider,o?(s=o.getItemsForValues(f.values),u.push(b.makePromise(s).then(function(n){return{field:e,values:n,options:f.options}}))):(h=new g(i,t),u.push(b.makePromise(h.getItemsForValues(f.values)).then(function(n){return{field:e,values:n,options:f.options}})))))};for(var e in r)f(e);return i.all(u).then(function(t){for(var u=rt(n),i=0,f=t;i<f.length;i++){var r=f[i],e=r.field,h=r.values,o=r.options,s=undefined;e.showOrAndOperators&&(s=o&&o.useAndOperator?"and":"or");u[e.fieldName]={value:h,operator:s}}return u})}var g,nt,tt,ft,et;Object.defineProperty(t,"__esModule",{value:!0});t.filterValueComparer=t.workItemFilterItemComparer=t.resolveFilterState=t.generateDefaultFilterState=t.mapFromFilterState=t.mapToFilterState=t.renderFilter=t.WorkItemFilter=t.WorkItemFilterFieldType=t.DataSourceFilterValueProvider=void 0;g=function(){function n(n,t){this.fieldName=n;this.dataSource=t}return n.prototype.getItems=function(n){var i=this,t=this.dataSource.getUniqueValues(this.fieldName);return b.isPromise(t)?t.then(function(t){return i.transformResults(t,n)}):this.transformResults(t,n)},n.prototype.getItemsForValues=function(n){return this.transformResults(n)},n.prototype.getListItem=function(n){return{item:{key:n.key,name:n.display,value:n.value}}},n.prototype.transformResults=function(n,i){var r=n.slice(0);return i&&(i=i.filter(function(n){return!!n}),r=a.union(r,i,t.filterValueComparer)),r.map(this.transformResult)},n.prototype.transformResult=function(n){if(!d.isWorkItemIdentityRef(n))return{key:n,value:n,display:n};var t=n;return{key:t.distinctDisplayName,value:t.distinctDisplayName,display:t.identityRef.displayName,imageUrl:d.getAvatarUrl(t)}},n}();t.DataSourceFilterValueProvider=g,function(n){n[n.Text=0]="Text";n[n.CheckboxList=1]="CheckboxList"}(nt=t.WorkItemFilterFieldType||(t.WorkItemFilterFieldType={}));tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]),u,f,e;for(u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._resolveFilterBar=function(n){r._filterBar=n},r._cachedUniqueValues={},r._updateThrottleDelegate=c.throttledDelegate(r,250,function(){r._cachedUniqueValues={}}),f=r.props.filter,e=f===void 0?new p.Filter:f,r.state={filter:e},r}return __extends(t,n),t.prototype._subscribeToFilterChangeEvent=function(n){n.subscribe(this._handleFilterUpdated,p.FILTER_CHANGE_EVENT)},t.prototype._unsubscribeFromFilterChangeEvent=function(n){n.unsubscribe(this._handleFilterUpdated,p.FILTER_CHANGE_EVENT)},t.prototype.componentDidMount=function(){var i=this,n=this.state.filter,t=this.props,r=t.fields,f=t.dataSource,u=t.initialFilterState,e=t.setDefaultFilter;e&&(n.setDefaultState(rt(r)),n.reset());u?ut(r,f,u).then(function(t){i._subscribeToFilterChangeEvent(n);i.state.filter.setState(t)},s.handleError):this._subscribeToFilterChangeEvent(n);this.props.onRenderComplete&&this.props.onRenderComplete()},t.prototype.componentWillUnmount=function(){var n=this.state.filter;n&&this._unsubscribeFromFilterChangeEvent(n)},t.prototype.clearFilters=function(){this._suppressFilterUpdatedEvent=!0;this.state.filter.reset();this._suppressFilterUpdatedEvent=!1},t.prototype.focus=function(){this._filterBar&&this._filterBar.focus()},t.prototype.forceUpdate=function(){n.prototype.forceUpdate.call(this);this._filterBar&&this._filterBar.forceUpdate()},t.prototype.update=function(){this._updateThrottleDelegate()},t.prototype.render=function(){var t=this,n=this.state.filter,i=this.props.fields,u=i.map(function(i){return i.displayType===nt.Text?r.createElement(y.KeywordFilterBarItem,{key:i.fieldName,filter:n,filterItemKey:i.fieldName,placeholder:i.placeholder}):r.createElement(w.PickListFilterBarItem,{key:i.fieldName,filter:n,filterItemKey:i.fieldName,selectionMode:o.SelectionMode.multiple,getPickListItems:function(){return t._getItemsToRender(i.fieldName)},getListItem:function(n){return t._getPickListItem(i.fieldName,n)},placeholder:i.placeholder,noItemsText:i.noItemsText,showOrAndOperators:i.showOrAndOperators,showSelectAll:!1,isSearchable:!0,searchTextPlaceholder:i.searchTextPlaceholder||k.FilterSearchPlaceholderText})});return r.createElement(v.FilterBar,{filter:n,onRenderComplete:this.props.onRenderComplete,componentRef:this._resolveFilterBar,ref:this._resolveFilterBar,onDismissClicked:this.props.onDismissClicked},u)},t.prototype._getItemsToRender=function(n){if(!this._cachedUniqueValues[n]){var t=this._getFieldValueProvider(n),i=b.makePromise(t.getItems(this._getCurrentFilterValues(n)));this._cachedUniqueValues[n]=Promise.resolve(i)}return this._cachedUniqueValues[n]},t.prototype._getCurrentFilterValues=function(n){var t=it(this.state.filter.getState());return t[n]?t[n].values:undefined},t.prototype._getPickListItem=function(n,t){var u=this,f=this._getFieldValueProvider(n),r=f.getListItem(t);return r.promise&&i(r.promise).done(function(){return u.forceUpdate()}),r.item},t.prototype._getFieldValueProvider=function(n){var t=this._getField(n),i;return t&&t.valueProvider?t.valueProvider:(i=this.props.dataSource,new g(n,i))},t.prototype._getField=function(n){var t=this.props.fields;return a.first(t,function(t){return l.equals(t.fieldName,n,!0)})},t.prototype._handleFilterUpdated=function(){var n,t;this.props.filterUpdatedCallback&&!this._suppressFilterUpdatedEvent&&(n=this.state.filter,n&&(t=it(n.getState()),this.props.filterUpdatedCallback(t)))},t.defaultProps={setDefaultFilter:!0},__decorate([f.autobind],t.prototype,"_handleFilterUpdated",null),t}(r.Component);t.WorkItemFilter=tt;t.renderFilter=ot;t.mapToFilterState=it;t.mapFromFilterState=st;t.generateDefaultFilterState=rt;t.resolveFilterState=ut;ft=function(n,t){return!n&&t?-1:n&&!t?1:l.localeIgnoreCaseComparer(n.key,t.key)};t.workItemFilterItemComparer=ft;et=function(n,t){return typeof n=="string"&&typeof t=="string"?l.localeIgnoreCaseComparer(n,t):h.defaultComparer(n,t)};t.filterValueComparer=et});

define("Agile/Scripts/BacklogsHub/BacklogPivot/ActionsCreator/BacklogPivotActionsCreator",["require","exports","Agile/Scripts/Resources/TFS.Resources.SprintsHub.BacklogPivot","Presentation/Scripts/TFS/TFS.Configurations.Constants","VSS/Error","VSS/Events/Action","VSS/VSS","WorkItemTracking/Scripts/Controls/Filters/WorkItemFilter","WorkItemTracking/Scripts/Filtering/FilterManager"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogPivotActionsCreator=void 0;var h=function(){function n(n,t,i){this._actions=n;this._dataProvider=t;this._filterStatePersistenceManager=i}return n.prototype.initialize=function(){this._actions.beginLoadBacklog.invoke(null);var n=this._dataProvider.initializeBacklogData();this._backlogDataAvailable(n)},n.prototype.reloadBacklog=function(n,t,i){var r=this;this._actions.beginReloadBacklog.invoke(null);this._dataProvider.reloadBacklogPivotData(n,t,i).then(function(n){r._backlogDataAvailable(n);r.initializeRightPanelContributions()},function(n){r.backlogLoadFailed("reloadBacklogPivotData",n)})},n.prototype.initializeRightPanelContributions=function(){var n=this;this._dataProvider.loadRightPanelContributions().then(function(t){n._actions.loadRightPanelContributions.invoke(t)},function(n){u.publishErrorToTelemetry(n)})},n.prototype.toggleAddItemCallout=function(n){this._actions.addItemCalloutToggled.invoke(n)},n.prototype.toggleFilterBar=function(n){this._actions.filterBarToggled.invoke(n)},n.prototype.toggleFiltered=function(n){this._actions.isFiltered.invoke(n)},n.prototype.updateActiveRightPane=function(n){this._actions.rightPaneChanged.invoke(n)},n.prototype.backlogItemAdded=function(){this._actions.backlogItemAdded.invoke(null)},n.prototype.queryInfoAdded=function(){this._actions.queryInfoAdded.invoke(null)},n.prototype.openSettings=function(){f.getService().performAction(r.Actions.LAUNCH_COMMON_CONFIGURATION)},n.prototype.saveFilterState=function(n){this._filterStatePersistenceManager.saveFilterStateToServer(n);s.isFilterStateEmpty(o.mapToFilterState(n))?this.toggleFiltered(!1):this.toggleFiltered(!0)},n.prototype.updateFilterStatePersistenceManager=function(n){this._filterStatePersistenceManager=n},n.prototype._backlogDataAvailable=function(n){if(n)if(n.exceptionInfo){var t=n.exceptionInfo;this.backlogLoadFailed("ErrorInitializingBacklog",new Error(t.exceptionMessage),t)}else this._actions.loadBacklogSucceeded.invoke(n);else this.backlogLoadFailed("ErrorInitializingBacklog",new Error(i.ServerNoResponse))},n.prototype.backlogLoadFailed=function(n,t,i){u.publishErrorToTelemetry({name:n,message:e.getErrorMessage(t)});var r=i?i:{exceptionMessage:e.getErrorMessage(t)};this._actions.loadBacklogFailed.invoke(r)},n}();t.BacklogPivotActionsCreator=h});

define("Agile/Scripts/BacklogsHub/BacklogPivot/BacklogPivotContracts",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogPaneIds=void 0;var i;(function(n){n.Off="off";n.Planning="planning";n.Mapping="mapping"})(i=t.BacklogPaneIds||(t.BacklogPaneIds={}))});

define("Agile/Scripts/BacklogsHub/BacklogPivot/BacklogPivotSettings",["require","exports","VSS/Error","VSS/Settings/Services","Presentation/Scripts/TFS/Generated/TFS.WebApi.Constants"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogPivotSettings=void 0;var f;(function(n){function t(n,t,f){var e,o=(e={},e[n]=f,e);r.getService().setEntries(o,0,u.TfsSettingsScopeNames.WebTeam,t).then(null,function(n){i.publishErrorToTelemetry(new Error("Could not store settings for Backlogs Hub '".concat(n,"'")))})}function f(n,t){var f=r.getService(),i=f.getEntry(n,0,u.TfsSettingsScopeNames.WebTeam);return i==null?t:i}n.setMRU=t;n.getSetting=f})(f=t.BacklogPivotSettings||(t.BacklogPivotSettings={}))});

define("WorkItemTracking/Scripts/Controls/Filters/FilterValueProviders",["require","exports","q","VSS/Utils/String","VSS/Utils/Date","VSS/Utils/Array","Presentation/Scripts/TFS/FeatureRef/WorkItemStateColorsProvider","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.OM.Identities","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/FeatureRef/WorkItemStateCellRenderer","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","Presentation/Scripts/TFS/TFS.Core.Utils","WorkItemTracking/Scripts/Controls/Filters/WorkItemFilter","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WiqlOperators","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/AreaPathHelper","WorkItemTracking/Scripts/Controls/Filters/WorkItemFilterConstants"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){function rt(n,t,i,u){for(var e,h,f,v=t.getIds(),o=0,s=v;o<s.length;o++)if(e=s[o],h=t.getValue(e,i),u===h){var l=t.getValue(e,c.CoreFieldRefNames.TeamProject)||n,y=t.getValue(e,c.CoreFieldRefNames.WorkItemType),a={projectName:l,workItemType:y};if(r.localeIgnoreCaseComparer(l,n)===0){f=a;break}f||(f=a)}return f||(f={projectName:n}),f}var nt,ut,ft,g,et,ot;Object.defineProperty(t,"__esModule",{value:!0});t.AreaPathLeafFilterValueProvider=t.IterationPathFilterValueProvider=t.WorkItemTypeFilterValueProvider=t.StateFilterValueProvider=t.WorkItemStatusFilterValueProvider=t.AssignedToFilterValueProvider=t.UnassignedFilterItem=t.MeFilterItem=void 0;t.MeFilterItem={key:w.WiqlOperators.MacroMe,display:"".concat(w.WiqlOperators.MacroStart).concat(b.Wiql_MacroMe),value:w.WiqlOperators.MacroMe};t.UnassignedFilterItem={key:"_Unassigned_",display:b.AssignedToEmptyText,value:""};nt=function(n){function r(t,i){i===void 0&&(i=!1);var r=n.call(this,c.CoreFieldRefNames.AssignedTo,t)||this;return r._excludeMeFilter=i,r}return __extends(r,n),r.prototype.getItems=function(t){var i=n.prototype.getItems.call(this,t);return v.isPromise(i)?i.then(this.addMacros):this.addMacros(i)},r.prototype.getItemsForValues=function(r){for(var f,u=[],e=0,o=r;e<o.length;e++)f=o[e],f===t.UnassignedFilterItem.value?u.push(i(t.UnassignedFilterItem)):f===w.WiqlOperators.MacroMe?u.push(i(t.MeFilterItem)):u.push(v.makePromise(n.prototype.getItemsForValues.call(this,[f])).then(function(n){return n[0]}));return i.all(u)},r.prototype.getListItem=function(i){var u,o;if(i.key===t.MeFilterItem.key||i.key===t.UnassignedFilterItem.key)return n.prototype.getListItem.call(this,i);var s=i.key,f=i.value,e=i.display,r=i.imageUrl;return r||(u=h.IdentityHelper.parseUniquefiedIdentityName(f),r=h.IdentityHelper.getIdentityImageUrl(u,h.IdentityImageMode.ShowGenericImage,h.IdentityImageSize.Small),e=u.displayName),o={width:"20px",height:"20px"},{item:{key:s,name:e,value:f,iconProps:{iconType:3,imageProps:{style:o,src:r,className:"avatar"}}}}},r.prototype.addMacros=function(n){var i=[t.MeFilterItem,t.UnassignedFilterItem];return n=f.subtract(n,i,y.workItemFilterItemComparer),this._excludeMeFilter&&i.shift(),i.concat(n)},r}(y.DataSourceFilterValueProvider);t.AssignedToFilterValueProvider=nt;var tt={key:"_Valid_",display:b.FilterValidWorkItems,value:!0},it={key:"_Invalid_",display:b.FilterInvalidWorkItems,value:!1},st=function(n){function t(t){return n.call(this,d.FilterStatusFieldName,t)||this}return __extends(t,n),t.prototype.getItems=function(){return[tt,it]},t.prototype.getItemsForValues=function(){return[tt,it]},t}(y.DataSourceFilterValueProvider);t.WorkItemStatusFilterValueProvider=st;ut=function(n){function t(t,i){var r=n.call(this,c.CoreFieldRefNames.State,i)||this;return r.defaultProjectNameOrId=t,r}return __extends(t,n),t.prototype.getListItem=function(n){var a=this,i=n.value,o="12px",s="#ffffff",t=rt(this.defaultProjectNameOrId,this.dataSource,c.CoreFieldRefNames.State,i),u=e.WorkItemStateColorsProvider.getInstance(),h=null,r,f;return t&&t.projectName?u.isPopulated(t.projectName)?r=u.getColor(t.projectName,t.workItemType,i):(r=s,h=u.getColorAsync(t.projectName,t.workItemType,i).then(function(){return a.getListItem(n).item})):r=s,f=l.WorkItemStateCellRenderer.getProcessedStateColor(r),{item:{key:i,name:i,value:i,iconProps:{style:{border:"1px solid ".concat(f.borderColor),backgroundColor:f.backgroundColor,borderRadius:"50%",height:o,width:o}}},promise:h}},t}(y.DataSourceFilterValueProvider);t.StateFilterValueProvider=ut;ft=function(n){function t(t,i){var r=n.call(this,c.CoreFieldRefNames.WorkItemType,i)||this;return r.projectName=t,r}return __extends(t,n),t.prototype.getListItem=function(n){var o=this,t=n.value,u=a.WorkItemTypeColorAndIconsProvider.getInstance(),r=rt(this.projectName,this.dataSource,c.CoreFieldRefNames.WorkItemType,t),f={color:a.WorkItemTypeColorAndIcons.DEFAULT_WORKITEMTYPE_COLOR,icon:a.WorkItemTypeColorAndIcons.DEFAULT_WORKITEMTYPE_ICON},e=null;return r&&r.projectName&&(u.isPopulated(r.projectName)?f=u.getColorAndIcon(r.projectName,t):e=i(u.getColorAndIconAsync(r.projectName,t)).then(function(){return o.getListItem(n).item})),{item:{key:t,name:t,value:t,iconProps:{iconType:1,iconName:f.icon,style:{color:f.color}}},promise:e}},t}(y.DataSourceFilterValueProvider);t.WorkItemTypeFilterValueProvider=ft;g={key:w.WiqlOperators.MacroCurrentIteration,value:w.WiqlOperators.MacroCurrentIteration,display:"".concat(w.WiqlOperators.MacroStart).concat(b.Wiql_MacroCurrentIteration)};et=function(){function n(n,t){this.projectNameOrId=n;this.dataSource=t}return n.prototype.getItems=function(n){var t=this,e=o.TfsContext.getDefault(),h=s.ProjectCollection.getConnection(e),c=h.getService(p.WorkItemStore);return i.all([this.getIterationPathValues(),i.Promise(function(n,i){return c.beginGetProject(t.projectNameOrId,n,i)})]).spread(function(t,i){n&&(n=f.subtract(n,[g.key],r.localeIgnoreCaseComparer),n=n.filter(function(n){i.nodesCacheManager.findIterationNodeByPath(n)!==null}),t=f.union(t,n,r.localeIgnoreCaseComparer));var u=[];return t.forEach(function(n){var t=i.nodesCacheManager.findIterationNodeByPath(n);t&&u.push({path:n,node:t})}),u}).then(function(n){return n.sort(function(n,t){var i=n.node,f=t.node,o=u.defaultComparer(i.startDate,f.startDate),e;return o!==0?o:(e=r.localeIgnoreCaseComparer(i.name,f.name),e!==0)?e:i.id-f.id}),[g].concat(n.map(function(n){return{key:n.path,value:n.path,display:n.node.name}}))})},n.prototype.getItemsForValues=function(n){var t=this;return this.getNodesCacheManager().then(function(i){var r=[];return n.forEach(function(n){if(n===w.WiqlOperators.MacroCurrentIteration)r.push(g);else{var u=i.findIterationNodeByPath(n);u&&r.push(t.transformNode(n,u))}}),r})},n.prototype.getListItem=function(n){return{item:{key:n.key,name:n.display,value:n.value}}},n.prototype.transformNode=function(n,t){return{key:n,value:n,display:t.name}},n.prototype.getNodesCacheManager=function(){var n=this,t=o.TfsContext.getDefault(),r=s.ProjectCollection.getConnection(t),u=r.getService(p.WorkItemStore);return i.Promise(function(t,i){return u.beginGetProject(n.projectNameOrId,t,i)}).then(function(n){return n.nodesCacheManager}).then(function(n){return n.beginGetNodes().then(function(){return n})})},n.prototype.getIterationPathValues=function(){return v.makePromise(this.dataSource.getUniqueValues(c.CoreFieldRefNames.IterationPath))},n}();t.IterationPathFilterValueProvider=et;ot=function(n){function t(t){return n.call(this,c.CoreFieldRefNames.AreaPath,t)||this}return __extends(t,n),t.prototype.getItems=function(t){var i=n.prototype.getItems.call(this,t);return v.isPromise(i)?i.then(this._getUniqueAreaPathLeafItems):this._getUniqueAreaPathLeafItems(i)},t.prototype._getUniqueAreaPathLeafItems=function(n){var t=n.map(function(n){return k.getAreaPathLeafNode(n.key)}),i=f.uniqueSort(t,r.localeIgnoreCaseComparer);return i.map(function(n){return{key:n,display:n,value:n}})},t}(y.DataSourceFilterValueProvider);t.AreaPathLeafFilterValueProvider=ot});

define("Agile/Scripts/Common/Components/AgileFilterBar/AgileFilterManager",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Context","VSS/Diag","VSSUI/Utilities/Filter","WorkItemTracking/Scripts/Controls/Filters/FilterValueProviders","WorkItemTracking/Scripts/Controls/Filters/WorkItemFilter","WorkItemTracking/Scripts/Filtering/AreaPathFilterProvider","WorkItemTracking/Scripts/Filtering/AssignedToFilterProvider","WorkItemTracking/Scripts/Filtering/FieldFilterProvider","WorkItemTracking/Scripts/Filtering/FilterManager","WorkItemTracking/Scripts/Filtering/IterationPathFilterProvider","WorkItemTracking/Scripts/Filtering/TagsFilterProvider","WorkItemTracking/Scripts/Filtering/TextFilterProvider","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","Agile/Scripts/Resources/TFS.Resources.AgileControls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){Object.defineProperty(t,"__esModule",{value:!0});t.AgileFilterManager=void 0;var b=function(){function n(n,t,i,e){var s=this;this._updateFilter=function(){if(s._filterManager){var n=o.mapToFilterState(s._filter.getState());l.isFilterStateEmpty(s._previousFilterValue)&&l.isFilterStateEmpty(n)||(s._previousFilterValue=n,s._filterManager.setFilters(n))}};u.Debug.assertIsNotNull(n,"Filter datasource should not be null");u.Debug.assertIsNotNull(t,"Filter manager should not be null");u.Debug.assertIsNotNull(i,"Filter should not be null");this._dataSource=n;this._filterManager=t;this._teamId=e;this._fields=this._constructFilterFields(this._dataSource,r.getPageContext().webContext.project.name);this._registerFilterProviders(this._filterManager);this._filter=i;this._previousFilterValue=o.mapToFilterState(this._filter.getState());this._updateFilter();this._filter.subscribe(this._updateFilter,f.FILTER_APPLIED_EVENT)}return Object.defineProperty(n.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"filterFields",{get:function(){return this._fields},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"filter",{get:function(){return this._filter},enumerable:!1,configurable:!0}),n.prototype.activate=function(){this._filterManager.activate()},n.prototype.dispose=function(){this._filter&&this._filter.unsubscribe(this._updateFilter)},n.prototype.attachOnDataUpdated=function(n){this._filterManager.attachEvent(l.FilterManager.EVENT_DATA_UPDATED,n)},n.prototype.detachOnDataUpdated=function(n){this._filterManager.detachEvent(l.FilterManager.EVENT_DATA_UPDATED,n)},n.prototype._registerFilterProviders=function(n){n&&(this._registerProviderIfNotRegistered(n,y.TextFilterProvider.PROVIDER_TYPE,new y.TextFilterProvider),this._registerProviderIfNotRegistered(n,i.CoreFieldRefNames.WorkItemType,new c.FieldFilterProvider(i.CoreFieldRefNames.WorkItemType)),this._registerProviderIfNotRegistered(n,i.CoreFieldRefNames.State,new c.FieldFilterProvider(i.CoreFieldRefNames.State)),this._registerProviderIfNotRegistered(n,i.CoreFieldRefNames.AssignedTo,new h.AssignedToFilterProvider),this._registerProviderIfNotRegistered(n,i.CoreFieldRefNames.Tags,new v.TagsFilterProvider),this._registerProviderIfNotRegistered(n,i.CoreFieldRefNames.IterationPath,new a.IterationPathFilterProvider(this._teamId)),this._registerProviderIfNotRegistered(n,i.CoreFieldRefNames.AreaPath,new s.AreaPathFilterProvider))},n.prototype._constructFilterFields=function(n,t){return n?[{displayType:o.WorkItemFilterFieldType.Text,fieldName:y.TextFilterProvider.PROVIDER_TYPE,placeholder:p.FilterByKeyword},{displayType:o.WorkItemFilterFieldType.CheckboxList,fieldName:i.CoreFieldRefNames.WorkItemType,placeholder:p.FilterByTypes,noItemsText:p.FilterNoTypes,valueProvider:new e.WorkItemTypeFilterValueProvider(t,n)},{displayType:o.WorkItemFilterFieldType.CheckboxList,fieldName:i.CoreFieldRefNames.AssignedTo,placeholder:p.FilterByAssignedTo,valueProvider:new e.AssignedToFilterValueProvider(n)},{displayType:o.WorkItemFilterFieldType.CheckboxList,fieldName:i.CoreFieldRefNames.State,placeholder:p.FilterByStates,noItemsText:p.FilterNoStates,valueProvider:new e.StateFilterValueProvider(t,n)},{displayType:o.WorkItemFilterFieldType.CheckboxList,fieldName:i.CoreFieldRefNames.Tags,placeholder:p.FilterByTags,noItemsText:p.FilterNoTags,showOrAndOperators:!0},{displayType:o.WorkItemFilterFieldType.CheckboxList,fieldName:i.CoreFieldRefNames.IterationPath,placeholder:w.Filtering_Iteration_DisplayName,valueProvider:new e.IterationPathFilterValueProvider(t,n)},{displayType:o.WorkItemFilterFieldType.CheckboxList,fieldName:i.CoreFieldRefNames.AreaPath,placeholder:w.Filtering_Area_DisplayName,noItemsText:p.FilterNoArea,valueProvider:new e.AreaPathLeafFilterValueProvider(n)}]:[]},n.prototype._registerProviderIfNotRegistered=function(n,t,i){n.getFilterProvider(t)||n.registerFilterProvider(t,i)},n}();t.AgileFilterManager=b});

define("Agile/Scripts/Common/Components/BacklogPivot/BacklogWrapperBase",["require","exports","Agile/Scripts/Common/Components/AgileFilterBar/AgileFilterManager","react"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogWrapperBase=void 0;var u=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getDraggingWorkItemInformation=function(){if(this._backlog)return this._backlog.getDraggingWorkItemInformation();throw new Error("The backlog is not yet available");},t.prototype.moveWorkItemsToIteration=function(n,t){if(this._backlog)this._backlog.moveWorkItemsToIterationAndFireDropCompleted(n,t);else throw new Error("The backlog is not yet available");},t.prototype.openColumnOptions=function(){if(this._backlog)this._backlog.launchColumnOptions();else throw new Error("The backlog is not yet available");},t.prototype.createQuery=function(n){if(this._backlog)return this._backlog.generateAndLaunchNewQuery(n);throw new Error("The backlog is not yet available");},t.prototype.sendEmail=function(){if(this._backlog)this._backlog.emailQueryResults();else throw new Error("The backlog is not yet available");},t.prototype.resize=function(){this._backlog&&this._backlog._grid&&this._backlog._grid.resize()},t.prototype.toggleInsertionLine=function(n,t){if(this._backlog)this._backlog.setAddPanelHighlight(n,t);else throw new Error("The backlog is not yet available");},t.prototype.addWorkItem=function(n,t,i){if(this._backlog)return this._backlog.createAndAddWorkItem(n,t,i);throw new Error("The backlog is not yet available");},t.prototype.dispose=function(){this._backlog&&this._backlog.dispose()},t.prototype._getAgileFilterManager=function(n,t){var r=this.props,u=r.backlogContext,f=r.filter;return new i.AgileFilterManager(n,t,f,u.team.id)},t.prototype._setupFilterContext=function(){var t=this.props.backlogFilterContext,i=this._backlog.getGrid(),n=this._backlog.getGrid().getFilterManager(),u=this._getAgileFilterManager(i,n),r;n.isActive()||n.activate();n.isFiltering()&&(r=n.filter(),i.filterWorkItems(r));t.value=__assign(__assign({},t.value),{filterManager:u})},t}(r.Component);t.BacklogWrapperBase=u});

define("Agile/Scripts/Resources/TFS.Resources.AgileHubsShared",["require","exports"],function(require,exports){var e=exports;e.NewBacklogLevelVisibilityNotSetNotificationMessage_Left="One or more backlog levels have been configured for this project. ";e.NewBacklogLevelVisibilityNotSetNotificationMessage_Right=" to add them to your team\u0027s backlogs.";e.NewBacklogLevelVisibilityNotSetNotificationLinkText_NewHub="Change team backlog visibilities";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Agile/Scripts/Common/Components/NewBacklogLevelsMessage",["require","exports","react","Agile/Scripts/Common/Agile","Agile/Scripts/Resources/TFS.Resources.AgileHubsShared","OfficeFabric/Link","Presentation/Scripts/TFS/TFS.Configurations.Constants","VSS/Events/Action","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/NewBacklogLevelsMessage"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.NewBacklogLevelsMessage=void 0;var s=function(n){function t(t){var i=__construct(this,n,[t]);for(var u in i)i.hasOwnProperty(u)&&(this[u]=i[u]);return i._onClickOpenBacklogSettings=function(){o.getService().performAction(e.Actions.LAUNCH_COMMON_CONFIGURATION,{defaultTabId:r.TabControlsRegistrationConstants.BACKLOGS_TAB_ID})},i}return __extends(t,n),t.prototype.render=function(){return i.createElement("div",null,u.NewBacklogLevelVisibilityNotSetNotificationMessage_Left,i.createElement(f.Link,{className:"open-settings-dialog-link",onClick:this._onClickOpenBacklogSettings},u.NewBacklogLevelVisibilityNotSetNotificationLinkText_NewHub))},t}(i.Component);t.NewBacklogLevelsMessage=s});

define("TFSUI/Common/Constants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.PromiseState=void 0;var i;(function(n){n.Fulfilled="fulfilled";n.Pending="pending";n.Rejected="rejected"})(i=t.PromiseState||(t.PromiseState={}))});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("Agile/Scripts/Backlog/BacklogsPanelPivotFilterManager",["require","exports","q","VSS/VSS","VSS/Controls/Navigation","VSS/Controls/Splitter","VSS/Controls","VSS/Service","VSS/Diag","VSS/Contributions/Services","VSS/Contributions/Controls","VSS/Telemetry/Services","Agile/Scripts/Common/Agile","VSS/Utils/String","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Agile/Scripts/Backlog/ProductBacklogMru","Agile/Scripts/Backlog/Events","Agile/Scripts/Common/CustomerIntelligence","TFSUI/Common/Constants","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","VSS/Utils/Accessibility","Agile/Scripts/Generated/HubConstants","WorkItemTracking/Scripts/Utils/PermissionHandler"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){function st(n,t,i){l.publishEvent(new l.TelemetryEventData(b.AgileCustomerIntelligenceArea.AGILE,b.AgileCustomerIntelligenceFeature.TELEMETRY_BACKLOGS_PANEL,{scenario:n,area:t,panelId:i}))}var ft,rt,et,ut,ot,it;Object.defineProperty(t,"__esModule",{value:!0});t.BacklogsPanelPivotFilterValues=t.CapacityPlanningPivotFilterManager=t.IterationBacklogPivotFilterManager=t.ProductBacklogsPanelPivotFilterManager=t.BacklogsPanelPivotFilterManager=void 0;ft=210;rt=function(){function n(n,t){this._toolPanelItems=[];this._getBacklogsRightPanePivotFilterContainer=function(){return $(".backlogs-right-pane-pivot-filter")};this._getDefaultToolPanelContainer=function(){return $(".backlogs-default-tool-panel-container")};this._getExtensionToolPanelContainer=function(){return $(".backlogs-extension-tool-panel-container")};this._getSelectedWorkItems=n;this._eventHelper=t;this._splitter=e.Enhancement.ensureEnhancement(f.Splitter,$(".right-hub-splitter"));this._splitter&&(this._splitter.expandState=null);this._setSplitterMinWidth()}return n.prototype._setSplitterMinWidth=function(){this._splitter&&this._splitter.setMinWidth(ft)},n.prototype._initialize=function(){var n=this;this._createOrRefreshPivotFilters();this._eventHelper.attachEvent(w.BacklogNotifications.BACKLOG_GRID_SELECTION_CHANGED,function(t,i){n._notifyExtensionForSelectionChange(i.selectedWorkItems)})},n.prototype._isPivotFilterAvailable=function(){return!0},n.prototype._createOrRefreshPivotFilters=function(){var t=this,r,f,o;if(!this._isPivotFilterAvailable()){r=this._getBacklogsRightPanePivotFilterContainer();r.addClass("agile-important-hidden");r.empty();this._backlogsPaneFilter=null;this._toolPanelItems=[];this._splitter.noSplit();return}f=[];f.push(this._getContributedMenuItems());o=i.allSettled(f).then(function(i){var b,d,r,f,h,o,c,g,s,l,a,y,p,w;for(t._toolPanelItems=[],r=!1,f=0,h=i;f<h.length;f++)o=h[f],o.state===k.PromiseState.Fulfilled&&((b=t._toolPanelItems).push.apply(b,o.value),r=o.value.length>0);if((d=t._toolPanelItems).splice.apply(d,__spreadArray([0,0],t._getDefaultMenuItems(r),!1)),c=t._getBacklogsRightPanePivotFilterContainer(),t._toolPanelItems&&t._toolPanelItems.length===1&&v.equals(t._toolPanelItems[0].value,it.ToolPanel_Hidden,!0))c.addClass("agile-important-hidden"),t._splitter.noSplit();else{for(g=t._getMRUPane()||t._getDefaultPivotFilterSelection(),s=0,l=t._toolPanelItems;s<l.length;s++)a=l[s],a.selected=v.equals(g,a.value,!0);y=t._getBacklogsRightPanePivotFilterContainer();y.empty();p={text:t._getDefaultFilterTitle(r),items:t._toolPanelItems,change:function(i){t._setMRUPane(i.value);t._handleTogglePivotFilter(i.value,!0);st(n.TELEMETRY_EVENT_BACKLOG_PANEL_CHANGED,t._getBacklogsPanelArea(),i.value)}};p.behavior=r?"dropdown":"select";t._backlogsPaneFilter=e.BaseControl.create(u.PivotFilter,y,p);c.removeClass("agile-important-hidden");w=t._backlogsPaneFilter.getSelectedItem().value;t._handleTogglePivotFilter(w,!1);st(n.TELEMETRY_EVENT_BACKLOG_PANEL_SELECTION_ONLOAD,t._getBacklogsPanelArea(),w)}},function(){var n=t._getBacklogsRightPanePivotFilterContainer();n.addClass("agile-important-hidden");t._splitter.noSplit()});g.ProgressAnnouncer.forPromise(o,{announceStartMessage:y.ProductBacklogLoading_RightPaneExtesionStart,announceEndMessage:y.ProductBacklogLoading_RightPaneExtesionEnd,announceErrorMessage:y.ProductBacklogLoading_RightPaneError})},n.prototype._handleTogglePivotFilter=function(n){var i,t,r,u;switch(n){case it.ToolPanel_Hidden:this._splitter.noSplit();break;default:for(i=!1,t=0,r=this._toolPanelItems;t<r.length;t++)u=r[t],v.equals(u.value,n,!0)&&(i=!0);i?this._showContributedToolPanel(n):this._splitter.noSplit()}},n.prototype._getDefaultMenuItems=function(){return[{id:it.ToolPanel_Hidden,text:y.ToolPanel_Off,value:it.ToolPanel_Hidden}]},n.prototype._getDefaultFilterTitle=function(n){return n?y.ToolPanel_FilterTitle:y.ToolPanel_Mapping},n.prototype._getContributedMenuItems=function(){var n=this._getTargetsForContributedToolPanel();return n&&n.length>0?o.getService(h.ExtensionService).getContributionsForTargets(n).then(function(n){var u=[],t,i;if(n&&n.length>0)for(t=0,i=n;t<i.length;t++){var r=i[t],f=r.id,o=r.properties.title,e=r.properties.name;u.push({id:f,text:e,title:o||e,value:f})}return u}):i([])},n.prototype._showContributedToolPanel=function(n){var t=this,i;this._getDefaultToolPanelContainer().hide();i=this._getExtensionToolPanelContainer();i.show();i.empty();this._currentContributedToolPanel=null;c.createExtensionHost(i,n,{}).then(function(i){o.getService(h.ExtensionService).getContribution(n).then(function(n){i.getRegisteredInstance(n.properties.registeredObjectId).then(function(n){t._currentContributedToolPanel=n;var i=$.isFunction(t._getSelectedWorkItems)?t._getSelectedWorkItems():[];t._notifyExtensionForSelectionChange(i)})})});this._splitter.split()},n.prototype._notifyExtensionForSelectionChange=function(n){var i,t,r,u;if(this._currentContributedToolPanel&&this._currentContributedToolPanel.workItemSelectionChanged&&typeof this._currentContributedToolPanel.workItemSelectionChanged=="function"){for(i=[],t=0,r=n;t<r.length;t++)u=r[t],i.push({workItemId:u.workItemId,workItemType:u.workItemType});this._currentContributedToolPanel.workItemSelectionChanged(i)}},n.prototype._getMRUPane=function(){return it.ToolPanel_Hidden},n.prototype._getTargetsForContributedToolPanel=function(){return null},n.prototype._getDefaultPivotFilterSelection=function(){return it.ToolPanel_Hidden},n.TELEMETRY_EVENT_BACKLOG_PANEL_CHANGED="BacklogsPanelSelectionChanged",n.TELEMETRY_EVENT_BACKLOG_PANEL_SELECTION_ONLOAD="BacklogsPanelSelectionOnLoad",n}();t.BacklogsPanelPivotFilterManager=rt;et=function(n){function t(t,i,r,u){var f=__construct(this,n,[r,u]);for(var e in f)f.hasOwnProperty(e)&&(this[e]=f[e]);return f._isRootBacklog=t,f._mappingPanelOptions=i,f._eventHelper=u,f._initialize(),f}return __extends(t,n),t.prototype.refreshPivotFilters=function(n,t){this._isRootBacklog=n;this._mappingPanelOptions=t;this._createOrRefreshPivotFilters()},t.prototype._getDefaultMenuItems=function(t){var r=tt.hasAgileToolsBacklogManagementPermission(),u=d.BacklogConfigurationService.getBacklogConfiguration().portfolioBacklogs.length!==0,i=n.prototype._getDefaultMenuItems.call(this,t);return!this._isRootBacklog&&r&&u&&i.push({id:it.ToolPanel_Mapping,text:t?y.ToolPanel_Mapping:y.MappingPane_On,value:it.ToolPanel_Mapping}),i},t.prototype._isPivotFilterAvailable=function(){return!this._isRootBacklog},t.prototype._handleTogglePivotFilter=function(t,i){var f=this,u;switch(t){case it.ToolPanel_Mapping:s.logTracePoint("Backlog.MappingPaneToggleOn.start");u=new g.ProgressAnnouncer({announceStartMessage:y.ProductBacklogLoading_MappingPaneStart,announceEndMessage:y.ProductBacklogLoading_MappingPaneEnd});r.requireModules(["Agile/Scripts/Backlog/ProductBacklogMappingPanel"]).spread(function(n){f._afterMappingPanelLoaded(n,i,u)});break;default:n.prototype._handleTogglePivotFilter.call(this,t,i)}},t.prototype._afterMappingPanelLoaded=function(n,t,i){this._mappingPanelOptions&&(this._mappingPanelOptions.setFocus=t,this._mappingPanelOptions.announcer=i,this._mappingPanelOptions.eventHelper=this._eventHelper);n.createOrRefreshMappingPanel(this._mappingPanelOptions);this._getExtensionToolPanelContainer().hide();this._getDefaultToolPanelContainer().show();this._splitter.split()},t.prototype._getMRUPane=function(){return p.BacklogsToolPanel.getMRUPanel(this._getBacklogsPanelArea())},t.prototype._setMRUPane=function(n){p.BacklogsToolPanel.setMRUPanel(this._getBacklogsPanelArea(),n)},t.prototype._getTargetsForContributedToolPanel=function(){var n=a.BacklogContext.getInstance().isRequirement;return[n?nt.RightPanelExtensionIds.RequirementBacklog:nt.RightPanelExtensionIds.PortfolioBacklog]},t.prototype._getBacklogsPanelArea=function(){return p.BacklogsToolPanel.AREA_PRODUCTBACKLOG},t}(rt);t.ProductBacklogsPanelPivotFilterManager=et;ut=function(n){function t(t,i,r){var u=__construct(this,n,[i,r]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u._options=t,u._initialize(),u}return __extends(t,n),t.prototype._getDefaultMenuItems=function(t){var i=n.prototype._getDefaultMenuItems.call(this,t);return i.push({id:it.ToolPanel_Capacity,text:t?y.ToolPanel_Capacity:y.MappingPane_On,value:it.ToolPanel_Capacity}),i},t.prototype._getDefaultFilterTitle=function(n){return n?y.ToolPanel_FilterTitle:y.ToolPanel_Capacity},t.prototype._handleTogglePivotFilter=function(t,i){var u=this,f;switch(t){case it.ToolPanel_Capacity:f=function(){u._getExtensionToolPanelContainer().hide();u._getDefaultToolPanelContainer().show();u._splitter.split()};$(".capacity-pane").length===0?r.requireModules(["Agile/Scripts/Capacity/CapacityPanel"]).spread(function(n){new n.CapacityPanel(u._options);f()}):f();break;default:n.prototype._handleTogglePivotFilter.call(this,t,i)}},t.prototype._getTargetsForContributedToolPanel=function(){return[nt.RightPanelExtensionIds.IterationBacklog]},t.prototype._getMRUPane=function(){return p.BacklogsToolPanel.getMRUPanel(this._getBacklogsPanelArea())},t.prototype._setMRUPane=function(n){p.BacklogsToolPanel.setMRUPanel(this._getBacklogsPanelArea(),n)},t.prototype._getBacklogsPanelArea=function(){return p.BacklogsToolPanel.AREA_ITERATIONBACKLOG},t.prototype._getDefaultPivotFilterSelection=function(){return it.ToolPanel_Capacity},t}(rt);t.IterationBacklogPivotFilterManager=ut;ot=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype._getTargetsForContributedToolPanel=function(){return[]},t.prototype._getContributedMenuItems=function(){return i([])},t.prototype._getMRUPane=function(){return p.BacklogsToolPanel.getMRUPanel(this._getBacklogsPanelArea())},t.prototype._setMRUPane=function(n){p.BacklogsToolPanel.setMRUPanel(this._getBacklogsPanelArea(),n)},t.prototype._getBacklogsPanelArea=function(){return p.BacklogsToolPanel.AREA_CAPACITYPLANNING},t}(ut);t.CapacityPlanningPivotFilterManager=ot,function(n){n.ToolPanel_Hidden="AGILE_TOOL_PANEL_HIDDEN";n.ToolPanel_Mapping="AGILE_TOOL_PANEL_MAPPING";n.ToolPanel_Capacity="AGILE_TOOL_PANEL_CAPACITY"}(it=t.BacklogsPanelPivotFilterValues||(t.BacklogsPanelPivotFilterValues={}))});

define("Agile/Scripts/Backlog/Forecasting/SprintLineManager",["require","exports","Agile/Scripts/Common/Utils","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Diag","VSS/Events/Handlers","VSS/Utils/Core","VSS/Utils/String","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/TFS.WorkItemTracking"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){Object.defineProperty(t,"__esModule",{value:!0});t.SprintLineManager=void 0;var p=e.TfsContext.getDefault(),w=i.WorkItemUtils,b=function(){function n(n,t,i,r){var u=this,f;this._isWorkItemOfRequirementCategory=r;this._enabled=!1;this._workItemChangedHandler=function(n,t){(t.change===a.WorkItemChangeType.Saved||t.change===a.WorkItemChangeType.Opened)&&u._beginUpdateWorkItemEffort(t.workItem,null,function(){t.change===a.WorkItemChangeType.Saved&&u.scheduleDelayedUpdateLines(!0)})};this.idChangedHandler=function(n,t){delete u._workItemEffort[t.oldId];u._linesLookup&&u._linesLookup.hasOwnProperty(t.oldId)&&(u._linesLookup[t.newId]=u._linesLookup[t.oldId],delete u._linesLookup[t.oldId])};this.updateLinesWithoutRedraw=function(){u.updateLines(!1)};this.newItemHandler=function(n,t){t.workItem?u._beginUpdateWorkItemEffort(t.workItem,t.workItemId,function(){u.updateLines(!1)}):u.updateLines(!1)};this._events=new h.NamedEventCollection;this._gridDataManager=t;this._processEffortData(n);f=o.ProjectCollection.getConnection(p).getService(y.WorkItemStore);this._iterations=i.futureIterations;v.WorkItemManager.get(f).attachWorkItemChanged(this._workItemChangedHandler);this._gridDataManager.attachNewItem(this.newItemHandler);this._gridDataManager.attachMoveItems(this.updateLinesWithoutRedraw);this._gridDataManager.attachRemovedItem(this.updateLinesWithoutRedraw);this._gridDataManager.attachIdChange(this.idChangedHandler)}return n.createSprintLineManager=function(t,i,r,u){return new n(r,t,i,u)},n.prototype.dispose=function(){var n=o.ProjectCollection.getConnection(p).getService(y.WorkItemStore);v.WorkItemManager.get(n).detachWorkItemChanged(this._workItemChangedHandler);this._gridDataManager&&(this._gridDataManager.detachNewItem(this.newItemHandler),this._gridDataManager.detachMoveItems(this.updateLinesWithoutRedraw),this._gridDataManager.detachRemovedItem(this.updateLinesWithoutRedraw),this._gridDataManager.detachIdChange(this.idChangedHandler));this._gridDataManager=null},n.prototype.reconfigure=function(n){this._processEffortData(n)},n.prototype.updateLines=function(n){var v,y,d,k;var e=this._getWorkItemIdsForForecasting(),p=this._iterations.length,h=l.empty;p===0?h=r.Forecast_NoSprints:e.length===0&&(h=r.Forecast_NoBacklog);for(var w=this._sprintVelocity,t=0,b=0,i=0,u=0,c=-1,a=0,o=0,f={};t<p&&i<e.length;){if(o===0)for(o+=1,v=e[i],f[v]={name:this._iterations[t].name,isLastWorkItemInSprint:!1};(v=this._gridDataManager.getParentIdFromWorkItemId(v))!==0;)f[v]={name:this._iterations[t].name};if(!this._workItemEffort.hasOwnProperty(e[i])){i+=1;o+=1;continue}if(b=this._workItemEffort[e[i]]||0,b+a<=w)a+=b,u=e[i],i+=1,o+=1;else{if(u!==0&&o>0){for(y=this._gridDataManager.getLastLeafWorkItemId(u);y!==0;)f[y]={name:this._iterations[t].name,isLastWorkItemInSprint:!0},y=this._gridDataManager.getParentIdFromWorkItemId(y);c=u}u=0;w=w-a+this._sprintVelocity;t+=1;a=0;o=0}}h||i!==0||(h=r.Forecast_ItemTooBig);t<p&&a<=w&&u&&(d=this._gridDataManager.getLastLeafWorkItemId(u),f[d]={name:this._iterations[t].name},c=u,t+=1);k=c>0?this._gridDataManager.getLastLeafWorkItemId(c):c;f.hasOwnProperty(String(k))&&t>=p&&(f[k].isLastWorkItemInPlanning=!0);this._linesLookup=f;this._raiseLinesUpdated({redraw:n,errorMessage:h})},n.prototype.scheduleDelayedUpdateLines=function(t){var i=this;this._updateLinesDelayedFunction?this._updateLinesDelayedFunction.reset():(this._updateLinesDelayedFunction=new c.DelayedFunction(this,n.SCHEDULEUPDATELINES_DELAYTIME_MS,"updateLinesDelayedFunction",function(){i.updateLines(t)}),this._updateLinesDelayedFunction.start())},n.prototype.setSprintVelocity=function(n){var t=this._sprintVelocity;n>0&&(this._sprintVelocity=Math.floor(n),this._sprintVelocity!==t&&this.updateLines(!0))},n.prototype.getSprintVelocity=function(){return this._sprintVelocity},n.prototype.setEnabled=function(n){this._enabled=n;this._raiseEnabledUpdated()},n.prototype.getEnabled=function(){return this._enabled},n.prototype.getEffortFieldName=function(){return this._effortFieldName},n.prototype.getSprintLineInfo=function(n){return this._linesLookup[n]},n.prototype.getSprintLineLookup=function(){return this._linesLookup},n.prototype.getForecastingIterations=function(){return this._iterations},n.prototype.attachLinesUpdated=function(t){this._events.subscribe(n.EVENT_LINES_UPDATED,t)},n.prototype.detachLinesUpdated=function(t){this._events.unsubscribe(n.EVENT_LINES_UPDATED,t)},n.prototype.attachEnabledUpdated=function(t){this._events.subscribe(n.EVENT_ENABLED_UPDATED,t)},n.prototype.detachEnabledUpdated=function(t){this._events.unsubscribe(n.EVENT_ENABLED_UPDATED,t)},n.prototype.workItemEffortIsExcluded=function(n){return this._workItemEffort.hasOwnProperty(n)===!1},n.prototype._getWorkItemsForSprintLines=function(){var t=this,n=this._gridDataManager.getWorkItemIds()||[],i;return n.length>0&&(i={},$.each(n,function(n,r){if(t._workItemEffort.hasOwnProperty(r.toString(10))){r=r||0;i[r]=!0;var u=t._gridDataManager.getDescendantWorkItemIds(r);$.each(u,function(n,u){if(t._workItemEffort.hasOwnProperty(u)&&t._isWorkItemOfRequirementCategory(u))return i[r]=!1,!1})}}),n=n.filter(function(n){return i[n]})),n},n.prototype._beginUpdateWorkItemEffort=function(n,t,i){var o;var r=t||n.id,h=n.getFieldValue(f.CoreFieldRefNames.State),c=n.getFieldValue(f.CoreFieldRefNames.WorkItemType),e=u.BacklogConfigurationService.getBacklogConfiguration();o=e.getWorkItemStateCategory(c,h);o===u.WorkItemStateCategory.Proposed?this._workItemEffort[r]=w.getFieldValueByName(n,this._effortFieldName)||0:delete this._workItemEffort[r];i()},n.prototype._raiseLinesUpdated=function(t){this._enabled&&this._events.invokeHandlers(n.EVENT_LINES_UPDATED,this,t)},n.prototype._raiseEnabledUpdated=function(){this._events.invokeHandlers(n.EVENT_ENABLED_UPDATED,this,{enabled:this._enabled})},n.prototype._processEffortData=function(n){this._workItemEffort={};for(var t=0,i=n.ids.length;t<i;t++)this._workItemEffort[n.ids[t]]=n.efforts[t];this._effortFieldName=n.effortFieldName.toUpperCase()},n.prototype._getWorkItemIdsForForecasting=function(){var i=this._gridDataManager.getWorkItemIds(),t,r,e,u,o,n,c,f,s,h;if(i&&i.length>0){for(t={},r=0,e=i;r<e.length;r++)n=e[r],this._workItemEffort.hasOwnProperty(n)&&(t[n]=!0);for(u=0,o=i;u<o.length;u++)if(n=o[u],t.hasOwnProperty(n.toString(10)))for(n=n||0,c=this._gridDataManager.getDescendantWorkItemIds(n),f=0,s=c;f<s.length;f++)if(h=s[f],t.hasOwnProperty(h)&&this._isWorkItemOfRequirementCategory(h)){t[n]=!1;break}return i.filter(function(n){return!!t[n]})}return[]},n.EVENT_LINES_UPDATED="lines-updated",n.EVENT_ENABLED_UPDATED="enabled-updated",n.SCHEDULEUPDATELINES_DELAYTIME_MS=50,n}();t.SprintLineManager=b});

define("Agile/Scripts/Backlog/Forecasting/SprintLinesViewManager",["require","exports","Agile/Scripts/Backlog/ProductBacklogGrid","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","VSS/Controls","VSS/Controls/Grids","VSS/Controls/PopupContent","VSS/Diag","VSS/Utils/Core","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.SprintLinesViewManager=void 0;var c=s.delegate,l=function(){function n(n,t){var r=this;this._rowUpdatedHandler=function(n,t){var u,e,f,s,c,h;u=t.row;e=!1;r._sprintLineManager.getEnabled()&&(f=r._getGrid().getWorkItemIdAtDataIndex(t.dataIndex),f&&(s=r._sprintLineManager.getSprintLineInfo(f),c=r._isLastVisibleWorkItemInSprint(s,f,t.dataIndex),c&&(e=!0,h=!!s.isLastWorkItemInPlanning,u.toggleClass(i.ProductBacklogGrid.SINGLE_SPRINT_LINE_CLASS,!h),u.toggleClass(i.ProductBacklogGrid.DOUBLE_SPRINT_LINE_CLASS,h))));e||(u.hasClass(i.ProductBacklogGrid.DOUBLE_SPRINT_LINE_CLASS)&&u.removeClass(i.ProductBacklogGrid.DOUBLE_SPRINT_LINE_CLASS),u.hasClass(i.ProductBacklogGrid.SINGLE_SPRINT_LINE_CLASS)&&u.removeClass(i.ProductBacklogGrid.SINGLE_SPRINT_LINE_CLASS))};this._sprintLinesStateChangedHandler=function(n,t){var u=r._getGrid(),f=t.redraw===undefined?!0:t.redraw;u&&f&&(t.redraw&&$.each(r._sprintLineManager.getSprintLineLookup(),function(n){var t=r._grid._getWorkItemDataIndex(+n);t>=0&&r._grid._dataSource[t]!==undefined&&r._grid.ensureDataIndexExpanded(t)}),t.enabled!==undefined?(u.setColumnOptions(i.ProductBacklogGrid.FORECAST_FIELD_NAME,{hidden:!t.enabled}),u.layout()):u.redraw())};this._isLastVisibleWorkItemInSprint=function(n,t,i){var u=r._getGrid(),f=u.getDataManager().getDescendantCount(t),e=u._isExpanded(i);return n&&n.isLastWorkItemInSprint&&(f===0||!e)};this._sprintLineManager=t;this._$gridElement=n;n.bind(f.GridO.EVENT_ROW_UPDATED+".VSS.Agile",this._rowUpdatedHandler);t.attachLinesUpdated(this._sprintLinesStateChangedHandler);t.attachEnabledUpdated(this._sprintLinesStateChangedHandler)}return n.prototype.dispose=function(){this._sprintLineManager.detachLinesUpdated(this._sprintLinesStateChangedHandler);this._sprintLineManager.detachEnabledUpdated(this._sprintLinesStateChangedHandler);this._$gridElement&&(this._$gridElement.unbind(f.GridO.EVENT_ROW_UPDATED+".VSS.Agile",this._rowUpdatedHandler),this._$gridElement=null)},n.prototype.updateGridColumns=function(n,t){var f,l,u,e,s,a;for(f=n.getColumns(),l=t.effortData.effortFieldName,u=0,e=f;u<e.length;u++)if(s=e[u],h.ignoreCaseComparer(l,s.name)===0){s.getCellContents=c(this,this._getEffortCellContentsHandler);break}a=f.some(function(n){return h.ignoreCaseComparer(n.name,i.ProductBacklogGrid.FORECAST_FIELD_NAME)===0});a||n.insertColumn(0,{rowCss:"grid-header-text",canSortBy:!1,canMove:!1,fieldId:null,fixed:!1,hidden:!this._sprintLineManager.getEnabled(),name:i.ProductBacklogGrid.FORECAST_FIELD_NAME,text:r.Forecast_Column_Title,width:100,getCellContents:c(this,this._getForecastCellContentsHandler)})},n.prototype._getGrid=function(){return this._grid||(this._grid=u.Enhancement.getInstance(i.ProductBacklogGrid,this._$gridElement)),this._grid},n.prototype._getForecastCellContentsHandler=function(n,t,i,u,f,s,c){var l,p,y,a,w,v;return p=this._getGrid(),this._sprintLineManager.getEnabled()&&(y=p.getWorkItemIdAtDataIndex(t),y&&(a=this._sprintLineManager.getSprintLineInfo(y),a&&a.name&&(l=$("<div />"),w=this._isLastVisibleWorkItemInSprint(a,y,n.dataIndex),w?l.text(a.name).addClass("forecast-column-contents").attr("aria-label",h.format(r.ForecastingSprintEndsWithLabel,a.name)):l.attr("aria-label",h.format(r.ForecastingSprintStartsWithLabel,a.name))))),v=p._drawCell(n,t,i,u,f,s,c),l?(v.text(""),l&&e.RichContentTooltip.addIfOverflow(l.text(),v),v.append(l)):v.html("&nbsp;"),v},n.prototype._getEffortCellContentsHandler=function(n,t,i,r,u,f,e){var h,s,c=this._getGrid();return s=c.getWorkItemIdAtDataIndex(t),h=c._drawCell(n,t,i,r,u,f,e),s!=null&&s!==0&&(c.getDataManager().getDescendantCount(s)||this._sprintLineManager.workItemEffortIsExcluded(s))&&h.addClass("backlog-excluded-effort"),h},n}();t.SprintLinesViewManager=l});

define("Agile/Scripts/Backlog/GridReorderBehavior",["require","exports","VSS/Diag","WorkItemTracking/Scripts/Utils/PermissionHandler"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.GridReorderBehavior=void 0;var u=function(){function n(n,t,i,r,u,f){this._grid=n;this._filter=t;this._enumerator=i;this._validator=r;this._selector=u;this._backlogLevelHelper=f}return n.prototype.calculateMoveWorkItemsEffect=function(n,t,u,f){var h=this,o,e,s;return r.hasAgileToolsBacklogManagementPermission()?(t=f&&this._grid._getWorkItemDataIndex(t)===0?0:t,o=this._filter.filter(n),e=this._enumerator.getLocations(t,o),u&&(e=e.concat(this._enumerator.getLocationsForExplicitReparent(t,o))),!e||e.length===0)?null:(this._grid.pageLocations(e,function(){}),e=e.filter(function(n){return h._validator.isValid(o,n)}),!e||e.length===0)?null:(s=this._selector.select(o,e),{workItemIds:o,targetLocation:s,isValid:!0}):null},n.prototype.shouldExpandRow=function(n,t){var r=this._backlogLevelHelper.getLevel(n),u=this._backlogLevelHelper.getLevel(t);return r>u},n}();t.GridReorderBehavior=u});

define("Agile/Scripts/Common/ContributableTabsUtils",["require","exports","q","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Diag","VSS/Events/Services","VSS/Service","VSS/Utils/Url","VSS/Controls/Navigation","VSS/Controls","Agile/Scripts/Common/Agile","Agile/Scripts/Common/Controls","VSS/Contributions/Services","VSS/Contributions/Controls","VSS/LoaderPlugins/Css!Agile"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){var y,p,w;Object.defineProperty(t,"__esModule",{value:!0});t.ContributableTabHelper=t.PivotViewHelper=void 0;y=r.TfsContext.getDefault();p=function(){function n(){}return n.enhanceIterationPivotView=function(n,t,i,r){var f=$("."+n);return h.Enhancement.enhance(s.PivotView,f,{generateContributionLink:function(n){var r=y.getActionUrl("iterationcontributions","backlogs",{parameters:t});return r=o.replaceUrlParam(r,"contributionId",n),r=o.replaceUrlParam(r,"_a","contribution"),o.replaceUrlParam(r,"spv",i)},getContributionContext:function(){return r}})},n.enhanceBacklogPivotView=function(t,i,r,e,a){var p,w;i=i||"";r=r||"";n._backlogOptions.level=i;n._backlogOptions.showParents=r;p=function(n,t,i){if(!t)return null;var r=y.getActionUrl("backlogscontributions","backlogs",{parameters:[]});return r=o.replaceUrlParam(r,"contributionId",n),r=o.replaceUrlParam(r,"_a","contribution"),i&&(r=o.replaceUrlParam(r,"showParents",""+i)),r=o.replaceUrlParam(r,"level",t),o.replaceUrlParam(r,"spv",e)};w=$("."+t);var v=h.Enhancement.enhance(s.PivotView,w,{generateContributionLink:function(t){var i=n._backlogOptions.level,r=n._backlogOptions.showParents;return p(t,i,r)},getEnabledState:function(){var t=n._backlogOptions.level;return!!t},getContributionContext:function(){return a}}),b={level:i,showParents:r==="true"},k=c.LinkHelpers.getAsyncBacklogLink(l.BacklogViewControlModel.backlogPageAction,b),d=c.LinkHelpers.generateBacklogLink(l.BacklogViewControlModel.boardPageAction);return v.setViewLink(l.BacklogViewControlModel.backlogPageAction,k),v.setViewLink(l.BacklogViewControlModel.boardPageAction,d),f.getService().attachEvent(l.ContributableTabConstants.EVENT_BACKLOG_VIEW_CHANGE,function(t,i){n._backlogOptions.level=i.level;n._backlogOptions.showParents=i.showParents;v.setContributionContext({level:i.level,workItemTypeNames:i.workItemTypeNames});v.refreshContributedItems().then(function(){v.getItems().forEach(function(n){if(n.contributed){var t=p(n.id,i.level,i.showParents);t?(v.setViewLink(n.id,t),v.setViewEnabled(n.id,!0)):(v.setViewLink(n.id,""),v.setViewEnabled(n.id,!1))}});v.updateItems()})}),v},n._backlogOptions={level:"",showParents:""},n}();t.PivotViewHelper=p;w=function(){function n(){}return n.displayContributedTab=function(n,t,r,o,c,y,p){var k=this,b=$("."+n),w;w=h.Enhancement.enhance(s.PivotView,b);w.refreshContributedItems().then(function(){w.setSelectedView(w.getView(c));var u=$("."+t),n=$("."+r);n&&n.length!==0?n.empty():(n=$("<div />").addClass(r),n.appendTo(u));p=$.extend(!0,{},p,{foregroundInstance:!0});v.createExtensionHost(n,c,p).then(function(n){e.getService(a.ExtensionService).getContribution(c).then(function(t){n.getRegisteredInstance(t.properties.registeredObjectId||t.id).then(function(n){var r=n.pageTitle||n.name||t.properties.name,u;u=typeof r=="function"?r(p):i.resolve(r);u.then(function(n){k._setPageTitle(o,n,n)})})})});n.show();w._bind("changed",function(){w.getSelectedView().link&&(document.location.href=w.getSelectedView().link);document.location.reload(!0)});f.getService().fire(l.ContributableTabConstants.EVENT_AGILE_CONTRIBUTED_TAB_SELECTED,{contributionId:c,selectedPivot:y})})},n._setPageTitle=function(n,t,i){var r=$("."+n);r.text(t);r.attr("title",i);document.title=t},n}();t.ContributableTabHelper=w});

define("Agile/Scripts/ProductBacklog/ProductBacklogContracts",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.BacklogQueryResultType=t.ProductBacklogConstants=void 0,function(n){n.BACKLOG_ACTION="backlog"}(i=t.ProductBacklogConstants||(t.ProductBacklogConstants={})),function(n){n[n.Default=0]="Default";n[n.OneHop=1]="OneHop";n[n.Flat=2]="Flat"}(r=t.BacklogQueryResultType||(t.BacklogQueryResultType={}))});

define("Agile/Scripts/ProductBacklog/ProductBacklogMembershipEvaluator",["require","exports","Agile/Scripts/Common/Agile","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Diag","VSS/Utils/Array","VSS/Utils/String","VSS/LoaderPlugins/Css!Agile"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.ProductBacklogMembershipEvaluator=void 0;var s=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype._isValid=function(n){var t=this._teamSettings.teamFieldName,i=n.getFieldValue(t);return this._isTeamFieldValid(i)&&this._isIterationValid(n)&&this._areTypeAndStateValid(n)},t.prototype._isIterationValid=function(t){var i=t.getFieldValue(u.CoreFieldRefNames.IterationPath);return n.prototype._isBacklogIterationPathValid.call(this,i)},t.prototype._areTypeAndStateValid=function(n){var s=i.BacklogContext.getInstance(),h=n.getFieldValue(u.CoreFieldRefNames.State),t=n.getFieldValue(u.CoreFieldRefNames.WorkItemType),f=null,c;if(s.backlogContainsWorkItemType(t)){f=r.BacklogConfigurationService.getBacklogConfiguration().getWorkItemStateCategory(t,h);switch(f){case r.WorkItemStateCategory.Proposed:return!0;case r.WorkItemStateCategory.Resolved:case r.WorkItemStateCategory.InProgress:return s.showInProgress;case r.WorkItemStateCategory.Completed:default:return!1}}else{if(c=r.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels().some(function(n){return e.contains(n.workItemTypes,t,o.ignoreCaseComparer)}),!c)return!1;f=r.BacklogConfigurationService.getBacklogConfiguration().getWorkItemStateCategory(t,h);switch(f){case r.WorkItemStateCategory.Proposed:case r.WorkItemStateCategory.Resolved:case r.WorkItemStateCategory.InProgress:case r.WorkItemStateCategory.Completed:return!0;default:return!1}}},t}(i.BaseBacklogMembershipEvaluator);t.ProductBacklogMembershipEvaluator=s});

define("Agile/Scripts/Common/NavigationUtils",["require","exports","VSS/Context","VSS/Service","VSS/Utils/Url","Presentation/Scripts/TFS/TFS.WebSettingsService"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.NavigationUtils=void 0;var e;(function(n){function e(){var t=i.getPageContext().webContext.project;if(t&&t.id){var n=i.getPageContext().navigation,e=n.currentController,o=n.currentAction,h=n.currentParameters?n.currentParameters:null,c=u.getQueryParameters(window.location.href),l=r.getService(f.WebSettingsService),a={controller:e,action:o,urlParameters:h,queryParameters:c};l.beginWriteSetting(s(t.id),JSON.stringify(a),f.WebSettingsScope.User,null)}}function o(n,i){var u=window.location.pathname,f=u.toLowerCase().indexOf(t),r;f!=-1&&(r=u.substring(0,f+t.length),n&&(r=r+"/"+n),i&&(r=r+"/"+i),window.history.replaceState(null,document.title,r))}function s(n){return"".concat("/Backlogs/Navigation/mruHub","/").concat(n)}n.boardPageAction="board";n.capacityPageAction="capacity";n.taskboardPageAction="taskboard";n.iterationPageAction="iteration";var t="_backlogs";n.rememberMruHub=e;n.rewriteBacklogsUrl=o})(e=t.NavigationUtils||(t.NavigationUtils={}))});

define("Agile/Scripts/ProductBacklog/ProductBacklogUrlHelpers",["require","exports","Agile/Scripts/Common/NavigationUtils","Agile/Scripts/ProductBacklog/ProductBacklogContracts","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/Diag","VSS/Navigation/Services","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.ProductBacklogUrlHelpers=void 0;var h=function(){function n(){}return n.getUrlContext=function(n){var t,i,r,s;if(n||(n=o.getHistoryService().getCurrentState()),t=null,n.level!=null?t=n.level:n.hub!=null&&(e.logTracePoint("ProductBacklogUrlHelpers.getUrlContext.hub",n.hub),t=n.hub),i=null,n.showParents!=null)try{i=f.BoolUtils.parse(n.showParents)}catch(h){e.logVerbose("Unable to parse specified showParents string value as boolean - '".concat(n.showParents,"'. Treating as unspecified (null)."))}else n.filter!=null&&(e.logTracePoint("ProductBacklogUrlHelpers.getUrlContext.filter",n.filter),r=u.BacklogConfigurationService.getBacklogConfiguration().getBacklogByDisplayName(t),s=u.BacklogConfigurationService.getBacklogConfiguration().getBacklogByDisplayName(n.filter),r&&s&&(i=r.rank<s.rank));return{action:n.action,level:t,showParents:i}},n.ensureUrlContext=function(n){this._isUrlValid(n)||this._rewriteUrl(n);i.NavigationUtils.rememberMruHub()},n._isUrlValid=function(n){var t=o.getHistoryService().getCurrentState(),f=t.action===r.ProductBacklogConstants.BACKLOG_ACTION,e=t.level&&s.localeIgnoreCaseComparer(t.level,n.level.name)===0,i=!0;return i=u.BacklogConfigurationService.getBacklogConfiguration().isRootLevelBacklog(n.level.id)?t.showParents==null:t.showParents&&t.showParents===(n.includeParents||"").toString(),f&&e&&i},n._rewriteUrl=function(n){var i=o.getHistoryService(),t=$.extend({level:null,showParents:null},i.getCurrentState());t.hub!==undefined&&delete t.hub;t.filter!==undefined&&delete t.filter;t.level=n.level.name;u.BacklogConfigurationService.getBacklogConfiguration().isRootLevelBacklog(n.level.id)?t.showParents!==undefined&&delete t.showParents:t.showParents=n.includeParents.toString();i.replaceHistoryPoint(r.ProductBacklogConstants.BACKLOG_ACTION,t,null,!0)},n}();t.ProductBacklogUrlHelpers=h});

define("Agile/Scripts/ProductBacklog/VelocityInputControl",["require","exports","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/FeatureRef/FormatUtils","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Controls","VSS/Controls/Combos","VSS/Controls/Validation","VSS/Diag","VSS/Utils/Core","VSS/Utils/Number","VSS/Utils/UI","VSS/VSS","Agile/Scripts/Generated/HubConstants","VSS/LoaderPlugins/Css!Agile"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){Object.defineProperty(t,"__esModule",{value:!0});t.VelocityInputControl=void 0;var y=h.delegate,w=u.ContextUtils,b=r.FormatUtils,p=function(){function n(n,t,i,r){if(this._$container=n,this._teamId=t,this._sprintLineManager=i,r!==0&&!r){var u=$("script.sprint-forecast-velocity");r=Number(h.parseMSJSON(u.eq(0).html(),!1));u.empty()}this._initialize(r)}return n.prototype.getElement=function(){return this._$container},n.prototype.dispose=function(){this._$container&&(this._$container.empty(),this._$container=null);this._$inputContainer&&(this._$inputContainer.empty(),this._$inputContainer=null);this._$noComboDiv&&(this._$noComboDiv.empty(),this._$noComboDiv=null)},n.prototype._initialize=function(t){this._currentValidValue=t;this._sprintLineManager.setSprintVelocity(t);var u=$("<table/>").addClass(n.CSS_FORECASTING_INPUT_CONTROL_TABLE),r=$("<tr/>");r.append(this._createLabelCell());r.append(this._createInputCell(t));u.append(r);r=$("<tr/>").addClass(n.CSS_FORECASTING_INPUT_CONTROL_DISABLED_MESSAGE_ROW).append($("<td>").text(i.Forecast_MessageDisabledWhileFiltering));u.append(r);this._$container.append(u)},n.prototype._createLabelCell=function(){return $("<td/>").append($("<label>"+i.Forecast_VelocityLabel+"<\/label>").attr("for",n.COMBO_CONTROL_ID+"_txt").addClass(n.CSS_FORECASTING_INPUT_LABEL).attr("id","forecast-input-label-id"))},n.prototype._createInputCell=function(n){return $("<td />").append(this._createInputControl(n))},n.prototype._createInputControl=function(t){var r=this,i,u;return i=!1,u=y(this,function(){i||(i=!0,r._showCombo(),i=!1)}),this._$inputContainer=$("<div/>"),this._$noComboDiv=$("<div/>").text(b.formatNumberForDisplay(t,n.DECIMAL_PRECISION)).addClass(n.CSS_FORECASTING_INPUT_CONTROL).addClass(n.CSS_FORECASTING_INPUT_CONTROL_TEXT).attr("role","edit").attr("aria-labeledby","forecast-input-label-id").attr("tabindex","0").focusin(u).click(u),this._$container.bind("mouseover",function(){r._$noComboDiv.addClass(n.CSS_FORECASTING_INPUT_CONTROL_TEXT_HOVER)}).bind("mouseout",function(){r._$noComboDiv.removeClass(n.CSS_FORECASTING_INPUT_CONTROL_TEXT_HOVER)}),this._$inputContainer.append(this._$noComboDiv),this._$inputContainer},n.prototype._createComboControl=function(){var t,i;this._comboControl=f.BaseControl.createIn(e.Combo,$("<div/>"),{id:n.COMBO_CONTROL_ID,mode:"text",cssClass:n.CSS_FORECASTING_INPUT_CONTROL});i=this._comboControl.getElement();t=$("input",i);t.addClass("validate integerRange");this._validator=f.Enhancement.enhance(o.IntegerRangeValidator,t,{minValue:1,maxValue:99999});this._comboControl.setText(this._currentValidValue?this._currentValidValue.toString():null);i.bind("keydown",y(this,this._onInputKeyDown))},n.prototype._showCombo=function(){var n;this._comboVisible||(this._comboControl||this._createComboControl(),n=this._comboControl.getElement(),this._$noComboDiv.detach(),this._$inputContainer.append(n),$("input",n).focus(),n.bind("focusout",this._getProcessRemovalDelegate()),this._comboVisible=!0)},n.prototype._removeCombo=function(){var n=this._comboControl.getElement();n.unbind("focusout",this._getProcessRemovalDelegate());n.detach();this._$inputContainer.append(this._$noComboDiv);this._comboVisible=!1},n.prototype._onInputKeyDown=function(n){n.keyCode===l.KeyCode.ENTER||n.keyCode===l.KeyCode.TAB?this._processComboRemoval():n.keyCode===l.KeyCode.ESCAPE?(this._revertVelocity(),this._removeCombo()):h.delay(this,0,function(){this._validator.validate()})},n.prototype._processComboRemoval=function(){s.logTracePoint("VelocityInputControl._processComboRemoval.start");this._validator.isValid()?this._saveVelocity():this._revertVelocity();h.delay(this,0,function(){this._removeCombo()});s.logTracePoint("VelocityInputControl._processComboRemoval.complete")},n.prototype._getProcessRemovalDelegate=function(){return $.isFunction(this._processComboRemovalDelegate)||(this._processComboRemovalDelegate=y(this,this._processComboRemoval)),this._processComboRemovalDelegate},n.prototype._saveVelocity=function(){var n=c.parseLocale(this._comboControl.getText());w.saveTeamUserNumberSetting(this._teamId,v.BacklogConstants.SprintForecastVelocity,n);this._setDisplayVelocity(n);this._sprintLineManager.setSprintVelocity(n);this._currentValidValue=n},n.prototype._revertVelocity=function(){this._setDisplayVelocity(this._currentValidValue);this._validator.validate()},n.prototype._setDisplayVelocity=function(n){this._$noComboDiv.text(n);this._comboControl.setText(n.toString())},n.CSS_FORECASTING_INPUT_CONTROL_TABLE="forecasting-input-control-table",n.CSS_FORECASTING_INPUT_CONTROL_DISABLED_MESSAGE_ROW="forecasting-input-control-disabled-message-row",n.CSS_FORECASTING_INPUT_LABEL="forecasting-input-label",n.CSS_FORECASTING_INPUT_CONTROL="forecasting-input-control",n.CSS_FORECASTING_INPUT_CONTROL_TEXT="forecasting-input-control-text",n.CSS_FORECASTING_INPUT_CONTROL_TEXT_HOVER="forecasting-input-control-text-hover",n.COMBO_CONTROL_ID="velocityInput",n.DECIMAL_PRECISION=2,n}();t.VelocityInputControl=p;a.initClassPrototype(p,{_$container:null,_comboControl:null,_$inputContainer:null,_$noComboDiv:null,_currentValidValue:null,_validator:null,_sprintLineManager:null,_processComboRemovalDelegate:null,_comboVisible:!1})});

define("Presentation/Scripts/TFS/TFS.Host.UI.Actions",["require","exports"],function(){var n;return function(n){n.ACTION_MANAGE_TEAM_MEMBERS="manage-team-members";n.ACTION_REQUEST_FEEDBACK="request-feedback";n.ACTION_CREATE_WORKITEMS="create-work-items";n.ACTION_NEW_ROOM="create-new-room";n.ACTION_NEW_PROJECT="create-new-project";n.ACTION_SET_MRU_PAGE="set-mru-page";n.ACTION_UNPIN_TILE="unpin-homepage-tile"}(n||(n={})),n});

define("VSS/Contributions/RestClient",["require","exports","VSS/Contributions/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function tt(n){return window.VSS&&window.VSS.VssSDKRestVersion&&g[window.VSS.VssSDKRestVersion]?r.getClient(g[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(c,undefined,undefined,undefined,n)}var o,s,e,f,h,c,l,a,v,y,p,w,b,k,d,nt,g;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.ContributionsHttpClient=t.ContributionsHttpClient2=t.ContributionsHttpClient2_1=t.ContributionsHttpClient2_2=t.ContributionsHttpClient2_3=t.ContributionsHttpClient3=t.ContributionsHttpClient3_1=t.ContributionsHttpClient3_2=t.ContributionsHttpClient4=t.ContributionsHttpClient4_1=t.ContributionsHttpClient5=t.ContributionsHttpClient5_1=t.CommonMethods3_1To5_1=t.CommonMethods2_2To5_1=t.CommonMethods2_1To5_1=t.CommonMethods2To5_1=void 0;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getInstalledExtensions=function(n,t,r){var u={contributionIds:n&&n.join(";"),includeDisabledApps:t,assetTypes:r&&r.join(":")};return this._beginRequest({httpMethod:"GET",area:"Contribution",locationId:"2648442b-fd63-4b9a-902f-0c913510f139",resource:"InstalledApps",routeTemplate:"_apis/{area}/{resource}/{extensionId}",responseType:i.TypeInfo.InstalledExtension,responseIsCollection:!0,queryParams:u,apiVersion:this.installedAppsApiVersion})},t}(u.VssHttpClient);t.CommonMethods2To5_1=o;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getInstalledExtensionByName=function(n,t,r){var u={assetTypes:r&&r.join(":")};return this._beginRequest({httpMethod:"GET",area:"Contribution",locationId:"3e2f6668-0798-4dcb-b592-bfe2fa57fde2",resource:"InstalledApps",routeTemplate:"_apis/{area}/{resource}/{publisherName}/{extensionName}",responseType:i.TypeInfo.InstalledExtension,routeValues:{publisherName:n,extensionName:t},queryParams:u,apiVersion:this.installedAppsApiVersion_3e2f6668})},t}(o);t.CommonMethods2_1To5_1=s;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.queryDataProviders=function(n,t,i){return this._beginRequest({httpMethod:"POST",area:"Contribution",locationId:"738368db-35ee-4b85-9f94-77ed34af2b0d",resource:"dataProvidersQuery",routeTemplate:"_apis/{area}/dataProviders/query/{scopeName}/{scopeValue}",routeValues:{scopeName:t,scopeValue:i},apiVersion:this.dataProvidersQueryApiVersion,data:n})},t}(s);t.CommonMethods2_2To5_1=e;f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.queryContributionNodes=function(n){return this._beginRequest({httpMethod:"POST",area:"Contribution",locationId:"db7f2146-2309-4cee-b39c-c767777a1c55",resource:"ContributionNodeQuery",routeTemplate:"_apis/{area}/nodes/query",requestType:i.TypeInfo.ContributionNodeQuery,apiVersion:this.contributionNodeQueryApiVersion,data:n})},t}(e);t.CommonMethods3_1To5_1=f;h=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.contributionNodeQueryApiVersion=r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="5.1-preview.1",r}return __extends(t,n),t}(f);t.ContributionsHttpClient5_1=h;c=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.contributionNodeQueryApiVersion=r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="5.0-preview.1",r}return __extends(t,n),t}(f);t.ContributionsHttpClient5=c;l=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.contributionNodeQueryApiVersion=r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="4.1-preview.1",r}return __extends(t,n),t}(f);t.ContributionsHttpClient4_1=l;a=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.contributionNodeQueryApiVersion=r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="4.0-preview.1",r}return __extends(t,n),t}(f);t.ContributionsHttpClient4=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.contributionNodeQueryApiVersion=r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="3.2-preview.1",r}return __extends(t,n),t}(f);t.ContributionsHttpClient3_2=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.contributionNodeQueryApiVersion=r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="3.1-preview.1",r}return __extends(t,n),t}(f);t.ContributionsHttpClient3_1=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="3.0-preview.1",r}return __extends(t,n),t}(e);t.ContributionsHttpClient3=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="2.3-preview.1",r}return __extends(t,n),t}(e);t.ContributionsHttpClient2_3=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.dataProvidersQueryApiVersion=r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="2.2-preview.1",r}return __extends(t,n),t}(e);t.ContributionsHttpClient2_2=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.installedAppsApiVersion=r.installedAppsApiVersion_3e2f6668="2.1-preview.1",r}return __extends(t,n),t}(s);t.ContributionsHttpClient2_1=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.installedAppsApiVersion="2.0-preview.1",r}return __extends(t,n),t}(o);t.ContributionsHttpClient2=d;nt=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(h);t.ContributionsHttpClient=nt;g={"5.1":h,"5.0":c,"4.1":l,"4.0":a,"3.2":v,"3.1":y,"3.0":p,"2.3":w,"2.2":b,"2.1":k,"2.0":d};t.getClient=tt});

define("TfsCommon/Scripts/Team/Services",["require","exports","VSS/Diag","VSS/Service","VSS/Utils/String","VSS/VSS","VSS/Error","VSS/Contributions/LocalPageData","VSS/Contributions/RestClient"],function(n,t,i,r,u,f,e,o,s){var h,c;Object.defineProperty(t,"__esModule",{value:!0});t.PageTeamService=t.TeamPermissionService=void 0;h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._teamPermissions={},t}return __extends(t,n),t.prototype.beginGetTeamPermissions=function(n,t){var c=this,h={currentUserHasTeamAdminPermission:!1,currentUserHasTeamPermission:!1},r;if(!n||!t)return i.Debug.fail("BeginGetTeamPermissions: Cannot fetch teamPermissions without projectId and teamId"),Promise.resolve(h);if(r=this._getCacheKey(n,t),this._teamPermissions[r])return Promise.resolve(this._teamPermissions[r]);var l="ms.vss-tfs.team-permissions-data-provider",v={context:{properties:{pageSource:{project:{id:n},team:{id:t}}}},contributionIds:[l]},a=o.getDataProviderScope(),y=a.name,p=a.value?n:null,w=this.getConnection().getHttpClient(s.ContributionsHttpClient);return w.queryDataProviders(v,y,p).then(function(n){if(n.exceptions)return h;var t=n.data[l]||{},i=Boolean(t&&t.permissions&&t.permissions.CurrentUserHasTeamAdminPermission),u=Boolean(t&&t.permissions&&t.permissions.CurrentUserHasTeamPermission);return c._teamPermissions[r]={currentUserHasTeamPermission:u,currentUserHasTeamAdminPermission:i},c._teamPermissions[r]},function(n){return n.name=u.format("{0}.QueryDataProvidersError",n.name||""),n.message="queryDataProviders() failed in TeamPermissionService.beginGetTeamPermissions: "+f.getErrorMessage(n),e.publishErrorToTelemetry(n),h})},t.prototype._getCacheKey=function(n,t){return"".concat(n.toLowerCase(),"/").concat(t.toLowerCase())},t}(r.VssService);t.TeamPermissionService=h;c=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getPageTeam=function(){},t}(r.VssService);t.PageTeamService=c});

define("Agile/Scripts/ProductBacklog/ProductBacklog",["require","exports","q","Agile/Scripts/Backlog/Backlog","Agile/Scripts/Backlog/BacklogsPanelPivotFilterManager","Agile/Scripts/Backlog/Constants","Agile/Scripts/Backlog/Forecasting/SprintLineManager","Agile/Scripts/Backlog/Forecasting/SprintLinesViewManager","Agile/Scripts/Backlog/GridReorderBehavior","Agile/Scripts/Backlog/ProductBacklogContextMenu","Agile/Scripts/Backlog/ProductBacklogGrid","Agile/Scripts/Backlog/ProductBacklogMru","Agile/Scripts/Common/Agile","Agile/Scripts/Common/ContributableTabsUtils","Agile/Scripts/Common/Controls","Agile/Scripts/Common/CustomerIntelligence","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants","Agile/Scripts/Common/HubTelemetryHelper","Agile/Scripts/Common/Utils","Agile/Scripts/Common/WorkItemChanges","Agile/Scripts/Generated/HubConstants","Agile/Scripts/ProductBacklog/ProductBacklogContracts","Agile/Scripts/ProductBacklog/ProductBacklogMembershipEvaluator","Agile/Scripts/ProductBacklog/ProductBacklogUrlHelpers","Agile/Scripts/ProductBacklog/VelocityInputControl","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Agile/Scripts/Resources/TFS.Resources.Agile","Agile/Scripts/Sources/AgileDataSource","OfficeFabric/MessageBar","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Configurations.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.Host.UI.Actions","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.UI.Controls.Common","Presentation/Scripts/TFS/TFS.WebSettingsService","TfsCommon/Scripts/Team/Services","VSS/Controls","VSS/Controls/Navigation","VSS/Controls/Notifications","VSS/Controls/PopupContent","VSS/Controls/StatusIndicator","VSS/Diag","VSS/Events/Action","VSS/Navigation/Services","VSS/Performance","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Telemetry/Services","VSS/Utils/Accessibility","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/String","VSS/VSS","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/RecycleBinConstants","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Utils/PermissionHandler","VSS/LoaderPlugins/Css!Agile"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki){var nr;Object.defineProperty(t,"__esModule",{value:!0});t.ProductBacklogMappingHandlerMultipleItems=t.ProductBacklog=void 0;var di=at.TfsContext.getDefault(),tr=k.WorkItemUtils,gi=function(n){function t(t){var i=__construct(this,n,[t]),r,u,f,e;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._sprintLinesInitialized=!1,i._mappingPaneReparentHandler=function(n,t){i._getMappingPaneHandler().handle(n,t)},i._backlogViewChangeHandler=function(n,t){i._initialPopulationComplete&&i._filterManager.isFiltering()&&i._filterManager.clearFilters();i.refreshProductBacklog(n);t(n)},i._backlogNavigateHandler=function(n){var t=n.level;ui.getHistoryService().addHistoryPoint(null,{level:t})},i._setMruPageHandler=function(n,t){var i=document.location.pathname+(document.location.hash||document.location.search);t($.extend({rawPath:i},n))},i._onLaunchCommonConfiguration=function(n,t){oi.getService(bt.TeamPermissionService).beginGetTeamPermissions(di.navigation.projectId,i._backlogContext.team.id).then(function(r){vi.using(["Presentation/Scripts/TFS/TFS.Configurations","Agile/Scripts/Card/CardCustomizationStyle","Agile/Scripts/Settings/CommonSettingsConfiguration"],function(u,f,e){var s=y.CommonSettingsConfigurationControl.createPerfScenario(a.AgileCustomerIntelligenceConstants.PRODUCT_BACKLOG_VIEW,!i._commonConfigurationRegistered),o;i._commonConfigurationRegistered||(u.TabControlsRegistration.clearRegistrations(a.TabControlsRegistrationConstants.COMMON_CONFIG_SETTING_INSTANCE_ID),o={team:i._backlogContext.team,boardIdentity:i._backlogContext.level.name,requireRefreshOnSave:!1,isEditable:r.currentUserHasTeamAdminPermission},e.CommonSettingsConfigurationUtils.registerBacklogSettingsForBacklogLevel(i._backlogContext.team.id,o,r),i._commonConfigurationRegistered=!0);n=$.extend({perfScenario:s,okText:ft.SaveAndCloseButtonName},n);t(n)})})},i._onGridMoveItems=function(n,t){i._handleMoveWorkItems(t.workItemIds,t.workItemIdsToReparent,t.targetLocation,t.performReorder).then(function(){t.perfScenario&&t.perfScenario.end()});t.performReorder&&i.postActionCleanup()},i._updateAddPanelDisabledState=function(){i.addPanel&&i.addPanelVisible&&(i.isBacklogFiltered()?i.addPanel.disable(ut.AddPanel_TitleDisabledWhileFiltering):i.addPanel.enable())},i.onSprintLineManagerLinesUpdated=function(n,t){t.errorMessage&&i.getMessageArea().setError(t.errorMessage)},fi.getScenarioManager().split("ProductBacklog.Initialize"),i._registerEvents(),u=yt.ProjectCollection.getDefaultConnection().getService(bi.WorkItemStore),u.beginGetProject(at.TfsContext.getDefault().navigation.projectId,function(n){i.isDisposed||n.nodesCacheManager.beginGetNodes()}),i._initialPopulationComplete=!1,t.isNewHub||(f=ui.getHistoryService(),e=function(n,t){var f,u,r;t.action===nt.ProductBacklogConstants.BACKLOG_ACTION?(i._productBacklogPerf&&i._productBacklogPerf.addSplitTiming("ProductBacklog.GetPayload"),f=function(){if(pt.DismissableMessageAreaControl.isDismissedOnClient(a.NotificationGuids.LimitedPortfolioAccess,wt.WebSettingsScope.User)||(i._backlogContext.isPortfolioInContext()?$(".tfs-basic-user-limited-portfolio-access-notification").addClass("visible").show():$(".tfs-basic-user-limited-portfolio-access-notification").removeClass("visible").hide()),pt.DismissableMessageAreaControl.isDismissedOnClient(a.NotificationGuids.NewBacklogLevelVisibilityNotSet,wt.WebSettingsScope.User))$(".tfs-new-backlog-level-visibility-not-set-notification").removeClass("visible").hide();else{var n=function(n){ri.getService().performAction(lt.Actions.LAUNCH_COMMON_CONFIGURATION,{defaultTabId:a.TabControlsRegistrationConstants.BACKLOGS_TAB_ID});n.preventDefault()};$(".tfs-new-backlog-level-visibility-not-set-notification").addClass("visible").show().find("a").click(function(t){n(t)}).keypress(function(t){t.which===$.ui.keyCode.ENTER&&n(t)})}},u=it.ProductBacklogUrlHelpers.getUrlContext(t),i._originalLevelRequest=u.level,r=u.showParents,r==null?r=l.ShowParents.getMRUState():l.ShowParents.setMRUState(r),i._beginGetBacklogPayload(i._originalLevelRequest,r,f)):i._setDefaultBacklogActionHistoryPoint(t)},f.attachNavigate(e,!0)),i}return __extends(t,n),t.createReparentToast=function(n,t){var i=$("<div>"),r=$("<div>").appendTo(i);return typeof t=="number"?r.text(ai.format(ut.ProductBacklog_Reparent_Toast_Multiple,t,n)):r.text(ai.format(ut.ProductBacklog_Reparent_Toast_1,t,n)),i},t.computeDataIndexForRow=function(n,t){return n&&t?-t:t},t._addCustomRows=function(n){var i=a.BacklogContext.getInstance(),t=null;return $.each(st.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels(),function(n,r){if(r.name===i.level.name)return t=n+1,!1}),c.GridGroupRowBase.workitemIDMap={},$.each(n.targetIds,function(i,u){var f,e;u<0&&(f=new r.OrphanGroup(u+t,u,n),c.GridGroupRowBase.workitemIDMap[u]=f,e={},e[ct.CoreFieldRefNames.Id]=u.toString(),$.extend(n,f.buildHierarchy([],e)))}),n},t.prototype.getMoveToPositionHelper=function(){var n=this.getGrid(),t=this.getItemHierarchy();return new h.MoveToPositionHelper(n,t,h.ContextMenuContributionUtils.createSelectionFilter(n,t))},t.prototype._setDefaultBacklogActionHistoryPoint=function(n){var t=ui.getHistoryService();t.replaceHistoryPoint(nt.ProductBacklogConstants.BACKLOG_ACTION,n)},t.prototype.hasData=function(){return this._backlogPayload!=null},t.prototype.reparentFromMappingPane=function(n,t){var i={workItemIds:n,newParentId:t};this._getMappingPaneHandler().handle(i)},t.prototype.hasUncommitedChanges=function(){return this._reorderManager&&this._reorderManager.numberOfUncommittedChanges()>0},t.prototype._registerEvents=function(){var n=ri.getService();n.registerActionWorker(a.Actions.MAPPING_PANE_REPARENT,this._mappingPaneReparentHandler);n.registerActionWorker(y.BacklogViewControl.EVENT_BACKLOG_VIEW_CHANGE,this._backlogViewChangeHandler,10);this._options.isNewHub||n.registerActionWorker(vt.ACTION_SET_MRU_PAGE,this._setMruPageHandler,10);n.registerActionWorker(a.Actions.BACKLOG_NAVIGATE,this._backlogNavigateHandler)},t.prototype._unregisterEvents=function(){var n=ri.getService();n.unregisterActionWorker(a.Actions.MAPPING_PANE_REPARENT,this._mappingPaneReparentHandler);n.unregisterActionWorker(y.BacklogViewControl.EVENT_BACKLOG_VIEW_CHANGE,this._backlogViewChangeHandler);n.unregisterActionWorker(a.Actions.BACKLOG_NAVIGATE,this._backlogNavigateHandler);this._options.isNewHub||n.unregisterActionWorker(vt.ACTION_SET_MRU_PAGE,this._setMruPageHandler)},t.prototype._createMembershipEvaluator=function(){return new tt.ProductBacklogMembershipEvaluator(this._backlogContext.team.id)},t.prototype._getContextMenuCreator=function(){var n=this;return this._backlogContextMenuCreator||(this._backlogContextMenuCreator=new h.ProductBacklogContextMenuCreator(this._grid,function(){return n._backlogContext.team},this.getItemHierarchy(),this._gridOptions.behaviors,this._getMessageSuppressor())),this._backlogContextMenuCreator},t.prototype._beginGetBacklogPayload=function(n,t,i){var r=this,u,f;this._isRefreshing=!0;this._showLoadingOverlay();this._initialPopulationComplete&&(this._productBacklogPerf=fi.getScenarioManager().startScenario(p.AgileCustomerIntelligenceArea.AGILE,"ProductBacklog.Refresh"));u=function(n){r._productBacklogPerf&&r._productBacklogPerf.addSplitTiming("ProductBacklog.GetPayloadComplete");r._onGetBacklogPayloadComplete(n,i)};f=li.parseJsonIsland($(document),".backlog-payload",!0);f?u(f):a.BacklogHelpers.beginGetBacklogPayload(this._backlogContext.team.id,n,t,u,function(n){return r._onGetBacklogPayloadError(n)})},t.prototype._beginGetEffortData=function(n){var t,i;return i=(t={},t[g.BacklogsHubConstants.WorkItemIds]=n,t.teamId=this._backlogContext.team.id,t),et.getDataAsync("ms.vss-work-web.backlogs-hub-content-effort-data-data-provider",i)},t.prototype._onGetBacklogPayloadComplete=function(n,t){this._backlogPayload=n;this._isRefreshing=!1;ri.getService().performAction(y.BacklogViewControl.EVENT_BACKLOG_VIEW_CHANGE,n);this._eventHelper.fire(y.ContributableTabConstants.EVENT_BACKLOG_VIEW_CHANGE,this,{level:n.backlogContext.levelName,showParents:n.backlogContext.includeParents,workItemTypeNames:n.backlogContextWorkItemTypeNames});this._clearLoadingOverlay();this._originalLevelRequest&&ai.localeIgnoreCaseComparer(this._originalLevelRequest,this._backlogContext.level.name)&&this.getMessageArea().setMessage(ut.ProductBacklog_LevelRedirectToDefaultLevel,gt.MessageAreaType.Info);$.isFunction(t)&&t();$(this._grid).trigger("backlogPayloadFetched")},t.prototype._onGetBacklogPayloadError=function(n){this._isRefreshing=!1;this.getMessageArea().setMessage(vi.getErrorMessage(n));this._clearLoadingOverlay()},t.prototype._getIsRefreshing=function(){return this._isRefreshing},t.prototype._showLoadingOverlay=function(){this._$loadingOverlay||(this._$loadingOverlay=$("<div>").addClass("control-busy-overlay backlog-loading-overlay"));this._statusIndicator||(this._statusIndicator=kt.BaseControl.createIn(ti.StatusIndicator,this._$loadingOverlay,{center:!0,imageClass:"big-status-progress",message:ei.Loading,throttleMinTime:0}));this._statusIndicator.delayStart(t.LOADING_OVERLAY_DELAY);this._$loadingOverlay.appendTo(dt.TriSplitNavigationView.getInstance().getRightPane());this._$loadingOverlay.toggleClass("agile-important-hidden",!1);this.addPanel&&this.addPanel.disable()},t.prototype._clearLoadingOverlay=function(){this.addPanel&&this.addPanel.enable();this._$loadingOverlay.toggleClass("agile-important-hidden",!0);this._$loadingOverlay.detach();this._statusIndicator.complete()},t.prototype.initialize=function(i){n.prototype.initialize.call(this);this._attachReorderRequestComplete();this.createMessageArea();this._options.isNewHub||(this.initializeAddPanel(),this._refreshToolbarCommandStates());this._bindFilters();this._setupMembershipEvaluation();var r=i&&i.queryResults&&i.queryResults.productBacklogGridOptions&&i.queryResults.productBacklogGridOptions.enableForecast,u=i&&i.forecastSettings&&i.forecastSettings.visibleState===t.FILTER_CONSTANT_ON,f=i&&i.forecastSettings&&!!i.forecastSettings.effortData;r&&(u||f)&&this._initializeSprintLines()},t.prototype.dispose=function(){if(this._dataManagerCreated&&n.prototype.getGridDataManager.call(this).detachMoveItems(this._onGridMoveItems),this._velocityChartControl&&this._velocityChartControl.detachEvents(),this._velocityInputControl&&(this._velocityInputControl.dispose(),this._velocityInputControl=null),this._sprintLineManager&&(this._sprintLineManager.detachLinesUpdated(this.onSprintLineManagerLinesUpdated),this._sprintLineManager.dispose(),this._sprintLineManager=null),this._sprintLinesViewManager&&(this._sprintLinesViewManager.dispose(),this._sprintLinesViewManager=null),this._unregisterEvents(),this._dataManagerCreated){var t=n.prototype.getGridDataManager.call(this);t.detachMoveItems(this._onGridMoveItems)}this._backlogContextMenuCreator=null;this._mappingPaneHandler=null;this._backlogsPanelPivotFilterManager=null;this._backlogPayload=null;n.prototype.dispose.call(this)},t.prototype.createGrid=function(i){var r=this.getGridOptions(),u;return i&&$.extend(r,i.queryResults),this._addChildBehavior=this._getAddChildTaskGridBehavior(r),r.behaviors=[this._addChildBehavior],r.requiredColumnsReferenceNames=this.getRequiredColumns(),r.reorderManager=this._reorderManager,r.datasourceName=t.DATASOURCE_NAME,u=n.prototype.createGrid.call(this,r),this.createGridReorderBehavior(),ii.logTracePoint("ProductBacklog.createGrid.complete"),u},t.prototype.createGridReorderBehavior=function(){this._grid.setGridReorderBehavior(this._createGridReorderBehavior())},t.prototype.getRequiredColumns=function(){return[ct.CoreFieldRefNames.Id,ct.CoreFieldRefNames.WorkItemType,this._teamSettings.teamFieldName,ct.CoreFieldRefNames.State]},t.prototype._createGridReorderBehavior=function(){var n=this.getItemHierarchy(),t=this._backlogContext.includeParents?st.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels()[0]:this._backlogContext.level;return new s.GridReorderBehavior(this._grid,this.getSelectionFilter(),new d.LocationEnumerator(n),new d.LocationValidator(t,n),new d.LocationSelector(n),this._getBacklogLevelHelper())},t.prototype._setPageTitle=function(n){var t=$("#backlog-page-title-header");t.text(n);ni.RichContentTooltip.addIfOverflow(n,t);document.title=n},t.prototype._createVelocityChart=function(n,t){this._$velocityChartDiv=$("<div>").addClass("velocity-chart small-chart-container").prependTo(n);var i=__assign(__assign({},t),{teamId:this._backlogContext.team.id});this._velocityChartControl=kt.Enhancement.enhance(y.VelocityChartControl,this._$velocityChartDiv,i)},t.prototype._configureCharts=function(n,t){var i=$(".small-chart-group-container"),r,u;this._initialPopulationComplete?(r=$(".cumulative-flow-chart",i),this._$velocityChartDiv&&(this._$velocityChartDiv.detach(),this._velocityChartControl.detachEvents()),r.detach(),n&&this._isRequirementBacklog&&(this._velocityChartControl?(this._$velocityChartDiv.appendTo(i),this._velocityChartControl.attachEvents()):this._createVelocityChart(i,n),this._velocityChartControl.setIterationsNumber(n.iterationsNumber),this._velocityChartControl.refresh()),r.appendTo(i),this._cfdChartControl.setBacklogLevelId(t.backlogLevelId),u=!t.hideIncoming,this._cfdChartControl.setShowIncoming(u),this._cfdChartControl.refresh()):(i.empty(),n&&this._isRequirementBacklog&&this._createVelocityChart(i,n),r=$("<div>").addClass("cumulative-flow-chart small-chart-container").appendTo(i),this._cfdChartControl=kt.Enhancement.enhance(y.CumulativeFlowChartControl,r,t))},t.prototype._configurePivotViews=function(){var n;this._backlogPivotView||(n=$(".productbacklog-view-tabs"),n.toggleClass("agile-important-hidden",!1),this._backlogPivotView=v.PivotViewHelper.enhanceBacklogPivotView("productbacklog-view-tabs",this._backlogContext.level.name,this._backlogContext.includeParents.toString(),y.BacklogViewControlModel.backlogPivot,{level:this._backlogContext.level.name,workItemTypes:this._backlogContext.level.workItemTypes}));var t={level:this._backlogContext.level.name,showParents:this._backlogContext.includeParents},i=a.LinkHelpers.getAsyncBacklogLink(y.BacklogViewControlModel.backlogPageAction,t),r=a.LinkHelpers.generateBacklogLink(y.BacklogViewControlModel.boardPageAction);this._backlogPivotView.setViewLink(y.BacklogViewControlModel.backlogPageAction,i);this._backlogPivotView.setViewLink(y.BacklogViewControlModel.boardPageAction,r)},t.prototype._configureBacklogsPanelPivotFilters=function(n){var t=this,i;this._backlogsPanelPivotFilterManager?this._backlogsPanelPivotFilterManager.refreshPivotFilters(n.isRootBacklog,this._mappingPaneOptions):(i=function(){return t._grid.getSelectedWorkItemIds().map(function(n){return{workItemId:n,workItemType:t._grid.getWorkItemTypeNameById(n)}})},this._backlogsPanelPivotFilterManager=new u.ProductBacklogsPanelPivotFilterManager(n.isRootBacklog,this._mappingPaneOptions,i,this._eventHelper))},t.prototype._configurePivotFilters=function(n){var r=$(t.SHOW_FORECAST_FILTER_CLASS),u,e,f,o,i;r.length>0&&(n.forecastSettings?(this._showForecastFilter||(this._showForecastFilter=kt.Enhancement.enhance(dt.PivotFilter,r)),this._showForecastFilter.setSelectedItem(n.forecastSettings.visibleState||t.FILTER_CONSTANT_OFF),r.removeClass("agile-important-hidden")):r.addClass("agile-important-hidden"));u=$(t.SHOW_INPROGRESS_FILTER_CLASS);u.length>0&&(this._showInProgressFilter||(this._showInProgressFilter=kt.Enhancement.enhance(dt.PivotFilter,u)),e=ai.format(ut.Tooltip_Backlog_InProgress,this._backlogContext.level.name,n.inProgressStates),i=this._showInProgressFilter.getItems(),$.each(i,function(n,t){t.title=e}),this._showInProgressFilter.updateItems(i),this._showInProgressFilter.setSelectedItem(n.backlogContext.showInProgress?t.FILTER_CONSTANT_ON:t.FILTER_CONSTANT_OFF),u.removeClass("agile-important-hidden"));f=$(t.SHOW_PARENTS_FILTER_CLASS);n.isRootBacklog?f.addClass("agile-important-hidden"):(this._showParentsFilter||(this._showParentsFilter=kt.Enhancement.enhance(dt.PivotFilter,f)),this._showParentsFilter.setSelectedItem(n.backlogContext.includeParents?t.FILTER_CONSTANT_ON:t.FILTER_CONSTANT_OFF,!1),o=ai.format(ut.Tooltip_Backlog_Parents,this._backlogContext.level.name,this._backlogContext.team.name),i=this._showParentsFilter.getItems(),$.each(i,function(n,t){t.title=o}),this._showParentsFilter.updateItems(i),f.removeClass("agile-important-hidden"))},t.prototype._configureAgilePortfolioManagementNotification=function(n){var t=n.agilePortfolioManagementNotificationSettings,i=$(".agile-portfolio-management-notification");t?(this._agilePortfolioManagementNotification?this._agilePortfolioManagementNotification.reconfigure(t):this._agilePortfolioManagementNotification=kt.Enhancement.enhance(pt.DismissableMessageAreaControl,i,t),i.toggleClass("agile-important-hidden",!1),this._registerMessageAreaClearing()):i.toggleClass("agile-important-hidden",!0)},t.prototype._configureToolbar=function(){this._toolbar?this._refreshToolbarItems():$(".hub-pivot-toolbar").toggleClass("agile-important-hidden",!1)},t.prototype._configureLeftHandSideViewControls=function(){var i=this,n,t;this._backlogViewControl||this._sprintViewControl?(t=this.getSprintViewOptions().droppable,this._backlogViewControl.setDroppable(t),this._sprintViewControl.setDroppable(t)):(n={isRefreshingDelegate:li.delegate(this,this._getIsRefreshing),isWorkQueuedDelegate:function(){return i._reorderManager.numberOfUncommittedChanges()},getMessageAreaDelegate:li.delegate(this,this.getMessageArea)},$.extend(n,this.getSprintViewOptions()),this.setBacklogViewControl(kt.Enhancement.enhance(y.BacklogViewControl,".team-backlog-view",n)),this.setSprintViewControl(kt.Enhancement.enhance(y.SprintViewControl,".team-iteration-view",n)));this._backlogViewControl.reconfigure("backlog","backlog");this._sprintViewControl.reconfigure()},t.prototype._updateForecastData=function(n){if(!n.queryResults.productBacklogGridOptions.enableForecast||!n.forecastSettings||!n.forecastSettings.effortData){this._sprintLineManager&&(this._sprintLineManager.setEnabled(!1),this._sprintLineManager.updateLines(!0));return}this._sprintLinesInitialized||this._initializeSprintLines();var t=n.forecastSettings;t&&t.effortData&&(this._sprintLineManager.reconfigure(t.effortData),this._sprintLineManager.updateLines(!0))},t.prototype.refreshProductBacklog=function(n){var r=a.BacklogContext.getInstance(),l=r.level&&r.level.name!==n.backlogContext.levelName,i,u,o,f,e,s,h;r.setBacklogContextData(n.backlogContext);this._backlogContext=r;a.BacklogSettings.setBacklogContextWorkItemTypeNames(n.backlogContextWorkItemTypeNames);this._isRequirementBacklog=r.isRequirement;this._options.isNewHub||(it.ProductBacklogUrlHelpers.ensureUrlContext(r),this._configureLeftHandSideViewControls(n),this.addPanelSettings=n.addPanelSettings,this.readAddPanelVisibleSetting(),this._mappingPaneOptions=n.mappingPanel,this._setPageTitle(n.pageTitle),this._configurePivotViews(),this._configurePivotFilters(n),this._configureCharts(n.velocityChartSettings,n.cumulativeFlowDiagramSettings),this._configureAgilePortfolioManagementNotification(n),this._configureToolbar());i=n.queryResults;u=i.productBacklogGridOptions;c.ProductBacklogGrid.updatePayloadColumns(u.showOrderColumn,i.columns,n.columnPreferences);$.extend(n.queryResults,t._addCustomRows(n.queryResults));this._initialPopulationComplete?(l?(this._grid.clearPreservedExpandStates(),this._grid.clearPreservedSelectedWorkItemIds(),this._detachCommonConfigurationRegistration()):(this._grid.preserveExpandStates(),this._grid.preserveSelectedWorkItemIds()),this.createQuickExpandCollapseBehavior(),this.getMessageArea().clear(),this._updateGridOptions(n),this._grid.setReorderState(u.enableReorder),this._grid.setReparentState(u.enableReparent),this._createBacklogLevelHelper(),this._createAddPanelBehavior(),this.createGridReorderBehavior(),o=this.getGridOptions(),o.behaviors&&$.each(o.behaviors,function(n,t){t.onPrepareColumns(i.columns,u)}),this._gridDataManager.setTreeData({sourceIds:i.sourceIds.slice(0),targetIds:i.targetIds.slice(0),linkIds:i.linkIds.slice(0),ownedIds:i.ownedIds?i.ownedIds.slice(0):null}),this._updateForecastData(n),this._grid.updateDataModel(i),this._refreshAddPanel(n.addPanelSettings)):(this._options.isNewHub&&(this._backlogPayload=n),this.createGrid(n),this._initializeFilter(),this.initialize(n));this._options.isNewHub||this._configureBacklogsPanelPivotFilters(n);i.backlogQueryResultType===nt.BacklogQueryResultType.Flat?(f=di.getActionUrl("","work",{area:"admin",team:this._backlogContext.team.name,_a:"areas"}),e=ai.format("<a href='{0}' target='_blank' rel='noopener noreferrer'>{1}<\/a>",f,ut.ReduceAreaOfOwnershipLinkText),this.getMessageArea().setMessage($("<span>").html(ai.format(ut.TooManyItemsOnBacklog,e)),gt.MessageAreaType.Info)):i.backlogQueryResultType===nt.BacklogQueryResultType.OneHop&&(f=di.getActionUrl("","work",{area:"admin",team:this._backlogContext.team.name,_a:"areas"}),e=ai.format("<a href='{0}' target='_blank' rel='noopener noreferrer'>{1}<\/a>",f,ut.ReduceAreaOfOwnershipLinkText),this.getMessageArea().setMessage($("<span>").html(ai.format(ut.TooManyItemsOnBacklog_ShowingOneHop,e)),gt.MessageAreaType.Info));s=n&&n.forecastSettings&&n.forecastSettings.visibleState===t.FILTER_CONSTANT_ON;this.toggleShowForecast(s&&t.FILTER_CONSTANT_ON||t.FILTER_CONSTANT_OFF);ki.hasAgileToolsBacklogManagementPermission()?this._grid.enableDragDrop():this._grid.disableDragDrop();this._grid.restorePreservedSelectedWorkItemIds();this._focusBacklogGrid();this._missingProposedStateForBugsWarning();h={pivot:r.level.name,numberOfWorkItems:this.getGridDataManager().getTreeData().targetIds.length};this._productBacklogPerf&&(this._productBacklogPerf.addData(h),this._productBacklogPerf.end(),this._productBacklogPerf=null);this._initialPopulationComplete=!0},t.prototype._updateGridOptions=function(n){$.extend(this._gridOptions,n.queryResults);$.extend(this._grid._options,n.queryResults)},t.prototype._detachCommonConfigurationRegistration=function(){ri.getService().unregisterActionWorker(lt.Actions.LAUNCH_COMMON_CONFIGURATION,this._onLaunchCommonConfiguration);this._commonConfigurationRegistered=!1},t.prototype._attachCommonConfigurationRegistration=function(){ri.getService().registerActionWorker(lt.Actions.LAUNCH_COMMON_CONFIGURATION,this._onLaunchCommonConfiguration)},t.prototype.setBacklogViewControl=function(n){this._backlogViewControl=n},t.prototype.setSprintViewControl=function(n){this._sprintViewControl=n},t.prototype._refreshAddPanel=function(n){this.addPanel?(this.addPanel.reconfigure(n),this.addPanel.render(),this.addPanel.enable(),this.addPanelVisible?this.addPanel.show(this._grid.getTotalRows()!==0):this.addPanel.hide()):this.initializeAddPanel()},t.prototype._getAddChildTaskGridBehavior=function(){var n=this,t=function(t){if(!n._grid||!n._grid.isFiltered())return!n._backlogPayload||!n._backlogPayload.queryResults||n._backlogPayload.queryResults.backlogQueryResultType===nt.BacklogQueryResultType.Flat?void 0:k.BacklogLevelUtils.getDescendentBacklogLevelConfigurationForWorkItemType(t)};return new r.AddChildTaskGridBehavior(t,function(){return n._backlogContext.team.id},this._eventHelper,this._getParentOptionFields(this._backlogContext.team.id),function(t){return n.getMessageArea().setError(ai.format(ut.Add_WorkItems_Error,t.message))},function(t,i){return n._initializeNewWorkItem(t,i)})},t.prototype._initializeNewWorkItem=function(n,t){var u=this._gridDataManager.isOwnedItem(t),r,i;u||(n.getField(this._teamSettings.teamFieldName).setValue(this._teamSettings.teamFieldDefaultValue),n.getField(ct.CoreField.IterationPath).setValue(this._teamSettings.backlogIteration.friendlyPath));r=st.BacklogConfigurationService.getBacklogFieldName(st.BacklogFieldTypes.Order);i=n.getField(r);i&&i.setValue("")},t.prototype.getGridDataManager=function(){var t=n.prototype.getGridDataManager.call(this);return this._dataManagerCreated||(this._dataManagerCreated=!0,t.attachMoveItems(this._onGridMoveItems)),t},t.prototype._saveColumns=function(n,t){var i=this._backlogContext.level.name,r,u;this._publishParentColumnTelemetry(n,function(){var n;return b.BacklogsHubTelemetryHelper.publishTelemetry(w.BacklogsHubTelemetryConstants.PARENT_COLUMN_ADDED,(n={},n[w.BacklogsHubTelemetryConstants.BacklogLevel]=i,n))},function(){var n;return b.BacklogsHubTelemetryHelper.publishTelemetry(w.BacklogsHubTelemetryConstants.PARENT_COLUMN_REMOVED,(n={},n[w.BacklogsHubTelemetryConstants.BacklogLevel]=i,n))});r=this.getGridOptions().productBacklogGridOptions.columnOptionsKey;u=this._serializeGridColumns(n);this._saveColumnSettings(u,ai.format(g.BacklogsHubConstants.ColumnOptionsFormat,r),t)},t.prototype._saveDialogResultsColumns=function(t,i){n.prototype._matchesCurrentColumns.call(this,t)||(this._saveColumns(t,i),k.TelemetryUtils.recordBoardFieldsUsageChange(p.AgileCustomerIntelligenceFeature.TELEMETRY_PRODUCTBACKLOG_COLUMNSCHANGE,t))},t.prototype._refreshDisplay=function(){var n=this;li.delay(this,0,function(){var t=a.BacklogContext.getInstance();n._beginGetBacklogPayload(t.level.name,t.includeParents)})},t.prototype._getUpdatedToolbarCommandStates=function(){return[{id:r.Backlog.CMD_TOGGLE_ADD_PANEL,toggled:this.addPanelVisible},{id:r.Backlog.CMD_TOGGLE_FILTER,toggled:this._filterManager&&this._filterManager.isActive()},{id:r.Backlog.CMD_EXPAND_ALL,disabled:this.isBacklogFiltered()},{id:r.Backlog.CMD_COLLAPSE_ALL,disabled:this.isBacklogFiltered()},{id:r.Backlog.CMD_EXPAND_ONE_LEVEL,disabled:this.isBacklogFiltered()},{id:r.Backlog.CMD_COLLAPSE_ONE_LEVEL,disabled:this.isBacklogFiltered()}]},t.prototype._onFilterChanged=function(){n.prototype._onFilterChanged.call(this);this._refreshShowForecast();this._saveAndDisableBacklogComponents()},t.prototype._getBacklogQueryName=function(){return a.BacklogQueryManager.getProductBacklogQueryName(this._backlogContext,this._teamSettings.teamName)},t.prototype.changeComponentStates=function(n,i){n.forecast&&this.toggleShowForecast(n.forecast);n.reorder&&this._grid.setReorderState(n.reorder);i?$(t.SHOW_FORECAST_FILTER_CLASS).show():$(t.SHOW_FORECAST_FILTER_CLASS).hide()},t.prototype._serializeGridColumns=function(n){return n=$.map(n,function(n){switch(n.name){case c.ProductBacklogGrid.FORECAST_FIELD_NAME:case c.ProductBacklogGrid.ORDER_FIELD_NAME:case c.ProductBacklogGrid.NEW_WORKITEM_FIELD_NAME:case f.BacklogBehaviorConstants.BACKLOG_BUTTONS_COLUMN_NAME:return null;default:return n}}),li.stringifyMSJSON(n)},t.prototype._refreshToolbarItems=function(){this._toolbar.updateItems(this._buildToolbarItems())},t.prototype._bindFilters=function(){var n=this,i=function(n,t){si.publishEvent(new si.TelemetryEventData(p.AgileCustomerIntelligenceArea.AGILE,n,{Setting:t}))},r,u;$(t.SHOW_FORECAST_FILTER_CLASS).bind("changed",function(t,r){var u=r.value;yt.ContextUtils.saveTeamUserStringSetting(n._backlogContext.team.id,g.BacklogConstants.ShowForecastFilter,u);n.toggleShowForecast(u);i(p.AgileCustomerIntelligenceFeature.TELEMETRY_BACKLOGS_TOOLBAR_FORECASTING,u)});r=$(t.SHOW_INPROGRESS_FILTER_CLASS);r.length>0&&r.bind("changed",function(t,r){n._inProgressFilterChanged(t,r);i(p.AgileCustomerIntelligenceFeature.TELEMETRY_BACKLOGS_TOOLBAR_INPROGRESS,r.value)});u=$(t.SHOW_PARENTS_FILTER_CLASS);u.length>0&&u.bind("changed",function(t,r){n._setShowParents(r.value);i(p.AgileCustomerIntelligenceFeature.TELEMETRY_BACKLOGS_TOOLBAR_SHOWPARENTS,r.value)})},t.prototype._inProgressFilterChanged=function(n,i){if(this._reorderManager.numberOfUncommittedChanges()>0){var r=this._showInProgressFilter.getSelectedItem();r.value===t.FILTER_CONSTANT_ON?this._showInProgressFilter.setSelectedItem(t.FILTER_CONSTANT_OFF):this._showInProgressFilter.setSelectedItem(t.FILTER_CONSTANT_ON);this.getMessageArea().setMessage(ut.ProductBacklog_Error_UnsavedChanges);si.publishEvent(si.TelemetryEventData.fromProperty(p.AgileCustomerIntelligenceArea.AGILE,p.AgileCustomerIntelligenceFeature.PRODUCTBACKLOG,p.PROPERTYNAME_SWITCH,"InProgressFilterWithUnsavedWork"));return}this._showLoadingOverlay();yt.ContextUtils.saveTeamUserStringSetting(this._backlogContext.team.id,this._getInProgressFilterRegKey(),i.value,li.delegate(this,this._refreshDisplay))},t.prototype._missingProposedStateForBugsWarning=function(){var u=this._isRequirementBacklog&&this._teamSettings.showBugCategoryWorkItem===!0&&!this._bugWorkItemsContainsProposedState(),i,r,n;this._options.isNewHub?(i="tfs-missing-proposed-state-mapping-for-bugs-notification",n=!a.BacklogContext.getInstance().showInProgress,u&&n?this._options.addMessage({id:i,message:ut.MissingProposedStateMapping,messageType:ot.MessageBarType.info,closeable:!0,persistDismissal:!0}):this._options.removeMessage(i)):(r=this._showInProgressFilter.getSelectedItem(),n=r&&r.value===t.FILTER_CONSTANT_OFF,u&&!pt.DismissableMessageAreaControl.isDismissedOnClient(a.NotificationGuids.ProposedStateNotMappedForBugsWarning,wt.WebSettingsScope.User)&&n?$(".tfs-missing-proposed-state-mapping-for-bugs-notification").addClass("visible").show():$(".tfs-missing-proposed-state-mapping-for-bugs-notification").removeClass("visible").hide())},t.prototype._bugWorkItemsContainsProposedState=function(){return!1},t.prototype._getInProgressFilterRegKey=function(){return g.BacklogConstants.ShowInProgressFilter},t.prototype._initializeSprintLines=function(){var r=this,n,i;this._sprintLinesInitialized||(this._sprintLinesInitialized=!0,n=this._backlogPayload.forecastSettings,i=yt.ProjectCollection.getConnection(di).getService(ht.TeamAwarenessService),this._sprintLineManager=e.SprintLineManager.createSprintLineManager(this.getGridDataManager(),i.getTeamSettings(this._backlogContext.team.id),n.effortData,function(n){return r._isWorkItemIdInRequirementsBacklog(n)}),this._sprintLinesViewManager=new o.SprintLinesViewManager(this.getGridElement(),this._getSprintLinesManager()),kt.Enhancement.getInstance(dt.PivotFilter,$(t.SHOW_FORECAST_FILTER_CLASS)),this._sprintLineManager.attachLinesUpdated(this.onSprintLineManagerLinesUpdated),this._velocityInputControl=new rt.VelocityInputControl($(".forecasting-input-container"),this._backlogContext.team.id,this._sprintLineManager,n?n.velocity:null))},t.prototype._getSprintLinesManager=function(){return!this._sprintLineManager,this._sprintLineManager},t.prototype._getMappingPaneHandler=function(){return this._mappingPaneHandler||(this._mappingPaneHandler=new nr(this.getGridDataManager(),this._grid.getRowSavingManager(),this._grid,this,this.getSelectionFilter())),this._mappingPaneHandler},t.prototype.toggleShowParents=function(){var n=this._showParentsFilter.getSelectedItem().value,i=n===t.FILTER_CONSTANT_ON?t.FILTER_CONSTANT_OFF:t.FILTER_CONSTANT_ON;this._setShowParents(i)},t.prototype._setShowParents=function(n){var r,i;if(this._reorderManager.numberOfUncommittedChanges()>0){r=n===t.FILTER_CONSTANT_ON?t.FILTER_CONSTANT_OFF:t.FILTER_CONSTANT_ON;this._showParentsFilter.setSelectedItem(r,!1);this.getMessageArea().setMessage(ut.ProductBacklog_Error_UnsavedChanges);si.publishEvent(si.TelemetryEventData.fromProperty(p.AgileCustomerIntelligenceArea.AGILE,p.AgileCustomerIntelligenceFeature.PRODUCTBACKLOG,p.PROPERTYNAME_SWITCH,"ShowParentsFilterWithUnsavedWork"));return}this._showLoadingOverlay();i={level:this._backlogContext.level.name,showParents:n===t.FILTER_CONSTANT_ON};dt.FullScreenHelper.getFullScreen()&&(i=$.extend(i,dt.FullScreenHelper.getUrlData()));ui.getHistoryService().addHistoryPoint(nt.ProductBacklogConstants.BACKLOG_ACTION,i)},t.prototype.toggleShowForecast=function(n){var i=this,e,o,r,u,f;if(!this.getGridOptions().productBacklogGridOptions||!this.getGridOptions().productBacklogGridOptions.enableForecast||!this._backlogPayload.forecastSettings){this._velocityInputControl&&this._velocityInputControl.getElement().toggleClass("hidden",!0);return}if(this.getMessageArea().clear(),n===t.FILTER_CONSTANT_ON&&!this._backlogPayload.forecastSettings.effortData){e=this._getOwnedIdsOfRequirementLevel();o=this._beginGetEffortData(e).then(function(t){i._backlogPayload.forecastSettings.effortData=t;i._updateForecastData(i._backlogPayload);i.toggleShowForecast(n)}).catch(function(){i.getMessageArea().setMessage(ut.ProductBacklogLoading_ForecastError,gt.MessageAreaType.Error)});hi.ProgressAnnouncer.forPromise(o,{announceStartMessage:ut.ProductBacklogLoading_ForecastStart,announceEndMessage:ut.ProductBacklogLoading_ForecastEnd,announceErrorMessage:ut.ProductBacklogLoading_ForecastError});return}if(n!==t.FILTER_CONSTANT_OFF||this._sprintLinesInitialized){ii.logTracePoint("ProductBacklog.forecastToggleElement.start");r=this._velocityInputControl.getElement();u=this._getSprintLinesManager();this.postActionCleanup();switch(n){case t.FILTER_CONSTANT_ON:r.toggleClass("hidden",!1);this.isBacklogFiltered()?(r.toggleClass("disabled",!0),u.setEnabled(!1)):(this._sprintLinesViewManager.updateGridColumns(this.getGrid(),this._backlogPayload.forecastSettings),u.setEnabled(!0),r.toggleClass("disabled",!1),u.updateLines(!0));break;case t.FILTER_CONSTANT_OFF:u.setEnabled(!1);r.toggleClass("hidden",!0)}f=this.getGrid();f&&f.resize();ii.logTracePoint("ProductBacklog.forecastToggleElement.complete")}},t.prototype._getOwnedIdsOfRequirementLevel=function(){var n=this,t=this.getGridDataManager().getOwnedWorkItemIds(),i=this._getBacklogLevelHelper().getRequirementLevel();return t.filter(function(t){var r=n.getGrid().getWorkItemTypeNameById(t);return n._getBacklogLevelHelper().getLevel(r)===i})},t.prototype._refreshShowForecast=function(){var n=kt.Enhancement.getInstance(dt.PivotFilter,$(t.SHOW_FORECAST_FILTER_CLASS)),i=n&&n.getSelectedItem().value||t.FILTER_CONSTANT_OFF;this.toggleShowForecast(i)},t.prototype._getRecycleBinOptions=function(){var n=this;return{sourceAreaName:wi.RecycleBinTelemetryConstants.BACKLOG_SOURCE,dragDropScope:a.DragDropScopes.WorkItem,dataKey:c.ProductBacklogGrid.DATA_WORK_ITEM_IDS,notifyPageRefreshRequired:function(t){return t.some(function(t){return!n.getGridDataManager().isLeafNode(t)})}}},t.prototype._attachWorkItemChangeEvent=function(){var n=this;this._workItemChangeEventHandler=function(t,i){var r;(i===null||i===void 0?void 0:i.change)===yi.WorkItemChangeType.Saved&&((r=i.changedWorkItemLinks)===null||r===void 0?void 0:r.findIndex(function(t){return n._shouldUpdateFromLink(t)}))>=0&&n._refreshDisplay()};this.getWorkItemManager().attachWorkItemChanged(this._workItemChangeEventHandler)},t.prototype._saveAndDisableBacklogComponents=function(){this._componentsDisabled||(this.changeComponentStates({},!0),this._componentsDisabled=!0)},t.SHOW_FORECAST_FILTER_CLASS=".show-forecast-filter",t.FILTER_CONSTANT_OFF="off",t.FILTER_CONSTANT_ON="on",t.SHOW_INPROGRESS_FILTER_CLASS=".show-inprogress-filter",t.SHOW_PARENTS_FILTER_CLASS=".show-parents-filter",t.BACKLOG_SEARCH_BUTTON="text-filter-button",t.MAPPING_PANE_ON_EVENT="mapping-pane-on-event",t.ID_MENU_ITEM_SEARCH_FILTER="id-searchFilterMenuItem",t.VERIFY_MEMBERSHIP_EXPLICIT="verify-membership",t.LOADING_OVERLAY_DELAY=500,t.DATASOURCE_NAME="ProductBacklogGrid",t}(r.Backlog);t.ProductBacklog=gi;nr=function(){function n(n,t,i,r,u){this._dataManager=n;this._rowSavingManager=t;this._grid=i;this._productBacklog=r;this._selectionFilter=u}return n.prototype.handle=function(n,t){var i=this,u,f;if(this._beginReparentTime=Date.now(),t||(t=function(){}),u=n.workItemIds.filter(function(n){return r.OrphanGroup.getGroupRow(n)===null}),u=this._selectionFilter.filter(u),f=n.newParentId,u.every(function(n){return i._dataManager.getParentIdFromWorkItemId(n)===f})){t&&t();return}if(this._markRowsAsSaving(u),!this._getBacklogContext().includeParents&&!n.forceRefresh){this._reparentItemsAndComplete(u,f,t);return}if(this._dataManager.getWorkItemTreeIndex(f)>=0){this._reparentItemsAndComplete(u,f,t,function(){i._updateGridAfterReparenting(u,f)});return}this._beginGetParentHierarchy(f,function(n){for(var y,p,w,h,c,l,o,b,a=gi.findColumnIndex(n.payload.columns,ct.CoreFieldRefNames.WorkItemType),v=i._getRootItemLevel(),s=null,e=null,r=0;r<n.targetIds.length;++r)y=n.payload.rows[r][a],p=i._getLevelForType(y),v>p&&(s=0,e=r+1),o=n.targetIds[r],typeof i._dataManager.getWorkItemTreeIndex(o)!="undefined"&&(e=r+1);for(e===null&&(w=n.payload.rows[0][a],h=i._getLevelForType(w),h!==v&&i._getOrAddUnparentedRow(h),e=0),c=!1,l=s!==null?s:n.sourceIds[e],r=e;r<n.targetIds.length;++r)o=n.targetIds[r],b=i._dataManager.getMaxOrder()+1,i._dataManager.addWorkItem(o,b,null,l,!1),i._addWorkItemPageDataToGrid(o,n.pageColumns,n.payload.rows[r]),c=!0,l=o;i._reparentItemsAndComplete(u,f,t,function(){c&&i._updateGridAfterReparenting(u,f)})})},n.prototype._updateGridAfterReparenting=function(n,t){var r=this,i=ci.intersect(this._dataManager.getWorkItemIds(),n);i.length>0&&this._grid.performActionWithPreserveSelection(function(){return r._dataManager.reparentWorkItems(i,t,!0,!1)})},n.prototype._beginGetParentHierarchy=function(n,t){var i=this,r=this._buildParentHierarchyQuery(n);this._getWorkItemStore().beginGetProject(di.navigation.projectId,function(n){n.beginQuery(r,t,i._errorHandler,{runQuery:!0,includePayload:!0})},this._errorHandler)},n.prototype._reparentItemsAndComplete=function(n,t,i,r){var u=this;this._beginReparentWorkItems(n,t).then(function(f){$.isFunction(r)&&r();u._clearRowsSaving(f);u._showMappingToast(n,t);u._grid.loadParentWorkItemsInDataProvider(n,t);si.publishEvent(new si.TelemetryEventData(p.AgileCustomerIntelligenceArea.AGILE,n.length>1?p.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_MULTISELECT_MAPPINGPANEREPARENT:p.AgileCustomerIntelligenceFeature.CLIENTSIDEOPERATION_MAPPINGPANEREPARENT,{NewParentWorkItemType:u._grid.getWorkItemTypeNameById(t),NumberOfSelectedItems:n.length},u._beginReparentTime));u._beginReparentTime=null;$.isFunction(i)&&i()},this._errorHandler)},n.prototype._errorHandler=function(){ri.getService().performAction(a.Actions.BACKLOG_SHOW_ERROR_MESSAGE,{message:ut.ProductBacklog_MappingPane_Error})},n.prototype._showMappingToast=function(n,t){var f=pi.WorkItemManager.get(yt.ProjectCollection.getDefaultConnection().getService(bi.WorkItemStore)),u,i,e=function(){n.length===1&&u&&i?ri.getService().performAction(r.Backlog.BACKLOG_TOAST,{message:gi.createReparentToast(i,u)}):n.length>1&&i&&ri.getService().performAction(r.Backlog.BACKLOG_TOAST,{message:gi.createReparentToast(i,n.length)})};n&&n.length===1&&f.beginGetWorkItem(n[0],function(n){u=n.getFieldValue(ct.CoreFieldRefNames.Title);e()});f.beginGetWorkItem(t,function(n){i=n.getFieldValue(ct.CoreFieldRefNames.Title);e()})},n.prototype._beginReparentWorkItems=function(n,t){var u=this,r=i.defer(),f=pi.WorkItemManager.get(yt.ProjectCollection.getDefaultConnection().getService(bi.WorkItemStore)),e=function(t){u._productBacklog.getMessageArea().setError(t,function(){window.location.reload()});u._clearRowsSaving(n)};return f.beginGetWorkItems(n,function(n){for(var o,i=0,u=n;i<u.length;i++)o=u[i],tr.reparentWorkItem(o,t);f.store.beginSaveWorkItemsBatch(n,function(n){r.resolve(n.workItems.map(function(n){return n.id}))},function(n){e(ai.format(ut.StatusMessage_FatalError,n.message));r.reject(n)})},function(n){e(ai.format(ut.StatusMessage_FatalError,n.message));r.reject(n)}),r.promise},n.prototype._buildParentHierarchyQuery=function(n){var i=ci.unique(this._productBacklog.getRequiredColumns().concat(this._grid.getPageColumns())),t=[];return st.BacklogConfigurationService.getBacklogConfiguration().getAllBacklogLevels().forEach(function(n){t=t.concat(n.workItemTypes)}),ai.format("SELECT {0} FROM WorkItemLinks WHERE [System.Links.LinkType] = 'System.LinkTypes.Hierarchy-Forward' AND [Source].[System.WorkItemType] IN ({1}) AND [Target].[System.Id] = {2} MODE(Recursive, ReturnMatchingChildren)",$.map(i,function(n){return"["+n+"]"}).join(","),ci.unique(t,ai.localeIgnoreCaseComparer).map(function(n){return"'"+n+"'"}).join(","),n)},n.prototype._addWorkItemPageDataToGrid=function(n,t,i){this._grid.addWorkItemPageData(n,t,i)},n.prototype._getWorkItemStore=function(){var n=pi.WorkItemManager.get(yt.ProjectCollection.getDefaultConnection().getService(bi.WorkItemStore));return n.store},n.prototype._getOrAddUnparentedRow=function(n){return this._productBacklog.getOrAddUnparentedRow(n)},n.prototype._markRowsAsSaving=function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],this._rowSavingManager.markRowAsSaving(r)},n.prototype._clearRowsSaving=function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],this._rowSavingManager.clearRowSaving(r)},n.prototype._getBacklogContext=function(){return a.BacklogContext.getInstance()},n.prototype._getRootItemLevel=function(){var n=this._grid.getWorkItemTypeNameByIndex(0);return this._getLevelForType(n)},n.prototype._getLevelForType=function(n){var t=new d.BacklogLevelHelper;return t.getLevel(n)},n}();t.ProductBacklogMappingHandlerMultipleItems=nr;vi.initClassPrototype(gi,{_addPanel:null,_backlogSearchControl:null,_dataManagerCreated:!1,_sprintLineManager:null,_sprintLinesViewManager:null,_reorderOperationQueue:null})});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__createBinding=this&&this.__createBinding||(Object.create?function(n,t,i,r){r===undefined&&(r=i);Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[i]}})}:function(n,t,i,r){r===undefined&&(r=i);n[r]=t[i]}),__exportStar=this&&this.__exportStar||function(n,t){for(var i in n)i==="default"||Object.prototype.hasOwnProperty.call(t,i)||__createBinding(t,n,i)};define("Agile/Scripts/BacklogsHub/BacklogPivot/Components/ProductBacklogWrapper",["require","exports","Agile/Scripts/Common/Agile","Agile/Scripts/Common/Components/BacklogPivot/BacklogWrapperBase","Agile/Scripts/Common/Components/NewBacklogLevelsMessage","Agile/Scripts/ProductBacklog/ProductBacklog","OfficeFabric/MessageBar","OfficeFabric/Utilities","react","Agile/Scripts/Common/Components/BacklogPivot/BacklogWrapperBase","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/BacklogPivot/Components/ProductBacklogWrapper"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.ProductBacklogWrapper=void 0;__exportStar(h,t);var c=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._resolveContainerRef=function(n){t._container=n},t}return __extends(t,n),t.prototype.render=function(){return s.createElement("div",{className:o.css("productbacklog-wrapper",{"backlog-hidden":!this.props.visible}),ref:this._resolveContainerRef},s.createElement("div",{className:"grid-status-message"}),s.createElement("div",{className:"forecasting-input-container"}))},t.prototype.componentDidMount=function(){this._renderProductBacklog()},t.prototype.componentDidUpdate=function(n){this.props.backlogPayload===n.backlogPayload&&this.props.backlogContext===n.backlogContext&&this._backlog||this._renderProductBacklog()},t.prototype.componentWillUnmount=function(){var n=this.props.backlogFilterContext;this._backlog&&this._backlog.dispose();n.value&&n.value.filterManager&&n.value.filterManager.dispose();i.BacklogContext.resetInstance()},t.prototype.reparentFromMappingPane=function(n,t){this._backlog&&this._backlog.reparentFromMappingPane(n,t)},t.prototype.toggleForecasting=function(n){this._backlog&&(n?this._backlog.toggleShowForecast(f.ProductBacklog.FILTER_CONSTANT_ON):this._backlog.toggleShowForecast(f.ProductBacklog.FILTER_CONSTANT_OFF))},t.prototype.getProductBacklog=function(){return this._backlog},t.prototype.getProductBacklogContainer=function(){return this._container},t.prototype.getSelectedWorkItems=function(){return this._backlog?this._backlog.getSelectedBacklogGridItems():[]},t.prototype._renderProductBacklog=function(){var r=this.props,h=r.backlogContext,t=r.backlogPayload,o,n;(this._backlog&&this._backlog.dispose(),t)&&(o={$backlogElement:$(this._container),eventHelper:this.props.eventHelper,isNewHub:!0,gridOptions:t.queryResults,reorderManager:new i.ReorderManager(t.backlogContext.team.id),deferInitialization:!0,addMessage:this.props.addMessage,removeMessage:this.props.removeMessage,onColumnsChanged:this.props.onColumnOptionsChanged},i.BacklogContext.getInstance().setBacklogContextData(h),n=new f.ProductBacklog(o),this._backlog=n,n.refreshProductBacklog(t),this.props.forecastingOn?n.toggleShowForecast(f.ProductBacklog.FILTER_CONSTANT_ON):n.toggleShowForecast(f.ProductBacklog.FILTER_CONSTANT_OFF),this.props.newBacklogLevelsSignature&&this.props.addMessage({message:null,children:s.createElement(u.NewBacklogLevelsMessage,null),messageType:e.MessageBarType.info,id:this.props.newBacklogLevelsSignature,closeable:!0,persistDismissal:!0}),this._setupFilterContext(),this.resize())},t}(r.BacklogWrapperBase);t.ProductBacklogWrapper=c});

define("Agile/Scripts/BacklogsHub/BacklogPivot/Selectors/BacklogPivotSelector",["require","exports"],function(n,t){function i(n){return{paneId:n.paneId,backlogContext:n.backlogContextData,backlogEmpty:n.backlogEmpty,queryInfoEmpty:n.queryInfoEmpty,backlogPayload:n.backlogPayload,exceptionInfo:n.exceptionInfo,initialFilterState:n.initialFilterState,status:n.status,showAddItemCallout:n.addItemCalloutVisible,isFilterBarOpen:n.filterBarVisible,isFiltered:n.isFiltered,isRequirementsBacklog:n.isRequirementsBacklog,isRootBacklog:n.isRootBacklog,activeWorkItemTypes:n.activeWorkItemTypes,rightPanelContributions:n.rightPanelContributions,eventHelper:n.eventHelper,isInitialLoad:n.isInitialLoad}}Object.defineProperty(t,"__esModule",{value:!0});t.getState=void 0;t.getState=i});

define("Agile/Scripts/ScopedEventHelper",["require","exports","VSS/Events/Services","VSS/Diag"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.ScopedEventHelper=void 0;var u=function(){function n(n){this._eventSvc=null;this._scope=n;this._eventSvc=i.getService()}return n.prototype.attachEvent=function(n,t){r.Debug.assertIsNotNull(this._eventSvc,"EventService instance should have been initialized.");this._eventSvc&&this._eventSvc.attachEvent(n,t,this._scope)},n.prototype.fire=function(n,t,i){return r.Debug.assertIsNotNull(this._eventSvc,"EventService instance should have been initialized."),this._eventSvc?this._eventSvc.fire(n,t,i,this._scope):void 0},n.prototype.detachEvent=function(n,t){this._eventSvc&&this._eventSvc.detachEvent(n,t,this._scope)},n.prototype.dispose=function(){this._scope&&(this._eventSvc.disposeScope(this._scope),this._scope=null,this._eventSvc=null)},n.prototype.getScope=function(){return this._scope},n}();t.ScopedEventHelper=u});

define("Agile/Scripts/BacklogsHub/BacklogPivot/Store/BacklogPivotStore",["require","exports","Agile/Scripts/BacklogsHub/BacklogPivot/BacklogPivotContracts","Agile/Scripts/ScopedEventHelper","VSS/Flux/Store","VSS/Utils/Array","VSS/Utils/String"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogPivotStore=void 0;var o=function(n){function t(t){var u=__construct(this,n,[]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u._isFilteredChanged=function(n){var t=n!==u._isFiltered;t&&(u._isFiltered=n,u.emitChanged())},u._beginLoadBacklog=function(){u._resetLoadedData();u._isInitialBacklogLoad=!0;u.emitChanged()},u._beginReloadBacklog=function(){u._resetLoadedData();u._isInitialBacklogLoad=!1;u.emitChanged()},u._backlogDataAvailable=function(n){u._backlogData=n;u._exceptionInfo=n.exceptionInfo;u._status=4;u._initialFilterState=n.initialBacklogFilterJson?JSON.parse(n.initialBacklogFilterJson):{};u._isRequirementsBacklog=n.backlogPayload?n.backlogPayload.isRequirementBacklog:!1;u._isRootBacklog=n.backlogPayload?n.backlogPayload.isRootBacklog:!1;u._activeWorkItemTypes=n.activeWorkItemTypes?n.activeWorkItemTypes:[];u._validatePaneId();u._eventHelper=new r.ScopedEventHelper("ProductBacklog_".concat((new Date).getTime().toString()));u.emitChanged()},u._errorAvailable=function(n){u._backlogData=null;u._exceptionInfo=n;u._status=2;u.emitChanged()},u._handleRightPaneChanged=function(n){u._paneId=n;u.emitChanged()},u._handleAddItemCalloutToggled=function(n){u._addItemCalloutVisibility=n;u.emitChanged()},u._handleFilterBarToggled=function(n){u._filterBarVisibility=n;u.emitChanged()},u._handleBacklogItemAdded=function(){u._itemAdded=!0;u.emitChanged()},u._handleQueryInfoAdded=function(){u._queryInfoAdded=!0;u.emitChanged()},u._rightPanelContributionsLoaded=function(n){u._rightPanelContributions=n;u.emitChanged()},u._actions=t,u._itemAdded=!1,u._queryInfoAdded=!1,u._paneId=i.BacklogPaneIds.Off,u._registerActionHandlers(),u}return __extends(t,n),Object.defineProperty(t.prototype,"paneId",{get:function(){return this._paneId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backlogPayload",{get:function(){return this._backlogData?this._backlogData.backlogPayload:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exceptionInfo",{get:function(){return this._exceptionInfo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInitialLoad",{get:function(){return this._status===1&&this._isInitialBacklogLoad},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequirementsBacklog",{get:function(){return this._isRequirementsBacklog},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRootBacklog",{get:function(){return this._isRootBacklog},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backlogEmpty",{get:function(){var n=this._backlogQueryResults;return!this._itemAdded&&(!n||n.payload.rows.length===0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"queryInfoEmpty",{get:function(){return!this._queryInfoAdded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backlogContextData",{get:function(){return this._backlogData?this._backlogData.backlogContext:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialFilterState",{get:function(){return this._initialFilterState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addItemCalloutVisible",{get:function(){return this._addItemCalloutVisibility},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterBarVisible",{get:function(){return this._filterBarVisibility},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFiltered",{get:function(){return this._isFiltered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeWorkItemTypes",{get:function(){return this._activeWorkItemTypes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightPanelContributions",{get:function(){return this._rightPanelContributions},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventHelper",{get:function(){return this._eventHelper},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_backlogQueryResults",{get:function(){return this._backlogData&&this._backlogData.backlogPayload&&this._backlogData.backlogPayload.queryResults?this._backlogData.backlogPayload.queryResults:null},enumerable:!1,configurable:!0}),t.prototype._registerActionHandlers=function(){this._actions.rightPaneChanged.addListener(this._handleRightPaneChanged);this._actions.addItemCalloutToggled.addListener(this._handleAddItemCalloutToggled);this._actions.filterBarToggled.addListener(this._handleFilterBarToggled);this._actions.backlogItemAdded.addListener(this._handleBacklogItemAdded);this._actions.queryInfoAdded.addListener(this._handleQueryInfoAdded);this._actions.loadBacklogSucceeded.addListener(this._backlogDataAvailable);this._actions.loadBacklogFailed.addListener(this._errorAvailable);this._actions.beginLoadBacklog.addListener(this._beginLoadBacklog);this._actions.beginReloadBacklog.addListener(this._beginReloadBacklog);this._actions.isFiltered.addListener(this._isFilteredChanged);this._actions.loadRightPanelContributions.addListener(this._rightPanelContributionsLoaded)},t.prototype._resetLoadedData=function(){this._backlogData=null;this._initialFilterState=null;this._exceptionInfo=null;this._itemAdded=!1;this._queryInfoAdded=!1;this._status=1},t.prototype._validatePaneId=function(){var n=this;e.equals(this._paneId,i.BacklogPaneIds.Mapping,!0)||e.equals(this._paneId,i.BacklogPaneIds.Planning,!0)||f.first(this._rightPanelContributions,function(t){return e.equals(n._paneId,t.id)})||(this._paneId=i.BacklogPaneIds.Off)},t}(u.Store);t.BacklogPivotStore=o});

define("Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingActions",["require","exports","VSS/Flux/Diag","Agile/Scripts/Common/ActionsHub"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.MappingActions=void 0;var u="MAPPING_PANE",f=function(n){function t(){var t=__construct(this,n,[u]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.beginFetchTeams=t.createAction(),t.fetchTeamsSucceeded=t.createAction(),t.fetchTeamsFailed=t.createAction(),t.teamSelected=t.createAction(),t.teamSettingsLoaded=t.createAction(),t.beginFetchWorkItems=t.createAction(),t.fetchBacklogAndWorkItemIdsSucceeded=t.createAction(),t.fetchBacklogAndWorkItemIdsFailed=t.createAction(),t.beginPageWorkItems=t.createAction(),t.pageWorkItemsSucceeded=t.createAction(),t.pageWorkItemsFailed=t.createAction(),t.workItemUpdated=t.createAction(),t.workItemRemoved=t.createAction(),t}return __extends(t,n),__decorate([i.registerDiagActions],t)}(r.ActionsHub);t.MappingActions=f});

define("Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingDataProvider",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","TFS/Work/RestClient","VSS/Service","VSSPreview/Utilities/PromiseUtils","WorkItemTracking/Scripts/Utils/PageWorkItemHelper"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.MappingDataProvider=void 0;var o=function(){function n(){}return n.prototype.isBacklogVisible=function(n,t,i){var r=this._getWorkRestClient();return f.toNativePromise(r.getBacklog(this._getTeamContext(t,i),n).then(function(n){return!n.isHidden}))},n.prototype.pageWorkItems=function(n){if(n.length===0)return Promise.resolve([]);var t=[i.CoreFieldRefNames.TeamProject,i.CoreFieldRefNames.Title,i.CoreFieldRefNames.WorkItemType];return f.toNativePromise(e.PageWorkItemHelper.pageWorkItems(n,null,t))},n.prototype.fetchWorkItemsForBacklog=function(n,t,i){var r=this._getWorkRestClient();return f.toNativePromise(r.getBacklogLevelWorkItems(this._getTeamContext(n,t),i).then(function(n){return n&&n.workItems?n.workItems.map(function(n){return n.target.id}):[]}))},n.prototype._getTeamContext=function(n,t){return{team:t,teamId:t,project:n,projectId:n}},n.prototype._getWorkRestClient=function(){return u.getClient(r.WorkHttpClient,undefined,undefined,undefined,undefined)},n}();t.MappingDataProvider=o});

define("Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingActionsCreator",["require","exports","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants","Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingDataProvider","Agile/Scripts/Common/HubTelemetryHelper","Agile/Scripts/Generated/HubConstants","VSS/Context","VSS/Error","VSS/Performance","WorkItemTracking/Scripts/OM/WorkItemConstants","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","VSS/Service","Agile/Scripts/Sources/TeamSource"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){Object.defineProperty(t,"__esModule",{value:!0});t.MappingActionsCreator=void 0;var v=function(){function n(n,t,i){t===void 0&&(t=new r.MappingDataProvider);i===void 0&&(i=new a.TeamSource);this._actions=n;this._dataProvider=t;this._teamSource=i}return n.prototype.fetchTeamsForProject=function(){var n=this,t=this._getProjectId();return this._actions.beginFetchTeams.invoke(null),this._teamSource.fetchTeamsForProject(t).then(function(t){n._actions.fetchTeamsSucceeded.invoke(t)},function(t){t&&o.publishErrorToTelemetry(t);n._actions.fetchTeamsFailed.invoke(t)})},n.prototype.selectTeamAndBacklogLevel=function(n,t){return __awaiter(this,void 0,void 0,function(){var e,w,v,b,r,k,a,y,p;return __generator(this,function(d){switch(d.label){case 0:e=s.getScenarioManager().startScenario(f.BacklogsHubConstants.HUB_NAME,i.BacklogsHubTelemetryConstants.MAPPING_INITIAL_LOAD);d.label=1;case 1:return d.trys.push([1,7,,8]),this._actions.teamSelected.invoke(n),[4,l.getService(c.TeamAwarenessService).beginGetTeamSettings(n.id)];case 2:return w=d.sent(),this._actions.teamSettingsLoaded.invoke(w),this._actions.beginFetchWorkItems.invoke(null),v=this._getProjectId(),[4,this._dataProvider.isBacklogVisible(t.id,v,n.id)];case 3:return b=d.sent(),[4,this._dataProvider.fetchWorkItemsForBacklog(v,n.id,t.id)];case 4:return(r=d.sent(),!r)?[3,6]:(this._actions.fetchBacklogAndWorkItemIdsSucceeded.invoke({backlogLevelVisible:b,workItemIds:r}),u.BacklogsHubTelemetryHelper.publishTelemetry(i.BacklogsHubTelemetryConstants.MAPPING_WORKITEMIDS_LOADED,(y={},y[i.BacklogsHubTelemetryConstants.ItemCount]=r.length,y)),e.addData((p={},p[i.BacklogsHubTelemetryConstants.ItemCount]=r.length,p)),k=r.slice(0,h.PageSizes.QUERY),e.addSplitTiming(i.BacklogsHubTelemetryConstants.IdsLoadedSplit),[4,this.pageWorkItems(k,!1)]);case 5:d.sent();e.end();d.label=6;case 6:return[3,8];case 7:return a=d.sent(),a&&o.publishErrorToTelemetry(a),this._actions.fetchBacklogAndWorkItemIdsFailed.invoke(a),e.abort(),[3,8];case 8:return[2]}})})},n.prototype.pageWorkItems=function(n,t){var r=this;return t===void 0&&(t=!0),this._actions.beginPageWorkItems.invoke(n),this._dataProvider.pageWorkItems(n).then(function(f){var e;r._actions.pageWorkItemsSucceeded.invoke({workItemIds:n,workItems:f});t&&u.BacklogsHubTelemetryHelper.publishTelemetry(i.BacklogsHubTelemetryConstants.MAPPING_WORKITEMS_PAGED,(e={},e[i.BacklogsHubTelemetryConstants.ItemCount]=n.length,e))},function(t){t&&o.publishErrorToTelemetry(t);r._actions.pageWorkItemsFailed.invoke({workItemIds:n,error:t})})},n.prototype.workItemChanged=function(n){this._actions.workItemUpdated.invoke(n)},n.prototype.workItemRemoved=function(n){this._actions.workItemRemoved.invoke(n)},n.prototype._getProjectId=function(){return e.getDefaultWebContext().project.id},n}();t.MappingActionsCreator=v});

define("Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingMembershipEvaluator",["require","exports","Agile/Scripts/Common/Agile","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Models","VSS/Utils/String","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","VSS/Utils/Array"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.MappingMembershipEvaluator=void 0;var s=function(){function n(n,t){this._getTeamSettings=n;this._getTargetBacklogConfiguration=t}return n.prototype.isValid=function(n){return this._isProperType(n)&&this._isTeamFieldValid(n)&&this._isIterationValid(n)&&this._areTypeAndStateValid(n)},n.prototype._isProperType=function(n){var t=n.getFieldValue(r.CoreFieldRefNames.WorkItemType),i=this._getTargetBacklogConfiguration();return o.findIndex(i.workItemTypes,function(n){return f.equals(n,t,!0)})>=0},n.prototype._isTeamFieldValid=function(n){var t=this._getTeamSettings(),r=t.teamFieldName,u=n.getFieldValue(r),f=i.AgileProjectMapping.getInstance().getProjectNames(t.projectId),e=t.teamFieldValues;return e.some(function(n){return i.ClassificationPathUtils.isClassificationPathEqualOrUnderRelative(f,u,n.value,n.includeChildren)})},n.prototype._isIterationValid=function(n){var t=this._getTeamSettings(),u=n.getFieldValue(r.CoreFieldRefNames.IterationPath),f=t.backlogIteration.friendlyPath,e=i.AgileProjectMapping.getInstance().getProjectNames(t.projectId);return i.ClassificationPathUtils.isClassificationPathEqualOrUnderRelative(e,u,f,!0)},n.prototype._areTypeAndStateValid=function(n){var t=n.getFieldValue(r.CoreFieldRefNames.WorkItemType),i=n.getFieldValue(r.CoreFieldRefNames.State),f=e.BacklogConfigurationService.getBacklogConfiguration().getWorkItemStateCategory(t,i);switch(f){case u.WorkItemStateCategory.Proposed:case u.WorkItemStateCategory.InProgress:case u.WorkItemStateCategory.Resolved:return!0;case u.WorkItemStateCategory.Completed:default:return!1}},n}();t.MappingMembershipEvaluator=s});

define("Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingWorkItemEventSubscriber",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/TFS.WorkItemTracking"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.MappingWorkItemEventSubscriber=void 0;var e=function(){function n(n,t,i){var r=this;this._workItemChanged=function(n,t){if(t)switch(t.change){case u.WorkItemChangeType.SaveCompleted:if(t.workItem&&t.workItem.id>0)if(r._membershipEvaluator.isValid(t.workItem)){var i=r._getIWorkItem(t.workItem);r._actionsCreator.workItemChanged(i)}else r._actionsCreator.workItemRemoved(t.workItem.id);break;case u.WorkItemChangeType.Deleted:r._actionsCreator.workItemRemoved(t.workItem.id);break;default:return}};this._actionsCreator=n;this._workItemsManager=i;this._membershipEvaluator=t}return n.prototype.initialize=function(){this._workItemsManager.attachWorkItemChanged(this._workItemChanged)},n.prototype.dispose=function(){this._workItemsManager.detachWorkItemChanged(this._workItemChanged);this._workItemsManager=null;this._actionsCreator=null},n.prototype._getIWorkItem=function(n){var t,u=n.getRevisions(),e=null;return u&&u.length>0&&(e=u[u.length-1]),{id:n.id,fields:(t={},t[i.CoreFieldRefNames.Title]=n.getFieldValue(i.CoreFieldRefNames.Title),t[i.CoreFieldRefNames.WorkItemType]=n.getFieldValue(i.CoreFieldRefNames.WorkItemType),t),relations:n.getWorkItemRelations(),rev:e,_links:n.getLinks(),url:f.WorkItem.getResourceUrl(r.TfsContext.getDefault(),n.id)}},n}();t.MappingWorkItemEventSubscriber=e});

define("Agile/Scripts/BacklogsHub/Mapping/Components/SkeletonTitle",["require","exports","react","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/Mapping/Components/SkeletonTitle"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.SkeletonTitle=void 0;var r=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._width=i._computeRandomWidth(),i}return __extends(t,n),t.prototype.render=function(){return i.createElement("div",{className:"skeleton-title",style:{width:"".concat(this._width,"%")}})},t.prototype._computeRandomWidth=function(){var n=Math.random()*100;return Math.max(20,Math.min(80,n))},t}(i.PureComponent);t.SkeletonTitle=r});

define("Agile/Scripts/BacklogsHub/Mapping/Components/WorkItemList",["require","exports","react","Agile/Scripts/BacklogsHub/Mapping/Components/SkeletonTitle","Agile/Scripts/Common/HubUrlUtilities","OfficeFabric/FocusZone","OfficeFabric/Link","OfficeFabric/List","VSSUI/Tooltip","OfficeFabric/Utilities","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Context","VSSUI/VssIcon","WorkItemTracking/SharedScripts/WorkItemDialogShim","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/Mapping/Components/WorkItemList"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var w;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemList=void 0;var b=34,p=20,k=500,d=function(n){function t(t){var r=__construct(this,n,[t]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._renderWorkItem=function(n,t){var i=r.props,e=i.getWorkItem,u=i.onRenderWorkItemRow,o=u===void 0?r._defaultRenderWorkItem:u,f=i.workItemIds,s=e(n);return o({workItem:s,index:t,setSize:f?f.length:0},r._defaultRenderWorkItem)},r._defaultRenderWorkItem=function(n){return i.createElement(w,__assign({},n))},r._computePageHeight=function(n){var t=Math.min(n+p,r.props.workItemIds.length);return b*(t-n+1)},r._getItemsPerPage=function(){return p},r._onPageAdded=function(n){r._visiblePages[n.key]=n;r._pageVisibleWorkItemsDebounced()},r._onPageRemoved=function(n){delete r._visiblePages[n.key]},r._pageVisibleWorkItems=function(){var i=r.props,o=i.shouldPageWorkItem,s=i.onPageWorkItems,h=i.workItemIds,u=[],e,n,t,f;for(e in r._visiblePages)if(n=r._visiblePages[e],n)for(t=0;t<n.itemCount;t++)f=h[n.startIndex+t],o(f)&&u.push(f);u.length>0&&s(u)},r._async=new h.Async(r),r._pageVisibleWorkItemsDebounced=r._async.throttle(r._pageVisibleWorkItems,k,{leading:!1}),r._visiblePages={},r}return __extends(t,n),t.prototype.render=function(){var n=this.props.workItemIds;return i.createElement(f.FocusZone,{className:"work-item-list","data-is-scrollable":"true"},i.createElement(o.List,{role:"list",items:n,onRenderCell:this._renderWorkItem,getItemCountForPage:this._getItemsPerPage,getPageHeight:this._computePageHeight,onPageAdded:this._onPageAdded,onPageRemoved:this._onPageRemoved,renderedWindowsAhead:1}))},t.prototype.componentWillUnmount=function(){this._async.dispose();this._async=null},t}(i.Component);t.WorkItemList=d;w=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._onWorkItemClicked=function(n){n.ctrlKey||n.metaKey||n.shiftKey||(n.preventDefault(),y.showWorkItemById(t.props.workItem.id))},t}return __extends(t,n),t.prototype.render=function(){var t=this.props,n=t.workItem,h=t.index,y=t.setSize,o,f;return n?(o=n.fields[l.CoreFieldRefNames.TeamProject]||a.getDefaultWebContext().project.name,f=c.WorkItemTypeColorAndIconsProvider.getInstance().getColorAndIcon(o,n.fields[l.CoreFieldRefNames.WorkItemType]),i.createElement("div",{className:"work-item-row",role:"listitem","aria-posinset":h+1,"aria-setsize":y},i.createElement(v.VssIcon,{className:"work-item-type-icon",iconType:1,iconName:f.icon,styles:{root:{color:f.color}}}),i.createElement(e.Link,{className:"work-item-title",href:u.UrlUtilities.getWorkItemEditUrl(n.id),onClick:this._onWorkItemClicked},i.createElement(s.TooltipHost,{overflowMode:s.TooltipOverflowMode.Parent,content:n.fields[l.CoreFieldRefNames.Title]},n.fields[l.CoreFieldRefNames.Title])))):i.createElement("div",{className:"work-item-row"},i.createElement("div",{className:"work-item-type-icon work-item-type-icon--loading"}),i.createElement(r.SkeletonTitle,null))},t}(i.PureComponent)});

// This file is used by loader.shim to support jquery plugins who has dependency on jquery using AMD.
// By the time this file is loaded by the loader, actual jquery was already added to the page (even before AMD loader).
// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/Components/SimpleDropZone",["require","exports","jquery","react","OfficeFabric/Utilities","jQueryUI/droppable"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.SimpleDropZone=void 0;var f=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=u.getNativeProps(this.props,u.divProperties);return r.createElement("div",__assign({ref:this._resolveRootRef,key:"drop-zone"},n),this.props.children)},t.prototype.componentDidMount=function(){if(this._root){var n=i(this._root);n&&n.droppable(this.props.droppableOptions)}},t.prototype.componentWillUnmount=function(){if(this._root){var n=i(this._root);n&&n.hasClass("ui-droppable")&&n.droppable("destroy")}},t.prototype._resolveRootRef=function(n){this._root=n},__decorate([u.autobind],t.prototype,"_resolveRootRef",null),t}(r.Component);t.SimpleDropZone=f});

define("Agile/Scripts/BacklogsHub/Mapping/Components/MappingComponent",["require","exports","react","Agile/Scripts/Backlog/ProductBacklogGrid","Agile/Scripts/BacklogsHub/Mapping/Components/WorkItemList","Agile/Scripts/Common/Agile","Agile/Scripts/Common/Components/AgileHubError","Presentation/Scripts/TFS/Components/LoadingComponent","Agile/Scripts/Common/HubUrlUtilities","Agile/Scripts/Generated/HubConstants","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","OfficeFabric/Button","OfficeFabric/Callout","OfficeFabric/Link","Presentation/Scripts/TFS/Components/SimpleDropZone","Presentation/Scripts/TFS/TFS.IllustrationUrlUtils","VSS/Locations","VSS/Utils/Array","VSS/Utils/String","VSSUI/PickList","VSSUI/VssIcon","VSSUI/ZeroData","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/Mapping/Components/MappingComponent"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){var it,tt;Object.defineProperty(t,"__esModule",{value:!0});t.DroppableWorkItemRow=t.MappingComponent=void 0;it=function(n){function t(t){var r=__construct(this,n,[t]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._renderWorkItemRow=function(n,t){return i.createElement(tt,__assign({},n,{dragAcceptHandler:r._workItemDragAcceptHandler,onWorkItemsDropped:r.props.onWorkItemsDropped,workItemRowRenderer:t}))},r._getPickListItem=function(n){return{key:n.id,name:n.name,iconProps:{iconType:0,iconName:"People"}}},r._showTeamCallout=function(){var n=r.props,t=n.onFetchTeams,i=n.teams,u=r.state.isTeamCalloutOpen;i||t();u||r.setState({isTeamCalloutOpen:!0})},r._hideTeamCallout=function(){var n=r.state.isTeamCalloutOpen;n&&r.setState({isTeamCalloutOpen:!1})},r._onCalloutPositioned=function(){r._pickListRef&&r._pickListRef.focus()},r._onNavigateToTargetBacklog=function(n){var t=r.props.onNavigateToTargetBacklog;!t||n.ctrlKey||n.metaKey||n.shiftKey||(n.preventDefault(),t())},r._onTeamSelected=function(n){var t=r.props,u=t.selectedTeam,f=t.onTeamChanged,i=n.selectedItems[0];u.equals(i)||f(i);r._hideTeamCallout()},r._workItemDragAcceptHandler=function(){var t=r.props,i=t.hostBacklogLevel,u=t.getWorkItemDragInfo,n=u().topLevelWorkItemTypes;return n&&n.length&&n.every(function(n){return b.contains(i.workItemTypes,n,k.localeIgnoreCaseComparer)})},r._resolvePickListRef=function(n){r._pickListRef=n},r._resolveTeamCalloutTarget=function(n){r._teamCalloutTarget=n},r.state={isTeamCalloutOpen:!1},r}return __extends(t,n),t.prototype.componentWillReceiveProps=function(n){var t=this;n.teamsLoading&&!this._teamsPromise&&(this._teamsPromise=new Promise(function(n){t._teamsPromiseResolve=n}));!n.teamsLoading&&this._teamsPromise&&(this._teamsPromiseResolve(),this._teamsPromise=null,this._teamsPromiseResolve=null)},t.prototype.render=function(){return i.createElement("div",{className:"mapping-component","aria-label":c.MappingPane_AriaLabel},this._renderHeader(),this._renderContent(),this._renderTeamCallout())},t.prototype._renderHeader=function(){return i.createElement("div",{className:"mapping-header"},this._renderTeamHeader(),this._renderHeaderCommands())},t.prototype._renderTeamHeader=function(){var n=this.props,t=n.selectedTeam,r=n.targetBacklogLevel,u=this.state.isTeamCalloutOpen;return i.createElement("div",{className:"team-header"},k.format(c.MappingPane_BacklogForTeam,r.name),i.createElement("div",{className:"team-header-button-container",ref:this._resolveTeamCalloutTarget},i.createElement(l.BaseButton,{className:"team-header-button",onClick:this._showTeamCallout,"aria-haspopup":!0,"aria-expanded":u,role:"combobox"},t.name," ",i.createElement(g.VssIcon,{iconType:0,iconName:"ChevronDown"}))))},t.prototype._renderHeaderCommands=function(){var n=this.props.onRefreshWorkItems;return i.createElement("div",{className:"header-commands"},i.createElement(l.IconButton,{ariaLabel:c.RefreshButtonLabel,iconProps:{iconName:"Refresh"},onClick:n}))},t.prototype._renderContent=function(){var n=this.props,tt=n.getWorkItem,it=n.getWorkItemError,rt=n.isTargetBacklogLevelVisible,ut=n.selectedTeam,ft=n.shouldPageWorkItem,t=n.targetBacklogLevel,f=n.workItemIds,a=n.workItemIdsLoading,l=n.workItemIdsLoadingError,y=n.workItemPageError,et=n.onPageWorkItems,r,b,d,g;if(l||y)b=l?l.message:y.message,r=i.createElement(e.HubError,{exceptionsInfo:[{exceptionMessage:b}]});else{if(a)return i.createElement(o.LoadingComponent,null);!a&&f&&f.length===0?(d={teamIdOrName:ut.name,pivot:h.BacklogsHubConstants.BacklogPivot,backlogLevel:t.name},g=s.BacklogsUrls.getBacklogContentUrl(d),r=i.createElement(nt.ZeroData,{imagePath:w.urlHelper.getVersionedContentUrl(p.WorkZeroDataIllustrationPaths.NoWorkScheduled),imageAltText:k.format(c.Backlog_NoItems,t.name),primaryText:k.format(c.Backlog_NoItems,t.name),secondaryText:rt&&t?i.createElement(v.Link,{onClick:this._onNavigateToTargetBacklog,href:g},k.format(c.MappingPane_GoToBacklog,t.name)):undefined})):r=i.createElement(u.WorkItemList,{getWorkItem:tt,getWorkItemError:it,shouldPageWorkItem:ft,workItemIds:f,onRenderWorkItemRow:this._renderWorkItemRow,onPageWorkItems:et})}return i.createElement("div",{className:"mapping-work-item-container"},r)},t.prototype._renderTeamCallout=function(){var n=this.props,t=n.selectedTeam,r=n.teams,u=this.state.isTeamCalloutOpen;if(u)return i.createElement(a.Callout,{target:this._teamCalloutTarget,onDismiss:this._hideTeamCallout,directionalHint:4,isBeakVisible:!1,setInitialFocus:!0,onPositioned:this._onCalloutPositioned},i.createElement(d.PickList,{className:"mapping-team-callout",componentRef:this._resolvePickListRef,isSearchable:!0,items:this._teamsPromise||r,getListItem:this._getPickListItem,selectedItems:[t],onSelectionChanged:this._onTeamSelected,searchTextPlaceholder:c.MappingPane_TeamSearchPlaceholder}))},t}(i.Component);t.MappingComponent=it;tt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._onWorkItemsDropped=function(n,i){var u=t.props,o=u.workItem,f=u.onWorkItemsDropped,e;f&&(e=i.helper.data(r.ProductBacklogGrid.DATA_WORK_ITEM_IDS)||[],f(e,o.id))},t}return __extends(t,n),t.prototype.render=function(){return this.props.workItem?i.createElement(y.SimpleDropZone,{droppableOptions:{accept:this.props.dragAcceptHandler,activeClass:"work-item-row-drop-zone--drag-active",hoverClass:"work-item-row-drop-zone--drag-hover",drop:this._onWorkItemsDropped,scope:f.DragDropScopes.ProductBacklog,tolerance:"pointer"},className:"work-item-row-drop-zone"},this.props.workItemRowRenderer(this.props)):i.createElement("div",{className:"work-item-row-drop-zone"},this.props.workItemRowRenderer(this.props))},t}(i.Component);t.DroppableWorkItemRow=tt});

define("Agile/Scripts/BacklogsHub/Mapping/Selectors/MappingSelectors",["require","exports"],function(n,t){function i(n){return{isBacklogLevelVisible:n.isBacklogLevelVisible,selectedTeam:n.selectedTeam,selectedTeamSettings:n.selectedTeamSettings,teams:n.teams,teamsLoading:n.teamsLoading,workItemIds:n.workItemIds,workItemIdsLoading:n.workItemIdsLoading,workItemIdsLoadingError:n.workItemIdsLoadingError,workItemPageError:n.workItemPageError}}Object.defineProperty(t,"__esModule",{value:!0});t.getState=void 0;t.getState=i});

define("Agile/Scripts/BacklogsHub/Mapping/Store/MappingStore",["require","exports","VSS/Diag","VSS/Flux/Store","VSS/Utils/Array","VSS/Utils/String"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.MappingStore=void 0;var e=function(n){function t(t){var r=__construct(this,n,[]);for(var e in r)r.hasOwnProperty(e)&&(this[e]=r[e]);return r._handleBeginFetchTeamsAction=function(){r._teamsLoading=!0;r.emitChanged()},r._handleFetchTeamsSucceededAction=function(n){r._teamsLoading=!1;r._teams=n;r._teams.sort(function(n,t){return f.localeComparer(n.name,t.name)});r.emitChanged()},r._handleFetchTeamsFailedAction=function(){r._teamsLoading=!1;r.emitChanged()},r._handleTeamSelectedAction=function(n){r._selectedTeam=n;r.emitChanged()},r._handleTeamSettingsLoadedAction=function(n){r._selectedTeamSettings=n;r.emitChanged()},r._handleBeginFetchWorkItemsAction=function(){r._workItemIdsLoading=!0;r._workItemIds=[];r._pagedWorkItems={};r._workItemErrors={};r._workItemIdsLoadingError=null;r._workItemPageError=null;r.emitChanged()},r._handleFetchWorkItemIdsSucceededAction=function(n){r._isBacklogLevelVisible=n.backlogLevelVisible;r._workItemIds=n.workItemIds;r._workItemIdsLoading=!1;r.emitChanged()},r._handleFetchWorkItemIdsFailedAction=function(n){r._workItemIdsLoading=!1;r._workItemIdsLoadingError=n;r.emitChanged()},r._handleBeginPageWorkItems=function(n){n&&n.forEach(function(n){return r._workItemLoading[n]=!0})},r._handlePageWorkItemsSucceededAction=function(n){var u=n.workItems,o=n.workItemIds,t,f,e,s;if(i.Debug.assertIsNotNull(r._workItemIds,"FetchWorkItemIds must have been invoked before pageWorkItemSucceeded action"),r._workItemIds||(r._workItemIds=[]),u){if(u.forEach(function(n){r._pagedWorkItems[n.id]=n;delete r._workItemLoading[n.id]}),r._workItemIds=__spreadArray([],r._workItemIds,!0),o.length!==u.length)for(t=0,f=o;t<f.length;t++)e=f[t],r._pagedWorkItems[e]||(s=r._workItemIds.indexOf(e),r._workItemIds.splice(s,1));r.emitChanged()}},r._handlePageWorkItemsFailedAction=function(n){n&&n.workItemIds&&(n.workItemIds.forEach(function(n){r._workItemErrors[n]=!0;delete r._workItemLoading[n]}),r._workItemPageError=n.error,r.emitChanged())},r._handleWorkItemUpdatedAction=function(n){i.Debug.assertIsNotNull(r._workItemIds,"FetchWorkItemIds must have been invoked before workItemUpdated action");r._workItemIds||(r._workItemIds=[]);var t=u.findIndex(r._workItemIds,function(t){return t===n.id})>=0;r._workItemIds=__spreadArray([],r._workItemIds,!0);t?r._pagedWorkItems[n.id]=n:(r._workItemIds.push(n.id),r._pagedWorkItems[n.id]=n);r.emitChanged()},r._handleWorkItemRemovedAction=function(n){i.Debug.assertIsNotNull(r._workItemIds,"FetchWorkItemIds must have been invoked before workItemRemoved action");r._workItemIds||(r._workItemIds=[]);var t=u.findIndex(r._workItemIds,function(t){return t===n});t>=0&&(r._workItemIds=__spreadArray([],r._workItemIds,!0),r._workItemIds.splice(t,1),delete r._pagedWorkItems[n],r.emitChanged())},r._registerActionHandlers(t),r._teamsLoading=!1,r._workItemIdsLoading=!1,r._workItemErrors={},r._workItemLoading={},r._pagedWorkItems={},r}return __extends(t,n),Object.defineProperty(t.prototype,"isBacklogLevelVisible",{get:function(){return this._isBacklogLevelVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedTeam",{get:function(){return this._selectedTeam},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedTeamSettings",{get:function(){return this._selectedTeamSettings},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"teams",{get:function(){return this._teams},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"teamsLoading",{get:function(){return this._teamsLoading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"workItemIds",{get:function(){return this._workItemIds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"workItemIdsLoading",{get:function(){return this._workItemIdsLoading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"workItemIdsLoadingError",{get:function(){return this._workItemIdsLoadingError},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"workItemPageError",{get:function(){return this._workItemPageError},enumerable:!1,configurable:!0}),t.prototype.getWorkItem=function(n){return this._pagedWorkItems?this._pagedWorkItems[n]:undefined},t.prototype.isWorkItemError=function(n){return!!this._workItemErrors[n]},t.prototype.shouldPageWorkItem=function(n){return!this._pagedWorkItems[n]&&!this._workItemErrors[n]&&!this._workItemLoading[n]},t.prototype._registerActionHandlers=function(n){n.beginFetchTeams.addListener(this._handleBeginFetchTeamsAction);n.fetchTeamsSucceeded.addListener(this._handleFetchTeamsSucceededAction);n.fetchTeamsFailed.addListener(this._handleFetchTeamsFailedAction);n.teamSelected.addListener(this._handleTeamSelectedAction);n.teamSettingsLoaded.addListener(this._handleTeamSettingsLoadedAction);n.beginFetchWorkItems.addListener(this._handleBeginFetchWorkItemsAction);n.fetchBacklogAndWorkItemIdsSucceeded.addListener(this._handleFetchWorkItemIdsSucceededAction);n.fetchBacklogAndWorkItemIdsFailed.addListener(this._handleFetchWorkItemIdsFailedAction);n.beginPageWorkItems.addListener(this._handleBeginPageWorkItems);n.pageWorkItemsSucceeded.addListener(this._handlePageWorkItemsSucceededAction);n.pageWorkItemsFailed.addListener(this._handlePageWorkItemsFailedAction);n.workItemUpdated.addListener(this._handleWorkItemUpdatedAction);n.workItemRemoved.addListener(this._handleWorkItemRemovedAction)},t}(r.Store);t.MappingStore=e});

define("Agile/Scripts/Common/Components/RightPaneHeader/RightPaneHeader",["require","exports","react","OfficeFabric/Button","OfficeFabric/Styling","OfficeFabric/Utilities","Agile/Scripts/Resources/TFS.Resources.Agile","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/RightPaneHeader/RightPaneHeader"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.RightPaneHeader=void 0;var o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){return i.createElement("div",{className:"right-pane-container"},i.createElement("div",{className:f.css("right-pane-header",this.props.className)},i.createElement("div",{className:"right-pane-header-title-row"},i.createElement("h3",{className:"right-pane-header-title"},this.props.title),i.createElement(r.IconButton,{styles:{root:{fontSize:u.IconFontSizes.large}},className:"right-pane-header-close-button",onClick:this.props.onDismissClicked,ariaLabel:e.Close,iconProps:{iconName:"Cancel"}})),this.props.description&&i.createElement("div",{className:"right-pane-header-description"},this.props.description)),i.createElement("div",{className:"right-pane-content-scroll-container"},this.props.children))},t}(i.PureComponent);t.RightPaneHeader=o});

define("Agile/Scripts/BacklogsHub/Mapping/Components/MappingPane",["require","exports","react","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants","Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingActions","Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingActionsCreator","Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingDataProvider","Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingMembershipEvaluator","Agile/Scripts/BacklogsHub/Mapping/ActionsCreator/MappingWorkItemEventSubscriber","Agile/Scripts/BacklogsHub/Mapping/Components/MappingComponent","Agile/Scripts/BacklogsHub/Mapping/Selectors/MappingSelectors","Agile/Scripts/BacklogsHub/Mapping/Store/MappingStore","Agile/Scripts/Common/HubTelemetryHelper","Agile/Scripts/Common/HubUrlUtilities","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Context","VSS/Utils/String","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/TFS.WorkItemTracking","Agile/Scripts/Common/Components/RightPaneHeader/RightPaneHeader","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/Mapping/Components/MappingPane"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){Object.defineProperty(t,"__esModule",{value:!0});t.MappingPane=void 0;var tt=function(n){function t(t){var i=__construct(this,n,[t]),h,y,p;for(h in i)i.hasOwnProperty(h)&&(this[h]=i[h]);return i._onFetchTeams=function(){i._actionsCreator.fetchTeamsForProject()},i._onNavigateToTargetBacklog=function(){var n=i.props,f=n.currentTeam,e=n.onSameTeamBacklogChanged,r=n.targetBacklogLevel,u=i.state.selectedTeam,t;k.equals(u.id,f.id,!0)?e(r):(t=v.BacklogsUrls.getBacklogContentUrl({teamIdOrName:u.name,backlogLevel:r.name}),b.getDefaultWebContext().team?window.location.href=t:v.BacklogsUrls.navigateToBacklogsHubUrl(t))},i._onPageWorkItems=function(n){i._actionsCreator.pageWorkItems(n)},i._onRefreshWorkItems=function(){var n=i.props.targetBacklogLevel,t=i.state.selectedTeam;i._actionsCreator.selectTeamAndBacklogLevel(t,n)},i._onStoreChanged=function(){i.setState(c.getState(i._store))},i._onTeamChanged=function(n){var t,u=i.props,f=u.currentTeam,e=u.targetBacklogLevel;a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.MAPPING_TEAM_SELECTED,(t={},t[r.BacklogsHubTelemetryConstants.SameTeam]=f.id===n.id,t));i._actionsCreator.selectTeamAndBacklogLevel(n,e)},i._getWorkItem=function(n){return i._store.getWorkItem(n)},i._getWorkItemError=function(n){return i._store.isWorkItemError(n)},i._shouldPageWorkItem=function(n){return i._store.shouldPageWorkItem(n)},y=new u.MappingActions,p=new e.MappingDataProvider,i._actionsCreator=new f.MappingActionsCreator(y,p),i._store=new l.MappingStore(y),i._mappingWorkItemEventSubscriber=new s.MappingWorkItemEventSubscriber(i._actionsCreator,new o.MappingMembershipEvaluator(function(){return i.state.selectedTeamSettings},function(){return i.props.targetBacklogLevel}),i._getWorkItemManager()),i._mappingWorkItemEventSubscriber.initialize(),i.state=c.getState(i._store),i}return __extends(t,n),t.prototype.componentWillMount=function(){this._store.addChangedListener(this._onStoreChanged);this._actionsCreator.selectTeamAndBacklogLevel(this.props.currentTeam,this.props.targetBacklogLevel);a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.MAPPING_OPENED,{})},t.prototype.componentWillReceiveProps=function(n){n.targetBacklogLevel.id!==this.props.targetBacklogLevel.id&&this._actionsCreator.selectTeamAndBacklogLevel(this.state.selectedTeam,n.targetBacklogLevel)},t.prototype.componentWillUnmount=function(){this._mappingWorkItemEventSubscriber.dispose();this._store.removeChangedListener(this._onStoreChanged);a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.MAPPING_CLOSED,{})},t.prototype.render=function(){var t=this.props,f=t.getWorkItemDragInfo,e=t.hostBacklogLevel,o=t.onWorkItemsDropped,r=t.targetBacklogLevel,n=this.state,s=n.isBacklogLevelVisible,u=n.selectedTeam,c=n.teams,l=n.teamsLoading,a=n.workItemIds,v=n.workItemIdsLoading,p=n.workItemIdsLoadingError,w=n.workItemPageError;return r&&u?i.createElement(nt.RightPaneHeader,{title:y.MappingPaneTitle,description:k.format(y.MappingPaneDescription,this.props.targetBacklogLevel.name),onDismissClicked:this.props.onDismiss},i.createElement("div",{className:"mapping-pane",role:"complementary","aria-label":y.MappingPaneTitle},i.createElement(h.MappingComponent,{getWorkItemDragInfo:f,hostBacklogLevel:e,isTargetBacklogLevelVisible:s,targetBacklogLevel:r,selectedTeam:u,teams:c,teamsLoading:l,workItemIds:a,workItemIdsLoading:v,workItemIdsLoadingError:p,workItemPageError:w,getWorkItem:this._getWorkItem,getWorkItemError:this._getWorkItemError,shouldPageWorkItem:this._shouldPageWorkItem,onFetchTeams:this._onFetchTeams,onNavigateToTargetBacklog:this._onNavigateToTargetBacklog,onPageWorkItems:this._onPageWorkItems,onRefreshWorkItems:this._onRefreshWorkItems,onTeamChanged:this._onTeamChanged,onWorkItemsDropped:o}))):null},t.prototype._getWorkItemManager=function(){var n=p.TfsContext.getDefault(),t=w.ProjectCollection.getConnection(n).getService(g.WorkItemStore);return d.WorkItemManager.get(t)},t}(i.Component);t.MappingPane=tt});

define("Agile/Scripts/BacklogsHub/Planning/ActionsCreator/PlanningActions",["require","exports","Agile/Scripts/Common/ActionsHub","VSS/Flux/Diag"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.PlanningActions=void 0;var u=function(n){function t(){var t=n.call(this,"PLANNING")||this;return t.iterationsLoaded=t.createAction(),t.beginLoadIteration=t.createAction(),t.iterationEffortLoadSucceeded=t.createAction(),t.iterationEffortLoadFailed=t.createAction(),t.iterationTeamDaysOffLoadSucceeded=t.createAction(),t.iterationLoadComplete=t.createAction(),t.toggleNewSprintCallout=t.createAction(),t.weekendsLoaded=t.createAction(),t.workItemChanged=t.createAction(),t.resetData=t.createAction(),t.workItemRemoved=t.createAction(),t}return __extends(t,n),__decorate([r.registerDiagActions],t)}(i.ActionsHub);t.PlanningActions=u});

define("Agile/Scripts/BacklogsHub/Planning/Constants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.PlanningMessage=void 0;var i;(function(n){n.PLANNING_TOAST_MESSAGE="planning-toast-message"})(i=t.PlanningMessage||(t.PlanningMessage={}))});

define("Agile/Scripts/BacklogsHub/Planning/ActionsCreator/PlanningActionsCreator",["require","exports","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants","Agile/Scripts/BacklogsHub/Planning/Constants","Agile/Scripts/Generated/HubConstants","VSS/Error","VSS/Performance","VSS/Controls/Notifications","VSS/Controls","VSS/Events/Action"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.PlanningActionsCreator=void 0;var c=5,l=2,a=2e3,v=250,y=1e3,p=function(){function n(n,t){this._actions=n;this._dataProvider=t}return n.prototype.initialize=function(){var r,o=this,t=e.getScenarioManager().startScenario(u.BacklogsHubConstants.HUB_NAME,i.BacklogsHubTelemetryConstants.PLANNING_INITIAL_LOAD),n=this._dataProvider.getIterations(),s=this._dataProvider.getBacklogIteration(),f=this._dataProvider.getCurrentIteration(),h=this._dataProvider.getWeekends();if(this._actions.iterationsLoaded.invoke({backlogIteration:s,currentIterationId:f?f.id:null,iterations:n}),this._actions.weekendsLoaded.invoke(h),this._createToastNotification(),n)return this._actions.beginLoadIteration.invoke(n.map(function(n){return n.id})),t.addData((r={},r[i.BacklogsHubTelemetryConstants.IterationCount]=n.length,r)),this._bucketIterations(n).reduce(function(n,r){return n.then(function(){return o._loadIterationDetails(r).then(function(){t.addSplitTiming(i.BacklogsHubTelemetryConstants.BucketLoadedSplit)})})},Promise.resolve()).then(function(){return t.end()});t.abort()},n.prototype.reloadPlanningData=function(){this._actions.resetData.invoke(null);this.initialize()},n.prototype.toggleNewSprintCallout=function(n){this._actions.toggleNewSprintCallout.invoke(n)},n.prototype.workItemChanged=function(n){this._actions.workItemChanged.invoke(n)},n.prototype.workItemRemoved=function(n){this._actions.workItemRemoved.invoke(n)},n.prototype._createToastNotification=function(){var n=s.BaseControl.createIn(o.ToastNotification,$(".main").length?$(".main"):$("body"),{fadeInTime:v,fadeOutTime:y,toastTime:a});h.getService().registerActionWorker(r.PlanningMessage.PLANNING_TOAST_MESSAGE,function(t){n.toast(t.message)})},n.prototype._loadIterationDetails=function(n){var t=this;return Promise.all(n.map(function(n){return Promise.all([t._loadIterationEffort(n),t._loadIterationTeamDaysOff(n)]).then(function(){t._actions.iterationLoadComplete.invoke(n.id)})}))},n.prototype._loadIterationEffort=function(n){var t=this;return this._dataProvider.getIterationEffort(n).then(function(n){t._actions.iterationEffortLoadSucceeded.invoke(n)},function(i){i&&f.publishErrorToTelemetry(i);t._actions.iterationEffortLoadFailed.invoke({iterationId:n.id,error:i})})},n.prototype._loadIterationTeamDaysOff=function(n){var t=this;return this._dataProvider.getIterationTeamDaysOff(n).then(function(i){t._actions.iterationTeamDaysOffLoadSucceeded.invoke({iterationId:n.id,teamDaysOffUTC:i})},function(n){n&&f.publishErrorToTelemetry(n)})},n.prototype._bucketIterations=function(n){var t=[],r=c,i=0;return n&&n.forEach(function(n){var u=t[i];u||(u=[],t[i]=u);u.push(n);u.length===r&&(r=l,i+=1)}),t},n}();t.PlanningActionsCreator=p});

define("Agile/Scripts/Models/Iteration/Iteration",["require","exports","Agile/Scripts/Common/IterationDateUtil","VSS/Utils/Culture","VSS/Utils/Date","VSS/Utils/File"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.Iteration=void 0;var e=function(){function n(n){this.name=n.name;this.iterationPath=n.iterationPath;this.id=n.id;this.startDateUTC=n.startDateUTC;this.finishDateUTC=n.finishDateUTC}return Object.defineProperty(n.prototype,"localeDisplayStartDate",{get:function(){if(this.startDateUTC){var n=r.getDateTimeFormat();return u.localeFormat(this.startDateUTC,n.ShortDatePattern,!0)}return""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localeDisplayFinishDate",{get:function(){if(this.finishDateUTC){var n=r.getDateTimeFormat();return u.localeFormat(this.finishDateUTC,n.ShortDatePattern,!0)}return""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"startDateLocal",{get:function(){if(this.startDateUTC)return u.shiftToLocal(this.startDateUTC)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"finishDateLocal",{get:function(){if(this.finishDateUTC)return u.shiftToLocal(this.finishDateUTC)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"normalizedIterationPath",{get:function(){return f.normalizePath(this.iterationPath)},enumerable:!1,configurable:!0}),n.prototype.getWorkingDays=function(n,t){return(t===void 0&&(t=[]),this.startDateUTC&&this.finishDateUTC)?i.IterationDateUtil.getNumberOfWorkingDays(this.startDateUTC,this.finishDateUTC,n,t):0},n.prototype.update=function(t){var r=this._getParams(),i;if(t)for(i in t)i==="finishDate"||i==="startDate"?r[i]=u.shiftToUTC(t[i]):i==="startDateUTC"?r.startDateUTC=t[i]:i==="finishDateUTC"?r.finishDateUTC=t[i]:r[i]=t[i];return new n(r)},n.prototype._getParams=function(){return{name:this.name,iterationPath:this.iterationPath,id:this.id,startDateUTC:new Date(this.startDateUTC),finishDateUTC:new Date(this.finishDateUTC)}},n}();t.Iteration=e});

define("Agile/Scripts/Models/Iteration/IterationBuilder",["require","exports","Agile/Scripts/Models/Iteration/Iteration","VSS/Utils/Date"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.IterationBuilder=void 0;var u;(function(n){function t(n){if(n)return new i.Iteration({name:n.name,iterationPath:n.friendlyPath,id:n.id,startDateUTC:n.startDate?r.shiftToUTC(new Date(n.startDate)):undefined,finishDateUTC:n.finishDate?r.shiftToUTC(new Date(n.finishDate)):undefined})}function u(n){return new i.Iteration({name:n.name,iterationPath:n.path,id:n.id,startDateUTC:n.startDate?r.shiftToUTC(new Date(n.startDate)):undefined,finishDateUTC:n.endDate?r.shiftToUTC(new Date(n.endDate)):undefined})}function f(n){if(n)return new i.Iteration({id:n.id,name:n.name,iterationPath:n.path,startDateUTC:n.attributes.startDate?r.shiftToUTC(n.attributes.startDate):undefined,finishDateUTC:n.attributes.finishDate?r.shiftToUTC(n.attributes.finishDate):undefined})}function e(n){if(n)return new i.Iteration({id:n.identifier,name:n.name,iterationPath:null,startDateUTC:n.attributes.startDate?r.shiftToUTC(new Date(n.attributes.startDate)):undefined,finishDateUTC:n.attributes.finishDate?r.shiftToUTC(new Date(n.attributes.finishDate)):undefined})}n.fromIIterationData=t;n.fromISprintsIterationData=u;n.fromTeamSettingsIteration=f;n.fromWorkItemClassificationNode=e})(u=t.IterationBuilder||(t.IterationBuilder={}))});

define("Agile/Scripts/Models/Iteration/IterationTimeFrame",["require","exports"],function(n,t){function r(n){if(n!=null)return typeof n=="number"?n:(n=n.charAt(0).toUpperCase()+n.slice(1).toLowerCase(),i[n])}Object.defineProperty(t,"__esModule",{value:!0});t.parseIterationTimeframe=t.IterationTimeframe=void 0;var i;(function(n){n[n.Past=0]="Past";n[n.Current=1]="Current";n[n.Future=2]="Future"})(i=t.IterationTimeframe||(t.IterationTimeframe={}));t.parseIterationTimeframe=r});

define("Agile/Scripts/Models/Iteration",["require","exports","Agile/Scripts/Models/Iteration/Iteration","Agile/Scripts/Models/Iteration/IterationBuilder","Agile/Scripts/Models/Iteration/IterationTimeFrame"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});__exportStar(i,t);__exportStar(r,t);__exportStar(u,t)});

define("Agile/Scripts/BacklogsHub/Planning/ActionsCreator/PlanningDataProvider",["require","exports","Agile/Scripts/Models/Iteration","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Models","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","TFS/Work/RestClient","VSS/Service","VSS/Settings/Services","VSS/Utils/Array","VSS/Utils/Date","VSS/Utils/String","WorkItemTracking/Scripts/Utils/PageWorkItemHelper","VSS/Context"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){Object.defineProperty(t,"__esModule",{value:!0});t.PlanningDataProvider=t.FUTURE_ITERATION_CAP_KEY=void 0;t.FUTURE_ITERATION_CAP_KEY="Agile/BacklogsHub/PlanningIterationFutureCount";var b=10,k=function(){function n(n){this._teamId=n}return n.prototype.getWeekends=function(){return this._getTeamSettings().weekends.days},n.prototype.getIterations=function(){var u=l.getService(),f=u.getEntry(t.FUTURE_ITERATION_CAP_KEY,1)||b,n=this._getTeamSettings(),r=__spreadArray([],n.futureIterations.slice(0,f),!0);return n.currentIteration&&r.unshift(n.currentIteration),r.map(function(n){return i.IterationBuilder.fromIIterationData(n)})},n.prototype.getBacklogIteration=function(){var n=this._getTeamSettings();if(n.backlogIteration)return i.IterationBuilder.fromIIterationData(n.backlogIteration)},n.prototype.getCurrentIteration=function(){var n=this._getTeamSettings();if(n.currentIteration)return i.IterationBuilder.fromIIterationData(n.currentIteration)},n.prototype.getTeamFieldReferenceName=function(){var n=this._getTeamSettings();return n.teamFieldName},n.prototype.getEffortsFieldName=function(){var n=u.BacklogConfigurationService.getBacklogConfiguration();return n.backlogFields.typeFields[r.BacklogFieldTypes.Effort]},n.prototype.getRequirementWorkItemTypes=function(){var n=u.BacklogConfigurationService.getBacklogConfiguration();return n.requirementBacklog?n.requirementBacklog.workItemTypes:[]},n.prototype.getIterationTeamDaysOff=function(n){var t=this;return new Promise(function(i,r){t._getHttpClient().getTeamDaysOff(t._getTeamContext(),n.id).then(i,r)}).then(function(n){return n.daysOff.map(function(n){return{start:v.shiftToUTC(n.start),end:v.shiftToUTC(n.end)}})})},n.prototype.getIterationEffort=function(n){return this._getWorkItems(n).then(function(t){for(var o,f=u.BacklogConfigurationService.getBacklogConfiguration(),s=f.requirementBacklog.workItemTypes.concat(f.taskBacklog.workItemTypes),i={},r=0,e=s;r<e.length;r++)o=e[r],i[o]=0;return t.reduce(function(n,t){var r=n.workItemsById;return n.totalEfforts=(n.totalEfforts||0)+t.effort,i[t.workItemType]=(i[t.workItemType]||0)+1,r[t.id]=t,n},{countByWorkItemType:i,totalEfforts:0,workItemsById:{},iterationId:n.id})})},n.prototype._getTeamSettings=function(){var n=s.ProjectCollection.getConnection().getService(f.TeamAwarenessService);return n.getTeamSettings(this._teamId)},n.prototype._getWorkItems=function(n){for(var i,h,t=u.BacklogConfigurationService.getBacklogConfiguration(),o=this._getTeamSettings(),c=t.requirementBacklog.workItemTypes.concat(t.taskBacklog.workItemTypes),l={},f=0,s=c;f<s.length;f++)i=s[f],h=__spreadArray(__spreadArray(__spreadArray(__spreadArray([],t.getWorkItemStatesForStateCategory(i,r.WorkItemStateCategory.Proposed),!0),t.getWorkItemStatesForStateCategory(i,r.WorkItemStateCategory.InProgress),!0),t.getWorkItemStatesForStateCategory(i,r.WorkItemStateCategory.Resolved),!0),t.getWorkItemStatesForStateCategory(i,r.WorkItemStateCategory.Completed),!0),l[i]=h;return this._queryWorkItems(n).then(function(n){if(n.length===0)return[];var i=t.backlogFields.typeFields[r.BacklogFieldTypes.Effort],u=[e.CoreFieldRefNames.Id,e.CoreFieldRefNames.State,e.CoreFieldRefNames.WorkItemType,e.CoreFieldRefNames.IterationPath,o.teamFieldName,i],f=t.requirementBacklog.workItemTypes;return p.PageWorkItemHelper.pageWorkItems(n,null,u).then(function(n){return n.map(function(n){var t=n.fields[e.CoreFieldRefNames.WorkItemType],r=f.some(function(n){return y.equals(n,t,!0)});return{id:n.id,iterationPath:n.fields[e.CoreFieldRefNames.IterationPath],teamFieldValue:n.fields[o.teamFieldName],effort:r?n.fields[i]||0:0,workItemType:t,state:n.fields[e.CoreFieldRefNames.State]}})})})},n.prototype._queryWorkItems=function(n){var t=this,i=this._getHttpClient();return new Promise(function(r,u){i.getIterationWorkItems(t._getTeamContext(),n.id).then(r,u)}).then(function(n){var t=[];return n.workItemRelations.reduce(function(n,t){return t.source&&t.source.id&&n.push(t.source.id),t.target&&t.target.id&&n.push(t.target.id),n},t),a.unique(t)})},n.prototype._getHttpClient=function(){var n=o.TfsContext.getDefault(),t=new c.VssConnection(n.contextData);return t.getHttpClient(h.WorkHttpClient)},n.prototype._getTeamContext=function(){var n=w.getDefaultWebContext(),t=n.project.id;return{projectId:t,teamId:this._teamId,project:null,team:null}},n}();t.PlanningDataProvider=k});

define("Agile/Scripts/BacklogsHub/Planning/ActionsCreator/PlanningWorkItemEventSubscriber",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Diag","VSS/Events/Services","VSS/Utils/String","WorkItemTracking/Scripts/OM/WorkItemConstants"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.PlanningWorkItemEventSubscriber=void 0;var o=function(){function n(n,t,i,r,u,f){var o=this;this._workItemChanged=function(n,t){if(t)switch(t.change){case e.WorkItemChangeType.FieldChange:if(t.workItem&&t.workItem.id>0){var i=o._membershipEvaluatorBuilder();i.evaluate(t.workItem,function(n){n?o._handleWorkItemFieldChange(t):o._actionsCreator.workItemRemoved(t.workItem.id)})}break;case e.WorkItemChangeType.Deleted:o._actionsCreator.workItemRemoved(t.workItem.id)}};this._workItemDeletedHandler=function(n,t){o._actionsCreator.workItemRemoved(t.workItemId)};this._actionsCreator=n;this._workItemsManager=i;this._membershipEvaluatorBuilder=t;this._teamFieldRefName=r;this._effortFieldRefName=u;this._requirementWorkItemTypes=f}return n.prototype.initialize=function(){this._workItemsManager.attachWorkItemChanged(this._workItemChanged);u.getService().attachEvent(e.Actions.WORKITEM_DELETED,this._workItemDeletedHandler)},n.prototype.dispose=function(){this._workItemsManager.detachWorkItemChanged(this._workItemChanged);u.getService().detachEvent(e.Actions.WORKITEM_DELETED,this._workItemDeletedHandler);this._workItemsManager=null;this._actionsCreator=null},n.prototype._handleWorkItemFieldChange=function(n){var f=this._getFieldIds(n.workItem),t=f.effortFieldId,e=f.teamFieldId,r=n.changedFields,u;(r[i.CoreField.IterationPath]||e&&r[e]||t&&r[t]||r[i.CoreField.State])&&(u=this._getPlanningWorkItem(n.workItem,t),t&&r[t]&&isNaN(u.effort)||this._actionsCreator.workItemChanged(u))},n.prototype._getPlanningWorkItem=function(n,t){var u=function(t){return t===null||t===undefined?null:n.getFieldValue(t)};return{id:n.id,iterationPath:u(i.CoreField.IterationPath),effort:this._shouldTrackEffort(n.workItemType.name)?u(t):0,state:u(i.CoreField.State),workItemType:n.workItemType.name}},n.prototype._shouldTrackEffort=function(n){return this._requirementWorkItemTypes.some(function(t){return f.equals(t,n,!0)})},n.prototype._getFieldIds=function(n){return{effortFieldId:this._getFieldId(n,this._effortFieldRefName),teamFieldId:this._getFieldId(n,this._teamFieldRefName)}},n.prototype._getFieldId=function(n,t){var i=n.getField(t);return i?i.fieldDefinition.id:null},n}();t.PlanningWorkItemEventSubscriber=o});

define("Agile/Scripts/Common/Components/Card/Card",["require","exports","react","OfficeFabric/Utilities","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/Card/Card"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.Card=void 0;var u=function(n){var t=r.getNativeProps(n,r.divProperties);return i.createElement("div",__assign({},t,{className:r.css("card",n.className)}),n.children)};t.Card=u});

define("Agile/Scripts/BacklogsHub/Planning/Components/BacklogIterationCard",["require","exports","Agile/Scripts/Common/Components/Card/Card","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","react","OfficeFabric/Link","VSS/Utils/String","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/Planning/Components/BacklogIterationCard"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogIterationCard=void 0;var o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._onClick=function(n){var i=t.props.onClick;!i||n.ctrlKey||n.metaKey||(n.preventDefault(),i(n))},t}return __extends(t,n),t.prototype.render=function(){var n=this.props.team;return u.createElement(i.Card,{className:"backlog-iteration-card"},u.createElement("div",{className:"backlog-title"},u.createElement(f.Link,{href:this.props.backlogUrl,onClick:this._onClick},e.format(r.BacklogCardTitle,n.name))))},t}(u.PureComponent);t.BacklogIterationCard=o});

define("Agile/Scripts/Common/Components/SprintMarker/SprintMarkerHelper",["require","exports","Agile/Scripts/Models/Iteration","OfficeFabric/Utilities","Agile/Scripts/Resources/TFS.Resources.AgileControls"],function(n,t,i,r,u){function f(n){switch(n){case i.IterationTimeframe.Past:return{text:u.PastMarkerText,cssClass:r.css("sprint-marker",t.PAST_SPRINT_CLASS)};case i.IterationTimeframe.Current:return{text:u.CurrentMarkerText,cssClass:r.css("sprint-marker",t.CURRENT_SPRINT_CLASS)};case i.IterationTimeframe.Future:return{text:u.FutureMarkerText,cssClass:r.css("sprint-marker",t.FUTURE_SPRINT_CLASS)};default:throw new Error("Unknown Type");}}Object.defineProperty(t,"__esModule",{value:!0});t.mapToMarkerData=t.FUTURE_SPRINT_CLASS=t.CURRENT_SPRINT_CLASS=t.PAST_SPRINT_CLASS=void 0;t.PAST_SPRINT_CLASS="past-sprint";t.CURRENT_SPRINT_CLASS="current-sprint";t.FUTURE_SPRINT_CLASS="future-sprint";t.mapToMarkerData=f});

define("Agile/Scripts/Common/Components/SprintMarker/SprintMarker",["require","exports","Agile/Scripts/Models/Iteration","OfficeFabric/Utilities","react","Agile/Scripts/Common/Components/SprintMarker/SprintMarkerHelper","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/SprintMarker/SprintMarker"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.SprintMarker=void 0;var e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this.props,t=n.timeFrame,o=t===void 0?i.IterationTimeframe.Current:t,s=n.className,e=f.mapToMarkerData(o);return u.createElement("div",{className:r.css(e.cssClass,s)},e.text)},t}(u.PureComponent);t.SprintMarker=e});

define("Agile/Scripts/Common/Components/IterationCard/IterationCard",["require","exports","react","Agile/Scripts/Common/Components/Card/Card","Agile/Scripts/Common/Components/SprintMarker/SprintMarker","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","OfficeFabric/Button","OfficeFabric/ContextualMenu","OfficeFabric/Link","OfficeFabric/Spinner","VSSUI/Tooltip","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","VSS/Context","VSS/Utils/String","VSSUI/VssIcon","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/IterationCard/IterationCard"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){Object.defineProperty(t,"__esModule",{value:!0});t.IterationCard=void 0;var p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._openContextMenu=function(){r.setState({contextMenuVisible:!0})},r._closeContextMenu=function(){r.setState({contextMenuVisible:!1})},r._onIterationClicked=function(n){var t=r.props,u=t.iteration,i=t.onIterationClicked;!i||n.ctrlKey||n.metaKey||(n.preventDefault(),i(n,u))},r._resolveContextualMenuButton=function(n){r._contextMenuButton=n},r.state={contextMenuVisible:!1},r}return __extends(t,n),t.prototype.render=function(){return i.createElement(r.Card,{className:"iteration-card"},this._renderHeader(),this._renderWorkItemSummary(),this._renderContextMenuButton(),this._renderContextMenu())},t.prototype._renderContextMenuButton=function(){var n=this.props.contextMenuItems;if(n&&n.length>0)return i.createElement("div",{ref:this._resolveContextualMenuButton,className:"card-contextual-menu-button"},i.createElement(e.IconButton,{iconProps:{iconName:"More"},onClick:this._openContextMenu}))},t.prototype._renderContextMenu=function(){var n=this.state.contextMenuVisible;if(n)return i.createElement(o.ContextualMenu,{items:this.props.contextMenuItems,target:this._contextMenuButton,onDismiss:this._closeContextMenu})},t.prototype._renderHeader=function(){var n=this.props,c=n.effort,l=n.isCurrent,t=n.iteration,e=n.iterationDetailsLoading,a=n.teamDaysOffUTC,y=n.weekends,o=n.workItemCountByName,s=!1,h,r;if(!e)for(h in o)if(o[h]!==0){s=!0;break}return r=parseFloat((c*100).toFixed())/100,i.createElement("div",{className:"card-header-section"},i.createElement("div",{className:"card-title-section"},i.createElement("div",{className:"card-title"},this._renderIterationTitle()),l&&i.createElement(u.SprintMarker,{className:"card-marker"}),i.createElement("div",{className:"card-dates"},t.startDateUTC&&t.finishDateUTC&&"".concat(t.localeDisplayStartDate," - ").concat(t.localeDisplayFinishDate))),i.createElement("div",{className:"card-subtitle-section"},i.createElement("div",{className:"card-estimation"},s&&v.format(f.EffortLabel,r===0?"-":r)),i.createElement("div",{className:"card-working-days"},!e&&t.startDateUTC&&t.finishDateUTC&&v.format(f.IterationWorkingDays,t.getWorkingDays(y,a)))))},t.prototype._renderIterationTitle=function(){var n=this.props,r=n.iterationUrl,t=n.iteration,u=n.onIterationClicked;return u?i.createElement(c.TooltipHost,{directionalHint:1,content:t.iterationPath},i.createElement(s.Link,{href:r,onClick:this._onIterationClicked},t.name)):i.createElement("div",null,t.name)},t.prototype._renderWorkItemSummary=function(){var e=this,u=this.props,o=u.iterationDetailsLoading,s=u.summaryError,f=u.workItemCountByName,n,t,r;if(s)n=this._renderSummaryError();else if(o)n=i.createElement(h.Spinner,{className:"card-summary-loading"});else{t=[];for(r in f)f[r]&&t.push({workItemTypeName:r,count:f[r]});n=t.length>0?t.map(function(n){return e._renderWorkItemType(n.workItemTypeName,n.count)}):this._renderEmptySummary()}return i.createElement("div",{className:"card-summary"},n)},t.prototype._renderWorkItemType=function(n,t){var r=l.WorkItemTypeColorAndIconsProvider.getInstance().getColorAndIcon(a.getDefaultWebContext().project.name,n);return i.createElement("div",{key:n,className:"work-item-type-summary",tabIndex:0,"aria-label":n},i.createElement(c.TooltipHost,{content:n},i.createElement(y.VssIcon,{iconType:0,iconName:r.icon,styles:{root:{color:r.color}}}),i.createElement("b",null,"".concat(t))))},t.prototype._renderEmptySummary=function(){return i.createElement("div",{className:"empty-summary"},f.NoWorkScheduledYet)},t.prototype._renderSummaryError=function(){var n=this.props.summaryError;if(n)return i.createElement("div",{className:"card-summary-error"},i.createElement(y.VssIcon,{iconType:0,iconName:"StatusErrorFull"}),n.message)},t}(i.Component);t.IterationCard=p});

define("Agile/Scripts/BacklogsHub/Planning/Components/PlanningRow",["require","exports","react","Agile/Scripts/BacklogsHub/Planning/Components/BacklogIterationCard","Agile/Scripts/Common/Agile","Agile/Scripts/Common/Components/IterationCard/IterationCard","Agile/Scripts/Common/Utils","Presentation/Scripts/TFS/Components/SimpleDropZone","Presentation/Scripts/TFS/FeatureRef/BacklogConfiguration/Service","VSS/Utils/String","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/Planning/Components/PlanningRow"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.PlanningRow=void 0;var l=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._accept=function(n){var t=r.props,h=t.isBacklogIteration,c=t.getWorkItemDragInfo,i=c(n),u=i.areAllItemsOwned,f=i.selectedWorkItemTypes,o=new e.MoveToIterationHelper;return h?o.canMoveToBacklog(f,u,s.BacklogConfigurationService.getBacklogConfiguration().requirementBacklog.name):o.canMoveToIteration(f,u)},r._onDrop=function(n,t){var i=r.props,s=i.getWorkItemDragInfo,f=i.iteration,e=i.onWorkItemsDropped,l=i.isBacklogIteration,a=i.team,u,o;e&&(u=t.draggable,o=s(u).selectedWorkItemIds,l?e(o,f.iterationPath,h.format(c.BacklogCardTitle,a.name),u):e(o,f.iterationPath,f.name,u))},r.state={contextMenuVisible:!1},r}return __extends(t,n),t.prototype.render=function(){var n=this.props,e=n.isBacklogIteration,s=n.iteration,h=n.team,t=__assign({},this.props);return delete t.onWorkItemsDropped,delete t.isBacklogIteration,i.createElement(o.SimpleDropZone,{droppableOptions:{accept:this._accept,activeClass:"sprint-planning-row--active",drop:this._onDrop,scope:u.DragDropScopes.ProductBacklog,tolerance:"pointer",hoverClass:"sprint-planning-row--drag-hover"},className:"sprint-planning-row"},e?i.createElement(r.BacklogIterationCard,{iteration:s,onClick:this.props.onBacklogClicked,backlogUrl:this.props.backlogUrl,team:h}):i.createElement(f.IterationCard,__assign({},t)))},t}(i.Component);t.PlanningRow=l});

define("Agile/Scripts/BacklogsHub/Planning/Selectors/PlanningSelectors",["require","exports"],function(n,t){function i(n){return{backlogIteration:n.backlogIteration,currentIterationId:n.currentIterationId,isNewSprintCalloutVisible:n.isNewSprintCalloutVisible,iterations:n.iterations,iterationEfforts:n.iterationEfforts,iterationSummaryErrors:n.iterationSummaryErrors,iterationLoading:n.iterationLoading,iterationTeamDaysOffUTC:n.iterationTeamDaysOffUTC,weekends:n.weekends}}Object.defineProperty(t,"__esModule",{value:!0});t.getState=void 0;t.getState=i});

define("Agile/Scripts/BacklogsHub/Planning/Store/PlanningStore",["require","exports","VSS/Flux/Store","VSS/Utils/String"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.PlanningStore=void 0;var u=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._handleWorkItemRemoved=function(n){i._removeWorkItem(n)&&i.emitChanged()},i._handleWorkItemChanged=function(n){var r=n.id,t=i._removeWorkItem(r);t=i._addWorkItem(n)||t;t&&i.emitChanged()},i._handleToggleNewSprintCallout=function(n){i._isNewSprintCalloutVisible=n;i.emitChanged()},i._handleIterationsLoaded=function(n){i._backlogIteration=n.backlogIteration;i._currentIterationId=n.currentIterationId;i._iterations=n.iterations;i.emitChanged()},i._handleBeginLoadIterationEfforts=function(n){n&&(n.forEach(function(n){return i._iterationLoading[n]=!0}),i.emitChanged())},i._handleIterationEffortLoadFailed=function(n){n&&(delete i._iterationLoading[n.iterationId],i._iterationSummaryErrors[n.iterationId]=n.error,i.emitChanged())},i._handleIterationEffortLoadSucceeded=function(n){if(n){var t=n.iterationId;i._iterationEfforts[t]=n;delete i._iterationLoading[t];i.emitChanged()}},i._handleIterationTeamDaysOffLoadSucceeded=function(n){n&&(i._iterationTeamDaysOffUTC[n.iterationId]=n.teamDaysOffUTC,i.emitChanged())},i._handleIterationLoadCompleted=function(n){i._iterationLoading[n]&&(delete i._iterationLoading[n],i.emitChanged())},i._handleWeekendsLoaded=function(n){n&&(i._weekends=n,i.emitChanged())},i._handleResetData=function(){i._reset();i.emitChanged()},i._actions=t,i._registerActionHandlers(),i._reset(),i}return __extends(t,n),Object.defineProperty(t.prototype,"backlogIteration",{get:function(){return this._backlogIteration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentIterationId",{get:function(){return this._currentIterationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewSprintCalloutVisible",{get:function(){return this._isNewSprintCalloutVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iterations",{get:function(){return this._iterations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iterationEfforts",{get:function(){return this._iterationEfforts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iterationSummaryErrors",{get:function(){return this._iterationSummaryErrors},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iterationTeamDaysOffUTC",{get:function(){return this._iterationTeamDaysOffUTC},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iterationLoading",{get:function(){return this._iterationLoading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weekends",{get:function(){return this._weekends},enumerable:!1,configurable:!0}),t.prototype._registerActionHandlers=function(){this._actions.resetData.addListener(this._handleResetData);this._actions.iterationsLoaded.addListener(this._handleIterationsLoaded);this._actions.beginLoadIteration.addListener(this._handleBeginLoadIterationEfforts);this._actions.iterationEffortLoadFailed.addListener(this._handleIterationEffortLoadFailed);this._actions.iterationEffortLoadSucceeded.addListener(this._handleIterationEffortLoadSucceeded);this._actions.iterationTeamDaysOffLoadSucceeded.addListener(this._handleIterationTeamDaysOffLoadSucceeded);this._actions.iterationLoadComplete.addListener(this._handleIterationLoadCompleted);this._actions.toggleNewSprintCallout.addListener(this._handleToggleNewSprintCallout);this._actions.weekendsLoaded.addListener(this._handleWeekendsLoaded);this._actions.workItemRemoved.addListener(this._handleWorkItemRemoved);this._actions.workItemChanged.addListener(this._handleWorkItemChanged)},t.prototype._removeWorkItem=function(n){var t=this._findIterationByWorkItem(n),i;return t&&(i=t.workItemsById[n],i)?(t.totalEfforts-=i.effort,t.countByWorkItemType[i.workItemType]--,delete t.workItemsById[i.id],!0):!1},t.prototype._addWorkItem=function(n){var i=n.iterationPath,r=this._getIterationId(i),t=this._iterationEfforts[r];return t&&t.countByWorkItemType.hasOwnProperty(n.workItemType)?(t.totalEfforts+=n.effort,t.countByWorkItemType[n.workItemType]++,t.workItemsById[n.id]=n,!0):!1},t.prototype._findIterationByWorkItem=function(n){var i,t,r;for(i in this._iterationEfforts)if(t=this._iterationEfforts[i],r=t.workItemsById[n],r)return t;return null},t.prototype._getIterationId=function(n){for(var u,t=0,i=this._iterations;t<i.length;t++)if(u=i[t],r.equals(u.iterationPath,n,!0))return u.id;return null},t.prototype._reset=function(){this._backlogIteration=null;this._currentIterationId=null;this._isNewSprintCalloutVisible=!1;this._iterations=[];this._iterationEfforts={};this._iterationSummaryErrors={};this._iterationLoading={};this._iterationTeamDaysOffUTC={};this._weekends=[]},t}(i.Store);t.PlanningStore=u});

define("Agile/Scripts/Resources/TFS.Resources.SprintsHub",["require","exports"],function(require,exports){var e=exports;e.WorkDetails_Tooltip="Enable to view work by activity and assignee";e.Sprints="Sprints";e.GroupByPeople_Tooltip="View tasks based on assignee";e.AllTeamGroupHeader="All Team Sprints";e.TurnOff="Turn off {0}";e.WorkDetails_ZeroData_Text="on how to set capacity for team and team members";e.WorkDetails_ZeroData_Link="https://go.microsoft.com/fwlink/?linkid=2043831\u0026clcid=0x409";e.SprintBacklogPivot="Sprint backlog";e.NoWorkScheduled="You do not have any work scheduled yet";e.WorkDetails="Work details";e.MyTeamGroupHeader="My Team Sprints";e.TaskboardPivot="Taskboard";e.UnsavedChangesDialog_Message="You have unsaved changes.";e.TurnOn="Turn on {0}";e.WorkDetailsDescription="Drag and drop work items to balance work across your team.";e.CapacityPivot="Capacity";e.WorkDetails_ZeroData_LinkText="Read more";e.GroupBy="Group by";e.People="People";e.AllPivot="All";e.SearchNoResultsText="No Results";e.PreviousSprint="Previous";e.NextSprint="Next";e.CurrentSprint="Current";e.SearchTextPlaceholder="Search team sprints";e.BacklogAddItemButton_Disabled_NoWorkItemTypes="Your process has no work item types configured for this backlog level";e.SprintPicker_SearchPlaceholder="Filter sprints";e.BrowseAllSprints="View Sprint directory";e.NewSprint="New Sprint";e.NewSprint_AriaLabel="Add new sprint";e.SearchResultsLoading="Searching team sprints";e.ColumnConfigurationError_UseColumnOptions="Please fix the column configuration in Column Options.";e.ScheduleWork="Schedule work";e.Off="Off";e.PersonSelected="Person: {0}";e.AnalyticsPivot="Analytics";e.SprintPickerLearningBubbleText="Need to see a different sprint? Use the sprint picker right here.";e.AddUser="Add user";e.Planning_Tooltip="Enable to drag and drop work items into sprints";e.UnsavedChangesDialog_Title="Are you sure you want to change sprints?";e.BacklogAddItemButton_Disabled_Filter="You cannot add a work item when the backlog is filtered";e.RightPanelTitle="Side Pane";e.Off_Tooltip="Hide the side pane from view";e.GroupByParent_Tooltip="View tasks based on parent";e.Planning="Planning";e.CreateOrScheduleWork="{0} from your product backlog or create new work items.";e.ShowParents="Show parents";e.ServerNoResponse="The server did not return any response";e.LoadingSprints="Loading team sprints";e.FavoriteGroupHeader="Favorites";e.SprintHub_AllPivot="All";e.BacklogPivot="Backlog";e.PlanSprint="Plan Sprint";e.ColumnOptionsLearningBubbleText="Need to customize columns? Use the column options right here.";e.MinePivot="Mine";e.SprintPicker_NoSprintsAvailable="No sprints available.";});

define("Agile/Scripts/Resources/TFS.Resources.SprintsHub.SprintEditor",["require","exports"],function(require,exports){var e=exports;e.CancelButtonText="Cancel";e.NoTeamBacklogError="The selected team does not have a backlog iteration configured. Please configure one in team settings";e.Sprints="Sprints";e.NoCreateNodePermission="TF50309: You do not have sufficient permissions to create a new iteration under the location \u0027insert location\u0027. The \u0027Create child nodes\u0027 permission is required.";e.EndDateFieldLabel="End";e.SelectedIterationUnsetWorkingDaysText="There are no dates for this sprint";e.ParentIterationFieldTitle="Location";e.NameInvalidCharactersErrorMessage="Name cannot contain any of the following characters: \\, /, $, ?, *, :, \", \u0026, \u003c, \u003e, #, %, |, +";e.NameAlreadyExistsErrorMessage="A node with this name already exists";e.SelectIterationToggleText="Select existing iteration";e.CreateIterationToggleText="Create new iteration";e.NoManagableTeams="You do not have sufficient permissions to configure a sprint. You must be either a team or project administrator to start a new sprint for a team.";e.IterationDoesNotExistErrorMessage="This path does not exist";e.SelectIterationFieldTitle="Iteration";e.SelectedIterationWorkingDaysText="There are {0} in this sprint";e.NameFieldLabel="Name";e.SelectIterationExtraInfoText="Your sprint name and duration are defined by the iteration path field. you can select an existing iteration or add a new one to the project.";e.IterationAlreadySelectedErrorMessage="This iteration already belongs to an existing sprint";e.CouldNotLoadTeamIterations="Could not load iterations for the selected team";e.SelectedNodeNotDescendantError="The selected node is not a descendant of the configured backlog iteration. Please select another node";e.RootIterationSelectedMessage="This iteration cannot be used to create a sprint";e.EditSprint="Edit Sprint";e.StartDateFieldLabel="Start";e.RequiredErrorMessage="This field is required";e.CouldNotLoadProjectIterations="Could not load project iterations";e.LocationFieldLabel="Location";e.NameTooLongErrorMessage="Name cannot be longer than {0} characters";e.DialogMessage="No future sprints found. Create a new sprint";e.CreateButtonText="Create";e.NameInvalidNameErrorMessage="Name is invalid. Please specify another name";e.WorkingDaysText="{0} working days";e.TeamHeaderTitle="Team";e.CouldNotLoadTeamSettings="Could not load settings for the selected team";e.TeamExtraInfoText="These are the teams you have \u0027manage\u0027 permissions for as a team or project administrator";e.Save="Save";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Agile/Scripts/SprintsHub/SprintEditor/ActionsCreator/SprintEditorActions",["require","exports","Agile/Scripts/Common/ActionsHub","VSS/Flux/Diag"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorActions=void 0;var u=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.initialized=t.createAction(),t.initializeFailed=t.createAction(),t.fetchProjectIterationsFailed=t.createAction(),t.fetchProjectIterationsSucceeded=t.createAction(),t.setEditingIteration=t.createAction(),t.fetchTeams=t.createAction(),t.fetchTeamSettings=t.createAction(),t.fetchTeamSettingsFailed=t.createAction(),t.beginFetchTeamIterationPaths=t.createAction(),t.fetchTeamIterationPathsFailed=t.createAction(),t.fetchTeamIterationPathsSucceeded=t.createAction(),t.changeSelectedTeam=t.createAction(),t.beginCreateNewSprint=t.createAction(),t.createNewSprintFailed=t.createAction(),t.createNewSprintSucceeded=t.createAction(),t.clearPageMessage=t.createAction(),t}return __extends(t,n),__decorate([r.registerDiagActions],t)}(i.ActionsHub);t.SprintEditorActions=u});

define("Agile/Scripts/SprintsHub/SprintEditor/ActionsCreator/SprintEditorDataProvider",["require","exports","VSS/Service","TFS/Work/RestClient","TFS/WorkItemTracking/RestClient","TFS/WorkItemTracking/Contracts","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/TFS.WorkItemTracking","VSSPreview/Utilities/PromiseUtils","WorkItemTracking/Scripts/Utils/NodeHelpers"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorDataProvider=void 0;var l=function(){function n(){}return n.prototype.getRootIterationNodeForProject=function(){var n=this,t=e.TfsContext.getDefault(),i=o.ProjectCollection.getConnection(t).getService(s.WorkItemStore);return new Promise(function(r,u){i.beginGetProject(t.navigation.project,function(t){n._nodeManager=t.nodesCacheManager;n._nodeManager.beginGetNodes().then(function(){var t=n._nodeManager.getIterationNode(!0);r(t)},u)},u)})},n.prototype.getTeamSettings=function(n){var t=this._getTeamContext(n);return h.toNativePromise(this._getWorkHttpClient().getTeamSettings(t).then(function(n){if(n)return n;throw new Error("Error parsing return result");}))},n.prototype.getIterationPathsForTeam=function(t){if(this._isNodesCacheAvailable()){var i=this._getTeamContext(t);return h.toNativePromise(this._getWorkHttpClient().getTeamIterations(i).then(function(t){return t.map(function(t){return t.path.split("/").join(n.ITERATION_SEPARATOR)})}))}return Promise.reject(null)},n.prototype.tryGetNextSuggestedIterationPath=function(n){var i,t;if(!n||n.length===0||(i=n[n.length-1],t=this._getNodeManager().findIterationNodeByPath(i),t===null||t.parent===null))return"";var f=this._getNodeManager().findNodeById(t.parent.id),r=f.children,u=r.map(function(n){return n.guid}).indexOf(t.guid);return u>=0&&u<r.length-1?this._replaceLeafPath(i,r[u+1].name):""},n.prototype.createAndAddIterationForTeam=function(n,t,i,r,u){var f=this;return this._createNewIterationInternal(n,t,i,r,u).then(function(t){return f._getNodeManager().refreshCache().then(function(){return f._selectIterationInternal(n,null,t.identifier)})})},n.prototype.editIteration=function(n,t,i,r){var u=this,e=this._getPatchNode(t,i,r),o=this._getCurrentProjectId(),s=c.NodeHelpers.getRelativePath(c.NodeHelpers.getPath(n,1));return h.toNativePromise(this._getWorkItemTrackingHttpClient().updateClassificationNode(e,o,f.TreeStructureGroup.Iterations,s)).then(function(n){return u._getNodeManager().refreshCache().then(function(){return n})})},n.prototype.selectIterationForTeam=function(n,t){var i=this;return this._isNodesCacheAvailable()?this._selectIterationInternal(n,t):this.getRootIterationNodeForProject().then(function(){return i._selectIterationInternal(n,t)})},n.prototype._getNodeManager=function(){return this._nodeManager},n.prototype._isNodesCacheAvailable=function(){return!!this._nodeManager&&this._nodeManager.isNodesCacheAvailable()},n.prototype._selectIterationInternal=function(n,t,i){var r=i,u,f,e;if(!r){if(u=this._nodeManager.findIterationNodeByPath(t),!u)return Promise.reject(null);r=u.guid}return f=this._getTeamContext(n),e={id:r.toString()},h.toNativePromise(this._getWorkHttpClient().postTeamIteration(e,f))},n.prototype._createNewIterationInternal=function(n,t,i,r,u){var e=this._getPatchNode(t,r,u),o=this._getCurrentProjectId();return h.toNativePromise(this._getWorkItemTrackingHttpClient().createOrUpdateClassificationNode(e,o,f.TreeStructureGroup.Iterations,c.NodeHelpers.getRelativePath(i)))},n.prototype._getWorkHttpClient=function(){if(!this._workHttpClient){var n=new i.VssConnection(e.TfsContext.getDefault().contextData);this._workHttpClient=n.getHttpClient(r.WorkHttpClient4_1)}return this._workHttpClient},n.prototype._getWorkItemTrackingHttpClient=function(){if(!this._workItemTrackingClient){var n=new i.VssConnection(e.TfsContext.getDefault().contextData);this._workItemTrackingClient=n.getHttpClient(u.WorkItemTrackingHttpClient4_1)}return this._workItemTrackingClient},n.prototype._getTeamContext=function(n){return{projectId:this._getCurrentProjectId(),teamId:n}},n.prototype._getCurrentProjectId=function(){var n=e.TfsContext.getDefault();return n&&n.contextData&&n.contextData.project?n.contextData.project.id:""},n.prototype._replaceLeafPath=function(t,i){var r=t.split(n.ITERATION_SEPARATOR);return r[r.length-1]=i,r.join(n.ITERATION_SEPARATOR)},n.prototype._getPatchNode=function(n,t,i){return{name:n,attributes:{startDate:new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),finishDate:new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate()))}}},n.ITERATION_SEPARATOR="\\",n}();t.SprintEditorDataProvider=l});

define("Agile/Scripts/SprintsHub/SprintEditor/SprintEditorTelemetryConstants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorUsageTelemetryConstants=void 0;var i;(function(n){n.SPRINTEDITOR_NO_MANAGEABLE_TEAMS="SprintEditor_No_ManageableTeams";n.SPRINTEDITOR_TOGGLE="SprintEditor_Toggle";n.SPRINTEDITOR_CANCELCLICKED="SprintEditor_CancelClicked";n.SPRINTEDITOR_CREATECLICKED="SprintEditor_CreateClicked";n.SPRINTEDITOR_HITPERMISSIONERROR="SprintEditor_HitPermissionError";n.SPRINTEDITOR_HITDUPLICATENAMEERROR="SprintEditor_HitDuplicateNameError";n.SPRINTEDITOR_SELECTEXISITING="select";n.SPRINTEDITOR_CREATENEW="create"})(i=t.SprintEditorUsageTelemetryConstants||(t.SprintEditorUsageTelemetryConstants={}))});

define("Agile/Scripts/SprintsHub/SprintEditor/ActionsCreator/SprintEditorActionsCreator",["require","exports","Agile/Scripts/Common/HubTelemetryHelper","Agile/Scripts/Models/Iteration","Agile/Scripts/Sources/TeamSource","Agile/Scripts/SprintsHub/SprintEditor/ActionsCreator/SprintEditorDataProvider","Agile/Scripts/SprintsHub/SprintEditor/SprintEditorTelemetryConstants","Presentation/Scripts/TFS/TFS.WebSettingsService","VSS/Context","VSS/Diag","VSS/Error","VSS/Service","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorActionsCreator=void 0;var v="Agile/SprintsHub/NewSprintTeamMru",y=function(){function n(n,t,i){t===void 0&&(t=new f.SprintEditorDataProvider);i===void 0&&(i=new u.TeamSource);this._actions=n;this._dataProvider=t;this._teamSource=i}return n.prototype.initialize=function(n,t){var r=this,u,f;return n?(this._actions.fetchTeams.invoke([n]),u=Promise.resolve(n)):(f=s.getDefaultWebContext().project.id,u=this._teamSource.fetchTeamsForProject(f).then(function(n){var t,u;return(n=n?n.sort(function(n,t){return a.ignoreCaseComparer(n.name,t.name)}):[],n.length===0&&i.SprintsHubTelemetryHelper.publishTelemetryValue(e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_NO_MANAGEABLE_TEAMS,"noManageableTeams",!0),r._actions.fetchTeams.invoke(n),n.length>0)?(t=r._getMRUTeam(),t?(u=n.filter(function(n){return n.id===t}),u.length>0?u[0]:n[0]):n[0]):undefined})),this.getProjectIterations().then(function(){return t&&r._actions.setEditingIteration.invoke(t),u}).then(function(n){if(n)return r.changeSelectedTeam(n.id)}).then(function(){r._actions.initialized.invoke(null)}).catch(function(n){n&&c.publishErrorToTelemetry(n);r._actions.initializeFailed.invoke(n)})},n.prototype.getProjectIterations=function(){var n=this;return this._dataProvider.getRootIterationNodeForProject().then(function(t){n._actions.fetchProjectIterationsSucceeded.invoke(t)},function(t){t&&c.publishErrorToTelemetry(t);n._actions.fetchProjectIterationsFailed.invoke(t)})},n.prototype.changeSelectedTeam=function(n){return this._saveMRUTeam(n),this._actions.changeSelectedTeam.invoke(n),Promise.all([this.fetchTeamIterationPaths(n),this.fetchTeamSettings(n)])},n.prototype.fetchTeamSettings=function(n){var t=this;return this._dataProvider.getTeamSettings(n).then(function(n){t._actions.fetchTeamSettings.invoke(n)},function(n){n&&c.publishErrorToTelemetry(n);t._actions.fetchTeamSettingsFailed.invoke(n)})},n.prototype.fetchTeamIterationPaths=function(n){var t=this;return this._actions.beginFetchTeamIterationPaths.invoke(null),this._dataProvider.getIterationPathsForTeam(n).then(function(n){var i=t._dataProvider.tryGetNextSuggestedIterationPath(n);t._actions.fetchTeamIterationPathsSucceeded.invoke({teamIterationPaths:n,nextSuggestedIterationPath:i})},function(n){n&&c.publishErrorToTelemetry(n);t._actions.fetchTeamIterationPathsFailed.invoke(n)})},n.prototype.createAndSubscribeIteration=function(n,t,u,f,o,s){var c=this;return this._actions.beginCreateNewSprint.invoke(null),i.SprintsHubTelemetryHelper.publishTelemetry(e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_CREATECLICKED,{teamId:n,choice:e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_CREATENEW},!0),this._dataProvider.createAndAddIterationForTeam(n,u,s,f,o).then(function(n){return c._actions.createNewSprintSucceeded.invoke(null),r.IterationBuilder.fromTeamSettingsIteration(n)},function(n){return c._handleCreateIterationError(n,s),c._actions.createNewSprintFailed.invoke(n),null})},n.prototype.editIteration=function(n,t,u,f){var o=this;return this._actions.beginCreateNewSprint.invoke(null),i.SprintsHubTelemetryHelper.publishTelemetry(e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_CREATECLICKED,{iterationId:n.guid,choice:e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_CREATENEW},!0),this._dataProvider.editIteration(n,t,u,f).then(function(n){return o._actions.createNewSprintSucceeded.invoke(null),r.IterationBuilder.fromWorkItemClassificationNode(n)},function(n){return o._handleCreateIterationError(n),o._actions.createNewSprintFailed.invoke(n),null})},n.prototype.subscribeToIteration=function(n,t,u){var f=this;return this._actions.beginCreateNewSprint.invoke(null),i.SprintsHubTelemetryHelper.publishTelemetry(e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_CREATECLICKED,{teamId:n,choice:e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_SELECTEXISITING},!0),this._dataProvider.selectIterationForTeam(n,u).then(function(n){return f._actions.createNewSprintSucceeded.invoke(null),r.IterationBuilder.fromTeamSettingsIteration(n)},function(n){return n&&c.publishErrorToTelemetry(n),f._actions.createNewSprintFailed.invoke(n),null})},n.prototype.clearPageMessage=function(n){this._actions.clearPageMessage.invoke(n)},n.prototype._getMRUTeam=function(){var n=l.getService(o.WebSettingsService);return n.readLocalSetting(v,o.WebSettingsScope.ProjectAndUser)},n.prototype._saveMRUTeam=function(n){var t=l.getService(o.WebSettingsService);t.writeLocalSetting(v,n,o.WebSettingsScope.ProjectAndUser)},n.prototype._handleCreateIterationError=function(n,t){if(n)n&&n.serverError&&a.equals(n.serverError.typeKey,"UnauthorizedAccessException",!0)?i.SprintsHubTelemetryHelper.publishTelemetry(e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_HITPERMISSIONERROR,{location:t}):n&&n.serverError&&a.equals(n.serverError.typeKey,"ClassificationNodeDuplicateNameException",!0)?i.SprintsHubTelemetryHelper.publishTelemetry(e.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_HITDUPLICATENAMEERROR,{location:t}):c.publishErrorToTelemetry(n)},n}();t.SprintEditorActionsCreator=y});

define("Agile/Scripts/Common/NodeUtilities",["require","exports","VSS/Controls/TreeView"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.NodeUtilities=void 0;var r;(function(n){function r(n,t){for(var i=t.parent;i;){if(n.guid===i.guid)break;i=i.parent}return!!i}function u(n){if(n){var r=i.TreeNode.create(n.name);return t(n,r),r}return null}function t(n,r){var u,o,f,e;if(n.children)for(u=0,o=n.children;u<o.length;u++)f=o[u],f&&(e=i.TreeNode.create(f.name),r.children.push(e),e.parent=r,t(f,e))}n.isDescendant=r;n.computeDisplayHierarchy=u})(r=t.NodeUtilities||(t.NodeUtilities={}))});

define("Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorFormValidators",["require","exports","Agile/Scripts/Common/NodeUtilities","Agile/Scripts/Resources/TFS.Resources.SprintsHub.SprintEditor","VSS/Utils/String"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorFormValidators=t.MAX_NAME_LENGTH=t.ILLEGAL_REGEX=t.VALID_NAME_REGEX=void 0;t.VALID_NAME_REGEX=/^[^\\\/$?*:"&<>#%|\+]*$/;t.ILLEGAL_REGEX=/^(prn|com1|com2|com3|com4|com5|com6|com7|com8|com9|com10|lpt1|lpt2|lpt3|lpt4|lpt5|lpt6|lpt7|lpt8|lpt9|nul|con|aux|\.|\.\.)$/;t.MAX_NAME_LENGTH=255;var f;(function(n){function f(n,i){var f,e,o;if(!n)return{isValid:!1,errorMessage:r.RequiredErrorMessage};if(n.length>t.MAX_NAME_LENGTH)return{isValid:!1,errorMessage:u.format(r.NameTooLongErrorMessage,t.MAX_NAME_LENGTH.toString())};if(!t.VALID_NAME_REGEX.test(n))return{isValid:!1,errorMessage:r.NameInvalidCharactersErrorMessage};if(t.ILLEGAL_REGEX.test(n))return{isValid:!1,errorMessage:r.NameInvalidNameErrorMessage};if(i&&i.children)for(f=0,e=i.children;f<e.length;f++)if(o=e[f],u.equals(o.name,n,!0))return{isValid:!1,errorMessage:r.NameAlreadyExistsErrorMessage};return{isValid:!0}}function e(n){return n?{isValid:!0}:{isValid:!1}}function o(n,t){return t?n&&n.getTime()>t.getTime()?{isValid:!1}:{isValid:!0}:{isValid:!1}}function s(n,t,f){return n?t?f&&!u.equals(f.guid,t.guid,!0)&&!i.NodeUtilities.isDescendant(f,t)?{isValid:!1,errorMessage:r.SelectedNodeNotDescendantError}:{isValid:!0}:{isValid:!1,errorMessage:r.IterationDoesNotExistErrorMessage}:{isValid:!1,errorMessage:r.RequiredErrorMessage}}function h(n,t,f,e,o){return n?t?t===f?{isValid:!1,errorMessage:r.RootIterationSelectedMessage}:o&&!i.NodeUtilities.isDescendant(o,t)?{isValid:!1,errorMessage:r.SelectedNodeNotDescendantError}:e.some(function(t){return u.equals(t,n,!0)})?{isValid:!1,errorMessage:r.IterationAlreadySelectedErrorMessage}:{isValid:!0}:{isValid:!1,errorMessage:r.IterationDoesNotExistErrorMessage}:{isValid:!1,errorMessage:r.RequiredErrorMessage}}n.validateName=f;n.validateStartDate=e;n.validateEndDate=o;n.validateParentIterationValue=s;n.validateSelectedIteration=h})(f=t.SprintEditorFormValidators||(t.SprintEditorFormValidators={}))});

define("Presentation/Scripts/TFS/Components/InfoIcon",["require","exports","OfficeFabric/Callout","OfficeFabric/Utilities","react","VSSUI/VssIcon","VSS/Utils/UI","VSS/LoaderPlugins/Css!Presentation/Components/InfoIcon"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.InfoIcon=void 0;var o=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.state={calloutOpened:!1},i}return __extends(t,n),t.prototype.render=function(){var o=this,n=this.props,t=n.directionalHint,s=t===void 0?1:t,e=n.iconProps,h=n.infoText,l=n.onRenderContent,c=this.state.calloutOpened;return u.createElement("div",__assign({"aria-label":h},r.getNativeProps(this.props,r.divProperties),{ref:function(n){return o._calloutTarget=n},onClick:this._onClick,onKeyDown:this._onKeyDown,role:"button",tabIndex:0}),u.createElement(f.VssIcon,__assign({},e,{className:r.css(e.className,"vss-info-icon")})),c&&u.createElement(i.Callout,{target:this._calloutTarget,directionalHint:s,className:"vss-info-callout",onDismiss:this._onDismiss},this._renderCalloutContent()))},t.prototype._renderCalloutContent=function(){var n=this.props,i=n.infoText,t=n.onRenderContent;return t?t():u.createElement("div",{className:"vss-info-text-container"},i)},t.prototype._onClick=function(){this.setState({calloutOpened:!0})},t.prototype._onKeyDown=function(n){(n.keyCode===e.KeyCode.ENTER||n.keyCode===e.KeyCode.SPACE)&&this.setState({calloutOpened:!0})},t.prototype._onDismiss=function(){this.setState({calloutOpened:!1})},__decorate([r.autobind],t.prototype,"_onClick",null),__decorate([r.autobind],t.prototype,"_onKeyDown",null),__decorate([r.autobind],t.prototype,"_onDismiss",null),t}(u.PureComponent);t.InfoIcon=o});

define("VSS/Utils/Tree",["require","exports"],function(n,t){function i(n,t,i){for(var f=[{node:n,parent:null,level:0}],u;f.length>0;){var e=f.pop(),o=e.node,h=e.parent,s=e.level,r=t(o);if(i(o,h,s,r.length)!==!1&&r)for(u=r.length-1;u>=0;--u)f.push({node:r[u],parent:o,level:s+1})}}function r(n,t,r,u,f){for(var e={},v={},y=[n],o,s,b,h,c,l,k,a,p,w;y.length>0;)if(o=y.pop(),s=r(o),!f||f[s]){if(t(o))for(b=!!e[s],e[s]={isPredicateMatch:!0,hasMatchingDescendant:!1},b||i(o,u,function(n){e[r(n)]||(e[r(n)]={isPredicateMatch:!1,hasMatchingDescendant:!1})}),h=v[s];!!h;){if(c=r(h),l=e[c],l){if(l.hasMatchingDescendant)break;l.hasMatchingDescendant=!0}else e[c]={isPredicateMatch:!1,hasMatchingDescendant:!0};h=v[c]}for(k=u(o)||[],a=0,p=k;a<p.length;a++)w=p[a],v[r(w)]=o,y.push(w)}return e}Object.defineProperty(t,"__esModule",{value:!0});t.filterTree=t.traversePreOrder=void 0;t.traversePreOrder=i;t.filterTree=r});

define("VSSPreview/Controls/PartialHighlightComponent",["require","exports","react"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.PartialHighlightComponent=void 0;var r=function(n){var t=n.text,u=n.highlight,r;return u&&(r=t.toLocaleUpperCase().indexOf(u.toLocaleUpperCase()),r>=0)?i.createElement("span",null,t.substr(0,r),i.createElement("b",null,t.substr(r,u.length)),t.substr(r+u.length)):i.createElement("span",null,t)};t.PartialHighlightComponent=r});

define("VSSPreview/Resources/VSS.Resources.Preview",["require","exports"],function(require,exports){var e=exports;e.NoResultsAreAvailableText="No results are available.";e.MoreTabsMenu="More tabs menu";e.MoreIdentities="{0} more users or groups";e.Adding="Adding...";e.EmailNotValidMessage="Not a valid email: emails must follow the pattern \u0027someone@example.com\u0027";e.InheritanceMenuText="Inheritance";e.SearchDefaultWaterMark="Search...";e.RemoveUserText="Remove user";e.AddUserTextboxLabel="User email address:";e.DatePicker_GoToPreviousYear="Go to previous year";e.ResetButtonTitle="Reset changes";e.AccessInherited="Inherited";e.DatePicker_GoToPreviousMonth="Go to previous month";e.SaveButtonText="Save changes";e.MobileTreeList_Expand="Expand {0}";e.DatePicker_PopupAriaLabel="Calendar";e.AccessColumn="Access";e.DatePicker_Placeholder="Select a date...";e.AssignedAccessString="Assigned";e.RemoveUserButtonText="Remove user from {0}";e.DatePicker_GoToNextMonth="Go to next month";e.MultiRowControl_RemoveButton="Delete Row";e.DatePicker_OutOfBoundsMessage="Selected date is not within the valid range";e.CopyButton_CopiedAnnouncement="Copied";e.InheritanceOnText="On";e.CannotEditRolesMessage="You do not have permission to edit roles for this resource.";e.AddUsersDialogTitle="Add user";e.ClassificationPickerMRUHeader="Suggestions";e.MultiRowControl_AddButtonText="Add";e.ResetButtonText="Reset";e.AddUserInputField="User or group";e.AddRoleInputField="Role";e.UserNotFoundMessage="Sorry, we couldn\u0027t find that user. Please try a different email address.";e.AddButtonTitle="Add user";e.CloseButtonLabelText="Close";e.AddUserWatermarkText="Search by email...";e.RoleColumn="Role";e.MobileTreeList_Collapse="Collapse {0}";e.UserColumn="User";e.ListRolePermissionsLabel="{0} role defines the following access:";e.RoleAssignmentGridLabel="Role Assignment Table";e.MultiRowControl_RemoveAllText="Remove All";e.SearchResultsAvailableMessage="{0} results are available. Use up/down arrow to move through results.";e.MultiRowControl_Tooltip="Remove Row";e.DatePicker_RequiredMessage="A valid date is required.";e.AddUserInstructions="To add a user, search for their email address";e.HistogramBarEmptyText="Histogram bar data is empty.";e.TreePickerItemAriaLabel="{0}, from {1} to {2}";e.RolesGridLabel="Roles";e.DatePicker_GoToNextYear="Go to next year";e.DatePicker_InvalidDateMessage="Invalid date value specified.";e.AccessAssigned="Assigned";e.CannotAddIdentity="Sorry, we couldn\u0027t add the Identity. Please try a different Identity.";e.InheritanceOffText="Off";e.DatePicker_GoToToday="Go to today";e.AddUserSuccessfulMessage="User {0} was successfully added to {1} as a {2}!";e.DefaultFileDropText="Drop files here";e.AddButtonText="Add";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSSPreview/Controls/TreeList",["require","exports","react","OfficeFabric/Button","OfficeFabric/List","OfficeFabric/Utilities","VSS/Utils/String","VSSPreview/Resources/VSS.Resources.Preview","VSS/LoaderPlugins/Css!VSSPreview/Controls/TreeList"],function(n,t,i,r,u,f,e,o){var h,s;Object.defineProperty(t,"__esModule",{value:!0});t.TreeListItem=t.TreeList=t.DEFAULT_INDENT_WIDTH=void 0;t.DEFAULT_INDENT_WIDTH=10;h=function(n){function r(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.state=r._getState(t),r}return __extends(r,n),r.prototype.scrollToIndex=function(n,t){this._list&&this._list.scrollToIndex(n,this.props.itemHeight?this._getItemHeight:undefined,t)},r.prototype.scrollToKey=function(n,t){if(this._list){var i=this._visibleKeyToIndexMapping&&this._visibleKeyToIndexMapping[n];i!=null&&this.scrollToIndex(i,t)}},r.prototype.componentWillReceiveProps=function(n){this.props&&this.props.items!==n.items&&(this.setState(this._getState(n)),this._visibleKeyToIndexMapping=null)},r.prototype._getState=function(n){var u={},f,o,t,r,l,e,h,a;if(n.items){var c={},v={item:{key:"ROOT_LEVEL_PARENT"},numberOfChildrenEncountered:0},i={};for(f=0,o=n.items;f<o.length;f++)t=o[f],c[t.key]={item:t,numberOfChildrenEncountered:0},r=c[t.parentKey]||v,i[r.item.key]||(i[r.item.key]=[]),i[r.item.key].push(t),u[t.key]={expanded:t.expanded,numberOfSiblings:0,positionAmongSiblings:t.disabled?undefined:++r.numberOfChildrenEncountered};for(l in i){var s=i[l],y=s[s.length-1],p=u[y.key];for(e=0,h=s;e<h.length;e++)a=h[e],u[a.key].numberOfSiblings=p.positionAmongSiblings}}return{itemInformation:u}},r.prototype.render=function(){var n=this.props,r=n.id,f=n.ariaLabel,t=undefined;return this.props.itemHeight&&(t=this._computePageHeight),i.createElement(u.List,{role:"tree","aria-label":f,id:r,className:this.props.className,items:this._getItems(),getItemCountForPage:this._getItemsPerPage,getPageHeight:t,onRenderCell:this._renderItem,ref:this._resolveList})},r.prototype.componentDidUpdate=function(n){n.selectedKey!==this.props.selectedKey&&this.scrollToKey(this.props.selectedKey)},r.prototype._resolveList=function(n){this._list=n},r.prototype._getItems=function(){var r=this,n={},t=this.props.items&&this.props.items.filter(function(t){if(!t.parentKey)return!0;var u=r._isExpanded(t.parentKey),f=n[t.parentKey]===!0,i=f||!u;return i&&(n[t.key]=!0),!i})||[],i;return this._visibleKeyToIndexMapping||(i=t.reduce(function(n,t,i){return n[t.key]=i,n},{}),this._visibleKeyToIndexMapping=i),this._visibleItems=t,this._visibleItems},r.prototype._getItemsPerPage=function(){return this.props.visibleItemCount||10},r.prototype._getItemHeight=function(n){var t=this.props.itemHeight,i;if(t!=null)return typeof t=="function"?(i=this._visibleItems[n],t(i)):t},r.prototype._computePageHeight=function(n){for(var r=this._getItemsPerPage(),u=Math.min(n+r,this._visibleItems.length),i=0,t=n;t<u;t++)i+=this._getItemHeight(t);return i},r.prototype._isExpanded=function(n){return this.state.itemInformation[n]&&this.state.itemInformation[n].expanded},r.prototype._renderItem=function(n){var r=this.props,h=r.id,c=r.selectedKey,l=r.selectedValue,p=r.focusSelected,a=r.getItemAriaLabel,v=r.itemIndentWidth,w=v===void 0?t.DEFAULT_INDENT_WIDTH:v,o=n.key,b=n.value,u=this.state.itemInformation[o],f=!1,k,y;return c?f=c===o:l&&(f=e.equals(l,b,!0)),k=n.childrenCount>0,y=this._getItemClassName(n),i.createElement(s,{ariaLabel:a?a(n):n.label,autofocus:f&&p,className:y,expanded:u.expanded,key:n.key,id:h&&"".concat(h,"-").concat(o),item:n,itemIndentWidth:w,numberOfSiblings:u.positionAmongSiblings?u.numberOfSiblings:undefined,positionAmongSiblings:u.positionAmongSiblings?u.positionAmongSiblings:undefined,onClick:this._selectItem,onExpandCollapse:this._expandCollapseItem,onRenderItemContent:this.props.onRenderItemContent,selected:f})},r.prototype._selectItem=function(n){var t=this.props.onItemSelect;t&&t(n)},r.prototype._expandCollapseItem=function(n){var t,i=this.props,e=i.controlExpansionState,u=i.onItemCollapsed,f=i.onItemExpanded,r=n.key,o=this.state.itemInformation[r];e?this._isExpanded(r)?u&&u(n):f&&f(n):(this.setState({itemInformation:__assign(__assign({},this.state.itemInformation),(t={},t[n.key]=__assign(__assign({},o),{expanded:!this._isExpanded(r)}),t))}),this._visibleKeyToIndexMapping=null)},r.prototype._getItemClassName=function(n){var t=this.props.itemWrapperClassName;return typeof t=="function"?t(n):t},__decorate([f.autobind],r.prototype,"_resolveList",null),__decorate([f.autobind],r.prototype,"_getItemsPerPage",null),__decorate([f.autobind],r.prototype,"_getItemHeight",null),__decorate([f.autobind],r.prototype,"_computePageHeight",null),__decorate([f.autobind],r.prototype,"_renderItem",null),__decorate([f.autobind],r.prototype,"_selectItem",null),__decorate([f.autobind],r.prototype,"_expandCollapseItem",null),r}(i.Component);t.TreeList=h;s=function(n){function u(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(u,n),u.prototype.render=function(){var n=this.props,l=n.ariaLabel,w=n.autofocus,b=n.className,h=n.expanded,k=n.id,u=n.item,y=n.itemIndentWidth,p=y===void 0?t.DEFAULT_INDENT_WIDTH:y,d=n.numberOfSiblings,g=n.positionAmongSiblings,a=n.selected,rt=n.onClick,ut=n.onExpandCollapse,nt=u.childrenCount,s=u.disabled,tt=u.label,v=u.level,c=nt>0,it="".concat(16+v*p,"px"),ft={minWidth:it};return i.createElement("div",{id:k,className:f.css("tree-list-item",b,{selected:a,disabled:s}),role:s?undefined:"treeitem","aria-setsize":d,"aria-posinset":g,"aria-disabled":s,"aria-selected":a,"aria-level":v+1,"aria-expanded":c?h:undefined,"aria-label":l,onClick:this._onItemClicked},i.createElement(r.IconButton,{className:f.css("tree-list-expand",{"tree-list-expand--collapsed":!h,"tree-list-expand--hidden":!c}),iconProps:{iconName:"ChevronDown"},onClick:this._onChevronClicked,disabled:!c||s,"aria-label":e.format(h?o.MobileTreeList_Collapse:o.MobileTreeList_Expand,l),style:{marginLeft:"".concat(v*p,"px")}}),i.createElement(r.BaseButton,{autoFocus:w,className:"tree-list-item-select","aria-label":l,"aria-expanded":c?h:undefined,"aria-selected":a,disabled:s,onClick:this._onItemClicked},this.props.onRenderItemContent&&this.props.onRenderItemContent(u)||tt))},u.prototype._onItemClicked=function(n){var t=this.props,i=t.item,r=t.onClick;n.stopPropagation();!i.disabled&&r&&r(i)},u.prototype._onChevronClicked=function(n){var t=this.props,i=t.item,r=t.onExpandCollapse;i.childrenCount!==0&&(n.stopPropagation(),r&&r(i))},__decorate([f.autobind],u.prototype,"_onItemClicked",null),__decorate([f.autobind],u.prototype,"_onChevronClicked",null),u}(i.PureComponent);t.TreeListItem=s});

define("VSSPreview/Controls/TreeViewPicker",["require","exports","OfficeFabric/Button","OfficeFabric/Callout","OfficeFabric/Label","OfficeFabric/Pickers","OfficeFabric/Utilities","react","VSS/Utils/Core","VSS/Utils/UI","VSSPreview/Controls/PartialHighlightComponent","VSSPreview/Controls/TreeList","VSS/LoaderPlugins/Css!VSSPreview/Controls/TreeViewPicker"],function(n,t,i,r,u,f,e,o,s,h,c,l){var a,v;Object.defineProperty(t,"__esModule",{value:!0});t.TreeViewPicker=t.INDENT_WIDTH=t.ITEM_HEIGHT=t.VISIBLE_ITEM_COUNT=t.TreeViewPickerNodeType=t.DIVIDER_ITEM_HEIGHT=t.ON_UPDATE_DEBOUNCE=void 0;t.ON_UPDATE_DEBOUNCE=250;t.DIVIDER_ITEM_HEIGHT=6,function(n){n[n.Node=0]="Node";n[n.Header=1]="Header";n[n.Divider=2]="Divider"}(a=t.TreeViewPickerNodeType||(t.TreeViewPickerNodeType={}));t.VISIBLE_ITEM_COUNT=6;t.ITEM_HEIGHT=34;t.INDENT_WIDTH=16;v=function(n){function v(i){var r=__construct(this,n,[i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);r._treeListId=e.getId("tree-list");r.state={fixedSuggestions:[],scrollSuggestions:[],pendingValue:null,isCalloutOpen:!1,isEditing:!1,isFocused:!1,selectedKey:null};r._debouncedOnValueUpdated=r._async.debounce(r._onValueUpdated,t.ON_UPDATE_DEBOUNCE);r._debouncedUpdateSuggestionState=r._async.debounce(r._updateSuggestionState,t.ON_UPDATE_DEBOUNCE);r._events.on(window,"blur",function(){r._shouldRefocus&&(r._shouldRefocus=!1,r.focus())});return r}return __extends(v,n),v.prototype.confirmEdit=function(){return this.state.isEditing?(this._onConfirmEdit(),!0):!1},v.prototype.focus=function(){this._pickerContainer&&this._pickerContainer.focus()},v.prototype.hideDropdown=function(){return this.state.isCalloutOpen?(this._onCancelEdit(),!0):!1},v.prototype.componentWillReceiveProps=function(n){this.props.dataSource!==n.dataSource&&this.state.isEditing&&this._updateSuggestionState(n,this.state.pendingValue);this.props.selectedValue!==n.selectedValue&&(this.state.isEditing||(n.selectedValue&&typeof n.selectedValue!="string"?this.setState({selectedKey:n.selectedValue.key}):this.setState({selectedKey:null})))},v.prototype.componentDidUpdate=function(n,t){var r=this,u=this.props,f=u.dataSource,i=u.selectedValue;!t.isFocused&&this.state.isFocused&&this._textField.inputElement.setSelectionRange(0,this._textField.inputElement.value.length);i&&typeof i!="string"&&i.key&&this.state.isCalloutOpen!==t.isCalloutOpen&&this.state.isCalloutOpen&&setTimeout(function(){r._scrollTree&&r._scrollTree.scrollToKey(i.key,1)},0)},v.prototype.render=function(){var n=this.props,t=n.containerClassName,i=n.errorMessage;return o.createElement("div",{className:e.css("tree-picker-container",t)},this._renderLabelContainer(),this._renderComboBox(),o.createElement("div",{role:"status","aria-live":"assertive",className:"tree-picker-error"},i),this._renderCallout())},v.prototype._renderLabelContainer=function(){var n=this.props,t=n.label,i=n.labelProps,r=n.onRenderLabel,f=r===void 0?this._renderLabel:r,u=n.showLabel;if(u||u===undefined)return o.createElement("div",{className:"tree-picker-label"},f(i?__assign({children:t},i):{children:t},this._renderLabel))},v.prototype._renderLabel=function(n){return o.createElement(u.Label,__assign({},n))},v.prototype._renderComboBox=function(){var n=this.props,r=n.disabled,s=n.errorMessage,u=n.onRenderSelectedValue,h=u===void 0?this._renderSelectedValue:u,f=n.openCalloutOnFocus,a=f===void 0?!0:f,c=n.selectedValue,l=n.readOnly,t=this.state.isFocused;return o.createElement("div",{ref:this._resolvePickerContainerRef,className:e.css("tree-picker-combo",this.props.comboClassName,{"tree-picker-combo--editing":t,"tree-picker-combo--disabled":r,"tree-picker-combo--error":!!s}),onFocus:this._onContainerFocused,onMouseDown:this._onContainerMouseDown,tabIndex:t||r||l?-1:0},o.createElement("div",{className:"tree-picker-content"},t?this._renderAutofill():h(c,this._renderSelectedValue)),o.createElement("div",{className:"tree-picker-dropdown-button-container",ref:this._resolveButtonContainerRef},o.createElement(i.IconButton,{tabIndex:-1,iconProps:{iconName:"ChevronDown"},className:"tree-picker-dropdown-button",onClick:this._onButtonClicked,role:"presentation","aria-hidden":!0})))},v.prototype._renderAutofill=function(){var t=this.state,i=t.pendingValue,r=t.isEditing,n=this._getSelectedItem();return o.createElement(f.BaseAutoFill,__assign({},e.getNativeProps(this.props,e.inputProperties),{"aria-activedescendant":n&&"".concat(this._treeListId,"-").concat(n.key),"aria-haspopup":"tree","aria-owns":this._treeListId,"aria-expanded":this.state.isCalloutOpen,autoFocus:!0,role:"combobox",componentRef:this._resolveTextFieldRef,className:"tree-picker-input",defaultVisibleValue:i,onClick:this._onInputClicked,onInputValueChange:this._onInputChanged,onKeyDown:this._onInputKeyDown,onBlur:this._onBlurInput,suggestedDisplayValue:r&&n&&n.value,autoCapitalize:"off",autoComplete:"on",spellCheck:!1,updateValueInWillReceiveProps:this._updateAutofillValue,"aria-label":this.props["aria-label"]}))},v.prototype._getScrollbarWidth=function(){return this._scrollbarWidth||(this._scrollbarWidth=e.getScrollbarWidth()),this._scrollbarWidth},v.prototype._renderCallout=function(){var n=this.state,i=n.fixedSuggestions,w=n.scrollSuggestions,b=n.isCalloutOpen,s=n.selectedKey,u=this.props,h=u.label,c=u.itemHeight,a=c===void 0?t.ITEM_HEIGHT:c,v=u.itemIndentWidth,k=v===void 0?t.INDENT_WIDTH:v,y=u.visibleItemCount,d=y===void 0?t.VISIBLE_ITEM_COUNT:y;if(b&&this._getSuggestionsCount()>0){var f=d-i.length,g=this._getTotalScrollCount(),p=g>f,nt=this._getScrollbarWidth();return o.createElement(r.Callout,{className:e.css("tree-picker-dropdown",this.props.calloutClassName),gapSpace:0,target:this._pickerContainer,calloutWidth:this._pickerContainer.offsetWidth,setInitialFocus:!1,isBeakVisible:!1,directionalHint:4,directionalHintFixed:!0,onDismiss:this._closeCallout},o.createElement("div",{ref:this._resolveCalloutContainerRef},i.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{style:{paddingRight:this._scrollbarWidth}},o.createElement(l.TreeList,{id:this._treeListId,ariaLabel:h,itemWrapperClassName:this._getTreeItemClassName,getItemAriaLabel:this._getItemAriaLabel,onItemSelect:this._onConfirmEdit,onRenderItemContent:this._onRenderItem,itemHeight:a,selectedKey:s,items:i,visibleItemCount:i.length})),o.createElement("div",{className:"dropdown-section-divider"})),o.createElement("div",{style:{paddingRight:p?undefined:this._scrollbarWidth,maxHeight:f*a,overflowY:p?"scroll":"hidden"},"data-is-scrollable":!0,className:"scroll-tree-overflow-box"},o.createElement(l.TreeList,{id:this._treeListId,ariaLabel:h,ref:this._resolveScrollTreeRef,controlExpansionState:!0,itemWrapperClassName:this._getTreeItemClassName,getItemAriaLabel:this._getItemAriaLabel,onItemCollapsed:this._onItemCollapsed,onItemExpanded:this._onItemExpanded,onItemSelect:this._onConfirmEdit,onRenderItemContent:this._onRenderItem,itemIndentWidth:k,itemHeight:this._getTreeItemHeight,selectedKey:s,items:w,visibleItemCount:f}))))}},v.prototype._getTotalScrollCount=function(){var i=this,r=this.state.scrollSuggestions,t={},n=0;return r.forEach(function(r){if(r.parentKey){var u=i._getSuggestionFromKey(r.parentKey),f=u.expanded,e=t[r.parentKey]===!0,o=e||!f;o?t[r.key]=!0:n++}else n++}),n},v.prototype._renderSelectedValue=function(n){return o.createElement("div",{className:"tree-picker-selected-value"},this._getSelectedValueString(n))},v.prototype._getItemAriaLabel=function(n){return this.props.onGetItemAriaLabel&&this.props.onGetItemAriaLabel(n)||n.value},v.prototype._onRenderItem=function(n){var t=this.props.onRenderItem;switch(n.itemType){case a.Header:return this._defaultOnRenderGroupHeader(n)}return t?t(n,this._defaultOnRenderItem):this._defaultOnRenderItem(n)},v.prototype._defaultOnRenderItem=function(n){var t=this.props.dataSource,i=this.state.pendingValue;return t.shouldHighlightSuggestions?o.createElement(c.PartialHighlightComponent,{text:n.label,highlight:t.filter}):o.createElement("span",null,n.label)},v.prototype._defaultOnRenderGroupHeader=function(n){return o.createElement("div",{className:"tree-list-group-header"},n.label)},v.prototype._defaultOnRenderDivider=function(){return o.createElement("div",{className:"tree-list-group-divider-item"})},v.prototype._getTreeItemHeight=function(n){var i=this.props.itemHeight,r=i===void 0?t.ITEM_HEIGHT:i;return n.itemType===a.Divider?t.DIVIDER_ITEM_HEIGHT:r},v.prototype._getTreeItemClassName=function(n){switch(n.itemType){case a.Header:return"tree-list-group-header";case a.Divider:return"tree-list-group-divider"}},v.prototype._updateAutofillValue=function(){var t=this.props.selectedValue,n=this.state.pendingValue;return n!=null?n:this._getSelectedValueString(t)},v.prototype._onContainerFocused=function(){var t=this,n=this.props,o=n.dataSource,i=n.openCalloutOnFocus,u=i===void 0?!0:i,s=n.selectedValue,r=this.state,f=r.isEditing,e=r.isFocused;f&&e||!document.hasFocus()||this._startEditing(function(){t._async.setTimeout(function(){u&&t._openCallout(!1)},0)})},v.prototype._onContainerMouseDown=function(n){var t=this.props.openCalloutOnFocus,r=t===void 0?!0:t,i=this.state,u=i.isEditing,f=i.isFocused;f&&u||!r||e.elementContains(this._buttonContainer,n.target)&&(this._suppressButtonClick=!0)},v.prototype._onBlurInput=function(n){var r=this,u=this.state.isEditing,t,i;if(this.props.onBlur)this.props.onBlur(n);t=n.relatedTarget||document.activeElement;t===this._textField.inputElement&&(this._shouldRefocus=!0);i=document.body.getElementsByClassName("tree-picker-dropdown")[0];i&&(i===t||e.elementContains(i,t))||e.elementContains(this._buttonContainer,t)?s.delay(this,0,function(){r._textField&&r._textField.focus()}):(u&&this._onConfirmEdit(),this.setState({isEditing:!1,isFocused:!1}))},v.prototype._onConfirmEdit=function(n){var i=this,r=this.state.pendingValue,t=n||this._getSelectedItem();this._stopEditing(function(){i._onValueUpdated(t,t?t.value:r)})},v.prototype._onCancelEdit=function(){var n=this.props.onCancel;this._stopEditing();n&&n()},v.prototype._onItemCollapsed=function(n){n&&n.expanded&&this._setItemExpandedState(n,!1)},v.prototype._onItemExpanded=function(n){n&&!n.expanded&&this._setItemExpandedState(n,!0)},v.prototype._openCallout=function(n){n===void 0&&(n=!0);var r=this.props.selectedValue,t=this.state,u=t.isEditing,i=t.isCalloutOpen;n&&this._startEditing();i||this.setState({isCalloutOpen:!0})},v.prototype._closeCallout=function(){this.state.isCalloutOpen&&this.setState({isCalloutOpen:!1})},v.prototype._onButtonClicked=function(){this._suppressButtonClick?this._suppressButtonClick=!1:this.state.isCalloutOpen?this._closeCallout():this._openCallout()},v.prototype._startEditing=function(n){var f=this.props,s=f.dataSource,i=f.selectedValue,h=this.state.isEditing,e,o,t,r,u;h||(e=this._getSelectedValueString(i),this.setState({isFocused:!0,isEditing:!0,pendingValue:e}),o=typeof i!="string"?i:undefined,t=s.getInitialSuggestions(o),t&&(r=this._getSuggestionsFromGroups(t.filter(function(n){return n.fixed})),u=this._getSuggestionsFromGroups(t.filter(function(n){return!n.fixed})),this._generateKeyIndexMapping(__spreadArray(__spreadArray([],r,!0),u,!0)),this.setState({fixedSuggestions:r,scrollSuggestions:u,selectedKey:null},n)))},v.prototype._stopEditing=function(n){var t=this.state.isEditing;t?(this._closeCallout(),this._clearSuggestionState(),this.setState({isEditing:!1,pendingValue:null},n)):n&&n()},v.prototype._onInputChanged=function(n){this.setState({pendingValue:n,isEditing:!0});this.props.dataSource.shouldDelayFiltering(n)?this._debouncedUpdateSuggestionState(this.props,n):(this._debouncedUpdateSuggestionState.cancel(),this._updateSuggestionState(this.props,n,!0))},v.prototype._onInputClicked=function(n){var t=this.props.openCalloutOnFocus,i=t===void 0?!0:t;if(i&&this._openCallout(),this.props.onClick)this.props.onClick(n)},v.prototype._onInputKeyDown=function(n){switch(n.keyCode){case h.KeyCode.ESCAPE:this._handleEscapeKey(n);break;case h.KeyCode.ENTER:this._handleEnterKey(n);break;case h.KeyCode.UP:this._handleUpArrowKey(n);break;case h.KeyCode.DOWN:this._handleDownArrowKey(n);break;case h.KeyCode.LEFT:this._handleLeftArrowKey(n);break;case h.KeyCode.RIGHT:this._handleRightArrowKey(n);break;case h.KeyCode.PAGE_UP:this._handlePageUp(n);break;case h.KeyCode.PAGE_DOWN:this._handlePageDown(n)}if(this.props.onKeyDown)this.props.onKeyDown(n)},v.prototype._onValueUpdated=function(n,t){var i=this.props.onValueSelected;i&&i(t,n)},v.prototype._handleEscapeKey=function(){this._onCancelEdit()},v.prototype._handleEnterKey=function(n){this.state.isCalloutOpen&&(this._onConfirmEdit(),n.preventDefault())},v.prototype._handleUpArrowKey=function(n){var u=this.state.isCalloutOpen,f=this._getSuggestionsCount(),t,i,r;n.altKey?this._closeCallout():(t=this._getSelectedIndex(),t==null&&(t=f),t>0&&(i=this._getPreviousVisibleIndex(t),u?this._selectItemAtIndex(i):(r=this._getSuggestionAtIndex(i),r&&this._onConfirmEdit(r))),n.preventDefault(),n.stopPropagation())},v.prototype._handleDownArrowKey=function(n){var u=this.state.isCalloutOpen,f=this._getSuggestionsCount(),t=this._getSelectedIndex(),i,r;n.altKey?this._openCallout():(t==null&&(t=-1),t<f-1&&(i=this._getNextVisibleIndex(t),u?this._selectItemAtIndex(i):(r=this._getSuggestionAtIndex(i),r&&this._onConfirmEdit(r))),n.preventDefault(),n.stopPropagation())},v.prototype._handleLeftArrowKey=function(n){var t=this.state,i=t.isCalloutOpen,r=t.selectedKey;n.altKey||n.ctrlKey||n.shiftKey||i&&r&&(this._onItemCollapsed(this._getSelectedItem()),n.preventDefault(),n.stopPropagation())},v.prototype._handleRightArrowKey=function(n){var t=this.state,i=t.isCalloutOpen,r=t.selectedKey;n.altKey||n.ctrlKey||n.shiftKey||i&&r&&(this._onItemExpanded(this._getSelectedItem()),n.preventDefault(),n.stopPropagation())},v.prototype._handlePageUp=function(n){var f=this.state.isCalloutOpen,e=this._getSuggestionsCount(),r=this.props.visibleItemCount,o=r===void 0?t.VISIBLE_ITEM_COUNT:r,i,u;f&&(i=this._getSelectedIndex(),i==null&&(i=e),i>0&&(u=this._getPreviousVisibleIndex(i,o),this._selectItemAtIndex(u)),n.preventDefault(),n.stopPropagation())},v.prototype._handlePageDown=function(n){var f=this.state.isCalloutOpen,e=this._getSuggestionsCount(),r=this.props.visibleItemCount,o=r===void 0?t.VISIBLE_ITEM_COUNT:r,i,u;f&&(i=this._getSelectedIndex(),i==null&&(i=-1),i<e-1&&(u=this._getNextVisibleIndex(i,o),this._selectItemAtIndex(u)),n.preventDefault(),n.stopPropagation())},v.prototype._getSelectedValueString=function(n){return n?typeof n=="string"?n:n.value:""},v.prototype._generateKeyIndexMapping=function(n){var t=this;this._keyToIndexLookup={};n&&n.forEach(function(n,i){t._keyToIndexLookup[n.key]=i})},v.prototype._getSuggestionsFromGroups=function(n){var t=[];return n&&n.forEach(function(n){n.groupHeader&&t.push({childrenCount:0,data:null,disabled:!0,expanded:!1,itemType:a.Header,key:n.key+"-header",label:n.groupHeader,level:0,parentKey:null,value:null});t.push.apply(t,n.suggestions);n.showDivider&&t.push({childrenCount:0,data:null,disabled:!0,expanded:!1,itemType:a.Divider,key:n.key+"-divider",label:null,level:0,parentKey:null,value:null})}),t},v.prototype._getIndexFromKey=function(n){if(this._keyToIndexLookup)return this._keyToIndexLookup[n]},v.prototype._getSelectedIndex=function(){var n=this.state.selectedKey;return this._getIndexFromKey(n)},v.prototype._getSelectedItem=function(){var t=this.state.selectedKey,n=this._getIndexFromKey(t);if(n!=null)return this._getSuggestionAtIndex(n)},v.prototype._getPreviousVisibleIndex=function(n,t){var r,i;if(t===void 0&&(t=1),r=this.state.isCalloutOpen,n>0){for(i=null,n=n-1;n>=0;){if(this._isIndexSelectable(n)&&(t--,i=n,t===0))return n;n--}if(i!=null)return i}},v.prototype._getNextVisibleIndex=function(n,t){var u,r,i;if(t===void 0&&(t=1),u=this.state.isCalloutOpen,r=this._getSuggestionsCount(),n<r-1){for(i=null,n=n+1;n<r;){if(this._isIndexSelectable(n)&&(t--,i=n,t===0))return n;n++}if(i!=null)return i}},v.prototype._isIndexSelectable=function(n){var r=this.state.isCalloutOpen,i=this._getSuggestionAtIndex(n),t;if(i.disabled)return!1;if(!r)return!0;for(t=this._getSuggestionFromKey(i.parentKey);t;){if(!t.expanded)return!1;i=t;t=this._getSuggestionFromKey(i.parentKey)}return!0},v.prototype._getSuggestionsCount=function(){var n=this.state,t=n.fixedSuggestions,i=n.scrollSuggestions;return t.length+i.length},v.prototype._getSuggestionAtIndex=function(n){var i=this.state,t=i.fixedSuggestions,r=i.scrollSuggestions;return n<t.length?t[n]:r[n-t.length]},v.prototype._getSuggestionFromKey=function(n){return this._getSuggestionAtIndex(this._getIndexFromKey(n))},v.prototype._selectItemAtIndex=function(n){var r=this.state,u=r.pendingValue,f=r.isCalloutOpen,t=this._getSuggestionAtIndex(n),i;t&&(this.setState({pendingValue:t.value,selectedKey:t.key}),this._debouncedOnValueUpdated(t,t.value),i=this._getSuggestionFromKey(t.parentKey),i&&!i.expanded&&this._setItemExpandedState(i,!0))},v.prototype._setItemExpandedState=function(n,t){var i=this.state,u=i.fixedSuggestions,f=i.isCalloutOpen,r=this._keyToIndexLookup[n.key];r!=null&&this._setIndexExpandedState(r,t)},v.prototype._setIndexExpandedState=function(n,t){var r=this.state,u=r.scrollSuggestions,o=r.fixedSuggestions,s=r.isCalloutOpen,e,i,f;if(n-=o.length,n>=0&&n<u.length){if(!t&&s)for(e=u[n],i=this._getSelectedItem();i&&i.parentKey;){if(i.parentKey===e.key){this._selectItemAtIndex(n);break}i=this._getSuggestionFromKey(i.parentKey)}f=__spreadArray([],u,!0);f[n].expanded=t;this.setState({scrollSuggestions:f})}},v.prototype._updateSuggestionState=function(n,t,i){var f,u,h,r;if(i===void 0&&(i=!1),f=this.state.isCalloutOpen,n.dataSource.filter=t,u=n.dataSource.getSuggestions(),u){var e=this._getSuggestionsFromGroups(u.suggestionGroups.filter(function(n){return n.fixed})),o=this._getSuggestionsFromGroups(u.suggestionGroups.filter(function(n){return!n.fixed})),s=__spreadArray(__spreadArray([],e,!0),o,!0);this._generateKeyIndexMapping(s);this.setState({fixedSuggestions:e,scrollSuggestions:o,selectedKey:u.topSuggestionKey});h=n.dataSource.getSuggestedCalloutState(f);h?this._openCallout(!1):this._closeCallout();r=s[this._getIndexFromKey(u.topSuggestionKey)];i?this._debouncedOnValueUpdated(r,r?r.value:t):this._onValueUpdated(r,r?r.value:t)}},v.prototype._clearSuggestionState=function(){var t=this.props,r=t.dataSource,n=t.selectedValue,i=r.getFlattenedTree();this._generateKeyIndexMapping(i);this.setState({scrollSuggestions:i,selectedKey:n&&typeof n!="string"?n.key:null})},v.prototype._resolveButtonContainerRef=function(n){this._buttonContainer=n},v.prototype._resolveCalloutContainerRef=function(n){this._calloutContainer=n},v.prototype._resolvePickerContainerRef=function(n){this._pickerContainer=n},v.prototype._resolveTextFieldRef=function(n){this._textField=n},v.prototype._resolveScrollTreeRef=function(n){this._scrollTree=n},__decorate([e.autobind],v.prototype,"_renderLabelContainer",null),__decorate([e.autobind],v.prototype,"_renderLabel",null),__decorate([e.autobind],v.prototype,"_renderSelectedValue",null),__decorate([e.autobind],v.prototype,"_getItemAriaLabel",null),__decorate([e.autobind],v.prototype,"_onRenderItem",null),__decorate([e.autobind],v.prototype,"_defaultOnRenderItem",null),__decorate([e.autobind],v.prototype,"_defaultOnRenderGroupHeader",null),__decorate([e.autobind],v.prototype,"_defaultOnRenderDivider",null),__decorate([e.autobind],v.prototype,"_getTreeItemHeight",null),__decorate([e.autobind],v.prototype,"_getTreeItemClassName",null),__decorate([e.autobind],v.prototype,"_updateAutofillValue",null),__decorate([e.autobind],v.prototype,"_onContainerFocused",null),__decorate([e.autobind],v.prototype,"_onContainerMouseDown",null),__decorate([e.autobind],v.prototype,"_onBlurInput",null),__decorate([e.autobind],v.prototype,"_onConfirmEdit",null),__decorate([e.autobind],v.prototype,"_onCancelEdit",null),__decorate([e.autobind],v.prototype,"_onItemCollapsed",null),__decorate([e.autobind],v.prototype,"_onItemExpanded",null),__decorate([e.autobind],v.prototype,"_openCallout",null),__decorate([e.autobind],v.prototype,"_closeCallout",null),__decorate([e.autobind],v.prototype,"_onButtonClicked",null),__decorate([e.autobind],v.prototype,"_onInputChanged",null),__decorate([e.autobind],v.prototype,"_onInputClicked",null),__decorate([e.autobind],v.prototype,"_onInputKeyDown",null),__decorate([e.autobind],v.prototype,"_onValueUpdated",null),__decorate([e.autobind],v.prototype,"_resolveButtonContainerRef",null),__decorate([e.autobind],v.prototype,"_resolveCalloutContainerRef",null),__decorate([e.autobind],v.prototype,"_resolvePickerContainerRef",null),__decorate([e.autobind],v.prototype,"_resolveTextFieldRef",null),__decorate([e.autobind],v.prototype,"_resolveScrollTreeRef",null),v}(e.BaseComponent);t.TreeViewPicker=v});

define("VSSPreview/Controls/TruncatedPathContainer",["require","exports","react","OfficeFabric/Tooltip","OfficeFabric/Utilities","VSS/Utils/UI"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.TruncatedPathContainer=void 0;var e=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._measured=!1,r.state={isOverflow:!1},r}return __extends(t,n),t.prototype.componentWillReceiveProps=function(n){n.path!==this.props.path&&(this._measured=!1,this.setState({isOverflow:!1}))},t.prototype.render=function(){var t=this.props,n=t.path,f=t.tooltipHostClassName,e=this.state.isOverflow,s=u.getNativeProps(this.props,u.inputProperties),h=e&&!this.props.skipPathTruncation?this._getTruncatedPath(n):n,o=i.createElement("input",__assign({ref:this._resolveSelectedItemRef},s,{value:h,readOnly:!0}));return e?i.createElement(r.TooltipHost,{hostClassName:f,content:n},o):i.createElement("div",{className:f},o)},t.prototype.componentDidMount=function(){this._measureSelectedItemOverflow()},t.prototype.componentDidUpdate=function(){this._measureSelectedItemOverflow()},t.prototype._getTruncatedPath=function(n){var r=this.props,i=r.separatorCharacter,u=r.truncatePath,t;return u?u(n,i):(t=n.split(i),t.length>2)?"".concat(t[0]).concat(i,"...").concat(i).concat(t[t.length-1]):n},t.prototype._measureSelectedItemOverflow=function(){if(!this._measured&&this._container){var n=f.contentsOverflow(this._container);this.state.isOverflow!==n&&(this._measured=!0,this.setState({isOverflow:n}))}},t.prototype._resolveSelectedItemRef=function(n){this._container=n},__decorate([u.autobind],t.prototype,"_resolveSelectedItemRef",null),t}(i.Component);t.TruncatedPathContainer=e});

define("VSSPreview/Controls/TreePicker",["require","exports","OfficeFabric/Tooltip","OfficeFabric/Utilities","react","VSS/Utils/Culture","VSS/Utils/Date","VSS/Utils/String","VSS/Utils/Tree","VSSPreview/Controls/TreeViewPicker","VSSPreview/Controls/TruncatedPathContainer","VSSPreview/Resources/VSS.Resources.Preview","VSS/LoaderPlugins/Css!VSSPreview/Controls/TreePicker"],function(n,t,i,r,u,f,e,o,s,h,c,l){var a,v;Object.defineProperty(t,"__esModule",{value:!0});t.TreePicker=t.TreePickerDataSource=t.DEFAULT_SEPARATOR=void 0;t.DEFAULT_SEPARATOR="\\";a=function(){function n(n,t,i){this._tree=n instanceof Array?__spreadArray([],n,!0):[n];this._separatorCharacter=t;this._mruItemIds=i;this._flattenTree()}return n.prototype.updateMruItems=function(n){this._mruItemIds=n;this._isEmptyFilter()&&(this._cachedSuggestionInformation=null)},n.prototype.getFlattenedTree=function(){return this._flattenedTree},n.prototype.getInitialSuggestions=function(n){if(n)while(n.parentKey)n=this._idNodeMap[n.parentKey],n.expanded=!0;return this.filter="",this._cachedSuggestionInformation.suggestionGroups},n.prototype.getSuggestions=function(){return this._cachedSuggestionInformation||this._updateCachedSuggestions(),this._cachedSuggestionInformation},Object.defineProperty(n.prototype,"filter",{get:function(){return this._filter},set:function(n){this._previousFilter=this._filter;this._filter=n;this._updateCachedSuggestions()},enumerable:!1,configurable:!0}),n.prototype.shouldDelayFiltering=function(n){return n===void 0&&(n=this._filter),!this._isPathFilter(n)},Object.defineProperty(n.prototype,"shouldHighlightSuggestions",{get:function(){return!!this._filter&&!this._isPathFilter()},enumerable:!1,configurable:!0}),n.prototype.getSuggestedCalloutState=function(n){if(n){if(!this._isEmptyFilter()&&!this._isPathFilter()&&!this._hasFilterResults)return!1}else if(!this._isEmptyFilter()&&!this._isPathFilter()&&this._hasFilterResults)return!0;return n},n.prototype.getNodeByPath=function(n){return this._pathNodeMap[n]},n.prototype.getPathById=function(n){return this._idPathMap[n.toString()]},n.prototype.getTreeViewNodeById=function(n){return this._idNodeMap[n.toString()]},n.prototype._isPathFilter=function(n){return n===void 0&&(n=this._filter),!!n&&!!this._separatorCharacter&&o.caseInsensitiveContains(n,this._separatorCharacter)},n.prototype._isEmptyFilter=function(n){return n===void 0&&(n=this._filter),!n||!n.trim()},n.prototype._filterTree=function(n){var a=this,h,u,f,l,e,i,r;if(this._tree&&n){h=!!this._previousFilter&&o.startsWith(n,this._previousFilter,o.localeIgnoreCaseComparer);h||(this._previousFilterResult=null);var c=this._isPathFilter(n),v=this._filter.split(this._separatorCharacter),y=c?function(n){return a._comparePaths(v,n)}:function(t){return o.caseInsensitiveContains(t.name,n)},t={};for(u=0,f=this._tree;u<f.length;u++)l=f[u],t=__assign(__assign({},t),s.filterTree(l,y,function(n){return n.id.toString()},function(n){return n.children},this._previousFilterResult));if(this._previousFilterResult=t,e=Object.keys(t).length>0,e)return i=null,r=void 0,c?(this._flattenedTree=__spreadArray([],this._flattenedTree,!0),this._flattenedTree.forEach(function(n){var r=t[n.key];!i&&r&&r.isPredicateMatch&&(i=n.key);r&&r.hasMatchingDescendant&&(n.expanded=!0)}),r=this._flattenedTree):(r=this._flattenedTree.filter(function(n){return!!t[n.key]}),r=r.map(function(n){var r=t[n.key];return!i&&r&&r.isPredicateMatch&&(i=n.key),__assign(__assign({},n),{expanded:r&&r.hasMatchingDescendant})})),{hasFilterResults:e,suggestions:r,topSuggestionKey:i}}return{hasFilterResults:!1,suggestions:__spreadArray([],this._flattenedTree,!0),topSuggestionKey:null}},n.prototype._flattenTree=function(){var r=this,n,i,h;if(!this._flattenedTree){var u=[],t={},f={},e={},o={};if(this._tree)for(n=0,i=this._tree;n<i.length;n++)h=i[n],s.traversePreOrder(h,function(n){return n&&n.children?n.children:[]},function(n,i,s,h){var l,c,v,a;n&&(l=i&&i.id.toString(),c=n.name,l&&(v=t[l],v&&(c=v+r._separatorCharacter+c)),a={parentKey:l,key:n.id.toString(),value:c,label:n.name,level:s,data:n,childrenCount:h,expanded:s<1},t[n.id.toString()]=c,f[n.id.toString()]=c.split(r._separatorCharacter),e[c]=a,o[n.id.toString()]=a,u.push(a))});this._idPathMap=t;this._idPathSegmentMap=f;this._pathNodeMap=e;this._idNodeMap=o;this._flattenedTree=u}},n.prototype._updateCachedSuggestions=function(){var i=this,n,t;this._filter===this._previousFilter&&this._cachedSuggestionInformation||(n=this._filterTree(this._filter),this._previousFilter=this._filter,t=[{key:"filtered-suggestions",suggestions:n.suggestions}],this._isEmptyFilter()&&this._mruItemIds&&this._mruItemIds.length&&t.unshift({key:"mru",suggestions:this._mruItemIds.reduce(function(n,t,r){var u=i._idNodeMap[t.toString()];return u&&n.push(__assign(__assign({},u),{parentKey:null,level:0,childrenCount:0,key:"mru-".concat(r)})),n},[]),groupHeader:l.ClassificationPickerMRUHeader,fixed:!0}),this._hasFilterResults=n.hasFilterResults,this._cachedSuggestionInformation={suggestionGroups:t,topSuggestionKey:n.topSuggestionKey})},n.prototype._comparePaths=function(n,t){var f=this._idPathSegmentMap[t.id.toString()],i,u,r;if(n.length!==f.length)return!1;for(i=0;i<n.length;i++)if(u=n[i],r=f[i],i===n.length-1){if(!r||!o.startsWith(r,u,o.localeIgnoreCaseComparer))return!1}else if(!o.equals(u,r,!0))return!1;return!0},n}();t.TreePickerDataSource=a;v=function(n){function s(i){var r=__construct(this,n,[i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._dataSource=new a(i.tree,i.separatorCharacter||t.DEFAULT_SEPARATOR,i.mruItemIds),r.state={selectedValue:r._getSelectedNodeOrValue(i.selectedValue)},r}return __extends(s,n),s.prototype.confirmEdit=function(){return this._treeViewPicker?this._treeViewPicker.confirmEdit():!1},s.prototype.focus=function(){this._treeViewPicker&&!this.props.readOnly&&this._treeViewPicker.focus()},s.prototype.hideDropdown=function(){return this._treeViewPicker?this._treeViewPicker.hideDropdown():!1},s.prototype.componentWillReceiveProps=function(i,r){n.prototype.componentWillReceiveProps.call(this,i,r);this.props.tree!==i.tree||this.props.separatorCharacter!==i.separatorCharacter?(this._dataSource=new a(i.tree,i.separatorCharacter||t.DEFAULT_SEPARATOR,i.mruItemIds),this.setState({selectedValue:this._getSelectedNodeOrValue(i.selectedValue)})):this.props.selectedValue!==i.selectedValue&&this.setState({selectedValue:this._getSelectedNodeOrValue(i.selectedValue)});this.props.mruItemIds!==i.mruItemIds&&this._dataSource.updateMruItems(i.mruItemIds)},s.prototype.render=function(){var n=this.props,t=n.errorMessage,i=n.label,f=n.labelProps,e=n.showLabel,o=n.onRenderLabel,s=n.dropdownItemHeight,c=n.dropdownItemIndentWidth,l=n.containerClassName,a=n.comboClassName,v=n.calloutClassName,y=n.visibleItemCount,p=n.openCalloutOnFocus,w=this.state.selectedValue;return u.createElement(h.TreeViewPicker,__assign({componentRef:this._resolveTreeViewPicker},r.getNativeProps(this.props,r.inputProperties),{containerClassName:l,comboClassName:a,calloutClassName:v,dataSource:this._dataSource,errorMessage:t,label:i,labelProps:f,showLabel:e,selectedValue:w,onValueSelected:this._onValueSelected,onGetItemAriaLabel:this._onGetItemAriaLabel,onRenderItem:this._onRenderItem,onRenderLabel:o,onRenderSelectedValue:this._onRenderSelectedItem,openCalloutOnFocus:p,itemHeight:s,itemIndentWidth:c,visibleItemCount:y}))},s.prototype._onRenderItem=function(n,t){return u.createElement("div",{className:"treepicker-item"},u.createElement(i.TooltipHost,{hostClassName:"treepicker-item-title",content:n.value,overflowMode:i.TooltipOverflowMode.Self},n.key.indexOf("mru-")>-1?n.value:t(n)),this._renderDateSection(n.data))},s.prototype._onRenderSelectedItem=function(n){var i=this.props,f=i.showSelectedDate,s=f===void 0?!0:f,h=i.selectedInputId,e=i.separatorCharacter,l=e===void 0?t.DEFAULT_SEPARATOR:e,r,o;if(n)return r=typeof n=="string",o=r?n:n.value,u.createElement("div",{className:"treepicker-item"},u.createElement("div",{className:"treepicker-item-title"},u.createElement(c.TruncatedPathContainer,{path:o,role:"combobox",separatorCharacter:l,className:"treepicker-item-title-input",tooltipHostClassName:"treepicker-item-title-tooltip",tabIndex:this.props.readOnly?null:-1,onFocus:this._onInputFocus,id:h,skipPathTruncation:this.props.skipPathTruncation,"aria-label":this.props["aria-label"],"aria-required":this.props["aria-required"],"aria-expanded":!1})),!r&&s&&this._renderDateSection(n.data))},s.prototype._onInputFocus=function(n){n.preventDefault();n.stopPropagation();this.focus()},s.prototype._renderDateSection=function(n){var t=f.getDateTimeFormat(),i,r;if(n&&n.startDate&&n.finishDate)return i=e.shiftToUTC(n.startDate),r=e.shiftToUTC(n.finishDate),u.createElement("div",{className:"treepicker-item-date"},"".concat(e.localeFormat(i,t.ShortDatePattern,!0)," - ").concat(e.localeFormat(r,t.ShortDatePattern,!0)))},s.prototype._onValueSelected=function(n,t){var i=this.props.onValueSelected;i&&(t||(t=this._dataSource.getNodeByPath(n)),i(n,t?t.data:null,t?t.key.indexOf("mru")>-1:null))},s.prototype._getSelectedNodeOrValue=function(n){if(n)return typeof n=="string"?this._dataSource.getNodeByPath(n)||n:this._dataSource.getTreeViewNodeById(n.id)},s.prototype._resolveTreeViewPicker=function(n){this._treeViewPicker=n},s.prototype._onGetItemAriaLabel=function(n){var t;if(n&&n.data&&(t=n.data,t.startDate&&t.finishDate)){var i=f.getDateTimeFormat(),r=e.localeFormat(e.shiftToUTC(t.startDate),i.ShortDatePattern,!0),u=e.localeFormat(e.shiftToUTC(t.finishDate),i.ShortDatePattern,!0);return o.format(l.TreePickerItemAriaLabel,n.value,r,u)}return n.value},__decorate([r.autobind],s.prototype,"_onRenderItem",null),__decorate([r.autobind],s.prototype,"_onRenderSelectedItem",null),__decorate([r.autobind],s.prototype,"_onInputFocus",null),__decorate([r.autobind],s.prototype,"_onValueSelected",null),__decorate([r.autobind],s.prototype,"_resolveTreeViewPicker",null),__decorate([r.autobind],s.prototype,"_onGetItemAriaLabel",null),s}(r.BaseComponent);t.TreePicker=v});

var __rest=this&&this.__rest||function(n,t){var u={},r;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(u[i[r]]=n[i[r]]);return u};define("VSSPreview/Flux/Components/Format",["require","exports","react"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.FormatComponent=void 0;var r=function(n){var u=undefined,h=n.format,a=n.elementType,c=n.children,v=__rest(n,["format","elementType","children"]),f,l,e,r,o,t,s;if(h)for(f=h.split(/(?:\{)([0-9]+)(?:\})/),l=i.Children.toArray(c),u=[],e={},r=0;r<f.length;++r)if(o=f[r],r&1)if(t=parseInt(o,10),e[t])throw new Error("Index in the format can only be used once, recurring index is ".concat(t));else{if(s=l[t],!s)throw new Error("No element found for the specified index ".concat(t));u.push(s);e[t]=!0}else u.push(o);return i.createElement(a||"span",v,u||c)};t.FormatComponent=r});

define("VSSPreview/OfficeFabric/Helpers",["require","exports","VSS/Diag","VSS/Context","VSS/Utils/String","VSSPreview/Resources/VSS.Resources.Preview","VSS/LoaderPlugins/Css!VSSPreview/OfficeFabric/Overrides"],function(n,t,i,r,u,f){function e(n,t){return{iconName:"None",className:"".concat(n," bowtie-icon ").concat(t)}}function l(n){return o||(o=!0,i.logWarning("VSSPreview/OfficeFabric/Helpers.contextualMenuIcon has been deprecated. Specify bowtie icon directly using iconProps.className like 'bowtie-icon ".concat(n,"'"))),e("vsts-fabric-contextual-menu-icon",n)}function a(n){return s||(s=!0,i.logWarning("VSSPreview/OfficeFabric/Helpers.commandBarIcon has been deprecated. Specify bowtie icon directly using iconProps.className like 'bowtie-icon ".concat(n,"'"))),e("vsts-fabric-command-bar-icon",n)}function v(n){return"None vsts-fabric-pivot-icon bowtie-icon ".concat(n)}function h(){return r.getPageContext().microsoftAjaxConfig.cultureInfo}function c(){var n=h().dateTimeFormat;return{goToToday:f.DatePicker_GoToToday,invalidInputErrorMessage:f.DatePicker_InvalidDateMessage,isRequiredErrorMessage:f.DatePicker_RequiredMessage,isOutOfBoundsErrorMessage:f.DatePicker_OutOfBoundsMessage,days:n.DayNames,months:n.MonthNames,shortDays:n.AbbreviatedDayNames,shortMonths:n.AbbreviatedMonthNames.filter(function(n){return Boolean(n)}),prevMonthAriaLabel:f.DatePicker_GoToPreviousMonth,nextMonthAriaLabel:f.DatePicker_GoToNextMonth,prevYearAriaLabel:f.DatePicker_GoToPreviousYear,nextYearAriaLabel:f.DatePicker_GoToNextYear}}function y(n){var t=h();return{strings:c(),pickerAriaLabel:f.DatePicker_PopupAriaLabel,placeholder:f.DatePicker_Placeholder,firstDayOfWeek:t.dateTimeFormat.FirstDayOfWeek,formatDate:function(t){return u.dateToString(t,!0,n||"g")},parseDateFromString:function(i){return u.parseDateString(i,t,n?[n]:[])}}}Object.defineProperty(t,"__esModule",{value:!0});t.datePickerProps=t.datePickerStrings=t.pivotIcon=t.commandBarIcon=t.contextualMenuIcon=void 0;var o=!1,s=!1;t.contextualMenuIcon=l;t.commandBarIcon=a;t.pivotIcon=v;t.datePickerStrings=c;t.datePickerProps=y});

define("Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorForm",["require","exports","react","Agile/Scripts/Common/HubTelemetryHelper","Agile/Scripts/Common/IterationDateUtil","Agile/Scripts/Resources/TFS.Resources.SprintsHub.SprintEditor","Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorFormValidators","Agile/Scripts/SprintsHub/SprintEditor/SprintEditorTelemetryConstants","OfficeFabric/Button","OfficeFabric/DatePicker","OfficeFabric/Label","OfficeFabric/Link","OfficeFabric/Spinner","OfficeFabric/TextField","OfficeFabric/Utilities","Presentation/Scripts/TFS/Components/InfoIcon","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","VSS/Utils/Culture","VSS/Utils/Date","VSS/Utils/String","VSSPreview/Controls/TreePicker","VSSPreview/Flux/Components/Format","VSSPreview/OfficeFabric/Helpers","WorkItemTracking/Scripts/Utils/NodeHelpers","VSS/LoaderPlugins/Css!Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorForm"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorForm=void 0;var rt=function(n){function t(t,u){var s=__construct(this,n,[t,u]),h,a,c,v,l;for(h in s)s.hasOwnProperty(h)&&(this[h]=s[h]);return s._renderSelectedIterationInputLabel=function(n,t){return i.createElement("div",{className:"classification-label"},t(n),i.createElement(p.InfoIcon,{id:s._selectedIterationFieldInfoId,className:"classification-help",directionalHint:9,iconProps:{iconType:0,iconName:"Info"},infoText:f.SelectIterationExtraInfoText}))},s._formatDate=function(n){if(n){var t=b.getDateTimeFormat();return k.localeFormat(n,t.ShortDatePattern,!0)}return""},s._parseDate=function(n){var t=b.getDateTimeFormat();return k.parseDateString(n,t.ShortDatePattern,!0)},s._onFormSubmitted=function(n){var i=s.props,o=i.editingIteration,h=i.onCreateIteration,c=i.onEditIteration,l=i.onSelectIteration,t=s.state,a=t.formMode,r=t.endDateField,u=t.nameField,f=t.startDateField,v=t.parentIterationPathField,y=t.selectedIterationPathField,e;if(n.preventDefault(),n.stopPropagation(),e=s._validateForm(),s._isFormValid(e))switch(a){case"create":h(u.value,f.value,r.value,v.value.path);break;case"edit":c(o,u.value,f.value,r.value);break;case"select":l(y.value.path)}else s.setState({nameField:__assign(__assign({},s.state.nameField),{pristine:!1}),endDateField:__assign(__assign({},s.state.endDateField),{pristine:!1}),startDateField:__assign(__assign({},s.state.startDateField),{pristine:!1}),parentIterationPathField:__assign(__assign({},s.state.parentIterationPathField),{pristine:!1}),selectedIterationPathField:__assign(__assign({},s.state.selectedIterationPathField),{pristine:!1})})},s._onFormOptionToggled=function(){var n=s.state.formMode;n==="create"?(s.setState({formMode:"select"}),r.SprintsHubTelemetryHelper.publishTelemetryValue(o.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_TOGGLE,"SwitchTo","select")):(s.setState({formMode:"create"}),r.SprintsHubTelemetryHelper.publishTelemetryValue(o.SprintEditorUsageTelemetryConstants.SPRINTEDITOR_TOGGLE,"SwitchTo","create"))},s._onNameFieldChanged=function(n){var t=s.state,u=t.nameField,f=t.parentIterationPathField,i,r;u.value!==n&&(i=f.value.node,r=e.SprintEditorFormValidators.validateName(n,i),s.setState({nameField:{value:n,validationResult:r,pristine:!1}}))},s._onStartDateFieldChanged=function(n){var u=s.state,r=u.endDateField,f=u.suggestedDateInformation,o=e.SprintEditorFormValidators.validateStartDate(n),t,i;s.setState({startDateField:{value:n,validationResult:o,pristine:!1}});s.state.endDateField.value?(i=e.SprintEditorFormValidators.validateEndDate(n,r.value),s.setState({endDateField:__assign(__assign({},r),{validationResult:i,pristine:!1})})):o.isValid&&f&&(t=new Date(n),t.setDate(t.getDate()+f.workingDaysOffset),i=e.SprintEditorFormValidators.validateEndDate(n,t),s.setState({endDateField:__assign(__assign({},r),{validationResult:i,value:t})}))},s._onEndDateFieldChanged=function(n){var t=e.SprintEditorFormValidators.validateEndDate(s.state.startDateField.value,n);s.setState({endDateField:{value:n,validationResult:t,pristine:!1}})},s._onParentIterationPathChanged=function(n,t){var i=s.props,r=i.selectedTeamBacklogIteration,u=i.selectedTeamDaysOff,f=s.state.nameField,o=e.SprintEditorFormValidators.validateParentIterationValue(n,t,r),h=e.SprintEditorFormValidators.validateName(f.value,t);s.setState({suggestedDateInformation:s._computeSuggestedDateInformation(t,u),parentIterationPathField:{value:{path:n,node:t},validationResult:o,pristine:!1},nameField:__assign(__assign({},s.state.nameField),{validationResult:h})})},s._onSelectedIterationChanged=function(n,t){var i=s.props,r=i.projectIterationHierarchy,u=i.selectedTeamBacklogIteration,f=i.selectedTeamIterationPaths,o=e.SprintEditorFormValidators.validateSelectedIteration(n,t,r,f,u);s.setState({selectedIterationPathField:{value:{path:n,node:t},validationResult:o,pristine:!1}})},s._resolveTextField=function(n){s._nameField=n},s._resolveSelectionPicker=function(n){s._selectionPicker=n},a=t.editingIteration!=null,l=s._computeSuggestedDateInformation(t.suggestedParentNode,t.selectedTeamDaysOff),a?c=s._getEditFieldState(t):(c=s._getNewFieldState(t,l),v=t.nextSuggestedIterationPath?it.NodeHelpers.findByPath(t.projectIterationHierarchy,t.nextSuggestedIterationPath):null),s.state=__assign({suggestedDateInformation:l,formMode:t.editingIteration?"edit":t.nextSuggestedIterationPath?"select":"create",selectedIterationPathField:{value:t.nextSuggestedIterationPath?{path:t.nextSuggestedIterationPath,node:v}:{path:null,node:null},validationResult:{isValid:!0},pristine:!0}},c),s._selectedIterationFieldInfoId=y.getId("sprint-editor-form"),s}return __extends(t,n),t.prototype.focusInitialElement=function(){var n=this.state.formMode;n==="create"?this._nameField&&this._nameField.focus():this._selectionPicker&&this._selectionPicker.focus()},t.prototype.componentWillMount=function(){this._validateForm()},t.prototype.componentWillReceiveProps=function(n){var t=!1,i;this.props.suggestedParentNode!==n.suggestedParentNode&&n.suggestedParentNode&&!this.state.parentIterationPathField.value.path?(this.setState({parentIterationPathField:__assign(__assign({},this.state.parentIterationPathField),{value:{path:it.NodeHelpers.getPath(n.suggestedParentNode,1),node:n.suggestedParentNode}}),suggestedDateInformation:this._computeSuggestedDateInformation(n.suggestedParentNode,n.selectedTeamDaysOff)}),t=!0):this.props.selectedTeamDaysOff!==n.selectedTeamDaysOff&&this.setState({suggestedDateInformation:this._computeSuggestedDateInformation(n.projectIterationHierarchy,n.selectedTeamDaysOff)});this.props.nextSuggestedIterationPath!==n.nextSuggestedIterationPath&&n.nextSuggestedIterationPath&&(i=it.NodeHelpers.findByPath(n.projectIterationHierarchy,n.nextSuggestedIterationPath),this.setState({selectedIterationPathField:__assign(__assign({},this.state.selectedIterationPathField),{value:{path:n.nextSuggestedIterationPath,node:i}})}),t=!0);this.props.selectedTeamBacklogIteration!==n.selectedTeamBacklogIteration&&(t=!0);t&&this._validateForm(n)},t.prototype.render=function(){return i.createElement("form",{onSubmit:this._onFormSubmitted},this.renderSprintForm(),this.state.formMode!=="edit"&&this.renderFormOptionToggle(),this.renderSubmitSection())},t.prototype.renderSprintForm=function(){switch(this.state.formMode){case"select":return this.renderSelectIterationForm();case"create":case"edit":return this.renderIterationForm()}},t.prototype.renderSelectIterationForm=function(){var t=this.props,r=t.isFetching,u=t.projectIterationHierarchy,n=this.state.selectedIterationPathField;return i.createElement("div",null,i.createElement(g.TreePicker,{componentRef:this._resolveSelectionPicker,"aria-describedby":this._selectedIterationFieldInfoId,"aria-label":f.SelectIterationFieldTitle,disabled:r,errorMessage:!n.pristine&&!n.validationResult.isValid?n.validationResult.errorMessage:"",onRenderLabel:this._renderSelectedIterationInputLabel,tree:u,onValueSelected:this._onSelectedIterationChanged,openCalloutOnFocus:!1,label:f.SelectIterationFieldTitle,selectedValue:n.value.node||n.value.path}))},t.prototype.renderIterationForm=function(){var l=this.props.isFetching,n=this.state,a=n.formMode,r=n.nameField,u=n.startDateField,e=n.endDateField,t=n.parentIterationPathField,o=n.suggestedDateInformation,s=tt.datePickerStrings();return i.createElement("div",{className:"create-iteration-form"},i.createElement("div",{className:"text-field-wrapper name-field sprint-editor-form-section"},i.createElement(c.Label,{className:"text-field-label",required:!0},f.NameFieldLabel),i.createElement(v.TextField,{componentRef:this._resolveTextField,ariaLabel:f.NameFieldLabel,autoComplete:"off",onBeforeChange:this._onNameFieldChanged,value:r.value,errorMessage:!r.pristine&&!r.validationResult.isValid?r.validationResult.errorMessage:""})),i.createElement("div",{className:"create-iteration-form-date-section sprint-editor-form-section"},i.createElement("div",{className:y.css("date-picker-wrapper","create-iteration-date",{"date-picker-wrapper--invalid":!u.pristine&&!u.validationResult.isValid})},i.createElement(h.DatePicker,{ariaLabel:f.StartDateFieldLabel,label:f.StartDateFieldLabel,className:"date-picker",allowTextInput:!0,formatDate:this._formatDate,onSelectDate:this._onStartDateFieldChanged,parseDateFromString:this._parseDate,value:u.value,isRequired:!0,initialPickerDate:o?o.suggestedStartDateUTC:undefined,strings:s})),i.createElement("div",{className:y.css("date-picker-wrapper","create-iteration-date",{"date-picker-wrapper--invalid":!e.pristine&&!e.validationResult.isValid})},i.createElement(h.DatePicker,{ariaLabel:f.EndDateFieldLabel,label:f.EndDateFieldLabel,className:"date-picker",allowTextInput:!0,formatDate:this._formatDate,onSelectDate:this._onEndDateFieldChanged,parseDateFromString:this._parseDate,minDate:u.value,isRequired:!0,strings:s,value:e.value}))),i.createElement("div",{className:"sprint-editor-form-section"},i.createElement(g.TreePicker,{"aria-label":f.ParentIterationFieldTitle,disabled:l||a==="edit",errorMessage:!t.pristine&&!t.validationResult.isValid?t.validationResult.errorMessage:"",tree:this.props.projectIterationHierarchy,label:f.ParentIterationFieldTitle,labelProps:{required:!0},onValueSelected:this._onParentIterationPathChanged,openCalloutOnFocus:!1,selectedValue:t.value.node||t.value.path})))},t.prototype.renderFormOptionToggle=function(){var s=this.props.selectedTeamDaysOff,r=this.state,e=r.formMode,h=r.selectedIterationPathField,t=null,o=!1,n;return e==="select"&&(n=h.value.node,n&&(n.startDate&&n.finishDate?t=u.IterationDateUtil.getNumberOfWorkingDays(k.shiftToUTC(n.startDate),k.shiftToUTC(n.finishDate),s,[]):o=!0)),i.createElement("div",{className:"form-footer-container"},t!=null&&i.createElement(nt.FormatComponent,{format:f.SelectedIterationWorkingDaysText,elementType:"div"},i.createElement("b",null,d.format(f.WorkingDaysText,t))),o&&i.createElement("div",null,f.SelectedIterationUnsetWorkingDaysText),i.createElement(l.Link,{className:"form-option-toggle",onClick:this._onFormOptionToggled,type:"button"},e==="create"?f.SelectIterationToggleText:f.CreateIterationToggleText))},t.prototype.renderSubmitSection=function(){var n=this.props,t=n.isCreating,r=n.onCancel,u=this.state.formMode,e=t||!this._isFormValid(this._getValidationResults());return i.createElement("div",{className:"submit-buttons-container"},t&&i.createElement(a.Spinner,null),i.createElement(s.PrimaryButton,{disabled:e,type:"submit",className:"sprint-editor-form-submit"},u==="edit"?f.Save:f.CreateButtonText),i.createElement(s.DefaultButton,{onClick:r,className:"sprint-editor-form-cancel"},f.CancelButtonText))},t.prototype._getValidationResults=function(){return{nameField:this.state.nameField.validationResult,endDateField:this.state.endDateField.validationResult,startDateField:this.state.startDateField.validationResult,parentIterationPathField:this.state.parentIterationPathField.validationResult,selectedIterationPathField:this.state.selectedIterationPathField.validationResult}},t.prototype._validateForm=function(n,t){n===void 0&&(n=this.props);t===void 0&&(t=this.state);var l=n.projectIterationHierarchy,o=n.selectedTeamBacklogIteration,a=n.selectedTeamIterationPaths,s=t.nameField,r=t.startDateField,h=t.endDateField,u=t.parentIterationPathField,f=t.selectedIterationPathField,c=u.value.node,i={nameField:e.SprintEditorFormValidators.validateName(s.value,c),endDateField:e.SprintEditorFormValidators.validateEndDate(r.value,h.value),startDateField:e.SprintEditorFormValidators.validateStartDate(r.value),parentIterationPathField:e.SprintEditorFormValidators.validateParentIterationValue(u.value.path,c,o),selectedIterationPathField:e.SprintEditorFormValidators.validateSelectedIteration(f.value.path,f.value.node,l,a,o)};return this.setState({nameField:__assign(__assign({},s),{validationResult:i.nameField}),endDateField:__assign(__assign({},h),{validationResult:i.endDateField}),startDateField:__assign(__assign({},r),{validationResult:i.startDateField}),parentIterationPathField:__assign(__assign({},u),{validationResult:i.parentIterationPathField}),selectedIterationPathField:__assign(__assign({},f),{validationResult:i.selectedIterationPathField})}),i},t.prototype._isFormValid=function(n,t){return t===void 0&&(t=this.state.formMode),t==="select"?n.selectedIterationPathField.isValid:n.nameField.isValid&&n.endDateField.isValid&&n.startDateField.isValid&&n.parentIterationPathField.isValid},t.prototype._computeSuggestedDateInformation=function(n,t){var i;if(n&&n.children&&n.children.length>0&&(i=this._findLastSiblingWithDates(n),i)){var r=u.IterationDateUtil.getIterationDateDefaultInformation(i.startDate,i.finishDate,t),f=r.suggestedStartDate,e=r.workingDaysOffset;return{suggestedStartDateUTC:k.shiftToUTC(f),workingDaysOffset:e}}return null},t.prototype._findLastSiblingWithDates=function(n){for(var t,r,i=n.children.length-1;i>=0;i--)if(t=n.children[i],t.startDate&&t.finishDate){r=t;break}return r},t.prototype._getNewFieldState=function(n,t){var i=null,u={isValid:!0},r=null,f={isValid:!0};return t&&t.suggestedStartDateUTC&&(i=t.suggestedStartDateUTC,u=e.SprintEditorFormValidators.validateStartDate(i),r=new Date(i),r.setDate(r.getDate()+t.workingDaysOffset),f=e.SprintEditorFormValidators.validateEndDate(i,r)),{parentIterationPathField:{value:n.suggestedParentNode?{path:it.NodeHelpers.getPath(n.suggestedParentNode,1),node:n.suggestedParentNode}:{path:null,node:null},validationResult:{isValid:!0},pristine:!0},nameField:{value:"",validationResult:{isValid:!0},pristine:!0},startDateField:{value:i,validationResult:u,pristine:!0},endDateField:{value:r,validationResult:f,pristine:!0}}},t.prototype._getEditFieldState=function(n){var t=n.editingIteration.parent.parent&&n.editingIteration.parent.parent.structure===w.INodeStructureType.Project?n.editingIteration.parent.parent:n.editingIteration.parent;return{parentIterationPathField:{value:{path:it.NodeHelpers.getPath(t,1),node:t},validationResult:{isValid:!0},pristine:!0},nameField:{value:n.editingIteration.name,validationResult:{isValid:!0},pristine:!0},startDateField:{value:n.editingIteration.startDate?k.shiftToUTC(n.editingIteration.startDate):null,validationResult:{isValid:!0},pristine:!0},endDateField:{value:n.editingIteration.finishDate?k.shiftToUTC(n.editingIteration.finishDate):null,validationResult:{isValid:!0},pristine:!0}}},t}(y.BaseComponent);t.SprintEditorForm=rt});

define("Presentation/Scripts/TFS/Components/Messages",["require","exports","react","OfficeFabric/MessageBar","OfficeFabric/Link","VSS/LoaderPlugins/Css!Presentation/Components/Messages"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.Messages=void 0;var f=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.shouldComponentUpdate=function(n){if(this.props.messages!==n.messages)return!0;var t=this.props.messages&&n.messages&&this.props.messages.length===n.messages.length;return t?this.props.messages.some(function(t,i){return t.id!==n.messages[i].id}):!0},t.prototype.render=function(){var t=this,n;return this.props.messages?(n=this.props.messages.map(function(n){return t._renderMessage(n)}),!n||n.length===0)?null:i.createElement("div",{className:"group-message"},n):null},t.prototype._renderMessage=function(n){var f=this,t;return n.children?i.createElement(r.MessageBar,{key:"message-".concat(n.id),messageBarType:n.messageType,isMultiline:!!n.link,onDismiss:n.closeable?function(){return f.props.onCloseMessage(n.id,n.persistDismissal)}:null},n.children):(t=null,n.link&&(t=i.createElement("span",null,i.createElement("br",null),i.createElement("br",null),i.createElement(u.Link,{href:n.link.href},n.link.text))),i.createElement(r.MessageBar,{key:"message-".concat(n.id),messageBarType:n.messageType,isMultiline:!!n.link,onDismiss:n.closeable?function(){return f.props.onCloseMessage(n.id,n.persistDismissal)}:null},i.createElement("div",{className:"group-message-container"},n.message),t))},t}(i.Component);t.Messages=f});

define("Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorFormPage",["require","exports","react","Agile/Scripts/Resources/TFS.Resources.SprintsHub","Agile/Scripts/Resources/TFS.Resources.SprintsHub.SprintEditor","Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorForm","OfficeFabric/ComboBox","OfficeFabric/Label","OfficeFabric/Utilities","Presentation/Scripts/TFS/Components/InfoIcon","Presentation/Scripts/TFS/Components/Messages","VSSUI/VssIcon","VSS/LoaderPlugins/Css!Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorFormPage"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorFormPage=void 0;var a=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onSelectedTeamChanged=function(n){var t=i.props.onTeamChanged;t&&n&&t(n.key.toString())},i._resolveSprintEditorForm=function(n){i._SprintEditorForm=n},i._resolveTeamComboBox=function(n){i._teamComboBox=n},i._teamComboInfoId=s.getId("sprint-editor-form-page"),i}return __extends(t,n),t.prototype.componentDidMount=function(){var n=this.props.hideTeamSelection;!n&&this._teamComboBox?this._teamComboBox.focus():this._SprintEditorForm&&this._SprintEditorForm.focusInitialElement()},t.prototype.render=function(){var n=this.props,t=n.editingIteration,e=n.hasFatalError,o=n.isFetching,s=n.isCreating,h=n.nextSuggestedIterationPath,c=n.projectIterationHierarchy,a=n.onCancel,v=n.onCreateIteration,y=n.onEditIteration,p=n.onSelectIteration,w=n.selectedTeamBacklogIteration,b=n.selectedTeamDaysOff,k=n.selectedTeamIterationPaths,d=n.suggestedParentNode;return i.createElement("div",{className:"sprint-editor-page"},this._renderMessages(),!e&&[i.createElement("h1",{className:"sprint-editor-page-title",key:"title"},i.createElement(l.VssIcon,{iconType:1,iconName:"sprint"}),i.createElement("span",{className:"sprint-editor-page-title-header"},t?u.EditSprint:r.NewSprint)),i.createElement("div",{className:"sprint-editor-form",key:"form"},this.renderTeamSection(),i.createElement(f.SprintEditorForm,{componentRef:this._resolveSprintEditorForm,editingIteration:t,nextSuggestedIterationPath:h,selectedTeamBacklogIteration:w,selectedTeamDaysOff:b,selectedTeamIterationPaths:k,isCreating:s,isFetching:o,projectIterationHierarchy:c,suggestedParentNode:d,onCancel:a,onCreateIteration:v,onEditIteration:y,onSelectIteration:p}))])},t.prototype._renderMessages=function(){var n=this.props,t=n.messages,r=n.onCloseMessage;return i.createElement(c.Messages,{messages:t,onCloseMessage:r})},t.prototype.renderTeamSection=function(){var n=this.props,r=n.hideTeamSelection,t=n.selectedTeam;if(!r)return i.createElement("div",{className:"team-selection-box"},i.createElement("div",{className:"team-label-container"},i.createElement(o.Label,{className:"team-label",required:!0},u.TeamHeaderTitle),i.createElement(h.InfoIcon,{id:this._teamComboInfoId,className:"team-help",directionalHint:9,iconProps:{iconType:0,iconName:"Info"},infoText:u.TeamExtraInfoText})),i.createElement(e.VirtualizedComboBox,{componentRef:this._resolveTeamComboBox,"aria-describedby":this._teamComboInfoId,"aria-label":u.TeamHeaderTitle,selectedKey:t?t.id:undefined,options:this._getTeamComboBoxOptions(),autoComplete:"on",allowFreeform:!0,onChanged:this._onSelectedTeamChanged,useComboBoxAsMenuWidth:!0}))},t.prototype._getTeamComboBoxOptions=function(){var n=this.props.teams;return n?n.map(function(n){return{key:n.id,text:n.name}}):[]},t}(i.Component);t.SprintEditorFormPage=a});

define("Agile/Scripts/SprintsHub/SprintEditor/Selectors/SprintEditorSelectors",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorSelectors=void 0;var i;(function(n){function t(n){return{editingIteration:n.editingIteration,hasFatalError:n.hasFatalError,initialized:n.initialized,isCreatingSprint:n.isCreatingSprint,isFetchingTeamIterations:n.isFetchingTeamIterations,messages:n.messages,nextSuggestedIterationPath:n.nextSuggestedIterationPath,selectedTeamBacklogIteration:n.selectedTeamBacklogIteration,selectedTeamDaysOff:n.selectedTeamDaysOff||[],selectedTeamIterationPaths:n.selectedTeamIterationPaths,projectIterationHierarchy:n.projectIterationHierarchy,selectedTeam:n.selectedTeam,suggestedParentNode:n.suggestedParentNode,teams:n.teams}}n.GetSprintEditorViewState=t})(i=t.SprintEditorSelectors||(t.SprintEditorSelectors={}))});

define("VSS/Flux/Component",["require","exports","react","VSS/Utils/Core"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.Component=void 0;var u=0,f=function(n){function t(t,i){var u=__construct(this,n,[t,i]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u.state=u.getState(),u._changeDelegate=r.delegate(u,u.onChange),u}return __extends(t,n),t.prototype.getKey=function(n){return u+=1,"".concat(n).concat(u)},t.prototype.getState=function(){return null},t.prototype.onChange=function(){var n=this.getState();this.setState(n)},t.prototype.getStore=function(){return null},t.prototype.componentDidMount=function(){var n=this.getStore();n&&n.addChangedListener(this._changeDelegate)},t.prototype.componentWillUnmount=function(){var n=this.getStore();n&&n.removeChangedListener(this._changeDelegate)},t}(i.Component);t.Component=f});

define("Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorView",["require","exports","react","Presentation/Scripts/TFS/Components/LoadingComponent","Presentation/Scripts/TFS/PerformanceTelemetryHelper","Agile/Scripts/Generated/HubConstants","Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorFormPage","Agile/Scripts/SprintsHub/SprintEditor/Selectors/SprintEditorSelectors","OfficeFabric/Utilities","VSS/Flux/Component","VSS/LoaderPlugins/Css!Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorView"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorView=void 0;var c=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onCloseMessage=function(n){var t=i.props.actionsCreator;t.clearPageMessage(n)},i._onCreateIteration=function(n,t,r,u){var e=i.props,s=e.actionsCreator,o=e.onCompleted,f=i.state.selectedTeam;s.createAndSubscribeIteration(f.id,f.name,n,t,r,u).then(function(n){n&&o&&o(f,n)})},i._onEditIteration=function(n,t,r,u){var f=i.props,o=f.actionsCreator,e=f.onCompleted,s=i.state.selectedTeam;o.editIteration(n,t,r,u).then(function(n){n&&e&&e(s,n)})},i._onSelectIteration=function(n){var r=i.props,f=r.actionsCreator,u=r.onCompleted,t=i.state.selectedTeam;f.subscribeToIteration(t.id,t.name,n).then(function(n){n&&u&&u(t,n)})},i._onSelectedTeamChanged=function(n){var t=i.props.actionsCreator;t.changeSelectedTeam(n)},i._onStoreChanged=function(){var n=i.props.store;i.setState(o.SprintEditorSelectors.GetSprintEditorViewState(n))},i.state=o.SprintEditorSelectors.GetSprintEditorViewState(t.store),i._ttiPublished=!1,i}return __extends(t,n),t.prototype.render=function(){var n=this.state,u=n.editingIteration,f=n.hasFatalError,o=n.initialized,h=n.isCreatingSprint,c=n.isFetchingTeamIterations,l=n.messages,a=n.nextSuggestedIterationPath,v=n.projectIterationHierarchy,y=n.selectedTeam,p=n.selectedTeamBacklogIteration,w=n.selectedTeamDaysOff,b=n.selectedTeamIterationPaths,k=n.suggestedParentNode,d=n.teams,t=this.props,g=t.hideTeamSelection,nt=t.onCancel;return o?i.createElement(e.SprintEditorFormPage,{editingIteration:u,isCreating:h,isFetching:c,hasFatalError:f,hideTeamSelection:g,messages:l,nextSuggestedIterationPath:a,projectIterationHierarchy:v,selectedTeam:y,selectedTeamBacklogIteration:p,selectedTeamDaysOff:w,selectedTeamIterationPaths:b,suggestedParentNode:k,teams:d,onCancel:nt,onCreateIteration:this._onCreateIteration,onEditIteration:this._onEditIteration,onSelectIteration:this._onSelectIteration,onTeamChanged:this._onSelectedTeamChanged,onCloseMessage:this._onCloseMessage}):i.createElement("div",{className:"sprint-editor-loading"},i.createElement(s.DelayedRender,{delay:1e3},i.createElement(r.LoadingComponent,null)))},t.prototype.componentWillMount=function(){var n=u.PerformanceTelemetryHelper.getInstance(f.SprintsHubConstants.HUB_NAME);n.isActive()&&n.split("".concat(f.SprintsHubConstants.HUB_NAME,"_PivotWillMount: ").concat(f.SprintsHubRoutingConstants.NewPivot))},t.prototype.componentDidMount=function(){var t=this.props.store;n.prototype.componentDidMount.call(this);t.addChangedListener(this._onStoreChanged);this._publishTTI()},t.prototype.componentDidUpdate=function(){this._publishTTI()},t.prototype.componentWillUnmount=function(){var n=this.props.store;n.removeChangedListener(this._onStoreChanged)},t.prototype.getStore=function(){return this.props.store},t.prototype.getState=function(){return o.SprintEditorSelectors.GetSprintEditorViewState(this.props.store)},t.prototype._publishTTI=function(){if(!this._ttiPublished&&this.state.initialized){this._ttiPublished=!0;var n=u.PerformanceTelemetryHelper.getInstance(f.SprintsHubConstants.HUB_NAME);n.isActive()&&n.end()}},t}(h.Component);t.SprintEditorView=c});

define("Agile/Scripts/SprintsHub/SprintEditor/Store/SprintEditorStore",["require","exports","Agile/Scripts/Common/IterationDateUtil","Agile/Scripts/Resources/TFS.Resources.SprintsHub.SprintEditor","OfficeFabric/MessageBar","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/Flux/Store","VSS/Utils/String","VSS/Utils/Tree","VSS/VSS","WorkItemTracking/Scripts/Utils/NodeHelpers"],function(n,t,i,r,u,f,e,o,s,h,c,l){var v,a;Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorStore=void 0;v=function(n){function t(t){var i=__construct(this,n,[]);for(var f in i)i.hasOwnProperty(f)&&(this[f]=i[f]);return i._messages=[],i._handleInitialized=function(){i._initialized=!0;i.emitChanged()},i._handleInitializeFailed=function(n){i._initialized=!0;i._createFatalError(n);i.emitChanged()},i._handleFetchProjectIterationsFailed=function(n){i._createFatalError(n,r.CouldNotLoadProjectIterations);i.emitChanged()},i._handleFetchProjectIterationsSucceeded=function(n){i._projectIterationHierarchy=n;i._setSuggestedParentNode(i._projectIterationHierarchy,i._selectedTeamIterationPaths);i.emitChanged()},i._handleSetEditingIteration=function(n){i._editingIteration=l.NodeHelpers.findByGuid(i._projectIterationHierarchy,n)},i._handleFetchTeams=function(n){if(i._teams=n,!i._teams||n.length===0){var t=new a(u.MessageBarType.warning,r.NoCreateNodePermission,!1);i._setPageMessage(t)}i.emitChanged()},i._handleBeginFetchTeamIterations=function(){i._fetchingTeamIterations=!0;i.emitChanged()},i._handleFetchTeamIterationsFailed=function(n){i._fetchingTeamIterations=!1;i._createFatalError(n,r.CouldNotLoadTeamIterations);i.emitChanged()},i._handleFetchTeamIterationPathsSucceeded=function(n){i._fetchingTeamIterations=!1;i._selectedTeamIterationPaths=n.teamIterationPaths;i._nextSuggestedIterationPath=n.nextSuggestedIterationPath;i._setSuggestedParentNode(i._projectIterationHierarchy,n.teamIterationPaths);i.emitChanged()},i._handleFetchTeamSettingsFailed=function(n){i._createFatalError(n,r.CouldNotLoadTeamSettings);i.emitChanged()},i._handleChangeSelectedTeam=function(n){i._selectedTeamId=n;i._selectedTeamIterationPaths=[];i.emitChanged()},i._handleFetchTeamSettings=function(n){i._setTeamBacklogIteration(n);i._setTeamDaysOff(n);i.emitChanged()},i._handleBeginCreateNewSprint=function(){i._creatingSprint=!0;i.emitChanged()},i._handleCreateNewSprintFailed=function(n){i._creatingSprint=!1;i._createErrorMessage(n);i.emitChanged()},i._handleCreateNewSprintSucceeded=function(){i._creatingSprint=!1;i.emitChanged()},i._handleClearPageMessage=function(n){for(var t=i._messages,r=0,u=t.length;r<u;r++)if(t[r].id===n){t.splice(r,1);i._messages=t.slice();i.emitChanged();break}},i._attachActionListeners(t),i._initialized=!1,i._fetchingTeamIterations=!1,i._creatingSprint=!1,i}return __extends(t,n),Object.defineProperty(t.prototype,"editingIteration",{get:function(){return this._editingIteration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"messages",{get:function(){return this._messages},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFatalError",{get:function(){return this._hasFatalError},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSuggestedIterationPath",{get:function(){return this._nextSuggestedIterationPath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"projectIterationHierarchy",{get:function(){return this._projectIterationHierarchy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suggestedParentNode",{get:function(){return this._suggestedParentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"teams",{get:function(){return this._teams},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedTeamId",{get:function(){return this._selectedTeamId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedTeam",{get:function(){var n=this;return this._teams?this._teams.filter(function(t){return t.id===n._selectedTeamId})[0]:undefined},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedTeamBacklogIteration",{get:function(){var t=this,n;return this._selectedTeamBacklogIteration||this._projectIterationHierarchy&&this._selectedTeamBacklogIterationId&&(h.traversePreOrder(this._projectIterationHierarchy,function(n){return n.children},function(i){if(n)return!1;i.guid===t._selectedTeamBacklogIterationId&&(n=i)}),this._selectedTeamBacklogIteration=n),this._selectedTeamBacklogIteration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedTeamDaysOff",{get:function(){return this._selectedTeamDaysOff},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedTeamIterationPaths",{get:function(){return this._selectedTeamIterationPaths},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialized",{get:function(){return this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFetchingTeamIterations",{get:function(){return this._fetchingTeamIterations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCreatingSprint",{get:function(){return this._creatingSprint},enumerable:!1,configurable:!0}),t.prototype._attachActionListeners=function(n){n.initialized.addListener(this._handleInitialized);n.initializeFailed.addListener(this._handleInitializeFailed);n.fetchTeams.addListener(this._handleFetchTeams);n.fetchProjectIterationsFailed.addListener(this._handleFetchProjectIterationsFailed);n.fetchProjectIterationsSucceeded.addListener(this._handleFetchProjectIterationsSucceeded);n.setEditingIteration.addListener(this._handleSetEditingIteration);n.beginFetchTeamIterationPaths.addListener(this._handleBeginFetchTeamIterations);n.fetchTeamIterationPathsFailed.addListener(this._handleFetchTeamIterationsFailed);n.fetchTeamIterationPathsSucceeded.addListener(this._handleFetchTeamIterationPathsSucceeded);n.changeSelectedTeam.addListener(this._handleChangeSelectedTeam);n.fetchTeamSettings.addListener(this._handleFetchTeamSettings);n.fetchTeamSettingsFailed.addListener(this._handleFetchTeamSettingsFailed);n.beginCreateNewSprint.addListener(this._handleBeginCreateNewSprint);n.createNewSprintFailed.addListener(this._handleCreateNewSprintFailed);n.createNewSprintSucceeded.addListener(this._handleCreateNewSprintSucceeded);n.clearPageMessage.addListener(this._handleClearPageMessage)},t.prototype._createErrorMessage=function(n,t,i){i===void 0&&(i=!0);var r=t?"".concat(t,": ").concat(n.message):c.getErrorMessage(n),f=new a(u.MessageBarType.error,r,i);this._setPageMessage(f)},t.prototype._createFatalError=function(n,t){this._createErrorMessage(n,t,!1);this._hasFatalError=!0},t.prototype._setPageMessage=function(n){if(n){for(var t=0,i=this._messages.length;t<i;t++)if(this._messages[t].message===n.message)return;this._messages.push(n);this._messages=this._messages.slice()}},t.prototype._setTeamBacklogIteration=function(n){if(this._selectedTeamBacklogIteration=null,this._selectedTeamBacklogIterationId=s.isEmptyGuid(n.backlogIteration.id)?null:n.backlogIteration.id,this._missingBacklogIterationMessageId&&this._handleClearPageMessage(this._missingBacklogIterationMessageId),!this._selectedTeamBacklogIterationId){var t=new a(u.MessageBarType.error,r.NoTeamBacklogError,!1);this._missingBacklogIterationMessageId=t.id;this._setPageMessage(t)}},t.prototype._setTeamDaysOff=function(n){this._selectedTeamDaysOff=i.IterationDateUtil.getWeekendsFromWorkingDays(n.workingDays)},t.prototype._setSuggestedParentNode=function(n,t){var r,i;n&&(this._suggestedParentNode=undefined,t&&(r=t[t.length-1],r&&(i=l.NodeHelpers.findByPath(n,r),i&&(this._suggestedParentNode=i.parent.parent&&i.parent.parent.structure===f.INodeStructureType.Project?n:i.parent))),this._suggestedParentNode||(this._suggestedParentNode=n))},t}(o.Store);t.SprintEditorStore=v;a=function(){function n(n,t,i,r){i===void 0&&(i=!0);this.messageType=n;this.message=t;this.closeable=i;this.link=r;this.id=e.GUIDUtils.newGuid()}return n}()});

define("Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorCallout",["require","exports","react","Agile/Scripts/Resources/TFS.Resources.SprintsHub","Agile/Scripts/Resources/TFS.Resources.SprintsHub.SprintEditor","Agile/Scripts/SprintsHub/SprintEditor/ActionsCreator/SprintEditorActions","Agile/Scripts/SprintsHub/SprintEditor/ActionsCreator/SprintEditorActionsCreator","Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorView","Agile/Scripts/SprintsHub/SprintEditor/Store/SprintEditorStore","OfficeFabric/Callout","OfficeFabric/FocusTrapZone","OfficeFabric/MessageBar","OfficeFabric/Utilities","TfsCommon/Scripts/Navigation/SettingsService","VSS/Service","VSS/LWP","VSS/LoaderPlugins/Css!Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorCallout"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){Object.defineProperty(t,"__esModule",{value:!0});t.SprintEditorCallout=void 0;var w="SprintEditorCalloutMessageBarVisible",b=function(n){function t(t){var i=__construct(this,n,[t]),r,u;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onCancel=function(){var n=i.props.onDismiss;n&&n()},i._onMessageDismiss=function(){i.setState({messageVisible:!1});y.getLocalService(v.SettingsService).setUserSetting(w,!1)},u=y.getLocalService(v.SettingsService).getUserSetting(w,!0),i.state={messageVisible:!t.hideStatusMessage&&u},i._actions=new f.SprintEditorActions,i._actionsCreator=new e.SprintEditorActionsCreator(i._actions),i._store=new s.SprintEditorStore(i._actions),i._actionsCreator.initialize(t.currentTeam),i}return __extends(t,n),t.prototype.render=function(){var n=this.state.messageVisible,t=__assign({},this.props);return delete t.currentTeam,i.createElement(h.Callout,__assign({},t,{className:a.css("sprint-editor-callout",this.props.className,{"sprint-editor-callout--message-visible":n}),role:"dialog",ariaLabel:r.NewSprint}),i.createElement(c.FocusTrapZone,{isClickableOutsideFocusTrap:!0,className:"sprint-editor-callout-content"},n&&i.createElement(l.MessageBar,{messageBarType:l.MessageBarType.info,onDismiss:this._onMessageDismiss},u.DialogMessage),i.createElement(o.SprintEditorView,{actionsCreator:this._actionsCreator,store:this._store,hideTeamSelection:!0,onCancel:this._onCancel,onCompleted:this.props.onCompleted})))},t}(i.Component);t.SprintEditorCallout=b;p.registerLWPComponent("sprintCallout",b)});

define("Agile/Scripts/BacklogsHub/Planning/Components/PlanningView",["require","exports","react","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants","Agile/Scripts/BacklogsHub/Planning/ActionsCreator/PlanningActions","Agile/Scripts/BacklogsHub/Planning/ActionsCreator/PlanningActionsCreator","Agile/Scripts/BacklogsHub/Planning/ActionsCreator/PlanningDataProvider","Agile/Scripts/BacklogsHub/Planning/ActionsCreator/PlanningWorkItemEventSubscriber","Agile/Scripts/BacklogsHub/Planning/Components/PlanningRow","Agile/Scripts/BacklogsHub/Planning/Selectors/PlanningSelectors","Agile/Scripts/BacklogsHub/Planning/Store/PlanningStore","Agile/Scripts/Common/Components/RightPaneHeader/RightPaneHeader","Agile/Scripts/Common/HubTelemetryHelper","Agile/Scripts/Common/HubUrlUtilities","Agile/Scripts/Generated/HubConstants","Agile/Scripts/ProductBacklog/ProductBacklogMembershipEvaluator","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","Agile/Scripts/SprintsHub/SprintEditor/Components/SprintEditorCallout","OfficeFabric/Button","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.IllustrationUrlUtils","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Context","VSS/Locations","VSS/Utils/Core","VSS/Utils/String","VSSPreview/Flux/Components/Format","VSSUI/ZeroData","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/TFS.WorkItemTracking","VSS/Diag","VSS/Utils/String","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/TFS.WorkItemTracking","VSS/Events/Action","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Agile/Scripts/BacklogsHub/Planning/Constants","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/Planning/Components/PlanningView"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt){Object.defineProperty(t,"__esModule",{value:!0});t.PlanningView=void 0;var wt=function(n){function t(t,i){var s=__construct(this,n,[t,i]),w,b,l,k;for(w in s)s.hasOwnProperty(w)&&(this[w]=s[w]);return s._onOpenNewSprintCallout=function(n){s._newSprintCalloutTarget=n.currentTarget;s._calloutTargetDirection=9;s._actionsCreator.toggleNewSprintCallout(!0)},s._onOpenNewSprintCalloutZeroDay=function(n){s._newSprintCalloutTarget=n.currentTarget;s._calloutTargetDirection=5;s._actionsCreator.toggleNewSprintCallout(!0);a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.PLANNING_NEW_SPRINT_OPENED,{})},s._onNewSprintCalloutDismiss=function(){s._newSprintCalloutTarget=null;s._actionsCreator.toggleNewSprintCallout(!1)},s._onNewSprintCalloutCompleted=function(){s._actionsCreator.toggleNewSprintCallout(!1);window.location.reload()},s._onStoreChanged=function(){s.setState(h.getState(s._store))},s._onBacklogClicked=function(){var t=s.props.team,n;a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.PLANNING_NAVIGATE_TO_BACKLOG,{});n=s._getBacklogUrl();s._canPerformXhrNavigation(t)?rt.delay(null,0,function(){return v.BacklogsUrls.navigateToBacklogsHubUrl(n)}):window.location.href=n},s._onIterationClicked=function(n,t){var u=s.props.team,i;a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.PLANNING_NAVIGATE_TO_ITERATION,{});i=s._getIterationUrl(t);s._canPerformXhrNavigation(u)?rt.delay(null,0,function(){return v.SprintsUrls.navigateToSprintsHubUrl(i)}):window.location.href=i},s._onWorkItemsDropped=function(n,t,i,u){var f=s.props.moveWorkItemsToIteration,e=s.state.backlogIteration;s._showPlanningToast(n,i);ut.equals(t,e.iterationPath,!0)?a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.PLANNING_ITEM_DROPPED_BACKLOG,{count:n.length}):a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.PLANNING_ITEM_DROPPED,{count:n.length});f&&f(n,t,u)},s._getBacklogUrl=function(){return v.BacklogsUrls.getBacklogContentUrl({teamIdOrName:s.props.team.name,pivot:y.BacklogsHubConstants.BacklogPivot,preserveQueryParameters:!0})},s._getIterationUrl=function(n){var t=s.props.team;return v.SprintsUrls.getExternalSprintContentUrl(t.name,n.iterationPath,y.SprintsHubRoutingConstants.SprintBacklogPivot)},b=new u.PlanningActions,l=new e.PlanningDataProvider(t.team.id),s._actionsCreator=new f.PlanningActionsCreator(b,l),s._store=new c.PlanningStore(b),k=s._getWorkItemManager(),s._workItemEventsSubscriber=new o.PlanningWorkItemEventSubscriber(s._actionsCreator,function(){return new p.ProductBacklogMembershipEvaluator(t.team.id)},k,l.getTeamFieldReferenceName(),l.getEffortsFieldName(),l.getRequirementWorkItemTypes()),s.state=h.getState(s._store),s}return __extends(t,n),t.prototype.componentWillMount=function(){this._store.addChangedListener(this._onStoreChanged);this._actionsCreator.initialize();this._workItemEventsSubscriber.initialize();a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.PLANNING_OPENED,{})},t.prototype.componentDidUpdate=function(n){this.props.selectedIteration&&n.selectedIteration!==this.props.selectedIteration&&this._actionsCreator.reloadPlanningData()},t.prototype.componentWillUnmount=function(){this._store.removeChangedListener(this._onStoreChanged);a.BacklogsHubTelemetryHelper.publishTelemetry(r.BacklogsHubTelemetryConstants.PLANNING_CLOSED,{});this._workItemEventsSubscriber&&(this._workItemEventsSubscriber.dispose(),this._workItemEventsSubscriber=null);vt.getService().unregisterActionWorkers(pt.PlanningMessage.PLANNING_TOAST_MESSAGE)},t.prototype.render=function(){var r=this,t=this.state,n=t.iterations,u=t.isNewSprintCalloutVisible;return i.createElement(l.RightPaneHeader,{title:w.PlanningPaneTitle,description:w.PlanningPaneDescription,onDismissClicked:this.props.onDismiss},i.createElement("div",{className:"sprint-planning-view",role:"complementary","aria-label":w.PlanningPaneTitle},n&&n.length>0&&[i.createElement("div",{className:"sprint-planning-row-list",key:"list"},this._renderBacklogIterationRow(),n&&n.map(function(n){return r._renderPlanningRow(n)})),i.createElement("div",{className:"sprint-planning-actions",key:"actions"},i.createElement(k.ActionButton,{iconProps:{iconName:"Add"},onClick:this._onOpenNewSprintCallout},w.NewSprint))],this._renderZeroData(),u&&this._renderNewSprintCallout()))},t.prototype._renderBacklogIterationRow=function(){var t=this.props,r=t.getWorkItemDragInfo,u=t.team,n=this.state.backlogIteration;if(n)return i.createElement(s.PlanningRow,{key:n.id,backlogUrl:this._getBacklogUrl(),iteration:n,isBacklogIteration:!0,getWorkItemDragInfo:r,onWorkItemsDropped:this._onWorkItemsDropped,onBacklogClicked:this._onBacklogClicked,team:u})},t.prototype._showPlanningToast=function(n,t){var f=this,r,u,i;t&&(r=ot.WorkItemManager.get(lt.ProjectCollection.getDefaultConnection().getService(at.WorkItemStore)),n&&n.length===1?r.beginGetWorkItem(n[0],function(n){u=n.getFieldValue(yt.CoreFieldRefNames.Title);i=ct.format(w.Planning_Move_Toast_Single,u,t);vt.getService().performAction(pt.PlanningMessage.PLANNING_TOAST_MESSAGE,{message:f._createToast(t,i)})}):n.length>1&&(i=ct.format(w.Planning_Move_Toast_Multiple,n.length,t),vt.getService().performAction(pt.PlanningMessage.PLANNING_TOAST_MESSAGE,{message:this._createToast(t,i)})))},t.prototype._createToast=function(n,t){var i=$("<div>"),r=$("<div>").appendTo(i);return r.text(t),i},t.prototype._renderPlanningRow=function(n){var u=this.props,f=u.getWorkItemDragInfo,e=u.team,t=this.state,o=t.currentIterationId,h=t.iterationEfforts,c=t.iterationLoading,l=t.iterationSummaryErrors,a=t.iterationTeamDaysOffUTC,v=t.weekends,r=h[n.id],y=!!c[n.id],p=l[n.id],w=a[n.id],b=r?r.countByWorkItemType:{},k=r?r.totalEfforts:0;return i.createElement(s.PlanningRow,{key:n.id,iterationUrl:this._getIterationUrl(n),iteration:n,isCurrent:o===n.id,effort:k,weekends:v,teamDaysOffUTC:w,iterationDetailsLoading:y,workItemCountByName:b,summaryError:p,getWorkItemDragInfo:f,onWorkItemsDropped:this._onWorkItemsDropped,onIterationClicked:this._onIterationClicked,team:e})},t.prototype._renderNewSprintCallout=function(){var n=this.props.team;return i.createElement(b.SprintEditorCallout,{currentTeam:n,target:this._newSprintCalloutTarget,directionalHint:this._calloutTargetDirection||9,hideStatusMessage:!0,onDismiss:this._onNewSprintCalloutDismiss,onCompleted:this._onNewSprintCalloutCompleted})},t.prototype._renderZeroData=function(){var n=this.state.iterations,t;if(!n||n.length===0)return t=i.createElement(ft.FormatComponent,{format:w.PrioritizeWithSprints_Format},i.createElement("a",{href:"https://go.microsoft.com/fwlink/?linkid=617156"},w.PrioritizeWithSprints_Link)),i.createElement("div",{className:"sprint-planning-zero-data"},i.createElement(et.ZeroData,{imagePath:it.urlHelper.getVersionedContentUrl(g.WorkZeroDataIllustrationPaths.GetStartedWithSprints),imageAltText:w.GetStartedWithSprints,primaryText:w.GetStartedWithSprints,secondaryText:t,actionText:w.NewSprint,actionType:0,onActionClick:this._onOpenNewSprintCalloutZeroDay}))},t.prototype._canPerformXhrNavigation=function(n){var t=tt.getDefaultWebContext();return!t.team||ut.equals(t.team.id,n.id,!0)},t.prototype._getWorkItemManager=function(){var n=d.TfsContext.getDefault(),t=nt.ProjectCollection.getConnection(n).getService(st.WorkItemStore);return ot.WorkItemManager.get(t)},t}(i.Component);t.PlanningView=wt});

define("Agile/Scripts/Common/Components/AgileFilterBar/AgileFilterBar",["require","exports","react","WorkItemTracking/Scripts/Controls/Filters/WorkItemFilter","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/AgileFilterBar/AgileFilterBar"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.AgileFilterBar=void 0;var u=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onFilterContextUpdated=function(){i._filterControlRef&&i._filterControlRef.update();i.setState({filterManager:i.props.filterContext.value.filterManager})},i._resolveFilterControlRef=function(n){i._filterControlRef=n},i._onDataUpdated=function(){i._filterControlRef&&i._filterControlRef.update()},i._onFilterUpdated=function(){var n=i.props.onFilterChanged,t=i.state.filterManager;n&&n(t.filter.getState())},i.state=t.filterContext.value&&t.filterContext.value.filterManager?{filterManager:t.filterContext.value.filterManager}:{filterManager:null},i}return __extends(t,n),t.prototype.componentWillMount=function(){this.state.filterManager&&(this.state.filterManager.activate(),this.props.filter&&this.props.filter.setDefaultState(r.generateDefaultFilterState(this.state.filterManager.filterFields)))},t.prototype.componentDidMount=function(){this.props.filterContext.subscribe(this._onFilterContextUpdated);this.state.filterManager&&this.state.filterManager.attachOnDataUpdated(this._onDataUpdated);var n=this.props.filterContext.value;n&&n.skipFocusOnMount?n.skipFocusOnMount=!1:n&&!n.skipFocusOnMount&&this._filterControlRef&&this._filterControlRef.focus()},t.prototype.componentWillReceiveProps=function(n){n.filterContext!==this.props.filterContext&&(this.props.filterContext.unsubscribe(this._onFilterContextUpdated),n.filterContext&&n.filterContext.subscribe(this._onFilterContextUpdated))},t.prototype.componentWillUpdate=function(n,t){t.filterManager!==this.state.filterManager&&(this.state.filterManager&&this.state.filterManager.detachOnDataUpdated(this._onDataUpdated),t.filterManager&&(t.filterManager.attachOnDataUpdated(this._onDataUpdated),t.filterManager.activate(),n.filter&&n.filter.setDefaultState(r.generateDefaultFilterState(t.filterManager.filterFields))))},t.prototype.render=function(){var t=this.props,u=t.filter,f=t.onDismissClicked,n=this.state.filterManager;return n?i.createElement("div",{className:"agile-filter-bar"},i.createElement(r.WorkItemFilter,{ref:this._resolveFilterControlRef,filter:u,filterUpdatedCallback:this._onFilterUpdated,fields:n.filterFields,dataSource:n.dataSource,setDefaultFilter:!1,onDismissClicked:f})):null},t.prototype.componentWillUnmount=function(){this._filterControlRef=null;this.props.filterContext.unsubscribe(this._onFilterContextUpdated);this.state.filterManager&&this.state.filterManager.detachOnDataUpdated(this._onDataUpdated)},t}(i.Component);t.AgileFilterBar=u});

define("Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCalloutActions",["require","exports","VSS/Flux/Action"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogAddItemCalloutActions=void 0;var r=function(){function n(){this.beginLoadWorkItemType=new i.Action;this.workItemTypeLoaded=new i.Action;this.readLocalSettings=new i.Action;this.insertLocationChanged=new i.Action;this.selectedWorkItemTypeChanged=new i.Action;this.errorOnLoad=new i.Action}return n}();t.BacklogAddItemCalloutActions=r});

define("Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCalloutActionsCreator",["require","exports","Agile/Scripts/Common/Utils","Presentation/Scripts/TFS/TFS.WebSettingsService","VSS/Service","VSS/Utils/Array","VSS/Utils/String","VSS/VSS"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogAddItemCalloutActionsCreator=void 0;var s=function(){function n(n){var t=this;this._onError=function(n){o.handleError(n);t._actions.errorOnLoad.invoke(null)};this._actions=n}return n.prototype.initialize=function(n,t,i){var r=this._getWorkItemUserSetting(n);this._actions.readLocalSettings.invoke({insertLocation:this._getSubmitButtonUserSetting(n),selectedWorkItemType:f.contains(i,r,e.ignoreCaseComparer)?r:f.contains(i,t,e.ignoreCaseComparer)?t:i.length>0?i[0]:null})},n.prototype.setSelectedInsertLocation=function(n,t){this._actions.insertLocationChanged.invoke(t);var i=u.getService(r.WebSettingsService);i.writeLocalSetting(this._getKeyForSubmitButtonUserSetting(n),t.toString(),r.WebSettingsScope.User)},n.prototype.loadWorkItemType=function(n){var t=this;this._actions.beginLoadWorkItemType.invoke(null);i.WorkItemUtils.beginGetWorkItemType(n).then(function(n){n.store.beginGetLinkTypes(function(){return t._actions.workItemTypeLoaded.invoke(n)},t._onError)},this._onError)},n.prototype.setSelectedWorkItemType=function(n,t){this._actions.selectedWorkItemTypeChanged.invoke(t);var i=u.getService(r.WebSettingsService);i.writeLocalSetting(this._getKeyForWorkItemUserSetting(n),t,r.WebSettingsScope.User);this.loadWorkItemType(t)},n.prototype._getSubmitButtonUserSetting=function(n){var i=u.getService(r.WebSettingsService),t=i.readLocalSetting(this._getKeyForSubmitButtonUserSetting(n),r.WebSettingsScope.User);return t?parseInt(t,10):0},n.prototype._getWorkItemUserSetting=function(n){var i=u.getService(r.WebSettingsService),t=i.readLocalSetting(this._getKeyForWorkItemUserSetting(n),r.WebSettingsScope.User);return t?t:null},n.prototype._getKeyForSubmitButtonUserSetting=function(n){return"AddCalloutSubmitSettings/Submit/".concat(n)},n.prototype._getKeyForWorkItemUserSetting=function(n){return"AddCalloutSubmitSettings/WorkItemType/".concat(n)},n}();t.BacklogAddItemCalloutActionsCreator=s});

define("Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCalloutStore",["require","exports","VSS/Flux/Store","WorkItemTracking/Scripts/Utils/PermissionHandler"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogAddItemCalloutStore=void 0;var u=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._loadingWorkItemType=function(){i._isLoadingWorkItemType=!0;i._currentWorkItemType=null;i.emitChanged()},i._handleLoadWorkItemType=function(n){i._isLoadingWorkItemType=!1;i._currentWorkItemType=n;i.emitChanged()},i._handleInsertLocationChanged=function(n){i._insertLocation=n;i.emitChanged()},i._handleSelectedWorkItemTypeChanged=function(n){i._selectedWorkItemType=n;i.emitChanged()},i._handleReadLocalSettings=function(n){i._insertLocation=n.insertLocation;i._selectedWorkItemType=n.selectedWorkItemType;i.emitChanged()},i._handleErrorOnLoad=function(){i._isLoadingWorkItemType=!1;i.emitChanged()},i._isLoadingWorkItemType=!1,i._currentWorkItemType=null,i._actions=t,i._actions.beginLoadWorkItemType.addListener(i._loadingWorkItemType),i._actions.workItemTypeLoaded.addListener(i._handleLoadWorkItemType),i._actions.readLocalSettings.addListener(i._handleReadLocalSettings),i._actions.insertLocationChanged.addListener(i._handleInsertLocationChanged),i._actions.selectedWorkItemTypeChanged.addListener(i._handleSelectedWorkItemTypeChanged),i._actions.errorOnLoad.addListener(i._handleErrorOnLoad),i}return __extends(t,n),Object.defineProperty(t.prototype,"currentWorkItemType",{get:function(){return this._currentWorkItemType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoadingWorkItemType",{get:function(){return this._isLoadingWorkItemType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"insertLocation",{get:function(){return r.hasAgileToolsBacklogManagementPermission()?this._insertLocation:2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedWorkItemType",{get:function(){return this._selectedWorkItemType},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._actions.beginLoadWorkItemType.removeListener(this._loadingWorkItemType);this._actions.workItemTypeLoaded.removeListener(this._handleLoadWorkItemType);this._actions=null;this._isLoadingWorkItemType=null;this._currentWorkItemType=null},t}(i.Store);t.BacklogAddItemCalloutStore=u});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/TextWorkItemControl",["require","exports","WorkItemTracking/Scripts/TFS.WorkItemTracking","VSS/Utils/Core","VSS/Utils/UI","VSS/Controls/Combos","VSS/Controls","WorkItemTracking/Scripts/OM/WorkItemConstants","q","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.TextWorkItemControl=void 0;var c=r.delegate,l=function(){function n(t,o,l){var a=this,v,y;this._disableShowOnFocus=!1;this._showDrop=!0;this._onWorkItemChangedDelegate=c(this,this._onWorkItemChanged);this._showComboTimeout=null;this._isEmptyBorder=null;this._isReadOnly=null;this._isInvalid=null;this._workItemControl=t;this._control=e.BaseControl.createIn(f.Combo,t._container,$.extend({mode:"text",disableTextSelectOnFocus:!0,maxAutoExpandDropWidth:n.CONTROL_MAX_WIDTH,setTitleOnlyOnOverflow:!0,isFocusableWhenDisabled:!0,change:function(){return a._control.delayExecute("combo change",150,!0,function(){t&&!a._control.isDisposed()&&t.flush()}),!1},id:t._options.controlId,focus:function(){a._setEmptyBorder(!1);a._showDropPopup()},blur:function(){a._setEmptyBorder();a._cancelDropShowTimeout();a._showDrop=!1;r.delay(a,n.COMBO_SHOW_HIDE_TIMEOUT,function(){a._showDrop=!0})}},l));this._control._bind("dropDownToggled",function(){a._disableShowOnFocus=!0;r.delay(a,n.COMBO_SHOW_HIDE_TIMEOUT,function(){a._disableShowOnFocus=!1})});this._control.getInput().click(function(){a._showDropPopup()});t._options.emptyText&&u.Watermark($("input",this._control.getElement()),{watermarkText:t._options.emptyText});this._setEmptyBorder();v=this._workItemControl.getFieldDefinition(this._workItemControl._fieldName);v&&(v.type===h.FieldType.Html||v.type===h.FieldType.PlainText)||(y=Math.min(t._options.maxLength||i.WorkItem.MAX_TITLE_LENGTH,i.WorkItem.MAX_TITLE_LENGTH),$("input",this._control.getElement()).attr("maxlength",y));l&&l.ariaLabel&&$("input",this._control.getElement()).attr("aria-label",l.ariaLabel);this._options=$.extend({dropSourceGeneratorAsync:function(n){return n.hasList()?s(function(){return n.getAllowedValues().map(function(t){return n.fieldDefinition.type===h.FieldType.Integer?r.convertValueToDisplayString(parseInt(t)):n.fieldDefinition.type===h.FieldType.Double?r.convertValueToDisplayString(parseFloat(t)):t})}):s(null)}},o);o&&o.disableSpellCheck&&$("input",this._control.getElement()).attr("spellcheck","false")}return n.prototype.dispose=function(){this._control&&(this._control.dispose(),this._control=null)},n.prototype.onResize=function(){this._control.hideDropPopup()},n.prototype._setEmptyBorder=function(n){if(n===void 0&&(n=null),n==null){var t=this._workItemControl._getFieldTextValue();n=$.trim(t)===""}this._isEmptyBorder!==n&&(this._isEmptyBorder=n,this._control.getElement().toggleClass("emptyBorder",n))},n.prototype._setReadOnly=function(n){this._isReadOnly!==n&&(this._isReadOnly=n,this._control.getElement().toggleClass("readonly",n))},n.prototype._setMode=function(n){this._control.getMode()!==n&&this._control.setMode(n)},n.prototype._cancelDropShowTimeout=function(){this._showComboTimeout&&(clearTimeout(this._showComboTimeout),this._showComboTimeout=null)},n.prototype._showDropPopup=function(){var t=this;this._workItemControl.isReadOnly()||this._control.getMode()!=="drop"||this._control.getComboType()==="date-time"||this._control.isDropVisible()||!this._showDrop||(this._cancelDropShowTimeout(),this._showComboTimeout=setTimeout(function(){t._disableShowOnFocus||t._control.showDropPopup()},n.COMBO_SHOW_HIDE_TIMEOUT))},n.prototype._updateDropSource=function(n){var i=this,t=this._control;this._options.dropSourceGeneratorAsync&&this._options.dropSourceGeneratorAsync(n).then(function(n){t&&!t.isDisposed()&&(n?(i._setMode("drop"),t.setSource(n)):i._setMode("text"))})},n.prototype.invalidate=function(n,t){var f=this._workItemControl,r,i,u,e;t?(r=this._options.allowEmpty?!t.isValidValueOrEmpty():!t.isValid(),n?this.setInvalid(r):(i=f.isReadOnly(),!i&&this._options.dropSourceGeneratorAsync?this._updateDropSource(t):this._setMode("text"),this._setReadOnly(i),u=f._getFieldTextValue(t),e=$.trim(this.getValue())==="",this.setValue(u),this.setInvalid(r),this.setEnabled(!i),$.trim(u)===""&&(e||this._control.getInput().trigger("blur")),this._setEmptyBorder())):(this._setMode("text"),this.clear(),this.setEnabled(!1))},n.prototype.getValue=function(){return this._control.getText()},n.prototype.setValue=function(n){return this._control.setText(n)},n.prototype.clear=function(){this.getValue()!==""&&(this.setValue(""),this._control.getInput().trigger("blur"))},n.prototype.setInvalid=function(n){this._isInvalid!==n&&(this._isInvalid=n,this._control.setInvalid(n))},n.prototype.setEnabled=function(n){this._control.getEnabled()!==n&&this._control.setEnabled(n)},n.prototype.setAdditionalValues=function(){},n.prototype.onBind=function(){this._workItemControl._workItem.attachWorkItemChanged(this._onWorkItemChangedDelegate)},n.prototype.onUnbind=function(){this._workItemControl._workItem.detachWorkItemChanged(this._onWorkItemChangedDelegate)},n.prototype._onWorkItemChanged=function(n,t){if(t&&t.change===o.WorkItemChangeType.PreSave&&this._control.isDropVisible()&&this._control.hideDropPopup(),t&&t.change===o.WorkItemChangeType.FieldAllowedValuesChange){var i=this._workItemControl,r=i._fieldName,u=i.isReadOnly();!u&&t.changedFields.hasOwnProperty(r)&&this._updateDropSource(t.changedFields[r])}},n.CONTROL_MAX_WIDTH=300,n.COMBO_SHOW_HIDE_TIMEOUT=100,n}();t.TextWorkItemControl=l});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/WorkItemStateControl",["require","exports","WorkItemTracking/Scripts/Controls/WorkItemForm/TextWorkItemControl","WorkItemTracking/Scripts/TFS.WorkItemTracking.Helpers"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemStateControl=void 0;var u=function(n){function t(t,i,r){var u=__construct(this,n,[t,i,r]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u._projectName=t._workItemType.project.name,u._workItemTypeName=t._workItemType.name,t._workItemType.stateColors&&(t._container.addClass("state-coloring-enabled"),u._stateColorCircle=$("<div><\/div>").addClass("state-circle").prependTo(t._container)),u}return __extends(t,n),t.prototype.invalidate=function(t,i){n.prototype.invalidate.call(this,t,i);i&&this._stateColorCircle&&r.WITStateCircleColors.setStateColorsOnElement(this._stateColorCircle,this.getValue(),this._workItemControl._workItemType)},t}(i.TextWorkItemControl);t.WorkItemStateControl=u});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/FieldControl",["require","exports","VSS/VSS","VSS/Utils/Core","VSS/Utils/Core","WorkItemTracking/Scripts/Controls/WorkItemForm/WorkItemControl","WorkItemTracking/Scripts/Controls/WorkItemForm/TextWorkItemControl","VSS/Utils/Core","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Identities/Picker/Controls","WorkItemTracking/Scripts/TFS.WorkItemTracking","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/TFS.WorkItemTracking.Helpers","VSS/Events/Services","VSS/Controls","WorkItemTracking/Scripts/Utils/WitIdentityImages","WorkItemTracking/Scripts/Utils/Events","WorkItemTracking/Scripts/Controls/WorkItemForm/WorkItemStateControl","TfsCommon/Scripts/WITIdentityHelpers","VSS/Controls/PopupContent","VSS/Resources/VSS.Resources.Platform","react","react-dom","OfficeFabric/Toggle","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){var st,ft,et,ot;Object.defineProperty(t,"__esModule",{value:!0});t.FieldControl=void 0;st=y.getService();ft=function(){function n(n){this._workItemControl=n;this._control=$("<div/>").appendTo(this._workItemControl._container);this._render(!1,!0)}return n.prototype.invalidate=function(n,t){var i=t.getValue(),r=this._workItemControl.isReadOnly();this._render(i,r)},n.prototype.getValue=function(){return this._checked},n.prototype.setValue=function(n,t){this._render(n,!!t)},n.prototype.clear=function(){this._checked=!1},n.prototype._onChanged=function(n){this._workItemControl._getField().setValue(n)},n.prototype._render=function(t,i){var r,f,e,o,s={className:n.CHECKBOX_CLASSNAME,checked:t,disabled:i,onAriaLabel:(f=(r=this._workItemControl)===null||r===void 0?void 0:r._options)===null||f===void 0?void 0:f.label,offAriaLabel:(o=(e=this._workItemControl)===null||e===void 0?void 0:e._options)===null||o===void 0?void 0:o.label,onChanged:u.delegate(this,this._onChanged),onText:h.BooleanFieldTrueValue,offText:h.BooleanFieldFalseValue};it.render(tt.createElement(rt.Toggle,s),this._control[0]);this._checked=t},n.prototype.setInvalid=function(){},n.prototype.setEnabled=function(){},n.prototype.setAdditionalValues=function(){},n.prototype.onBind=function(){},n.prototype.onUnbind=function(){},n.prototype.onResize=function(){},n.CHECKBOX_CLASSNAME="toggle-control",n}();i.initClassPrototype(ft,{_workItemControl:null,_control:null});et=function(){function n(n,t,i,u){var f=this,s,l,e;this.allowEmpty=i;this._flushing=!1;this._workItemControl=n;this._nonIdentityValues=[];this._dontLayer=u;this._fullScreen=t;this._isInvalid=null;this._isEnabled=null;s=function(){return f._nonIdentityValues};n._container.addClass("identity-picker-container");(this._fullScreen||this._dontLayer)&&(l=function(){return f._workItemControl._container});e=v.WITIdentityControlHelpers.setupCommonIdentityPickerOptions(!1,!0,s,function(t){ut.createWorkItemIdentityRefFromEntity(t);n.flush(!0);f._fullScreen&&r.delay(null,450,function(){return st.fire(b.FullScreenEvents.EXIT_FULL_SCREEN)})},function(){return f._control.getDropdownPrefix()},function(){return f._workItemControl._getField()&&f._workItemControl._getField().filterByScope});$.extend(e,{ariaLabel:n._options.ariaLabel,elementId:n._options.controlId+"_txt",placeholderText:n._options.emptyText,dropdownContainer:l,consumerId:v.WITIdentityControlHelpers.IdentityPickerConsumerId,forceOpen:this._fullScreen,showMruTriangle:!this._fullScreen,showContactCard:!this._fullScreen,useRemainingSpace:this._fullScreen,smallScreenRender:this._fullScreen,pageSize:this._fullScreen?40:undefined,size:this._fullScreen?c.IdentityPickerControlSize.Large:undefined,watermark:c.EntityFactory.createStringEntity(h.AssignedToEmptyText,w.WitIdentityImages.UnassignedImageUrl)});$.extend(e.callbacks,{onInputBlur:function(){!f._fullScreen&&f._inputText.val()&&n.flush(!0);n._container.removeClass("focus")}});this._control=p.BaseControl.createIn(c.IdentityPickerSearchControl,n._container,e);this._inputText=this._control.getElement().find("input");n._container.focus(function(){f._isEnabled&&n._container.addClass("focus")});this._inputText.on("keyup",function(){f._inputText.val()||n.flush(!0)});this._fullScreen&&(this._control._bind(c.IdentityPickerSearchControl.RESOLVED_INPUT_REMOVED_EVENT,function(){o.delay(null,0,function(){var t=f.getValue();t||n.flush(!1)})}),this._control.focusOnSearchInput())}return n.prototype.dispose=function(){this._control&&(this._control.dispose(),this._control=null)},n.prototype.invalidate=function(n,t){var e=this._workItemControl,r,u,o,i,f;this._flushing=!0;t?(u=this.allowEmpty?!t.isValidValueOrEmpty():!t.isValid(),n?this.setInvalid(u):(r=e.isReadOnly(),o=e._getFieldTextValue(t),this.setValue(o),this.setInvalid(u),this.setEnabled(!r),r||(i=this._workItemControl&&this._workItemControl._getField(),f=i&&i.filterByScope&&i.filterByScope.excludeGroups?nt.IdentityPicker_PlaceholderTextUser:nt.IdentityPicker_PlaceholderTextUserGroup,$("input",this._control.getElement()).attr({placeholder:f,"aria-label":f})))):(this.clear(),this.setEnabled(!1));this._flushing=!1},n.prototype.getValue=function(){var i=this._control.getIdentitySearchResult(),n=i.resolvedEntities,t=i.unresolvedQueryTokens;return n&&n.length===1?d.WITIdentityHelpers.getUniquefiedIdentityName(n[0]):t&&t.length===1?t[0]:this._inputText.val()},n.prototype.setAdditionalValues=function(n){this._nonIdentityValues=n},n.prototype.setValue=function(n){if(n){var t=d.WITIdentityHelpers.parseUniquefiedIdentityName(n),i=d.WITIdentityHelpers.getEntityIdentifier(t);s.equals(n,this.getValue(),!0)||(this.clear(),i?this._control.setEntities([],[i]):this._control.setEntities([t],[]))}else this.clear()},n.prototype.clear=function(){var n,t;if(this._workItemControl._workItem&&this.getValue()===""&&!this._control.hasPendingRequests()){n=this._workItemControl._getField();n&&n.filterByScope&&(t=v.WITIdentityControlHelpers.getCustomTooltip(n.filterByScope),g.RichContentTooltip.add(t,this._control.getElement().find(".identity-picker-resolved")));return}this._control.clear()},n.prototype.onResize=function(){},n.prototype.setInvalid=function(n){this._isInvalid!==n&&(this._isInvalid=n,this._workItemControl._container.toggleClass("invalid",n))},n.prototype.setEnabled=function(n){this._isEnabled!==n&&(this._isEnabled=n,n?(this._control.disableReadOnlyMode(),this._workItemControl._container.removeClass("readonly"),this._workItemControl._container.find(".identity-picker-search-box").removeClass("readonly")):(this._control.enableReadOnlyMode(),this._workItemControl._container.addClass("readonly"),this._workItemControl._container.find(".identity-picker-search-box").addClass("readonly")))},n.prototype.onBind=function(){},n.prototype.onUnbind=function(){},n}();ot=function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return __extends(t,n),t.prototype._init=function(){var i=this,t;n.prototype._init.call(this);t=this.getFieldDefinition(this._fieldName);this._setInvalidDelegate=function(){i._setInvalid(!0)};this._setValidDelegate=function(){i._setInvalid(!1)};this._fieldName&&this._workItemType&&t.type===a.FieldType.Boolean?(this._control=new ft(this),this._controlType="CheckboxControl"):l.isIdentityPickerSupportedForField(t)&&this._workItemType.project?(this._control=new et(this,this._options.fullScreen,this._options.allowEmpty,this._options.dontLayer),this._controlType="CommonIdentityWorkItemControl"):t.referenceName===a.CoreFieldRefNames.State?(this._control=new k.WorkItemStateControl(this,{allowEmpty:this._options.allowEmpty},{cssClass:this._options.comboCssClass,fullScreen:this._options.fullScreen,ariaLabel:h.StateField}),this._controlType="WorkItemStateControl"):(this._control=new e.TextWorkItemControl(this,{allowEmpty:this._options.allowEmpty},{ariaLabel:t.referenceName===a.CoreFieldRefNames.Reason?h.ReasonField:this._options.ariaLabel||t.name||"",cssClass:this._options.comboCssClass,fullScreen:this._options.fullScreen}),this._controlType="TextWorkItemControl")},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._control&&this._control.dispose&&this._control.dispose();this._control=null},t.prototype.invalidate=function(t){n.prototype.invalidate.call(this,t);this._control.invalidate(t,this._getField())},t.prototype.getControlType=function(){return this._controlType},t.prototype._getControlValue=function(){return this._control.getValue()},t.prototype.clear=function(){this._control.clear()},t.prototype.onControlResized=function(){this._control.onResize()},t.prototype.bind=function(t,i){var u=this,f,r,e,o;if(n.prototype.bind.call(this,t,i),t){f=this.getFieldDefinition(this._fieldName);r=t.getError();this._fieldName&&t.attachEvent("field-error:"+this._fieldName,this._setInvalidDelegate);t.attachEvent(l.WorkItem.FIELD_ERRORS_CLEARED,this._setValidDelegate);r&&r.fieldReferenceName&&s.localeIgnoreCaseComparer(this._fieldName,r.fieldReferenceName)===0?this._setInvalid(!0):this._setInvalid(!1);e=this._getField();t.isReadOnly()||!l.isIdentityPickerSupportedForField(f)||e&&e.filterByScope||(o=t.workItemType.project,t.store.beginGetAllowedValues(f.id,o.guid,t.workItemType.name,function(n){u._workItem&&t.id===u._workItem.id&&u._control.setAdditionalValues(n)}));this._control.onBind(t)}},t.prototype.unbind=function(t){this._workItem&&(this._fieldName&&this._workItem.detachEvent("field-error:"+this._fieldName,this._setInvalidDelegate),this._workItem.detachEvent(l.WorkItem.FIELD_ERRORS_CLEARED,this._setValidDelegate),this._control.onUnbind());n.prototype.unbind.call(this,t)},t.prototype.shouldClearOnUnbind=function(){return this._control instanceof et},t.prototype._setInvalid=function(n){var t=this._getField();t.isValid()&&this._control.setInvalid(n)},t}(f.WorkItemControl);t.FieldControl=ot;i.initClassPrototype(ot,{_control:null,_setInvalidDelegate:null,_setValidDelegate:null})});

define("WorkItemTracking/Scripts/MruClassificationPicker/Components/MruClassificationPicker",["require","exports","WorkItemTracking/Scripts/MruClassificationPicker/Stores/ClassificationFieldsMruStore","react","VSSPreview/Controls/TreePicker","OfficeFabric/Utilities","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Utils/String"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.MruClassificationPicker=void 0;var s=function(n){function t(t){var r=__construct(this,n,[t]),u,f;for(u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return f=i.ClassificationFieldsMruStore.getDefaultFluxContext(),r._mruStore=f.store,r._mruActionCreator=f.actionsCreator,r.state={mruItemIds:r._getMruItemIds(t.fieldRefName,t.projectId)},r}return __extends(t,n),t.prototype.confirmEdit=function(){return this._treePicker?this._treePicker.confirmEdit():!1},t.prototype.focus=function(){this._treePicker&&this._treePicker.focus()},t.prototype.hideDropdown=function(){return this._treePicker?this._treePicker.hideDropdown():!1},t.prototype.componentDidMount=function(){var n=this.props.projectId;this._mruStore.addChangedListener(this._onStoreChanged);this.state.mruItemIds||this.props.disabled||this.props.readOnly||this._mruActionCreator.initializeClassificationFieldsMru(n)},t.prototype.componentWillReceiveProps=function(n){if(!o.equals(this.props.projectId,n.projectId,!0)||!o.equals(this.props.fieldRefName,n.fieldRefName,!0)){var t=this._getMruItemIds(n.fieldRefName,n.projectId);this.setState({mruItemIds:t});t||n.disabled||n.readOnly||this._mruActionCreator.initializeClassificationFieldsMru(n.projectId)}},t.prototype.componentWillUnmount=function(){this._mruStore.removeChangedListener(this._onStoreChanged)},t.prototype.render=function(){var n=this.state.mruItemIds;return r.createElement(u.TreePicker,__assign({},this._getClassificationPickerProps(this.props),{componentRef:this._resolveClassificationPicker,mruItemIds:n,onValueSelected:this._onValueSelected,skipPathTruncation:this.props.skipPathTruncation}))},t.prototype._getMruItemIds=function(n,t){return o.equals(n,e.CoreFieldRefNames.AreaPath,!0)?this._mruStore.getAreaPathMru(t):o.equals(n,e.CoreFieldRefNames.IterationPath,!0)?this._mruStore.getIterationPathMru(t):[]},t.prototype._resolveClassificationPicker=function(n){this._treePicker=n},t.prototype._onStoreChanged=function(){var n=this.props,t=n.fieldRefName,i=n.projectId;this.setState({mruItemIds:this._getMruItemIds(t,i)})},t.prototype._onValueSelected=function(n,t,i){var r=this.props,u=r.fieldRefName,f=r.projectId,s=r.onValueSelected,h=r.updateMruOnSelection;t&&t.id&&h&&(o.equals(u,e.CoreFieldRefNames.AreaPath,!0)?this._mruActionCreator.addToAreaPathMru(f,[t.id]):o.equals(u,e.CoreFieldRefNames.IterationPath,!0)&&this._mruActionCreator.addToIterationPathMru(f,[t.id]));s&&s(n,t,i)},t.prototype._getClassificationPickerProps=function(){var n=__assign({},this.props);return delete n.fieldRefName,delete n.projectId,n},__decorate([f.autobind],t.prototype,"_resolveClassificationPicker",null),__decorate([f.autobind],t.prototype,"_onStoreChanged",null),__decorate([f.autobind],t.prototype,"_onValueSelected",null),t}(f.BaseComponent);t.MruClassificationPicker=s});

define("WorkItemTracking/Scripts/MruClassificationPicker/Components/WorkItemClassificationPickerWrapper",["require","exports","react","WorkItemTracking/Scripts/MruClassificationPicker/Components/MruClassificationPicker","OfficeFabric/Utilities","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WorkItemConstants","VSS/Utils/String","WorkItemTracking/Scripts/Utils/WIFormCIDataHelper"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemClassificationPickerWrapper=void 0;var c=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.state={workItem:null,selectedValue:"",tree:null},i}return __extends(t,n),t.prototype.componentWillReceiveProps=function(n){this._updateComponentRef(this.props,n)},t.prototype.componentDidMount=function(){this._updateComponentRef(undefined,this.props)},t.prototype.render=function(){if(!this.state.workItem)return null;var n=u.css("workitem-classification-picker",{invalid:this.state.invalid},{readonly:this.state.readOnly});return i.createElement(r.MruClassificationPicker,{componentRef:this._resolveClassificationPicker,containerClassName:n,calloutClassName:"workitem-classification-picker-dropdown",dropdownItemHeight:t._itemHeight,dropdownItemIndentWidth:t._itemIndentWidth,fieldRefName:this.props.field.referenceName,"aria-label":this.props.field.name,label:this.props.field.name,projectId:this.state.workItem.project.guid,selectedValue:this.state.selectedValue,readOnly:this.state.workItem.isReadOnly()||this.state.readOnly,onValueSelected:this._onValueSelected,showSelectedDate:!1,maxLength:Math.min(this.props.workItemControl._options.maxLength||e.WorkItem.MAX_TITLE_LENGTH,e.WorkItem.MAX_TITLE_LENGTH),visibleItemCount:12,updateMruOnSelection:!1,selectedInputId:this.props.workItemControl._options.controlId+"_txt",tree:this.state.tree})},t.prototype._resolveClassificationPicker=function(n){this._classificationPicker=n},t.prototype.getValue=function(){return this.state.selectedValue},t.prototype.invalidate=function(n,t){var r=this.props.workItemControl,i,u,f;t?(i=this.props.allowEmpty?!t.isValidValueOrEmpty():!t.isValid(),n?this.setInvalid(i):(u=r.isReadOnly(),f=r._getFieldTextValue(t),this.setValue(f),this.setInvalid(i),this.setEnabled(!u))):(this.clear(),this.setEnabled(!1))},t.prototype.clear=function(){this.setState({selectedValue:""})},t.prototype.setInvalid=function(n){this.setState({invalid:n})},t.prototype.setEnabled=function(n){this.setState({readOnly:!n})},t.prototype.setValue=function(n){this.setState({selectedValue:n||""})},t.prototype.onBind=function(n){this.state.tree||n.isReadOnly()||this._fetchTree(n);this.setState({workItem:n});n.attachWorkItemChanged(this._onWorkItemChanged)},t.prototype.onUnbind=function(){this.state.workItem&&(this.state.workItem.detachWorkItemChanged(this._onWorkItemChanged),this.setState({workItem:null}))},t.prototype.confirmEdit=function(){return this._classificationPicker?this._classificationPicker.confirmEdit():!1},t.prototype.hideDropdown=function(){return this._classificationPicker?this._classificationPicker.hideDropdown():!1},t.prototype.onResize=function(){this.hideDropdown()},t.prototype._onWorkItemChanged=function(n,t){t&&t.change===o.WorkItemChangeType.PreSave&&this.hideDropdown()},t.prototype._fetchTree=function(n){var t=this;n.project.nodesCacheManager.beginGetNodes().then(function(){var i;i=s.equals(t.props.field.referenceName,f.CoreFieldRefNames.AreaPath,!0)?n.project.nodesCacheManager.getAreaNode(!0):n.project.nodesCacheManager.getIterationNode(!0);t.setState({tree:i})},function(){return t.setState({tree:null})})},t.prototype._onValueSelected=function(n,t,i){var r=this;this.setState({selectedValue:n},function(){r.props.onChange()});h.WIFormCIDataHelper.classificationPickerValueChanged(n,i,this.props.field.referenceName)},t.prototype._updateComponentRef=function(n,t){(!n&&t.componentRef||n&&n.componentRef!==t.componentRef)&&(n&&n.componentRef&&n.componentRef(null),t.componentRef&&t.componentRef(this))},t._itemHeight=24,t._itemIndentWidth=10,__decorate([u.autobind],t.prototype,"_resolveClassificationPicker",null),__decorate([u.autobind],t.prototype,"_onWorkItemChanged",null),__decorate([u.autobind],t.prototype,"_onValueSelected",null),t}(i.Component);t.WorkItemClassificationPickerWrapper=c});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/WorkItemClassificationControl",["require","exports","react","react-dom","WorkItemTracking/Scripts/Controls/WorkItemForm/WorkItemControl","WorkItemTracking/Scripts/MruClassificationPicker/Components/WorkItemClassificationPickerWrapper","VSS/Utils/UI"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemClassificationControl=void 0;var o=function(n){function t(t,i,r){return n.call(this,t,i,r)||this}return __extends(t,n),t.prototype._init=function(){var t=this;n.prototype._init.call(this);this._container.addClass("new-classification-control");r.render(i.createElement(f.WorkItemClassificationPickerWrapper,{componentRef:function(n){t._control=n},allowEmpty:this._options.allowEmpty,field:this.getFieldDefinition(this._fieldName),workItemControl:this,onChange:function(){t.flush()}}),this._container[0],this._options.renderCallback);this._container.keydown(function(n){if(t._control&&(n.keyCode===e.KeyCode.ESCAPE&&t._control.hideDropdown()||n.keyCode===e.KeyCode.ENTER&&t._control.confirmEdit()))return n.stopPropagation(),!1})},t.prototype.dispose=function(){r.unmountComponentAtNode(this._container[0])},t.prototype.invalidate=function(t){n.prototype.invalidate.call(this,t);this._control&&this._control.invalidate(t,this._getField())},t.prototype._getControlValue=function(){return this._control?this._control.getValue():""},t.prototype.clear=function(){this._control&&this._control.clear()},t.prototype.onControlResized=function(){this._control&&this._control.onResize()},t.prototype.bind=function(t,i){if(n.prototype.bind.call(this,t,i),t&&this._control)this._control.onBind(t)},t.prototype.unbind=function(t){this._workItem&&this._control&&this._control.onUnbind();n.prototype.unbind.call(this,t)},t}(u.WorkItemControl);t.WorkItemClassificationControl=o});

define("Agile/Scripts/Common/Components/BacklogAddItemCallout/WorkItemControlWrapper",["require","exports","react","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Utils/String","VSS/Utils/UI","WorkItemTracking/Scripts/Controls/WorkItemForm/FieldControl","WorkItemTracking/Scripts/Controls/WorkItemForm/WorkItemClassificationControl"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemControlWrapper=void 0;var h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._resolveContainerRef=function(n){t._container=n},t._onKeyPress=function(n){n.charCode===e.KeyCode.ENTER&&t._control&&t._control.flush();t.props.onKeyPress(n)},t._bindWorkItem=function(){var n=t.props.workItem;t._control.bind(n)},t}return __extends(t,n),t.prototype.render=function(){return i.createElement("div",{ref:this._resolveContainerRef,className:"work-item-control-container"},i.createElement("div",{id:this.props.controlId+"ariadescription",style:{display:"none"},onKeyPress:this._onKeyPress},f.format(r.AddPanel_AriaDescription,this.props.fieldDef.name)))},t.prototype.componentDidMount=function(){this._renderFieldControl()},t.prototype.shouldComponentUpdate=function(n){return n.fieldDef!==this.props.fieldDef||n.workItem!==this.props.workItem||n.controlId!==this.props.controlId},t.prototype.componentDidUpdate=function(){this._renderFieldControl()},t.prototype.componentWillUnmount=function(){this._disposeFieldControl()},t.prototype.getControlVaue=function(){return this._control._getControlValue()},t.prototype._renderFieldControl=function(){this._disposeFieldControl();var n=this.props,r=n.workItem,t=n.controlId,i=$(this._container);switch(this.props.fieldDef.type){case u.FieldType.String:case u.FieldType.Integer:case u.FieldType.Double:case u.FieldType.DateTime:this._control=this._createLiteralControl(i,t);this._control.bind(r);break;case u.FieldType.TreePath:this._control=this._createTreeControl(i,t,this._bindWorkItem)}},t.prototype._disposeFieldControl=function(){this._control&&(this._control.unbind(),this._control.dispose(),this._control=null)},t.prototype._createLiteralControl=function(n,t){return new o.FieldControl(n,{controlId:t,dontLayer:!0,fieldName:this.props.fieldDef.referenceName,comboCssClass:"add-panel-input",allowEmpty:!0},this.props.fieldDef.workItemType)},t.prototype._createTreeControl=function(n,t,i){return new s.WorkItemClassificationControl(n,{controlId:t,fieldName:this.props.fieldDef.referenceName,allowEmpty:!0,useLegacy:!0,renderCallback:i},this.props.fieldDef.workItemType)},t}(i.Component);t.WorkItemControlWrapper=h});

define("Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCallout",["require","exports","react","Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCalloutActions","Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCalloutActionsCreator","Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCalloutStore","Agile/Scripts/Common/Components/BacklogAddItemCallout/WorkItemControlWrapper","Agile/Scripts/Resources/TFS.Resources.AgileControls","OfficeFabric/Button","OfficeFabric/Callout","OfficeFabric/DetailsList","OfficeFabric/Label","OfficeFabric/MessageBar","OfficeFabric/TextField","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Context","VSS/Utils/String","VSS/Utils/UI","VSSUI/PickList","VSSUI/VssIcon","WorkItemTracking/Scripts/Utils/PermissionHandler","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCallout","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogAddItemCallout=void 0;var tt=function(n){function t(t){var i=__construct(this,n,[t]),e,o;for(e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);i._getTitleInputRef=function(n){i._titleInputRef=n};i._onKeyPress=function(n){n.charCode===k.KeyCode.ENTER&&i._onSubmitButtonClick()};i._getListItem=function(n){var t=y.WorkItemTypeColorAndIconsProvider.getInstance().getColorAndIcon(w.getDefaultWebContext().project.name,n),i={iconName:t.icon,iconType:1,style:{color:t.color}};return{key:n,name:n,iconProps:i}};i._onWorkItemTypeChanged=function(n){i._workItem=null;var t=n.selectedItems[0];i._actionsCreator.setSelectedWorkItemType(i.props.calloutId,t)};i._onTitleFieldChanged=function(n){i.setState({title:n})};i._onSubmitButtonChanged=function(n){i._actionsCreator.setSelectedInsertLocation(i.props.calloutId,n)};i._onSubmitButtonClick=function(){var u=i.props.filterApplied,t,r,n;if(!u){t=i.state.selectedInsertLocation;r=i.getFieldOutput();i.props.onSubmit(i.state.selectedWorkItemTypeName,r,t);n="";i.state.workItemType&&(i._workItem=i.state.workItemType.create(),n=i._workItem.getTitle());i._onTitleFieldChanged(n);i._setFocusOnTitle()}};i._getPickListItems=function(){return i.props.workItemTypes};i._onStoreChanged=function(){if(i.state.selectedInsertLocation!==i._store.insertLocation)i.props.onInsertLocationChanged(i._store.insertLocation);i.setState({selectedInsertLocation:i._store.insertLocation,selectedWorkItemTypeName:i._store.selectedWorkItemType,workItemTypeLoading:i._store.isLoadingWorkItemType,workItemType:i._store.currentWorkItemType})};o=new r.BacklogAddItemCalloutActions;i._actionsCreator=new u.BacklogAddItemCalloutActionsCreator(o);i._store=new f.BacklogAddItemCalloutStore(o);i._actionsCreator.initialize(i.props.calloutId,i.props.defaultWorkItemType,i.props.workItemTypes);i.state={title:"",selectedWorkItemTypeName:i._store.selectedWorkItemType,selectedInsertLocation:i._store.insertLocation,workItemTypeLoading:!0,workItemType:null};i.props.onInsertLocationChanged(i.state.selectedInsertLocation);return i}return __extends(t,n),t.prototype.componentWillMount=function(){this._store.addChangedListener(this._onStoreChanged);this._actionsCreator.loadWorkItemType(this.state.selectedWorkItemTypeName)},t.prototype.componentWillUnmount=function(){this._store.removeChangedListener(this._onStoreChanged);this._store.dispose()},t.prototype.componentDidMount=function(){this._setFocusOnTitle()},t.prototype.componentDidUpdate=function(n,t){if(!this.state.workItemTypeLoading&&t.workItemType!==this.state.workItemType){this._workItem||(this._workItem=this.state.workItemType.create());var i=this._workItem.getTitle();i&&this.state.title!==i&&this.setState({title:i})}},t.prototype.getFieldOutput=function(){var t={},n,i,r;if(this._workItem)for(n=0,i=this.props.additionalFieldReferenceNames;n<i.length;n++)r=i[n],t[r]=this._workItem.getFieldValue(r);return t[p.CoreFieldRefNames.Title]=this.state.title,t},t.prototype.render=function(){return i.createElement(h.Callout,__assign({},this.props.calloutProps,{role:"dialog",ariaLabel:o.BacklogAddItemCallout_Title}),this.props.filterApplied&&i.createElement(a.MessageBar,{messageBarType:a.MessageBarType.warning,isMultiline:!1},o.BacklogAddItemCallout_Disabled),this._renderAddContent())},t.prototype._renderAddContent=function(){var n,r;if(this.props.workItemTypes.length>1)n=i.createElement(d.PickListDropdown,{selectedItems:[this.state.selectedWorkItemTypeName],getListItem:this._getListItem,selectionMode:c.SelectionMode.single,getPickListItems:this._getPickListItems,disabled:this.state.workItemTypeLoading,onSelectionChanged:this._onWorkItemTypeChanged});else{var t=this._getListItem(this.props.workItemTypes[0]),u=t.name,f=t.iconProps;n=i.createElement("div",{className:"work-item-type-single"},i.createElement(g.VssIcon,__assign({},f)),i.createElement("div",null,u))}return r=this.state.workItemType&&!this.state.workItemType.getFieldDefinition(p.CoreFieldRefNames.Title),i.createElement("div",{className:"backlog-add-item-callout new-work-item-view"},i.createElement("div",{className:"add-work-item-inputs witform-layout"},i.createElement("div",{className:"row"},i.createElement("div",{className:"type-label"},n),i.createElement("div",{className:"input"},i.createElement(v.TextField,{ariaLabel:o.BacklogAddItemCallout_NameLabel,componentRef:this._getTitleInputRef,value:this.state.title,onChanged:this._onTitleFieldChanged,disabled:r,onKeyPress:this._onKeyPress}))),this._renderAdditionalFieldInputs()),i.createElement("div",{className:"submit-button"},i.createElement(s.PrimaryButton,__assign({},this._getButtonProps(),{disabled:this.props.filterApplied,onClick:this._onSubmitButtonClick}))))},t.prototype._setFocusOnTitle=function(){this._titleInputRef&&this._titleInputRef.focus()},t.prototype._getButtonProps=function(){var i=this,n,t;return nt.hasAgileToolsBacklogManagementPermission()?(t=[],this.state.selectedInsertLocation===0?n=o.BacklogAddItemCallout_AddToTop:t.push({key:"add-at-top",name:o.BacklogAddItemCallout_AddToTop,onClick:function(){return i._onSubmitButtonChanged(0)}}),this.state.selectedInsertLocation===1?n=o.BacklogAddItemCallout_AddAtSelection:t.push({key:"add-at-selection",name:o.BacklogAddItemCallout_AddAtSelection,onClick:function(){return i._onSubmitButtonChanged(1)}}),this.state.selectedInsertLocation===2?n=o.BacklogAddItemCallout_AddToBottom:t.push({key:"add-at-bottom",name:o.BacklogAddItemCallout_AddToBottom,onClick:function(){return i._onSubmitButtonChanged(2)}}),{ariaLabel:n,splitButtonAriaLabel:o.BacklogAddItemCallout_SplitLabel,split:!0,text:n,menuProps:{items:t}}):{text:o.BacklogAddItemCallout_AddToBottom}},t.prototype._renderAdditionalFieldInputs=function(){var u=this.props.additionalFieldReferenceNames.filter(function(n){return b.ignoreCaseComparer(n,p.CoreFieldRefNames.Title)!==0}),t,n,i,f,r;if(this.state.workItemTypeLoading||u.length===0)return null;for(this._workItem||(this._workItem=this.state.workItemType.create()),t=[],n=0,i=u;n<i.length;n++)f=i[n],r=this.state.workItemType.getFieldDefinition(f),r&&t.push(this._renderAdditionalFieldRow(r,this._workItem));return t},t.prototype._renderAdditionalFieldRow=function(n,t){var r=n.referenceName.replace(/\./g,"_");return i.createElement("div",{className:"row legacy-input",key:r},i.createElement("div",null,i.createElement(l.Label,{htmlFor:r,className:"type-label"},n.name)),i.createElement("div",{className:"input workitemcontrol"},i.createElement(e.WorkItemControlWrapper,{fieldDef:n,controlId:r,workItem:t,onKeyPress:this._onKeyPress})))},t}(i.Component);t.BacklogAddItemCallout=tt});

define("Agile/Scripts/Common/Components/BacklogPivot/BacklogContributionRightPanel",["require","exports","react","Agile/Scripts/Backlog/Events","Agile/Scripts/Common/Components/AgileHubError","Agile/Scripts/Common/Components/RightPaneHeader/RightPaneHeader","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Error","VSS/Service","VSS/Utils/Accessibility","VSS/Utils/String","VSS/VSS","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/BacklogPivot/BacklogContributionRightPanel"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogContributionRightPanel=void 0;var y=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.IterationBacklogExtensionContainer="backlogs-extension-tool-panel-container",i._notifyExtensionOfSelectionChange=function(n){i._contributedPanel&&i._contributedPanel.workItemSelectionChanged&&typeof i._contributedPanel.workItemSelectionChanged=="function"&&i._contributedPanel.workItemSelectionChanged(n)},i._resolveContainerRef=function(n){i._container=n},i.state={contributionLoadingExceptionInfo:null},i}return __extends(t,n),t.prototype.componentDidMount=function(){this._showContributedPanel();this._registerForWorkItemSelectionChanged(this.props.eventHelper)},t.prototype.componentDidUpdate=function(){this._disposeHost();this._showContributedPanel()},t.prototype.componentWillUnmount=function(){this._unregisterFromWorkItemSelectionChanged(this.props.eventHelper);this._disposeHost()},t.prototype.componentWillReceiveProps=function(n){n.eventHelper!==this.props.eventHelper&&(this._unregisterFromWorkItemSelectionChanged(this.props.eventHelper),this._registerForWorkItemSelectionChanged(n.eventHelper))},t.prototype.shouldComponentUpdate=function(n,t){return n.contributionData!==this.props.contributionData||t.contributionLoadingExceptionInfo!==this.state.contributionLoadingExceptionInfo},t.prototype.render=function(){var n=this.state.contributionLoadingExceptionInfo;return n?(l.announce(a.format(e.Backlog_RightPanelContribution_LoadError,n.exceptionMessage,!0)),i.createElement("div",{className:"right-panel-error-container"},i.createElement(u.HubError,{exceptionsInfo:[n]}))):i.createElement(f.RightPaneHeader,{title:this.props.contributionData.properties.name,onDismissClicked:this.props.onDismiss},i.createElement("div",{className:"right-panel-contribution-outer-container"},i.createElement("div",{ref:this._resolveContainerRef,className:this.IterationBacklogExtensionContainer})))},t.prototype._showContributedPanel=function(){var n=this;this._contributedPanel=null;this._host=null;var i=this.props.contributionData.id,t=this._errorHandler("ErrorInShowContributedPanel"),r={team:this.props.team};o.createExtensionHost($(this._container),i,r).then(function(r){n._host=r;c.getService(s.ExtensionService).getContribution(i).then(function(i){var u=i.properties.registeredObjectId;u&&r.getRegisteredInstance(u).then(function(t){n._contributedPanel=t;var i=n.props.getSelectedWorkItems?n.props.getSelectedWorkItems():[];n._notifyExtensionOfSelectionChange(i)},t)},t)},t)},t.prototype._registerForWorkItemSelectionChanged=function(n){var t=this;n.attachEvent(r.BacklogNotifications.BACKLOG_GRID_SELECTION_CHANGED,function(n,i){t._notifyExtensionOfSelectionChange(i.selectedWorkItems)})},t.prototype._unregisterFromWorkItemSelectionChanged=function(n){n.detachEvent(r.BacklogNotifications.BACKLOG_GRID_SELECTION_CHANGED,this._notifyExtensionOfSelectionChange)},t.prototype._disposeHost=function(){this._host&&(this._host.dispose(),this._host=null)},t.prototype._errorHandler=function(n){var t=this;return function(i,r){h.publishErrorToTelemetry({name:n,message:v.getErrorMessage(i)});var u=r?r:{exceptionMessage:v.getErrorMessage(i)};t.setState({contributionLoadingExceptionInfo:u})}},t}(i.Component);t.BacklogContributionRightPanel=y});

define("Agile/Scripts/Common/Components/BacklogPivotBarActionHelper",["require","exports","Agile/Scripts/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogPivotBarActionHelper=void 0;var f;(function(n){function t(t){return{key:n.NEW_WORKITEM_COMMAND_KEY,disabled:t.disabled,name:r.NewWorkItemItemButtonText,iconProps:{iconName:"bowtie-math-plus-light",iconType:1},important:!0,onClick:t.onClick,title:t.tooltip}}function f(t){return{key:n.OPEN_COLUMN_OPTIONS_COMMAND_KEY,disabled:t.disabled,name:u.ColumnOptionsTitle,iconProps:{iconName:"Repair"},important:!0,onClick:t.onClick,title:t.tooltip}}function e(t){return{key:n.CREATE_QUERY_COMMAND_KEY,disabled:t.disabled,name:i.CreateQuery_Toolbar_Text,iconProps:{iconName:"bowtie-query-list",iconType:1},onClick:t.onClick,title:t.tooltip}}function o(t){return{key:n.SEND_MAIL_COMMAND_KEY,disabled:t.disabled,name:i.BacklogAction_EmailQueryResult,iconProps:{iconName:"Mail"},onClick:t.onClick,title:t.tooltip}}n.NEW_WORKITEM_COMMAND_KEY="new-work-item";n.OPEN_COLUMN_OPTIONS_COMMAND_KEY="open-column-options";n.CREATE_QUERY_COMMAND_KEY="create-query";n.SEND_MAIL_COMMAND_KEY="send-mail";n.getNewWorkItemPivotBarAction=t;n.getOpenColumnOptionsAction=f;n.getCreateQueryAction=e;n.getSendEmailAction=o})(f=t.BacklogPivotBarActionHelper||(t.BacklogPivotBarActionHelper={}))});

define("Agile/Scripts/Common/Components/PivotItemContent",["require","exports","react","Presentation/Scripts/TFS/PerformanceTelemetryHelper"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.PivotItemContent=void 0;var u=function(n){function t(t,i,r,u){var f=__construct(this,n,[t,i]);for(var e in f)f.hasOwnProperty(e)&&(this[e]=f[e]);return f._hubName=r,f._pivotName=u,f}return __extends(t,n),Object.defineProperty(t.prototype,"telemetryHelper",{get:function(){return r.PerformanceTelemetryHelper.getInstance(this._hubName)},enumerable:!1,configurable:!0}),t.prototype.componentWillMount=function(){var n=this.telemetryHelper;n.isActive()&&n.split("".concat(this._hubName,"_PivotWillMount: ").concat(this._pivotName))},t.prototype.componentDidMount=function(){this.updateCommands();this.updateViewActions();this._publishTTI()},t.prototype.componentWillUpdate=function(n,t){this.shouldUpdateCommandsOnUpdate(n,t)&&this.updateCommands(n,t);this.shouldUpdateViewActionsOnUpdate(n,t)&&this.updateViewActions(n,t);this.shouldResizeFilterBarOnUpdate(t)&&this.resizeFilterBar()},t.prototype.componentDidUpdate=function(){this._publishTTI()},t.prototype.componentWillUnmount=function(){this.props.commands&&(this.props.commands.value=[]);this.props.viewActions&&(this.props.viewActions.value=[])},t.prototype.executeAfterTTI=function(){},t.prototype.shouldUpdateCommandsOnUpdate=function(){return!1},t.prototype.shouldUpdateViewActionsOnUpdate=function(){return!1},t.prototype.shouldResizeFilterBarOnUpdate=function(){return!1},t.prototype.updateCommands=function(n,t){if(n===void 0&&(n=this.props),t===void 0&&(t=this.state),n.commands){var i=this.getCommands(n,t);n.commands.value=i}},t.prototype.updateViewActions=function(n,t){if(n===void 0&&(n=this.props),t===void 0&&(t=this.state),n.viewActions){var i=this.getViewActions(n,t);n.viewActions.value=i}},t.prototype.resizeFilterBar=function(){this._fireWindowResize()},t.prototype.getCommands=function(){return[]},t.prototype.getViewActions=function(){return[]},t.prototype._publishTTI=function(){!this._ttiPublished&&this.isDataReady()&&(this._ttiPublished=!0,this.telemetryHelper.isActive()&&this.telemetryHelper.end(),this.executeAfterTTI())},t.prototype._fireWindowResize=function(){var n=document.createEvent("Event");n.initEvent("resize",!1,!0);window.dispatchEvent(n)},t}(i.Component);t.PivotItemContent=u});

define("Agile/Scripts/Common/Components/SplitView/SplitView",["require","exports","react","VSSUI/Splitter","VSS/Context","VSS/Settings/Services","Presentation/Scripts/TFS/Generated/TFS.WebApi.Constants","VSS/LoaderPlugins/Css!Agile/Scripts/Common/Components/SplitView/SplitView"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.SplitView=void 0;var o=function(n){function t(t){var i=__construct(this,n,[t]),r,o,s;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onSplitterChanged=function(n){var t=i.props.onFixedSizeChanged;i._saveSplitterState(n);i.setState({size:n});t&&t(n)},i._saveSplitterState=function(n){var t,r=f.getService(),o=u.getDefaultWebContext().project.id;r.setEntries((t={},t[i._getSizeKey()]=n,t),0,e.TfsSettingsScopeNames.Project,o)},o=f.getService(),s=o.getEntry(i._getSizeKey(),0,e.TfsSettingsScopeNames.Project)||i.props.defaultSize||500,i.state={size:s},i}return __extends(t,n),t.prototype.render=function(){var n=this.state.size;return i.createElement(r.Splitter,__assign({minFixedSize:350,maxFixedSize:1e3},this.props,{className:"split-view",fixedSize:n,onFixedSizeChanged:this._onSplitterChanged}))},t.prototype._getSizeKey=function(){return"".concat(this.props.registrySettingsPrefix,".splitter.size")},t}(i.Component);t.SplitView=o});

define("Agile/Scripts/Common/FilterStatePersistenceManager",["require","exports","Agile/Scripts/Common/Utils","Agile/Scripts/Generated/HubConstants","OfficeFabric/Utilities","Presentation/Scripts/TFS/TFS.WebSettingsService","TFSUI/Common/Utils","VSS/Diag","VSS/Settings/Services","VSS/Telemetry/Services","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.FilterStatePersistenceManager=t.WRITE_SETTINGS_ERROR=t.INVALID_WEB_SETTINGS_SERVICE_ERROR=t.IFILTER_SERIALIZE_ERROR=t.FILTER_THROTTLE_DELAY=void 0;t.FILTER_THROTTLE_DELAY=1e3;t.IFILTER_SERIALIZE_ERROR="IFilterToJsonConvertFailure";t.INVALID_WEB_SETTINGS_SERVICE_ERROR="InvalidWebSettingsService";t.WRITE_SETTINGS_ERROR="BeginWriteSettingErrorCallback";var l=function(){function n(n,i,r,f,c,l){var a=this;l===void 0&&(l=!1);this._saveFilterState=function(n,i){var r,u=(r={},r[a._registryKey]=i,r);return new Promise(function(i,r){var f=s.getService();f?f.setEntries(u,0,a._scopeName,a._scopeValue).then(a._onSaveFilterStateSucceeded(n),a._onSaveFilterStateFailed).then(i,r):(e.ErrorUtils.PublishError({name:t.INVALID_WEB_SETTINGS_SERVICE_ERROR,message:"RegKeyName:[".concat(a._registryKey,"]")},!1,a._getComponentName(),"FilterStatePersistenceManager._saveFilterStateToServer"),r(new Error("Could not get an instance of the settings http client")))})};this._onSaveFilterStateSucceeded=function(n){return function(){if(!a._supressTelemetry){var t=new h.TelemetryEventData(a._hubName,"".concat(a._pivotName,"_FilterChanged"),{appliedFilters:a._getAppliedFilters(n).join(", ")});h.publishEvent(t,!1);o.log(o.LogVerbosity.Verbose,"FilterStatePersistenceManager: Filter state saved")}}};this._onSaveFilterStateFailed=function(n){e.ErrorUtils.PublishError(n,!1,a._getComponentName(),"FilterStatePersistenceManager._getSaveErrorHandler",t.WRITE_SETTINGS_ERROR,"RegKeyName: [".concat(a._registryKey,"]"));o.log(o.LogVerbosity.Verbose,"FilterStatePersistenceManager: Error saving filter state: ".concat(n))};this._hubName=r;this._pivotName=f;this._scopeName=n;this._scopeValue=i;this._supressTelemetry=l;this._registryKey=this._getFilterRegistryKey(r,f,c);this._asyncContext=new u.Async;this._throttledSaveFilter=this._asyncContext.throttle(this._saveFilterState,t.FILTER_THROTTLE_DELAY)}return n.prototype.saveFilterStateToServer=function(n){var t=this._serializeFilter(n),i=t.success,r=t.serializedFilter;i&&this._throttledSaveFilter(n,r)},n.prototype.immediateSaveFilterStateToServer=function(n){var t=this._serializeFilter(n),i=t.success,r=t.serializedFilter;if(i)return this._saveFilterState(n,r)},n.prototype.saveFilterStateToLocalStorage=function(n){var r=i.ServiceUtils.getWebSettingsSvc();if(r){var u=this._serializeFilter(n),o=u.success,s=u.serializedFilter;o&&r.writeLocalSetting(this._registryKey,s,f.WebSettingsScope.User)}else e.ErrorUtils.PublishError({name:t.INVALID_WEB_SETTINGS_SERVICE_ERROR,message:"RegKeyName:[".concat(this._registryKey,"]")},!1,this._getComponentName(),"FilterStatePersistenceManager._saveFilterStateToLocalStorage")},n.prototype._serializeFilter=function(n){var i=!0,r;try{r=JSON.stringify(n||{})}catch(u){i=!1;e.ErrorUtils.PublishError(u,!1,this._getComponentName(),"FilterStatePersistenceManager._serializeFilter",t.IFILTER_SERIALIZE_ERROR,"RegKeyName:[".concat(this._registryKey,"]"))}return{success:i,serializedFilter:r}},n.prototype._getAppliedFilters=function(n){var t=Object.keys(n||{});return t.filter(function(t){var i=n[t];return typeof i.value=="string"?i.value!==c.empty:i.value&&!!i.value.length})},n.prototype._getComponentName=function(){return"".concat(this._hubName,"_").concat(this._pivotName)},n.prototype._getFilterRegistryKey=function(n,t,i){var f=c.format(r.AgileHubServerConstants.FilterRegistryKeyFormat,n,t),u;return i&&(u=f.split("/"),u.splice.apply(u,__spreadArray([u.length-1,0],i,!1)),f=u.join("/")),f},n}();t.FilterStatePersistenceManager=l});

define("Agile/Scripts/Common/HubViewActions",["require","exports","Agile/Scripts/Resources/TFS.Resources.AgileControls"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.HubViewActions=void 0;var r;(function(n){function t(n){return{key:"common-settings",iconProps:{iconName:"settings",iconType:0},important:!0,onClick:n,ariaLabel:i.Common_Setting_Config_Menu_Tooltip,title:i.Common_Setting_Config_Menu_Tooltip,viewActionRenderArea:2}}function r(n,t){return{key:"work-item-filter-bar",actionType:0,ariaLabel:i.Common_Setting_Filter_Command,title:i.Common_Setting_Filter_Command,iconProps:{iconName:t?"FilterSolid":"Filter",iconType:0},important:!0,onClick:n}}function u(n,t){return{key:"analytics-refresh-action",actionType:0,ariaLabel:i.Common_Setting_Refresh_Command,title:i.Common_Setting_Refresh_Command,iconProps:{iconName:"Refresh",iconType:0},important:!0,onClick:n,viewActionRenderArea:t}}n.getCommonSettings=t;n.getFilterAction=r;n.getRefreshAction=u})(r=t.HubViewActions||(t.HubViewActions={}))});

define("Agile/Scripts/Common/Messages/HubMessages",["require","exports","react","Presentation/Scripts/TFS/Components/Messages"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.HubMessages=void 0;var u=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onCloseMessage=function(n,t){var r=i.props.actionsCreator;r.clearPageMessage(n,t)},i._onStoreChanged=function(){i.setState({messages:i.props.store.getMessages()})},t.store.addChangedListener(i._onStoreChanged),i.state={messages:i.props.store.getMessages()},i}return __extends(t,n),t.prototype.componentWillUnmount=function(){this.props.store.removeChangedListener(this._onStoreChanged)},t.prototype.render=function(){var n=this.state.messages;return i.createElement(r.Messages,{messages:n,onCloseMessage:this._onCloseMessage})},t}(i.Component);t.HubMessages=u});

define("Agile/Scripts/Common/Messages/HubMessagesActions",["require","exports","VSS/Flux/Action","VSS/Flux/Diag"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.HubMessagesActions=void 0;var u="HUB_MESSAGES",f=function(){function n(){this.addExceptionsInfo=new i.Action(u);this.clearPageMessage=new i.Action(u);this.addMessage=new i.Action(u);this.clearAllMessages=new i.Action(u)}return __decorate([r.registerDiagActions],n)}();t.HubMessagesActions=f});

define("Agile/Scripts/Common/Messages/HubMessagesActionsCreator",["require","exports","VSS/Error","VSS/VSS","OfficeFabric/MessageBar","VSS/Service","VSS/Settings"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.HubMessagesActionsCreator=void 0;var o=function(){function n(n){this._actions=n}return n.prototype.addErrorMessage=function(n,t){t===void 0&&(t=!0);this._actions.addMessage.invoke({closeable:t,messageType:u.MessageBarType.error,message:r.getErrorMessage(n)});i.publishErrorToTelemetry(n)},n.prototype.addExceptionsInfo=function(n,t){for(var r=[],u=2;u<arguments.length;u++)r[u-2]=arguments[u];r&&(this._actions.addExceptionsInfo.invoke(r.map(function(n){return{exceptionInfo:n,closable:t}})),r.forEach(function(t){return i.publishErrorToTelemetry({name:n,message:t.exceptionMessage})}))},n.prototype.addMessage=function(n){if(n.persistDismissal&&n.id){var t=f.getLocalService(e.LocalSettingsService).read(this._getKey(n.id),!1,e.LocalSettingsScope.Project);if(t)return}this._actions.addMessage.invoke(n)},n.prototype.clearPageMessage=function(n,t){t&&n&&f.getLocalService(e.LocalSettingsService).write(this._getKey(n),!0,e.LocalSettingsScope.Project);this._actions.clearPageMessage.invoke(n)},n.prototype.clearAllMessages=function(){this._actions.clearAllMessages.invoke(null)},n.prototype._getKey=function(t){return n.DISMISSED_SETTING_PREFIX+t},n.DISMISSED_SETTING_PREFIX="DISMISSED_BANNER_",n}();t.HubMessagesActionsCreator=o});

define("Agile/Scripts/Common/Messages/HubMessagesStore",["require","exports","OfficeFabric/MessageBar","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/Flux/Store","VSS/Utils/Array","VSS/Utils/String"],function(n,t,i,r,u,f,e){var s,o;Object.defineProperty(t,"__esModule",{value:!0});t.HubMessagesStore=void 0;s=function(n){function t(t){var u=__construct(this,n,[]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u._messages=[],u._handleClearAllMessages=function(){u._messages=[];u.emitChanged()},u._handleClearPageMessage=function(n){for(var t=u._messages,i=0,r=t.length;i<r;i++)if(t[i].id===n){t.splice(i,1);u._messages=t.slice();u.emitChanged();break}},u._handleAddMessage=function(n){var t=n.id?n.id:r.GUIDUtils.newGuid();u._setPageMessages([new o(t,n.messageType,n.message,n.closeable,n.link,n.persistDismissal,n.children)])},u._handleAddExceptionsInfo=function(n){if(n&&n.length>0){var t=n.map(function(n){return new o(r.GUIDUtils.newGuid(),i.MessageBarType.error,n.exceptionInfo.exceptionMessage,n.closable,{text:n.exceptionInfo.primaryLinkText,href:n.exceptionInfo.primaryLinkHref})});u._setPageMessages(t)}},u._attachActionListeners(t),u}return __extends(t,n),t.prototype.getMessages=function(){return this._messages},t.prototype._attachActionListeners=function(n){n.addExceptionsInfo.addListener(this._handleAddExceptionsInfo);n.clearPageMessage.addListener(this._handleClearPageMessage);n.addMessage.addListener(this._handleAddMessage);n.clearAllMessages.addListener(this._handleClearAllMessages)},t.prototype._setPageMessages=function(n){var t=this,i=!1;n.forEach(function(n){n&&!f.arrayContains(n,t._messages,function(n,t){return e.defaultComparer(n.message,t.message)===0})&&(t._messages.push(n),i=!0)});i&&(this._messages=this._messages.slice(),this.emitChanged())},t}(u.Store);t.HubMessagesStore=s;o=function(){function n(n,t,i,r,u,f,e){this.id=n;this.messageType=t;this.message=i;this.closeable=r;this.link=u;this.persistDismissal=f;this.children=e}return n}()});

define("Agile/Scripts/BacklogsHub/BacklogPivot/Components/BacklogPivot",["require","exports","Agile/Scripts/Backlog/Backlog","Agile/Scripts/Backlog/BacklogShortcutGroup","Agile/Scripts/BacklogsHub/BacklogPivot/ActionsCreator/BacklogDataProvider","Agile/Scripts/BacklogsHub/BacklogPivot/ActionsCreator/BacklogPivotActions","Agile/Scripts/BacklogsHub/BacklogPivot/ActionsCreator/BacklogPivotActionsCreator","Agile/Scripts/BacklogsHub/BacklogPivot/BacklogPivotContracts","Agile/Scripts/BacklogsHub/BacklogPivot/BacklogPivotSettings","Agile/Scripts/BacklogsHub/BacklogPivot/Components/ProductBacklogWrapper","Agile/Scripts/BacklogsHub/BacklogPivot/Selectors/BacklogPivotSelector","Agile/Scripts/BacklogsHub/BacklogPivot/Store/BacklogPivotStore","Agile/Scripts/BacklogsHub/BacklogsHubTelemetryConstants","Agile/Scripts/BacklogsHub/Mapping/Components/MappingPane","Agile/Scripts/BacklogsHub/Planning/Components/PlanningView","Agile/Scripts/Common/Components/AgileFilterBar/AgileFilterBar","Agile/Scripts/Common/Components/AgileHubError","Agile/Scripts/Common/Components/BacklogAddItemCallout/BacklogAddItemCallout","Agile/Scripts/Common/Components/BacklogPivot/BacklogContributionRightPanel","Agile/Scripts/Common/Components/BacklogPivotBarActionHelper","Agile/Scripts/Common/Components/ComponentRegistration","Presentation/Scripts/TFS/Components/LoadingComponent","Agile/Scripts/Common/Components/PivotItemContent","Agile/Scripts/Common/Components/SplitView/SplitView","Agile/Scripts/Common/FilterStatePersistenceManager","Agile/Scripts/Common/HubTelemetryHelper","Agile/Scripts/Common/HubUrlUtilities","Agile/Scripts/Common/HubViewActions","Agile/Scripts/Common/Messages/HubMessages","Agile/Scripts/Common/Messages/HubMessagesActions","Agile/Scripts/Common/Messages/HubMessagesActionsCreator","Agile/Scripts/Common/Messages/HubMessagesStore","Agile/Scripts/Common/ViewActions/BacklogLevelSelectorViewAction","Agile/Scripts/Generated/HubConstants","Agile/Scripts/Resources/TFS.Resources.BacklogsHub.BacklogView","Agile/Scripts/Resources/TFS.Resources.Agile","OfficeFabric/MessageBar","Presentation/Scripts/TFS/Generated/TFS.WebApi.Constants","Presentation/Scripts/TFS/TFS.IllustrationUrlUtils","VSS/Error","VSS/Events/Document","VSS/Locations","VSS/Utils/Accessibility","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/String","VSSUI/Utilities/HubViewState","VSS/Core/Observable","VSSUI/Utilities/ViewOptions","VSSUI/ZeroData","WorkItemTracking/Scripts/Controls/Filters/WorkItemFilter","WorkItemTracking/Scripts/Filtering/FilterManager","Agile/Scripts/Common/Components/DelayTTIComponent","react","Presentation/Scripts/TFS/Components/LearningBubble/LearningBubble","Presentation/Scripts/TFS/Components/LearningBubble/Constants","OfficeFabric/Button","OfficeFabric/Utilities","Agile/Scripts/Resources/TFS.Resources.AgileControls","OfficeFabric/Tooltip","VSS/FeatureAvailability/Services","VSS/LoaderPlugins/Css!Agile/Scripts/BacklogsHub/BacklogPivot/Components/BacklogPivot"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki){Object.defineProperty(t,"__esModule",{value:!0});t.BacklogPivot=void 0;var di="zero-data-add-new-item",gi=function(n){function t(t,r){var p=n.call(this,t,r,at.BacklogsHubConstants.HUB_NAME,t.pivotName)||this,b;p._viewOptionsLearningBubble=li.createRef();p._renderMainContent=function(){var n=p.state,e=n.backlogContext,t=n.backlogEmpty,i=n.queryInfoEmpty,o=n.backlogPayload,r=n.exceptionInfo,s=n.isInitialLoad,c=n.eventHelper,u=n.status,l=n.activeWorkItemTypes,a=n.isFiltered,f=p._getNewWorkItemStatus(l,a),v=f.disabled,y=f.tooltip;return u===1?s?null:li.createElement(nt.LoadingComponent,null):u===2&&r?li.createElement(w.HubError,{exceptionsInfo:[r]}):li.createElement("div",{className:"product-backlog-pivot",role:"main","aria-label":vt.Backlog,ref:p._resolveProductBacklogContainer},li.createElement(ai.LearningBubble,{ref:p._viewOptionsLearningBubble,settingsKey:vi.LearningBubbleSettingsKeys.RightPanelViewOptions,target:vi.HubViewOptionsTargetSelector,text:yt.PaneClosedLearningBubbleInfoText,buttonLabel:yt.PaneClosedLearningBubbleButtonText}),p._onRenderFilterBar(),li.createElement("div",{className:"backlog-container"},li.createElement(ot.HubMessages,{actionsCreator:p._messagesActionsCreator,store:p._messagesStore}),t&&i&&li.createElement(oi.ZeroData,{imagePath:gt.urlHelper.getVersionedContentUrl(bt.WorkZeroDataIllustrationPaths.NoWorkScheduled),imageAltText:vt.GetStartedProductBacklog,primaryText:vt.GetStartedProductBacklog,secondaryText:p._getSecondaryText(v,y)}),li.createElement(h.ProductBacklogWrapper,{ref:p._resolveBacklogRef,backlogContext:e,backlogFilterContext:p._backlogFilterContext,filter:p.props.filter,backlogPayload:o,visible:!t||!i,addMessage:p._addMessage,removeMessage:p._removeMessage,forecastingOn:p.props.viewOptions.getViewOption(at.BacklogsHubConstants.ForecastingParameter),onColumnOptionsChanged:p._onColumnOptionsChanged,eventHelper:c,newBacklogLevelsSignature:p.props.newBacklogLevelsSignature})),p._renderAddItemCallout())};p._zeroDataNewWorkItemHandler=function(){ut.BacklogsHubTelemetryHelper.publishTelemetry(a.BacklogsHubTelemetryConstants.ZERO_DATA_ADD_NEW_ITEM,{});p._addNewItemViewActionTarget("[data-command-key='new-work-item']")};p._onFilterDismissClicked=function(){p._toggleFilterBar()};p._onViewOptionsChanged=function(n){if(n.hasOwnProperty(ui.HubViewOptionKeys.fullScreen)&&p._backlogWrapper&&p._backlogWrapper.resize(),n.hasOwnProperty(at.BacklogsHubConstants.ShowParentsQueryParameter)){if(n[at.BacklogsHubConstants.ShowParentsQueryParameter]&&p.props.viewOptions.getViewOption(at.BacklogsHubConstants.ForecastingParameter)){s.BacklogPivotSettings.setMRU(at.BacklogsHubConstants.ForecastingSetting,p.props.team.id,!1);var t=p.props.viewOptions.getViewOptions();t[at.BacklogsHubConstants.ForecastingParameter]=!1;p.props.viewOptions.setViewOptions(t);p.state.isRequirementsBacklog&&p._messagesActionsCreator.addMessage({id:"ForecastingDisabled",message:vt.Forecasting_DisabledWhileShowParents,messageType:pt.MessageBarType.info,closeable:!0})}else n[at.BacklogsHubConstants.ShowParentsQueryParameter]||p._messagesActionsCreator.clearPageMessage("ForecastingDisabled");n[at.BacklogsHubConstants.ShowParentsQueryParameter]||p._messagesActionsCreator.clearPageMessage("ForecastingDisabled");s.BacklogPivotSettings.setMRU(at.BacklogsHubConstants.ShowParentsSetting,p.props.team.id,n[at.BacklogsHubConstants.ShowParentsQueryParameter]);p._reloadBacklogWithParameters()}n.hasOwnProperty(at.BacklogsHubConstants.ForecastingParameter)&&p._backlogWrapper&&(s.BacklogPivotSettings.setMRU(at.BacklogsHubConstants.ForecastingSetting,p.props.team.id,n[at.BacklogsHubConstants.ForecastingParameter]),p._backlogWrapper.toggleForecasting(n[at.BacklogsHubConstants.ForecastingParameter]));n.hasOwnProperty(at.BacklogsHubConstants.InProgressParameter)&&p._processViewOptionAndReload(n,at.BacklogsHubConstants.InProgressParameter,at.BacklogsHubConstants.InProgressSetting);n.hasOwnProperty(at.BacklogsHubConstants.CompletedChildItemsParameter)&&(p._processViewOptionAndReload(n,at.BacklogsHubConstants.CompletedChildItemsParameter,at.BacklogsHubConstants.CompletedChildItemsSetting),ut.BacklogsHubTelemetryHelper.publishTelemetry(a.BacklogsHubTelemetryConstants.COMPLETED_CHILD_ITEMS_TOGGLED,{value:n[at.BacklogsHubConstants.CompletedChildItemsParameter]}));n.hasOwnProperty(at.BacklogsHubConstants.PaneParameter)&&(s.BacklogPivotSettings.setMRU(at.BacklogsHubConstants.PaneSetting,p.props.team.id,n[at.BacklogsHubConstants.PaneParameter]),p._backlogPivotActionsCreator.updateActiveRightPane(n[at.BacklogsHubConstants.PaneParameter]));n.hasOwnProperty(at.AgileRouteParameters.BacklogLevel)&&(p._messagesActionsCreator.clearPageMessage("NavigationBlocked"),p._initialFilterSet=!1,p._backlogPivotActionsCreator.toggleFiltered(!1),p._backlogPivotActionsCreator.updateFilterStatePersistenceManager(new rt.FilterStatePersistenceManager(wt.TfsSettingsScopeNames.WebTeam,p.props.team.id,at.BacklogsHubConstants.HUB_NAME,at.BacklogsHubConstants.BacklogPivot,[n[at.AgileRouteParameters.BacklogLevel]])),p._reloadBacklogWithParameters())};p._processViewOptionAndReload=function(n,t,i){var u=(!p._backlogWrapper||!p._backlogWrapper.getProductBacklog().hasUncommitedChanges())&&!dt.getRunningDocumentsTable().isModified(),r;u?(s.BacklogPivotSettings.setMRU(i,p.props.team.id,n[t]),p._reloadBacklogWithParameters()):(r=p.props.viewOptions.getViewOptions(),r[t]=!n[t],p.props.viewOptions.setViewOptions(r),p._messagesActionsCreator.addMessage({id:"NavigationBlocked",message:vt.Navigation_PendingChanges,messageType:pt.MessageBarType.warning,closeable:!0}))};p._renderRightPanel=function(){return p._shouldShowRightPanel()?li.createElement(ci.DelayTTIComponent,{showLoading:!0},p._renderRightPanelContent):null};p._renderRightPanelContent=function(){var n=p.props,f=n.currentBacklog,e=n.nextBacklog,t=n.team,r=p.state,s=r.eventHelper,u=r.paneId,i;return ri.equals(o.BacklogPaneIds.Mapping,u,!0)?li.createElement(v.MappingPane,{onDismiss:p._dismissRightPanel,currentTeam:t,hostBacklogLevel:f,targetBacklogLevel:e,getWorkItemDragInfo:p._getWorkItemDragInfo,onSameTeamBacklogChanged:p._onSameTeamBacklogLevelChanged,onWorkItemsDropped:p._reparentWorkItemsFromMappingPane}):ri.equals(o.BacklogPaneIds.Planning,u,!0)?li.createElement(y.PlanningView,{onDismiss:p._dismissRightPanel,getWorkItemDragInfo:p._getWorkItemDragInfo,moveWorkItemsToIteration:p._moveWorkItemsToIteration,team:t}):(i=p._getRightPanelContribution(),i)?li.createElement(k.BacklogContributionRightPanel,{onDismiss:p._dismissRightPanel,contributionData:i,eventHelper:s,getSelectedWorkItems:p._getSelectedWorkItems,team:t}):null};p._shouldShowRightPanel=function(){var n=p.state.paneId;return ri.equals(o.BacklogPaneIds.Off,n,!0)?!1:ri.equals(o.BacklogPaneIds.Mapping,n,!0)||ri.equals(o.BacklogPaneIds.Planning,n,!0)||!!p._getRightPanelContribution()};p._dismissRightPanel=function(){p.props.viewOptions.setViewOption(at.BacklogsHubConstants.PaneParameter,o.BacklogPaneIds.Off);p._viewOptionsLearningBubble.current&&p._viewOptionsLearningBubble.current.showIfNeeded()};p._getRightPanelContribution=function(){var n=p.state,i=n.paneId,t=n.rightPanelContributions;return t?ti.first(t,function(n){return ri.equals(n.id,i,!0)}):null};p._onFilterChanged=function(n){var t=hi.isFilterStateEmpty(si.mapToFilterState(n));!t&&p.props.viewOptions.getViewOption(at.BacklogsHubConstants.ForecastingParameter)&&p.props.viewOptions.setViewOption(at.BacklogsHubConstants.ForecastingParameter,!1);p._backlogPivotActionsCreator.saveFilterState(n)};p._onSameTeamBacklogLevelChanged=function(n){var t=p.props.viewOptions,i=t.getViewOption(at.AgileRouteParameters.BacklogLevel);i!==n.name&&t.setViewOption(at.AgileRouteParameters.BacklogLevel,n.name)};p._getSelectedWorkItems=function(){return p._backlogWrapper?p._backlogWrapper.getSelectedWorkItems():[]};p._delayResizeBacklog=function(){ii.delay(p,0,function(){p._backlogWrapper&&p._backlogWrapper.resize()})};p._onStoreChanged=function(){p.setState(c.getState(p._backlogPivotStore))};p._toggleFilterBar=function(){p._backlogPivotActionsCreator.toggleFilterBar(!p.state.isFilterBarOpen)};p._onAddNewItemDismiss=function(n){var t=document.getElementById(di);n.target===t||pi.elementContains(t,n.target)||p._onAddNewItemDismissAction()};p._onAddNewItemDismissAction=function(){p._backlogPivotActionsCreator.toggleAddItemCallout(!1);p._addItemCalloutTarget=null;p._backlogWrapper&&p._backlogWrapper.toggleInsertionLine(!1)};p._onCalloutInsertionLocationUpdate=function(n){p._backlogWrapper&&p._backlogWrapper.toggleInsertionLine(!0,n)};p._onOpenColumnOptions=function(){p._backlogWrapper&&p._backlogWrapper.openColumnOptions()};p._onColumnOptionsChanged=function(){p._reloadBacklogWithParameters()};p._onCreateQuery=function(){p._backlogWrapper&&p._backlogWrapper.createQuery(function(){p._backlogPivotActionsCreator.queryInfoAdded()})};p._onSendEmail=function(){p._backlogWrapper&&p._backlogWrapper.sendEmail()};p._onOpenSettings=function(){p._backlogPivotActionsCreator.openSettings()};p._addMessage=function(n){p._messagesActionsCreator.addMessage(n)};p._removeMessage=function(n){p._messagesActionsCreator.clearPageMessage(n)};p._showFilter=function(n){n&&p._backlogFilterContext&&(p._backlogFilterContext.value.skipFocusOnMount=!0);p._backlogPivotActionsCreator.toggleFilterBar(!0)};p._addNewItemViewAction=function(n){p._addNewItemViewActionTarget(n.currentTarget)};p._addNewItemViewActionTarget=function(n){p.state.showAddItemCallout?p._backlogPivotActionsCreator.toggleAddItemCallout(!1):(p._addItemCalloutTarget=n,p._backlogPivotActionsCreator.toggleAddItemCallout(!0))};p._addNewItem=function(n,t,r){p._backlogWrapper&&p._backlogWrapper.addWorkItem(n,t,r).then(function(n){var t=n.status,r=n.continuationPromise;t===i.AddBacklogItemStatus.Added?(p._backlogPivotActionsCreator.backlogItemAdded(),p._backlogWrapper.resize()):t===i.AddBacklogItemStatus.WorkItemFormOpened&&(p._backlogPivotActionsCreator.toggleAddItemCallout(!1),r&&r.then(function(n){n&&(p._backlogPivotActionsCreator.backlogItemAdded(),p._backlogWrapper.resize())}))},function(n){kt.publishErrorToTelemetry(n)})};p._moveWorkItemsToIteration=function(n,t){if(p._backlogWrapper)p._backlogWrapper.moveWorkItemsToIteration(n,t);else throw new Error("The Product Backlog is not yet available");};p._reparentWorkItemsFromMappingPane=function(n,t){var i;if(p._backlogWrapper)p._backlogWrapper.reparentFromMappingPane(n,t),ut.BacklogsHubTelemetryHelper.publishTelemetry(a.BacklogsHubTelemetryConstants.MAPPING_ITEM_DROPPED,(i={},i[a.BacklogsHubTelemetryConstants.ItemCount]=n.length,i));else throw new Error("The Product Backlog is not yet available");};p._getWorkItemDragInfo=function(){if(p._backlogWrapper)return p._backlogWrapper.getDraggingWorkItemInformation();throw new Error("The Product Backlog is not yet available");};p._resolveBacklogRef=function(n){p._backlogWrapper=n};p._resolveProductBacklogContainer=function(){p._cleanupKeyboardShortcuts();p._setupKeyboardShortcuts()};b=new st.HubMessagesActions;p._messagesActionsCreator=new ht.HubMessagesActionsCreator(b);p._messagesStore=new ct.HubMessagesStore(b);var d=new f.BacklogPivotActions,g=new u.BacklogDataProvider,tt=new rt.FilterStatePersistenceManager(wt.TfsSettingsScopeNames.WebTeam,t.team.id,at.BacklogsHubConstants.HUB_NAME,at.BacklogsHubConstants.BacklogPivot,[t.currentBacklog.name]);return p._backlogPivotActionsCreator=new e.BacklogPivotActionsCreator(d,g,tt),p._backlogPivotStore=new l.BacklogPivotStore(d),p.state=c.getState(p._backlogPivotStore),p._backlogFilterContext=new fi.ObservableValue({filterManager:null,skipFocusOnMount:!1}),p}return __extends(t,n),t.prototype.componentWillMount=function(){n.prototype.componentWillMount.call(this);var t=this.setViewOptionsInitialState();this.props.viewOptions.subscribe(this._onViewOptionsChanged,ei.VIEW_OPTIONS_CHANGE_EVENT);this._messagesStore.addChangedListener(this._delayResizeBacklog);this._backlogPivotStore.addChangedListener(this._onStoreChanged);this._backlogPivotActionsCreator.initialize();this._backlogPivotActionsCreator.updateActiveRightPane(t);this._setupKeyboardShortcuts()},t.prototype.componentDidMount=function(){n.prototype.componentDidMount.call(this)},t.prototype.componentWillReceiveProps=function(n){ri.equals(this.state.paneId,o.BacklogPaneIds.Mapping,!0)&&!n.nextBacklog&&n.viewOptions.setViewOption(at.BacklogsHubConstants.PaneParameter,o.BacklogPaneIds.Off)},t.prototype.componentWillUpdate=function(t,i){var r=this;n.prototype.componentWillUpdate.call(this,t,i);!this._initialFilterSet&&i.initialFilterState&&(t.filter.setState(i.initialFilterState),this._initialFilterSet=!0,t.filter.hasChangesToReset()&&ii.delay(this,0,function(){r._showFilter(!0);r._backlogPivotActionsCreator.toggleFiltered(!0)}));this.state.status===1&&i.status!==1&&(i.backlogEmpty&&ni.announce(ri.format(vt.Backlog_NoItems,t.currentBacklog.name),!0),i.exceptionInfo&&ni.announce(ri.format(vt.Backlog_LoadError,t.currentBacklog.name,i.exceptionInfo.exceptionMessage),!0));this._setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){n.prototype.componentWillUnmount.call(this);this._cleanupKeyboardShortcuts();this._messagesStore.removeChangedListener(this._delayResizeBacklog);this._backlogPivotStore.removeChangedListener(this._onStoreChanged);this.props.viewOptions.unsubscribe(this._onViewOptionsChanged,ei.VIEW_OPTIONS_CHANGE_EVENT)},t.prototype.componentDidUpdate=function(t,i){n.prototype.componentDidUpdate.call(this,t,i);this._backlogWrapper&&(i.paneId!==this.state.paneId||i.isFilterBarOpen!==this.state.isFilterBarOpen)&&this._delayResizeBacklog()},t.prototype.isDataReady=function(){var n=this.state.status;return n!==1},t.prototype.executeAfterTTI=function(){this._backlogPivotActionsCreator.initializeRightPanelContributions()},t.prototype.render=function(){return li.createElement(it.SplitView,{className:"split-view",onRenderNearElement:this._renderMainContent,onRenderFarElement:ri.equals(this.state.paneId,o.BacklogPaneIds.Off,!0)?undefined:this._renderRightPanel,fixedElement:1,registrySettingsPrefix:"Agile/BacklogsHub/Pivots/Backlog/Content/SplitView",onFixedSizeChanged:this._delayResizeBacklog})},t.prototype._getSecondaryText=function(n,t){var i=li.createElement(yi.PrimaryButton,{disabled:n,onClick:this._zeroDataNewWorkItemHandler,iconProps:{iconName:"Add"},id:di},wi.BacklogAddItemCallout_Title);return li.createElement("div",null,li.createElement("div",{className:"zero-data-text"},vt.CreateWorkItemSuggestion),li.createElement("div",{className:"new-work-item-button"},n?li.createElement(bi.TooltipHost,{content:t},i):i),li.createElement("a",{target:"_blank",href:"https://go.microsoft.com/fwlink/?linkid=867428"},vt.LearnMoreAboutBacklogs))},t.prototype.setViewOptionsInitialState=function(){var r=this.props.viewOptions.getViewOption(at.BacklogsHubConstants.ShowParentsQueryParameter)!=null?this.props.viewOptions.getViewOption(at.BacklogsHubConstants.ShowParentsQueryParameter):s.BacklogPivotSettings.getSetting(at.BacklogsHubConstants.ShowParentsSetting,!1),u,f,t,i,n;return r?(this.props.viewOptions.setViewOption(at.BacklogsHubConstants.ShowParentsQueryParameter,r),this.props.viewOptions.setViewOption(at.BacklogsHubConstants.ForecastingParameter,!1)):(u=s.BacklogPivotSettings.getSetting(at.BacklogsHubConstants.ForecastingSetting,!1),this.props.viewOptions.setViewOption(at.BacklogsHubConstants.ForecastingParameter,u)),f=s.BacklogPivotSettings.getSetting(at.BacklogsHubConstants.InProgressSetting,!0),this.props.viewOptions.setViewOption(at.BacklogsHubConstants.InProgressParameter,f),t=ki.FeatureAvailabilityService.isFeatureEnabled("WebAccess.Agile.Backlog.ShowHideCompletedChildItemsViewOption",!1)?s.BacklogPivotSettings.getSetting(at.BacklogsHubConstants.CompletedChildItemsSetting,!0):!0,this.props.viewOptions.setViewOption(at.BacklogsHubConstants.CompletedChildItemsParameter,t),ut.BacklogsHubTelemetryHelper.publishTelemetry(a.BacklogsHubTelemetryConstants.COMPLETED_CHILD_ITEMS_LOADED_AS,{value:t}),i=this.props.viewOptions.getViewOption(at.BacklogsHubConstants.RightPaneQueryParameter),n=i?this.props.viewOptions.getViewOption(at.BacklogsHubConstants.RightPaneQueryParameter):s.BacklogPivotSettings.getSetting(at.BacklogsHubConstants.PaneSetting,o.BacklogPaneIds.Planning),ri.equals(n,o.BacklogPaneIds.Mapping,!0)&&!this.props.nextBacklog&&(n=o.BacklogPaneIds.Off),ri.equals(n,o.BacklogPaneIds.Planning,!0)&&!this.props.hasIterations&&(n=o.BacklogPaneIds.Off),this.props.viewOptions.setViewOption(at.BacklogsHubConstants.PaneParameter,n),i&&this.props.viewOptions.setViewOption(at.BacklogsHubConstants.RightPaneQueryParameter,null),n},t.prototype._onRenderFilterBar=function(){if(this.state.isFilterBarOpen)return li.createElement("div",{className:"product-backlog-filter"},li.createElement(p.AgileFilterBar,{filter:this.props.filter,filterContext:this._backlogFilterContext,onFilterChanged:this._onFilterChanged,onDismissClicked:this._onFilterDismissClicked}))},t.prototype.shouldUpdateCommandsOnUpdate=function(n,t){return this.state.status!==t.status||this.state.isFiltered!==t.isFiltered||this.props.pivotName!==n.pivotName},t.prototype.shouldUpdateViewActionsOnUpdate=function(n,t){return this.state.status!==t.status||this.props.pivotName!==n.pivotName||this.props.currentBacklog!==n.currentBacklog||this.state.backlogPayload!==t.backlogPayload||this.state.backlogContext!==t.backlogContext||this.state.isFiltered!==t.isFiltered||this.state.rightPanelContributions!==t.rightPanelContributions},t.prototype.shouldResizeFilterBarOnUpdate=function(n){return this.state.isFilterBarOpen&&(this.state.paneId===o.BacklogPaneIds.Off&&n.paneId!==o.BacklogPaneIds.Off||this.state.paneId!==o.BacklogPaneIds.Off&&n.paneId===o.BacklogPaneIds.Off)},t.prototype.getCommands=function(n,t){var r=n.currentBacklog,f=n.team,u=t.status!==4,i=[],e;return i.push(d.BacklogPivotBarActionHelper.getNewWorkItemPivotBarAction(this._addItemCommandOptions(t))),e=ft.BoardsUrls.getBoardsContentUrl(f.name,r.name),i.push({key:"matching-board",name:vt.ViewAsBoard,iconProps:{iconName:"bowtie-navigate-forward-circle",iconType:1},href:e,important:!0,onClick:function(n){var t,i;n&&(n.ctrlKey||n.metaKey)||(n.preventDefault(),i=ft.BoardsUrls.getBoardsContentUrl(f.name,r.name),ft.BoardsUrls.navigateToBoardsHubUrl(i),ut.BacklogsHubTelemetryHelper.publishTelemetry(a.BacklogsHubTelemetryConstants.SWITCH_TO_MATCHING_BOARD,(t={},t[at.AgileRouteParameters.BacklogLevel]=r.name,t)))}}),i.push(d.BacklogPivotBarActionHelper.getOpenColumnOptionsAction({onClick:this._onOpenColumnOptions,disabled:u}),d.BacklogPivotBarActionHelper.getCreateQueryAction({onClick:this._onCreateQuery,disabled:u}),d.BacklogPivotBarActionHelper.getSendEmailAction({onClick:this._onSendEmail,disabled:u})),i},t.prototype.getViewActions=function(n,t){var u=this,l=n.visibleBacklogLevels,a=n.viewOptions,i=[],e=t.status===1,v=!t.isRootBacklog,y=t.isRequirementsBacklog,f=e,r=vt.Forecasting_Tooltip,o,s,h,c;return n.viewOptions.getViewOption(at.BacklogsHubConstants.ShowParentsQueryParameter)?(f=!0,r=vt.Forecasting_DisabledWhileShowParents):t.isFiltered&&(f=!0,r=vt.Forecasting_DisabledWhileFiltering),i.push(lt.getLevelSelectorViewAction(l,a,function(){return(!u._backlogWrapper||!u._backlogWrapper.getProductBacklog().hasUncommitedChanges())&&!dt.getRunningDocumentsTable().isModified()},"Backlog",{iconName:"BacklogList",iconType:0},function(){u._messagesActionsCreator.addMessage({id:"NavigationBlocked",message:vt.Navigation_PendingChanges,messageType:pt.MessageBarType.warning,closeable:!0})})),i.push(et.HubViewActions.getCommonSettings(this._onOpenSettings)),i.push(et.HubViewActions.getFilterAction(this._toggleFilterBar,t.isFiltered)),v&&(o={ariaLabel:vt.Parents_Tooltip,key:at.BacklogsHubConstants.ShowParentsQueryParameter,disabled:e,actionType:1,name:vt.Parents_ViewAction,title:vt.Parents_Tooltip},i.push(o)),y&&(s={ariaLabel:r,key:at.BacklogsHubConstants.ForecastingParameter,disabled:f,actionType:1,name:vt.Forecasting,title:r},i.push(s)),h={ariaLabel:vt.InProgress_Tooltip,key:at.BacklogsHubConstants.InProgressParameter,actionType:1,name:vt.InProgress_ViewAction,title:vt.InProgress_Tooltip},i.push(h),ki.FeatureAvailabilityService.isFeatureEnabled("WebAccess.Agile.Backlog.ShowHideCompletedChildItemsViewOption",!1)&&(c={ariaLabel:vt.CompletedChildItems_Tooltip,key:at.BacklogsHubConstants.CompletedChildItemsParameter,actionType:1,name:vt.CompletedChildItems_ViewAction,title:vt.CompletedChildItems_Tooltip},i.push(c)),i.push(this._getRightPaneViewAction(n,t)),i},t.prototype._getRightPaneViewAction=function(n,t){var i=[],r,u,f,e;return n.nextBacklog&&i.push({key:o.BacklogPaneIds.Mapping,text:vt.MappingPaneTitle,title:vt.Mapping_Tooltip,ariaLabel:vt.Mapping_Tooltip}),i.push({key:o.BacklogPaneIds.Planning,text:vt.PlanningPaneTitle,title:vt.Planning_Tooltip,ariaLabel:vt.Planning_Tooltip}),r=t.rightPanelContributions,u=t.paneId,r&&(f=r.map(function(n){return{key:n.id,text:n.properties.name,checked:ri.equals(n.id,u,!0)}}),i=i.concat(f)),i.push({key:o.BacklogPaneIds.Off,text:vt.OffPaneTitle,title:vt.Off_Tooltip,ariaLabel:vt.Off_Tooltip}),e={defaultSelectedKey:o.BacklogPaneIds.Off,options:i},{actionType:2,name:vt.RightPane_ViewActionGroup,separator:!0,key:at.BacklogsHubConstants.PaneParameter,actionProps:e}},t.prototype._renderAddItemCallout=function(){var t=this.props,n=t.currentBacklog,u=t.filter,i=this.state,f=i.showAddItemCallout,e=i.activeWorkItemTypes,r;return f?(r={target:this._addItemCalloutTarget,onDismiss:this._onAddNewItemDismiss,isBeakVisible:!0,directionalHint:12,preventDismissOnScroll:!0},li.createElement(b.BacklogAddItemCallout,{filterApplied:u.hasChangesToReset(),onInsertLocationChanged:this._onCalloutInsertionLocationUpdate,calloutProps:r,workItemTypes:e,additionalFieldReferenceNames:n.addPanelFields,defaultWorkItemType:n.defaultWorkItemType,onSubmit:this._addNewItem,calloutId:"BacklogsHub".concat(n.id)})):null},t.prototype._reloadBacklogWithParameters=function(){this._backlogPivotActionsCreator.reloadBacklog(this.props.viewOptions.getViewOption(at.BacklogsHubConstants.ForecastingParameter),this.props.viewOptions.getViewOption(at.BacklogsHubConstants.InProgressParameter),this.props.viewOptions.getViewOption(at.BacklogsHubConstants.CompletedChildItemsParameter))},t.prototype._setupKeyboardShortcuts=function(){var n=this;!this._backlogShortcuts&&this._backlogWrapper&&this._backlogWrapper.componentDidUpdate&&(this._backlogShortcuts=new r.BacklogShortcutGroup({getTeamId:function(){return n.props.team.id},getBacklog:function(){return n._backlogWrapper.getProductBacklog()},backlogElement:this._backlogWrapper.getProductBacklogContainer(),activateFilter:function(){return n._showFilter()}}))},t.prototype._cleanupKeyboardShortcuts=function(){this._backlogShortcuts&&(this._backlogShortcuts.removeShortcutGroup(),this._backlogShortcuts=null)},t.prototype._addItemCommandOptions=function(n){var t=this._getNewWorkItemStatus(n.activeWorkItemTypes,n.isFiltered),i=t.disabled,r=t.tooltip;return{disabled:i,tooltip:r,onClick:this._addNewItemViewAction}},t.prototype._getNewWorkItemStatus=function(n,t){var i=!1,r=null;return n&&n.length<1?(i=!0,r=vt.BacklogAddItemButton_Disabled_NoWorkItemTypes):t&&(i=!0,r=vt.BacklogAddItemButton_Disabled_Filter),{disabled:i,tooltip:r}},__decorate([g.component("backlogs-backlog-pivot")],t)}(tt.PivotItemContent);t.BacklogPivot=gi});

define("VersionControl/Scripts/TFS.VersionControl.CreateBranchContextMenu",["require","exports","VSS/VSS","VSS/Service","VSS/Contributions/Services","VSS/SDK/Shim","VSS/Context"],function(n,t,i,r,u,f,e){function o(n){var t=e.getPageContext(),u=n.ids||n.workItemIds||n.workItemAvailable&&n.workItemId&&[n.workItemId]||n.id&&[n.id],r=n.workItemAvailable?"item.":"";r+=t.navigation.currentController+"."+t.navigation.currentAction;i.requireModules(["VersionControl/Scripts/CreateBranchWithLinkedWorkItems"]).spread(function(t){t.openCreateBranchDialog(u,r,n.currentProjectName,n.currentProjectGuid,n.movedToNewProject)})}Object.defineProperty(t,"__esModule",{value:!0});t.onCreateBranchMenuItemClick=void 0,function(){var t="ms.vss-code-web.",n=r.getService(u.WebPageDataService).getPageData("ms.vss-code-web.supports-git-data-provider"),i=n&&n.isSupported;i&&["create-branch-menu","create-branch-work-item-menu"].forEach(function(n){f.VSS.register(n,{execute:o});f.VSS.register(t+n,{execute:o})})}();t.onCreateBranchMenuItemClick=o;i.tfsModuleLoaded("TFS.VersionControl.CreateBranchContextMenu",t)});

define("TestManagement/Scripts/ContributionMenuItem/CreateTestWorkItemDeleteMenuItem",["require","exports","VSS/Context","VSS/Events/Services","VSS/SDK/Shim","VSS/VSS","WorkItemTracking/Scripts/MenuItems/DeleteMenuItemCommonHelper"],function(n,t,i,r,u,f,e){function o(n){var r=i.getPageContext(),u=r.webAccessConfiguration.clientHost,t=e.getMenuItemProperties(n);return e.hidePermanentlyDeleteMenuItemForTestWorkItem(u,n,t)?Promise.resolve([]):f.requireModules(["TestManagement/Scripts/Resources/TFS.Resources.TestManagement","TestManagement/Scripts/TFS.TestManagement.Telemetry"]).spread(function(i,r){var o=r.TelemetryService,u=[{id:"test-work-item-delete",groupId:t.groupId,rank:t.rank,title:i.PermanentDeleteTestWorkItemToolTip,text:i.PermanentDeleteTestWorkItem,icon:"css://bowtie-icon bowtie-edit-delete",showText:!0,hidden:!0,action:function(i){o.publishEvents(o.featureDeleteTestWorkItem,{LaunchPoint:t.ciFeatureName,SourceArea:t.ciSourceAreaName,WorkItemTypes:t.workItemTypeNames});f.using(["WorkItemTracking/Scripts/TestWorkItemDelete/TFS.TestWorkItemDelete.Dialog"],function(r){var e=t.workItemTypeNames[0],u=t.workItemIds[0],o=n.currentProjectGuid||n.workItemProjects&&n.workItemProjects[u];r.getTestWorkItemDeleteConfirmationDialog(e,o).then(function(n){n.showDialog(u,function(){var r=function(){$.isFunction(i.closeWorkItemFormDialogDelegate)&&i.closeWorkItemFormDialogDelegate()},o=function(n){$.isFunction(i.saveErrorCallback)&&i.saveErrorCallback(n)},e=i.workItemAvailable!==undefined;e?(t.successCallback=r,t.errorCallback=function(n){f.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls"],function(t){var i=n.serverError;n.message&&(i={message:n.message});s.fire(t.WorkItemActions.WORKITEM_DELETE_ERROR,null,i);o(n)})}):r();n.deleteTestWorkItem(t.ciFeatureName,t.ciSourceAreaName,u,e,t.successCallback,t.errorCallback)})})})}}];return e.WorkItemCategorization.categorizeWorkItemTypes(t.workItemTypeNames,n.currentProjectGuid).then(function(i){i.nonTestTypes.length===0&&i.testTypes.length>0&&(t.workItemIds.length===1?(u[0].hidden=!1,n.updateMenuItems(u)):(u[0].hidden=!1,u[0].disabled=!0,n.updateMenuItems(u)))}),n.workItemDirty&&(u[0].disabled=!0),u})}Object.defineProperty(t,"__esModule",{value:!0});t.getMenuItems=void 0;var s=r.getService();(function(){var n={getMenuItems:o};u.VSS.register("ms.vss-test-web.test-work-item-delete-menu",n)})();t.getMenuItems=o});

define("WorkItemTracking/Scripts/MenuItems/CreateWorkItemDeleteMenuItem",["require","exports","VSS/Context","VSS/Events/Services","VSS/SDK/Shim","VSS/VSS","WorkItemTracking/Scripts/MenuItems/DeleteMenuItemCommonHelper"],function(n,t,i,r,u,f,e){function c(n){var u=i.getPageContext(),c=u.webAccessConfiguration.clientHost,t=e.getMenuItemProperties(n),r;return e.hideDeleteMenuItem(c,n,t)?[]:(r=[{id:"work-item-delete",groupId:t.groupId,rank:t.rank,text:t.text,icon:"css://bowtie-icon bowtie-edit-delete",showText:!0,setTitleOnlyOnOverflow:!0,hidden:!0,action:function(n){var i=function(i,r){i.RecycleBinTelemetry.publish(r.RecycleBinTelemetryConstants.WORKITEM_DELETE_PROMPT,t.ciFeatureName,t.ciSourceAreaName);i.DeleteConfirmationDialog.showDialog(t.refreshRequired,function(){var r=function(){$.isFunction(n.closeWorkItemFormDialogDelegate)&&n.closeWorkItemFormDialogDelegate()},u=n.workItemAvailable!==undefined,o;u?(t.successCallback=r,t.errorCallback=function(n){f.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls"],function(t){h.fire(t.WorkItemActions.WORKITEM_DELETE_ERROR,null,n.serverError||{message:n.message})})}):r();o=e.WorkItemCategorization.TestAndNonTestWorkItemTypes.testTypes;i.RecycleBin.beginDeleteWorkItems(t.ciFeatureName,t.ciSourceAreaName,t.tfsContext,t.workItemIds,t.readWorkItemsBeforeDeletion,t.refreshRequired,u,o,t.successCallback,t.errorCallback)})};o&&s?i(o,s):f.requireModules(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.RecycleBin","WorkItemTracking/Scripts/RecycleBinConstants"]).spread(function(n,t){o=n;s=t;i(o,s)})}}],e.WorkItemCategorization.categorizeWorkItemTypes(t.workItemTypeNames,n.currentProjectGuid).then(function(t){t.testTypes.length===0&&(r[0].hidden=!1,n.updateMenuItems(r))}),n.workItemDirty&&(r[0].disabled=!0),r)}var h,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.getMenuItems=void 0;h=r.getService(),function(){var n={getMenuItems:c};u.VSS.register("ms.vss-work-web.work-item-delete-menu",n)}();t.getMenuItems=c});

define("WorkItemTracking/Scripts/Services/WorkItemTemplateService",["require","exports","Presentation/Scripts/TFS/TFS.Service","q","TFS/WorkItemTracking/RestClient","VSS/Context","VSS/Contributions/Services","VSS/Events/Services","VSS/Service","VSS/Utils/String","VSS/WebApi/Constants"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTemplateService=void 0;var l=o.getService(),a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._projectOwnerCache={},t._projectWorkItemTypeCache={},t._templateCache={},t}return __extends(t,n),t.prototype.getWorkItemTemplate=function(n,t,i){return this._templateCache[i]||(this._templateCache[i]=this._getHttpClient().getTemplate(n,t,i)),this._templateCache[i]},t.prototype.getWorkItemTemplateReferences=function(n,i){var u=this,r=t._getCacheKey(n,i);return this._projectOwnerCache[r]||(this._projectOwnerCache[r]=this._getHttpClient().getTemplates(n,i).then(function(n){for(var e,i,r,o,s,t={},f=0,h=n;f<h.length;f++)e=h[f],i=u._getNormalizedWorkItemTypeName(e.workItemTypeName),t[i]||(t[i]=[]),t[i].push(e);for(r=0,o=Object.keys(t);r<o.length;r++)s=o[r],t[s]=t[s].sort(function(n,t){return u._compareTemplate(n,t)});return t})),this._projectOwnerCache[r]},t.prototype.getWorkItemTemplatesForType=function(n,t,i){var r=this;return this.getWorkItemTemplateReferences(n,t).then(function(n){var t=r._getNormalizedWorkItemTypeName(i);return n[t]||[]})},t.prototype.getMyWorkItemTemplatesForWorkItemType=function(n){var o=this,i=t._getCacheKey(f.getDefaultWebContext().project.id,n),u,r;return this._projectWorkItemTypeCache[i]?this._projectWorkItemTypeCache[i]:(u=[{id:t.ContributionDataProviderId,properties:{serviceInstanceType:c.ServiceInstanceTypes.TFS}}],r=s.getService(e.WebPageDataService),this._projectWorkItemTypeCache[i]=r.ensureDataProvidersResolved(u,!0,{workItemTypeName:n}).then(function(){var n=r.getPageData(t.ContributionDataProviderId);return n.sort(function(n,t){return o._compareTemplate(n,t)})}),this._projectWorkItemTypeCache[i])},t.prototype.replaceWorkItemTemplate=function(n,t,i,r){var u=this,f=this._getHttpClient().replaceTemplate(r,n,t,i);return f.then(function(i){u._resetProviderCache(n,t,i.workItemTypeName);u._updateCache(n,t,i)}),f},t.prototype.createWorkItemTemplate=function(n,t,i){var r=this;return this._getHttpClient().createTemplate(i,n,t).then(function(i){return r._resetProviderCache(n,t,i.workItemTypeName),r._updateCache(n,t,i),i})},t.prototype.deleteWorkItemTemplate=function(n,t,i){this._resetProviderCache(n,t,i.workItemTypeName);var r={};return r[i.id]=!0,this._clearFromCache(n,t,r),this._getHttpClient().deleteTemplate(n,t,i.id)},t.prototype._getHttpClient=function(){return this._httpClient||(this._httpClient=this.tfsConnection.getHttpClient(u.WorkItemTrackingHttpClient)),this._httpClient},t._getCacheKey=function(n,t){return"".concat(n.toLowerCase(),"/").concat(t.toLowerCase())},t.prototype._getNormalizedWorkItemTypeName=function(n){return n.toLowerCase()},t.prototype._updateCache=function(n,i,u){this._templateCache[u.id]=r(u);l.fire(t.EVENT_TEMPLATES_UPDATED)},t.prototype._clearFromCache=function(n,t,i){for(var f,r=0,u=Object.keys(i);r<u.length;r++)f=u[r],delete this._templateCache[f]},t.prototype._resetProviderCache=function(n,i,r){var f=t._getCacheKey(n,i),u;this._projectOwnerCache[f]=null;u=t._getCacheKey(n,r);this._projectWorkItemTypeCache[u]=null},t.prototype._compareTemplate=function(n,t){var i=h.localeIgnoreCaseComparer(n.name,t.name);return i!==0?i:h.localeIgnoreCaseComparer(n.id,t.id)},t.prototype._binarySearchTemplates=function(n,t){if(n&&n.length>0){for(var r=0,u=n.length-1,i,f;r<=u;)if(i=Math.floor(r+(u-r)/2),f=this._compareTemplate(n[i],t),f<0)r=i+1;else if(f>0)u=i-1;else return i;return u}return-1},t.EVENT_TEMPLATES_UPDATED="workitem-template-updated",t.ContributionDataProviderId="ms.vss-work-web.work-item-templates-data-provider",t}(i.TfsService);t.WorkItemTemplateService=a});

define("WorkItemTracking/Scripts/MenuItems/CreateWorkItemTemplatesMenuItem",["require","exports","q","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Diag","VSS/Controls/Dialogs","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/SDK/Shim","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/VSS","VSS/Error","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Service","Presentation/Scripts/TFS/TFS.OM.Common","TfsCommon/Scripts/Team/Services","VSS/Utils/Clipboard","VSS/Utils/String","VSS/Events/Action","VSS/Telemetry/Services","VSS/Events/Document","VSS/Resources/VSS.Resources.Platform","WorkItemTracking/Scripts/MenuItems/MenuItemHelpers","WorkItemTracking/Scripts/Services/WorkItemTemplateService"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){function rt(n){var t,i;if(t={tfsContext:n.tfsContext||h.TfsContext.getDefault(),workItemIds:[],workItemTypes:[],immediateSave:!1,groupId:"modify",rank:100,ciFeatureName:"ContextMenu",projectNames:{},ciSourceAreaName:""},i=tt.GetContextMenuLocation(n),i===tt.MenuItemLocation.Backlog||i===tt.MenuItemLocation.Queries)t.ciSourceAreaName="ResultGrid",t.workItemIds=n.workItemIds,t.rank=i===tt.MenuItemLocation.Backlog?40:70,t.immediateSave=!!n.immediateSave,t.workItemTypes=n.workItemTypeNames,t.projectNames=n.workItemProjects;else if(i===tt.MenuItemLocation.WorkItemForm){var r=g.getService().getActiveDocument(),e=r?r.getWorkItem().project.name:"",f={};r&&(f[n.workItemId]=e);t.ciFeatureName="WI Form";t.ciSourceAreaName="WorkItemView";t.workItemIds=n.workItemId!==undefined&&n.workItemId!==null&&[n.workItemId];t.workItemTypes=n.workItemTypeName&&[n.workItemTypeName];t.groupId="core";t.workItem=r&&r.getWorkItem();t.projectNames=f}return t}function ut(n){var t,i,f,e,o;t=n.workItem;i={};i.parameters=t.workItemType.name;$.each(t.getTemplateFieldValues(),function(n,t){i["["+n+"]"]=t===undefined||t===null?"":t});f=t.store.getTfsContext().getPublicActionUrl("create","workItems",i);w.copyToClipboard(f);w.supportsNativeCopy()&&alert(a.CreateWorkitemIVURLSuccess);e=t.store.getTfsContext().navigation.currentController;o=t.store.getTfsContext().navigation.currentAction;d.publishEvent(new d.TelemetryEventData(r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_TOOLBAR_CLICK,{Action:"Copy template url",OriginArea:e+"/"+o}))}Object.defineProperty(t,"__esModule",{value:!0});t.getMenuItemProperties=void 0;t.getMenuItemProperties=rt,function(){var n={getMenuItems:function(n){var u=tt.GetContextMenuLocation(n),h;if(u===tt.MenuItemLocation.Backlog||u===tt.MenuItemLocation.WorkItemForm||u===tt.MenuItemLocation.Queries){var t=rt(n),s=t.tfsContext.contextData.project&&t.tfsContext.contextData.project.id,w=t.tfsContext.contextData.project&&t.tfsContext.contextData.project.name,r=t.tfsContext.contextData.team&&t.tfsContext.contextData.team.id,g=s&&r,ft=t.workItemIds&&t.workItemIds.length>0||t.workItem,et=ft&&t.workItemTypes&&t.workItemTypes.length===1;if(g&&et&&(h=!b.equals(w,t.projectNames[t.workItemIds[0]],!0),!h)){var ot=v.getService(p.TeamPermissionService).beginGetTeamPermissions(s,r).then(function(n){var i=[],u=!1,f=!0,r=null,s="";return t.workItemIds&&t.workItemIds.length>1&&(f=!1,s=a.WorkItemTemplates_CaptureTemplateMenuItem_TooManyItemsTooltip),n.currentUserHasTeamPermission||(u=!0,r=a.WorkItemTemplates_UserDoesNotHaveTeamPermission),i.push({title:r?r:s,text:a.WorkItemTemplates_CaptureTemplateMenuItem_Text,action:function(){c.requireModules(["WorkItemTracking/Scripts/Dialogs/WorkItemTemplates/WorkItemTemplateCaptureDialog"]).spread(function(n){n.launchCaptureWorkItemTemplateDialog(t)})},disabled:u||!f,icon:"css://bowtie-icon bowtie-camera"}),i.push({title:r?r:"",text:a.WorkItemTemplates_ManageMenuItem_Text,action:function(){var n=t.tfsContext.contextData.team.name,i=t.tfsContext.getActionUrl("","work",{area:"admin",team:n,_a:"templates",type:t.workItemTypes[0]});k.getService().performAction(k.CommonActions.ACTION_WINDOW_OPEN,{url:i,target:"_blank"})},disabled:u,icon:"css://bowtie-icon bowtie-settings-gear"}),e.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WorkItemTemplatesLegacyUrl)&&t.workItem&&t.workItem.isNew()&&(i.push({separator:!0}),i.push({title:a.WorkItemTemplates_LegacyCopyMenuItem_Title,text:a.WorkItemTemplates_LegacyCopyMenuItem_Text,action:function(){ut(t)},icon:"css://bowtie-icon bowtie-copy-to-clipboard"})),i}),st=y.ProjectCollection.getConnection(t.tfsContext),ht=st.getService(it.WorkItemTemplateService),ct=ht.getWorkItemTemplatesForType(s,r,t.workItemTypes[0]).then(function(n){var i=[];return n.forEach(function(n){i.push({title:n.description||"",text:n.name,action:function(){c.requireModules(["WorkItemTracking/Scripts/Utils/WorkItemTemplateUtils"]).spread(function(i){var u={},o,e,s;u[i.TemplatesTelemetry.PropType]=n.workItemTypeName;u[i.TemplatesTelemetry.PropNumOfWorkItems]=t.workItemIds?t.workItemIds.length:1;u[i.TemplatesTelemetry.PropContext]=t.ciSourceAreaName;o=new d.TelemetryEventData(i.TemplatesTelemetry.Area,i.TemplatesTelemetry.FeatureContextMenu,u);d.publishEvent(o);e={tfsContext:t.tfsContext,workItem:t.workItem,workItemIds:t.workItemIds,templateId:n.id,immediateSave:t.immediateSave,ownerId:r};t.immediateSave?(s=b.format(a.BulkEdit_ApplyTemplateMessage,n.name),f.showMessageDialog(s,{title:a.BulkEdit_ApplyTemplateTitle,buttons:[{id:"ok",text:a.BulkEdit_ApplyTemplateButton,reject:!1},{id:"cancel",text:nt.ModalDialogCancelButton,reject:!0}]}).then(function(n){n.button.id==="ok"&&i.WorkItemTemplatesHelper.getWorkItemTemplateAndBulkUpdateWorkItems(e)})):i.WorkItemTemplatesHelper.getWorkItemTemplateAndBulkUpdateWorkItems(e)})}})}),i});return i.all([ot,ct]).then(function(n){for(var r,e,i=[],u=0,f=n;u<f.length;u++)r=f[u],r&&r.length!==0&&(i.length>0&&i.push({separator:!0}),i.push.apply(i,r));return n.length===2&&n[0]&&n[0].length>0&&!(n[1]&&n[1].length>0)&&(i.push({separator:!0}),i.push({text:a.WorkItemTemplates_NoTemplatesDisabledMenuItemTitle,disabled:!0})),e={id:"work-item-templates",groupId:t.groupId,rank:t.rank,text:a.WorkItemTemplates_ContextMenuItem_Text,icon:"css://bowtie-icon bowtie-auto-fill-template",showText:!0,childItems:i},[e]},function(n){return n&&n.name&&n.message?l.publishErrorToTelemetry(n):l.publishErrorToTelemetry({name:"UnexpectedWorkItemTemplatesContextMenuException",message:c.getErrorMessage(n)}),[]})}}}};s.VSS.register("ms.vss-work-web.work-item-templates-menu",n)}()});

define("WorkItemTracking/Scripts/Utils/ServiceFactory",["require","exports","VSS/Service","WorkItemTracking/Scripts/Services/WorkItemTemplateService"],function(n,t,i,r){function u(n){var t=__assign(__assign({},n),{team:null});return i.getService(r.WorkItemTemplateService,t)}Object.defineProperty(t,"__esModule",{value:!0});t.GetWorkItemTemplateService=void 0;t.GetWorkItemTemplateService=u});

define("WorkItemTracking/Scripts/MenuItems/TeamAgnosticWorkItemTemplatesMenuItem",["require","exports","VSS/Context","VSS/Controls/Dialogs","VSS/Resources/VSS.Resources.Platform","VSS/SDK/Shim","VSS/Utils/String","VSS/VSS","WorkItemTracking/Scripts/MenuItems/CreateWorkItemTemplatesMenuItem","WorkItemTracking/Scripts/MenuItems/MenuItemHelpers","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/ServiceFactory"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTemplatesMenuItem=void 0,function(){f.VSS.register("ms.vss-work-web.team-agnostic-work-item-templates-menu",{getMenuItems:function(n){return a.getMenuItems(n)}})}();var a=function(){function n(){}return n.getMenuItems=function(n){var r=this,i=h.GetContextMenuLocation(n),t;if(i===h.MenuItemLocation.Backlog||i===h.MenuItemLocation.WorkItemForm||i===h.MenuItemLocation.Queries)return(t=s.getMenuItemProperties(n),!this._shouldShowTemplateMenuItem(t))?void 0:this._getWorkItemTemplatesAsync(t.workItemTypes[0]).then(function(n){var i=__spreadArray([r._getCaptureTemplateMenuItem(t),{separator:!0}],r._getTemplateSubMenuItems(t,n),!0),u=t.groupId,f=t.rank;return[{id:"work-item-templates",text:c.WorkItemTemplates_ContextMenuItem_Text,icon:"bowtie-icon bowtie-auto-fill-template",groupId:u,rank:f,childItems:i}]})},n._shouldShowTemplateMenuItem=function(n){var r=n.workItemIds,u=n.workItemTypes,o=n.workItem,f=n.projectNames,t=i.getDefaultWebContext().project,s=t&&t.id&&t.name&&Object.keys(f).every(function(n){return e.equals(f[n],t.name,!0)}),h=r&&r.length>0||!!o,c=u&&u.length===1;return s&&h&&c},n._getWorkItemTemplatesAsync=function(n){return l.GetWorkItemTemplateService(i.getDefaultWebContext()).getMyWorkItemTemplatesForWorkItemType(n)},n._getCaptureTemplateMenuItem=function(n){return{title:c.WorkItemTemplates_CaptureTemplateMenuItem_TooManyItemsTooltip,text:c.WorkItemTemplates_CaptureTemplateMenuItem_Text,action:function(){o.requireModules(["WorkItemTracking/Scripts/Dialogs/WorkItemTemplates/WorkItemTemplateCaptureDialog"]).spread(function(t){t.launchCaptureWorkItemTemplateDialog(n,!0)})},disabled:n.workItemIds&&n.workItemIds.length>1,icon:"bowtie-icon bowtie-camera"}},n._getTemplateSubMenuItems=function(n,t){var f,h,i,s,l;if(!t||t.length===0)return[];for(f=[],h=function(t){f.push({title:t.description||e.empty,text:t.name,action:function(){o.requireModules(["WorkItemTracking/Scripts/Utils/WorkItemTemplateUtils"]).spread(function(i){var s=n.tfsContext,f=n.immediateSave,h=n.workItem,l=n.workItemIds,o={templateId:t.id,ownerId:t.ownerId,tfsContext:s,workItem:h,workItemIds:l,immediateSave:f};f?r.showMessageDialog(e.format(c.BulkEdit_ApplyTemplateMessage,t.name),{title:c.BulkEdit_ApplyTemplateTitle,buttons:[{id:"ok",text:c.BulkEdit_ApplyTemplateButton,reject:!1},{id:"cancel",text:u.ModalDialogCancelButton,reject:!0}]}).then(function(n){n.button.id==="ok"&&i.WorkItemTemplatesHelper.getWorkItemTemplateAndBulkUpdateWorkItems(o)}):i.WorkItemTemplatesHelper.getWorkItemTemplateAndBulkUpdateWorkItems(o)})}})},i=0,s=t;i<s.length;i++)l=s[i],h(l);return f},n}();t.WorkItemTemplatesMenuItem=a});

if (window.performance && window.performance.mark) { window.performance.mark('endLoadBundleInner-view'); }