"use strict";define("Reporting/Common",["require","exports","VSS/Platform/Context"],function(e,t,a){!function(e){t.BatchQuery={},t.BatchQuery.batchGet=function e(t,a=500,r=0){return t(a,r).then(i=>i.length<a?i:e(t,a,r+i.length).then(e=>i.concat(e)))}}(),t.ICacheableDataQualityQuery={},t.ICacheableQuery={},function(e){t.CacheableQueryService={},t.CacheableQueryService.ICacheableQueryServiceName="ICacheableQueryService";class r extends a.VssService{_serviceStart(e){super._serviceStart(e),this._pageContext=e,this.resetCache()}resetCache(){this._cache={},this._dataQualityCache={}}getCacheableQueryResult(e){const t=e.getKey(),a=this.getEntry(t);if(a)return this.notifyCacheHit(e),a;if("runDataQualityAwareQuery"in e)return this.runQueryAndSplitPromises(e).dataPromise;{const a=e.runQuery(this._pageContext);return this.setEntry(t,a),a}}getDataQualityWarnings(e){const t=e.getKey(),a=this.getDataQualityEntry(t);return a?(this.notifyCacheHit(e),a):this.runQueryAndSplitPromises(e).dataQualityPromise}hasCachedEntry(e){const t=e.getKey();return!!this.getEntry(t)}runQueryAndSplitPromises(e){const t=e.getKey(),a=e.runDataQualityAwareQuery(this._pageContext),r=a.then(e=>e.data),i=a.then(e=>e.dataQualityWarnings);return this.setEntry(t,r),this.setDataQualityEntry(t,i),{dataPromise:r,dataQualityPromise:i}}notifyCacheHit(e){null!=e&&null!=e.onCacheHit&&e.onCacheHit(this._pageContext)}getEntry(e){return this._cache[e]}setEntry(e,t){this._cache[e]=t}getDataQualityEntry(e){return this._dataQualityCache[e]}setDataQualityEntry(e,t){this._dataQualityCache[e]=t}}t.CacheableQueryService.CacheableQueryService=r,a.Services.add(t.CacheableQueryService.ICacheableQueryServiceName,{serviceFactory:r})}()},["BatchQuery","ICacheableDataQualityQuery","ICacheableQuery","CacheableQueryService"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-reporting.reporting-common"}}));