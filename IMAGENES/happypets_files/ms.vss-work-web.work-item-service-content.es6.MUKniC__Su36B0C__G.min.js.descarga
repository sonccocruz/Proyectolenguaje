"use strict";define("Wit/WorkItem/Service",["require","exports","react","VSS/Platform/Context","VSS/Platform/FPS","VSS/Platform/Layout","VSS/Platform/Location","Wit/Clients/Wit/RestClient/WorkItemTracking"],function(e,t,r,o,s,i,a,n){t.index={},function(e){t.WorkItemService={};class c extends o.VssService{createWorkItem(e,t,o,n){if(0===t){const t=this.pageContext.getService("ITfsPageService").getData();if(t&&t.project){let r=`${(0,a.routeUrl)(this.pageContext,"ms.vss-work-web.work-items-create-route",{project:t.project.name})}/${e}`;if(n&&Object.keys(n).length>0){r=`${r}?${Object.keys(n).map(e=>`[${e}]=${n[e]}`).join("&")}`}(0,s.FastPageSwitch)(this.pageContext,r,!0)}}else{this.pageContext.getService("IVssLayoutManager").renderCallout(t=>r.createElement(i.WrappedComponent,{wrappedType:"legacy",dependencies:["ms.vss-web.legacy-content"],wrappedProps:{modules:["WorkItemTracking/SharedScripts/WorkItemDialogShim"],wrappedType:"createNewWorkItemDialog",workItemTypeName:e,onDismiss:t,options:o,initialValues:n}}))}}openWorkItemWithProps(e){this.pageContext.getService("IVssLayoutManager").renderCallout(t=>{return r.createElement(i.WrappedComponent,{wrappedType:"work-item-form-dialog",dependencies:["ms.vss-work-web.work-item-dialogs"],wrappedProps:Object.assign(Object.assign({},e),{onDismiss:()=>{var r;null===(r=e.onDismiss)||void 0===r||r.call(e),t()}})})})}openWorkItem(e,t,o){this.pageContext.getService("IVssLayoutManager").renderCallout(s=>r.createElement(i.WrappedComponent,{wrappedType:"legacy",dependencies:["ms.vss-web.legacy-content"],wrappedProps:{modules:["WorkItemTracking/SharedScripts/WorkItemDialogShim"],wrappedType:"WorkItemDialog",workItemId:e,onDismiss:s,options:t,tryGetLatest:o}}))}getWorkItemUrl(e,t){return(0,a.routeUrl)(this.pageContext,"ms.vss-work-web.work-item-view-route",{id:e.toString(10),project:t})}async loadWorkItem(e,t,r){const o=(await Promise.all(this.loadWorkItems(e,[t],r))).flat();return o.length?o[0]:void 0}loadWorkItems(e,t,r){const o=[];for(var s=0;s<t.length;s+=c.workItemBatchSize)o.push(t.slice(s,s+c.workItemBatchSize));const i=(0,n.getWorkItemTrackingClient)(this.pageContext);return o.map(t=>{const o={errorPolicy:2,ids:t,fields:r};return i.getWorkItemsBatch(o,e)})}}c.workItemBatchSize=200,o.Services.add("work-item-service",{serviceFactory:c})}()},["index","WorkItemService"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-work-web.work-item-service-content"}}));