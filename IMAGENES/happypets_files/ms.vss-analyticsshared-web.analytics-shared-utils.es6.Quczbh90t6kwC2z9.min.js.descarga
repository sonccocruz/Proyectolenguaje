"use strict";define("Analytics/Shared/Utils",["require","exports","VSS/Core/Util/String"],function(t,r,e){var o,n;o=r.Resources={},r.Resources.DurationFormatForMilliSeconds="{0} milliseconds",r.Resources.DurationFormatForSeconds="{0} seconds",r.Resources.DurationFormatForMinutes="{0} minutes",r.Resources.DurationFormatForHours="{0} hours",r.Resources.DurationFormatForDays="{0} days",r.Resources.ShortDurationFormatForMilliSeconds="{0}ms",r.Resources.ShortDurationFormatForSeconds="{0}s",r.Resources.ShortDurationFormatForMinutes="{0} mins",r.Resources.ShortDurationFormatForHours="{0} hours",r.Resources.ShortDurationFormatForDays="{0} days",function(t){let e,o;function a(){return o||(o={name:"en-US",numberFormat:{CurrencyDecimalDigits:2,CurrencyDecimalSeparator:".",CurrencyGroupSizes:[3],NumberGroupSizes:[3],PercentGroupSizes:[3],CurrencyGroupSeparator:",",CurrencySymbol:"$",NaNSymbol:"NaN",CurrencyNegativePattern:0,NumberNegativePattern:1,PercentPositivePattern:0,PercentNegativePattern:0,NegativeInfinitySymbol:"-Infinity",NegativeSign:"-",NumberDecimalDigits:2,NumberDecimalSeparator:".",NumberGroupSeparator:",",CurrencyPositivePattern:0,PositiveInfinitySymbol:"Infinity",PositiveSign:"+",PercentDecimalDigits:2,PercentDecimalSeparator:".",PercentGroupSeparator:",",PercentSymbol:"%",PerMilleSymbol:"â€°",NativeDigits:["0","1","2","3","4","5","6","7","8","9"],DigitSubstitution:1},numberShortForm:{QuantitySymbols:["K","M","B"],NumberGroupSize:1e3,ThousandSymbol:"K"}}),o}function u(){return e||(e=a()),e}n=r.Culture={},r.Culture.getInvariantCulture=a,r.Culture.getCurrentCulture=u,r.Culture.getCurrentCultureName=function(){return u().name},r.Culture.getNumberFormat=function(){return u().numberFormat},r.Culture.getNumberShortForm=function(){return u().numberShortForm}}(),function(t){r.DateSKParser={};r.DateSKParser.DateSKParser=class{static parseDateSKAsDateString(t){if(null!=t){const r=t.toString();return`${r.substr(0,4)}-${r.substr(4,2)}-${r.substr(6,2)}`}return""}static dateStringToDateSK(t){return+t.split("-").join("")}static convertDateToDateString(t){const r=t.getFullYear(),e=t.getMonth()+1,o=t.getDate();return[r,e<=9?"0"+e:e,o<=9?"0"+o:o].join("-")}static parseDateSKAsDate(t){return new Date(this.parseDateSKAsDateString(t))}}}(),function(t){function e(){return new Date}function o(t,r,o=!1){let a=e();return a.setTime(t.getTime()+864e5*r),o&&(a=n(t,a)),a}function n(t,r,e){let n=r;null!=e&&(n=e);const a=t.getTimezoneOffset(),u=r.getTimezoneOffset();return a!==u&&(n=o(n,(u-a)/1440)),n}r.DateUtils={},r.DateUtils.getDate=e,r.DateUtils.shiftToUTC=function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())},r.DateUtils.addDays=o,r.DateUtils.adjustOffsetForTimes=n,r.DateUtils.convertDateToDateString=function(t){const r=t.getFullYear(),e=t.getMonth()+1,o=t.getDate();return[r,e<=9?"0"+e:e,o<=9?"0"+o:o].join("-")}}(),function(t){r.Duration={},r.Duration.formatDuration=function(t){const r={shortDuration:"",duration:""},n=t/1e3;if(n<2)return r.shortDuration=(0,e.format)(o.ShortDurationFormatForMilliSeconds,Math.round(t)),r.duration=(0,e.format)(o.DurationFormatForMilliSeconds,Math.round(t)),r;const a=n/60;if(a<2)return r.shortDuration=(0,e.format)(o.ShortDurationFormatForSeconds,Math.round(n)),r.duration=(0,e.format)(o.DurationFormatForSeconds,Math.round(n)),r;const u=a/60;if(u<2)return r.shortDuration=(0,e.format)(o.ShortDurationFormatForMinutes,Math.round(a)),r.duration=(0,e.format)(o.DurationFormatForMinutes,Math.round(a)),r;const i=u/24;return i<2?(r.shortDuration=(0,e.format)(o.ShortDurationFormatForHours,Math.round(u)),r.duration=(0,e.format)(o.DurationFormatForHours,Math.round(u)),r):(r.shortDuration=(0,e.format)(o.ShortDurationFormatForDays,Math.round(i)),r.duration=(0,e.format)(o.DurationFormatForDays,Math.round(i)),r)}}(),function(t){function e(t,r){if(0===t)return 0;const e=Math.round(r/t*1e4)/100;return r>0&&0===e?.01:r<t&&100===e?99.99:e}function o(t,r,e){for(let o=t.length;o<r;o++)t=e?"0"+t:t+"0";return t}function a(t,r,e){let a,u,i,s,c,m,l,S,D,g=t.toString(),f="";if(u=e?e.numberFormat:n.getNumberFormat(),i=g.split(/e/i),g=i[0],a=i.length>1?parseInt(i[1],10):0,i=g.split("."),g=i[0],f=i.length>1?i[1]:"",a>0?(g+=(f=o(f,a,!1)).slice(0,a),f=f.substr(a)):a<0&&(f=(g=o(g,(a=-a)+1,!0)).slice(-a,g.length)+f,g=g.slice(0,-a)),f.length>0&&(f=u.NumberDecimalSeparator+f),!0===r){for(s=u.NumberGroupSizes,c=u.NumberGroupSeparator,m=s[0],l=1,S=g.length-1,D="";S>=0;){if(0===m||m>S)return D.length>0?g.slice(0,S+1)+c+D+f:g.slice(0,S+1)+f;D=D.length>0?g.slice(S-m+1,S+1)+c+D:g.slice(S-m+1,S+1),S-=m,l<s.length&&(m=s[l],l++)}return g.slice(0,S+1)+c+D+f}return g+f}r.Number={},r.Number.getPercentage=e,r.Number.getPercentageVariation=function(t,r){return e(t,Math.abs(t-r))},r.Number.toDecimalLocaleString=a,r.Number.formatAbbreviatedNumber=function(t,r){let e,o,u;const i=(t,r,e,o)=>t?(r.toFixed(e)+t).replace(".",o):a(r,!1);if(e="",r?(o=r.numberShortForm,u=r.numberFormat.NumberDecimalSeparator):(o=n.getNumberShortForm(),u=n.getNumberFormat().NumberDecimalSeparator),t<1e3?e=i("",t,0,""):t/1e3<10&&(e=i(o.ThousandSymbol,t/1e3,1,u)),t/o.NumberGroupSize>1){for(let r=0;r<o.QuantitySymbols.length;r++){const n=Math.pow(o.NumberGroupSize,r+1);if(t/n<10){e=i(o.QuantitySymbols[r],t/n,1,u);break}if(t/n<o.NumberGroupSize){e=i(o.QuantitySymbols[r],t/n,0,"");break}}""==e&&(e=t.toExponential(0))}return e}}(),function(t){r.URLHelper={},r.URLHelper.getDefinitionIdFromUrl=function(t){const r=t.getService("IVssHistoryService").getState();return parseInt(r[e],10)||0},r.URLHelper.getContextTypeFromUrl=function(t){return t.getService("IVssHistoryService").getState()[o]||"build"};const e="definitionId",o="contextType"}()},["Resources","Culture","DateSKParser","DateUtils","Duration","Number","URLHelper"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-analyticsshared-web.analytics-shared-utils"}}));