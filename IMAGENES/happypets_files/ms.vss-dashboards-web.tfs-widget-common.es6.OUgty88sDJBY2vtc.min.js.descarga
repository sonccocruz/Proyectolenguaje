"use strict";define("Tfs/Widget",["require","exports","VSS/Platform/Context","VSS/Platform/UserClaims"],function(e,t,r,s){!function(e){var s;t.Context={},function(e){e[e.Tfvc=0]="Tfvc",e[e.Git=1]="Git"}(s=t.Context.RepositoryType||(t.Context.RepositoryType={}));class i extends r.VssService{getProject(e){const t=e.getService("ITfsPageService").getData();if(!t||!t.project)throw new Error("Couldn't fetch project information.");return t.project}getUserName(e){const t=e.getService("IVssPageService").getData();if(!t||!t.user||!t.user.displayName)throw new Error("Couldn't fetch user name");return t.user.displayName}isAdmin(e){return e.getService("IDashboardsUserPermissionService").CanManagePermissionForDashboards()}isHosted(e){const t=e.getService("IVssPageService").getData();if(!t)throw new Error("Couldn't verify if environment is hosted");return t.isHosted}}i.TfvcPathRoot="$/",r.Services.add("ITfsWidgetContextService",{serviceFactory:i}),t.Context.getProject=function(e){return e.getService("ITfsWidgetContextService").getProject(e)},t.Context.getUserName=function(e){return e.getService("ITfsWidgetContextService").getUserName(e)},t.Context.isAdmin=function(e){return e.getService("ITfsWidgetContextService").isAdmin(e)},t.Context.isHosted=function(e){return e.getService("ITfsWidgetContextService").isHosted(e)},t.Context.getRepoType=function(e){return 0==e.indexOf(i.TfvcPathRoot)?s.Tfvc:s.Git}}(),function(e){t.LinkPermissionsHelper={};class r{static isMemberUser(e){return(0,s.userHasClaim)(e,"member")}static canUserAccessWITQueriesPage(e){return r.isMemberUser(e)}}t.LinkPermissionsHelper.LinkPermissionsHelper=r}()},["Context","LinkPermissionsHelper"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-dashboards-web.tfs-widget-common"}}));